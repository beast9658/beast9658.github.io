[{"id":"b3d40160b165ebd8debc4be9e2a0af94","title":"åŸºäº ChatGPT å’Œ React æ­å»º JSON è½¬ TS çš„ Web åº”ç”¨","content":"\nåœ¨æœ¬æ–‡ä¸­ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨ ChatGPT API æ„å»ºä¸€ä¸ªå°† JSON å¯¹è±¡è½¬æ¢ä¸º Typescript interface çš„ Web åº”ç”¨\nä¸ºä»€ä¹ˆä½ éœ€è¦å®ƒï¼Ÿè®¸å¤šç½‘ç«™ä¸ºä¸åŒçš„åœºæ™¯æä¾› API\nç®€å•çš„è§£å†³æ–¹æ¡ˆæ˜¯å‘é€ JSON å¹¶è¿”å› Typescript ä¸­çš„interface\nä½ ä¹Ÿå¯ä»¥ä½¿ç”¨Â JSON-to-typescriptÂ åº“æ¥å®ç°ï¼Œä½†æˆ‘å°†ä½¿ç”¨ ChatGPT å‘ä½ å±•ç¤ºè¿™ä¸€ç‚¹ï¼Œå› ä¸ºä½ çŸ¥é“ï¼Œæˆ‘å–œæ¬¢é­”æ³•ï¼ˆAIï¼‰ ğŸª„â­ï¸\n\nä»€ä¹ˆæ˜¯Â ChatGPT ï¼ŸChatGPT æ˜¯ä¸€ç§ç”±Â OpenAIÂ è®­ç»ƒçš„ AI è¯­è¨€æ¨¡å‹ï¼Œå¯ä»¥ç”Ÿæˆæ–‡æœ¬å¹¶ä»¥ç±»ä¼¼äººç±»çš„å¯¹è¯æ–¹å¼ä¸ç”¨æˆ·è¿›è¡Œäº¤äº’ã€‚ç”¨æˆ·å¯ä»¥åœ¨çŸ­çŸ­å‡ ç§’é’Ÿå†…æäº¤è¯·æ±‚å¹¶è·å¾—ä¿¡æ¯æˆ–ä»å¹¿æ³›çš„ä¸»é¢˜ä¸­è·å¾—é—®é¢˜çš„ç­”æ¡ˆã€‚\nChatGPTÂ è¿˜æœ‰åŠ©äºç¼–å†™ã€è°ƒè¯•å’Œè§£é‡Šä»£ç ç‰‡æ®µã€‚ å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒChatGPT åŠå…¶ API ç›®å‰å…è´¹å¼€æ”¾ç»™å…¬ä¼—ä½¿ç”¨ã€‚\nå› æ­¤åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å®ƒçš„ API æ„å»ºä¸€ä¸ª JSON åˆ° Typescript çš„è½¬æ¢å™¨\né¡¹ç›®è®¾ç½®åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä¼šä¸º Web åº”ç”¨åˆ›å»ºé¡¹ç›®ç¯å¢ƒã€‚ æˆ‘ä»¬å°†åœ¨å‰ç«¯ä½¿ç”¨ React.jsï¼Œåœ¨åç«¯ä½¿ç”¨ Node.js\né€šè¿‡è¿è¡Œä»¥ä¸‹ä»£ç ä¸º Web åº”ç”¨åˆ›å»ºé¡¹ç›®æ–‡ä»¶å¤¹ï¼š\nmkdir json-to-typescript-cn\ncd json-to-typescript-cn\nå¤åˆ¶ä»£ç \n\nè®¾ç½®Â Node.jsÂ æœåŠ¡ç«¯è¿›å…¥ server ç›®å½•å¹¶åˆ›å»ºä¸€ä¸ªÂ package.jsonÂ æ–‡ä»¶\nmkdir server\n\ncd server &amp; npm init -y\nå¤åˆ¶ä»£ç \n\nå®‰è£… Expressï¼Œ Nodemon ï¼Œ CORSï¼Œ dotenv åŒ…\nnpm install express cors nodemon dotenv\nå¤åˆ¶ä»£ç \n\nExpressJSÂ æ˜¯ä¸€ä¸ªå¿«é€Ÿã€æç®€çš„æ¡†æ¶ï¼Œå®ƒæä¾›äº†å¤šç§ç”¨äºåœ¨ Node.js ä¸­æ„å»º Web åº”ç”¨ç¨‹åºçš„åŠŸèƒ½ï¼›Â CORSÂ æ˜¯ä¸€ä¸ªå…è®¸ä¸åŒåŸŸä¹‹é—´é€šä¿¡çš„ Node.js åŒ…ï¼Œè€ŒÂ NodemonÂ æ˜¯ä¸€ä¸ªåœ¨æ£€æµ‹åˆ°æ–‡ä»¶æ›´æ”¹åè‡ªåŠ¨é‡å¯æœåŠ¡å™¨çš„ Node.js å·¥å…·ã€‚DotenvÂ æ˜¯ä¸€ä¸ªé›¶ä¾èµ–æ¨¡å—ï¼Œå®ƒå°†ç¯å¢ƒå˜é‡ä» .env æ–‡ä»¶åŠ è½½åˆ° process.env ä¸­ã€‚\nåˆ›å»ºä¸€ä¸ªÂ index.jsÂ æ–‡ä»¶ä½œä¸º Web æœåŠ¡å™¨çš„å…¥å£\ntouch index.js\nå¤åˆ¶ä»£ç \n\nä½¿ç”¨ Express.js è®¾ç½® Node.js æœåŠ¡å™¨ã€‚ å½“æµè§ˆå™¨è®¿é—®Â http://localhost:4000/apiÂ æ—¶ï¼Œä¸‹é¢çš„ä»£ç ç‰‡æ®µä¼šè¿”å›ä¸€ä¸ª JSON å¯¹è±¡\n&#x2F;&#x2F;ğŸ‘‡ğŸ»index.js\nconst express &#x3D; require(&quot;express&quot;);\nconst cors &#x3D; require(&quot;cors&quot;);\nconst app &#x3D; express();\nconst PORT &#x3D; 4000;\n\napp.use(express.urlencoded(&#123; extended: true &#125;));\napp.use(express.json());\napp.use(cors());\n\napp.get(&quot;&#x2F;api&quot;, (req, res) &#x3D;&gt; &#123;\n    res.json(&#123;\n        message: &quot;Hello world&quot;,\n    &#125;);\n&#125;);\n\napp.listen(PORT, () &#x3D;&gt; &#123;\n    console.log(&#96;Node.js æœåŠ¡æ­£åœ¨ç›‘å¬ $&#123;PORT&#125; ç«¯å£ ...&#96;);\n&#125;);\nå¤åˆ¶ä»£ç \n\né€šè¿‡å°† start å‘½ä»¤æ·»åŠ åˆ°Â package.jsonÂ æ–‡ä»¶ä¸­çš„ scripts åˆ—è¡¨æ¥é…ç½® Nodemonã€‚ ä¸‹é¢çš„ä»£ç ç‰‡æ®µä½¿ç”¨ Nodemon å¯åŠ¨æœåŠ¡å™¨ã€‚\n&#x2F;&#x2F;åœ¨ server&#x2F;package.json æ–‡ä»¶ä¸­\n\n&quot;scripts&quot;: &#123;\n    &quot;test&quot;: &quot;echo &quot;Error: no test specified&quot; &amp;&amp; exit 1&quot;,\n    &quot;start&quot;: &quot;nodemon index.js&quot;\n  &#125;,\nå¤åˆ¶ä»£ç \n\næ­å–œï¼ ä½ ç°åœ¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯åŠ¨æœåŠ¡å™¨ã€‚\nnpm start\nå¤åˆ¶ä»£ç \n\nè®¾ç½® React åº”ç”¨é€šè¿‡ç»ˆç«¯å¯¼èˆªåˆ°æ ¹ç›®å½•å¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„ React.js é¡¹ç›®\nnpm create vite@latest\n\nâœ” Project name:  client\nâœ” Select a framework: â€º React\nâœ” Select a variant: â€º JavaScript\n\ncd client \n\nnpm i \nå¤åˆ¶ä»£ç \n\nåœ¨ client ç›®å½•å®‰è£… Â Monaco Editor for ReactÂ å’Œ Â React Copy to ClipboardÂ åº“\n\nnpm install @monaco-editor&#x2F;react react-copy-to-clipboard\nå¤åˆ¶ä»£ç \n\nMonaco Editor for ReactÂ æ˜¯ä¸€ä¸ªååˆ†ç®€å•çš„åŒ…ï¼Œç”¨äºå°†ä»£ç ç¼–è¾‘å™¨æ·»åŠ åˆ° React åº”ç”¨ç¨‹åºï¼Œè€ŒÂ React Copy to ClipboardÂ åŒ…å…è®¸æˆ‘ä»¬é€šè¿‡å•å‡»æŒ‰é’®å¤åˆ¶å’Œç²˜è´´å†…å®¹\nä» React åº”ç”¨ç¨‹åºä¸­åˆ é™¤å¤šä½™çš„æ–‡ä»¶ï¼Œå¹¶æ›´æ–°Â App.jsxÂ æ–‡ä»¶ä»¥æ˜¾ç¤º â€œHello Worldâ€ ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚\nfunction App() &#123;\n    return (\n        &lt;div&gt;\n            &lt;p&gt;Hello World!&lt;&#x2F;p&gt;\n        &lt;&#x2F;div&gt;\n    );\n&#125;\nexport default App;\nå¤åˆ¶ä»£ç \n\nå¦‚ä¸‹æ‰€ç¤ºï¼Œæ›´æ–°Â src/index.cssÂ æ ·å¼æ–‡ä»¶\n@import url(&quot;&lt;https:&#x2F;&#x2F;fonts.googleapis.com&#x2F;css2?family&#x3D;Space+Grotesk:wght@300;400;500;600;700&amp;display&#x3D;swap&gt;&quot;);\n\n* &#123;\n    box-sizing: border-box;\n    margin: 0;\n    padding: 0;\n    font-family: &quot;Space Grotesk&quot;, sans-serif;\n&#125;\n.app &#123;\n    width: 100%;\n    min-height: 100vh;\n&#125;\n.loading &#123;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 100%;\n    height: 100vh;\n&#125;\n.header__container &#123;\n    width: 100%;\n    display: flex;\n    align-items: center;\n    height: 10vh;\n    background-color: #e0f2fe;\n&#125;\n.header__right &#123;\n    display: flex;\n    align-items: center;\n&#125;\n.runBtn &#123;\n    padding: 10px 5px;\n    width: 100px;\n    margin-right: 10px;\n    cursor: pointer;\n    border: none;\n    border-radius: 3px;\n    box-shadow: 0 0 1px 1px #e0e0ea;\n    background-color: #065f46;\n    outline: none;\n    color: #fff;\n&#125;\n.header &#123;\n    border: 1px solid #ddd;\n    padding: 10px 20px;\n    border: 1px solid #e8e2e2;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    flex: 0.5;\n    height: 100%;\n&#125;\n.code__container &#123;\n    display: flex;\n    height: 95vh;\n    width: 100%;\n    align-items: flex-start;\n&#125;\n.minimap &#123;\n    display: none;\n&#125;\n.editor &#123;\n    padding: 10px 0px;\n    width: 100%;\n&#125;\n.code,\n.output &#123;\n    width: 50vw;\n&#125;\n.deleteIcon &#123;\n    height: 25px;\n    color: #cf0a0a;\n    cursor: pointer;\n&#125;\n.copyIcon &#123;\n    height: 25px;\n    color: #3e54ac;\n    cursor: pointer;\n&#125;\nå¤åˆ¶ä»£ç \n\næ„å»ºåº”ç”¨ç”¨æˆ·ç•Œé¢åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†ä¸º JSON åˆ° Typescript è½¬æ¢å™¨åˆ›å»ºç”¨æˆ·ç•Œé¢ï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿåœ¨å±å¹•å·¦ä¾§æ·»åŠ  JSON å¯¹è±¡ï¼Œå¹¶åœ¨å±å¹•å³ä¾§æŸ¥çœ‹ Typescript ä¸­çš„ç»“æœã€‚\n\né¦–å…ˆï¼Œåœ¨Â client/srcÂ æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ª icons æ–‡ä»¶å¤¹ã€‚ icons æ–‡ä»¶å¤¹å°†åŒ…å«ä¸Šå›¾ä¸­çš„åˆ é™¤å’Œå¤åˆ¶å›¾æ ‡\ncd client&#x2F;src\nmkdir icons\ncd icons\ntouch Copy.jsx Delete.jsx\nå¤åˆ¶ä»£ç \n\næ›´æ–°Â Copy.jsxÂ æ–‡ä»¶ä»¥æ·»åŠ æ¥è‡ªÂ HeroiconsÂ çš„ SVG å›¾æ ‡\nimport React from &quot;react&quot;;\n\nconst Copy &#x3D; () &#x3D;&gt; &#123;\n    return (\n        &lt;svg\n            xmlns&#x3D;&#39;&lt;http:&#x2F;&#x2F;www.w3.org&#x2F;2000&#x2F;svg&gt;&#39;\n            viewBox&#x3D;&#39;0 0 24 24&#39;\n            fill&#x3D;&#39;currentColor&#39;\n            className&#x3D;&#39;w-6 h-6 copyIcon&#39;\n        &gt;\n            &lt;path d&#x3D;&#39;M7.5 3.375c0-1.036.84-1.875 1.875-1.875h.375a3.75 3.75 0 013.75 3.75v1.875C13.5 8.161 14.34 9 15.375 9h1.875A3.75 3.75 0 0121 12.75v3.375C21 17.16 20.16 18 19.125 18h-9.75A1.875 1.875 0 017.5 16.125V3.375z&#39; &#x2F;&gt;\n            &lt;path d&#x3D;&#39;M15 5.25a5.23 5.23 0 00-1.279-3.434 9.768 9.768 0 016.963 6.963A5.23 5.23 0 0017.25 7.5h-1.875A.375.375 0 0115 7.125V5.25zM4.875 6H6v10.125A3.375 3.375 0 009.375 19.5H16.5v1.125c0 1.035-.84 1.875-1.875 1.875h-9.75A1.875 1.875 0 013 20.625V7.875C3 6.839 3.84 6 4.875 6z&#39; &#x2F;&gt;\n        &lt;&#x2F;svg&gt;\n    );\n&#125;;\n\nexport default Copy;\nå¤åˆ¶ä»£ç \n\nå°†ä¸‹é¢çš„ä»£ç å¤åˆ¶åˆ°Â Delete.jsxÂ æ–‡ä»¶ä¸­ã€‚ å®ƒä¸ºåˆ é™¤æŒ‰é’®å‘ˆç°ä¸€ä¸ª SVG å›¾æ ‡ã€‚\nimport React from &quot;react&quot;;\n\nconst Delete &#x3D; () &#x3D;&gt; &#123;\n    return (\n        &lt;svg\n            xmlns&#x3D;&#39;&lt;http:&#x2F;&#x2F;www.w3.org&#x2F;2000&#x2F;svg&gt;&#39;\n            viewBox&#x3D;&#39;0 0 24 24&#39;\n            fill&#x3D;&#39;currentColor&#39;\n            className&#x3D;&#39;w-6 h-6 deleteIcon&#39;\n        &gt;\n            &lt;path\n                fillRule&#x3D;&#39;evenodd&#39;\n                d&#x3D;&#39;M16.5 4.478v.227a48.816 48.816 0 013.878.512.75.75 0 11-.256 1.478l-.209-.035-1.005 13.07a3 3 0 01-2.991 2.77H8.084a3 3 0 01-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 01-.256-1.478A48.567 48.567 0 017.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 013.369 0c1.603.051 2.815 1.387 2.815 2.951zm-6.136-1.452a51.196 51.196 0 013.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 00-6 0v-.113c0-.794.609-1.428 1.364-1.452zm-.355 5.945a.75.75 0 10-1.5.058l.347 9a.75.75 0 101.499-.058l-.346-9zm5.48.058a.75.75 0 10-1.498-.058l-.347 9a.75.75 0 001.5.058l.345-9z&#39;\n                clipRule&#x3D;&#39;evenodd&#39;\n            &#x2F;&gt;\n        &lt;&#x2F;svg&gt;\n    );\n&#125;;\n\nexport default Delete;\nå¤åˆ¶ä»£ç \n\næ›´æ–°Â App.jsxÂ æ–‡ä»¶æ¥æ¸²æŸ“ header å…ƒç´ ï¼Œå¦‚ä¸‹æ‰€ç¤º\nimport React from &quot;react&quot;;\nimport Delete from &quot;.&#x2F;icons&#x2F;Delete&quot;;\nimport Copy from &quot;.&#x2F;icons&#x2F;Copy&quot;;\n\nconst App &#x3D; () &#x3D;&gt; &#123;\n    const handleSubmit &#x3D; () &#x3D;&gt; &#123;\n        console.log(&quot;è¿è¡ŒæŒ‰é’®ç‚¹å‡»&quot;);\n    &#125;;\n\n    return (\n        &lt;main className&#x3D;&#39;app&#39;&gt;\n            &lt;header className&#x3D;&#39;header__container&#39;&gt;\n                &lt;div className&#x3D;&#39;header&#39;&gt;\n                    &lt;h3&gt;JSON&lt;&#x2F;h3&gt;\n                    &lt;div className&#x3D;&#39;header__right&#39;&gt;\n                        &lt;button className&#x3D;&#39;runBtn&#39; onClick&#x3D;&#123;handleSubmit&#125;&gt;\n                            è¿è¡Œ\n                        &lt;&#x2F;button&gt;\n                        &lt;Delete &#x2F;&gt;\n                    &lt;&#x2F;div&gt;\n                &lt;&#x2F;div&gt;\n\n                &lt;div className&#x3D;&#39;header&#39;&gt;\n                    &lt;h3&gt;Typescript&lt;&#x2F;h3&gt;\n                    &lt;Copy &#x2F;&gt;\n                &lt;&#x2F;div&gt;\n            &lt;&#x2F;header&gt;\n\n            &lt;div className&#x3D;&#39;code__container&#39;&gt;&lt;&#x2F;div&gt;\n        &lt;&#x2F;main&gt;\n    );\n&#125;;\n\nexport default App;\nå¤åˆ¶ä»£ç \n\nä¸Šé¢çš„ä»£ç ç‰‡æ®µæ˜¾ç¤ºäº† Web åº”ç”¨ç¨‹åºçš„ header ç»„ä»¶ã€‚ åœ¨æ¥ä¸‹æ¥çš„éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä¼šè¯´æ˜å¦‚ä½•å°† Monaco ä»£ç ç¼–è¾‘å™¨æ·»åŠ åˆ° React åº”ç”¨ç¨‹åº\næ·»åŠ Â Monaco ä»£ç ç¼–è¾‘å™¨åˆ° ReactMonaco Editor æ˜¯ä¸€æ¬¾è‘—åçš„åŸºäº Web æŠ€æœ¯çš„ä»£ç ç¼–è¾‘å™¨ï¼Œä¸º VS Code æä¾›æ”¯æŒï¼Œå®ƒåªéœ€è¦ä¸€è¡Œé›†æˆå³å¯æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€ã€‚\næˆ‘ä»¬å·²ç»åœ¨ä¸Šä¸€èŠ‚ä¸­å®‰è£…äº†åº“ã€‚ æ¥ä¸‹æ¥ï¼Œå°†å…¶å¯¼å…¥Â App.jsxÂ æ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤º\nimport React, &#123; useState &#125; from &quot;react&quot;;\nimport Delete from &quot;.&#x2F;icons&#x2F;Delete&quot;;\nimport Copy from &quot;.&#x2F;icons&#x2F;Copy&quot;;\nimport Editor from &quot;@monaco-editor&#x2F;react&quot;;\n\nconst App &#x3D; () &#x3D;&gt; &#123;\n    const [value, setValue] &#x3D; useState(&quot;&quot;);\n    const [output, setOutput] &#x3D; useState(&quot;&quot;);\n    const handleSubmit &#x3D; () &#x3D;&gt; &#123;\n        console.log(&quot;Run Button Clicked&quot;);\n    &#125;;\n\n    return (\n        &lt;main className&#x3D;&#39;app&#39;&gt;\n            &lt;header className&#x3D;&#39;header__container&#39;&gt;\n                &lt;div className&#x3D;&#39;header&#39;&gt;\n                    &lt;h3&gt;JSON&lt;&#x2F;h3&gt;\n                    &lt;div className&#x3D;&#39;header__right&#39;&gt;\n                        &lt;button className&#x3D;&#39;runBtn&#39; onClick&#x3D;&#123;handleSubmit&#125;&gt;\n                            RUN\n                        &lt;&#x2F;button&gt;\n                        &lt;Delete &#x2F;&gt;\n                    &lt;&#x2F;div&gt;\n                &lt;&#x2F;div&gt;\n\n                &lt;div&gt;\n                    &lt;h3&gt;Typescript&lt;&#x2F;h3&gt;\n                    &lt;Copy &#x2F;&gt;\n                &lt;&#x2F;div&gt;\n            &lt;&#x2F;header&gt;\n\n            &lt;div className&#x3D;&#39;code__container&#39;&gt;\n                &lt;div className&#x3D;&#39;code&#39;&gt;\n                    &lt;Editor\n                        height&#x3D;&#39;90vh&#39;\n                        className&#x3D;&#39;editor&#39;\n                        defaultLanguage&#x3D;&#39;json&#39;\n                        defaultValue&#x3D;&#39;&#123; &#125;&#39;\n                        value&#x3D;&#123;value&#125;\n                        onChange&#x3D;&#123;(value) &#x3D;&gt; setValue(value)&#125;\n                    &#x2F;&gt;\n                &lt;&#x2F;div&gt;\n                &lt;div className&#x3D;&#39;output&#39;&gt;\n                    &lt;Editor\n                        height&#x3D;&#39;90vh&#39;\n                        className&#x3D;&#39;editor&#39;\n                        defaultLanguage&#x3D;&#39;typescript&#39;\n                        options&#x3D;&#123;&#123;\n                            domReadOnly: true,\n                            readOnly: true,\n                        &#125;&#125;\n                        defaultValue&#x3D;&#39;&#39;\n                        value&#x3D;&#123;output&#125;\n                        onChange&#x3D;&#123;(value) &#x3D;&gt; setOutput(value)&#125;\n                    &#x2F;&gt;\n                &lt;&#x2F;div&gt;\n            &lt;&#x2F;div&gt;\n        &lt;&#x2F;main&gt;\n    );\n&#125;;\n\nexport default App;\nå¤åˆ¶ä»£ç \n\nä»ä¸Šé¢çš„ä»£ç ç‰‡æ®µä¸­ï¼Œæˆ‘ä» Monaco Editor åŒ…ä¸­å¯¼å…¥äº†Â EditorÂ ç»„ä»¶ã€‚ ç¬¬ä¸€ä¸ªç¼–è¾‘å™¨ç»„ä»¶æ¥å—è¯¸å¦‚Â heightã€valueã€defaultLanguageÂ å’ŒÂ onChangeÂ äº‹ä»¶ä¹‹ç±»çš„ props ç¬¬äºŒä¸ªç¼–è¾‘å™¨ç»„ä»¶æ¥å—ä¸ç¬¬ä¸€ä¸ªç›¸åŒçš„ propsï¼Œä½†æœ‰ä¸€ä¸ªåä¸ºÂ optionsÂ çš„é™„åŠ  propsï¼Œç”±äºå®ƒæ˜¯åªè¯»çš„ï¼Œå› æ­¤ä¼šç¦æ­¢ç”¨æˆ·ç¼–è¾‘å®ƒçš„å€¼\nå¦‚ä½•åœ¨ Node.js ä¸­ä¸ ChatGPT è¿›è¡Œé€šä¿¡åœ¨æœ¬èŠ‚ä¸­ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•é€šè¿‡ Node.js æœåŠ¡å™¨ä¸­çš„ API ä¸ ChatGPT è¿›è¡Œé€šä¿¡ã€‚ æˆ‘ä»¬ä¼šå°†ç”¨æˆ·æä¾›çš„ JSON ä»£ç å‘é€åˆ° APIï¼Œä»¥å°†ä»£ç è½¬æ¢ä¸ºå…¶ç­‰æ•ˆçš„ Typescriptã€‚ è¦åšåˆ°è¿™ä¸€ç‚¹ï¼š\né€šè¿‡è¿è¡Œä»¥ä¸‹ä»£ç å®‰è£… OpenAI API Node.js åº“\nnpm install openai\nå¤åˆ¶ä»£ç \n\nåœ¨Â æ­¤å¤„Â ç™»å½•æˆ–åˆ›å»º OpenAI å¸æˆ·\nå•å‡»å¯¼èˆªæ ä¸Šçš„Â PersonalÂ å¹¶ä»èœå•æ ä¸­é€‰æ‹©Â View API KeysÂ ä»¥åˆ›å»ºæ–°çš„å¯†é’¥ã€‚\n\n\nå°† API å¯†é’¥å¤åˆ¶åˆ°è®¡ç®—æœºä¸Šå®‰å…¨çš„åœ°æ–¹ï¼› æˆ‘ä»¬å¾ˆå¿«å°±ä¼šç”¨åˆ°å®ƒ\né€šè¿‡å°†ä»¥ä¸‹ä»£ç å¤åˆ¶åˆ° server&#x2F;index.js æ–‡ä»¶æ¥é…ç½® APIã€‚\nconst &#123; Configuration, OpenAIApi &#125; &#x3D; require(&quot;openai&quot;);\nconst dotenv &#x3D; require(&#39;dotenv&#39;)\n\ndotenv.config()\nconst GPT_API_KEY &#x3D; process.env.GPT_API_KEY\n\nif (!GPT_API_KEY) &#123;\n    console.log(&quot;è¯·é…ç½® ChatGPT API Key&quot;)\n    return\n&#125;\n\nconst configuration &#x3D; new Configuration(&#123;\n    apiKey: GPT_API_KEY,\n&#125;);\n\nconst openai &#x3D; new OpenAIApi(configuration);\nå¤åˆ¶ä»£ç \n\nåœ¨ server ç›®å½•ä¸‹åˆ›å»ºÂ .envÂ æ–‡ä»¶ï¼Œ å°†Â GPT_API_KEYÂ çš„å€¼æ›¿æ¢ä¸ºä½ çš„ API å¯†é’¥ã€‚\nGPT_API_KEY&#x3D;&quot;&lt;ä½ çš„ GPT API å¯†é’¥&gt;&quot;\nå¤åˆ¶ä»£ç \n\nåœ¨æœåŠ¡å™¨ä¸Šåˆ›å»ºä¸€ä¸ªÂ POSTÂ è·¯ç”±ï¼Œå®ƒå°†æ¥å—æ¥è‡ªå‰ç«¯çš„ JSON ä»£ç å¹¶ç”Ÿæˆå…¶ç­‰æ•ˆçš„ Typescript\n&#x2F;&#x2F; server&#x2F;index.js æ–‡ä»¶ä¸­\n\napp.post(&quot;&#x2F;convert&quot;, (req, res) &#x3D;&gt; &#123;\n    console.log(req.body);\n&#125;);\nå¤åˆ¶ä»£ç \n\næ›´æ–°å‰ç«¯Â App.jsxÂ æ–‡ä»¶ä¸­çš„Â handleSubmitÂ å‡½æ•°ï¼Œå°†ç”¨æˆ·è¾“å…¥çš„ JSON å¯¹è±¡å‘é€åˆ°æœåŠ¡å™¨ä¸Šçš„Â /convertÂ æ¥å£\nconst handleSubmit &#x3D; () &#x3D;&gt; &#123;\n    fetch(&quot;http:&#x2F;&#x2F;localhost:4000&#x2F;convert&quot;, &#123;\n        method: &quot;POST&quot;,\n        body: JSON.stringify(&#123;\n            value,\n        &#125;),\n        headers: &#123;\n            &quot;Content-Type&quot;: &quot;application&#x2F;json&quot;,\n        &#125;,\n    &#125;)\n        .then((res) &#x3D;&gt; res.json())\n        .then((data) &#x3D;&gt; &#123;\n            setOutput(data.response);\n        &#125;)\n        .catch((err) &#x3D;&gt; console.error(err));\n&#125;;\nå¤åˆ¶ä»£ç \n\næ›´æ–°Â /convertÂ æ¥å£ï¼Œå¦‚ä¸‹æ‰€ç¤º\napp.post(&quot;&#x2F;convert&quot;, async (req, res) &#x3D;&gt; &#123;\n    &#x2F;&#x2F;ğŸ‘‡ğŸ» è§£æ„ JSON å¯¹è±¡\n    let &#123; value &#125; &#x3D; req.body;\n\n    &#x2F;&#x2F;ğŸ‘‡ğŸ» å‘ ChatGPT æé—®\n    const prompt &#x3D; &#96;Convert the JSON object into Typescript interfaces \\n $&#123;value&#125; Please, I need the only the code, I don&#39;t need any explanations.&#96;;\n\n    const completion &#x3D; await openai.createChatCompletion(&#123;\n        model: &quot;gpt-3.5-turbo&quot;,\n        messages: [&#123; role: &quot;user&quot;, content: prompt &#125;],\n    &#125;);\n    res.json(&#123;\n        message: &quot;Successful&quot;,\n        response: completion.data.choices[0].message.content,\n    &#125;);\n&#125;);\nå¤åˆ¶ä»£ç \n\nä¸Šé¢çš„ä»£ç ç‰‡æ®µä» React åº”ç”¨ç¨‹åºæ¥å— JSON å¯¹è±¡ï¼Œä½¿ç”¨ JSON ä»£ç åˆ›å»ºæé—®ï¼Œå¹¶å°†å…¶å‘é€åˆ° ChatGPT APIã€‚ åŒ…å«ä¸è¯·æ±‚çš„ JSON ç­‰æ•ˆçš„ Typescript çš„å“åº”è¢«å‘é€å›å®¢æˆ·ç«¯ã€‚\nç”±äºæˆ‘ä»¬æ˜¯ä» Node.js æœåŠ¡è¯·æ±‚åˆ°å“åº”ï¼Œå› æ­¤å‘åº”ç”¨ç¨‹åºæ·»åŠ  loading çŠ¶æ€ç”¨äºåœ¨è¯·æ±‚è¿˜æ²¡æœ‰è¿”å›æ—¶é€šçŸ¥ç”¨æˆ·æ­£åœ¨è¯·æ±‚ä¸­ã€‚\né¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªÂ Loading.jsxÂ æ–‡ä»¶å¹¶å°†ä»¥ä¸‹ä»£ç å¤åˆ¶åˆ°è¯¥æ–‡ä»¶ä¸­\nconst Loading &#x3D; () &#x3D;&gt; &#123;\n    return (\n        &lt;div className&#x3D;&#39;loading&#39;&gt;\n            &lt;h2&gt;Loading...&lt;&#x2F;h2&gt;\n        &lt;&#x2F;div&gt;\n    );\n&#125;;\n\nexport default Loading;\nå¤åˆ¶ä»£ç \n\nåœ¨Â App.jsxÂ æ–‡ä»¶ä¸­æ·»åŠ  loading çŠ¶æ€\nconst [loading, setLoading] &#x3D; useState(false);\nå¤åˆ¶ä»£ç \n\næ›´æ–°Â handleSubmitÂ å‡½æ•°ä»¥åœ¨ç”¨æˆ·å•å‡» â€œè¿è¡Œâ€ æŒ‰é’®æˆ–è¯·æ±‚æˆåŠŸæ—¶æ›´æ–°åŠ è½½çŠ¶æ€\nconst handleSubmit &#x3D; () &#x3D;&gt; &#123;\n      &#x2F;&#x2F; ğŸ‘‡ğŸ» æ‰“å¼€ loading\n      setLoading(true);\n      fetch(&quot;http:&#x2F;&#x2F;localhost:4000&#x2F;convert&quot;, &#123;\n          method: &quot;POST&quot;,\n          body: JSON.stringify(&#123;\n              value,\n          &#125;),\n          headers: &#123;\n              &quot;Content-Type&quot;: &quot;application&#x2F;json&quot;,\n          &#125;,\n      &#125;)\n          .then((res) &#x3D;&gt; res.json())\n          .then((data) &#x3D;&gt; &#123;\n              &#x2F;&#x2F; ğŸ‘‡ğŸ» å…³é—­ loading\n              setLoading(false);\n              setOutput(data.response);\n          &#125;)\n          .catch((err) &#x3D;&gt; console.error(err));\n  &#125;;\nå¤åˆ¶ä»£ç \n\næœ‰æ¡ä»¶åœ°æ¸²æŸ“ç¬¬äºŒä¸ªä»£ç ç¼–è¾‘å™¨ï¼Œå¦‚ä¸‹æ‰€ç¤º\nreturn (\n        &lt;main className&#x3D;&#39;app&#39;&gt;\n           &#123;&#x2F;* -- å…¶ä»–ç»„ä»¶ --*&#x2F;&#125;\n\n            &lt;div className&#x3D;&#39;code__container&#39;&gt;\n              &lt;div className&#x3D;&#39;code&#39;&gt;\n                    &lt;Editor\n                        height&#x3D;&#39;90vh&#39;\n                        className&#x3D;&#39;editor&#39;\n                        defaultLanguage&#x3D;&#39;json&#39;\n                        defaultValue&#x3D;&#39;&#123; &#125;&#39;\n                        value&#x3D;&#123;value&#125;\n                        onChange&#x3D;&#123;(value) &#x3D;&gt; setValue(value)&#125;\n                    &#x2F;&gt;\n                &lt;&#x2F;div&gt;\n                &lt;div className&#x3D;&#39;output&#39;&gt;\n                  &#123;loading ? (\n                      &lt;Loading &#x2F;&gt;\n                  ) : (\n                      &lt;Editor\n                          height&#x3D;&#39;90vh&#39;\n                          className&#x3D;&#39;editor&#39;\n                          defaultLanguage&#x3D;&#39;typescript&#39;\n                          options&#x3D;&#123;&#123;\n                              domReadOnly: true,\n                              readOnly: true,\n                          &#125;&#125;\n                          defaultValue&#x3D;&#39;&#39;\n                          value&#x3D;&#123;output&#125;\n                          onChange&#x3D;&#123;(value) &#x3D;&gt; setOutput(value)&#125;\n                      &#x2F;&gt;\n                  )&#125;\n                &lt;&#x2F;div&gt;\n            &lt;&#x2F;div&gt;\n        &lt;&#x2F;main&gt;\n    );\nå¤åˆ¶ä»£ç \n\nå½“ç”¨æˆ·æäº¤ä¸€ä¸ª JSON å¯¹è±¡è¿›è¡Œè½¬æ¢æ—¶ï¼Œä¼šç«‹å³æ˜¾ç¤º Loading ç»„ä»¶ï¼Œç›´åˆ°è¯·æ±‚æˆåŠŸï¼Œç„¶ååœ¨ä»£ç ç¼–è¾‘å™¨ä¸Šæ˜¾ç¤ºç»“æœ\n\næ­å–œï¼ğŸŠ åº”ç”¨å°±å¿«è¦å®Œæˆäº†ã€‚ æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬æ·»åŠ ä¸€äº›é¢å¤–çš„åŠŸèƒ½ï¼Œä¾‹å¦‚é€šè¿‡å•å‡»æŒ‰é’®å¤åˆ¶æ‰€æœ‰ Typescript ä»£ç ä»¥åŠé€šè¿‡å•å‡»æŒ‰é’®æ¸…é™¤è¾“å…¥ç¼–è¾‘å™¨çš„æ‰€æœ‰å†…å®¹çš„èƒ½åŠ›ã€‚\nå¤åˆ¶ Typescript ä»£ç åœ¨è¿™é‡Œï¼Œä½ å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨Â React-copy-to-clipboardÂ åº“åœ¨å•å‡»æŒ‰é’®æ—¶å¤åˆ¶å’Œç²˜è´´å†…å®¹\næˆ‘ä»¬å·²ç»åœ¨æœ¬æ•™ç¨‹å¼€å¤´å®‰è£…äº†è¯¥åŒ…ã€‚ æ¥ä¸‹æ¥ï¼Œå°†å…¶å¯¼å…¥Â App.jsxÂ æ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚\nimport &#123; CopyToClipboard &#125; from &quot;react-copy-to-clipboard&quot;;\nå¤åˆ¶ä»£ç \n\nåœ¨æˆåŠŸå¤åˆ¶å†…å®¹åè¿è¡Œçš„ App.jsx æ–‡ä»¶ä¸­çš„ä¸€ä¸ªå‡½æ•°\nconst copyToClipBoard &#x3D; () &#x3D;&gt; alert(&#96;å·²å¤åˆ¶ âœ…&#96;);\nå¤åˆ¶ä»£ç \n\nç¼–å†™Â CopyToClipboardÂ ç»„ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤º\n&lt;CopyToClipboard text&#x3D;&#123;output&#125; onCopy&#x3D;&#123;copyToClipBoard&#125;&gt;\n    &lt;span&gt;\n        &lt;Copy &#x2F;&gt;\n    &lt;&#x2F;span&gt;\n&lt;&#x2F;CopyToClipboard&gt;\nå¤åˆ¶ä»£ç \n\nCopyToClipboardÂ ç»„ä»¶æ¥æ”¶ä¸€ä¸ª text propsï¼ˆåŒ…å«è¦å¤åˆ¶çš„å†…å®¹ï¼‰å’Œä¸€ä¸ª onCopy å±æ€§ï¼ˆä¸€ä¸ªåœ¨å¤åˆ¶å†…å®¹æˆåŠŸåè¿è¡Œçš„å‡½æ•°ï¼‰\nåˆ é™¤ç”¨æˆ·è¾“å…¥å¦‚æœè¦åˆ é™¤æ‰€æœ‰ç”¨æˆ·çš„è¾“å…¥ï¼Œéœ€è¦å°† value ä½œä¸º prop ä¼ é€’åˆ°Â &lt;Delete/&gt;Â ç»„ä»¶ä¸­\n&lt;Delete setValue&#x3D;&#123;setValue&#125; &#x2F;&gt;\nå¤åˆ¶ä»£ç \n\nå½“ç”¨æˆ·å•å‡»åˆ é™¤å›¾æ ‡æ—¶æ›´æ–° value çŠ¶æ€\nconst Delete &#x3D; (&#123; setValue &#125;) &#x3D;&gt; &#123;\n    return (\n        &lt;svg\n            xmlns&#x3D;&#39;&lt;http:&#x2F;&#x2F;www.w3.org&#x2F;2000&#x2F;svg&gt;&#39;\n            viewBox&#x3D;&#39;0 0 24 24&#39;\n            fill&#x3D;&#39;currentColor&#39;\n            className&#x3D;&#39;w-6 h-6 deleteIcon&#39;\n            onClick&#x3D;&#123;() &#x3D;&gt; setValue(&quot;&#123; &#125;&quot;)&#125;\n        &gt;\n            &lt;path\n                fillRule&#x3D;&#39;evenodd&#39;\n                d&#x3D;&#39;M16.5 4.478v.227a48.816 48.816 0 013.878.512.75.75 0 11-.256 1.478l-.209-.035-1.005 13.07a3 3 0 01-2.991 2.77H8.084a3 3 0 01-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 01-.256-1.478A48.567 48.567 0 017.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 013.369 0c1.603.051 2.815 1.387 2.815 2.951zm-6.136-1.452a51.196 51.196 0 013.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 00-6 0v-.113c0-.794.609-1.428 1.364-1.452zm-.355 5.945a.75.75 0 10-1.5.058l.347 9a.75.75 0 101.499-.058l-.346-9zm5.48.058a.75.75 0 10-1.498-.058l-.347 9a.75.75 0 001.5.058l.345-9z&#39;\n                clipRule&#x3D;&#39;evenodd&#39;\n            &#x2F;&gt;\n        &lt;&#x2F;svg&gt;\n    );\n&#125;;\n\nexport default Delete;\nå¤åˆ¶ä»£ç \n\næ€»ç»“åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»å­¦ä¹ äº†\n\nChatGPT æ˜¯ä»€ä¹ˆ\nå¦‚ä½•åœ¨ React åº”ç”¨ç¨‹åºä¸­æ·»åŠ é«˜æ•ˆçš„ä»£ç ç¼–è¾‘å™¨\nå¦‚ä½•åœ¨ Node.js ä¸­ä¸ ChatGPT é€šä¿¡\nå¦‚ä½•åœ¨ React ä¸­å•å‡»æŒ‰é’®æ—¶å¤åˆ¶ä¸åˆ é™¤å†…å®¹\n\næœ¬æ•™ç¨‹å®Œæˆä¸€ä¸ªå¯ä»¥ä½¿ç”¨ ChatGPT API æ„å»ºçš„åº”ç”¨ç¨‹åºç¤ºä¾‹ã€‚ é€šè¿‡ APIï¼Œä½ è¿˜å¯ä»¥åˆ›å»ºåŠŸèƒ½å¼ºå¤§çš„åº”ç”¨ç¨‹åºï¼Œåœ¨å„ä¸ªé¢†åŸŸéƒ½æœ‰ç”¨ï¼Œä¾‹å¦‚ç¿»è¯‘ã€é—®ç­”ã€ä»£ç è§£é‡Šæˆ–ç”Ÿæˆç­‰ã€‚\nå…¶ä»–\næœ¬æ•™ç¨‹çš„æºä»£ç å¯åœ¨æ­¤å¤„è·å¾—ï¼šgithub.com&#x2F;zidanDirk&#x2F;jâ€¦\næœ¬æ–‡ä¸ºç¿»è¯‘æ–‡ï¼ŒåŸæ–‡åœ°å€\n\n","slug":"åŸºäº ChatGPT å’Œ React æ­å»º JSON è½¬ TS çš„ Web åº”ç”¨","date":"2023-03-23T10:06:07.000Z","categories_index":"","tags_index":"","author_index":"Beastrong"},{"id":"3e28ba7063fc55b29481d21803e77406","title":"webpack ä¼˜åŒ–æ‰“åŒ…å¤§å…¨","content":"webpack ä¼˜åŒ–æ‰“åŒ…å¤§å…¨éšç€æˆ‘ä»¬çš„é¡¹ç›®é¡¹ç›®è¶Šåšè¶Šå¤§ï¼Œå¼•å…¥çš„ç¬¬ä¸‰æ–¹åº“ä¼šè¶Šæ¥è¶Šå¤šï¼Œæ‰“åŒ…çš„ä¾èµ–ä¹Ÿè¶Šæ¥è¶Šå¤šï¼Œæ¯æ¬¡ build çš„æ—¶é—´è¶Šæ¥è¶Šé•¿ï¼Œæ‰“åŒ…å‡ºæ¥çš„æ–‡ä»¶ä¼šè¶Šæ¥è¶Šå¤§ã€‚æœ€ç³Ÿç³•çš„æ˜¯å•é¡µé¢åº”ç”¨é¦–é¡µç™½å±æ—¶é—´é•¿ï¼Œç”¨æˆ·ä½“éªŒå·®ã€‚\næ­¤æ—¶ä¼˜åŒ– webpack æ‰“åŒ…æ–¹æ³•ä¸å¯å›é¿ã€‚ä¸‹é¢æˆ‘ä»¬æ¥æ•´ç†ä¸€ä¸‹å¸¸ç”¨çš„ webpack æ‰“åŒ…ä¼˜åŒ–æ–¹æ³•ã€‚\næˆ‘ä»¬çš„ç›®çš„\n\nå‡å°æ‰“åŒ…åçš„æ–‡ä»¶å¤§å°\né¦–é¡µæŒ‰éœ€å¼•å…¥æ–‡ä»¶ï¼Œå‡å°‘ç™½å±æ—¶é—´\nä¼˜åŒ– webpack æ‰“åŒ…æ—¶é—´\n\nåˆ†æ webpack æ‰“åŒ…æ€§èƒ½ç“¶é¢ˆé¦–å…ˆæˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹ webpack æ‰“åŒ…æ€§èƒ½ç“¶é¢ˆï¼Œæ‰¾å‡ºé—®é¢˜æ‰€åœ¨ï¼Œç„¶åæ‰èƒ½å¯¹ç—‡ä¸‹è¯ã€‚\n1ã€webpack-bundle-analyzer åˆ†æä½“ç§¯\nvue-cli3 éœ€è¦å®‰è£…ä¾èµ–Â webpack-bundle-analyzer\n\nnpm install webpack-bundle-analyzer -D\nconst &#123; BundleAnalyzerPlugin &#125; &#x3D; require(&#39;webpack-bundle-analyzer&#39;);\nplugins:[\n  new BundleAnalyzerPlugin(),\n]\n\n\nvue-cli2 ç›´æ¥åœ¨å‘½ä»¤è¡Œè¾“å…¥Â npm run build --report, æ„å»ºå®Œæˆåä¼šåœ¨ 8888 ç«¯å£å±•ç¤ºå¤§å°\n\n2ã€æµ‹é‡æ„å»ºæ—¶é—´æˆ‘ä»¬å¯ä»¥é€šè¿‡Â speed-measure-webpack-pluginÂ æµ‹é‡ä½ çš„ webpack æ„å»ºæœŸé—´å„ä¸ªé˜¶æ®µèŠ±è´¹çš„æ—¶é—´ã€‚\n\næ­¥éª¤ä¸€ï¼šå®‰è£…ä¾èµ–åŒ…\n\nnpm install speed-measure-webpack-plugin --save-dev\n\n\né…ç½® vue.config.js\n\n&#x2F;&#x2F; åˆ†ææ‰“åŒ…æ—¶é—´\nconst SpeedMeasurePlugin &#x3D; require(&#39;speed-measure-webpack-plugin&#39;)\nconst smp &#x3D; new SpeedMeasurePlugin()\n&#x2F;&#x2F; ...\nmodule.exports &#x3D; &#123;\n  configureWebpack: smp.wrap(&#123;\n    plugins: [new BundleAnalyzerPlugin()],\n  &#125;),\n&#125;\n\næ‰¾å‡ºé—®é¢˜æ‰€åœ¨åæˆ‘ä»¬å¼€å§‹æ¥æ€»ç»“ä¸€ä¸‹ä¼˜åŒ–æ–¹æ³•ã€‚\n1ã€ æŒ‰éœ€åŠ è½½1.1 è·¯ç”±ç»„ä»¶æŒ‰éœ€åŠ è½½\nconst router &#x3D; [\n  &#123;\n    path: &#39;&#x2F;index&#39;,\n    component: (resolve) &#x3D;&gt; require.ensure([], () &#x3D;&gt; resolve(require(&#39;@&#x2F;components&#x2F;index&#39;))),\n  &#125;,\n  &#123;\n    path: &#39;&#x2F;about&#39;,\n    component: (resolve) &#x3D;&gt; require.ensure([], () &#x3D;&gt; resolve(require(&#39;@&#x2F;components&#x2F;about&#39;))),\n  &#125;,\n]\n\n1.2 ç¬¬ä¸‰æ–¹ç»„ä»¶å’Œæ’ä»¶ã€‚æŒ‰éœ€åŠ è½½éœ€å¼•å…¥ç¬¬ä¸‰æ–¹ç»„ä»¶\n&#x2F;&#x2F; å¼•å…¥å…¨éƒ¨ç»„ä»¶\nimport ElementUI from &#39;element-ui&#39;\nimport &#39;element-ui&#x2F;lib&#x2F;theme-chalk&#x2F;index.css&#39;\nVue.use(ElementUI)\n\n&#x2F;&#x2F; æŒ‰éœ€å¼•å…¥ç»„ä»¶\nimport &#123; Button &#125; from &#39;element-ui&#39;\nVue.component(Button.name, Button)\n\n1.3 å¯¹äºä¸€äº›æ’ä»¶ï¼Œå¦‚æœåªæ˜¯åœ¨ä¸ªåˆ«ç»„ä»¶ä¸­ç”¨çš„åˆ°ï¼Œä¹Ÿå¯ä»¥ä¸è¦åœ¨ main.js é‡Œé¢å¼•å…¥ï¼Œè€Œæ˜¯åœ¨ç»„ä»¶ä¸­æŒ‰éœ€å¼•å…¥\n&#x2F;&#x2F; åœ¨main.jså¼•å…¥\nimport Vue from vue\nimport Vuelidate from &#39;vuelidate&#39;\nVue.use(Vuelidate)\n\n&#x2F;&#x2F; æŒ‰ç»„ä»¶æŒ‰éœ€å¼•å…¥\nimport &#123; Vuelidate &#125; from &#39;vuelidate&#39;\n\n1.4 å»é™¤æ‰“åŒ…åæ–‡ä»¶çš„é¢„åŠ è½½ prefetch&#x2F;preload\nvuecli 3 é»˜è®¤å¼€å¯ prefetch(é¢„å…ˆåŠ è½½æ¨¡å—)ï¼Œæå‰è·å–ç”¨æˆ·æœªæ¥å¯èƒ½ä¼šè®¿é—®çš„å†…å®¹ï¼Œåœ¨é¦–å±ä¼šæŠŠè¿™åå‡ ä¸ªè·¯ç”±æ–‡ä»¶ï¼Œéƒ½ä¸€å£æ°”ä¸‹è½½äº†ã€‚æ‰€ä»¥æˆ‘ä»¬è¦å…³é—­è¿™ä¸ªåŠŸèƒ½\n&#x2F;&#x2F;ç»†èŠ‚é…ç½®ä¿®æ”¹\nchainWebpack: (config) &#x3D;&gt; &#123;\n  &#x2F;&#x2F; ç§»é™¤ prefetch æ’ä»¶\n  config.plugins.delete(&#39;prefetch-index&#39;)\n  &#x2F;&#x2F; ç§»é™¤ preload æ’ä»¶\n  config.plugins.delete(&#39;preload-index&#39;)\n&#125;\n\n\npreload æ˜¯å‘Šè¯‰æµè§ˆå™¨é¡µé¢å¿…å®šéœ€è¦çš„èµ„æºï¼Œæµè§ˆå™¨ä¸€å®šä¼šåŠ è½½è¿™äº›èµ„æº\nprefetch æ˜¯å‘Šè¯‰æµè§ˆå™¨é¡µé¢å¯èƒ½éœ€è¦çš„èµ„æºï¼Œæµè§ˆå™¨ä¸ä¸€å®šä¼šåŠ è½½è¿™äº›èµ„æº\n\nå½“ prefetch æ’ä»¶è¢«ç¦ç”¨æ—¶ï¼Œä½ å¯ä»¥é€šè¿‡ webpack çš„å†…è”æ³¨é‡Šæ‰‹åŠ¨é€‰å®šè¦æå‰è·å–çš„ä»£ç åŒºå—ï¼š\nimport(&#x2F;* webpackPrefetch: true *&#x2F; &#39;.&#x2F;someAsyncComponent.vue&#39;)\n\n2ã€ç¼©å°æ„å»ºç›®æ ‡ä¼˜åŒ– loader é…ç½®æ’é™¤ Webpack ä¸éœ€è¦è§£æçš„æ¨¡å—ï¼Œå³ä½¿ç”¨ loader çš„æ—¶å€™ï¼Œåœ¨å°½é‡å°‘çš„æ¨¡å—ä¸­å»ä½¿ç”¨ã€‚\n\nä¼˜åŒ–æ­£åˆ™åŒ¹é…\né€šè¿‡Â cacheDirectoryÂ é€‰é¡¹å¼€å¯ç¼“å­˜\né€šè¿‡Â includeã€excludeÂ æ¥å‡å°‘è¢«å¤„ç†çš„æ–‡ä»¶ã€‚\n\nmodule: &#123;\n  rules: [\n    &#123;\n      test: &#x2F;.js$&#x2F;,\n      loader: &#39;babel-loader?cacheDirectory&#39;,\n      include: [resolve(&#39;src&#39;)],\n    &#125;,\n  ]\n&#125;\n\næ³¨æ„ï¼šä¿å­˜å’Œè¯»å–è¿™äº›ç¼“å­˜æ–‡ä»¶ä¼šæœ‰ä¸€äº›æ—¶é—´å¼€é”€ï¼Œæ‰€ä»¥è¯·åªå¯¹æ€§èƒ½å¼€é”€è¾ƒå¤§çš„ loader ä½¿ç”¨æ­¤ loaderã€‚\nåˆç†ä½¿ç”¨ resolve.extensionsåœ¨å¯¼å…¥è¯­å¥æ²¡å¸¦æ–‡ä»¶åç¼€æ—¶ï¼ŒWebpack ä¼šè‡ªåŠ¨å¸¦ä¸Šåç¼€åå»å°è¯•è¯¢é—®æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼ŒæŸ¥è¯¢çš„é¡ºåºæ˜¯æŒ‰ç…§æˆ‘ä»¬é…ç½® çš„ resolve.extensions é¡ºåºä»å‰åˆ°åæŸ¥æ‰¾ï¼ŒWebpack é»˜è®¤æ”¯æŒçš„åç¼€æ˜¯ js ä¸ jsonã€‚\né…ç½®åˆ«å aliasalias çš„æ„æ€ä¸º åˆ«åï¼Œèƒ½æŠŠåŸå¯¼å…¥è·¯å¾„æ˜ å°„æˆä¸€ä¸ªæ–°çš„å¯¼å…¥è·¯å¾„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ alias é…ç½®æ¥å‡å°‘æŸ¥æ‰¾è¿‡ç¨‹ã€‚\nresolve: &#123;\n  extensions: [&#39;.js&#39;, &#39;.vue&#39;, &#39;.json&#39;],\n  alias: &#123;\n    &#39;vue$&#39;: &#39;vue&#x2F;dist&#x2F;vue.esm.js&#39;,\n    &#39;@&#39;: resolve(&#39;src&#39;),\n  &#125;\n&#125;,\n\nä½¿ç”¨ module.noParse:è®© webpack å¿½ç•¥å¯¹éƒ¨åˆ†æ²¡é‡‡ç”¨æ¨¡å—åŒ–çš„æ–‡ä»¶çš„é€’å½’è§£æå¤„ç†ï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯èƒ½æé«˜æ„å»ºæ€§èƒ½ã€‚ å› ä¸ºå¦‚Â jQueryÂ ã€echartÂ ç­‰åº“åºå¤§åˆæ²¡æœ‰é‡‡ç”¨æ¨¡å—åŒ–æ ‡å‡†ï¼Œè®© webpack å»è§£æè¿™äº›æ–‡ä»¶è€—æ—¶åˆæ²¡æœ‰æ„ä¹‰ã€‚\nmodule:&#123;\n    noParse:&#x2F;jquery&#x2F;,&#x2F;&#x2F;ä¸å»è§£æjqueryä¸­çš„ä¾èµ–åº“\n  ...\n&#125;,\n\n4ã€ç”Ÿäº§ç¯å¢ƒå…³é—­ sourceMapsourceMapÂ æœ¬è´¨ä¸Šæ˜¯ä¸€ç§æ˜ å°„å…³ç³»ï¼Œæ‰“åŒ…å‡ºæ¥çš„ js æ–‡ä»¶ä¸­çš„ä»£ç å¯ä»¥æ˜ å°„åˆ°ä»£ç æ–‡ä»¶çš„å…·ä½“ä½ç½®,è¿™ç§æ˜ å°„å…³ç³»ä¼šå¸®åŠ©æˆ‘ä»¬ç›´æ¥æ‰¾åˆ°åœ¨æºä»£ç ä¸­çš„é”™è¯¯ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒï¼Œæ‰“åŒ…é€Ÿåº¦å‡æ…¢ï¼Œç”Ÿäº§æ–‡ä»¶å˜å¤§ï¼Œæ‰€ä»¥å¼€å‘ç¯å¢ƒä½¿ç”¨Â sourceMapï¼Œç”Ÿäº§ç¯å¢ƒåˆ™å…³é—­ã€‚\nsourceMap çš„ç§ç±»\n\nsource-map: ä¼šç”Ÿæˆ map æ ¼å¼çš„æ–‡ä»¶ï¼Œé‡Œé¢åŒ…å«æ˜ å°„å…³ç³»çš„ä»£ç \ninline-source-map: ä¸ä¼šç”Ÿæˆ map æ ¼å¼çš„æ–‡ä»¶ï¼ŒåŒ…å«æ˜ å°„å…³ç³»çš„ä»£ç ä¼šæ”¾åœ¨æ‰“åŒ…åç”Ÿæˆçš„ä»£ç ä¸­\ninline-cheap-source-map: ä¸€æ˜¯å°†é”™è¯¯åªå®šä½åˆ°è¡Œï¼Œä¸å®šä½åˆ°åˆ—ã€‚äºŒæ˜¯æ˜ å°„ä¸šåŠ¡ä»£ç ï¼Œä¸æ˜ å°„ loader å’Œç¬¬ä¸‰æ–¹åº“ç­‰ã€‚ä¼šæå‡æ‰“åŒ…æ„å»ºçš„é€Ÿåº¦ã€‚\ninline-cheap-module-source-map: module ä¼šæ˜ å°„ loader å’Œç¬¬ä¸‰æ–¹åº“\neval: ç”¨ eval çš„æ–¹å¼ç”Ÿæˆæ˜ å°„å…³ç³»ä»£ç ï¼Œæ•ˆç‡å’Œæ€§èƒ½æœ€ä½³ã€‚ä½†æ˜¯å½“ä»£ç å¤æ‚æ—¶ï¼Œæç¤ºä¿¡æ¯å¯èƒ½ä¸ç²¾ç¡®ã€‚\n\n5ã€ä»£ç å‹ç¼©UglifyJSUglifyJSÂ æ˜¯ vue-cli é»˜è®¤ä½¿ç”¨çš„å‹ç¼©ä»£ç æ–¹å¼ï¼Œå®ƒä½¿ç”¨çš„æ˜¯å•çº¿ç¨‹å‹ç¼©ä»£ç ï¼Œæ‰“åŒ…æ—¶é—´è¾ƒæ…¢ã€‚\nplugins: [\n  new UglifyJsPlugin(&#123;\n    uglifyOptions: &#123;\n      compress: &#123;\n        warnings: false\n      &#125;\n    &#125;,\n    sourceMap: true,\n    parallel: true\n  &#125;)\n\nParallelUglifyPluginParallelUglifyPluginÂ å¼€å¯å¤šä¸ªå­è¿›ç¨‹ï¼ŒæŠŠå¯¹å¤šä¸ªæ–‡ä»¶å‹ç¼©çš„å·¥ä½œåˆ†åˆ«ç»™å¤šä¸ªå­è¿›ç¨‹å»å®Œæˆï¼Œæ¯ä¸ªå­è¿›ç¨‹å…¶å®è¿˜æ˜¯é€šè¿‡Â UglifyJSÂ å»å‹ç¼©ä»£ç ï¼Œä½†æ˜¯å˜æˆäº†å¹¶è¡Œæ‰§è¡Œã€‚\nplugins: [\n  new ParallelUglifyPlugin(&#123;\n    &#x2F;&#x2F;ç¼“å­˜å‹ç¼©åçš„ç»“æœï¼Œä¸‹æ¬¡é‡åˆ°ä¸€æ ·çš„è¾“å…¥æ—¶ç›´æ¥ä»ç¼“å­˜ä¸­è·å–å‹ç¼©åçš„ç»“æœå¹¶è¿”å›ï¼Œ\n    &#x2F;&#x2F;cacheDir ç”¨äºé…ç½®ç¼“å­˜å­˜æ”¾çš„ç›®å½•è·¯å¾„ã€‚\n    cacheDir: &#39;.cache&#x2F;&#39;,\n    sourceMap: true,\n    uglifyJS: &#123;\n      output: &#123;\n        comments: false,\n      &#125;,\n      compress: &#123;\n        warnings: false,\n      &#125;,\n    &#125;,\n  &#125;),\n]\n\næ‰“åŒ…é€Ÿåº¦å’Œæ‰“åŒ…åçš„æ–‡ä»¶å¤§å°å¯¹æ¯”\n\n\n\næ–¹æ³•\næ–‡ä»¶å¤§å°\næ‰“åŒ…é€Ÿåº¦\n\n\n\nä¸ç”¨æ’ä»¶\n14.6M\n32s\n\n\nUglifyJsPlugin\n12.9M\n33s\n\n\nParallelUglifyPlugi\n7.98M\n17s\n\n\nterser-webpack-pluginWebpack4.0 é»˜è®¤æ˜¯ä½¿ç”¨Â terser-webpack-pluginÂ è¿™ä¸ªå‹ç¼©æ’ä»¶ï¼Œåœ¨æ­¤ä¹‹å‰æ˜¯ä½¿ç”¨Â uglifyjs-webpack-pluginï¼Œä¸¤è€…çš„åŒºåˆ«æ˜¯åè€…å¯¹ ES6 çš„å‹ç¼©ä¸æ˜¯å¾ˆå¥½ï¼ŒåŒæ—¶æˆ‘ä»¬å¯ä»¥å¼€å¯Â parallelÂ å‚æ•°ï¼Œä½¿ç”¨å¤šè¿›ç¨‹å‹ç¼©ï¼ŒåŠ å¿«å‹ç¼©ã€‚\nconst TerserPlugin &#x3D; require(&#39;terser-webpack-plugin&#39;) &#x2F;&#x2F; å‹ç¼©jsä»£ç \nconst OptimizeCSSAssetsPlugin &#x3D; require(&#39;optimize-css-assets-webpack-plugin&#39;) &#x2F;&#x2F; å‹ç¼©cssä»£ç \n\noptimization: &#123;\n  minimizer: [\n    new TerserPlugin(&#123;\n      parallel: 4, &#x2F;&#x2F; å¼€å¯å‡ ä¸ªè¿›ç¨‹æ¥å¤„ç†å‹ç¼©ï¼Œé»˜è®¤æ˜¯ os.cpus().length - 1\n      cache: true, &#x2F;&#x2F; æ˜¯å¦ç¼“å­˜\n      sourceMap: false,\n    &#125;),\n  ]\n&#125;\n\nCSS å‹ç¼©æˆ‘ä»¬å¯ä»¥å€ŸåŠ© optimize-css-assets-webpack-plugin æ’ä»¶æ¥å‹ç¼© cssï¼Œå…¶é»˜è®¤ä½¿ç”¨çš„å‹ç¼©å¼•æ“æ˜¯ cssnano\nconst OptimizeCSSAssetsPlugin &#x3D; require(&#39;optimize-css-assets-webpack-plugin&#39;) &#x2F;&#x2F; å‹ç¼©cssä»£ç \n\noptimization: &#123;\n  minimizer: [\n    &#x2F;&#x2F; å‹ç¼©css\n    new OptimizeCSSAssetsPlugin(&#123;&#125;),\n  ]\n&#125;\n\n6ã€æå–å…¬å…±ä»£ç åœ¨ç”¨ webpack æ‰“åŒ…çš„æ—¶å€™ï¼Œå¯¹äºä¸€äº›ä¸ç»å¸¸æ›´æ–°çš„ç¬¬ä¸‰æ–¹åº“ï¼Œæ¯”å¦‚Â reactï¼Œlodashï¼ŒvueÂ æˆ‘ä»¬å¸Œæœ›èƒ½å’Œè‡ªå·±çš„ä»£ç åˆ†ç¦»å¼€ï¼Œwebpack ç¤¾åŒºæœ‰ä»¥ä¸‹ä¸¤ç§æ–¹æ¡ˆï¼š\nCommonsChunkPlugin åŠ splitChunksé€šè¿‡å°†å…¬å…±æ¨¡å—æ‹†å‡ºæ¥ï¼Œæœ€ç»ˆåˆæˆçš„æ–‡ä»¶èƒ½å¤Ÿåœ¨æœ€å¼€å§‹çš„æ—¶å€™åŠ è½½ä¸€æ¬¡ï¼Œä¾¿å­˜åˆ°ç¼“å­˜ä¸­ä¾›åç»­ä½¿ç”¨ã€‚è¿™ä¸ªå¸¦æ¥é€Ÿåº¦ä¸Šçš„æå‡ï¼Œå› ä¸ºæµè§ˆå™¨ä¼šè¿…é€Ÿå°†å…¬å…±çš„ä»£ç ä»ç¼“å­˜ä¸­å–å‡ºæ¥ï¼Œè€Œä¸æ˜¯æ¯æ¬¡è®¿é—®ä¸€ä¸ªæ–°é¡µé¢æ—¶ï¼Œå†å»åŠ è½½ä¸€ä¸ªæ›´å¤§çš„æ–‡ä»¶ã€‚\nwebpack3 ä½¿ç”¨Â CommonsChunkPluginÂ çš„å®ç°ï¼š\nplugins: [\n  new webpack.optimize.CommonsChunkPlugin(&#123;\n    name: &#39;vendor&#39;,\n    minChunks: function (module, count) &#123;\n      console.log(module.resource, &#96;å¼•ç”¨æ¬¡æ•°$&#123;count&#125;&#96;)\n      &#x2F;&#x2F;&quot;æœ‰æ­£åœ¨å¤„ç†æ–‡ä»¶&quot; + &quot;è¿™ä¸ªæ–‡ä»¶æ˜¯ .js åç¼€&quot; + &quot;è¿™ä¸ªæ–‡ä»¶æ˜¯åœ¨ node_modules ä¸­&quot;\n      return (\n        module.resource &amp;&amp;\n        &#x2F;.js$&#x2F;.test(module.resource) &amp;&amp;\n        module.resource.indexOf(path.join(__dirname, &#39;.&#x2F;node_modules&#39;)) &#x3D;&#x3D;&#x3D; 0\n      )\n    &#125;,\n  &#125;),\n  new webpack.optimize.CommonsChunkPlugin(&#123;\n    name: &#39;common&#39;,\n    chunks: &#39;initial&#39;,\n    minChunks: 2,\n  &#125;),\n]\n\nwebpack4 ä½¿ç”¨Â splitChunksÂ çš„å®ç°ï¼š\nmodule.exports &#x3D; &#123;\n  optimization: &#123;\n    splitChunks: &#123;\n      cacheGroups: &#123;\n        vendor: &#123;\n          priority: 1, &#x2F;&#x2F;æ·»åŠ æƒé‡\n          test: &#x2F;node_modules&#x2F;, &#x2F;&#x2F;æŠŠè¿™ä¸ªç›®å½•ä¸‹ç¬¦åˆä¸‹é¢å‡ ä¸ªæ¡ä»¶çš„åº“æŠ½ç¦»å‡ºæ¥\n          chunks: &#39;initial&#39;, &#x2F;&#x2F;åˆšå¼€å§‹å°±è¦æŠ½ç¦»\n          minChunks: 2, &#x2F;&#x2F;é‡å¤2æ¬¡ä½¿ç”¨çš„æ—¶å€™éœ€è¦æŠ½ç¦»å‡ºæ¥\n        &#125;,\n        common: &#123;\n          &#x2F;&#x2F;å…¬å…±çš„æ¨¡å—\n          chunks: &#39;initial&#39;,\n          minChunks: 2,\n        &#125;,\n      &#125;,\n    &#125;,\n  &#125;,\n&#125;\n\nDLLPluginwebpack.DllPlugin å°±æ˜¯æ¥è§£å†³è¿™ä¸ªé—®é¢˜çš„æ’ä»¶ï¼Œä½¿ç”¨å®ƒå¯ä»¥åœ¨ç¬¬ä¸€æ¬¡ç¼–è¯‘æ‰“åŒ…åå°±ç”Ÿæˆä¸€ä»½ä¸å˜çš„ä»£ç ä¾›å…¶ä»–æ¨¡å—å¼•ç”¨ï¼Œè¿™æ ·ä¸‹ä¸€æ¬¡æ„å»ºçš„æ—¶å€™å°±å¯ä»¥èŠ‚çœå¼€å‘æ—¶ç¼–è¯‘æ‰“åŒ…çš„æ—¶é—´ã€‚\n1ã€åœ¨ build ä¸‹åˆ›å»ºÂ webpack.dll.config.js\nconst path &#x3D; require(&#39;path&#39;)\nconst webpack &#x3D; require(&#39;webpack&#39;)\nmodule.exports &#x3D; &#123;\n  entry: &#123;\n    vendor: [\n      &#39;vue-router&#39;,\n      &#39;vuex&#39;,\n      &#39;vue&#x2F;dist&#x2F;vue.common.js&#39;,\n      &#39;vue&#x2F;dist&#x2F;vue.js&#39;,\n      &#39;vue-loader&#x2F;lib&#x2F;component-normalizer.js&#39;,\n      &#39;vue&#39;,\n      &#39;axios&#39;,\n      &#39;echarts&#39;,\n    ],\n  &#125;,\n  output: &#123;\n    path: path.resolve(&#39;.&#x2F;dist&#39;),\n    filename: &#39;[name].dll.js&#39;,\n    library: &#39;[name]_library&#39;,\n  &#125;,\n  plugins: [\n    new webpack.DllPlugin(&#123;\n      path: path.resolve(&#39;.&#x2F;dist&#39;, &#39;[name]-manifest.json&#39;),\n      name: &#39;[name]_library&#39;,\n    &#125;),\n    &#x2F;&#x2F; å»ºè®®åŠ ä¸Šä»£ç å‹ç¼©æ’ä»¶ï¼Œå¦åˆ™dllåŒ…ä¼šæ¯”è¾ƒå¤§ã€‚\n    new webpack.optimize.UglifyJsPlugin(&#123;\n      compress: &#123;\n        warnings: false,\n      &#125;,\n    &#125;),\n  ],\n&#125;\n\n\nlibraryÂ çš„æ„æ€å…¶å®å°±æ˜¯å°† dll æ–‡ä»¶ä»¥ä¸€ä¸ªå…¨å±€å˜é‡çš„å½¢å¼å¯¼å‡ºå‡ºå»ï¼Œä¾¿äºæ¥ä¸‹æ¥å¼•ç”¨ã€‚\nmainfest.jsonÂ æ–‡ä»¶æ˜¯ä¸€ä¸ªæ˜ å°„å…³ç³»ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯å¸®åŠ© webpack ä½¿ç”¨æˆ‘ä»¬ä¹‹å‰æ‰“åŒ…å¥½çš„Â ***.dll.jsÂ æ–‡ä»¶ï¼Œè€Œä¸æ˜¯é‡æ–°å†å»Â node_modulesÂ ä¸­å»å¯»æ‰¾ã€‚\n\n2ã€åœ¨Â webpack.prod.conf.jsÂ çš„ plugin åé¢åŠ å…¥é…ç½®\nnew webpack.DllReferencePlugin(&#123;\n  manifest: require(&#39;..&#x2F;dist&#x2F;vendor-manifest.json&#39;),\n&#125;)\n\n3ã€package.jsonæ–‡ä»¶ä¸­æ·»åŠ å¿«æ·å‘½ä»¤(build:dll)\n&quot;scripts&quot;: &#123;\n  &quot;dev&quot;: &quot;webpack-dev-server --inline --progress --config build&#x2F;webpack.dev.conf.js&quot;,\n  &quot;start&quot;: &quot;npm run dev&quot;,\n  &quot;lint&quot;: &quot;eslint --ext .js,.vue src&quot;,\n  &quot;build&quot;: &quot;node build&#x2F;build.js&quot;,\n  &quot;build:dll&quot;: &quot;webpack --config build&#x2F;webpack.dll.conf.js&quot;\n&#125;\n\nç”Ÿäº§ç¯å¢ƒæ‰“åŒ…çš„æ—¶å€™å…ˆnpm run build:dllå‘½ä»¤ä¼šåœ¨æ‰“åŒ…ç›®å½•ä¸‹ç”ŸæˆÂ vendor-manifest.jsonÂ æ–‡ä»¶ä¸ vendor.dll.js æ–‡ä»¶ã€‚ç„¶ånpm run buildç”Ÿäº§å…¶ä»–æ–‡ä»¶ã€‚\n4ã€æ ¹ç›®å½•ä¸‹çš„å…¥å£Â index.htmlÂ åŠ å…¥å¼•ç”¨\n&lt;script type&#x3D;&quot;text&#x2F;javascript&quot; src&#x3D;&quot;.&#x2F;vendor.dll.js&quot;&gt;&lt;&#x2F;script&gt;\n\n7ã€CDN ä¼˜åŒ–\néšç€é¡¹ç›®è¶Šåšè¶Šå¤§ï¼Œä¾èµ–çš„ç¬¬ä¸‰æ–¹ npm åŒ…è¶Šæ¥è¶Šå¤šï¼Œæ„å»ºä¹‹åçš„æ–‡ä»¶ä¹Ÿä¼šè¶Šæ¥è¶Šå¤§ã€‚\nå†åŠ ä¸Šåˆæ˜¯å•é¡µåº”ç”¨ï¼Œè¿™å°±ä¼šå¯¼è‡´åœ¨ç½‘é€Ÿè¾ƒæ…¢æˆ–è€…æœåŠ¡å™¨å¸¦å®½æœ‰é™çš„æƒ…å†µå‡ºç°é•¿æ—¶é—´çš„ç™½å±ã€‚\n\n1ã€å°†Â vueã€vue-routerã€vuexã€element-ui å’Œ axiosÂ è¿™äº”ä¸ªåº“ï¼Œå…¨éƒ¨æ”¹ä¸ºé€šè¿‡ CDN é“¾æ¥è·å–ï¼Œåœ¨Â index.htmlÂ é‡Œæ’å…¥ ç›¸åº”é“¾æ¥ã€‚\n&lt;head&gt;\n  &lt;link rel&#x3D;&quot;stylesheet&quot; href&#x3D;&quot;https:&#x2F;&#x2F;cdn.bootcss.com&#x2F;element-ui&#x2F;2.0.7&#x2F;theme-chalk&#x2F;index.css&quot; &#x2F;&gt;\n&lt;&#x2F;head&gt;\n&lt;body&gt;\n  &lt;div id&#x3D;&quot;app&quot;&gt;&lt;&#x2F;div&gt;\n  &lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdn.bootcss.com&#x2F;vue&#x2F;2.6.10&#x2F;vue.min.js&quot;&gt;&lt;&#x2F;script&gt;\n  &lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdn.bootcss.com&#x2F;axios&#x2F;0.19.0-beta.1&#x2F;axios.min.js&quot;&gt;&lt;&#x2F;script&gt;\n  &lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdn.bootcss.com&#x2F;vuex&#x2F;3.1.0&#x2F;vuex.min.js&quot;&gt;&lt;&#x2F;script&gt;\n  &lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdn.bootcss.com&#x2F;vue-router&#x2F;3.0.2&#x2F;vue-router.min.js&quot;&gt;&lt;&#x2F;script&gt;\n  &lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdn.bootcss.com&#x2F;element-ui&#x2F;2.6.1&#x2F;index.js&quot;&gt;&lt;&#x2F;script&gt;\n  &lt;!-- built files will be auto injected --&gt;\n&lt;&#x2F;body&gt;\n\n2ã€åœ¨Â webpack.config.jsÂ é…ç½®æ–‡ä»¶\nmodule.exports &#x3D; &#123;\n Â·Â·Â·\n    externals: &#123;\n      &#39;vue&#39;: &#39;Vue&#39;,\n      &#39;vuex&#39;: &#39;Vuex&#39;,\n      &#39;vue-router&#39;: &#39;VueRouter&#39;,\n      &#39;element-ui&#39;: &#39;ELEMENT&#39;,\n      &#39;Axios&#39;:&#39;axios&#39;\n    &#125;\n  &#125;,\n\n3ã€å¸è½½ä¾èµ–çš„ npm åŒ…\nnpm uninstall axios element-ui vue vue-router vuex\n\n4ã€ä¿®æ”¹Â main.jsÂ æ–‡ä»¶é‡Œä¹‹å‰çš„å¼•åŒ…æ–¹å¼\n&#x2F;&#x2F; import Vue from &#39;vue&#39;\n&#x2F;&#x2F; import ElementUI from &#39;element-ui&#39;\n&#x2F;&#x2F; import &#39;element-ui&#x2F;lib&#x2F;theme-chalk&#x2F;index.css&#39;\n&#x2F;&#x2F; import VueRouter from &#39;vue-router&#39;\n\nimport App from &#39;.&#x2F;App.vue&#39;\nimport routes from &#39;.&#x2F;router&#39;\nimport utils from &#39;.&#x2F;utils&#x2F;Utils&#39;\n\nVue.use(ELEMENT)\nVue.use(VueRouter)\n\nconst router &#x3D; new VueRouter(&#123;\n  mode: &#39;hash&#39;, &#x2F;&#x2F;è·¯ç”±çš„æ¨¡å¼\n  routes,\n&#125;)\n\nnew Vue(&#123;\n  router,\n  el: &#39;#app&#39;,\n  render: (h) &#x3D;&gt; h(App),\n&#125;)\n\nhtml-webpack-externals-pluginè¿™ç§æ–¹æ³•æ¯æ¬¡éƒ½éœ€è¦åœ¨ index.html æ¨¡æ¿ä¸­æ‰‹åŠ¨å¼•å…¥éœ€è¦çš„ cdn æ–‡ä»¶ï¼Œç„¶åè¿˜è¦åœ¨ webpack é‡Œé…ç½®ï¼Œæœ‰ç‚¹ç¹çäº†html-webpack-externals-pluginè¿™æ ·çš„æ’ä»¶å°±åº”è¿è€Œç”Ÿäº†ã€‚\n&#x2F;&#x2F; webpack.config.jsæ–‡ä»¶\nconst HtmlWebpackExternalsPlugin &#x3D; require(&#39;html-webpack-externals-plugin&#39;)\n\nmodule.exports &#x3D; &#123;\n  plugins: [\n    new HtmlWebpackExternalsPlugin(&#123;\n      externals: [\n        &#123;\n          &#x2F;&#x2F; å¼•å…¥çš„æ¨¡å—\n          module: &#39;jquery&#39;,\n          &#x2F;&#x2F; cdnçš„åœ°å€\n          entry: &#39;https:&#x2F;&#x2F;cdn.bootcss.com&#x2F;jquery&#x2F;3.4.1&#x2F;jquery.min.js&#39;,\n          &#x2F;&#x2F; æŒ‚è½½åˆ°äº†windowä¸Šçš„åç§°\n          global: &#39;jQuery&#39;,\n        &#125;,\n        &#123;\n          module: &#39;vue&#39;,\n          entry: &#39;https:&#x2F;&#x2F;cdn.bootcss.com&#x2F;vue&#x2F;2.6.10&#x2F;vue.min.js&#39;,\n          global: &#39;Vue&#39;,\n        &#125;,\n      ],\n    &#125;),\n  ],\n&#125;\n\n8ã€å¤šè¿›ç¨‹è§£æå’Œå¤„ç†æ–‡ä»¶ç”±äºè¿è¡Œåœ¨ Node.js ä¹‹ä¸Šçš„ webpack æ˜¯å•çº¿ç¨‹æ¨¡å‹çš„ï¼Œæ‰€ä»¥ webpack éœ€è¦å¤„ç†çš„äº‹æƒ…éœ€è¦ä¸€ä»¶ä¸€ä»¶çš„åšï¼Œä¸èƒ½å¤šä»¶äº‹ä¸€èµ·åšã€‚å½“ webpack éœ€è¦æ‰“åŒ…å¤§é‡æ–‡ä»¶æ—¶ï¼Œæ‰“åŒ…æ—¶é—´å°±ä¼šæ¯”è¾ƒæ¼«é•¿ã€‚\nä»¥ä¸‹ä¸¤ä¸ªæ–¹æ³•èƒ½è®© webpack åœ¨åŒä¸€æ—¶åˆ»å¤„ç†å¤šä¸ªä»»åŠ¡å‘æŒ¥å¤šæ ¸ CPU ç”µè„‘çš„åŠŸèƒ½ï¼Œæå‡æ„å»ºé€Ÿåº¦ã€‚\nthread loaderæŠŠè¿™ä¸ªÂ thread loaderÂ æ”¾ç½®åœ¨å…¶ä»– loader ä¹‹å‰ï¼Œ æ”¾ç½®åœ¨è¿™ä¸ª loader ä¹‹åçš„ loader å°±ä¼šåœ¨ä¸€ä¸ªå•ç‹¬çš„ worker æ± (worker pool)ä¸­è¿è¡Œã€‚\nåœ¨ worker æ± (worker pool)ä¸­è¿è¡Œçš„ loader æ˜¯å—åˆ°é™åˆ¶çš„ã€‚ä¾‹å¦‚ï¼š\n\nè¿™äº› loader ä¸èƒ½äº§ç”Ÿæ–°çš„æ–‡ä»¶ã€‚\nè¿™äº› loader ä¸èƒ½ä½¿ç”¨å®šåˆ¶çš„ loader APIï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œé€šè¿‡æ’ä»¶ï¼‰ã€‚\nè¿™äº› loader æ— æ³•è·å– webpack çš„é€‰é¡¹è®¾ç½®ã€‚\n\næ¯ä¸ª worker éƒ½æ˜¯ä¸€ä¸ªå•ç‹¬çš„æœ‰ 600ms é™åˆ¶çš„ node.js è¿›ç¨‹ã€‚åŒæ—¶è·¨è¿›ç¨‹çš„æ•°æ®äº¤æ¢ä¹Ÿä¼šè¢«é™åˆ¶ã€‚\nmodule.exports &#x3D; &#123;\n  module: &#123;\n    rules: [\n      &#123;\n        test: &#x2F;.js$&#x2F;,\n        include: path.resolve(&#39;src&#39;),\n        use: [&#39;thread-loader&#39;, &#39;expensive-loader&#39;],\n      &#125;,\n    ],\n  &#125;,\n&#125;\n\nHappyPackHappyPackÂ èƒ½è®© webpack æŠŠä»»åŠ¡åˆ†è§£ç»™å¤šä¸ªå­è¿›ç¨‹å»å¹¶å‘çš„æ‰§è¡Œï¼Œå­è¿›ç¨‹å¤„ç†å®Œåå†æŠŠç»“æœå‘é€ç»™ä¸»è¿›ç¨‹ã€‚è¦æ³¨æ„çš„æ˜¯ HappyPack å¯¹ file-loaderã€url-loader æ”¯æŒçš„ä¸å‹å¥½ï¼Œæ‰€ä»¥ä¸å»ºè®®å¯¹è¯¥ loader ä½¿ç”¨ã€‚\nä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š\n1ã€ HappyPack æ’ä»¶å®‰è£…\nnpm i -D happypack\n\n2ã€Â webpack.base.conf.jsÂ æ–‡ä»¶å¯¹ module.rules è¿›è¡Œé…ç½®\nmodule: &#123;\n  rules: [\n    &#123;\n      test: &#x2F;.js$&#x2F;,\n      use: [&#39;happypack&#x2F;loader?id&#x3D;babel&#39;],\n      include: [resolve(&#39;src&#39;), resolve(&#39;test&#39;)],\n      exclude: path.resolve(__dirname, &#39;node_modules&#39;),\n    &#125;,\n    &#123;\n      test: &#x2F;.vue$&#x2F;,\n      use: [&#39;happypack&#x2F;loader?id&#x3D;vue&#39;],\n    &#125;,\n  ]\n&#125;\n\n3ã€åœ¨ç”Ÿäº§ç¯å¢ƒÂ webpack.prod.conf.jsÂ æ–‡ä»¶è¿›è¡Œé…ç½®\nconst HappyPack &#x3D; require(&#39;happypack&#39;)\n&#x2F;&#x2F; æ„é€ å‡ºå…±äº«è¿›ç¨‹æ± ï¼Œåœ¨è¿›ç¨‹æ± ä¸­åŒ…å«5ä¸ªå­è¿›ç¨‹\nconst HappyPackThreadPool &#x3D; HappyPack.ThreadPool(&#123; size: 5 &#125;)\nplugins: [\n  new HappyPack(&#123;\n    &#x2F;&#x2F; ç”¨å”¯ä¸€çš„æ ‡è¯†ç¬¦idï¼Œæ¥ä»£è¡¨å½“å‰çš„HappyPackæ˜¯ç”¨æ¥å¤„ç†ä¸€ç±»ç‰¹å®šçš„æ–‡ä»¶\n    id: &#39;babel&#39;,\n    &#x2F;&#x2F; å¦‚ä½•å¤„ç†.jsæ–‡ä»¶ï¼Œç”¨æ³•å’ŒLoaderé…ç½®ä¸­ä¸€æ ·\n    loaders: [&#39;babel-loader?cacheDirectory&#39;],\n    threadPool: HappyPackThreadPool,\n  &#125;),\n  new HappyPack(&#123;\n    id: &#39;vue&#39;, &#x2F;&#x2F; ç”¨å”¯ä¸€çš„æ ‡è¯†ç¬¦idï¼Œæ¥ä»£è¡¨å½“å‰çš„HappyPackæ˜¯ç”¨æ¥å¤„ç†ä¸€ç±»ç‰¹å®šçš„æ–‡ä»¶\n    loaders: [\n      &#123;\n        loader: &#39;vue-loader&#39;,\n        options: vueLoaderConfig,\n      &#125;,\n    ],\n    threadPool: HappyPackThreadPool,\n  &#125;),\n]\n\næ³¨æ„ï¼Œå½“é¡¹ç›®è¾ƒå°æ—¶ï¼Œå¤šçº¿ç¨‹æ‰“åŒ…åè€Œä¼šä½¿æ‰“åŒ…é€Ÿåº¦å˜æ…¢ã€‚\n9. å¯ç”¨ gzip å‹ç¼©ä½¿ç”¨ Gzip ä¸¤ä¸ªæ˜æ˜¾çš„å¥½å¤„ï¼Œä¸€æ˜¯å¯ä»¥å‡å°‘å­˜å‚¨ç©ºé—´ï¼ŒäºŒæ˜¯é€šè¿‡ç½‘ç»œä¼ è¾“æ–‡ä»¶æ—¶ï¼Œå¯ä»¥å‡å°‘ä¼ è¾“çš„æ—¶é—´ã€‚\n1ã€å®‰è£…ä¾èµ–\nnpm i compression-webpack-plugin --save\n\n2ã€åœ¨ vue.congig.js ä¸­å¼•å…¥å¹¶ä¿®æ”¹ webpack é…ç½®\nconst CompressionPlugin &#x3D; require(&#39;compression-webpack-plugin&#39;)\nmodule.exports &#x3D; &#123;\n  configureWebpack: (config) &#x3D;&gt; &#123;\n    if (progress.env.NODE_ENV &#x3D;&#x3D;&#x3D; &#39;production&#39;) &#123;\n      return &#123;\n        plugins: [\n          new CompressionPlugin(&#123;\n            test: &#x2F;.js$|.html$|.\\css&#x2F;, &#x2F;&#x2F;åŒ¹é…æ–‡ä»¶å\n            threshold: 10240, &#x2F;&#x2F;å¯¹è¶…è¿‡10kçš„æ•°æ®å‹ç¼©\n            deleteOriginalAssets: false, &#x2F;&#x2F;ä¸åˆ é™¤æºæ–‡ä»¶\n          &#125;),\n        ],\n      &#125;\n    &#125;\n  &#125;,\n&#125;\n\nå¤åˆ¶\n\n? compressioné‡åˆ°çš„å‘\nvue ä½¿ç”¨webpackæ’ä»¶æ‰“åŒ…æ—¶å€™æŠ¥é”™å‡ºç°Â Cannot read property &#39;tapPromise&#39; of undefined\ncompression-webpack-plugin ç›®å‰æœ€æ–°ç‰ˆæ˜¯ 7.1.0\nè§£å†³æ–¹æ³•ï¼š\nå…ˆå¸è½½ï¼Œå†è£…ä¸ªä½ä¸€ç‚¹çš„ç‰ˆæœ¬\nnpm uninstall compression-webpack-plugin\n\nnpm i compression-webpack-plugin@5.0.1\n\næ€»ç»“\næ¯”è¾ƒå®ç”¨çš„æ–¹æ³•: æŒ‰éœ€åŠ è½½ï¼Œä¼˜åŒ– loader é…ç½®ï¼Œå…³é—­ç”Ÿäº§ç¯å¢ƒçš„ sourceMapï¼ŒCDN ä¼˜åŒ–ã€‚\nvue-cli å·²åšçš„ä¼˜åŒ–ï¼š ä»£ç å‹ç¼©ï¼Œæå–å…¬å…±ä»£ç ï¼Œå†ä¼˜åŒ–ç©ºé—´ä¸å¤§ã€‚\næ ¹æ®é¡¹ç›®å®é™…éœ€è¦å’Œè‡ªèº«å¼€å‘æ°´å¹³é€‰æ‹©ä¼˜åŒ–æ–¹æ³•ï¼Œå¿…é¡»é¿å…å› ä¸ºä¼˜åŒ–äº§ç”Ÿ bugã€‚\n\n","slug":"webpack ä¼˜åŒ–æ‰“åŒ…å¤§å…¨","date":"2023-03-02T05:46:21.000Z","categories_index":"","tags_index":"","author_index":"Beastrong"},{"id":"423c486a461adf5a32b327715f1653d3","title":"ä¸€äº›VSCodeä¸Šç»å¸¸ä½¿ç”¨çš„ä»£ç æ ¼å¼é…ç½®","content":"ä½¿ç”¨åˆ°çš„æ’ä»¶PrettierÂ ï¼ŒÂ vetur\nå…·ä½“JSON\n&#123;\n    &quot;workbench.iconTheme&quot;: &quot;material-icon-theme&quot;,\n    &quot;vsicons.dontShowNewVersionMessage&quot;: true,\n    &quot;editor.suggestSelection&quot;: &quot;first&quot;,\n    &#x2F;&#x2F;é…ç½®æœªä½¿ç”¨å˜é‡å˜ç°\n    &quot;editor.showUnused&quot;: true,\n    &#x2F;&#x2F; é‡æ–°è®¾å®štabsize\n    &quot;editor.tabSize&quot;: 4,\n    &#x2F;&#x2F;  #è®©å‡½æ•°(å)å’Œåé¢çš„æ‹¬å·ä¹‹é—´åŠ ä¸ªç©ºæ ¼\n    &quot;javascript.format.insertSpaceBeforeFunctionParenthesis&quot;: true,\n    &quot;vsintellicode.modify.editor.suggestSelection&quot;: &quot;automaticallyOverrodeDefaultValue&quot;,\n    &quot;files.exclude&quot;: &#123;\n        &quot;**&#x2F;.classpath&quot;: true,\n        &quot;**&#x2F;.project&quot;: true,\n        &quot;**&#x2F;.settings&quot;: true,\n        &quot;**&#x2F;.factorypath&quot;: true\n    &#125;,\n    &quot;explorer.confirmDelete&quot;: false,\n    &quot;files.associations&quot;: &#123;\n        &quot;*.cjson&quot;: &quot;jsonc&quot;,\n        &quot;*.wxss&quot;: &quot;css&quot;,\n        &quot;*.wxs&quot;: &quot;javascript&quot;\n    &#125;,\n    &quot;emmet.includeLanguages&quot;: &#123;\n        &quot;wxml&quot;: &quot;html&quot;\n    &#125;,\n    &quot;minapp-vscode.disableAutoConfig&quot;: true,\n    &quot;workbench.colorTheme&quot;: &quot;Nebula&quot;,\n    &quot;window.zoomLevel&quot;: -1,\n    &quot;terminal.integrated.rendererType&quot;: &quot;dom&quot;,\n    &quot;python.jediEnabled&quot;: false,\n    &quot;update.mode&quot;: &quot;none&quot;,\n    &quot;update.enableWindowsBackgroundUpdates&quot;: false,\n    &#x2F;&#x2F; &quot;[javascript]&quot;: &#123;\n    &#x2F;&#x2F;     &quot;editor.defaultFormatter&quot;: &quot;HookyQR.beautify&quot;\n    &#x2F;&#x2F; &#125;,\n    &quot;[vue]&quot;: &#123;\n        &quot;editor.defaultFormatter&quot;: &quot;esbenp.prettier-vscode&quot;,\n        &quot;editor.showUnused&quot;: true,\n    &#125;,\n    &quot;vetur.validation.template&quot;: false,\n    &quot;todo-tree.tree.showScanModeButton&quot;: false,\n    &#x2F;&#x2F; æ ¼å¼åŒ–æ’ä»¶è®¾ç½®ä¸º prettier,ä»¥ä¸‹æ˜¯prettierçš„é…ç½®\n    &quot;[html]&quot;: &#123;\n        &quot;editor.defaultFormatter&quot;: &quot;esbenp.prettier-vscode&quot;\n    &#125;,\n    &quot;[javascript]&quot;: &#123;\n        &quot;editor.defaultFormatter&quot;: &quot;esbenp.prettier-vscode&quot;\n    &#125;,\n    &quot;[typescript]&quot;: &#123;\n        &quot;editor.defaultFormatter&quot;: &quot;esbenp.prettier-vscode&quot;\n    &#125;,\n    &quot;[javascriptreact]&quot;: &#123;\n        &quot;editor.defaultFormatter&quot;: &quot;esbenp.prettier-vscode&quot;\n    &#125;,\n    &quot;[typescriptreact]&quot;: &#123;\n        &quot;editor.defaultFormatter&quot;: &quot;esbenp.prettier-vscode&quot;\n    &#125;,\n    &quot;[less]&quot;: &#123;\n        &quot;editor.defaultFormatter&quot;: &quot;esbenp.prettier-vscode&quot;\n    &#125;,\n    &quot;[css]&quot;: &#123;\n        &quot;editor.defaultFormatter&quot;: &quot;esbenp.prettier-vscode&quot;\n    &#125;,\n    &quot;[json]&quot;: &#123;\n        &quot;editor.defaultFormatter&quot;: &quot;esbenp.prettier-vscode&quot;\n    &#125;,\n    &quot;[jsonc]&quot;: &#123;\n        &quot;editor.defaultFormatter&quot;: &quot;esbenp.prettier-vscode&quot;\n    &#125;,\n    &quot;prettier.tabWidth&quot;: 4, &#x2F;&#x2F; ç¼©è¿›å­—èŠ‚æ•°\n    &quot;prettier.printWidth&quot;: 100, &#x2F;&#x2F; \n    &quot;prettier.trailingComma&quot;: &quot;es5&quot;, &#x2F;&#x2F; åœ¨å¯¹è±¡æˆ–æ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ åé¢æ˜¯å¦åŠ é€—å·ï¼ˆåœ¨ES5ä¸­åŠ å°¾é€—å·ï¼‰\n    &quot;prettier.useTabs&quot;: false, &#x2F;&#x2F; ç¼©è¿›ä¸ä½¿ç”¨tabï¼Œä½¿ç”¨ç©ºæ ¼\n    &quot;prettier.semi&quot;: true, &#x2F;&#x2F; å¥å°¾æ·»åŠ åˆ†å·\n    &quot;prettier.singleQuote&quot;: true, &#x2F;&#x2F; ä¸ä½¿ç”¨å•å¼•å·ä»£æ›¿åŒå¼•å·\n    &quot;prettier.proseWrap&quot;: &quot;preserve&quot;, &#x2F;&#x2F; é»˜è®¤å€¼ã€‚å› ä¸ºä½¿ç”¨äº†ä¸€äº›æŠ˜è¡Œæ•æ„Ÿå‹çš„æ¸²æŸ“å™¨ï¼ˆå¦‚GitHub commentï¼‰è€ŒæŒ‰ç…§markdownæ–‡æœ¬æ ·å¼è¿›è¡ŒæŠ˜è¡Œ\n    &#x2F;&#x2F; ç®­å¤´å‡½æ•°å‚æ•°æ‹¬å· é»˜è®¤avoid å¯é€‰ avoid| always\n    &#x2F;&#x2F; avoid èƒ½çœç•¥æ‹¬å·çš„æ—¶å€™å°±çœç•¥ ä¾‹å¦‚x &#x3D;&gt; x\n    &#x2F;&#x2F; always æ€»æ˜¯æœ‰æ‹¬å·\n    &#x2F;&#x2F; (x) &#x3D;&gt; &#123;&#125; ç®­å¤´å‡½æ•°å‚æ•°åªæœ‰ä¸€ä¸ªæ—¶æ˜¯å¦è¦æœ‰å°æ‹¬å·ã€‚avoidï¼šçœç•¥æ‹¬å·\n    &quot;prettier.arrowParens&quot;: &quot;avoid&quot;, \n    &quot;prettier.bracketSpacing&quot;: true, &#x2F;&#x2F; åœ¨å¯¹è±¡ï¼Œæ•°ç»„æ‹¬å·ä¸æ–‡å­—ä¹‹é—´åŠ ç©ºæ ¼ &quot;&#123; foo: bar &#125;&quot;\n    &#x2F;&#x2F; &quot;prettier.disableLanguages&quot;: [&quot;vue&quot;], &#x2F;&#x2F; ä¸æ ¼å¼åŒ–vueæ–‡ä»¶ï¼Œvueæ–‡ä»¶çš„æ ¼å¼åŒ–å•ç‹¬è®¾ç½®\n    &quot;prettier.endOfLine&quot;: &quot;auto&quot;, &#x2F;&#x2F;ä¸è®©prettierä½¿ç”¨eslintçš„ä»£ç æ ¼å¼è¿›è¡Œæ ¡éªŒ\n    &quot;prettier.htmlWhitespaceSensitivity&quot;: &quot;ignore&quot;,\n    &quot;prettier.ignorePath&quot;: &quot;.prettierignore&quot;, &#x2F;&#x2F; ä¸ä½¿ç”¨prettieræ ¼å¼åŒ–çš„æ–‡ä»¶å¡«å†™åœ¨é¡¹ç›®çš„.prettierignoreæ–‡ä»¶ä¸­\n    &quot;prettier.jsxBracketSameLine&quot;: true, &#x2F;&#x2F; åœ¨jsxä¸­æŠŠ&#39;&gt;&#39; å•ç‹¬æ”¾ä¸€è¡Œ\n    &quot;prettier.jsxSingleQuote&quot;: false, &#x2F;&#x2F; åœ¨jsxä¸­ä½¿ç”¨å•å¼•å·ä»£æ›¿åŒå¼•å·\n    &#x2F;&#x2F; &quot;prettier.parser&quot;: &quot;babylon&quot;, &#x2F;&#x2F; æ ¼å¼åŒ–çš„è§£æå™¨ï¼Œé»˜è®¤æ˜¯babylon\n    &quot;prettier.requireConfig&quot;: false, &#x2F;&#x2F; ä¸è®©prettierä½¿ç”¨tslintçš„ä»£ç æ ¼å¼è¿›è¡Œæ ¡éªŒ\n&#125;","slug":"ä¸€äº›VSCodeä¸Šç»å¸¸ä½¿ç”¨çš„ä»£ç æ ¼å¼é…ç½®","date":"2023-02-25T08:30:49.000Z","categories_index":"","tags_index":"","author_index":"Beastrong"},{"id":"570b4b67776f5ca65289af79d788c1db","title":"Vue3 + ts ä½¿ç”¨æ€»ç»“","content":"\né˜…è¯»vueçš„è‹±æ–‡å®˜ç½‘Vueçš„ä¸­æ–‡å®˜ç½‘è´¨é‡æ¯”èµ·Vueçš„è‹±æ–‡å®˜ç½‘ï¼Œä½ ä¼šå‘ç°è´¨é‡æœ‰ç‚¹å·®è·ï¼Œä¸è¿‡è¿™ç§æƒ…å†µå¾ˆå®¹æ˜“ç†è§£ï¼Œå› ä¸ºVueæ˜¯æœåŠ¡äºå…¨çƒçš„å¼€æºé¡¹ç›®ä¹‹ä¸€ã€‚\nå› æ­¤ï¼Œä½œä¸ºç¨‹åºå‘˜ï¼Œå­¦å¥½è‹±è¯­æ˜¯æé«˜ç”Ÿäº§åŠ›çš„é‡è¦å› ç´ ã€‚\nå¯¹äºå¼€å‘è€…æ¥è¯´ï¼ŒæŒæ¡è‹±è¯­æ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼Œå› ä¸ºå®ƒæ˜¯å…¨çƒé€šç”¨çš„ç¼–ç¨‹è¯­è¨€ä¹‹ä¸€ã€‚åœ¨å­¦ä¹ å’ŒæŒæ¡æ–°æŠ€æœ¯ã€é˜…è¯»æ–‡æ¡£ã€ä¸å…¶ä»–ç¨‹åºå‘˜äº¤æµå’Œåä½œæ—¶ï¼Œèƒ½å¤Ÿæµåˆ©åœ°ä½¿ç”¨è‹±è¯­å°†ä¼šä½¿å·¥ä½œæ›´åŠ é«˜æ•ˆå’Œä¾¿æ·ã€‚\næ€»ä¹‹ï¼Œå­¦å¥½è‹±è¯­æ˜¯ç¨‹åºå‘˜å¿…å¤‡çš„æŠ€èƒ½ä¹‹ä¸€ï¼Œå®ƒå°†ä¸ºæˆ‘ä»¬çš„èŒä¸šå‘å±•å’Œæˆé•¿å¸¦æ¥é‡è¦çš„å¸®åŠ©å’Œæœºä¼šã€‚\næ‰€ä»¥ç¨‹åºå‘˜çš„ç¬¬ä¸€ç”Ÿäº§åŠ›è¿˜æ˜¯è‹±è¯­ï¼Œé‡è¦çš„è¯è¯´ä¸‰éï¼Œè‹±è¯­ï¼Œè‹±è¯­ï¼Œè¿˜æ˜¯è‹±è¯­ï¼\nå¦å¤–ä¸ç®¡å­¦ä»€ä¹ˆéƒ½è¦å»è·å–ç¬¬ä¸€æ‰‹èµ„æ–™ï¼Œä¸è¦çœ‹åˆ«äººå•ƒå‰©ä¸‹çš„ä¸œè¥¿ï¼Œç›´æ¥å»çœ‹è‹±æ–‡å®˜ç½‘\nviteåˆå§‹åŒ–é¡¹ç›®\npnpm create vite\n\n\n\né€‰æ‹©vueï¼Œå†é€‰æ‹©typescript\nå¯åŠ¨é¡¹ç›®\n\n  cd test1\n  pnpm install\n  pnpm run dev\nå¤åˆ¶ä»£ç \n\nè¿™é‡Œé€‰æ‹©pnpmï¼Œpnpmç›¸å¯¹npmå’Œyarnåšäº†ä¸€äº›æ”¹è¿›ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥å»æœä¸‹ï¼Œåˆ‡æ¢çš„å¿ƒæ™ºæˆæœ¬ä¹Ÿä¸é«˜ã€‚\nvscodeçš„vueä»£ç ç‰‡æ®µæ ¹æ®è‡ªå·±çš„ä½¿ç”¨ä¹ æƒ¯ï¼Œè®¾ç½®vscodeçš„vueä»£ç ç‰‡æ®µï¼Œæ¨èä½¿ç”¨snippet-generator.app\n&quot;vue3æ¨¡ç‰ˆ&quot;: &#123;\n\n&quot;prefix&quot;: &quot;vue3&quot;,\n\n&quot;body&quot;: [\n\n   &quot;&lt;template&gt;&quot;,\n\n       &quot; &lt;div class&#x3D;&#39;$&#123;1:box&#125;&#39;&gt;&lt;&#x2F;div&gt;&quot;,\n\n   &quot;&lt;&#x2F;template&gt;&quot;,\n\n   &quot; &quot;,\n\n   &quot;&lt;script setup lang&#x3D;&#39;ts&#39;&gt;&quot;,\n\n   &quot; import &#123;ref,reactive&#125; from &quot;vue&quot;;&quot;,\n\n   &quot; $&#123;3&#125;&quot;,\n\n   &quot;&lt;&#x2F;script&gt;&quot;,\n\n   &quot; &quot;,\n\n   &quot;&lt;style lang&#x3D;&quot;scss&quot; scoped&gt;&quot;,\n\n   &quot; .$&#123;2:box&#125; &#123;&quot;,\n\n   &quot; &#125;&quot;,\n\n   &quot;&lt;&#x2F;style&gt;&quot;\n\n],\n\n&quot;description&quot;: &quot;vue3æ¨¡ç‰ˆ&quot;\n\n&#125;\nå¤åˆ¶ä»£ç \n\nå¦å¤–vscodeçš„ä¸ä»…å¯ä»¥è®¾ç½®vueçš„ä»£ç ç‰‡æ®µï¼Œç†è®ºä¸Šä½ åœ¨vscodeä¸Šå†™çš„ä»»ä½•ä»£ç ï¼Œéƒ½å¯ä»¥è®¾ç½®æˆä»£ç ç‰‡æ®µï¼Œæ–¹ä¾¿è‡ªå·±ä»¥åä½¿ç”¨ã€‚\nè¿™ä¸ªè‡ªå·±æ ¹æ®è‡ªå·±çš„ä¸ªäººä¹ æƒ¯ï¼Œè‡ªå·±æŒ–æ˜ã€‚\nå¦å¤–å› ä¸ºä½¿ç”¨vscodeå¼€å‘vueçš„typescripté¡¹ç›®ï¼Œvscodeè¿˜éœ€è¦å®‰è£…å¯¹åº”çš„æ’ä»¶ï¼Œæ¯”å¦‚TypeScript Vue Plugin\n\nè¿™é‡Œéšç€chatGptçš„å¤§ç«ï¼Œä½ ä¼šå‘ç°ä½ å†™ä»£ç çš„æ–¹å¼ä¼šæ…¢æ…¢æ”¹å˜ï¼Œç°åœ¨ä¸€äº›æœ‰ä¸€äº›å°è¯•ï¼Œæ¯”å¦‚Github Compilot\n\nGithub Compilot å¯ä»¥æ ¹æ®ä½ å†™çš„ä»£ç ï¼Œè‡ªåŠ¨å­¦ä¹ ï¼Œç„¶åå½“ä½ å†™å…¶å®ƒä»£ç çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨ç»™å‡ºä½ æç¤ºï¼Œå¦‚æœä½ å»è¯•ç”¨ï¼Œä½ ä¼šå‘ç°å¤ªç‰›é€¼äº†ğŸ˜„ã€‚\nå¦å¤–åœ¨å·¥ä½œä¸­ï¼Œä¸€äº›é‡å¤çš„å·¥ä½œï¼Œå°½é‡æƒ³ç€å¦‚ä½•å»ä¼˜åŒ–ï¼Œå»èŠ‚çœè‡ªå·±çš„æ—¶é—´ï¼Œæ¯”å¦‚ä¸€äº›æ¨¡ç‰ˆä»£ç çš„ç¼–å†™ï¼Œä¸€äº›å¢åˆ æ”¹æŸ¥çš„å·¥ä½œï¼Œèƒ½ç”¨å·¥å…·å°±ç”¨å·¥å…·ã€‚\næ¯”å¦‚å¦‚æœä½ ä½¿ç”¨umiï¼Œä½ ä¼šå‘ç°å¾ˆå¤šé‡å¤çš„å·¥ä½œå…¶å®éƒ½ç»™ä½ ç®€åŒ–æˆäº†ä¸€ä¸ªå‘½ä»¤ï¼Œæ¯”å¦‚åˆ›å»ºé¡µé¢ï¼Œæ¯”å¦‚åˆå§‹åŒ–prettierç­‰ã€‚\næ€»ä¹‹å°±æ˜¯èƒ½ç”¨å·¥å…·å¤„ç†çš„ï¼Œå°±ç”¨å·¥å…·å¤„ç†ï¼Œå¦‚æœè‡ªå·±è§‰å¾—åšäº†ï¼Œéƒ½ä¸ä¼šæå‡è‡ªå·±ï¼Œå°±æƒ³åŠæ³•è‡ªåŠ¨åŒ–å»å¤„ç†ã€‚\nVueç»„ä»¶å¼•å…¥å½“ä½¿ç”¨setupçš„æ—¶å€™ï¼Œç»„ä»¶ç›´æ¥å¼•å…¥å°±å¯ä»¥äº†ï¼Œä¸éœ€è¦å†è‡ªå·±æ‰‹åŠ¨æ³¨å†Œ.\nä¸‹é¢å°±æ˜¯ç›´æ¥æŠŠHelloWorldè¿™ä¸ªç»„ä»¶åœ¨Appç»„ä»¶é‡Œè¾¹å¼•å…¥ï¼Œç›´æ¥ä½¿ç”¨å°±å¯ä»¥äº†ï¼Œä¸éœ€è¦å†åƒä»¥å‰é‚£æ ·æ³¨å†Œã€‚\n&lt;script setup lang&#x3D;&quot;ts&quot;&gt;\nimport HelloWorld from &quot;.&#x2F;components&#x2F;HelloWorld.vue&quot;;\n&lt;&#x2F;script&gt;\n\n&lt;template&gt;\n  &lt;HelloWorld msg&#x3D;&quot;Vite + Vue&quot; &#x2F;&gt;\n&lt;&#x2F;template&gt;\nå¤åˆ¶ä»£ç \n\nå¦‚æœä¸ä½¿ç”¨setupï¼Œä½ ä¼šå‘ç°å¼•å…¥ä¸€ä¸ªç»„ä»¶ï¼Œè¿˜æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼Œå¯ä»¥å¯¹æ¯”ä¸€ä¸‹ä»£ç ï¼Œè‡ªå·±æ„Ÿå—ä¸€ä¸‹ğŸ˜„\n&lt;template&gt;\n  &lt;div&gt;\n    &lt;HelloWorld msg&#x3D;&quot;Hello, Vue 3!&quot; &#x2F;&gt;\n  &lt;&#x2F;div&gt;\n&lt;&#x2F;template&gt;\n\n&lt;script lang&#x3D;&quot;ts&quot;&gt;\nimport &#123; defineComponent &#125; from &#39;vue&#39;\nimport HelloWorld from &#39;.&#x2F;HelloWorld.vue&#39;\n\nexport default defineComponent(&#123;\n  components: &#123;\n    HelloWorld\n  &#125;\n&#125;)\n&lt;&#x2F;script&gt;\nå¤åˆ¶ä»£ç \n\ndefinePropsçš„ä½¿ç”¨defineProps åœ¨æœ‰ä¸¤ç§å®šä¹‰æ–¹å¼ï¼Œä½ å¯ä»¥ä»»æ„é€‰æ‹©å…¶ä¸­ä¸€ç§ï¼Œä½†æ˜¯ä¸èƒ½ä¸¤ç§éƒ½ä½¿ç”¨\nå®˜æ–¹è¯´æ˜\nHowever, it is usually more straightforward to define props with pure types via a generic type argument:\nç¬¬ä¸€ç§â€runtime declarationâ€\nconst props &#x3D; defineProps(&#123;\n  foo: &#123; type: String, required: true &#125;,\n  bar: Number,\n&#125;);\nå¤åˆ¶ä»£ç \n\nç¬¬äºŒç§â€type-based declarationâ€\n&lt;script setup lang&#x3D;&quot;ts&quot;&gt; \n    interface Props &#123; \n        foo: string \n        bar?: number \n    &#125; \n    const props &#x3D; defineProps&lt;Props&gt;() \n&lt;&#x2F;script&gt;\nå¤åˆ¶ä»£ç \n\nè¿™ä¸¤ç§å®šä¹‰æ–¹å¼æ²¡å¤šå¤§åŒºåˆ«ï¼Œå¯ä»¥ä»»æ„é€‰æ‹©ä¸€ç§ä½¿ç”¨ï¼Œä½†æ˜¯ä¸èƒ½ä¸¤ç§åŒæ—¶ä½¿ç”¨ã€‚\nåŒæ—¶æˆ‘ä»¬æœ‰äº›æƒ…å†µä¸‹ï¼Œä¹Ÿå¸Œæœ›propsèƒ½å¤Ÿæœ‰é»˜è®¤å€¼ï¼Œå¯ä»¥å¦‚ä¸‹ä½¿ç”¨ï¼š\n\n&#x2F;&#x2F; ç¬¬äºŒç§å¸¦é»˜è®¤å€¼props\nexport interface ChildProps &#123;\n  foo: string\n  bar?: number\n&#125;\nconst props &#x3D; withDefaults(defineProps&lt;ChildProps&gt;(), &#123;\n   foo: &quot;1qsd&quot;\n   bar?: 3\n&#125;)\n\nå¤åˆ¶ä»£ç \n\nå½“ç„¶å¦‚æœé‡åˆ°ç‰¹åˆ«å¤æ‚çš„å¯¹è±¡ï¼Œéœ€è¦ä½¿ç”¨tså®šä¹‰çš„æ—¶å€™ï¼Œå¯ä»¥è¿™æ ·ä½¿ç”¨ï¼š\n&lt;script setup lang&#x3D;&quot;ts&quot;&gt;\ninterface Book &#123;\n  title: string;\n  author: string;\n  year: number;\n&#125;\n\nconst props &#x3D; defineProps&lt;&#123;\n  book: Book;\n&#125;&gt;();\n&lt;&#x2F;script&gt;\nå¤åˆ¶ä»£ç \n\næˆ–è€…ä½¿ç”¨runtimeé‚£ç§æ–¹å¼\nimport type &#123; PropType &#125; from &#39;vue&#39;\n\ninterface Book &#123;\n  title: string;\n  author: string;\n  year: number;\n&#125;\n\nconst props &#x3D; defineProps(&#123;\n  book: Object as PropType&lt;Book&gt;\n&#125;)\n\nå¤åˆ¶ä»£ç \n\ndefineEmitså’ŒdefinePropsè·å–çˆ¶ç»„ä»¶ä¼ è¿‡æ¥å€¼å’Œäº‹ä»¶\n&#x2F;&#x2F; ç¬¬ä¸€ç§è·å–äº‹ä»¶æ–¹æ³•\nconst emit &#x3D; defineEmits&lt;&#123;\n  (e: &#39;change&#39;, id: number): void\n  (e: &#39;update&#39;, value: string): void\n&#125;&gt;()\n\n&#x2F;&#x2F; ç¬¬äºŒç§è·å–äº‹ä»¶æ–¹æ³•\nconst emit &#x3D; defineEmits([&quot;dosth&quot;])\n\nå¤åˆ¶ä»£ç \n\nrefå’Œreactiverefä¸€èˆ¬ç”¨äºåŸºæœ¬çš„æ•°æ®ç±»å‹ï¼Œæ¯”å¦‚stringï¼Œboolean\nreactiveä¸€èˆ¬ç”¨äºå¯¹è±¡\nä½¿ç”¨reactiveçš„æ³¨æ„äº‹é¡¹ï¼š\n\nreactiveä¸èƒ½ç”¨äºstringï¼Œnumberï¼Œboolean\n\nvueå®˜æ–¹ç½‘ç«™è¯´æ˜å¦‚ä¸‹ï¼š It cannot holdÂ primitive typesÂ such asÂ string,Â numberÂ orÂ boolean\n\nä¸èƒ½ä¿®æ”¹reactiveè®¾ç½®çš„å€¼\n\næ¯”å¦‚ï¼š\nlet state &#x3D; reactive(&#123; count: 0 &#125;) \n&#x2F;&#x2F; the above reference (&#123; count: 0 &#125;) is no longer being tracked (reactivity connection &#x2F;&#x2F; is lost!) \n&#x2F;&#x2F; è¿™é‡Œstateå¦‚æœé‡æ–°èµ‹å€¼ä»¥åï¼Œvueå°±ä¸èƒ½åŒå‘ç»‘å®š\nstate &#x3D; reactive(&#123; count: 1 &#125;)\nå¤åˆ¶ä»£ç \n\nrefçš„åº•å±‚å®ç°ï¼Œå…¶å®ä¹Ÿæ˜¯è°ƒç”¨çš„reactiveå®ç°çš„ï¼Œæœ‰ç‚¹ç±»ä¼¼react hooksçš„useStateå’ŒuseReducerï¼›\nä½¿ç”¨useAttrså’ŒuseSlotsuseAttrs å¯ä»¥è·å–çˆ¶ç»„ä»¶ä¼ è¿‡æ¥çš„idå’Œclassç­‰å€¼ã€‚ useSlots å¯ä»¥è·å¾—æ’æ§½çš„å†…å®¹ã€‚ ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨useAttrsè·å–çˆ¶ç»„ä»¶ä¼ è¿‡æ¥çš„idå’Œclassï¼ŒuseSlotsè·å–æ’æ§½çš„å†…å®¹ã€‚\nçˆ¶ç»„ä»¶ï¼š\n&lt;template&gt;\n\n    &lt;div class&#x3D;&quot;father&quot;&gt;&#123;&#123; fatherRef &#125;&#125;&lt;&#x2F;div&gt;\n\n    &lt;Child :fatherRef&#x3D;&quot;fatherRef&quot; @changeVal&#x3D;&quot;changeVal&quot; class&#x3D;&quot;btn&quot; id&#x3D;&quot;111&quot;&gt;\n\n        &lt;template #test1&gt;\n\n        &lt;div&gt;1223&lt;&#x2F;div&gt;\n\n        &lt;&#x2F;template&gt;\n\n    &lt;&#x2F;Child&gt;\n\n&lt;&#x2F;template&gt;\n\n&lt;script setup lang&#x3D;&quot;ts&quot;&gt;\n\nimport &#123; ref &#125; from &quot;vue&quot;;\n\nimport Child from &quot;.&#x2F;Child.vue&quot;;\n\nconst fatherRef &#x3D; ref(&quot;1&quot;);\n\nfunction changeVal(val: string) &#123;\n\n    fatherRef.value &#x3D; val;\n\n&#125;\n\n&lt;&#x2F;script&gt;\n\n&lt;style lang&#x3D;&quot;scss&quot; scoped&gt;\n\n.father &#123;\n\n    margin-top: 40px;\n\n    margin-bottom: 40px;\n\n&#125;\n\n.btn &#123;\n\n    font-size: 20px;\n\n    color: red;\n\n&#125;\n\n&lt;&#x2F;style&gt;\nå¤åˆ¶ä»£ç \n\nå­ç»„ä»¶ï¼š\n&lt;template&gt;\n\n    &lt;!-- &lt;div class&#x3D;&quot;child&quot;&gt;&#123;&#123; props.fatherRef &#125;&#125;&lt;&#x2F;div&gt; --&gt;\n\n    &lt;div v-bind&#x3D;&quot;attrs&quot;&gt;\n\n        &lt;slot name&#x3D;&quot;test1&quot;&gt;11&lt;&#x2F;slot&gt;\n\n        &lt;input type&#x3D;&quot;text&quot; v-model&#x3D;&quot;inputVal&quot; &#x2F;&gt;\n\n    &lt;&#x2F;div&gt;\n\n&lt;&#x2F;template&gt;\n\n&lt;script setup lang&#x3D;&quot;ts&quot;&gt;\n\nimport &#123; computed, useAttrs, useSlots &#125; from &quot;vue&quot;;\n\nconst props &#x3D; defineProps&lt;&#123;\n\n    fatherRef: string;\n\n&#125;&gt;();\n\nconst emits &#x3D; defineEmits([&quot;changeVal&quot;]);\n\nconst slots &#x3D; useSlots();\n\nconst attrs &#x3D; useAttrs();\n\nconsole.log(122, attrs, slots);\n\nconst inputVal &#x3D; computed(&#123;\n\n    get() &#123;\n\n        return props.fatherRef;\n\n    &#125;,\n\n    set(val: string) &#123;\n\n        emits(&quot;changeVal&quot;, val);\n\n    &#125;,\n\n&#125;);\n\n&lt;&#x2F;script&gt;\n\n\n&lt;style lang&#x3D;&quot;scss&quot; scoped&gt;\n\n.child &#123;\n\n&#125;\n\n&lt;&#x2F;style&gt;\n\nå¤åˆ¶ä»£ç \n\nä½¿ç”¨è‡ªå®šä¹‰æŒ‡ä»¤åœ¨setupé‡Œè¾¹è‡ªå®šä¹‰æŒ‡ä»¤çš„æ—¶å€™ï¼Œåªéœ€è¦éµå¾ªvNameOfDirectiveÂ è¿™æ ·çš„å‘½åè§„èŒƒå°±å¯ä»¥äº†\næ¯”å¦‚å¦‚ä¸‹è‡ªå®šä¹‰focusæŒ‡ä»¤ï¼Œå‘½åå°±æ˜¯vMyFocusï¼Œä½¿ç”¨çš„å°±æ˜¯v-my-focus\nè‡ªå®šä¹‰æŒ‡ä»¤\n&lt;script setup lang&#x3D;&quot;ts&quot;&gt;\nconst vMyFocus &#x3D; &#123;\n  onMounted: (el: HTMLInputElement) &#x3D;&gt; &#123;\n    el.focus();\n    &#x2F;&#x2F; åœ¨å…ƒç´ ä¸Šåšäº›æ“ä½œ\n  &#125;,\n&#125;;\n&lt;&#x2F;script&gt;\n&lt;template&gt;\n  &lt;input v-my-focus value&#x3D;&quot;111&quot; &#x2F;&gt;\n&lt;&#x2F;template&gt;\n\n\nå¤åˆ¶ä»£ç \n\nä½¿ç”¨defineExposeå­ç»„ä»¶ä¼ çˆ¶ç»„ä»¶å­ç»„ä»¶\n&lt;template&gt;\n\n    &lt;div class&#x3D;&quot;child&quot;&gt;&lt;&#x2F;div&gt;\n\n&lt;&#x2F;template&gt;\n\n\n&lt;script setup lang&#x3D;&quot;ts&quot;&gt;\n\nimport &#123; ref, reactive &#125; from &quot;vue&quot;;\n\nfunction doSth() &#123;\n\n    console.log(333);\n\n&#125;\n\ndefineExpose(&#123; doSth &#125;);\n\n&lt;&#x2F;script&gt;\n\n\n&lt;style lang&#x3D;&quot;scss&quot; scoped&gt;\n\n.child &#123;\n\n&#125;\n\n&lt;&#x2F;style&gt;\n\nå¤åˆ¶ä»£ç \n\nçˆ¶ç»„ä»¶\n&lt;template&gt;\n\n&lt;div class&#x3D;&quot;father&quot; @click&#x3D;&quot;doSth1&quot;&gt;222&lt;&#x2F;div&gt;\n\n    &lt;Child ref&#x3D;&quot;childRef&quot;&gt;&lt;&#x2F;Child&gt;\n\n&lt;&#x2F;template&gt;\n\n&lt;script setup lang&#x3D;&quot;ts&quot;&gt;\n\nimport &#123; ref, reactive &#125; from &quot;vue&quot;;\n\nimport Child from &quot;.&#x2F;Child.vue&quot;;\n\nconst childRef &#x3D; ref();\n\nfunction doSth1() &#123;\n\n    childRef.value.doSth();\n\n&#125;\n\n&lt;&#x2F;script&gt;\n\n&lt;style lang&#x3D;&quot;scss&quot; scoped&gt;\n\n.father &#123;\n\n&#125;\n\n&lt;&#x2F;style&gt;\n\nå¤åˆ¶ä»£ç \n\nçˆ¶ç»„ä»¶ä¼ å­ç»„ä»¶çˆ¶ç»„ä»¶\n&lt;template&gt;\n\n    &lt;div class&#x3D;&quot;father&quot;&gt;&lt;&#x2F;div&gt;\n\n    &lt;Child @click&#x3D;&quot;doSth&quot;&gt;&lt;&#x2F;Child&gt;\n\n&lt;&#x2F;template&gt;\n\n&lt;script setup lang&#x3D;&quot;ts&quot;&gt;\n\nimport &#123; ref, reactive &#125; from &quot;vue&quot;;\n\nimport Child from &quot;.&#x2F;Child.vue&quot;;\n\nfunction doSth() &#123;\n\n    console.log(112);\n\n&#125;\n\n&lt;&#x2F;script&gt;\n\n&lt;style lang&#x3D;&quot;scss&quot; scoped&gt;\n\n.father &#123;\n\n&#125;\n\n&lt;&#x2F;style&gt;\n\nå¤åˆ¶ä»£ç \n\nå­ç»„ä»¶\n&lt;template&gt;\n\n    &lt;div class&#x3D;&quot;child&quot;&gt;2222&lt;&#x2F;div&gt;\n\n&lt;&#x2F;template&gt;\n\n&lt;script setup lang&#x3D;&quot;ts&quot;&gt;\n\nimport &#123; ref, reactive, onMounted &#125; from &quot;vue&quot;;\n\nconst emits &#x3D; defineEmits([&quot;doSth&quot;]);\n\nonMounted(() &#x3D;&gt; &#123;\n\n    emits(&quot;doSth&quot;);\n\n&#125;);\n\n&lt;&#x2F;script&gt;\n\n&lt;style lang&#x3D;&quot;scss&quot; scoped&gt;\n\n.child &#123;\n\n&#125;\n\n&lt;&#x2F;style&gt;\n\nå¤åˆ¶ä»£ç \n\ntoRefså½“ä»çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ propsçš„æ—¶å€™ï¼Œå¿…é¡»ä½¿ç”¨toRefsæˆ–è€…toRefè¿›è¡Œè½¬ä¸€ä¸‹ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ\nè¿™é‡Œæ˜¯å› ä¸ºå¦‚æœä¸ä½¿ç”¨toRefsè½¬ä¸€æ¬¡çš„è¯ï¼Œå½“çˆ¶ç»„ä»¶ä¸­çš„propsæ”¹å˜çš„æ—¶å€™ï¼Œå­ç»„ä»¶å¦‚æœä½¿ç”¨äº†Es6çš„è§£æï¼Œä¼šå¤±å»å“åº”æ€§ã€‚\nå¯ä»¥çœ‹ä¸‹å¦‚ä¸‹ä¾‹å­\nçˆ¶ç»„ä»¶\n&lt;template&gt;\n\n&lt;div class&#x3D;&quot;father&quot; @click&#x3D;&quot;changeVal&quot;&gt;&#123;&#123; fatherRef &#125;&#125;&lt;&#x2F;div&gt;\n\n    &lt;Child :fatherRef&#x3D;&quot;fatherRef&quot;&gt;&lt;&#x2F;Child&gt;\n\n&lt;&#x2F;template&gt;\n\n&lt;script setup lang&#x3D;&quot;ts&quot;&gt;\n\nimport &#123; ref, reactive &#125; from &quot;vue&quot;;\n\nimport Child from &quot;.&#x2F;Child.vue&quot;;\n\nconst fatherRef &#x3D; ref(1);\n\nfunction changeVal() &#123;\n\n    fatherRef.value &#x3D; 2;\n\n&#125;\n\n&lt;&#x2F;script&gt;\n\n&lt;style lang&#x3D;&quot;scss&quot; scoped&gt;\n\n.father &#123;\n\n    margin-bottom: 40px;\n\n&#125;\n\n&lt;&#x2F;style&gt;\n\nå¤åˆ¶ä»£ç \n\nå­ç»„ä»¶\n&lt;template&gt;\n\n    &lt;div class&#x3D;&quot;child&quot; @click&#x3D;&quot;changeVal&quot;&gt;&#123;&#123; fatherRef &#125;&#125;&lt;&#x2F;div&gt;\n\n&lt;&#x2F;template&gt;\n\n&lt;script setup lang&#x3D;&quot;ts&quot;&gt;\n\nimport &#123; ref, reactive, onMounted, toRefs &#125; from &quot;vue&quot;;\n\nconst props &#x3D; defineProps&lt;&#123;\n\n    fatherRef: any;\n\n&#125;&gt;();\n\nconst &#123; fatherRef &#125; &#x3D; props;\n\nfunction changeVal() &#123;\n\n    fatherRef.value &#x3D; 34;\n&#125;\n\n&lt;&#x2F;script&gt;\n\n&lt;style lang&#x3D;&quot;scss&quot; scoped&gt;\n\n.child &#123;\n\n&#125;\n\n&lt;&#x2F;style&gt;\n\nå¤åˆ¶ä»£ç \n\nå¯ä»¥çœ‹åˆ°å½“çˆ¶ç»„ä»¶å¦‚æœç‚¹å‡»ä¹‹åï¼Œå› ä¸ºä½¿ç”¨const { fatherRef } &#x3D; props;è¿›è¡Œè§£æï¼Œå°±å¤±å»äº†å“åº”æ€§\næ‰€ä»¥å½“çˆ¶ç»„ä»¶å˜æˆ2çš„æ—¶å€™ï¼Œå­ç»„ä»¶è¿˜æ˜¯1ã€‚\nè¿™é‡Œæœ‰ä¸¤ç§è§£å†³åŠæ³•\n\nä½¿ç”¨const { fatherRef } &#x3D; toRefs(props);\nåœ¨æ¨¡ç‰ˆä¸­ä¸­ä½¿ç”¨props.fatherRef\n\nå­ç»„ä»¶ä½¿ç”¨v-model1. å¯ä»¥åœ¨å­ç»„ä»¶ä¸­ä½¿ç”¨computedï¼Œå®ç°åŒå‘ç»‘å®šçˆ¶ç»„ä»¶\n&lt;template&gt;\n\n    &lt;div class&#x3D;&quot;father&quot;&gt;&#123;&#123; fatherRef &#125;&#125;&lt;&#x2F;div&gt;\n\n    &lt;Child :fatherRef&#x3D;&quot;fatherRef&quot; @changeVal&#x3D;&quot;changeVal&quot;&gt;&lt;&#x2F;Child&gt;\n\n&lt;&#x2F;template&gt;\n\n&lt;script setup lang&#x3D;&quot;ts&quot;&gt;\n\nimport &#123; ref &#125; from &quot;vue&quot;;\n\nimport Child from &quot;.&#x2F;Child.vue&quot;;\n\nconst fatherRef &#x3D; ref(&quot;1&quot;);\n\nfunction changeVal(val: string) &#123;\n\n    fatherRef.value &#x3D; val;\n\n&#125;\n\n&lt;&#x2F;script&gt;\n\n\n&lt;style lang&#x3D;&quot;scss&quot; scoped&gt;\n\n.father &#123;\n\n    margin-top: 40px;\n\n    margin-bottom: 40px;\n\n&#125;\n\n&lt;&#x2F;style&gt;\n\nå¤åˆ¶ä»£ç \n\nå­ç»„ä»¶\n&lt;template&gt;\n\n    &lt;!-- &lt;div class&#x3D;&quot;child&quot;&gt;&#123;&#123; props.fatherRef &#125;&#125;&lt;&#x2F;div&gt; --&gt;\n\n    &lt;input type&#x3D;&quot;text&quot; v-model&#x3D;&quot;inputVal&quot; &#x2F;&gt;\n\n&lt;&#x2F;template&gt;\n\n&lt;script setup lang&#x3D;&quot;ts&quot;&gt;\n\nimport &#123; computed &#125; from &quot;vue&quot;;\n\nconst props &#x3D; defineProps&lt;&#123;\n\n    fatherRef: string;\n\n&#125;&gt;();\n\nconst emits &#x3D; defineEmits([&quot;changeVal&quot;]);\n\n\nconst inputVal &#x3D; computed(&#123;\n\n    get() &#123;\n\n        return props.fatherRef;\n\n    &#125;,\n\n    set(val: string) &#123;\n\n        emits(&quot;changeVal&quot;, val);\n\n    &#125;,\n\n&#125;);\n\n&lt;&#x2F;script&gt;\n\n&lt;style lang&#x3D;&quot;scss&quot; scoped&gt;\n\n.child &#123;\n\n&#125;\n\n&lt;&#x2F;style&gt;\n\nå¤åˆ¶ä»£ç \n\n2 å¯ä»¥ä»çˆ¶ç»„ä»¶ä¼ é€’å€¼å’Œæ”¹å˜å€¼çš„æ–¹æ³•ï¼Œç„¶åå­ç»„ä»¶ä¹Ÿå¯ä»¥ä½¿ç”¨v-modelä¾‹å­ä¸­çˆ¶ç»„ä»¶ä¼ é€’ modelValueå’Œupdate:modelValueæ–¹æ³• çˆ¶ç»„ä»¶ï¼š\n&lt;template&gt;\n\n    &lt;Child :modelValue&#x3D;&quot;searchText&quot; @update:modelValue&#x3D;&quot;changeVal&quot;&gt; &lt;&#x2F;Child&gt;\n\n&lt;&#x2F;template&gt;\n\n&lt;script setup lang&#x3D;&quot;ts&quot;&gt;\n\nimport &#123; ref &#125; from &quot;vue&quot;;\n\nimport Child from &quot;.&#x2F;Child.vue&quot;;\n\nconst searchText &#x3D; ref(1);\n\nfunction changeVal(val: number) &#123;\n\n    searchText.value &#x3D; val;\n\n&#125;\n\n&lt;&#x2F;script&gt;\n\n&lt;style lang&#x3D;&quot;scss&quot; scoped&gt;\n\n.father &#123;\n\n    margin-top: 40px;\n\n    margin-bottom: 40px;\n\n&#125;\n\n.btn &#123;\n\n    font-size: 20px;\n\n    color: red;\n\n&#125;\n\n&lt;&#x2F;style&gt;\nå¤åˆ¶ä»£ç \n\nå­ç»„ä»¶ï¼š\n&lt;template&gt;\n\n    &lt;!-- &lt;div class&#x3D;&quot;child&quot;&gt;&#123;&#123; props.fatherRef &#125;&#125;&lt;&#x2F;div&gt; --&gt;\n\n    &lt;!-- &lt;div v-bind&#x3D;&quot;attrs&quot;&gt;\n\n        &lt;slot name&#x3D;&quot;test1&quot;&gt;11&lt;&#x2F;slot&gt;\n\n        &lt;input type&#x3D;&quot;text&quot; v-model&#x3D;&quot;inputVal&quot; &#x2F;&gt;\n\n    &lt;&#x2F;div&gt; --&gt;\n\n    &lt;input v-model&#x3D;&quot;modelValue&quot; &#x2F;&gt;\n\n&lt;&#x2F;template&gt;\n\n\n&lt;script setup lang&#x3D;&quot;ts&quot;&gt;\n\nimport &#123; computed, useAttrs, useSlots &#125; from &quot;vue&quot;;\n\nconst props &#x3D; defineProps&lt;&#123;\n\n    modelValue: number;\n\n&#125;&gt;();\n\n&#x2F;&#x2F; const emits &#x3D; defineEmits([&quot;changeVal&quot;]);\n\n&lt;&#x2F;script&gt;\n\n\n&lt;style lang&#x3D;&quot;scss&quot; scoped&gt;\n\n.child &#123;\n\n&#125;\n\n&lt;&#x2F;style&gt;\n\nå¤åˆ¶ä»£ç \n\né€’å½’ç»„ä»¶ç»„ä»¶æœ¬èº«æ˜¯å¯ä»¥è°ƒç”¨ç»„ä»¶è‡ªèº«çš„ï¼Œä¹Ÿå°±æ˜¯é€’å½’ã€‚ æ¯”å¦‚åä¸ºÂ Child.vueÂ çš„ç»„ä»¶å¯ä»¥åœ¨å…¶æ¨¡æ¿ä¸­ç”¨Â &lt;Child/&gt;Â å¼•ç”¨å®ƒè‡ªå·±ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯éœ€è¦è®¾ç½®æ¡ä»¶è¯­å¥ï¼Œç”¨æ¥ä¸­æ–­é€’å½’ï¼Œä¸ç„¶é€’å½’ä¼šæ— é™é€’å½’ä¸‹å»ã€‚\nçˆ¶ç»„ä»¶\n&lt;template&gt;\n  &lt;Child :modelValue&#x3D;&quot;searchText&quot; @update:modelValue&#x3D;&quot;changeVal&quot;&gt; &lt;&#x2F;Child&gt;\n&lt;&#x2F;template&gt;\n\n&lt;script setup lang&#x3D;&quot;ts&quot;&gt;\nimport &#123; ref &#125; from &quot;vue&quot;;\nimport Child from &quot;.&#x2F;Child.vue&quot;;\nconst searchText &#x3D; ref(1);\nfunction changeVal(val: number) &#123;\n  searchText.value &#x3D; val;\n&#125;\n&lt;&#x2F;script&gt;\n\n&lt;style lang&#x3D;&quot;scss&quot; scoped&gt;\n.father &#123;\n  margin-top: 40px;\n  margin-bottom: 40px;\n&#125;\n.btn &#123;\n  font-size: 20px;\n  color: red;\n&#125;\n&lt;&#x2F;style&gt;\n\nå¤åˆ¶ä»£ç \n\nå­ç»„ä»¶\n&lt;template&gt;\n  &lt;input v-model&#x3D;&quot;modelValue&quot; &#x2F;&gt;\n  &lt;Child\n    :modelValue&#x3D;&quot;test&quot;\n    @update:modelValue&#x3D;&quot;changeTest&quot;\n    v-if&#x3D;&quot;modelValue &gt; 2&quot;\n  &gt;&lt;&#x2F;Child&gt;\n&lt;&#x2F;template&gt;\n\n&lt;script setup lang&#x3D;&quot;ts&quot;&gt;\nimport &#123; computed, useAttrs, useSlots, ref &#125; from &quot;vue&quot;;\nconst props &#x3D; defineProps&lt;&#123;\n  modelValue: number;\n&#125;&gt;();\nconst test &#x3D; ref(0);\nfunction changeTest(val: number) &#123;\n  test.value &#x3D; val;\n&#125;\n\n&#x2F;&#x2F; const emits &#x3D; defineEmits([&quot;changeVal&quot;]);\n&lt;&#x2F;script&gt;\n\n&lt;style lang&#x3D;&quot;scss&quot; scoped&gt;\n.child &#123;\n  position: relative;\n&#125;\n&lt;&#x2F;style&gt;","slug":"Vue3 + ts ä½¿ç”¨æ€»ç»“","date":"2023-02-22T16:24:19.000Z","categories_index":"","tags_index":"","author_index":"Beastrong"},{"id":"c15a6a9dda465b3a99cae28e33ecb722","title":"vue2 ä¸ vue3 çš„åŒºåˆ«","content":"vue2 ä¸ vue3 çš„åŒºåˆ«Vue å†…éƒ¨æ ¹æ®åŠŸèƒ½å¯ä»¥è¢«åˆ†ä¸ºä¸‰ä¸ªå¤§çš„æ¨¡å—ï¼š**å“åº”æ€§ reactiviteã€è¿è¡Œæ—¶ runtimeã€ç¼–è¾‘å™¨ compiler**ï¼Œä»¥åŠä¸€äº›å°çš„åŠŸèƒ½ç‚¹ã€‚é‚£ä¹ˆè¦è¯´ vue2 ä¸ vue3 çš„åŒºåˆ«ï¼Œæˆ‘ä»¬éœ€è¦ä»è¿™ä¸‰ä¸ªæ–¹é¢åŠ å°çš„åŠŸèƒ½ç‚¹è¿›è¡Œè¯´èµ·ã€‚\né¦–å…ˆå…ˆæ¥è¯´ **å“åº”æ€§ reactivite**ï¼š\nvue2 çš„å“åº”æ€§ä¸»è¦ä¾èµ– Object.defineProperty è¿›è¡Œå®ç°ï¼Œä½†æ˜¯ Object.defineProperty åªèƒ½ç›‘å¬ æŒ‡å®šå¯¹è±¡çš„æŒ‡å®šå±æ€§çš„ getter è¡Œä¸ºå’Œ setter è¡Œä¸ºï¼Œé‚£ä¹ˆè¿™æ ·åœ¨æŸäº›æƒ…å†µä¸‹å°±ä¼šå‡ºç°é—®é¢˜ã€‚\nä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿ\næ¯”å¦‚è¯´ï¼šæˆ‘ä»¬åœ¨ data ä¸­å£°æ˜äº†ä¸€ä¸ªå¯¹è±¡ person ï¼Œä½†æ˜¯åœ¨åæœŸä¸º person å¢åŠ äº†æ–°çš„å±æ€§ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–°çš„å±æ€§å°±ä¼šå¤±å»å“åº”æ€§ã€‚æƒ³è¦è§£å†³è¿™ä¸ªé—®é¢˜å…¶å®ä¹Ÿéå¸¸çš„ç®€å•ï¼Œå¯ä»¥é€šè¿‡ Vue.$set æ–¹æ³•æ¥å¢åŠ  æŒ‡å®šå¯¹è±¡æŒ‡å®šå±æ€§çš„å“åº”æ€§ã€‚ä½†æ˜¯è¿™æ ·çš„ä¸€ç§æ–¹å¼ï¼Œåœ¨ Vue çš„è‡ªåŠ¨å“åº”æ€§æœºåˆ¶ä¸­æ˜¯ä¸åˆç†ã€‚\næ‰€ä»¥åœ¨ Vue3 ä¸­ï¼ŒVue å¼•å…¥äº†åå°„å’Œä»£ç†çš„æ¦‚å¿µï¼Œæ‰€è°“åå°„æŒ‡çš„æ˜¯ Reflectï¼Œæ‰€è°“ä»£ç†æŒ‡çš„æ˜¯ Proxyã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ Proxy ç›´æ¥ä»£ç†ä¸€ä¸ªæ™®é€šå¯¹è±¡ï¼Œå¾—åˆ°ä¸€ä¸ª proxy å®ä¾‹ çš„ä»£ç†å¯¹è±¡ã€‚åœ¨ vue3 ä¸­ï¼Œè¿™ä¸ªè¿‡ç¨‹é€šè¿‡ reactive è¿™ä¸ªæ–¹æ³•è¿›è¡Œå®ç°ã€‚\nä½†æ˜¯ proxy åªèƒ½å®ç°ä»£ç†å¤æ‚æ•°æ®ç±»å‹ï¼Œæ‰€ä»¥ vue é¢å¤–æä¾›äº† ref æ–¹æ³•ï¼Œç”¨æ¥å¤„ç†ç®€å•æ•°æ®ç±»å‹çš„å“åº”æ€§ã€‚ref æœ¬è´¨ä¸Šå¹¶æ²¡æœ‰è¿›è¡Œæ•°æ®çš„ç›‘å¬ï¼Œè€Œæ˜¯æ„å»ºäº†ä¸€ä¸ª RefImpl çš„ç±»ï¼Œé€šè¿‡ set å’Œ get æ ‡è®°äº† value å‡½æ•°ï¼Œä»¥æ­¤æ¥è¿›è¡Œçš„å®ç°ã€‚æ‰€ä»¥ ref å¿…é¡»è¦é€šè¿‡ .value è¿›è¡Œè§¦å‘ï¼Œä¹‹æ‰€ä»¥è¦è¿™ä¹ˆåšæœ¬è´¨æ˜¯è°ƒç”¨ value æ–¹æ³•ã€‚\næ¥ä¸‹æ¥æ˜¯**è¿è¡Œæ—¶ runtime**ï¼š\næ‰€è°“çš„è¿è¡Œæ—¶ï¼Œå¤§å¤šæ•°æ—¶å€™æŒ‡çš„æ˜¯ renderer æ¸²æŸ“å™¨ï¼Œæ¸²æŸ“å™¨æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå†…éƒ¨ä¸»è¦ä¸‰ä¸ªæ–¹æ³• renderã€hydrateã€createApp ï¼Œå…¶ä¸­ render ä¸»è¦å¤„ç†æ¸²æŸ“é€»è¾‘ï¼Œhydrate ä¸»è¦å¤„ç†æœåŠ¡ç«¯æ¸²æŸ“é€»è¾‘ï¼Œè€Œ createApp å°±æ˜¯åˆ›å»º vue å®ä¾‹çš„æ–¹æ³•ã€‚\nè¿™é‡Œå’±ä»¬ä¸»è¦æ¥è¯´ render æ¸²æŸ“å‡½æ•°ï¼Œvue3 ä¸­ä¸ºäº†ä¿è¯å®¿ä¸»ç¯å¢ƒä¸æ¸²æŸ“é€»è¾‘çš„åˆ†ç¦»ï¼ŒæŠŠæ‰€æœ‰ä¸å®¿ä¸»ç¯å¢ƒç›¸å…³çš„é€»è¾‘è¿›è¡Œäº†æŠ½ç¦»ï¼Œé€šè¿‡æ¥å£çš„å½¢å¼è¿›è¡Œä¼ é€’ã€‚è¿™æ ·åšçš„ç›®çš„å…¶å®æ˜¯ä¸ºäº†è§£ç»‘å®¿ä¸»ç¯å¢ƒä¸æ¸²æŸ“é€»è¾‘ï¼Œä»¥ä¿è¯ vue åœ¨éæµè§ˆå™¨ç«¯çš„å®¿ä¸»ç¯å¢ƒä¸‹å¯ä»¥æ­£å¸¸æ¸²æŸ“ã€‚\nå†å¾€ä¸‹æ˜¯ **ç¼–è¾‘å™¨ compiler**ï¼š\nvue ä¸­çš„ compiler å…¶å®æ˜¯ä¸€ä¸ª DSLï¼ˆç‰¹å®šé¢†åŸŸä¸‹ä¸“ç”¨è¯­è¨€ç¼–è¾‘å™¨ï¼‰ ï¼Œå…¶ç›®çš„æ˜¯ä¸ºäº†æŠŠ template æ¨¡æ¿ ç¼–è¯‘æˆ render å‡½æ•°ã€‚ é€»è¾‘ä¸»è¦æ˜¯åˆ†æˆäº†ä¸‰å¤§æ­¥ï¼š parseã€transform å’Œ generateã€‚å…¶ä¸­ parse çš„ä½œç”¨æ˜¯ä¸ºäº†æŠŠ template è½¬åŒ–ä¸º ASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰ï¼Œtransform å¯ä»¥æŠŠ ASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰ è½¬åŒ–ä¸º JavaScript ASTï¼Œæœ€åç”± generate æŠŠ JavaScript AST é€šè¿‡è½¬åŒ–ä¸º render å‡½æ•°ã€‚è½¬åŒ–çš„è¿‡ç¨‹ä¸­ä¼šæ¶‰åŠåˆ°ä¸€äº›ç¨å¾®å¤æ‚çš„æ¦‚å¿µï¼Œæ¯”å¦‚ æœ‰é™è‡ªåŠ¨çŠ¶æ€æœº è¿™ä¸ªå°±ä¸å†è¿™é‡Œå±•å¼€è¯´äº†ã€‚\né™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„å˜åŒ–ã€‚æ¯”å¦‚ vue3 æ–°å¢çš„ composition APIã€‚ composition API åœ¨ vue3.0 å’Œ vue3.2 ä¸­ä¼šæœ‰ä¸€äº›ä¸åŒçš„å‘ˆç°ï¼Œæ¯”å¦‚è¯´ï¼šæœ€åˆçš„ composition API ä»¥ setup å‡½æ•°ä½œä¸ºå…¥å£å‡½æ•°ï¼Œ setup å‡½æ•°å¿…é¡»è¿”å›ä¸¤ç§ç±»å‹çš„å€¼ï¼šç¬¬ä¸€æ˜¯å¯¹è±¡ï¼Œç¬¬äºŒæ˜¯å‡½æ•°ã€‚\nå½“ setup å‡½æ•°è¿”å›å¯¹è±¡æ—¶ï¼Œå¯¹è±¡ä¸­çš„æ•°æ®æˆ–æ–¹æ³•å¯ä»¥åœ¨ template ä¸­è¢«ä½¿ç”¨ã€‚å½“ setup å‡½æ•°è¿”å›å‡½æ•°æ—¶ï¼Œå‡½æ•°ä¼šè¢«ä½œä¸º render å‡½æ•°ã€‚\nä½†æ˜¯è¿™ç§ setup å‡½æ•°çš„å½¢å¼å¹¶ä¸å¥½ï¼Œå› ä¸ºæ‰€æœ‰çš„é€»è¾‘éƒ½é›†ä¸­åœ¨ setup å‡½æ•°ä¸­ï¼Œå¾ˆå®¹æ˜“å‡ºç°ä¸€ä¸ªå·¨å¤§çš„ setup å‡½æ•°ï¼Œæˆ‘ä»¬æŠŠå®ƒå«åšå·¨çŸ³ï¼ˆå±å±±ï¼‰å‡½æ•°ã€‚æ‰€ä»¥ vue 3.2 çš„æ—¶å€™ï¼Œæ–°å¢äº†ä¸€ä¸ª script setup çš„è¯­æ³•ç³–ï¼Œå°è¯•è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ç›®å‰æ¥çœ‹ script setup çš„å‘ˆç°è¿˜æ˜¯éå¸¸ä¸é”™çš„ã€‚\né™¤æ­¤ä¹‹å¤–è¿˜æœ‰ä¸€äº›å°çš„å˜åŒ–ï¼Œæ¯”å¦‚ Fragmentã€Teleportã€Suspense ç­‰ç­‰ï¼Œè¿™äº›å°±ä¸å»è¯´äº†â€¦\n","slug":"vue2 ä¸ vue3 çš„åŒºåˆ«","date":"2023-01-09T07:24:48.000Z","categories_index":"","tags_index":"","author_index":"Beastrong"},{"id":"18ec0d2dffa6580aa03409c2b752705b","title":"å‡ ç§é‡å¤è¯·æ±‚æ•°æ®çš„é—®é¢˜åŠè§£å†³æ–¹æ³•","content":"\næœ€è¿‘å°æ§åœ¨å®¶ï¼Œå›é¡¾é—®é¢˜è§£è§£é—·ã€‚ä»Šå¤©æ¥è®²è®²é‡å¤è¯·æ±‚çš„é—®é¢˜ã€‚\né—®é¢˜æ±‡æ€»\nè¡¨å•æäº¤æŒ‰é’®é‡å¤ç‚¹å‡»\næŸ¥è¯¢æŒ‰é’®é‡å¤ç‚¹å‡»\nå¯èƒ½å¤šä¸ªå› ç´ åŒæ—¶è§¦å‘æŸä¸ªè¯·æ±‚\né¡µé¢è‡ªåŠ¨åˆ·æ–°æ•°æ®ï¼ˆå¦‚ï¼šæ•°æ®å¤§å±ï¼‰\nåŒä¸€é¡µé¢å†…æœ‰å¤šä¸ªtabç”¨åŒä¸€ä¸ªtableï¼Œtab1ä¸‹çš„æ•°æ®é‡å¤§ï¼Œtab2ä¸‹çš„æ•°æ®é‡æå°ï¼Œtab1æ•°æ®æœªè·å–åˆ°çš„æ—¶å€™åˆ‡æ¢åˆ°tab2ï¼Œå¯èƒ½æ¸²æŸ“çš„æ˜¯tab1çš„æ•°æ®\n\nè§£å†³çš„æ˜¯ä»€ä¹ˆé—®é¢˜è§£å†³é‡å¤è¯·æ±‚çš„é—®é¢˜æœ¬è´¨ä¸Šæ˜¯è§£å†³è¿™ä¸‰ç±»é—®é¢˜ï¼š\n\nç”¨æˆ·ä½“éªŒ\né¡µé¢æ€§èƒ½\næ•°æ®æ­£ç¡®ä¸”å®‰å…¨ï¼Œå…³äºè¿™ä¸ªé—®é¢˜ï¼Œå‰ç«¯æ˜¯æ— æ³•å®Œå…¨æœç»çš„ï¼Œå¿…é¡»åç«¯è¿›è¡Œå…œåº•ï¼Œè¿™é‡Œä¸æ˜¯ä»Šå¤©çš„é‡ç‚¹ã€‚\n\nåˆ†ç±»åˆ†ææäº¤æŒ‰é’®é‡å¤ç‚¹å‡»è¿™æ˜¯æœ€å¸¸è§çš„é—®é¢˜ï¼Œé‡å¤æäº¤ä¼šé€ æˆå¤šæ¡æ•°æ®å…¥åº“ã€‚ç‚¹å‡»æäº¤ç»™ä¸ªloadingæç¤ºè¿‡æ¸¡ï¼ŒæœŸé—´æŒ‰é’®ä¸å¯å†æ¬¡è§¦å‘å°±å¯ä»¥ã€‚\næŸ¥è¯¢æŒ‰é’®é‡å¤ç‚¹å‡»å¦‚æœæŸ¥è¯¢æŒ‰é’®ç‚¹ä¸€ä¸‹å°±è®¾ç½®loadingï¼Œä½“éªŒå…¶å®å¹¶ä¸å¥½ï¼Œä½†æ˜¯ä¸€ç›´è¯·æ±‚ï¼Œæ•°æ®ä¸æ–­é‡æ–°æ¸²æŸ“ï¼Œåˆä¼šå½±å“æ€§èƒ½ã€‚ æˆ‘ç¬¬ä¸€ååº”æ˜¯ç”¨é˜²æŠ–ï¼Œå¦‚æœè¯¯è§¦åªè¯·æ±‚æœ€åä¸€æ¬¡å°±å¥½äº†ã€‚\n&#x2F;&#x2F; é˜²æŠ–\n&#x2F;&#x2F; fn: å›è°ƒå‡½æ•°\n&#x2F;&#x2F; delay: å»¶æ—¶æ—¶é—´\nexport const debounce &#x3D; (fn, delay &#x3D; 1000) &#x3D;&gt; &#123;\n  let timer &#x3D; null;\n  return function() &#123;\n    if (timer !&#x3D;&#x3D; null) &#123;\n      clearTimeout(timer);\n    &#125;\n    timer &#x3D; setTimeout(() &#x3D;&gt; &#123;\n      fn.apply(this, arguments);\n    &#125;, 1000);\n  &#125;;\n&#125;;\nå¤åˆ¶ä»£ç \n\nç›´åˆ°æˆ‘ç–¯ç‹‚ç‚¹å‡»æœç´¢å¼•æ“çš„æœç´¢æŒ‰é’®ï¼Œæˆ‘å‘ç°äººå®¶ç”¨çš„ä¸æ˜¯é˜²æŠ–ï¼Œæˆ‘é™·å…¥æ²‰æ€ï¼Œå¦‚æœæˆ‘çš„ç”¨æˆ·åƒæˆ‘ä¸€æ ·ï¼Œé‚£é˜²æŠ–å°±ä¼šè®©ä»–æ— æ³•å¿«é€Ÿçœ‹åˆ°æ•°æ®ï¼Œæ‰€ä»¥æˆ‘åˆè§‰å¾—åº”è¯¥ç”¨èŠ‚æµã€‚\n&#x2F;&#x2F; èŠ‚æµ\nexport const throttle &#x3D; (fn, delay &#x3D; 1000) &#x3D;&gt; &#123;\n  let old &#x3D; 0;\n  return function() &#123;\n    let now &#x3D; new Date().valueOf();\n    if (now - old &gt; delay) &#123;\n      fn.apply(this, arguments);\n      old &#x3D; now;\n    &#125;\n  &#125;;\n&#125;;\n\nå¤åˆ¶ä»£ç \n\naxioså–æ¶ˆé‡å¤è¯·æ±‚å½“å¤šä¸ªå› ç´ ç¬æ—¶ä¸€èµ·è§¦å‘æŸä¸ªè¯·æ±‚ï¼Œä½ ä¼šå¸Œæœ›åªå¤„ç†æœ€åä¸€æ¬¡è¯·æ±‚ï¼Œé‚£ä¹ˆå¯ä»¥ä»axioså…¥æ‰‹ï¼Œcancelæ‰å¤šä½™çš„è¯·æ±‚\n&#x2F;&#x2F; axios.js\n\nâ€¦â€¦\n\nconst CANCEL_RETRANSMIT &#x3D; []; &#x2F;&#x2F; è¿™é‡Œå­˜å‚¨éœ€è¦å¤„ç†é‡å¤è¯·æ±‚çš„url\nlet s &#x3D; 1; &#x2F;&#x2F; å•ä½ç§’\nlet pending &#x3D; []; &#x2F;&#x2F; å£°æ˜ä¸€ä¸ªæ•°ç»„ç”¨äºå­˜å‚¨æ¯ä¸ªè¯·æ±‚çš„å–æ¶ˆå‡½æ•°å’Œaxiosæ ‡è¯†\nlet cancelToken &#x3D; Axios.CancelToken;\nlet removePending &#x3D; config &#x3D;&gt; &#123;\n  pending &#x3D; pending.filter(i &#x3D;&gt; new Date().getTime() - i.t &lt; s * 1000); &#x2F;&#x2F; ä¿ç•™sç§’å†…å‘çš„è¯·æ±‚\n  if (\n    pending.length &gt; 1 &amp;&amp;\n    pending[pending.length - 2].u &#x3D;&#x3D;&#x3D; config.url &amp;&amp;\n    pending[pending.length - 1].t - pending[pending.length - 2].t &lt; s * 1000\n  ) &#123;\n    pending[pending.length - 2].f(); &#x2F;&#x2F;æ‰§è¡Œå–æ¶ˆæ“ä½œ\n    pending.splice(pending.length - 2, 1);\n  &#125;\n&#125;;\n\nâ€¦â€¦\n\n&#x2F;&#x2F; è¯·æ±‚æ‹¦æˆªå™¨å†…\naxios.interceptors.request.use(\n  async config &#x3D;&gt; &#123;\n    â€¦â€¦\n    const url &#x3D; config.url || &#39;&#39;;\n    &#x2F;&#x2F; åˆ é™¤é‡å¤è¯·æ±‚\n    if (CANCEL_RETRANSMIT.includes(config.url)) &#123;\n      config.cancelToken &#x3D; new cancelToken(c &#x3D;&gt; &#123;\n        &#x2F;&#x2F; ç”¨è¯·æ±‚åœ°å€&amp;è¯·æ±‚å‚æ•°æ‹¼æ¥çš„å­—ç¬¦ä¸²\n        pending.push(&#123;\n          u: url,\n          t: new Date().getTime(),\n          f: c,\n        &#125;);\n      &#125;);\n      await removePending(config);\n    &#125;\n\n    return config;\n  &#125;,\n  â€¦â€¦\n);\n\nå¤åˆ¶ä»£ç \n\nè¿™ç§æ–¹å¼åªæ˜¯è®©å‰ç«¯å‡å°‘å¤„ç†é‡å¤è¯·æ±‚ï¼Œä½†æ˜¯åç«¯ä¾ç„¶ä¼šæ”¶åˆ°å¤šä¸ªè¯·æ±‚ã€‚\né¡µé¢è‡ªåŠ¨åˆ·æ–°æ•°æ®æœ‰äº›é¡µé¢éœ€è¦å®šæ—¶è‡ªåŠ¨é‡å¤è¯·æ±‚æ•°æ®æ›´æ–°é¡µé¢ï¼Œæ¯”å¦‚ï¼šæ•°æ®å¤§å±ã€å¸¦çŠ¶æ€ä¿¡æ¯çš„æ•°æ®è¡¨æ ¼ã€‚ å¤§å¤šæ•°å‰ç«¯ä»”çœ‹åˆ°å®šæ—¶ä»»åŠ¡ç¬¬ä¸€ååº”å°±æ˜¯setIntervalã€‚\nsetInterval(function()&#123;\nÂ Â Â Â &#x2F;&#x2F;è¦æ‰§è¡Œçš„ä»£ç Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â \n&#125;,200);\n\nå¤åˆ¶ä»£ç \n\næˆ‘ä»¬å…ˆå¤ä¹ ä¸€ä¸‹setIntervalçš„ç‰¹ç‚¹ï¼š\n\nä¼šé˜»å¡\næ— è®ºé¡µé¢æ˜¾ç¤ºéšè—ï¼Œéƒ½ä¼šæ‰§è¡Œ\né€€å‡ºéœ€è¦æ¸…é™¤å®šæ—¶å™¨\né—´éš”æ—¶é—´å¯ä»¥ä»»æ„å®šä¹‰\næµè§ˆå™¨å…¼å®¹æ€§æå¥½\n\né‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ç§ä¸œè¥¿èƒ½è§£å†³setIntervalçš„ç¼ºç‚¹ï¼Ÿè¿™ä¸ªå°±æ˜¯requestAnimationFrameï¼Œç®€ç§°rAFã€‚ rAFçš„ç‰¹ç‚¹ï¼š\n\næŒ‰æµè§ˆå™¨å¸§æ‰§è¡Œï¼Œä½é˜»å¡ã€‚å¦‚æœæ˜¯åŠ¨ç”»åˆ™æµç•…åº¦ä¼šæ›´é«˜ã€‚\nä»…å½“é¡µé¢æ˜¾ç¤ºæ—¶ä¼šæ‰§è¡Œï¼Œé¡µé¢åœ¨åå°ä¸æ‰§è¡Œï¼Œè¿™æ ·å¯ä»¥å‡å°CPUå ç”¨\né€€å‡ºéœ€è¦æ¸…é™¤å®šæ—¶å™¨\né—´éš”æ—¶é—´æ˜¯æ¯ä¸€å¸§çš„é—´éš”æ—¶é—´ï¼Œå¯ä»¥å°è£…æ–¹æ³•ä»»æ„å®šä¹‰\næµè§ˆå™¨å…¼å®¹æ¯”setIntervalå·®ç‚¹ç”¨rAFå°è£…å‡ºæ¥çš„å®šæ—¶å™¨å¦‚ä¸‹\n\nexport const rafInterval &#x3D; (fn, delay &#x3D; 3000) &#x3D;&gt; &#123;\n  let start &#x3D; 0;\n  function fun() &#123;\n    const timestamp &#x3D; new Date().valueOf();\n    if (start &#x3D;&#x3D;&#x3D; undefined) start &#x3D; timestamp;\n    if (timestamp - start &gt; delay) &#123;\n      start &#x3D; timestamp;\n      fn.apply(this, arguments);\n    &#125;\n    requestAnimationFrame(fun);\n  &#125;\n  return function() &#123;\n    requestAnimationFrame(fun);\n  &#125;;\n&#125;;\n\nå¤åˆ¶ä»£ç \n\nå‰é¢æè¿‡requestAnimationFrameå…¼å®¹æ€§ä¸å¤Ÿå¥½ï¼Œé‚£ä¹ˆå°±åŠ ä¸ªåˆ¤æ–­\nvar requestAnimFrame &#x3D; (function() &#123;\n  return (\n    window.requestAnimationFrame ||\n    window.webkitRequestAnimationFrame ||\n    window.mozRequestAnimationFrame ||\n    function(callback) &#123;\n      window.setTimeout(callback, 1000 &#x2F; 60);\n    &#125;\n  );\n&#125;)();\n\nexport const rafInterval &#x3D; (fn, delay &#x3D; 3000) &#x3D;&gt; &#123;\n    â€¦â€¦\n&#125;;\nå¤åˆ¶ä»£ç \n\nåŒé¡µé¢æ ¹æ®æ¡ä»¶å±•ç¤ºä¸åŒè¡¨æ ¼æ•°æ®å®é™…åœºæ™¯ï¼šåŒä¸€é¡µé¢å†…æœ‰å¤šä¸ªtabç”¨åŒä¸€ä¸ªtableç»„ä»¶ï¼Œtab1ä¸‹çš„æ•°æ®é‡å¤§ï¼Œtab2ä¸‹çš„æ•°æ®é‡æå°ï¼Œtab1æ•°æ®æœªè·å–åˆ°çš„æ—¶å€™åˆ‡æ¢åˆ°tab2ï¼Œå¯èƒ½tab1çš„æ•°æ®æ¯”tab2è¿˜æ™šè¿”å›ï¼Œtableæ¸²æŸ“çš„å°±ä¼šæ˜¯tab1çš„æ•°æ®\nè§£å†³æ€è·¯ï¼š\n\nå¦‚æœæ˜¯åŒä¸€ä¸ªurlå‘å‡ºçš„è¯·æ±‚ï¼Œç”¨axiosçš„cancelæ–¹æ³•ï¼ŒæŠŠå­˜åœ¨çš„pendingçŠ¶æ€çš„è¯·æ±‚cancel\nå¦‚æœæ˜¯ä¸åŒurlå‘å‡ºçš„è¯·æ±‚ï¼Œä¼ ä¸ªæ ‡è®°ç»™åç«¯ï¼Œåç«¯è¿”å›æ•°æ®å¸¦ç»™å‰ç«¯\n\n","slug":"å‡ ç§é‡å¤è¯·æ±‚æ•°æ®çš„é—®é¢˜åŠè§£å†³æ–¹æ³•","date":"2022-11-20T08:41:18.000Z","categories_index":"","tags_index":"","author_index":"Beastrong"},{"id":"de3904e4fffd4a0033c6fe3d6902ae56","title":"webpack5ä¸‰ç§modeé»˜è®¤é…ç½®å¯¹æ¯”","content":"è™½ç„¶webpackçš„æ–‡æ¡£ä¸­å·²ç»ç»™å‡ºäº†ä¸‰ç§æ¨¡å¼é»˜è®¤çš„é…ç½®é¡¹çš„é…ç½®ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯å¥½å¥‡é™¤äº†è¿™äº›åˆ—å‡ºçš„é…ç½®ï¼Œæ˜¯å¦è¿˜æœ‰å…¶ä»–çš„é…ç½®ä¹‹é—´çš„å·®å¼‚å‘¢ï¼Ÿ\nå¯¼å‡ºä¸‰ç§æ¨¡å¼çš„é…ç½®å¯¹è±¡webpackçš„ç‰ˆæœ¬æ˜¯V5.36.1ï¼Œè·å–é»˜è®¤é…ç½®çš„æºç è·¯å¾„ä¸ºwebpack/lib/WebpackOptionsDefaulter.js ï¼Œè¯¥æ–‡ä»¶æºç å¦‚ä¸‹ï¼š\nconst &#123; applyWebpackOptionsDefaults &#125; &#x3D; require(&quot;.&#x2F;config&#x2F;defaults&quot;);\nconst &#123; getNormalizedWebpackOptions &#125; &#x3D; require(&quot;.&#x2F;config&#x2F;normalization&quot;);\n\nclass WebpackOptionsDefaulter &#123;\n\tprocess(options) &#123;\n\t\toptions &#x3D; getNormalizedWebpackOptions(options);\n\t\tapplyWebpackOptionsDefaults(options);\n\t\treturn options;\n\t&#125;\n&#125;\n\nmodule.exports &#x3D; WebpackOptionsDefaulter;\nå¤åˆ¶ä»£ç \n\næˆ‘ä»¬çš„ç›®çš„æ˜¯è·å–æ¯ä¸ªæ¨¡å¼çš„optionsï¼Œæ‰€ä»¥æš‚ä¸”ä¸éœ€è¦ç®¡è¿™é‡Œå¼•å…¥çš„ä¸¤ä¸ªæ¨¡å—çš„å…·ä½“ä»£ç ï¼Œé€šè¿‡è¿™æ®µä»£ç å¾—çŸ¥ï¼Œåªéœ€è¦é€šè¿‡WebpackOptionsDefaulter çš„å®ä¾‹æ–¹æ³•processï¼Œå³å¯è·å–æ¯ç§æ¨¡å¼çš„å…·ä½“é…ç½®ï¼Œè·å–é»˜è®¤é…ç½®ä»£ç å¦‚ä¸‹ï¼š\n&#x2F;&#x2F; getWebpackConfig.js\nconst fs &#x3D; require(&#39;fs&#39;);\nconst &#123;stringify&#125; &#x3D; require(&#39;javascript-stringify&#39;);\nconst WebpackDefaulterClass &#x3D; require(&#39;webpack&#x2F;lib&#x2F;WebpackOptionsDefaulter&#39;);\nconst webpackDefaulter &#x3D; new WebpackDefaulterClass();\n\n[&#39;none&#39;,&#39;development&#39;,&#39;production&#39;].forEach(mode &#x3D;&gt; generateOptions(mode));\n\nfunction generateOptions(mode) &#123;\n  const options &#x3D; webpackDefaulter.process(&#123;mode&#125;);\n  fs.writeFileSync(&#96;.&#x2F;webpack.$&#123;mode&#125;.config.js&#96;, &#39;module.exports &#x3D; &#39; + stringify(options));\n&#125;\nå¤åˆ¶ä»£ç \n\nåœ¨å‘½ä»¤è¡Œæ‰§è¡Œnode getWebpackConfig ä¹‹åï¼Œå°±æŠŠç›¸å¯¹åº”çš„é…ç½®è¾“å‡ºåˆ°å¯¹åº”çš„æ–‡ä»¶ä¸­ï¼Œå†å¯¹æ–‡ä»¶è¿›è¡Œä»£ç æ ¼å¼åŒ–ï¼Œå‡†å¤‡å·¥ä½œå°±å¥½äº†ã€‚\nä¸‰ç§æ¨¡å¼çš„é…ç½®å·®å¼‚1ã€cache\nproductionæ¨¡å¼ä¸ºfalse\n\ndevelopmentæ¨¡å¼ä¸º\n&#123;\n  cache: &#123;\n    type: &#39;memory&#39;,\n    maxGenerations: Infinity\n  &#125;\n&#125;\nå¤åˆ¶ä»£ç \n\nnoneæ¨¡å¼ä¸ºfalse\n\n\ncacheé…ç½®çš„ä½œç”¨æ˜¯æ¢æˆå·²ç»å¤„ç†è¿‡çš„moduleå’Œchunkï¼Œä»¥è¾¾åˆ°åŠ é€Ÿæ„å»ºçš„ç›®çš„ã€‚productionæ¨¡å¼ä¸€èˆ¬ä¸ºå…¨æ–°æ„å»ºæ‰“åŒ…ï¼Œæ‰€ä»¥é»˜è®¤ä¸ºä¸ä½¿ç”¨ç¼“å­˜ï¼Œä½†æ˜¯åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæ„å»ºé€Ÿåº¦ç›´æ¥å½±å“åˆ°å¼€å‘æ•ˆç‡ï¼Œæ‰€ä»¥developmentæ¨¡å¼ä¸‹ï¼Œwebpackä¼šä½¿ç”¨ç¼“å­˜ã€‚\ntypeæ”¯æŒé…ç½®ä¸ºfilesystemå’Œmemoryï¼Œå³æ–‡ä»¶ç³»ç»Ÿå’Œå†…å­˜ç¼“å­˜ï¼Œå¼€å‘æ¨¡å¼ä¸‹è¿½æ±‚å¿«é€Ÿï¼Œæ‰€ä»¥é…ç½®ä¸ºmemoryã€‚\nmaxGenerationsæ˜¯5.30.0+ç‰ˆæœ¬æ‰æœ‰çš„é…ç½®ï¼Œè¯¥é…ç½®è®¾ç½®æ²¡æœ‰è¢«ä½¿ç”¨çš„å†…å­˜ç¼“å­˜çš„å¯¿å‘½ï¼Œé…ç½®å€¼ç±»å‹ä¸ºnumberï¼Œè®¾ç½®ä¸ºInfinityè¡¨ç¤ºä¸€ç›´ä¿ç•™ã€‚\n2ã€devtool\nproductionæ¨¡å¼ä¸ºfalse\n\nnoneæ¨¡å¼ä¸ºfalse\n\ndevelopmentä¸­çš„é…ç½®ä¸ºï¼š\n&#123;\n  devtool: &#39;eval&#39;\n&#125;\nå¤åˆ¶ä»£ç \n\nè¯¥é…ç½®æŒ‡å®šsource mapçš„æ ¼å¼ï¼Œfalseåˆ™ä¸ç”Ÿæˆsource mapï¼Œdevelopmentæ¨¡å¼é»˜è®¤ä½¿ç”¨evalæ ¼å¼ï¼Œevalæ ¼å¼çš„ç‰¹ç‚¹æ¯ä¸ªæ¨¡å—éƒ½ä½¿ç”¨ eval() æ‰§è¡Œï¼Œå¹¶ä¸”éƒ½æœ‰ //@ sourceURLã€‚æ­¤é€‰é¡¹ä¼šéå¸¸å¿«åœ°æ„å»ºã€‚ä¸»è¦ç¼ºç‚¹æ˜¯ï¼Œç”±äºä¼šæ˜ å°„åˆ°è½¬æ¢åçš„ä»£ç ï¼Œè€Œä¸æ˜¯æ˜ å°„åˆ°åŸå§‹ä»£ç ï¼ˆæ²¡æœ‰ä» loader ä¸­è·å– source mapï¼‰ï¼Œæ‰€ä»¥ä¸èƒ½æ­£ç¡®çš„æ˜¾ç¤ºè¡Œæ•°ã€‚\nå¦‚æœæ„å»ºé€Ÿåº¦è¦æ±‚æ²¡é‚£ä¹ˆé«˜æ—¶ï¼Œå¯ä»¥ä½¿ç”¨eval-cheap-module-source-mapæ›¿ä»£evalï¼Œeval-cheap-module-source-mapä¼šç‰ºç‰²ä¸€å®šçš„æ„å»ºé€Ÿåº¦ï¼Œä½†æ˜¯å¯ä»¥æä¾›åŸå§‹ä»£ç è¡Œæ•°çš„æ˜ å°„ã€‚\n3ã€module.unsafeCache\nproductionæ¨¡å¼ä¸ºfalse\n\nnoneæ¨¡å¼ä¸ºfalse\n\ndevelopmentçš„é…ç½®ä¸ºï¼š\n&#x2F;&#x2F; const NODE_MODULES_REGEXP &#x3D; &#x2F;[\\&#x2F;]node_modules[\\&#x2F;]&#x2F;i;\n&#123;\n  unsafeCache: module &#x3D;&gt; &#123;\n    const name &#x3D; module.nameForCondition();\n    return name &amp;&amp; NODE_MODULES_REGEXP.test(name);\n  &#125;,\n&#125;\nå¤åˆ¶ä»£ç \n\nè¯¥é…ç½®è¡¨ç¤ºæ˜¯å¦ç¼“å­˜æ¨¡å—è¯·æ±‚çš„è§£æï¼Œdevelopmentçš„unsafeCacheé…ç½®è¡¨ç¤ºï¼Œå¦‚æœé€šè¿‡æ¨¡å—çš„nameForConditionæ–¹æ³•å¾—åˆ°çš„æ¨¡å—è·¯å¾„å­˜åœ¨ï¼Œä¸”æ˜¯node_modulesä¸­çš„æ¨¡å—ï¼Œåˆ™ç¼“å­˜ã€‚\n4ã€optimization.splitChunks.hidePathInfoè¯¥é…ç½®è¡¨ç¤ºç”±äºoptimization.splitChunks.maxSizeé…ç½®è€Œåˆ›å»ºçš„æå–çš„æ–‡ä»¶åç§°éšè—è·¯å¾„ä¿¡æ¯ï¼Œè¡¨ç°ä¸ºæ´¾ç”Ÿåç§°æ˜¯æ¨¡å—åç§°è¿˜æ˜¯å“ˆå¸Œå€¼ã€‚\n\nproductionæ¨¡å¼ä¸ºtrue\ndevelopmentæ¨¡å¼ä¸ºfalse\nnoneæ¨¡å¼ä¸ºfalse\n\nå½“ chunk å·²ç»æœ‰ä¸€ä¸ªåç§°æ—¶ï¼Œæ¯ä¸ªéƒ¨åˆ†å°†è·å¾—ä¸€ä¸ªä»è¯¥åç§°æ´¾ç”Ÿçš„æ–°åç§°ã€‚ æ ¹æ® optimization.splitChunks.hidePathInfo çš„å€¼ï¼Œå®ƒå°†æ·»åŠ ä¸€ä¸ªä»ç¬¬ä¸€ä¸ªæ¨¡å—åç§°æˆ–å…¶å“ˆå¸Œå€¼æ´¾ç”Ÿçš„å¯†é’¥ã€‚\n5ã€optimization.splitChunks.minRemainingSize\nproductionæ¨¡å¼ä¸ºundefinedï¼ˆæ­¤æ—¶ä½¿ç”¨çš„æ˜¯splitChunks.minSizeçš„å€¼ï¼‰\ndevelopmentæ¨¡å¼ä¸º0\nnoneæ¨¡å¼ä¸ºundefinedï¼ˆæ­¤æ—¶ä½¿ç”¨çš„æ˜¯splitChunks.minSizeçš„å€¼ï¼‰\n\nwebpack 5ä¸­å¼•å…¥äº†splitChunks.minRemainingSizeé€‰é¡¹ï¼Œé€šè¿‡ç¡®ä¿æ‹†åˆ†åå‰©ä½™çš„æœ€å°å—å¤§å°å¤§äºé™åˆ¶æ¥é¿å…å¤§å°ä¸ºé›¶çš„æ¨¡å—ã€‚å¼€å‘æ¨¡å¼ä¸‹é»˜è®¤ä¸º0ã€‚åœ¨å…¶ä»–æƒ…å†µä¸‹ï¼ŒsplitChunks.minRemainingSizeçš„é»˜è®¤å€¼ä¸ºsplitChunks.minSizeçš„å€¼ï¼Œå› æ­¤é™¤æå°‘æ•°éœ€è¦è¿‡åº¦å¹²é¢„çš„æƒ…å†µå¤–ï¼Œæ— éœ€æ‰‹åŠ¨æŒ‡å®šå®ƒã€‚\n6ã€optimization.splitChunks.enforceSizeThreshold\nproductionæ¨¡å¼ä¸º5000\ndevelopmentæ¨¡å¼ä¸º3000\nnoneæ¨¡å¼ä¸º3000\n\n7ã€optimization.emitOnErrors\nprodutionæ¨¡å¼ä¸ºfalse\ndevelopmentæ¨¡å¼ä¸ºtrue\nnoneæ¨¡å¼ä¸ºtrue\n\nè¯¥é…ç½®è¡¨ç¤ºåœ¨ç¼–è¯‘çš„è¿‡ç¨‹ä¸­é‡åˆ°é”™è¯¯æ—¶ï¼Œæ˜¯å¦ä¾ç„¶ç”Ÿæˆèµ„æºï¼Œæ‰€ä»¥å½“ç”Ÿäº§æ„å»ºè¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ä¼šç»ˆæ­¢ç¼–è¯‘ï¼Œè€Œå¼€å‘æ—¶ä¸ä¼šç»ˆæ­¢ï¼Œä½†æ˜¯ä¼šåœ¨ä»£ç è¿è¡Œæ—¶å‡ºç°æŠ¥é”™ã€‚\n8ã€optimization.flagIncludedChunks\nprodutionæ¨¡å¼ä¸ºtrue\ndevelopmentæ¨¡å¼ä¸ºfalse\nnoneæ¨¡å¼ä¸ºfalse\n\nè®¾ç½®ä¸ºtrueæ—¶ï¼Œwebpackæ ‡è®°ä½œä¸ºå…¶ä»–chunkå­é›†çš„chunkï¼Œåœ¨å·²ç»åŠ è½½è¿‡è¾ƒå¤§çš„chunkæ—¶ä¸å¿…åŠ è½½å­é›†chunkã€‚\n9ã€optimization.moduleIdså’Œoptimization.chunkIdsä¸¤ä¸ªé…ç½®åˆ†åˆ«ä¸ºæ¨¡å—idå’Œchunk idé€‰æ‹©æŸç§åç§°ç®—æ³•ï¼Œè¿™ä¸ªé…ç½®ä¸‰ç§æ¨¡å¼éƒ½ä¸ç›¸åŒã€‚\n\nproductionæ¨¡å¼ä¸‹éƒ½ä¸ºdeterministicï¼Œæ¨¡å—åç§°è¢«æ•£åˆ—ä¸ºè¾ƒå°çš„æ•°å€¼ã€‚\ndevelopmentæ¨¡å¼ä¸‹éƒ½ä¸ºnamedï¼Œæ¨¡å—åç§°å¯è¯»æ€§å¼ºï¼Œæ–¹ä¾¿è°ƒè¯•ã€‚\nnoneæ¨¡å¼ä¸‹éƒ½ä¸ºnaturalï¼Œæ¨¡å—åç§°æ˜¯æŒ‰ä½¿ç”¨é¡ºåºçš„æ•°å­—IDã€‚\n\n10ã€optimization.sideEffects\nproductionæ¨¡å¼ä¸ºtrue\ndevelopmentæ¨¡å¼ä¸ºflag\nnoneæ¨¡å¼ä¸ºflag\n\nå‘ŠçŸ¥ webpack å»è¾¨è¯† package.json ä¸­çš„ å‰¯ä½œç”¨ æ ‡è®°æˆ–è§„åˆ™ï¼Œä»¥è·³è¿‡é‚£äº›å½“å¯¼å‡ºä¸è¢«ä½¿ç”¨ä¸”è¢«æ ‡è®°ä¸åŒ…å«å‰¯ä½œç”¨çš„æ¨¡å—ã€‚\n11ã€optimization.usedExports\nproductionæ¨¡å¼ä¸ºtrue\ndevelopmentæ¨¡å¼ä¸ºfalse\nnoneæ¨¡å¼ä¸ºfalse\n\nå®ƒå‘Šè¯‰Webpackå»å†³å®šæ¯ä¸€ä¸ªæ¨¡å—æ‰€ç”¨åˆ°çš„å¯¼å‡ºã€‚æœ‰äº†å®ƒï¼ŒWebpackä¼šåœ¨æ‰“åŒ…äº§å‡ºé‡Œæ·»åŠ é¢å¤–çš„åƒæ˜¯&#x2F;* unused harmony export *&#x2F;ä¹‹ç±»çš„æ³¨é‡Šï¼Œåœ¨åç»­çš„å‹ç¼©æ­¥éª¤ä¸­å¯ç”¨åˆ°ã€‚\n12ã€optimization.innerGraphå‘ŠçŸ¥ webpack æ˜¯å¦å¯¹æœªä½¿ç”¨çš„å¯¼å‡ºå†…å®¹ï¼Œå®æ–½å†…éƒ¨å›¾å½¢åˆ†æã€‚\n\nproductionæ¨¡å¼ä¸ºtrue\ndevelopmentæ¨¡å¼ä¸ºfalse\nnoneæ¨¡å¼ä¸ºfalse\n\n13ã€optimization.mangleExportsè¯¥é…ç½®ä¸ºæ˜¯å¦å…è®¸æ§åˆ¶å¯¼å‡ºå¤„ç†ã€‚\n\nproductionæ¨¡å¼ä¸ºtrueï¼Œç­‰ä»·äºdeterministicï¼Œç®€å†™å½¢å¼ - é€šå¸¸ä¸¤ä¸ªå­—ç¬¦ â€” åœ¨æ·»åŠ æˆ–ç§»é™¤ export æ—¶ä¸ä¼šæ”¹å˜ã€‚é€‚ç”¨äºé•¿æ•ˆç¼“å­˜ã€‚\ndevelopmentæ¨¡å¼ä¸ºfalseï¼Œä¿ç•™åŸåï¼Œæœ‰åˆ©äºé˜…è¯»å’Œè°ƒè¯•ã€‚\nnoneæ¨¡å¼ä¸ºfalseï¼Œä¿ç•™åŸåï¼Œæœ‰åˆ©äºé˜…è¯»å’Œè°ƒè¯•ã€‚\n\n14ã€optimization.concatenateModulesè¯¥é…ç½®å‘ŠçŸ¥webpackæ˜¯å¦æ ¹æ®æ¨¡å—å›¾å°†æ¨¡å—å®‰å…¨åœ°åˆå¹¶ä¸ºä¸€ä¸ªæ¨¡å—ã€‚\n\nproductionæ¨¡å¼ä¸ºtrue\ndevelopmentæ¨¡å¼ä¸ºfalse\nnoneæ¨¡å¼ä¸ºfalse\n\n15ã€optimization.realContentHashèµ„æºç”Ÿæˆå¹¶ç”Ÿæˆæ­£ç¡®çš„èµ„æºå†…å®¹hashåï¼Œå†æ·»åŠ ä¸€ä¸ªé¢å¤–çš„hashã€‚\n\nproductionæ¨¡å¼ä¸ºtrue\ndevelopmentæ¨¡å¼ä¸ºfalse\nnoneæ¨¡å¼ä¸ºfalse\n\n16ã€optimization.minimizeå‘Šè¯‰ webpackä½¿ç”¨ TerserPlugin æˆ–è€…åœ¨ optimization.minimizeré€‰é¡¹ä¸­é…ç½®çš„æ’ä»¶å‹ç¼©bundleã€‚\n\nproductionæ¨¡å¼ä¸‹ä¸ºtrue\ndevelopmentæ¨¡å¼ä¸ºfalse\nnoneæ¨¡å¼ä¸ºfalse\n\nä¸‰ç§æ¨¡å¼ä¸‹çš„optimization.minimizeré…ç½®éƒ½æ˜¯ä¸€æ ·çš„ï¼š\nminimizer: [&#123;\n  apply: compiler &#x3D;&gt; &#123;\n    &#x2F;&#x2F; Lazy load the Terser plugin\n    const TerserPlugin &#x3D; require(&quot;terser-webpack-plugin&quot;);\n    new TerserPlugin(&#123;\n      terserOptions: &#123;\n        compress: &#123;\n          passes: 2\n        &#125;\n      &#125;\n    &#125;).apply(compiler);\n  &#125;\n&#125;],\nå¤åˆ¶ä»£ç \n\n17ã€optimization.nodeEnvè¯¥é…ç½®ä¼šå°†å€¼èµ‹å€¼ç»™process.env.NODE_ENVï¼Œå¦‚æœæ˜¯falseï¼Œåˆ™ä¸èµ‹å€¼ã€‚\n\nproductionæ¨¡å¼ä¸ºproduction\ndevelopmentæ¨¡å¼ä¸ºdevelopment\nnoneæ¨¡å¼ä¸ºfalse\n\n18ã€performanceé€šè¿‡è¯¥é…ç½®å¯ä»¥è®¾ç½®å½“æ„å»ºèµ„æºè¶…å‡ºé™åˆ¶æ—¶å¦‚ä½•æç¤ºã€‚\n\nproductionæ¨¡å¼é…ç½®ä¸ºï¼š\nperformance: &#123;\n  maxAssetSize: 250000, &#x2F;&#x2F; æœ€å¤§èµ„æºå¤§å°250KB\n  maxEntrypointSize: 250000, &#x2F;&#x2F; æœ€å¤§å…¥å£èµ„æºå¤§å°250KB\n  hints: &#39;warning&#39; &#x2F;&#x2F; è¶…å‡ºé™åˆ¶æ—¶åªç»™å‡ºè­¦å‘Š\n&#125;,\nå¤åˆ¶ä»£ç \n\ndevelopmentæ¨¡å¼ä¸ºfalse\n\nnoneæ¨¡å¼ä¸ºfalse\n\n\nä¸‰ç§æ¨¡å¼ç›®æ ‡ä»ä»¥ä¸Šåˆ†æçš„å·®å¼‚å¯ä»¥å†æ¬¡éªŒè¯ä¸‰ç§æ¨¡å¼çš„ç›®æ ‡çš„å·®å¼‚ã€‚\nproductionæ¨¡å¼æ˜¯ä¸ºäº†ç”Ÿäº§ç¯å¢ƒèµ„æºè®¿é—®çš„æ•ˆç‡ã€‚\ndevelopmentæ¨¡å¼æ˜¯ä¸ºäº†å¼€å‘ç¯å¢ƒçš„è°ƒè¯•æ•ˆç‡ã€‚\nnoneæ¨¡å¼ä¸€èˆ¬éƒ½ä¸ä¼šç”¨ä¸Šï¼Œå®ƒåŸºæœ¬ä¸Šå’Œdevelopmentæ¨¡å¼ç›¸åŒï¼Œåœ¨ç¼“å­˜å’Œå¼€å‘è°ƒè¯•ä¸Šåˆæœ‰äº›ä¸è¶³ï¼Œæ‰€ä»¥åŸºæœ¬ä¸Šä¸é€‰æ‹©noneæ¨¡å¼ã€‚\nä¸‰ç§æ¨¡å¼çš„é…ç½®å¯¹è±¡mode: &#39;none&#39;module.exports &#x3D; &#123;\n  amd: undefined,\n  bail: undefined,\n  cache: false,\n  context: &#39;&#x2F;Users&#x2F;test&#39;,\n  dependencies: undefined,\n  devServer: undefined,\n  devtool: false,\n  entry: &#123;\n    main: &#123;\n      &#39;import&#39;: [&#39;.&#x2F;src&#39;]\n    &#125;\n  &#125;,\n  experiments: &#123;\n    topLevelAwait: false,\n    syncWebAssembly: false,\n    asyncWebAssembly: false,\n    outputModule: false\n  &#125;,\n  externals: undefined,\n  externalsPresets: &#123;\n    web: true,\n    node: false,\n    nwjs: false,\n    electron: false,\n    electronMain: false,\n    electronPreload: false,\n    electronRenderer: false\n  &#125;,\n  externalsType: &#39;var&#39;,\n  ignoreWarnings: undefined,\n  infrastructureLogging: &#123;&#125;,\n  loader: &#123;\n    target: &#39;web&#39;\n  &#125;,\n  mode: &#39;none&#39;,\n  module: &#123;\n    noParse: undefined,\n    unsafeCache: false,\n    parser: &#123;\n      javascript: &#123;\n        unknownContextRequest: &#39;.&#39;,\n        unknownContextRegExp: false,\n        unknownContextRecursive: true,\n        unknownContextCritical: true,\n        exprContextRequest: &#39;.&#39;,\n        exprContextRegExp: false,\n        exprContextRecursive: true,\n        exprContextCritical: true,\n        wrappedContextRegExp: &#x2F;.*&#x2F;,\n        wrappedContextRecursive: true,\n        wrappedContextCritical: false,\n        strictExportPresence: false,\n        strictThisContextOnImports: false\n      &#125;,\n      asset: &#123;\n        dataUrlCondition: &#123;\n          maxSize: 8096\n        &#125;\n      &#125;\n    &#125;,\n    generator: &#123;&#125;,\n    defaultRules: [&#123;\n      mimetype: &#39;application&#x2F;node&#39;,\n      type: &#39;javascript&#x2F;auto&#39;\n    &#125;, &#123;\n      test: &#x2F;.json$&#x2F;i,\n      type: &#39;json&#39;\n    &#125;, &#123;\n      mimetype: &#39;application&#x2F;json&#39;,\n      type: &#39;json&#39;\n    &#125;, &#123;\n      test: &#x2F;.mjs$&#x2F;i,\n      type: &#39;javascript&#x2F;esm&#39;,\n      resolve: &#123;\n        byDependency: &#123;\n          esm: &#123;\n            fullySpecified: true\n          &#125;\n        &#125;\n      &#125;\n    &#125;, &#123;\n      test: &#x2F;.js$&#x2F;i,\n      descriptionData: &#123;\n        type: &#39;module&#39;\n      &#125;,\n      type: &#39;javascript&#x2F;esm&#39;,\n      resolve: &#123;\n        byDependency: &#123;\n          esm: &#123;\n            fullySpecified: true\n          &#125;\n        &#125;\n      &#125;\n    &#125;, &#123;\n      test: &#x2F;.cjs$&#x2F;i,\n      type: &#39;javascript&#x2F;dynamic&#39;\n    &#125;, &#123;\n      test: &#x2F;.js$&#x2F;i,\n      descriptionData: &#123;\n        type: &#39;commonjs&#39;\n      &#125;,\n      type: &#39;javascript&#x2F;dynamic&#39;\n    &#125;, &#123;\n      mimetype: &#123;\n        or: [&#39;text&#x2F;javascript&#39;, &#39;application&#x2F;javascript&#39;]\n      &#125;,\n      type: &#39;javascript&#x2F;esm&#39;,\n      resolve: &#123;\n        byDependency: &#123;\n          esm: &#123;\n            fullySpecified: true\n          &#125;\n        &#125;\n      &#125;\n    &#125;, &#123;\n      dependency: &#39;url&#39;,\n      type: &#39;asset&#x2F;resource&#39;\n    &#125;],\n    rules: []\n  &#125;,\n  name: undefined,\n  node: &#123;\n    global: true,\n    __filename: &#39;mock&#39;,\n    __dirname: &#39;mock&#39;\n  &#125;,\n  optimization: &#123;\n    runtimeChunk: false,\n    splitChunks: &#123;\n      defaultSizeTypes: [&#39;javascript&#39;, &#39;unknown&#39;],\n      cacheGroups: &#123;\n        &#39;default&#39;: &#123;\n          idHint: &#39;&#39;,\n          reuseExistingChunk: true,\n          minChunks: 2,\n          priority: -20\n        &#125;,\n        defaultVendors: &#123;\n          idHint: &#39;vendors&#39;,\n          reuseExistingChunk: true,\n          test: &#x2F;[\\&#x2F;]node_modules[\\&#x2F;]&#x2F;i,\n          priority: -10\n        &#125;\n      &#125;,\n      hidePathInfo: false,\n      chunks: &#39;async&#39;,\n      usedExports: false,\n      minChunks: 1,\n      minSize: 10000,\n      minRemainingSize: undefined,\n      enforceSizeThreshold: 30000,\n      maxAsyncRequests: Infinity,\n      maxInitialRequests: Infinity,\n      automaticNameDelimiter: &#39;-&#39;\n    &#125;,\n    emitOnErrors: true,\n    removeAvailableModules: false,\n    removeEmptyChunks: true,\n    mergeDuplicateChunks: true,\n    flagIncludedChunks: false,\n    moduleIds: &#39;natural&#39;,\n    chunkIds: &#39;natural&#39;,\n    sideEffects: &#39;flag&#39;,\n    providedExports: true,\n    usedExports: false,\n    innerGraph: false,\n    mangleExports: false,\n    concatenateModules: false,\n    checkWasmTypes: false,\n    mangleWasmImports: false,\n    portableRecords: false,\n    realContentHash: false,\n    minimize: false,\n    minimizer: [&#123;\n      apply: compiler &#x3D;&gt; &#123;\n        &#x2F;&#x2F; Lazy load the Terser plugin\n        const TerserPlugin &#x3D; require(&quot;terser-webpack-plugin&quot;);\n        new TerserPlugin(&#123;\n          terserOptions: &#123;\n            compress: &#123;\n              passes: 2\n            &#125;\n          &#125;\n        &#125;).apply(compiler);\n      &#125;\n    &#125;],\n    nodeEnv: false\n  &#125;,\n  output: &#123;\n    assetModuleFilename: &#39;[hash][ext][query]&#39;,\n    charset: true,\n    chunkFilename: &#39;[name].js&#39;,\n    chunkFormat: &#39;array-push&#39;,\n    chunkLoading: &#39;jsonp&#39;,\n    chunkLoadingGlobal: &#39;webpackChunktest_npm&#39;,\n    chunkLoadTimeout: 120000,\n    clean: undefined,\n    compareBeforeEmit: true,\n    crossOriginLoading: false,\n    devtoolFallbackModuleFilenameTemplate: undefined,\n    devtoolModuleFilenameTemplate: undefined,\n    devtoolNamespace: &#39;test-npm&#39;,\n    environment: &#123;\n      arrowFunction: true,\n      &#39;const&#39;: true,\n      destructuring: true,\n      forOf: true,\n      bigIntLiteral: undefined,\n      dynamicImport: undefined,\n      module: undefined\n    &#125;,\n    enabledChunkLoadingTypes: [&#39;jsonp&#39;, &#39;import-scripts&#39;],\n    enabledLibraryTypes: [],\n    enabledWasmLoadingTypes: [&#39;fetch&#39;],\n    filename: &#39;[name].js&#39;,\n    globalObject: &#39;self&#39;,\n    hashDigest: &#39;hex&#39;,\n    hashDigestLength: 20,\n    hashFunction: &#39;md4&#39;,\n    hashSalt: undefined,\n    hotUpdateChunkFilename: &#39;[id].[fullhash].hot-update.js&#39;,\n    hotUpdateGlobal: &#39;webpackHotUpdatetest_npm&#39;,\n    hotUpdateMainFilename: &#39;[runtime].[fullhash].hot-update.json&#39;,\n    iife: true,\n    importFunctionName: &#39;import&#39;,\n    importMetaName: &#39;import.meta&#39;,\n    scriptType: false,\n    library: undefined,\n    module: false,\n    path: &#39;&#x2F;Users&#x2F;test&#x2F;dist&#39;,\n    pathinfo: false,\n    publicPath: &#39;auto&#39;,\n    sourceMapFilename: &#39;[file].map[query]&#39;,\n    sourcePrefix: undefined,\n    strictModuleExceptionHandling: false,\n    uniqueName: &#39;test-npm&#39;,\n    wasmLoading: &#39;fetch&#39;,\n    webassemblyModuleFilename: &#39;[hash].module.wasm&#39;,\n    workerChunkLoading: &#39;import-scripts&#39;,\n    workerWasmLoading: &#39;fetch&#39;\n  &#125;,\n  parallelism: 100,\n  performance: false,\n  plugins: [],\n  profile: false,\n  recordsInputPath: false,\n  recordsOutputPath: false,\n  resolve: &#123;\n    byDependency: &#123;\n      wasm: &#123;\n        conditionNames: [&#39;import&#39;, &#39;module&#39;, &#39;...&#39;],\n        extensions: [&#39;.js&#39;, &#39;.json&#39;, &#39;.wasm&#39;],\n        aliasFields: [&#39;browser&#39;],\n        mainFields: [&#39;browser&#39;, &#39;module&#39;, &#39;...&#39;]\n      &#125;,\n      esm: &#123;\n        conditionNames: [&#39;import&#39;, &#39;module&#39;, &#39;...&#39;],\n        extensions: [&#39;.js&#39;, &#39;.json&#39;, &#39;.wasm&#39;],\n        aliasFields: [&#39;browser&#39;],\n        mainFields: [&#39;browser&#39;, &#39;module&#39;, &#39;...&#39;]\n      &#125;,\n      loaderImport: &#123;\n        conditionNames: [&#39;import&#39;, &#39;module&#39;, &#39;...&#39;],\n        extensions: [&#39;.js&#39;, &#39;.json&#39;, &#39;.wasm&#39;],\n        aliasFields: [&#39;browser&#39;],\n        mainFields: [&#39;browser&#39;, &#39;module&#39;, &#39;...&#39;]\n      &#125;,\n      worker: &#123;\n        conditionNames: [&#39;import&#39;, &#39;module&#39;, &#39;...&#39;],\n        extensions: [&#39;.js&#39;, &#39;.json&#39;, &#39;.wasm&#39;],\n        aliasFields: [&#39;browser&#39;],\n        mainFields: [&#39;browser&#39;, &#39;module&#39;, &#39;...&#39;],\n        preferRelative: true\n      &#125;,\n      commonjs: &#123;\n        conditionNames: [&#39;require&#39;, &#39;module&#39;, &#39;...&#39;],\n        extensions: [&#39;.js&#39;, &#39;.json&#39;, &#39;.wasm&#39;],\n        aliasFields: [&#39;browser&#39;],\n        mainFields: [&#39;browser&#39;, &#39;module&#39;, &#39;...&#39;]\n      &#125;,\n      amd: &#123;\n        conditionNames: [&#39;require&#39;, &#39;module&#39;, &#39;...&#39;],\n        extensions: [&#39;.js&#39;, &#39;.json&#39;, &#39;.wasm&#39;],\n        aliasFields: [&#39;browser&#39;],\n        mainFields: [&#39;browser&#39;, &#39;module&#39;, &#39;...&#39;]\n      &#125;,\n      loader: &#123;\n        conditionNames: [&#39;require&#39;, &#39;module&#39;, &#39;...&#39;],\n        extensions: [&#39;.js&#39;, &#39;.json&#39;, &#39;.wasm&#39;],\n        aliasFields: [&#39;browser&#39;],\n        mainFields: [&#39;browser&#39;, &#39;module&#39;, &#39;...&#39;]\n      &#125;,\n      unknown: &#123;\n        conditionNames: [&#39;require&#39;, &#39;module&#39;, &#39;...&#39;],\n        extensions: [&#39;.js&#39;, &#39;.json&#39;, &#39;.wasm&#39;],\n        aliasFields: [&#39;browser&#39;],\n        mainFields: [&#39;browser&#39;, &#39;module&#39;, &#39;...&#39;]\n      &#125;,\n      undefined: &#123;\n        conditionNames: [&#39;require&#39;, &#39;module&#39;, &#39;...&#39;],\n        extensions: [&#39;.js&#39;, &#39;.json&#39;, &#39;.wasm&#39;],\n        aliasFields: [&#39;browser&#39;],\n        mainFields: [&#39;browser&#39;, &#39;module&#39;, &#39;...&#39;]\n      &#125;,\n      url: &#123;\n        preferRelative: true\n      &#125;\n    &#125;,\n    cache: false,\n    modules: [&#39;node_modules&#39;],\n    conditionNames: [&#39;webpack&#39;, &#39;production&#39;, &#39;browser&#39;],\n    mainFiles: [&#39;index&#39;],\n    extensions: [],\n    aliasFields: [],\n    exportsFields: [&#39;exports&#39;],\n    roots: [&#39;&#x2F;Users&#x2F;test&#39;],\n    mainFields: [&#39;main&#39;]\n  &#125;,\n  resolveLoader: &#123;\n    cache: false,\n    conditionNames: [&#39;loader&#39;, &#39;require&#39;, &#39;node&#39;],\n    exportsFields: [&#39;exports&#39;],\n    mainFields: [&#39;loader&#39;, &#39;main&#39;],\n    extensions: [&#39;.js&#39;],\n    mainFiles: [&#39;index&#39;]\n  &#125;,\n  snapshot: &#123;\n    resolveBuildDependencies: &#123;\n      timestamp: true,\n      hash: true\n    &#125;,\n    buildDependencies: &#123;\n      timestamp: true,\n      hash: true\n    &#125;,\n    resolve: &#123;\n      timestamp: true\n    &#125;,\n    module: &#123;\n      timestamp: true\n    &#125;,\n    immutablePaths: [],\n    managedPaths: [&#39;&#x2F;Users&#x2F;test&#x2F;node_modules&#39;]\n  &#125;,\n  stats: &#123;&#125;,\n  target: &#39;web&#39;,\n  watch: false,\n  watchOptions: &#123;&#125;\n&#125;\nå¤åˆ¶ä»£ç \n\nmode: &#39;development&#39;module.exports &#x3D; &#123;\n  amd: undefined,\n  bail: undefined,\n  cache: &#123;\n    type: &#39;memory&#39;,\n    maxGenerations: Infinity\n  &#125;,\n  context: &#39;&#x2F;Users&#x2F;test&#39;,\n  dependencies: undefined,\n  devServer: undefined,\n  devtool: &#39;eval&#39;,\n  entry: &#123;\n    main: &#123;\n      &#39;import&#39;: [&#39;.&#x2F;src&#39;]\n    &#125;\n  &#125;,\n  experiments: &#123;\n    topLevelAwait: false,\n    syncWebAssembly: false,\n    asyncWebAssembly: false,\n    outputModule: false\n  &#125;,\n  externals: undefined,\n  externalsPresets: &#123;\n    web: true,\n    node: false,\n    nwjs: false,\n    electron: false,\n    electronMain: false,\n    electronPreload: false,\n    electronRenderer: false\n  &#125;,\n  externalsType: &#39;var&#39;,\n  ignoreWarnings: undefined,\n  infrastructureLogging: &#123;&#125;,\n  loader: &#123;\n    target: &#39;web&#39;\n  &#125;,\n  mode: &#39;development&#39;,\n  module: &#123;\n    noParse: undefined,\n    unsafeCache: module &#x3D;&gt; &#123;\n      const name &#x3D; module.nameForCondition();\n      return name &amp;&amp; NODE_MODULES_REGEXP.test(name);\n    &#125;,\n    parser: &#123;\n      javascript: &#123;\n        unknownContextRequest: &#39;.&#39;,\n        unknownContextRegExp: false,\n        unknownContextRecursive: true,\n        unknownContextCritical: true,\n        exprContextRequest: &#39;.&#39;,\n        exprContextRegExp: false,\n        exprContextRecursive: true,\n        exprContextCritical: true,\n        wrappedContextRegExp: &#x2F;.*&#x2F;,\n        wrappedContextRecursive: true,\n        wrappedContextCritical: false,\n        strictExportPresence: false,\n        strictThisContextOnImports: false\n      &#125;,\n      asset: &#123;\n        dataUrlCondition: &#123;\n          maxSize: 8096\n        &#125;\n      &#125;\n    &#125;,\n    generator: &#123;&#125;,\n    defaultRules: [&#123;\n      mimetype: &#39;application&#x2F;node&#39;,\n      type: &#39;javascript&#x2F;auto&#39;\n    &#125;, &#123;\n      test: &#x2F;.json$&#x2F;i,\n      type: &#39;json&#39;\n    &#125;, &#123;\n      mimetype: &#39;application&#x2F;json&#39;,\n      type: &#39;json&#39;\n    &#125;, &#123;\n      test: &#x2F;.mjs$&#x2F;i,\n      type: &#39;javascript&#x2F;esm&#39;,\n      resolve: &#123;\n        byDependency: &#123;\n          esm: &#123;\n            fullySpecified: true\n          &#125;\n        &#125;\n      &#125;\n    &#125;, &#123;\n      test: &#x2F;.js$&#x2F;i,\n      descriptionData: &#123;\n        type: &#39;module&#39;\n      &#125;,\n      type: &#39;javascript&#x2F;esm&#39;,\n      resolve: &#123;\n        byDependency: &#123;\n          esm: &#123;\n            fullySpecified: true\n          &#125;\n        &#125;\n      &#125;\n    &#125;, &#123;\n      test: &#x2F;.cjs$&#x2F;i,\n      type: &#39;javascript&#x2F;dynamic&#39;\n    &#125;, &#123;\n      test: &#x2F;.js$&#x2F;i,\n      descriptionData: &#123;\n        type: &#39;commonjs&#39;\n      &#125;,\n      type: &#39;javascript&#x2F;dynamic&#39;\n    &#125;, &#123;\n      mimetype: &#123;\n        or: [&#39;text&#x2F;javascript&#39;, &#39;application&#x2F;javascript&#39;]\n      &#125;,\n      type: &#39;javascript&#x2F;esm&#39;,\n      resolve: &#123;\n        byDependency: &#123;\n          esm: &#123;\n            fullySpecified: true\n          &#125;\n        &#125;\n      &#125;\n    &#125;, &#123;\n      dependency: &#39;url&#39;,\n      type: &#39;asset&#x2F;resource&#39;\n    &#125;],\n    rules: []\n  &#125;,\n  name: undefined,\n  node: &#123;\n    global: true,\n    __filename: &#39;mock&#39;,\n    __dirname: &#39;mock&#39;\n  &#125;,\n  optimization: &#123;\n    runtimeChunk: false,\n    splitChunks: &#123;\n      defaultSizeTypes: [&#39;javascript&#39;, &#39;unknown&#39;],\n      cacheGroups: &#123;\n        &#39;default&#39;: &#123;\n          idHint: &#39;&#39;,\n          reuseExistingChunk: true,\n          minChunks: 2,\n          priority: -20\n        &#125;,\n        defaultVendors: &#123;\n          idHint: &#39;vendors&#39;,\n          reuseExistingChunk: true,\n          test: &#x2F;[\\&#x2F;]node_modules[\\&#x2F;]&#x2F;i,\n          priority: -10\n        &#125;\n      &#125;,\n      hidePathInfo: false,\n      chunks: &#39;async&#39;,\n      usedExports: false,\n      minChunks: 1,\n      minSize: 10000,\n      minRemainingSize: 0,\n      enforceSizeThreshold: 30000,\n      maxAsyncRequests: Infinity,\n      maxInitialRequests: Infinity,\n      automaticNameDelimiter: &#39;-&#39;\n    &#125;,\n    emitOnErrors: true,\n    removeAvailableModules: false,\n    removeEmptyChunks: true,\n    mergeDuplicateChunks: true,\n    flagIncludedChunks: false,\n    moduleIds: &#39;named&#39;,\n    chunkIds: &#39;named&#39;,\n    sideEffects: &#39;flag&#39;,\n    providedExports: true,\n    usedExports: false,\n    innerGraph: false,\n    mangleExports: false,\n    concatenateModules: false,\n    checkWasmTypes: false,\n    mangleWasmImports: false,\n    portableRecords: false,\n    realContentHash: false,\n    minimize: false,\n    minimizer: [&#123;\n      apply: compiler &#x3D;&gt; &#123;\n        &#x2F;&#x2F; Lazy load the Terser plugin\n        const TerserPlugin &#x3D; require(&quot;terser-webpack-plugin&quot;);\n        new TerserPlugin(&#123;\n          terserOptions: &#123;\n            compress: &#123;\n              passes: 2\n            &#125;\n          &#125;\n        &#125;).apply(compiler);\n      &#125;\n    &#125;],\n    nodeEnv: &#39;development&#39;\n  &#125;,\n  output: &#123;\n    assetModuleFilename: &#39;[hash][ext][query]&#39;,\n    charset: true,\n    chunkFilename: &#39;[name].js&#39;,\n    chunkFormat: &#39;array-push&#39;,\n    chunkLoading: &#39;jsonp&#39;,\n    chunkLoadingGlobal: &#39;webpackChunktest_npm&#39;,\n    chunkLoadTimeout: 120000,\n    clean: undefined,\n    compareBeforeEmit: true,\n    crossOriginLoading: false,\n    devtoolFallbackModuleFilenameTemplate: undefined,\n    devtoolModuleFilenameTemplate: undefined,\n    devtoolNamespace: &#39;test-npm&#39;,\n    environment: &#123;\n      arrowFunction: true,\n      &#39;const&#39;: true,\n      destructuring: true,\n      forOf: true,\n      bigIntLiteral: undefined,\n      dynamicImport: undefined,\n      module: undefined\n    &#125;,\n    enabledChunkLoadingTypes: [&#39;jsonp&#39;, &#39;import-scripts&#39;],\n    enabledLibraryTypes: [],\n    enabledWasmLoadingTypes: [&#39;fetch&#39;],\n    filename: &#39;[name].js&#39;,\n    globalObject: &#39;self&#39;,\n    hashDigest: &#39;hex&#39;,\n    hashDigestLength: 20,\n    hashFunction: &#39;md4&#39;,\n    hashSalt: undefined,\n    hotUpdateChunkFilename: &#39;[id].[fullhash].hot-update.js&#39;,\n    hotUpdateGlobal: &#39;webpackHotUpdatetest_npm&#39;,\n    hotUpdateMainFilename: &#39;[runtime].[fullhash].hot-update.json&#39;,\n    iife: true,\n    importFunctionName: &#39;import&#39;,\n    importMetaName: &#39;import.meta&#39;,\n    scriptType: false,\n    library: undefined,\n    module: false,\n    path: &#39;&#x2F;Users&#x2F;test&#x2F;dist&#39;,\n    pathinfo: true,\n    publicPath: &#39;auto&#39;,\n    sourceMapFilename: &#39;[file].map[query]&#39;,\n    sourcePrefix: undefined,\n    strictModuleExceptionHandling: false,\n    uniqueName: &#39;test-npm&#39;,\n    wasmLoading: &#39;fetch&#39;,\n    webassemblyModuleFilename: &#39;[hash].module.wasm&#39;,\n    workerChunkLoading: &#39;import-scripts&#39;,\n    workerWasmLoading: &#39;fetch&#39;\n  &#125;,\n  parallelism: 100,\n  performance: false,\n  plugins: [],\n  profile: false,\n  recordsInputPath: false,\n  recordsOutputPath: false,\n  resolve: &#123;\n    byDependency: &#123;\n      wasm: &#123;\n        conditionNames: [&#39;import&#39;, &#39;module&#39;, &#39;...&#39;],\n        extensions: [&#39;.js&#39;, &#39;.json&#39;, &#39;.wasm&#39;],\n        aliasFields: [&#39;browser&#39;],\n        mainFields: [&#39;browser&#39;, &#39;module&#39;, &#39;...&#39;]\n      &#125;,\n      esm: &#123;\n        conditionNames: [&#39;import&#39;, &#39;module&#39;, &#39;...&#39;],\n        extensions: [&#39;.js&#39;, &#39;.json&#39;, &#39;.wasm&#39;],\n        aliasFields: [&#39;browser&#39;],\n        mainFields: [&#39;browser&#39;, &#39;module&#39;, &#39;...&#39;]\n      &#125;,\n      loaderImport: &#123;\n        conditionNames: [&#39;import&#39;, &#39;module&#39;, &#39;...&#39;],\n        extensions: [&#39;.js&#39;, &#39;.json&#39;, &#39;.wasm&#39;],\n        aliasFields: [&#39;browser&#39;],\n        mainFields: [&#39;browser&#39;, &#39;module&#39;, &#39;...&#39;]\n      &#125;,\n      worker: &#123;\n        conditionNames: [&#39;import&#39;, &#39;module&#39;, &#39;...&#39;],\n        extensions: [&#39;.js&#39;, &#39;.json&#39;, &#39;.wasm&#39;],\n        aliasFields: [&#39;browser&#39;],\n        mainFields: [&#39;browser&#39;, &#39;module&#39;, &#39;...&#39;],\n        preferRelative: true\n      &#125;,\n      commonjs: &#123;\n        conditionNames: [&#39;require&#39;, &#39;module&#39;, &#39;...&#39;],\n        extensions: [&#39;.js&#39;, &#39;.json&#39;, &#39;.wasm&#39;],\n        aliasFields: [&#39;browser&#39;],\n        mainFields: [&#39;browser&#39;, &#39;module&#39;, &#39;...&#39;]\n      &#125;,\n      amd: &#123;\n        conditionNames: [&#39;require&#39;, &#39;module&#39;, &#39;...&#39;],\n        extensions: [&#39;.js&#39;, &#39;.json&#39;, &#39;.wasm&#39;],\n        aliasFields: [&#39;browser&#39;],\n        mainFields: [&#39;browser&#39;, &#39;module&#39;, &#39;...&#39;]\n      &#125;,\n      loader: &#123;\n        conditionNames: [&#39;require&#39;, &#39;module&#39;, &#39;...&#39;],\n        extensions: [&#39;.js&#39;, &#39;.json&#39;, &#39;.wasm&#39;],\n        aliasFields: [&#39;browser&#39;],\n        mainFields: [&#39;browser&#39;, &#39;module&#39;, &#39;...&#39;]\n      &#125;,\n      unknown: &#123;\n        conditionNames: [&#39;require&#39;, &#39;module&#39;, &#39;...&#39;],\n        extensions: [&#39;.js&#39;, &#39;.json&#39;, &#39;.wasm&#39;],\n        aliasFields: [&#39;browser&#39;],\n        mainFields: [&#39;browser&#39;, &#39;module&#39;, &#39;...&#39;]\n      &#125;,\n      undefined: &#123;\n        conditionNames: [&#39;require&#39;, &#39;module&#39;, &#39;...&#39;],\n        extensions: [&#39;.js&#39;, &#39;.json&#39;, &#39;.wasm&#39;],\n        aliasFields: [&#39;browser&#39;],\n        mainFields: [&#39;browser&#39;, &#39;module&#39;, &#39;...&#39;]\n      &#125;,\n      url: &#123;\n        preferRelative: true\n      &#125;\n    &#125;,\n    cache: true,\n    modules: [&#39;node_modules&#39;],\n    conditionNames: [&#39;webpack&#39;, &#39;development&#39;, &#39;browser&#39;],\n    mainFiles: [&#39;index&#39;],\n    extensions: [],\n    aliasFields: [],\n    exportsFields: [&#39;exports&#39;],\n    roots: [&#39;&#x2F;Users&#x2F;test&#39;],\n    mainFields: [&#39;main&#39;]\n  &#125;,\n  resolveLoader: &#123;\n    cache: true,\n    conditionNames: [&#39;loader&#39;, &#39;require&#39;, &#39;node&#39;],\n    exportsFields: [&#39;exports&#39;],\n    mainFields: [&#39;loader&#39;, &#39;main&#39;],\n    extensions: [&#39;.js&#39;],\n    mainFiles: [&#39;index&#39;]\n  &#125;,\n  snapshot: &#123;\n    resolveBuildDependencies: &#123;\n      timestamp: true,\n      hash: true\n    &#125;,\n    buildDependencies: &#123;\n      timestamp: true,\n      hash: true\n    &#125;,\n    resolve: &#123;\n      timestamp: true\n    &#125;,\n    module: &#123;\n      timestamp: true\n    &#125;,\n    immutablePaths: [],\n    managedPaths: [&#39;&#x2F;Users&#x2F;test&#x2F;node_modules&#39;]\n  &#125;,\n  stats: &#123;&#125;,\n  target: &#39;web&#39;,\n  watch: false,\n  watchOptions: &#123;&#125;\n&#125;\nå¤åˆ¶ä»£ç \n\nmode: &#39;production&#39;module.exports &#x3D; &#123;\n  amd: undefined,\n  bail: undefined,\n  cache: false,\n  context: &#39;&#x2F;Users&#x2F;test&#39;,\n  dependencies: undefined,\n  devServer: undefined,\n  devtool: false,\n  entry: &#123;\n    main: &#123;\n      &#39;import&#39;: [&#39;.&#x2F;src&#39;]\n    &#125;\n  &#125;,\n  experiments: &#123;\n    topLevelAwait: false,\n    syncWebAssembly: false,\n    asyncWebAssembly: false,\n    outputModule: false\n  &#125;,\n  externals: undefined,\n  externalsPresets: &#123;\n    web: true,\n    node: false,\n    nwjs: false,\n    electron: false,\n    electronMain: false,\n    electronPreload: false,\n    electronRenderer: false\n  &#125;,\n  externalsType: &#39;var&#39;,\n  ignoreWarnings: undefined,\n  infrastructureLogging: &#123;&#125;,\n  loader: &#123;\n    target: &#39;web&#39;\n  &#125;,\n  mode: &#39;production&#39;,\n  module: &#123;\n    noParse: undefined,\n    unsafeCache: false,\n    parser: &#123;\n      javascript: &#123;\n        unknownContextRequest: &#39;.&#39;,\n        unknownContextRegExp: false,\n        unknownContextRecursive: true,\n        unknownContextCritical: true,\n        exprContextRequest: &#39;.&#39;,\n        exprContextRegExp: false,\n        exprContextRecursive: true,\n        exprContextCritical: true,\n        wrappedContextRegExp: &#x2F;.*&#x2F;,\n        wrappedContextRecursive: true,\n        wrappedContextCritical: false,\n        strictExportPresence: false,\n        strictThisContextOnImports: false\n      &#125;,\n      asset: &#123;\n        dataUrlCondition: &#123;\n          maxSize: 8096\n        &#125;\n      &#125;\n    &#125;,\n    generator: &#123;&#125;,\n    defaultRules: [&#123;\n      mimetype: &#39;application&#x2F;node&#39;,\n      type: &#39;javascript&#x2F;auto&#39;\n    &#125;, &#123;\n      test: &#x2F;.json$&#x2F;i,\n      type: &#39;json&#39;\n    &#125;, &#123;\n      mimetype: &#39;application&#x2F;json&#39;,\n      type: &#39;json&#39;\n    &#125;, &#123;\n      test: &#x2F;.mjs$&#x2F;i,\n      type: &#39;javascript&#x2F;esm&#39;,\n      resolve: &#123;\n        byDependency: &#123;\n          esm: &#123;\n            fullySpecified: true\n          &#125;\n        &#125;\n      &#125;\n    &#125;, &#123;\n      test: &#x2F;.js$&#x2F;i,\n      descriptionData: &#123;\n        type: &#39;module&#39;\n      &#125;,\n      type: &#39;javascript&#x2F;esm&#39;,\n      resolve: &#123;\n        byDependency: &#123;\n          esm: &#123;\n            fullySpecified: true\n          &#125;\n        &#125;\n      &#125;\n    &#125;, &#123;\n      test: &#x2F;.cjs$&#x2F;i,\n      type: &#39;javascript&#x2F;dynamic&#39;\n    &#125;, &#123;\n      test: &#x2F;.js$&#x2F;i,\n      descriptionData: &#123;\n        type: &#39;commonjs&#39;\n      &#125;,\n      type: &#39;javascript&#x2F;dynamic&#39;\n    &#125;, &#123;\n      mimetype: &#123;\n        or: [&#39;text&#x2F;javascript&#39;, &#39;application&#x2F;javascript&#39;]\n      &#125;,\n      type: &#39;javascript&#x2F;esm&#39;,\n      resolve: &#123;\n        byDependency: &#123;\n          esm: &#123;\n            fullySpecified: true\n          &#125;\n        &#125;\n      &#125;\n    &#125;, &#123;\n      dependency: &#39;url&#39;,\n      type: &#39;asset&#x2F;resource&#39;\n    &#125;],\n    rules: []\n  &#125;,\n  name: undefined,\n  node: &#123;\n    global: true,\n    __filename: &#39;mock&#39;,\n    __dirname: &#39;mock&#39;\n  &#125;,\n  optimization: &#123;\n    runtimeChunk: false,\n    splitChunks: &#123;\n      defaultSizeTypes: [&#39;javascript&#39;, &#39;unknown&#39;],\n      cacheGroups: &#123;\n        &#39;default&#39;: &#123;\n          idHint: &#39;&#39;,\n          reuseExistingChunk: true,\n          minChunks: 2,\n          priority: -20\n        &#125;,\n        defaultVendors: &#123;\n          idHint: &#39;vendors&#39;,\n          reuseExistingChunk: true,\n          test: &#x2F;[\\&#x2F;]node_modules[\\&#x2F;]&#x2F;i,\n          priority: -10\n        &#125;\n      &#125;,\n      hidePathInfo: true,\n      chunks: &#39;async&#39;,\n      usedExports: true,\n      minChunks: 1,\n      minSize: 20000,\n      minRemainingSize: undefined,\n      enforceSizeThreshold: 50000,\n      maxAsyncRequests: 30,\n      maxInitialRequests: 30,\n      automaticNameDelimiter: &#39;-&#39;\n    &#125;,\n    emitOnErrors: false,\n    removeAvailableModules: false,\n    removeEmptyChunks: true,\n    mergeDuplicateChunks: true,\n    flagIncludedChunks: true,\n    moduleIds: &#39;deterministic&#39;,\n    chunkIds: &#39;deterministic&#39;,\n    sideEffects: true,\n    providedExports: true,\n    usedExports: true,\n    innerGraph: true,\n    mangleExports: true,\n    concatenateModules: true,\n    checkWasmTypes: true,\n    mangleWasmImports: false,\n    portableRecords: false,\n    realContentHash: true,\n    minimize: true,\n    minimizer: [&#123;\n      apply: compiler &#x3D;&gt; &#123;\n        &#x2F;&#x2F; Lazy load the Terser plugin\n        const TerserPlugin &#x3D; require(&quot;terser-webpack-plugin&quot;);\n        new TerserPlugin(&#123;\n          terserOptions: &#123;\n            compress: &#123;\n              passes: 2\n            &#125;\n          &#125;\n        &#125;).apply(compiler);\n      &#125;\n    &#125;],\n    nodeEnv: &#39;production&#39;\n  &#125;,\n  output: &#123;\n    assetModuleFilename: &#39;[hash][ext][query]&#39;,\n    charset: true,\n    chunkFilename: &#39;[name].js&#39;,\n    chunkFormat: &#39;array-push&#39;,\n    chunkLoading: &#39;jsonp&#39;,\n    chunkLoadingGlobal: &#39;webpackChunktest_npm&#39;,\n    chunkLoadTimeout: 120000,\n    clean: undefined,\n    compareBeforeEmit: true,\n    crossOriginLoading: false,\n    devtoolFallbackModuleFilenameTemplate: undefined,\n    devtoolModuleFilenameTemplate: undefined,\n    devtoolNamespace: &#39;test-npm&#39;,\n    environment: &#123;\n      arrowFunction: true,\n      &#39;const&#39;: true,\n      destructuring: true,\n      forOf: true,\n      bigIntLiteral: undefined,\n      dynamicImport: undefined,\n      module: undefined\n    &#125;,\n    enabledChunkLoadingTypes: [&#39;jsonp&#39;, &#39;import-scripts&#39;],\n    enabledLibraryTypes: [],\n    enabledWasmLoadingTypes: [&#39;fetch&#39;],\n    filename: &#39;[name].js&#39;,\n    globalObject: &#39;self&#39;,\n    hashDigest: &#39;hex&#39;,\n    hashDigestLength: 20,\n    hashFunction: &#39;md4&#39;,\n    hashSalt: undefined,\n    hotUpdateChunkFilename: &#39;[id].[fullhash].hot-update.js&#39;,\n    hotUpdateGlobal: &#39;webpackHotUpdatetest_npm&#39;,\n    hotUpdateMainFilename: &#39;[runtime].[fullhash].hot-update.json&#39;,\n    iife: true,\n    importFunctionName: &#39;import&#39;,\n    importMetaName: &#39;import.meta&#39;,\n    scriptType: false,\n    library: undefined,\n    module: false,\n    path: &#39;&#x2F;Users&#x2F;test&#x2F;dist&#39;,\n    pathinfo: false,\n    publicPath: &#39;auto&#39;,\n    sourceMapFilename: &#39;[file].map[query]&#39;,\n    sourcePrefix: undefined,\n    strictModuleExceptionHandling: false,\n    uniqueName: &#39;test-npm&#39;,\n    wasmLoading: &#39;fetch&#39;,\n    webassemblyModuleFilename: &#39;[hash].module.wasm&#39;,\n    workerChunkLoading: &#39;import-scripts&#39;,\n    workerWasmLoading: &#39;fetch&#39;\n  &#125;,\n  parallelism: 100,\n  performance: &#123;\n    maxAssetSize: 250000,\n    maxEntrypointSize: 250000,\n    hints: &#39;warning&#39;\n  &#125;,\n  plugins: [],\n  profile: false,\n  recordsInputPath: false,\n  recordsOutputPath: false,\n  resolve: &#123;\n    byDependency: &#123;\n      wasm: &#123;\n        conditionNames: [&#39;import&#39;, &#39;module&#39;, &#39;...&#39;],\n        extensions: [&#39;.js&#39;, &#39;.json&#39;, &#39;.wasm&#39;],\n        aliasFields: [&#39;browser&#39;],\n        mainFields: [&#39;browser&#39;, &#39;module&#39;, &#39;...&#39;]\n      &#125;,\n      esm: &#123;\n        conditionNames: [&#39;import&#39;, &#39;module&#39;, &#39;...&#39;],\n        extensions: [&#39;.js&#39;, &#39;.json&#39;, &#39;.wasm&#39;],\n        aliasFields: [&#39;browser&#39;],\n        mainFields: [&#39;browser&#39;, &#39;module&#39;, &#39;...&#39;]\n      &#125;,\n      loaderImport: &#123;\n        conditionNames: [&#39;import&#39;, &#39;module&#39;, &#39;...&#39;],\n        extensions: [&#39;.js&#39;, &#39;.json&#39;, &#39;.wasm&#39;],\n        aliasFields: [&#39;browser&#39;],\n        mainFields: [&#39;browser&#39;, &#39;module&#39;, &#39;...&#39;]\n      &#125;,\n      worker: &#123;\n        conditionNames: [&#39;import&#39;, &#39;module&#39;, &#39;...&#39;],\n        extensions: [&#39;.js&#39;, &#39;.json&#39;, &#39;.wasm&#39;],\n        aliasFields: [&#39;browser&#39;],\n        mainFields: [&#39;browser&#39;, &#39;module&#39;, &#39;...&#39;],\n        preferRelative: true\n      &#125;,\n      commonjs: &#123;\n        conditionNames: [&#39;require&#39;, &#39;module&#39;, &#39;...&#39;],\n        extensions: [&#39;.js&#39;, &#39;.json&#39;, &#39;.wasm&#39;],\n        aliasFields: [&#39;browser&#39;],\n        mainFields: [&#39;browser&#39;, &#39;module&#39;, &#39;...&#39;]\n      &#125;,\n      amd: &#123;\n        conditionNames: [&#39;require&#39;, &#39;module&#39;, &#39;...&#39;],\n        extensions: [&#39;.js&#39;, &#39;.json&#39;, &#39;.wasm&#39;],\n        aliasFields: [&#39;browser&#39;],\n        mainFields: [&#39;browser&#39;, &#39;module&#39;, &#39;...&#39;]\n      &#125;,\n      loader: &#123;\n        conditionNames: [&#39;require&#39;, &#39;module&#39;, &#39;...&#39;],\n        extensions: [&#39;.js&#39;, &#39;.json&#39;, &#39;.wasm&#39;],\n        aliasFields: [&#39;browser&#39;],\n        mainFields: [&#39;browser&#39;, &#39;module&#39;, &#39;...&#39;]\n      &#125;,\n      unknown: &#123;\n        conditionNames: [&#39;require&#39;, &#39;module&#39;, &#39;...&#39;],\n        extensions: [&#39;.js&#39;, &#39;.json&#39;, &#39;.wasm&#39;],\n        aliasFields: [&#39;browser&#39;],\n        mainFields: [&#39;browser&#39;, &#39;module&#39;, &#39;...&#39;]\n      &#125;,\n      undefined: &#123;\n        conditionNames: [&#39;require&#39;, &#39;module&#39;, &#39;...&#39;],\n        extensions: [&#39;.js&#39;, &#39;.json&#39;, &#39;.wasm&#39;],\n        aliasFields: [&#39;browser&#39;],\n        mainFields: [&#39;browser&#39;, &#39;module&#39;, &#39;...&#39;]\n      &#125;,\n      url: &#123;\n        preferRelative: true\n      &#125;\n    &#125;,\n    cache: false,\n    modules: [&#39;node_modules&#39;],\n    conditionNames: [&#39;webpack&#39;, &#39;production&#39;, &#39;browser&#39;],\n    mainFiles: [&#39;index&#39;],\n    extensions: [],\n    aliasFields: [],\n    exportsFields: [&#39;exports&#39;],\n    roots: [&#39;&#x2F;Users&#x2F;test&#39;],\n    mainFields: [&#39;main&#39;]\n  &#125;,\n  resolveLoader: &#123;\n    cache: false,\n    conditionNames: [&#39;loader&#39;, &#39;require&#39;, &#39;node&#39;],\n    exportsFields: [&#39;exports&#39;],\n    mainFields: [&#39;loader&#39;, &#39;main&#39;],\n    extensions: [&#39;.js&#39;],\n    mainFiles: [&#39;index&#39;]\n  &#125;,\n  snapshot: &#123;\n    resolveBuildDependencies: &#123;\n      timestamp: true,\n      hash: true\n    &#125;,\n    buildDependencies: &#123;\n      timestamp: true,\n      hash: true\n    &#125;,\n    resolve: &#123;\n      timestamp: true,\n      hash: true\n    &#125;,\n    module: &#123;\n      timestamp: true,\n      hash: true\n    &#125;,\n    immutablePaths: [],\n    managedPaths: [&#39;&#x2F;Users&#x2F;test&#x2F;node_modules&#39;]\n  &#125;,\n  stats: &#123;&#125;,\n  target: &#39;web&#39;,\n  watch: false,\n  watchOptions: &#123;&#125;\n&#125;\nå¤åˆ¶ä»£ç \n\nä¸€ç‚¹æ„Ÿæƒ³webpackçš„é…ç½®ååˆ†å¤æ‚ï¼Œå¯¹æ„å»ºè¿‡ç¨‹æ¶‰åŠåˆ°çš„ç»†èŠ‚åšæˆäº†å¯é…ç½®çš„ï¼Œç»™äººçš„æ„Ÿè§‰æ˜¯å¢åŠ äº†å¾ˆå¤§çš„å­¦ä¹ æˆæœ¬ï¼Œå¾ˆå¤šé…ç½®çš„æ¥é¾™å»è„‰ï¼Œè¯»æ–‡æ¡£ä¹Ÿæœªå¿…èƒ½å¤Ÿç†è§£å…¶ä¸­çš„ä½œç”¨ï¼Œå»ç ”ç©¶æºç ä¼šæŠ•å…¥è¿‡å¤šçš„ç²¾åŠ›ï¼Œå¾€å¾€æŠ•å…¥äº§å‡ºæ¯”å¾ˆä½ã€‚\nåœ¨ä¸€èˆ¬çš„å¼€å‘åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦å¦‚æ­¤ç»†è‡´åœ°å¯¹webpackçš„é…ç½®è¿›è¡Œå­¦ä¹ ï¼Œwebpacké€šè¿‡æ¨¡å¼å·²ç»æä¾›äº†æœ€ä½³å®è·µé…ç½®ï¼Œè€Œæˆ‘ä»¬è¦åšçš„ï¼Œåªä¸è¿‡æ˜¯æŒ‡å®šmodeï¼Œç„¶åè§†æƒ…å†µé…ç½®entryã€outputã€loaderã€pluginè€Œå·²ã€‚åªæœ‰å½“é»˜è®¤çš„é…ç½®æ— æ³•æ»¡è¶³å®é™…æƒ…å†µæ—¶ï¼Œæ‰éœ€è¦å¯¹å®ƒè¿›ä¸€æ­¥ç†è§£ï¼Œè¿™ç§æƒ…å†µå°‘ä¹‹åˆå°‘ï¼Œæˆ‘ä»¬çš„é‡å¿ƒåº”è¯¥æ”¾åœ¨æ›´å…·æœ‰æ„ä¹‰çš„ä¸šåŠ¡ä»·å€¼ä¸Šå§ã€‚\n","slug":"webpack5ä¸‰ç§modeé»˜è®¤é…ç½®å¯¹æ¯”","date":"2022-10-21T14:49:27.000Z","categories_index":"","tags_index":"","author_index":"Beastrong"},{"id":"efdc9b79c944d790c755000a59863fa6","title":"å½»åº•ææ‡‚nginx","content":"ä»€ä¹ˆæ˜¯nginxï¼Ÿnginxæ˜¯ä¸€ä¸ªå¼€æºå¯é çš„HTTPä¸­é—´ä»¶ä»£ç†æœåŠ¡ã€‚\né…ç½®ç›®å½•ä¸»é…ç½®æ–‡ä»¶&#x2F;etc&#x2F;nginx&#x2F;nginx.confé…ç½®æ–‡ä»¶åŸºæœ¬ç»“æ„ï¼š\n\nnginx å¼€å¯ï¼Œå…³é—­ï¼Œé‡å¯å¼€å¯ systemctl start nginx å…³é—­ nginx -s stop é‡å¯ï¼Œnginx -s reload ï¼ˆè¿™ä¸ªä¸€èˆ¬æ˜¯åœ¨ä¿®æ”¹é…ç½®æ–‡ä»¶åï¼Œå…ˆç”¨nginx -t æ£€æŸ¥é…ç½®è¯­æ³•æ˜¯å¦æ­£ç¡®åï¼Œå†ç”¨nginx -s reload å¹³æ»‘é‡å¯ï¼‰\næ—¥å¿—æ–‡ä»¶&#x2F;var&#x2F;log&#x2F;nginx\nå‘ç”Ÿé”™è¯¯çš„æ—¶å€™æŸ¥æ‰¾æ–¹æ³•æœ€é‡è¦çš„å°±æ˜¯é”™è¯¯æ—¥å¿—ï¼Œé”™è¯¯æ—¥å¿—ï¼Œé”™è¯¯æ—¥å¿—ï¼Œå½“å‘ç”Ÿé”™è¯¯çš„æ—¶å€™ï¼Œé¦–å…ˆç¬¬ä¸€è¦æƒ³åˆ°å»æŸ¥çœ‹é”™è¯¯æ—¥å¿—ï¼ŒæŸ¥çœ‹å‘ç”Ÿé”™è¯¯çš„åŸå› ã€‚\n\n1ï¼Œé¦–å…ˆæŸ¥çœ‹é”™è¯¯æ—¥å¿— tail -n 10 &#x2F;var&#x2F;log&#x2F;nginx&#x2F;error.log\n2ï¼Œæ‰¾åˆ°é”™è¯¯åŸå› ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ &#x2F;etc&#x2F;nginx&#x2F;conf.d&#x2F;default.conf\n3ï¼ŒæŸ¥çœ‹ä¿®æ”¹çš„é”™è¯¯å‘½ä»¤æ˜¯å¦äº‰å– nginx -t\n4ï¼Œå¹³æ»‘é‡å¯ nginx -s reload\n\nserver_nameä¼˜å…ˆçº§1ï¼Œå½“åœ¨å¤šä¸ªserveä¸­åŒ¹é…äº†ç›¸åŒçš„server_name æœ€å…ˆå‡ºç°çš„ä¼˜å…ˆçº§æ˜¯æœ€é«˜çš„ã€‚\nlocationlocation åŒ¹é…è§„åˆ™\n1 &#x3D; è¡¨ç¤ºç²¾ç¡®åŒ¹é…ã€‚åªæœ‰è¯·æ±‚çš„urlè·¯å¾„ä¸åé¢çš„å­—ç¬¦ä¸²å®Œå…¨ç›¸ç­‰æ—¶ï¼Œæ‰ä¼šå‘½ä¸­ã€‚\n2 ~ è¡¨ç¤ºè¯¥è§„åˆ™æ˜¯ä½¿ç”¨æ­£åˆ™å®šä¹‰çš„ï¼ŒåŒºåˆ†å¤§å°å†™ã€‚\n3 ~* è¡¨ç¤ºè¯¥è§„åˆ™æ˜¯ä½¿ç”¨æ­£åˆ™å®šä¹‰çš„ï¼Œä¸åŒºåˆ†å¤§å°å†™ã€‚\n4 ^~ è¡¨ç¤ºå¦‚æœè¯¥ç¬¦å·åé¢çš„å­—ç¬¦æ˜¯æœ€ä½³åŒ¹é…ï¼Œé‡‡ç”¨è¯¥è§„åˆ™ï¼Œä¸å†è¿›è¡Œåç»­çš„æŸ¥æ‰¾ã€‚ åŒ¹é…é¡ºåº\n1 å¦‚æœåŒ¹é…åˆ° &#x3D; ï¼Œ ä¹Ÿå°±æ˜¯ç²¾ç¡®åŒ¹é…åˆ°urlï¼Œåˆ™è¿”å›\n2 å¦‚æœåŒ¹é…åˆ°^~,åˆ™è¿”å›ï¼Œå¹¶ä¸”ä¸ä¼šæƒ³ä¸‹åŒ¹é…ã€‚è¿™é‡Œæˆ‘æ›¾ç»é‡åˆ°è¿‡åœ¨åŒä¸€æœåŠ¡å™¨ä¸ŠåŒæ—¶éƒ¨ç½²ä¸¤ä¸ªreactå•é¡µé¡¹ç›®çš„æ—¶å€™ï¼Œä¸€ä¸ªreact A é¡¹ç›®æ”¾åœ¨&#x2F;homeç›®å½•ä¸‹ï¼Œä¸€ä¸ªreact Bé¡¹ç›®æ”¾åœ¨&#x2F;codsseç›®å½•ä¸‹ï¼Œå› ä¸ºå†™äº†å¦‚ä¸‹è§„åˆ™\n\n^~ &#x2F;codsse &#123;\n    ...\n&#125;\nå¤åˆ¶ä»£ç \n\nå¯¼è‡´å½“urlæ˜¯&#x2F;codesse&#x2F;çš„æ—¶å€™ï¼Œå¯ä»¥åŒ¹é…åˆ°Bé¡¹ç›®çš„index.html,ä½†æ˜¯åŒæ—¶åœ¨Bä¸­index.htmlä¸­çš„jsä¹ŸåŒ¹é…åˆ°äº†Bé¡¹ç›®çš„index.html,æ‰€ä»¥å¯¼è‡´å½¢æˆäº†ä¸€ä¸ªæ­»å¾ªç¯ã€‚\n\n3 æ¥ä¸‹æ¥åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼çš„ï¼Œ~ æˆ–è€…~*çš„ï¼Œå¦‚æœåŒ¹é…åˆ°åˆ™è¿”å›\n4 æœ€åéƒ½æ²¡åŒ¹é…åˆ°ï¼Œåˆ™è¿”å›æœ€å¤§åŒ¹é…çš„æˆ–è€…404\n5 &#x3D; &gt; ^~ &gt; &#x2F;* ä¼˜å…ˆçº§\n\ntry_filestry_files è¯•å›¾å¯»æ‰¾çš„æ–‡ä»¶\naliasä¸rootçš„åŒºåˆ«rootä¼šæŠŠåŒ¹é…åˆ°locationè¿åœ¨ä¸€èµ·å»è®¿é—® æ¯”å¦‚æœ‰ä»¥ä¸‹é…ç½®\nlocation &#x2F;cat &#123;\n    root &#x2F;cat&#x2F;imgs&#x2F;;\n&#125;\nå¤åˆ¶ä»£ç \n\nå½“è®¿é—® xx&#x2F;cat&#x2F;a.pngçš„æ—¶å€™ï¼Œå®é™…ä¸Šæ˜¯åˆ° &#x2F;cat&#x2F;imgs&#x2F;cat&#x2F;a.pngä¸­å»å¯»æ‰¾ å½“aliasæ˜¯&#x2F;cat&#x2F;imgs çš„æ—¶å€™ï¼ŒåŒæ ·çš„ç½‘å€ï¼Œå®é™…ä¸Šåˆ°&#x2F;cat&#x2F;imgs&#x2F;a.pngä¸­å»å¯»æ‰¾\nnginx çš„è®¿é—®æ§åˆ¶http_access_moduledeny æ‹’ç»è®¿é—®allow å¯ä»¥è®¿é—®\nä½œä¸ºé™æ€èµ„æºæœåŠ¡å™¨å‹ç¼©é™æ€èµ„æº1ï¼Œ gzipï¼šonÂ Â Â Â Â Â Â Â gzip_comp_level: 2 (å‹ç¼©çº§åˆ«)  \nè®¾ç½®è¿‡æœŸæ—¶é—´ä¸€èˆ¬æµè§ˆå™¨é¦–å…ˆä¼šæ£€æŸ¥max-ageï¼Œå¦‚æœè¿‡æœŸï¼Œåˆ™ä¼šå‘é€etagå’ŒLast-Modifiedåˆ°æœåŠ¡å™¨éªŒè¯ 1ï¼Œ è®¾ç½®è¿‡æœŸæ—¶é—´Â Â Â Â Â Â Â expires\næ­£å‘ä»£ç†å’Œåå‘ä»£ç†æ­£å‘ä»£ç†ï¼Ÿæ­£å‘ä»£ç†å°±æ˜¯ä»£ç†å®¢æˆ·ç«¯å‘èµ·è¯·æ±‚ï¼Œæ¯”å¦‚æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„vpn\nåå‘ä»£ç†ï¼Ÿå°±æ˜¯åœ¨æœåŠ¡å™¨ç«¯è¿›è¡Œä»£ç†ï¼Œæ¯”å¦‚ä½ è®¿é—®ä¸€ä¸ªåŸŸåï¼Œå¹¶ä¸çŸ¥é“çœŸæ­£çš„å®é™…èµ„æºæ˜¯å¦é€šè¿‡nginxç»™ä»£ç†åˆ°å“ªé‡Œå»äº†ã€‚\nè·¨åŸŸè®¿é—®è®¾ç½®å¯ä»¥nginxå…è®¸å¯ä»¥è·¨åŸŸè®¿é—®\nlocation &#x2F;sddss&#x2F; &#123;\n       proxy_redirect off; # å…³é—­é‡å®šå‘\n       add_header Access-Control-Allow-Origin *;\n   &#125;\nå¤åˆ¶ä»£ç \n\nè´Ÿè½½å‡è¡¡æ‰€è°“çš„è´Ÿè½½å‡è¡¡å…¶å®å°±æ˜¯é€šè¿‡nginxæŠŠè¯·æ±‚è½¬å‘åˆ°ä¸åŒçš„æœåŠ¡å™¨ä¸Šé¢å»ã€‚ æ¯ä¸ªæœåŠ¡å¯ä»¥é…ç½®ä¸€äº›å‚æ•°ï¼Œæ¯”å¦‚weightæƒé‡ï¼Œæ¯”å¦‚max_failsç­‰ è´Ÿè½½å‡è¡¡ä¹Ÿå¯ä»¥é€‰æ‹©ä¸åŒçš„ç®—æ³•ï¼Œæ¯”å¦‚è½®è¯¢ï¼Œæ¯”å¦‚ipâ€”hashç®—æ³•å’Œurlâ€”hashç®—æ³•ç­‰\nupsteam ii &#123;\n    serve 1;\n    serve 2;\n&#125;\nserver &#123;\n    location &#x2F; &#123;\n        proxy_pass ii;\n        include proxy_params;\n    &#125;\n&#125;\nå¤åˆ¶ä»£ç \n\nnginx ä½œä¸ºç¼“å­˜æœåŠ¡å™¨nginx ä½œä¸ºä¸­é—´ç¼“å­˜ï¼Œä½¿ç”¨proxy_cache_path\nnginx é‡å®šå‘urlå¯ä»¥é€šè¿‡rewrite æ ¹æ®æ­£åˆ™åŒ¹é…ï¼ŒæŠŠåŒ¹é…åˆ°çš„urlé‡å®šå‘åˆ°åˆ«çš„urlä¸­å»\nrewrite è¯­æ³•rewrite æ­£åˆ™ flagflag åŒ…æ‹¬breakï¼Œlast,redirectï¼Œpermanent breakä¼šç›´æ¥å»æŸ¥æ‰¾è€Œlastç›¸å½“äºä¼šç»§ç»­å‘ä¸‹åŒ¹é…rediect ä¸´æ—¶é‡å®šå‘permanent æ°¸ä¹…é‡å®šå‘\nrewrite ä¼˜å…ˆçº§sever ä¸­çš„rewriteè§„åˆ™ &gt; location ä¸­çš„rewriteè§„åˆ™\nnginx é“¾æ¥å‘¨æœŸé™åˆ¶ä½¿ç”¨æ¨¡å—secure_link_module åŸç†å°±æ˜¯é¦–å…ˆnginxæ ¹æ®ä¸€äº›ä¿¡æ¯è¿”å›ä¸‹è½½é“¾æ¥åŒ…æ‹¬md5å’Œexpriesï¼Œç„¶åä¸‹è½½çš„æ—¶å€™ï¼Œnginxåœ¨è¿›è¡ŒéªŒè¯md5å’Œè¿‡æœŸæ—¶é—´ã€‚ è¿”å›é“¾æ¥å¦‚ä¸‹ï¼š &#x2F;download?mad5&#x3D;dsdsd&amp;expries&#x3D;112233222\nlocation ~ &#123;\n   secure_link\n   secure_link_md5\n&#125;\nå¤åˆ¶ä»£ç \n\nnginx åŒºåˆ†å›½å†…å¤–ipä½¿ç”¨æ¨¡å—http_geoip_module å¯ä»¥æ ¹æ®è®¿é—®çš„ipæ˜¯å¦æ˜¯å›½å†…ipï¼Œæ¥è¿›è¡Œé™åˆ¶è®¿é—®\nlocation &#x2F; &#123;\n    if ($geoip_country_code !&#x3D; CN) &#123;\n        return 403\n    &#125;\n&#125;\nå¤åˆ¶ä»£ç \n\nnginx httpshttps é…ç½®*1 å®‰è£…openssl http_ssl_module *2 ç”ŸæˆCAè¯ä¹¦ *3 é…ç½®\nserver &#123;\n    listen      443;\n    server_name www.onedns.net;\n    ssl         on;\n    ssl_certificate     &#x2F;etc&#x2F;nginx&#x2F;ssl&#x2F;111net.pem;\n    ssl_certificate_key &#x2F;etc&#x2F;nginx&#x2F;ssl&#x2F;2222.key;\n    ssl_protocols       Tddsdss;\n    ssl_ciphers         dddssdss;\nå¤åˆ¶ä»£ç \n\nhttps æœåŠ¡ä¼˜åŒ–*1 æ¿€æ´»keepalive é•¿é“¾æ¥ *2 æ¿€æ´»ssl cache ç¼“å­˜\nnginx+ LuaLua åŸºç¡€è¯­æ³•\n1 ~&#x3D; è¡¨ç¤ºä¸ç­‰äº\n2 å­—ç¬¦ä¸²æ‹¼æ¥ ..\n\næ ¹æ®ipè¿›è¡Œä¸åŒå†…å®¹çš„è®¿é—®åŸºæœ¬åŸç†ï¼š å½“ç”¨æˆ·è®¿é—®çš„æ—¶å€™ï¼Œnginx è·å¾—ç”¨æˆ·çš„ipï¼Œç„¶åé€šè¿‡luaå»è®¿é—®ipæ•°æ®åº“ï¼Œç„¶åè®©ä¸åŒçš„ipè®¿é—®ä¸åŒçš„å†…å®¹ã€‚\nlocation &#x2F; &#123;\n    default_type &quot;text&#x2F;html&quot;;\n    content_by_lua_file &#x2F;opt&#x2F;as.lua;\n&#125;\nå¤åˆ¶ä»£ç \n\nnginx æ€§èƒ½ä¼˜åŒ–abæ¥å£å‹åŠ›æµ‹è¯•å·¥å…·ab -n 2000 -c 2 http://127.0.0.1\ncpuäº²å’Œè®¾ç½®worker process ä¸ºcpuæ ¸æ•°\nnginx å®‰å…¨å¸¸è§çš„æ”»å‡»æ‰‹æ®µ\n1 å¯†ç æ’åº“\n2 æ–‡ä»¶ä¸Šä¼ æ¼æ´\n3 sql æ³¨å…¥\n\n","slug":"å½»åº•ææ‡‚nginx","date":"2022-10-14T11:56:14.000Z","categories_index":"","tags_index":"","author_index":"Beastrong"},{"id":"b027df790b988095e3311de9321e5959","title":"è®°å½•å¾®å‰ç«¯micro-appçš„é…ç½®","content":"ä»‹ç»ï¼šåŸºåº§åº”ç”¨react\næ–‡ç« å‘å¸ƒæ—¶ï¼Œæ¶‰åŠåˆ°çš„ä¾èµ–åŒ…ç‰ˆæœ¬ï¼š\n&#123;\n  &quot;@micro-zoe&#x2F;micro-app&quot;: &quot;^0.8.4&quot;,\n&#125;\nå¤åˆ¶ä»£ç \n\næ–‡ç« é»˜è®¤æ‚¨å·²ç»å¤§è‡´æµè§ˆè¿‡micro-appå®˜æ–¹æ–‡æ¡£ï¼Œæ‰€ä»¥æœ€å¥½è¯·å…ˆé˜…è¯»å®˜æ–¹æ–‡æ¡£ï¼šcangdu.org&#x2F;micro-app&#x2F;dâ€¦\næˆ‘ç›®å‰å¤§å¤šæ•°çš„é¡¹ç›®éƒ½æ˜¯hashè·¯ç”±ï¼Œæœ¬æ¥æƒ³ç€åŸºåº§å’Œå­åº”ç”¨éƒ½é…ç½®æˆhashè·¯ç”±ï¼Œä½†æ˜¯æˆ‘æ²¡æ‰¾åˆ°å®˜æ–¹çš„ä¾‹å­ï¼Œè‡ªå·±ä¹Ÿæ²¡è¯•å‡ºæ¥ã€‚ã€‚ã€‚æœ€ç»ˆé€‰æ‹©äº† åŸºåº§åº”ç”¨historyè·¯ç”±ã€å­åº”ç”¨hashè·¯ç”±çš„æ–¹å¼ ï¼ˆæ³¨ï¼šåé¢å·²å…¨éƒ¨æ”¹ä¸ºhistoryè·¯ç”±ï¼‰\næ›´å¤šå®ç°æ–¹å¼ï¼šcangdu.org&#x2F;micro-app&#x2F;dâ€¦\nä¸‹é¢è¯´ä¸€ä¸‹ éœ€è¦åšçš„ä¿®æ”¹ï¼š\nåŸºåº§åº”ç”¨1ã€ä¿®æ”¹è·¯ç”±æ¨¡å¼ä¸ºhistorywebpackæ­å»ºçš„import &#123; BrowserRouter, HashRouter, useRoutes &#125; from &#39;react-router-dom&#39;\n...\nfunction App() &#123;\n  return (\n    &lt;BrowserRouter&gt;\n      &lt;RouteElement &#x2F;&gt;\n    &lt;&#x2F;BrowserRouter&gt;\n  )\n&#125;\nexport default App\nå¤åˆ¶ä»£ç \n\nwebpack.config.js â€“ 2022.02.17æ›´æ–°config.jsä¸€å…±éœ€è¦æ”¹ä¸¤ä¸ªåœ°æ–¹:\n...\noutput: &#123;\n  ...\n  publicPath: &#39;&#x2F;&#39;, &#x2F;&#x2F; historyè·¯ç”±\n  ...\n&#125;,\n...\n...\ndevServer: &#123;\n  ...\n  historyApiFallback: true, &#x2F;&#x2F; historyè·¯ç”±\n&#125;,\nå¤åˆ¶ä»£ç \n\nå¦‚æœæ˜¯umiçš„é¡¹ç›®éœ€è¦æŸ¥æ–‡æ¡£ä¿®æ”¹config\n2ã€å®‰è£…@micro-zoe&#x2F;micro-appnpm install @micro-zoe&#x2F;micro-app\nå¤åˆ¶ä»£ç \n\n3ã€å…¥å£æ–‡ä»¶å¼•å…¥microAppå¹¶start\nimport ReactDOM from &#39;react-dom&#39;\nimport App from &#39;.&#x2F;App&#39;\nimport microApp from &#39;@micro-zoe&#x2F;micro-app&#39;\n\nmicroApp.start(&#123;\n  &#x2F;&#x2F; æœ¬åœ°å¯åŠ¨æ—¶ sockjs-nodeæŠ¥é”™ è¦ä¸ç„¶ä¼šä¸€ç›´åˆ·æ–°\n  plugins: &#123;\n    modules: &#123;\n      app1: [\n        &#123;\n          loader(code) &#123;\n            if (process.env.NODE_ENV &#x3D;&#x3D;&#x3D; &#39;development&#39; &amp;&amp; code.indexOf(&#39;sockjs-node&#39;) &gt; -1) &#123;\n              code &#x3D; code.replace(&#39;window.location.port&#39;, 8052) &#x2F;&#x2F; è¿™é‡Œéœ€è¦ä¿®æ”¹æˆå­åº”ç”¨çš„ç«¯å£\n            &#125;\n            return code\n          &#125;,\n        &#125;,\n      ],\n    &#125;,\n  &#125;,\n&#125;)\nReactDOM.render(&lt;App &#x2F;&gt;, document.getElementById(&#39;root-main&#39;)) &#x2F;&#x2F; è¿™é‡Œindex.htmlé‡Œçš„root divæœ€å¥½æ¢ä¸ªåå­—ï¼ˆroot-mainï¼‰ï¼Œä»¥å…å’Œå­åº”ç”¨çš„å†²çª\nå¤åˆ¶ä»£ç \n\n4ã€è·¯ç”±é…ç½®ä¸­å¢åŠ ä¸€ä¸ªå­åº”ç”¨çš„è·¯ç”±è¿™é‡Œä¸éœ€è¦æ¯ä¸ªé¡µé¢åŠ ä¸€ä¸ªè·¯ç”±æ¯”å¦‚ï¼Œå­åº”ç”¨æœ‰ order&#x2F;page1 å’Œ order&#x2F;page2 è¿™ä¸¤ä¸ªè·¯ç”±ï¼Œè¿™é‡Œåªéœ€è¦æ·»åŠ ä¸€ä¸ªchildAppï¼ˆè¿™ä¸ªæ˜¯è‡ªå·±èµ·åçš„ï¼‰ï¼Œç„¶åä¸»åº”ç”¨é…ç½®èœå•çš„æ—¶å€™ï¼Œé…ç½® childApp#&#x2F;order&#x2F;page1 å’Œ childApp#&#x2F;order&#x2F;page2 è¿™ä¸¤ä¸ªèœå•å°±å¯ä»¥äº†\n  ...\n  &#x2F;&#x2F; å­åº”ç”¨1\n  &#123;\n    path: &#39;childApp&#39;,\n    element: () &#x3D;&gt; import(&#39;@&#x2F;pages&#x2F;childApp&#39;),\n  &#125;,\n  ...\nå¤åˆ¶ä»£ç \n\n5ã€&#x2F;pages&#x2F;childApp&#x2F;index.jsxå› ä¸ºReactä¸æ”¯æŒè‡ªå®šä¹‰äº‹ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¼•å…¥ä¸€ä¸ªpolyfillã€‚åœ¨&lt;micro-app&gt;æ ‡ç­¾æ‰€åœ¨çš„æ–‡ä»¶é¡¶éƒ¨æ·»åŠ polyfillï¼Œæ³¨é‡Šä¹Ÿè¦å¤åˆ¶ã€‚\n&#x2F;** @jsxRuntime classic *&#x2F;\n&#x2F;** @jsx jsxCustomEvent *&#x2F;\nimport jsxCustomEvent from &#39;@micro-zoe&#x2F;micro-app&#x2F;polyfill&#x2F;jsx-custom-event&#39; &#x2F;&#x2F; \n\nfunction Index() &#123;\n  &#x2F;&#x2F; name(å¿…ä¼ )ï¼šåº”ç”¨åç§°\n  &#x2F;&#x2F; url(å¿…ä¼ )ï¼šåº”ç”¨åœ°å€ï¼Œä¼šè¢«è‡ªåŠ¨è¡¥å…¨ä¸ºhttp:&#x2F;&#x2F;localhost:3000&#x2F;index.html\n  &#x2F;&#x2F; baseroute(å¯é€‰)ï¼šåŸºåº§åº”ç”¨åˆ†é…ç»™å­åº”ç”¨çš„åŸºç¡€è·¯ç”±ï¼Œå°±æ˜¯ä¸Šé¢çš„ &#96;&#x2F;my-page&#96;\n  return (\n    &lt;div&gt;\n      &lt;h1&gt;å­åº”ç”¨&lt;&#x2F;h1&gt;\n      &lt;micro-app name&#x3D;&quot;app1&quot; url&#x3D;&quot;http:&#x2F;&#x2F;localhost:8052&#x2F;&quot; baseroute&#x3D;&quot;&#x2F;childApp&quot;&gt;&lt;&#x2F;micro-app&gt;\n    &lt;&#x2F;div&gt;\n  )\n&#125;\nexport default Index\nå¤åˆ¶ä»£ç \n\nå­åº”ç”¨webpack.config devServerå¢åŠ headersæ”¯æŒè·¨åŸŸwebpack.config.js\n  devServer: &#123;\n    headers: &#123;\n      &#39;Access-Control-Allow-Origin&#39;: &#39;*&#39;,\n    &#125;,\n  &#125;,\nå¤åˆ¶ä»£ç \n\nchainWebpack\n  config.devServer.headers(&#123;\n    &#39;Access-Control-Allow-Origin&#39;: &#39;*&#39;,\n  &#125;)\nå¤åˆ¶ä»£ç \n\npublicPathå¦‚æœè‡ªåŠ¨è¡¥å…¨å¤±è´¥ï¼Œå¯ä»¥é‡‡ç”¨è¿è¡Œæ—¶publicPathæ–¹æ¡ˆè§£å†³ã€‚\nè¿™æ˜¯ç”±webpackæä¾›çš„åŠŸèƒ½ï¼Œä¼šåœ¨è¿è¡Œæ—¶åŠ¨æ€è®¾ç½®webpack.publicPath\næ­¥éª¤1: Â åœ¨å­åº”ç”¨srcç›®å½•ä¸‹åˆ›å»ºåç§°ä¸ºpublic-path.jsçš„æ–‡ä»¶ï¼Œå¹¶æ·»åŠ å¦‚ä¸‹å†…å®¹\n&#x2F;&#x2F; __MICRO_APP_ENVIRONMENT__å’Œ__MICRO_APP_PUBLIC_PATH__æ˜¯ç”±micro-appæ³¨å…¥çš„å…¨å±€å˜é‡\nif (window.__MICRO_APP_ENVIRONMENT__) &#123;\n  &#x2F;&#x2F; eslint-disable-next-line\n  __webpack_public_path__ &#x3D; window.__MICRO_APP_PUBLIC_PATH__\n&#125;å¤åˆ¶ä»£ç Errorå¤åˆ¶æˆåŠŸ\nå¤åˆ¶ä»£ç \n\næ­¥éª¤2: Â åœ¨å­åº”ç”¨å…¥å£æ–‡ä»¶çš„æœ€é¡¶éƒ¨å¼•å…¥public-path.js\n&#x2F;&#x2F; entry\nimport &#39;.&#x2F;public-path&#39;å¤åˆ¶ä»£ç Errorå¤åˆ¶æˆåŠŸ\nå¤åˆ¶ä»£ç \n\nå­åº”ç”¨é…ç½®å®Œæ¯•ã€‚\næ•°æ®é€šä¿¡æˆ‘è¿™é‡Œä¸»è¦æ˜¯å®ç°2ç§åœºæ™¯ï¼š1ã€å…±äº«tokenå’Œloginçš„userInfo2ã€å­åº”ç”¨tokenå¤±æ•ˆè¦é€šçŸ¥åŸºåº§åº”ç”¨ï¼Œæ¸…é™¤tokenã€userInfoå¹¶è·³è½¬ç™»å½•é¡µ\næ›´å¤šé€šä¿¡æ–¹å¼ï¼šcangdu.org&#x2F;micro-app&#x2F;dâ€¦\n1ã€å…±äº«tokenå’Œloginçš„userInfoåŸºåº§åº”ç”¨setGlobalDataimport microApp from &#39;@micro-zoe&#x2F;micro-app&#39;\n\n...\nmicroApp.setGlobalData(&#123; userInfo: login.userInfo &#125;)\n...\nå¤åˆ¶ä»£ç \n\nå­åº”ç”¨è·å–æ•°æ®const globalData &#x3D; window.microApp?.getGlobalData() &#x2F;&#x2F; è¿”å›å…¨å±€æ•°æ®\nconsole.log(&#39;å­åº”ç”¨æ‹¿åˆ°çš„ globalData&#39;, globalData);\nå¤åˆ¶ä»£ç \n\n2ã€å­åº”ç”¨tokenå¤±æ•ˆçš„æƒ…å†µå­åº”ç”¨microApp.dispatch&#x2F;&#x2F; å­åº”ç”¨tokenå¤±æ•ˆçš„æ—¶å€™ è§¦å‘ï¼š\nfunction handleTokenFail() &#123;\n  console.log(&#39;å­åº”ç”¨token å¤±æ•ˆ&#39;)\n  window.microApp?.dispatch(&#123; type: &#39;tokenå¤±æ•ˆ&#39; &#125;) &#x2F;&#x2F; å…³é”®ä»£ç \n&#125;\nå¤åˆ¶ä»£ç \n\nåŸºåº§åº”ç”¨ç›‘å¬å…¥å£æ–‡ä»¶å¢åŠ  microApp.addDataListener ä»£ç \nimport ReactDOM from &#39;react-dom&#39;\nimport App from &#39;.&#x2F;App&#39;\nimport microApp from &#39;@micro-zoe&#x2F;micro-app&#39;\n\nmicroApp.start(&#123;\n  &#x2F;&#x2F; sockjs-nodeæŠ¥é”™ è¦ä¸ç„¶ä¼šä¸€ç›´åˆ·æ–°\n  plugins: &#123;\n    modules: &#123;\n      app1: [\n        &#123;\n          loader(code) &#123;\n            if (process.env.NODE_ENV &#x3D;&#x3D;&#x3D; &#39;development&#39; &amp;&amp; code.indexOf(&#39;sockjs-node&#39;) &gt; -1) &#123;\n              code &#x3D; code.replace(&#39;window.location.port&#39;, 8052)\n            &#125;\n            return code\n          &#125;,\n        &#125;,\n      ],\n    &#125;,\n  &#125;,\n&#125;)\n\nfunction dataListener(data) &#123;\n  console.log(&#39;æ¥è‡ªå­åº”ç”¨my-appçš„æ•°æ®&#39;, data)\n&#125;\n\n&#x2F;**\n * ç»‘å®šç›‘å¬å‡½æ•°\n * appName: åº”ç”¨åç§°\n * dataListener: ç»‘å®šå‡½æ•°\n * autoTrigger: åœ¨åˆæ¬¡ç»‘å®šç›‘å¬å‡½æ•°æ—¶å¦‚æœæœ‰ç¼“å­˜æ•°æ®ï¼Œæ˜¯å¦éœ€è¦ä¸»åŠ¨è§¦å‘ä¸€æ¬¡ï¼Œé»˜è®¤ä¸ºfalse\n *&#x2F;\nmicroApp.addDataListener(&#39;app1&#39;, dataListener)\n\n&#x2F;&#x2F; &#x2F;&#x2F; è§£ç»‘ç›‘å¬my-appå­åº”ç”¨çš„å‡½æ•°\n&#x2F;&#x2F; microApp.removeDataListener(appName: string, dataListener: Function)\n\n&#x2F;&#x2F; &#x2F;&#x2F; æ¸…ç©ºæ‰€æœ‰ç›‘å¬appNameå­åº”ç”¨çš„å‡½æ•°\n&#x2F;&#x2F; microApp.clearDataListener(appName: string)\n\nReactDOM.render(&lt;App &#x2F;&gt;, document.getElementById(&#39;root-main&#39;))\nå¤åˆ¶ä»£ç \n\næˆ–è€…microApp.addDataListenerå’ŒmicroApp.removeDataListenerä¹Ÿå¯ä»¥å†™åœ¨æœ€å¤–é¢çš„layouté‡Œ\næ€»ç»“å…¶å®å¤§éƒ¨åˆ†çš„ç”¨æ³•å’Œä¿®æ”¹ï¼Œå®˜æ–¹æ–‡æ¡£éƒ½å·²ç»ä»‹ç»çš„éå¸¸è¯¦ç»†äº†ï¼Œè¿™é‡Œåªæ˜¯ç»“åˆè‡ªå·±çš„é¡¹ç›®çš„ä¸€äº›ä¿®æ”¹ï¼Œå¯ä»¥çœ‹åˆ°micro-appç›¸æ¯”qiankunå¯¹é¡¹ç›®å…¥ä¾µéå¸¸å°‘ï¼Œè€Œä¸”æ¶‰åŠåˆ°çš„apiå¾ˆå°‘ä¸”æ›´å®¹æ˜“ç†è§£ã€‚åé¢ä¼šæŒç»­å…³æ³¨ï¼šï¼‰\n","slug":"è®°å½•å¾®å‰ç«¯micro-appçš„é…ç½®","date":"2022-09-23T14:31:25.000Z","categories_index":"","tags_index":"","author_index":"Beastrong"},{"id":"a110b92c4e47b4fc49cc33cb7f9c3765","title":"å¾®å‰ç«¯å®æˆ˜ç¯‡","content":"ä¸€.ä¸ºä»€ä¹ˆéœ€è¦å¾®å‰ç«¯?æˆ‘ä»¬é€šè¿‡3W(what,why,how)çš„æ–¹å¼æ¥è®²è§£å¾®å‰ç«¯\nWhat?ä»€ä¹ˆæ˜¯å¾®å‰ç«¯?\nå¾®å‰ç«¯å°±æ˜¯å°†ä¸åŒçš„åŠŸèƒ½æŒ‰ç…§ä¸åŒçš„ç»´åº¦æ‹†åˆ†æˆå¤šä¸ªå­åº”ç”¨ã€‚é€šè¿‡ä¸»åº”ç”¨æ¥åŠ è½½è¿™äº›å­åº”ç”¨ã€‚\nå¾®å‰ç«¯çš„æ ¸å¿ƒåœ¨äºæ‹†, æ‹†å®Œååœ¨åˆ!\nWhy?ä¸ºä»€ä¹ˆå»ä½¿ç”¨ä»–?\nä¸åŒå›¢é˜Ÿé—´å¼€å‘åŒä¸€ä¸ªåº”ç”¨æŠ€æœ¯æ ˆä¸åŒæ€ä¹ˆç ´ï¼Ÿ\nå¸Œæœ›æ¯ä¸ªå›¢é˜Ÿéƒ½å¯ä»¥ç‹¬ç«‹å¼€å‘ï¼Œç‹¬ç«‹éƒ¨ç½²æ€ä¹ˆç ´ï¼Ÿ\né¡¹ç›®ä¸­è¿˜éœ€è¦è€çš„åº”ç”¨ä»£ç æ€ä¹ˆç ´ï¼Ÿ\n\næˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥å°†ä¸€ä¸ªåº”ç”¨åˆ’åˆ†æˆè‹¥å¹²ä¸ªå­åº”ç”¨ï¼Œå°†å­åº”ç”¨æ‰“åŒ…æˆä¸€ä¸ªä¸ªçš„libã€‚å½“è·¯å¾„åˆ‡æ¢æ—¶åŠ è½½ä¸åŒçš„å­åº”ç”¨ã€‚è¿™æ ·æ¯ä¸ªå­åº”ç”¨éƒ½æ˜¯ç‹¬ç«‹çš„ï¼ŒæŠ€æœ¯æ ˆä¹Ÿä¸ç”¨åšé™åˆ¶äº†ï¼ä»è€Œè§£å†³äº†å‰ç«¯ååŒå¼€å‘é—®é¢˜\nHow?æ€æ ·è½åœ°å¾®å‰ç«¯?\n2018å¹´ Single-SPAè¯ç”Ÿäº†ï¼ŒÂ single-spaæ˜¯ä¸€ä¸ªç”¨äºå‰ç«¯å¾®æœåŠ¡åŒ–çš„JavaScriptå‰ç«¯è§£å†³æ–¹æ¡ˆ (æœ¬èº«æ²¡æœ‰å¤„ç†æ ·å¼éš”ç¦»ï¼Œjsæ‰§è¡Œéš”ç¦») å®ç°äº†è·¯ç”±åŠ«æŒå’Œåº”ç”¨åŠ è½½\n2019å¹´Â qiankunåŸºäºSingle-SPA, æä¾›äº†æ›´åŠ å¼€ç®±å³ç”¨çš„Â APIÂ ï¼ˆsingle-spaÂ +Â sandboxÂ +Â import-html-entryï¼‰ åšåˆ°äº†ï¼ŒæŠ€æœ¯æ ˆæ— å…³ã€å¹¶ä¸”æ¥å…¥ç®€å•ï¼ˆåƒiframeä¸€æ ·ç®€å•ï¼‰\n\n\n\n\n\n\n\n\n\næ€»ç»“ï¼šå­åº”ç”¨å¯ä»¥ç‹¬ç«‹æ„å»ºï¼Œè¿è¡Œæ—¶åŠ¨æ€åŠ è½½,ä¸»å­åº”ç”¨å®Œå…¨è§£è€¦ï¼ŒæŠ€æœ¯æ ˆæ— å…³ï¼Œé çš„æ˜¯åè®®æ¥å…¥ï¼ˆå­åº”ç”¨å¿…é¡»å¯¼å‡º bootstrapã€mountã€unmountæ–¹æ³•ï¼‰\nè¿™é‡Œå…ˆå›ç­”å¤§å®¶è‚¯å®šä¼šé—®çš„é—®é¢˜ï¼š\nè¿™ä¸æ˜¯iframeå—ï¼Ÿ\n\nå¦‚æœä½¿ç”¨iframeï¼Œiframeä¸­çš„å­åº”ç”¨åˆ‡æ¢è·¯ç”±æ—¶ç”¨æˆ·åˆ·æ–°é¡µé¢å°±å°´å°¬äº†ã€‚\n\nåº”ç”¨é€šä¿¡:\n\nåŸºäºURLæ¥è¿›è¡Œæ•°æ®ä¼ é€’ï¼Œä½†æ˜¯ä¼ é€’æ¶ˆæ¯èƒ½åŠ›å¼±\nåŸºäºCustomEventå®ç°é€šä¿¡\nåŸºäºpropsä¸»å­åº”ç”¨é—´é€šä¿¡\nä½¿ç”¨å…¨å±€å˜é‡ã€Reduxè¿›è¡Œé€šä¿¡\n\nå…¬å…±ä¾èµ–:\n\nCDNÂ - externals\nwebpackè”é‚¦æ¨¡å—\n\näºŒ .SingleSpaå®æˆ˜1.æ„å»ºå­åº”ç”¨vue create spa-vue\nnpm install single-spa-vue\nå¤åˆ¶ä»£ç \n\nimport singleSpaVue from &#39;single-spa-vue&#39;;\nconst appOptions &#x3D; &#123;\n   el: &#39;#vue&#39;,\n   router,\n   render: h &#x3D;&gt; h(App)\n&#125;\n&#x2F;&#x2F; åœ¨éå­åº”ç”¨ä¸­æ­£å¸¸æŒ‚è½½åº”ç”¨\nif(!window.singleSpaNavigate)&#123;\n delete appOptions.el;\n new Vue(appOptions).$mount(&#39;#app&#39;);\n&#125;\nconst vueLifeCycle &#x3D; singleSpaVue(&#123;\n   Vue,\n   appOptions\n&#125;);\n&#x2F;&#x2F; å­åº”ç”¨å¿…é¡»å¯¼å‡º ä»¥ä¸‹ç”Ÿå‘½å‘¨æœŸ bootstrapã€mountã€unmount\nexport const bootstrap &#x3D; vueLifeCycle.bootstrap;\nexport const mount &#x3D; vueLifeCycle.mount;\nexport const unmount &#x3D; vueLifeCycle.unmount;\nexport default vueLifeCycle;\nå¤åˆ¶ä»£ç \n\nconst router &#x3D; new VueRouter(&#123;\n  mode: &#39;history&#39;,\n  base: &#39;&#x2F;vue&#39;,\n  routes\n&#125;)\nå¤åˆ¶ä»£ç \n\n\n\n\n\n\n\n\n\n\né…ç½®å­è·¯ç”±åŸºç¡€è·¯å¾„\n2.é…ç½®åº“æ‰“åŒ…module.exports &#x3D; &#123;\n    configureWebpack: &#123;\n        output: &#123;\n            library: &#39;singleVue&#39;,\n            libraryTarget: &#39;umd&#39;\n        &#125;,\n        devServer:&#123;\n            port:10000\n        &#125;\n    &#125;\n&#125;\nå¤åˆ¶ä»£ç \n\n\n\n\n\n\n\n\n\n\nå°†å­æ¨¡å—æ‰“åŒ…æˆç±»åº“\n3.ä¸»åº”ç”¨æ­å»º&lt;div id&#x3D;&quot;nav&quot;&gt;\n    &lt;router-link to&#x3D;&quot;&#x2F;vue&quot;&gt;vueé¡¹ç›®&lt;&#x2F;router-link&gt; \n    &lt;div id&#x3D;&quot;vue&quot;&gt;&lt;&#x2F;div&gt;\n&lt;&#x2F;div&gt;\nå¤åˆ¶ä»£ç \n\n\n\n\n\n\n\n\n\n\nå°†å­åº”ç”¨æŒ‚è½½åˆ°id=&quot;vue&quot;æ ‡ç­¾ä¸­\nimport Vue from &#39;vue&#39;\nimport App from &#39;.&#x2F;App.vue&#39;\nimport router from &#39;.&#x2F;router&#39;\nimport ElementUI from &#39;element-ui&#39;;\nimport &#39;element-ui&#x2F;lib&#x2F;theme-chalk&#x2F;index.css&#39;;\nVue.use(ElementUI);\nconst loadScript &#x3D; async (url)&#x3D;&gt; &#123;\n  await new Promise((resolve,reject)&#x3D;&gt;&#123;\n    const script &#x3D; document.createElement(&#39;script&#39;);\n    script.src &#x3D; url;\n    script.onload &#x3D; resolve;\n    script.onerror &#x3D; reject;\n    document.head.appendChild(script)\n  &#125;);\n&#125;\nimport &#123; registerApplication, start &#125; from &#39;single-spa&#39;;\nregisterApplication(\n    &#39;singleVue&#39;,\n    async ()&#x3D;&gt;&#123;\n        await loadScript(&#39;http:&#x2F;&#x2F;localhost:10000&#x2F;js&#x2F;chunk-vendors.js&#39;);\n        await loadScript(&#39;http:&#x2F;&#x2F;localhost:10000&#x2F;js&#x2F;app.js&#39;);\n        return window.singleVue\n    &#125;,\n    location &#x3D;&gt; location.pathname.startsWith(&#39;&#x2F;vue&#39;)\n)\nstart();\nnew Vue(&#123;\n  router,\n  render: h &#x3D;&gt; h(App)\n&#125;).$mount(&#39;#app&#39;)\nå¤åˆ¶ä»£ç \n\n4.åŠ¨æ€è®¾ç½®å­åº”ç”¨publicPathif(window.singleSpaNavigate)&#123;\n  __webpack_public_path__ &#x3D; &#39;http:&#x2F;&#x2F;localhost:10000&#x2F;&#39;\n&#125;\nå¤åˆ¶ä»£ç \n\nä¸‰.qiankunå®æˆ˜1.ä¸»åº”ç”¨ç¼–å†™&lt;el-menu :router&#x3D;&quot;true&quot; mode&#x3D;&quot;horizontal&quot;&gt;\n    &lt;el-menu-item index&#x3D;&quot;&#x2F;&quot;&gt;é¦–é¡µ&lt;&#x2F;el-menu-item&gt;\n    &lt;el-menu-item index&#x3D;&quot;&#x2F;vue&quot;&gt;vueåº”ç”¨&lt;&#x2F;el-menu-item&gt;\n    &lt;el-menu-item index&#x3D;&quot;&#x2F;react&quot;&gt;reactåº”ç”¨&lt;&#x2F;el-menu-item&gt;\n&lt;&#x2F;el-menu&gt;\n&lt;router-view v-show&#x3D;&quot;$route.name&quot;&gt;&lt;&#x2F;router-view&gt;\n&lt;div v-show&#x3D;&quot;!$route.name&quot; id&#x3D;&quot;vue&quot;&gt;&lt;&#x2F;div&gt;\n&lt;div v-show&#x3D;&quot;!$route.name&quot; id&#x3D;&quot;react&quot;&gt;&lt;&#x2F;div&gt;\nå¤åˆ¶ä»£ç \n\n2.æ³¨å†Œå­åº”ç”¨import &#123;registerMicroApps,start&#125; from &#39;qiankun&#39;\nconst apps &#x3D; [  &#123;    name:&#39;vueApp&#39;,    entry:&#39;&#x2F;&#x2F;localhost:10000&#39;,    container:&#39;#vue&#39;,    activeRule:&#39;&#x2F;vue&#39;  &#125;,  &#123;    name:&#39;reactApp&#39;,    entry:&#39;&#x2F;&#x2F;localhost:20000&#39;,    container:&#39;#react&#39;,    activeRule:&#39;&#x2F;react&#39;  &#125;]\nregisterMicroApps(apps);\nstart();\nå¤åˆ¶ä»£ç \n\n3.å­Vueåº”ç”¨let instance &#x3D; null;\nfunction render()&#123;\n  instance &#x3D; new Vue(&#123;\n    router,\n    render: h &#x3D;&gt; h(App)\n  &#125;).$mount(&#39;#app&#39;)\n&#125;\nif(window.__POWERED_BY_QIANKUN__)&#123;\n  __webpack_public_path__ &#x3D; window.__INJECTED_PUBLIC_PATH_BY_QIANKUN__;\n&#125;\nif(!window.__POWERED_BY_QIANKUN__)&#123;render()&#125;\nexport async function bootstrap()&#123;&#125;\nexport async function mount(props)&#123;render();&#125;\nexport async function unmount()&#123;instance.$destroy();&#125;\nå¤åˆ¶ä»£ç \n\næ‰“åŒ…é…ç½®\nmodule.exports &#x3D; &#123;\n    devServer:&#123;\n        port:10000,\n        headers:&#123;\n            &#39;Access-Control-Allow-Origin&#39;:&#39;*&#39;\n        &#125;\n    &#125;,\n    configureWebpack:&#123;\n        output:&#123;\n            library:&#39;vueApp&#39;,\n            libraryTarget:&#39;umd&#39;\n        &#125;\n    &#125;\n&#125;\nå¤åˆ¶ä»£ç \n\n4.å­Reactåº”ç”¨import React from &#39;react&#39;;\nimport ReactDOM from &#39;react-dom&#39;;\nimport &#39;.&#x2F;index.css&#39;;\nimport App from &#39;.&#x2F;App&#39;;\nfunction render() &#123;\n  ReactDOM.render(\n    &lt;React.StrictMode&gt;\n      &lt;App &#x2F;&gt;\n    &lt;&#x2F;React.StrictMode&gt;,\n    document.getElementById(&#39;root&#39;)\n  );\n&#125;\nif(!window.__POWERED_BY_QIANKUN__)&#123;\n  render()\n&#125;\nexport async function bootstrap() &#123;&#125;\nexport async function mount() &#123;render();&#125;\nexport async function unmount() &#123;\n  ReactDOM.unmountComponentAtNode(document.getElementById(&quot;root&quot;));\n&#125;\nå¤åˆ¶ä»£ç \n\né‡å†™reactä¸­çš„webpacké…ç½®æ–‡ä»¶ (config-overrides.js)\nyarn add react-app-rewired --save-dev\nå¤åˆ¶ä»£ç \n\nmodule.exports &#x3D; &#123;\n  webpack: (config) &#x3D;&gt; &#123;\n    config.output.library &#x3D; &#96;reactApp&#96;;\n    config.output.libraryTarget &#x3D; &quot;umd&quot;;\n    config.output.publicPath &#x3D; &#39;http:&#x2F;&#x2F;localhost:20000&#x2F;&#39;\n    return config\n  &#125;,\n  devServer: function (configFunction) &#123;\n    return function (proxy, allowedHost) &#123;\n      const config &#x3D; configFunction(proxy, allowedHost);\n      config.headers &#x3D; &#123;\n        &quot;Access-Control-Allow-Origin&quot;: &quot;*&quot;,\n      &#125;;\n      return config;\n    &#125;;\n  &#125;,\n&#125;;\nå¤åˆ¶ä»£ç \n\né…ç½®.envæ–‡ä»¶\nPORT&#x3D;20000\nWDS_SOCKET_PORT&#x3D;20000\nå¤åˆ¶ä»£ç \n\nReactè·¯ç”±é…ç½®\nimport &#123; BrowserRouter, Route, Link &#125; from &quot;react-router-dom&quot;\nconst BASE_NAME &#x3D; window.__POWERED_BY_QIANKUN__ ? &quot;&#x2F;react&quot; : &quot;&quot;;\nfunction App() &#123;\n  return (\n    &lt;BrowserRouter basename&#x3D;&#123;BASE_NAME&#125;&gt;\n      &lt;Link to&#x3D;&quot;&#x2F;&quot;&gt;é¦–é¡µ&lt;&#x2F;Link&gt;\n      &lt;Link to&#x3D;&quot;&#x2F;about&quot;&gt;å…³äº&lt;&#x2F;Link&gt;\n      &lt;Route path&#x3D;&quot;&#x2F;&quot; exact render&#x3D;&#123;() &#x3D;&gt; &lt;h1&gt;hello home&lt;&#x2F;h1&gt;&#125;&gt;&lt;&#x2F;Route&gt;\n      &lt;Route path&#x3D;&quot;&#x2F;about&quot; render&#x3D;&#123;() &#x3D;&gt; &lt;h1&gt;hello about&lt;&#x2F;h1&gt;&#125;&gt;&lt;&#x2F;Route&gt;\n    &lt;&#x2F;BrowserRouter&gt;\n  );\n&#125;\nå¤åˆ¶ä»£ç \n\nå››.CSSéš”ç¦»æ–¹æ¡ˆå­åº”ç”¨ä¹‹é—´æ ·å¼éš”ç¦»ï¼š\n\nDynamic StylesheetåŠ¨æ€æ ·å¼è¡¨ï¼Œå½“åº”ç”¨åˆ‡æ¢æ—¶ç§»é™¤è€åº”ç”¨æ ·å¼ï¼Œæ·»åŠ æ–°åº”ç”¨æ ·å¼\n\nä¸»åº”ç”¨å’Œå­åº”ç”¨ä¹‹é—´çš„æ ·å¼éš”ç¦»ï¼š\n\nBEM(Block Element Modifier) çº¦å®šé¡¹ç›®å‰ç¼€\nCSS-ModulesÂ æ‰“åŒ…æ—¶ç”Ÿæˆä¸å†²çªçš„é€‰æ‹©å™¨å\nShadow DOMÂ çœŸæ­£æ„ä¹‰ä¸Šçš„éš”ç¦»\ncss-in-js\n\n\nlet shadowDom &#x3D; shadow.attachShadow(&#123; mode: &#39;open&#39; &#125;);\nlet pElement &#x3D; document.createElement(&#39;p&#39;);\npElement.innerHTML &#x3D; &#39;hello world&#39;;\nlet styleElement &#x3D; document.createElement(&#39;style&#39;);\nstyleElement.textContent &#x3D; &#96;\n    p&#123;color:red&#125;\n&#96;\nshadowDom.appendChild(pElement);\nshadowDom.appendChild(styleElement)\nå¤åˆ¶ä»£ç \n\n\n\n\n\n\n\n\n\n\nshadow DOM å¯ä»¥å®ç°çœŸæ­£çš„éš”ç¦»æœºåˆ¶\näº”.JSæ²™ç®±æœºåˆ¶\nå½“è¿è¡Œå­åº”ç”¨æ—¶åº”è¯¥è·‘åœ¨å†…éƒ¨æ²™ç®±ç¯å¢ƒä¸­\n\nå¿«ç…§æ²™ç®±ï¼Œåœ¨åº”ç”¨æ²™ç®±æŒ‚è½½æˆ–å¸è½½æ—¶è®°å½•å¿«ç…§ï¼Œåœ¨åˆ‡æ¢æ—¶ä¾æ®å¿«ç…§æ¢å¤ç¯å¢ƒ (æ— æ³•æ”¯æŒå¤šå®ä¾‹)\nProxy ä»£ç†æ²™ç®±,ä¸å½±å“å…¨å±€ç¯å¢ƒ\n\n1).å¿«ç…§æ²™ç®±\n1.æ¿€æ´»æ—¶å°†å½“å‰windowå±æ€§è¿›è¡Œå¿«ç…§å¤„ç†\n2.å¤±æ´»æ—¶ç”¨å¿«ç…§ä¸­çš„å†…å®¹å’Œå½“å‰windowå±æ€§æ¯”å¯¹\n3.å¦‚æœå±æ€§å‘ç”Ÿå˜åŒ–ä¿å­˜åˆ°modifyPropsMapä¸­ï¼Œå¹¶ç”¨å¿«ç…§è¿˜åŸwindowå±æ€§\n4.åœ¨æ¬¡æ¿€æ´»æ—¶ï¼Œå†æ¬¡è¿›è¡Œå¿«ç…§ï¼Œå¹¶ç”¨ä¸Šæ¬¡ä¿®æ”¹çš„ç»“æœè¿˜åŸwindow\n\nclass SnapshotSandbox &#123;\n    constructor() &#123;\n        this.proxy &#x3D; window; \n        this.modifyPropsMap &#x3D; &#123;&#125;; &#x2F;&#x2F; ä¿®æ”¹äº†é‚£äº›å±æ€§\n        this.active();\n    &#125;\n    active() &#123;\n        this.windowSnapshot &#x3D; &#123;&#125;; &#x2F;&#x2F; windowå¯¹è±¡çš„å¿«ç…§\n        for (const prop in window) &#123;\n            if (window.hasOwnProperty(prop)) &#123;\n                &#x2F;&#x2F; å°†windowä¸Šçš„å±æ€§è¿›è¡Œæ‹ç…§\n                this.windowSnapshot[prop] &#x3D; window[prop];\n            &#125;\n        &#125;\n        Object.keys(this.modifyPropsMap).forEach(p &#x3D;&gt; &#123;\n            window[p] &#x3D; this.modifyPropsMap[p];\n        &#125;);\n    &#125;\n    inactive() &#123;\n        for (const prop in window) &#123; &#x2F;&#x2F; diff å·®å¼‚\n            if (window.hasOwnProperty(prop)) &#123;\n                &#x2F;&#x2F; å°†ä¸Šæ¬¡æ‹ç…§çš„ç»“æœå’Œæœ¬æ¬¡windowå±æ€§åšå¯¹æ¯”\n                if (window[prop] !&#x3D;&#x3D; this.windowSnapshot[prop]) &#123;\n                    &#x2F;&#x2F; ä¿å­˜ä¿®æ”¹åçš„ç»“æœ\n                    this.modifyPropsMap[prop] &#x3D; window[prop]; \n                    &#x2F;&#x2F; è¿˜åŸwindow\n                    window[prop] &#x3D; this.windowSnapshot[prop]; \n                &#125;\n            &#125;\n        &#125;\n    &#125;\n&#125;\nå¤åˆ¶ä»£ç \n\nlet sandbox &#x3D; new SnapshotSandbox();\n((window) &#x3D;&gt; &#123;\n    window.a &#x3D; 1;\n    window.b &#x3D; 2;\n    window.c &#x3D; 3\n    console.log(a,b,c)\n    sandbox.inactive();\n    console.log(a,b,c)\n&#125;)(sandbox.proxy);\nå¤åˆ¶ä»£ç \n\n\n\n\n\n\n\n\n\n\nå¿«ç…§æ²™ç®±åªèƒ½é’ˆå¯¹å•å®ä¾‹åº”ç”¨åœºæ™¯,å¦‚æœæ˜¯å¤šä¸ªå®ä¾‹åŒæ—¶æŒ‚è½½çš„æƒ…å†µåˆ™æ— æ³•è§£å†³ï¼Œåªèƒ½é€šè¿‡proxyä»£ç†æ²™ç®±æ¥å®ç°\n2.Proxy ä»£ç†æ²™ç®±class ProxySandbox &#123;\n    constructor() &#123;\n        const rawWindow &#x3D; window;\n        const fakeWindow &#x3D; &#123;&#125;\n        const proxy &#x3D; new Proxy(fakeWindow, &#123;\n            set(target, p, value) &#123;\n                target[p] &#x3D; value;\n                return true\n            &#125;,\n            get(target, p) &#123;\n                return target[p] || rawWindow[p];\n            &#125;\n        &#125;);\n        this.proxy &#x3D; proxy\n    &#125;\n&#125;\nlet sandbox1 &#x3D; new ProxySandbox();\nlet sandbox2 &#x3D; new ProxySandbox();\nwindow.a &#x3D; 1;\n((window) &#x3D;&gt; &#123;\n    window.a &#x3D; &#39;hello&#39;;\n    console.log(window.a)\n&#125;)(sandbox1.proxy);\n((window) &#x3D;&gt; &#123;\n    window.a &#x3D; &#39;world&#39;;\n    console.log(window.a)\n&#125;)(sandbox2.proxy);\nå¤åˆ¶ä»£ç \n\n\n\n\n\n\n\n\n\n\næ¯ä¸ªåº”ç”¨éƒ½åˆ›å»ºä¸€ä¸ªproxyæ¥ä»£ç†windowï¼Œå¥½å¤„æ˜¯æ¯ä¸ªåº”ç”¨éƒ½æ˜¯ç›¸å¯¹ç‹¬ç«‹ï¼Œä¸éœ€è¦ç›´æ¥æ›´æ”¹å…¨å±€windowå±æ€§ï¼\n","slug":"å¾®å‰ç«¯å®æˆ˜ç¯‡","date":"2022-09-15T15:16:31.000Z","categories_index":"","tags_index":"","author_index":"Beastrong"},{"id":"d15af8effdd73a8b6f9c6e84242a848d","title":"MJMLé‚®ä»¶æ¨¡ç‰ˆå®æˆ˜","content":"\nå‰è¨€æœ€è¿‘ç”»ä¸ªé‚®ä»¶æ¨¡ç‰ˆä½¿ç”¨tableå¸ƒå±€ä¸€è¨€éš¾å°½ï¼Œè¿˜è¦å…¼å®¹å„ç§é‚®ä»¶å‚å•†ï¼Œæœ€åæ‰¾äº†ä¸€ä¸ªé‚®ä»¶æ¨¡ç‰ˆæ¥å¤„ç†ã€‚\nMJMLMJMLæ˜¯ä¸€ç§æ ‡è®°è¯­è¨€ï¼Œæ—¨åœ¨å‡å°‘ç¼–å†™å“åº”ç”µå­é‚®ä»¶çš„ç—›è‹¦ã€‚å®ƒçš„è¯­ä¹‰è¯­æ³•ä½¿å®ƒç®€å•æ˜äº†ï¼Œå®ƒä¸°å¯Œçš„æ ‡å‡†ç»„ä»¶åº“åŠ å¿«äº†æ‚¨çš„å¼€å‘æ—¶é—´ï¼Œå¹¶å‡è½»äº†æ‚¨çš„ç”µå­é‚®ä»¶ä»£ç åº“ã€‚MJMLçš„å¼€æºå¼•æ“ç”Ÿæˆç¬¦åˆæœ€ä½³å®è·µçš„é«˜è´¨é‡å“åº”HTMLã€‚\nç¯å¢ƒæ­å»ºåˆ›å»ºä¸ªæ–‡ä»¶å¤¹demoÂ -&gt; è¿›å…¥demoç›®å½•\nåˆå§‹åŒ–é¡¹ç›®\nnpm init -y\nå¤åˆ¶ä»£ç \n\nå®‰è£…mjmlåŒ…\nnpm install mjml\nå¤åˆ¶ä»£ç \n\nåˆ›å»ºdemo.mjmlæ–‡ä»¶\n\né¡µé¢ç¼–å†™vscode å’Œ webstorméƒ½æœ‰é¢„è§ˆæ’ä»¶ï¼Œç›´æ¥æœç´¢MJMLå³å¯ã€‚ å»ºè®®è¿˜æ˜¯åœ¨å®˜ç½‘åœ¨çº¿ç¼–å†™ï¼Œç„¶ååœ¨å¤åˆ¶åˆ°ä»£ç ä¿å­˜ã€‚\nåœ¨çº¿ç¼–å†™åœ°å€:Â mjml.io&#x2F;try-it-live\nå½“ç„¶ä½ ä¹Ÿå¯ä»¥ç”¨å¯è§†åŒ–ç•Œé¢æ¥ç¼–è¾‘ï¼šgrapesjs.com&#x2F;demo-mjml.hâ€¦\nè¿™æ˜¯ä¸€å°å›å¤é‚®ä»¶\n\nåƒæ™®é€šçš„HTMLæ¨¡æ¿ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªæ¨¡æ¿åˆ†æˆä¸åŒçš„éƒ¨åˆ†ä»¥é€‚åº”ç½‘æ ¼ã€‚ ç”µå­é‚®ä»¶æ­£æ–‡ï¼Œç”±mj-bodyæ ‡è®°åŒ…å«æ–‡æ¡£çš„å…¨éƒ¨å†…å®¹ï¼š\n\n&lt;mjml&gt;\n  &lt;mj-body&gt;\n    to do..\n  &lt;&#x2F;mj-body&gt;\n&lt;&#x2F;mjml&gt;\nå¤åˆ¶ä»£ç \n\nä»è¿™é‡Œï¼Œæ‚¨å¯ä»¥é¦–å…ˆå®šä¹‰æ‚¨çš„åˆ†åŒºï¼š\n\n&lt;mjml&gt;\n  &lt;mj-body&gt;\n    &lt;mj-section&gt;\n      1\n    &lt;&#x2F;mj-section&gt;\n    &lt;mj-section&gt;\n      2\n    &lt;&#x2F;mj-section&gt;\n    &lt;mj-section&gt;\n      3\n    &lt;&#x2F;mj-section&gt;\n    &lt;mj-section&gt;\n      4\n    &lt;&#x2F;mj-section&gt;\n  &lt;&#x2F;mj-body&gt;\n&lt;&#x2F;mjml&gt;\nå¤åˆ¶ä»£ç \n\nåœ¨ä»»ä½•éƒ¨åˆ†ä¸­ï¼Œéƒ½åº”è¯¥æœ‰åˆ—ï¼ˆå³ä½¿æ‚¨åªéœ€è¦ä¸€åˆ—ï¼‰ï¼Œåˆ—æ˜¯ä½¿MJMLå“åº”çš„åŸå› ã€‚\n\n&lt;mjml&gt;\n  &lt;mj-body&gt;\n     &lt;!-- 1 --&gt;\n     &lt;mj-section background-url&#x3D;&quot;http:&#x2F;&#x2F;1.bp.blogspot.com&#x2F;-TPrfhxbYpDY&#x2F;Uh3Refzk02I&#x2F;AAAAAAAALw8&#x2F;5sUJ0UUGYuw&#x2F;s1600&#x2F;New+York+in+The+1960&#39;s+-+70&#39;s+(2).jpg&quot; background-size&#x3D;&quot;cover&quot; background-repeat&#x3D;&quot;no-repeat&quot;&gt;\n      &lt;mj-column width&#x3D;&quot;600px&quot;&gt;\n        &lt;mj-text align&#x3D;&quot;center&quot; color&#x3D;&quot;#fff&quot; font-size&#x3D;&quot;40px&quot; font-family&#x3D;&quot;Helvetica Neue&quot;&gt;Subject&lt;&#x2F;mj-text&gt;\n      &lt;&#x2F;mj-column&gt;\n    &lt;&#x2F;mj-section&gt;\n    &lt;!-- 2 --&gt;\n    &lt;mj-section&gt;\n      &lt;mj-column &gt;\n        &lt;mj-text color&#x3D;&quot;#000&quot; font-size&#x3D;&quot;16px&quot; font-family&#x3D;&quot;Helvetica Neue&quot;&gt;Lorem ipsum dolor sit amet,consectetur adipiscing elit.sit amet,consectetur adipiscing elit.sit amet,consectetur adipiscing elit.sit amet,consectetur adipiscing elit.sit amet,consectetur adipiscing elit.&lt;&#x2F;mj-text&gt;\n      &lt;&#x2F;mj-column&gt;\n    &lt;&#x2F;mj-section&gt;\n    &lt;!-- 3 --&gt;\n    &lt;mj-section&gt;\n      &lt;mj-column &gt;\n       &lt;mj-divider padding-left&#x3D;&quot;0px&quot; padding-right&#x3D;&quot;0px&quot;&gt;&lt;&#x2F;mj-divider&gt;\n      &lt;&#x2F;mj-column&gt;\n    &lt;&#x2F;mj-section&gt;\n    &lt;!-- 4 --&gt;\n    &lt;mj-section background-color&#x3D;&quot;#ffffff&quot;  full-width&#x3D;&quot;full-width&quot;&gt;\n      &lt;mj-column vertical-align&#x3D;&quot;top&quot; width&#x3D;&quot;33.33333333333333%&quot;&gt;\n        &lt;mj-image src&#x3D;&quot;http:&#x2F;&#x2F;191n.mj.am&#x2F;img&#x2F;191n&#x2F;1t&#x2F;hs.png&quot; alt&#x3D;&quot;&quot; width&#x3D;&quot;50px&quot;&gt;&lt;&#x2F;mj-image&gt;\n        &lt;mj-text align&#x3D;&quot;center&quot; color&#x3D;&quot;#9da3a3&quot; font-size&#x3D;&quot;11px&quot; padding-bottom&#x3D;&quot;30px&quot;&gt;&lt;span style&#x3D;&quot;font-size: 14px; color: #e85034&quot;&gt;Best audience&lt;&#x2F;span&gt;&lt;br &#x2F;&gt;&lt;br &#x2F;&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque eleifend sagittis nunc, et fermentum est ullamcorper dignissim.&lt;&#x2F;mj-text&gt;\n      &lt;&#x2F;mj-column&gt;\n      &lt;mj-column vertical-align&#x3D;&quot;top&quot; width&#x3D;&quot;33.33333333333333%&quot;&gt;\n        &lt;mj-image src&#x3D;&quot;http:&#x2F;&#x2F;191n.mj.am&#x2F;img&#x2F;191n&#x2F;1t&#x2F;hm.png&quot; alt&#x3D;&quot;&quot; width&#x3D;&quot;50px&quot;&gt;&lt;&#x2F;mj-image&gt;\n        &lt;mj-text align&#x3D;&quot;center&quot; color&#x3D;&quot;#9da3a3&quot; font-size&#x3D;&quot;11px&quot; padding-bottom&#x3D;&quot;30px&quot;&gt;&lt;span style&#x3D;&quot;font-size: 14px; color: #e85034&quot;&gt;Higher rates&lt;&#x2F;span&gt;&lt;br &#x2F;&gt;&lt;br &#x2F;&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque eleifend sagittis nunc, et fermentum est ullamcorper dignissim.&lt;&#x2F;mj-text&gt;\n      &lt;&#x2F;mj-column&gt;\n      &lt;mj-column vertical-align&#x3D;&quot;top&quot; width&#x3D;&quot;33.33333333333333%&quot;&gt;\n        &lt;mj-image src&#x3D;&quot;http:&#x2F;&#x2F;191n.mj.am&#x2F;img&#x2F;191n&#x2F;1t&#x2F;hl.png&quot; alt&#x3D;&quot;&quot; width&#x3D;&quot;50px&quot;&gt;&lt;&#x2F;mj-image&gt;\n        &lt;mj-text align&#x3D;&quot;center&quot; color&#x3D;&quot;#9da3a3&quot; font-size&#x3D;&quot;11px&quot; padding-bottom&#x3D;&quot;30px&quot; padding-top&#x3D;&quot;3px&quot;&gt;&lt;span style&#x3D;&quot;font-size: 14px; color: #e85034&quot;&gt;24&#x2F;7 Support&lt;&#x2F;span&gt;&lt;br &#x2F;&gt;&lt;br &#x2F;&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque eleifend sagittis nunc, et fermentum est ullamcorper dignissim.&lt;&#x2F;mj-text&gt;\n      &lt;&#x2F;mj-column&gt;\n    &lt;&#x2F;mj-section&gt;\n  &lt;&#x2F;mj-body&gt;\n&lt;&#x2F;mjml&gt;\nå¤åˆ¶ä»£ç \n\nè‡³æ­¤æˆ‘ä»¬å°±å¾—åˆ°ä¸€ä¸ªå“åº”å¼å¸ƒå±€çš„æ¨¡æ¿ã€‚\nç¼–è¯‘mjml demo.mjml -o demo.html\nå¤åˆ¶ä»£ç \n\n\nç¼–è¯‘å®Œæˆå³å¯çœ‹åˆ°æˆ‘ä»¬ç”Ÿæˆçš„htmlï¼Œæ‰“å¼€æµè§ˆå™¨è¿›è¡Œé¢„è§ˆã€‚\nå‘é€æµ‹è¯•é‚®ä»¶è¿™é‡Œé‡‡ç”¨Â nodemaileråŒ…ï¼Œæ¥å‘é€é‚®ä»¶ã€‚ å®˜ç½‘åœ°å€:Â nodemailer.\nnpm install nodemailer fs path\nå¤åˆ¶ä»£ç \n\n&#x2F;&#x2F; send.js\n\nvar nodemailer &#x3D; require(&#39;nodemailer&#39;);\nvar fs &#x3D; require(&#39;fs&#39;)\nvar path &#x3D; require(&#39;path&#39;)\nvar transporter &#x3D; nodemailer.createTransport(&#123;\n    service: &#39;qq&#39;,\n    auth: &#123;\n        user: &#39;11111111@qq.com&#39;, &#x2F;&#x2F; ä½ çš„è´¦å·\n        pass: &#39;xxxxxxxx&#39; &#x2F;&#x2F;ä½ çš„qqæˆæƒç \n    &#125;\n&#125;);\nvar mailOptions &#x3D; &#123;\n    from: &#39;&quot;nick&quot; &lt;11111111@qq.com&gt;&#39;, &#x2F;&#x2F; ä½ çš„è´¦å·å | ä½ çš„è´¦å·\n    to: &#39;222222@qq.com,333333@qq.com,&#39;, &#x2F;&#x2F; æ¥å—è€…,å¯ä»¥åŒæ—¶å‘é€å¤šä¸ª,ä»¥é€—å·éš”å¼€\n    subject: &#39;MJML&#39;, &#x2F;&#x2F; æ ‡é¢˜\n    html: fs.createReadStream(path.resolve(__dirname,&#39;demo.html&#39;)) &#x2F;&#x2F; æŒ‡å®šå‘é€æ–‡ä»¶è·¯å¾„\n&#125;;\n\ntransporter.sendMail(mailOptions, function (err, info) &#123;\n    if (err) &#123;\n        console.log(err);\n        return;\n    &#125;\n    console.log(&#39;å‘é€æˆåŠŸ&#39;);\n&#125;);\n\nå¤åˆ¶ä»£ç \n\nqqæˆæƒç è·å–:æ‰“å¼€qqé‚®ç®±ï¼Œæ‰¾åˆ°è®¾ç½®ï¼Œæ‰“å¼€é…ç½®ï¼Œä½ å°±èƒ½å¾—åˆ°qqæˆæƒç ã€‚\n\nè¿è¡Œå‘½ä»¤\nnode send.js\nå¤åˆ¶ä»£ç \n\nè‡³æ­¤é‚®ä»¶å·²ç»å‘é€åˆ°ä½ çš„é‚®ç®±ã€‚\nè‡ªåŠ¨ç¼–è¯‘åç»­é‚®ä»¶è¶Šå†™è¶Šå¤šï¼Œæ–‡ä»¶ç›®æ ‡å¾ˆå¤šï¼Œä¸å¤ªæƒ³ä¸€ä¸ªä¸ªæ‰‹åŠ¨ç¼–è¯‘æˆhtml,æ‰€ä»¥å†™ä¸ªè„šæœ¬è‡ªåŠ¨ç¼–è¯‘è¾“å‡ºhtmlæ–‡ä»¶ã€‚\næ–°å¢ srcç›®å½• æ–°å¢ build.js\n\n&#x2F;&#x2F; build.js\n\nconst fs &#x3D; require(&#39;fs&#39;)\nconst path &#x3D; require(&#39;path&#39;);\nconst child_process &#x3D; require(&#39;child_process&#39;);\n\n&#x2F;**\n * src ç›®å½•ä¸‹æ–‡ä»¶\n * dist æ‰“åŒ…çš„ç›®æ ‡æ–‡ä»¶\n *&#x2F;\ncopyDir(&#39;.&#x2F;src&#x2F;*&#39;, &#39;.&#x2F;dist&#39;)\n\n\n&#x2F;&#x2F; å¤åˆ¶æ–‡ä»¶ -&gt; ç¼–è¯‘æ–‡ä»¶\nfunction copyDir(src, dist) &#123;\n    if (fs.existsSync(dist)) &#123;\n        copyFile(src, dist)\n    &#125;else&#123;\n        fs.mkdir(dist, function (err) &#123;\n            if (err) &#123;\n                console.log(err)\n                return\n            &#125;\n            copyFile(src, dist)\n        &#125;)\n    &#125;\n    function copyFile(src, dist)&#123;\n        &#x2F;&#x2F; å¦‚æœæ˜¯windows\n        if(process.platform &#x3D;&#x3D;&#x3D; &#39;win32&#39;)&#123;\n            child_process.exec(&#96;ROBOCOPY src $&#123;dist&#125; &#x2F;E &#x2F;MT:30&#96;,function () &#123;\n                compile()\n            &#125;);\n        &#125;else&#123;\n            child_process.exec(&#96;cp -r $&#123;src&#125; $&#123;dist&#125;&#96;,function () &#123;\n                compile()\n            &#125;);\n        &#125;\n    &#125;\n&#125;\n&#x2F;&#x2F; ç¼–è¯‘æ–‡ä»¶\nfunction compile( src &#x3D; &#39;dist&#39;) &#123;\n    let startPath &#x3D; process.cwd()\n    fs.readdir(src,&#123;withFileTypes:true&#125;,  function (err, files) &#123;\n        files.forEach(file&#x3D;&gt;&#123;\n            if(file.isDirectory())&#123;\n                let dir &#x3D; &#96;$&#123;src&#125;&#x2F;$&#123;file.name&#125;&#96;\n                compile(dir)\n            &#125;else&#123;\n                &#x2F;&#x2F; è·å–å½“å‰æ–‡ä»¶åç§°\n                let fileName &#x3D; file.name.split(&#39;.&#39;)[0]\n                &#x2F;&#x2F; å…·ä½“ç›®å½•\n                process.chdir(src);\n                &#x2F;&#x2F; å¦‚æœæ˜¯windows\n                if(process.platform &#x3D;&#x3D;&#x3D; &#39;win32&#39;)&#123;\n                    &#x2F;&#x2F; ç¼–è¯‘MJMLæ–‡ä»¶\n                    const compile &#x3D; child_process.exec(&#96;mjml $&#123;fileName&#125;.mjml -o $&#123;fileName&#125;.html&#96;)\n                    compile.on(&#39;close&#39;, (code) &#x3D;&gt; &#123;\n                        console.log(&#39;ç¼–è¯‘æˆåŠŸ:&#39;,&#96;$&#123;fileName&#125;.mjml&#96;)\n                        let filePath &#x3D; path.join(__dirname,&#96;$&#123;src&#125;&#x2F;$&#123;fileName&#125;.mjml&#96;)\n                        child_process.exec(&#96;del $&#123;filePath&#125;&#96;)\n                    &#125;);\n                &#125;else&#123;\n                    &#x2F;&#x2F; ç¼–è¯‘MJMLæ–‡ä»¶\n                    const compile &#x3D; child_process.spawn(&#96;mjml&#96;, [&#96;$&#123;fileName&#125;.mjml&#96;,&#96;-o&#96;,&#96;$&#123;fileName&#125;.html&#96;], &#123;cwd: path.resolve(__dirname, src)&#125;)\n                    compile.on(&#39;close&#39;, code &#x3D;&gt; &#123;\n                        &#x2F;&#x2F; åˆ é™¤MJMLæ–‡ä»¶\n                        child_process.spawn(&#96;rm&#96;, [&#96;$&#123;fileName&#125;.mjml&#96;], &#123;cwd: path.resolve(__dirname, src)&#125;)\n                        console.log(&#39;ç¼–è¯‘æˆåŠŸ:&#39;,&#96;$&#123;fileName&#125;.mjml&#96;)\n                    &#125;)\n                &#125;\n                &#x2F;&#x2F; å¤åŸç›®å½•\n                process.chdir(startPath);\n            &#125;\n        &#125;)\n    &#125;)\n&#125;\n\nå¤åˆ¶ä»£ç \n\nè¿è¡Œå‘½ä»¤\nnode build.js\nå¤åˆ¶ä»£ç \n\nä¼šè‡ªåŠ¨ç¼–è¯‘ç”Ÿæˆå’Œsrcç›®å½•ç›¸åŒçš„htmlç»“æ„ã€‚\n\nç»“è¯­MJMLåœ¨å‡ ä¸ªé‚®ä»¶å‚å•†æµ‹è¯•æ ·å¼åå·®ä¸å¤§ï¼Œå€¼å¾—ä½¿ç”¨ã€‚ å¦‚æœæ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·å¸®æˆ‘ç‚¹èµæ”¶è—ï¼Œè°¢è°¢å¤§å®¶ã€‚\nå‚è€ƒHTML Email ç¼–å†™æŒ‡å—ã€é˜®ä¸€å³°ã€‘ï¼šåœ°å€\ngithub demoåœ°å€:github\n","slug":"MJMLé‚®ä»¶æ¨¡ç‰ˆå®æˆ˜","date":"2022-09-07T14:13:14.000Z","categories_index":"","tags_index":"","author_index":"Beastrong"},{"id":"52a992a246e40d85d4ae950cdaebc053","title":"é¢è¯•é¢˜ç¬”è®°â€”â€”ä»£ç è¾“å‡ºç»“æœç¯‡","content":"ä¸€ã€å¼‚æ­¥&amp;äº‹ä»¶å¾ªç¯1. ä»£ç è¾“å‡ºç»“æœconst promise &#x3D; new Promise((resolve, reject) &#x3D;&gt; &#123;\n  console.log(1);\n  console.log(2);\n&#125;);\npromise.then(() &#x3D;&gt; &#123;\n  console.log(3);\n&#125;);\nconsole.log(4);\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š\n1 \n2 \n4\nå¤åˆ¶ä»£ç \n\npromise.then æ˜¯å¾®ä»»åŠ¡ï¼Œå®ƒä¼šåœ¨æ‰€æœ‰çš„å®ä»»åŠ¡æ‰§è¡Œå®Œä¹‹åæ‰ä¼šæ‰§è¡Œï¼ŒåŒæ—¶éœ€è¦promiseå†…éƒ¨çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œå› ä¸ºè¿™é‡Œå†…éƒ¨æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œä¸€ç›´å¤„äºpendingçŠ¶æ€ï¼Œæ‰€ä»¥ä¸è¾“å‡º3ã€‚\n2. ä»£ç è¾“å‡ºç»“æœconst promise1 &#x3D; new Promise((resolve, reject) &#x3D;&gt; &#123;\n  console.log(&#39;promise1&#39;)\n  resolve(&#39;resolve1&#39;)\n&#125;)\nconst promise2 &#x3D; promise1.then(res &#x3D;&gt; &#123;\n  console.log(res)\n&#125;)\nconsole.log(&#39;1&#39;, promise1);\nconsole.log(&#39;2&#39;, promise2);\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š\npromise1\n1 Promise&#123;&lt;resolved&gt;: resolve1&#125;\n2 Promise&#123;&lt;pending&gt;&#125;\nresolve1\nå¤åˆ¶ä»£ç \n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç›´æ¥æ‰“å°promise1ï¼Œä¼šæ‰“å°å‡ºå®ƒçš„çŠ¶æ€å€¼å’Œå‚æ•°ã€‚\nä»£ç æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š\n\nscriptæ˜¯ä¸€ä¸ªå®ä»»åŠ¡ï¼ŒæŒ‰ç…§é¡ºåºæ‰§è¡Œè¿™äº›ä»£ç ï¼›\né¦–å…ˆè¿›å…¥Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä¸­çš„ä»£ç ï¼Œæ‰“å°promise1ï¼›\nç¢°åˆ°resolveå‡½æ•°, å°†promise1çš„çŠ¶æ€æ”¹å˜ä¸ºresolved, å¹¶å°†ç»“æœä¿å­˜ä¸‹æ¥ï¼›\nç¢°åˆ°promise1.thenè¿™ä¸ªå¾®ä»»åŠ¡ï¼Œå°†å®ƒæ”¾å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼›\npromise2æ˜¯ä¸€ä¸ªæ–°çš„çŠ¶æ€ä¸ºpendingçš„Promiseï¼›\næ‰§è¡ŒåŒæ­¥ä»£ç 1ï¼Œ åŒæ—¶æ‰“å°å‡ºpromise1çš„çŠ¶æ€æ˜¯resolvedï¼›\næ‰§è¡ŒåŒæ­¥ä»£ç 2ï¼ŒåŒæ—¶æ‰“å°å‡ºpromise2çš„çŠ¶æ€æ˜¯pendingï¼›\nå®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼ŒæŸ¥æ‰¾å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå‘ç°promise1.thenè¿™ä¸ªå¾®ä»»åŠ¡ä¸”çŠ¶æ€ä¸ºresolvedï¼Œæ‰§è¡Œå®ƒã€‚\n\n3. ä»£ç è¾“å‡ºç»“æœconst promise &#x3D; new Promise((resolve, reject) &#x3D;&gt; &#123;\n  console.log(1);\n  setTimeout(() &#x3D;&gt; &#123;\n    console.log(&quot;timerStart&quot;);\n    resolve(&quot;success&quot;);\n    console.log(&quot;timerEnd&quot;);\n  &#125;, 0);\n  console.log(2);\n&#125;);\npromise.then((res) &#x3D;&gt; &#123;\n  console.log(res);\n&#125;);\nconsole.log(4);\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š\n1\n2\n4\ntimerStart\ntimerEnd\nsuccess\nå¤åˆ¶ä»£ç \n\nä»£ç æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š\n\né¦–å…ˆé‡åˆ°Promiseæ„é€ å‡½æ•°ï¼Œä¼šå…ˆæ‰§è¡Œé‡Œé¢çš„å†…å®¹ï¼Œæ‰“å°1ï¼›\né‡åˆ°å®šæ—¶å™¨steTimeoutï¼Œå®ƒæ˜¯ä¸€ä¸ªå®ä»»åŠ¡ï¼Œæ”¾å…¥å®ä»»åŠ¡é˜Ÿåˆ—ï¼›\nç»§ç»­å‘ä¸‹æ‰§è¡Œï¼Œæ‰“å°å‡º2ï¼›\nç”±äºPromiseçš„çŠ¶æ€æ­¤æ—¶è¿˜æ˜¯pendingï¼Œæ‰€ä»¥promise.thenå…ˆä¸æ‰§è¡Œï¼›\nç»§ç»­æ‰§è¡Œä¸‹é¢çš„åŒæ­¥ä»»åŠ¡ï¼Œæ‰“å°å‡º4ï¼›\næ­¤æ—¶å¾®ä»»åŠ¡é˜Ÿåˆ—æ²¡æœ‰ä»»åŠ¡ï¼Œç»§ç»­æ‰§è¡Œä¸‹ä¸€è½®å®ä»»åŠ¡ï¼Œæ‰§è¡ŒsteTimeoutï¼›\né¦–å…ˆæ‰§è¡ŒtimerStartï¼Œç„¶åé‡åˆ°äº†resolveï¼Œå°†promiseçš„çŠ¶æ€æ”¹ä¸ºresolvedä¸”ä¿å­˜ç»“æœå¹¶å°†ä¹‹å‰çš„promise.thenæ¨å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå†æ‰§è¡ŒtimerEndï¼›\næ‰§è¡Œå®Œè¿™ä¸ªå®ä»»åŠ¡ï¼Œå°±å»æ‰§è¡Œå¾®ä»»åŠ¡promise.thenï¼Œæ‰“å°å‡ºresolveçš„ç»“æœã€‚\n\n4. ä»£ç è¾“å‡ºç»“æœPromise.resolve().then(() &#x3D;&gt; &#123;\n  console.log(&#39;promise1&#39;);\n  const timer2 &#x3D; setTimeout(() &#x3D;&gt; &#123;\n    console.log(&#39;timer2&#39;)\n  &#125;, 0)\n&#125;);\nconst timer1 &#x3D; setTimeout(() &#x3D;&gt; &#123;\n  console.log(&#39;timer1&#39;)\n  Promise.resolve().then(() &#x3D;&gt; &#123;\n    console.log(&#39;promise2&#39;)\n  &#125;)\n&#125;, 0)\nconsole.log(&#39;start&#39;);\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š\nstart\npromise1\ntimer1\npromise2\ntimer2\nå¤åˆ¶ä»£ç \n\nä»£ç æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š\n\né¦–å…ˆï¼ŒPromise.resolve().thenæ˜¯ä¸€ä¸ªå¾®ä»»åŠ¡ï¼ŒåŠ å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—\næ‰§è¡Œtimer1ï¼Œå®ƒæ˜¯ä¸€ä¸ªå®ä»»åŠ¡ï¼ŒåŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—\nç»§ç»­æ‰§è¡Œä¸‹é¢çš„åŒæ­¥ä»£ç ï¼Œæ‰“å°å‡ºstart\nè¿™æ ·ç¬¬ä¸€è½®å®ä»»åŠ¡å°±æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡Promise.resolve().thenï¼Œæ‰“å°å‡ºpromise1\né‡åˆ°timer2ï¼Œå®ƒæ˜¯ä¸€ä¸ªå®ä»»åŠ¡ï¼Œå°†å…¶åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ­¤æ—¶å®ä»»åŠ¡é˜Ÿåˆ—æœ‰ä¸¤ä¸ªä»»åŠ¡ï¼Œåˆ†åˆ«æ˜¯timer1ã€timer2ï¼›\nè¿™æ ·ç¬¬ä¸€è½®å¾®ä»»åŠ¡å°±æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œç¬¬äºŒè½®å®ä»»åŠ¡ï¼Œé¦–å…ˆæ‰§è¡Œå®šæ—¶å™¨timer1ï¼Œæ‰“å°timer1ï¼›\né‡åˆ°Promise.resolve().thenï¼Œå®ƒæ˜¯ä¸€ä¸ªå¾®ä»»åŠ¡ï¼ŒåŠ å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—\nå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼Œæ‰“å°promise2ï¼›\næœ€åæ‰§è¡Œå®ä»»åŠ¡timer2å®šæ—¶å™¨ï¼Œæ‰“å°å‡ºtimer2ï¼›\n\n5. ä»£ç è¾“å‡ºç»“æœconst promise &#x3D; new Promise((resolve, reject) &#x3D;&gt; &#123;\n    resolve(&#39;success1&#39;);\n    reject(&#39;error&#39;);\n    resolve(&#39;success2&#39;);\n&#125;);\npromise.then((res) &#x3D;&gt; &#123;\n    console.log(&#39;then:&#39;, res);\n&#125;).catch((err) &#x3D;&gt; &#123;\n    console.log(&#39;catch:&#39;, err);\n&#125;)\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š\nthenï¼šsuccess1\nå¤åˆ¶ä»£ç \n\nè¿™ä¸ªé¢˜ç›®è€ƒå¯Ÿçš„å°±æ˜¯Promiseçš„çŠ¶æ€åœ¨å‘ç”Ÿå˜åŒ–ä¹‹åï¼Œå°±ä¸ä¼šå†å‘ç”Ÿå˜åŒ–ã€‚å¼€å§‹çŠ¶æ€ç”±pendingå˜ä¸ºresolveï¼Œè¯´æ˜å·²ç»å˜ä¸ºå·²å®ŒæˆçŠ¶æ€ï¼Œä¸‹é¢çš„ä¸¤ä¸ªçŠ¶æ€çš„å°±ä¸ä¼šå†æ‰§è¡Œï¼ŒåŒæ—¶ä¸‹é¢çš„catchä¹Ÿä¸ä¼šæ•è·åˆ°é”™è¯¯ã€‚\n6. ä»£ç è¾“å‡ºç»“æœPromise.resolve(1)\n  .then(2)\n  .then(Promise.resolve(3))\n  .then(console.log)\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š\n1\nPromise &#123;&lt;fulfilled&gt;: undefined&#125;\nå¤åˆ¶ä»£ç \n\nPromise.resolveæ–¹æ³•çš„å‚æ•°å¦‚æœæ˜¯ä¸€ä¸ªåŸå§‹å€¼ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªä¸å…·æœ‰thenæ–¹æ³•çš„å¯¹è±¡ï¼Œåˆ™Promise.resolveæ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„Promiseå¯¹è±¡ï¼ŒçŠ¶æ€ä¸ºresolvedï¼ŒPromise.resolveæ–¹æ³•çš„å‚æ•°ï¼Œä¼šåŒæ—¶ä¼ ç»™å›è°ƒå‡½æ•°ã€‚\nthenæ–¹æ³•æ¥å—çš„å‚æ•°æ˜¯å‡½æ•°ï¼Œè€Œå¦‚æœä¼ é€’çš„å¹¶éæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå®é™…ä¸Šä¼šå°†å…¶è§£é‡Šä¸ºthen(null)ï¼Œè¿™å°±ä¼šå¯¼è‡´å‰ä¸€ä¸ªPromiseçš„ç»“æœä¼šä¼ é€’ä¸‹é¢ã€‚\n7. ä»£ç è¾“å‡ºç»“æœconst promise1 &#x3D; new Promise((resolve, reject) &#x3D;&gt; &#123;\n  setTimeout(() &#x3D;&gt; &#123;\n    resolve(&#39;success&#39;)\n  &#125;, 1000)\n&#125;)\nconst promise2 &#x3D; promise1.then(() &#x3D;&gt; &#123;\n  throw new Error(&#39;error!!!&#39;)\n&#125;)\nconsole.log(&#39;promise1&#39;, promise1)\nconsole.log(&#39;promise2&#39;, promise2)\nsetTimeout(() &#x3D;&gt; &#123;\n  console.log(&#39;promise1&#39;, promise1)\n  console.log(&#39;promise2&#39;, promise2)\n&#125;, 2000)\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š\npromise1 Promise &#123;&lt;pending&gt;&#125;\npromise2 Promise &#123;&lt;pending&gt;&#125;\n\nUncaught (in promise) Error: error!!!\npromise1 Promise &#123;&lt;fulfilled&gt;: &quot;success&quot;&#125;\npromise2 Promise &#123;&lt;rejected&gt;: Error: error!!&#125;\nå¤åˆ¶ä»£ç \n\n8. ä»£ç è¾“å‡ºç»“æœPromise.resolve(1)\n  .then(res &#x3D;&gt; &#123;\n    console.log(res);\n    return 2;\n  &#125;)\n  .catch(err &#x3D;&gt; &#123;\n    return 3;\n  &#125;)\n  .then(res &#x3D;&gt; &#123;\n    console.log(res);\n  &#125;);\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š\n1   \n2\nå¤åˆ¶ä»£ç \n\nPromiseæ˜¯å¯ä»¥é“¾å¼è°ƒç”¨çš„ï¼Œç”±äºæ¯æ¬¡è°ƒç”¨ .then æˆ–è€… .catch éƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„ promiseï¼Œä»è€Œå®ç°äº†é“¾å¼è°ƒç”¨, å®ƒå¹¶ä¸åƒä¸€èˆ¬ä»»åŠ¡çš„é“¾å¼è°ƒç”¨ä¸€æ ·return thisã€‚\nä¸Šé¢çš„è¾“å‡ºç»“æœä¹‹æ‰€ä»¥ä¾æ¬¡æ‰“å°å‡º1å’Œ2ï¼Œæ˜¯å› ä¸ºresolve(1)ä¹‹åèµ°çš„æ˜¯ç¬¬ä¸€ä¸ªthenæ–¹æ³•ï¼Œå¹¶æ²¡æœ‰è¿›catché‡Œï¼Œæ‰€ä»¥ç¬¬äºŒä¸ªthenä¸­çš„reså¾—åˆ°çš„å®é™…ä¸Šæ˜¯ç¬¬ä¸€ä¸ªthençš„è¿”å›å€¼ã€‚å¹¶ä¸”return 2ä¼šè¢«åŒ…è£…æˆresolve(2)ï¼Œè¢«æœ€åçš„thenæ‰“å°è¾“å‡º2ã€‚\n9. ä»£ç è¾“å‡ºç»“æœPromise.resolve().then(() &#x3D;&gt; &#123;\n  return new Error(&#39;error!!!&#39;)\n&#125;).then(res &#x3D;&gt; &#123;\n  console.log(&quot;then: &quot;, res)\n&#125;).catch(err &#x3D;&gt; &#123;\n  console.log(&quot;catch: &quot;, err)\n&#125;)\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š\n&quot;then: &quot; &quot;Error: error!!!&quot;\nå¤åˆ¶ä»£ç \n\nè¿”å›ä»»æ„ä¸€ä¸ªé promise çš„å€¼éƒ½ä¼šè¢«åŒ…è£¹æˆ promise å¯¹è±¡ï¼Œå› æ­¤è¿™é‡Œçš„return new Error(&#39;error!!!&#39;)ä¹Ÿè¢«åŒ…è£¹æˆäº†return Promise.resolve(new Error(&#39;error!!!&#39;))ï¼Œå› æ­¤å®ƒä¼šè¢«thenæ•è·è€Œä¸æ˜¯catchã€‚\n10. ä»£ç è¾“å‡ºç»“æœconst promise &#x3D; Promise.resolve().then(() &#x3D;&gt; &#123;\n  return promise;\n&#125;)\npromise.catch(console.err)\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š\nUncaught (in promise) TypeError: Chaining cycle detected for promise #&lt;Promise&gt;\nå¤åˆ¶ä»£ç \n\nè¿™é‡Œå…¶å®æ˜¯ä¸€ä¸ªå‘ï¼Œ.then æˆ– .catch è¿”å›çš„å€¼ä¸èƒ½æ˜¯ promise æœ¬èº«ï¼Œå¦åˆ™ä¼šé€ æˆæ­»å¾ªç¯ã€‚\n11. ä»£ç è¾“å‡ºç»“æœPromise.resolve(1)\n  .then(2)\n  .then(Promise.resolve(3))\n  .then(console.log)\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š\n1\nå¤åˆ¶ä»£ç \n\nçœ‹åˆ°è¿™ä¸ªé¢˜ç›®ï¼Œå¥½å¤šçš„thenï¼Œå®é™…ä¸Šåªéœ€è¦è®°ä½ä¸€ä¸ªåŸåˆ™ï¼š.then æˆ–.catch çš„å‚æ•°æœŸæœ›æ˜¯å‡½æ•°ï¼Œä¼ å…¥éå‡½æ•°åˆ™ä¼šå‘ç”Ÿå€¼é€ä¼ ã€‚\nç¬¬ä¸€ä¸ªthenå’Œç¬¬äºŒä¸ªthenä¸­ä¼ å…¥çš„éƒ½ä¸æ˜¯å‡½æ•°ï¼Œä¸€ä¸ªæ˜¯æ•°å­—ï¼Œä¸€ä¸ªæ˜¯å¯¹è±¡ï¼Œå› æ­¤å‘ç”Ÿäº†é€ä¼ ï¼Œå°†resolve(1) çš„å€¼ç›´æ¥ä¼ åˆ°æœ€åä¸€ä¸ªthené‡Œï¼Œç›´æ¥æ‰“å°å‡º1ã€‚\n12. ä»£ç è¾“å‡ºç»“æœPromise.reject(&#39;err!!!&#39;)\n  .then((res) &#x3D;&gt; &#123;\n    console.log(&#39;success&#39;, res)\n  &#125;, (err) &#x3D;&gt; &#123;\n    console.log(&#39;error&#39;, err)\n  &#125;).catch(err &#x3D;&gt; &#123;\n    console.log(&#39;catch&#39;, err)\n  &#125;)\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š\nerror err!!!\nå¤åˆ¶ä»£ç \n\næˆ‘ä»¬çŸ¥é“ï¼Œ.thenå‡½æ•°ä¸­çš„ä¸¤ä¸ªå‚æ•°ï¼š\n\nç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç”¨æ¥å¤„ç†PromiseæˆåŠŸçš„å‡½æ•°\nç¬¬äºŒä¸ªåˆ™æ˜¯å¤„ç†å¤±è´¥çš„å‡½æ•°\n\nä¹Ÿå°±æ˜¯è¯´Promise.resolve(&#39;1&#39;)çš„å€¼ä¼šè¿›å…¥æˆåŠŸçš„å‡½æ•°ï¼ŒPromise.reject(&#39;2&#39;)çš„å€¼ä¼šè¿›å…¥å¤±è´¥çš„å‡½æ•°ã€‚\nåœ¨è¿™é“é¢˜ä¸­ï¼Œé”™è¯¯ç›´æ¥è¢«thençš„ç¬¬äºŒä¸ªå‚æ•°æ•è·äº†ï¼Œæ‰€ä»¥å°±ä¸ä¼šè¢«catchæ•è·äº†ï¼Œè¾“å‡ºç»“æœä¸ºï¼šerror err!!!&#39;\nä½†æ˜¯ï¼Œå¦‚æœæ˜¯åƒä¸‹é¢è¿™æ ·ï¼š\nPromise.resolve()\n  .then(function success (res) &#123;\n    throw new Error(&#39;error!!!&#39;)\n  &#125;, function fail1 (err) &#123;\n    console.log(&#39;fail1&#39;, err)\n  &#125;).catch(function fail2 (err) &#123;\n    console.log(&#39;fail2&#39;, err)\n  &#125;)\nå¤åˆ¶ä»£ç \n\nåœ¨thençš„ç¬¬ä¸€å‚æ•°ä¸­æŠ›å‡ºäº†é”™è¯¯ï¼Œé‚£ä¹ˆä»–å°±ä¸ä¼šè¢«ç¬¬äºŒä¸ªå‚æ•°ä¸æ´»äº†ï¼Œè€Œæ˜¯è¢«åé¢çš„catchæ•è·åˆ°ã€‚\n13. ä»£ç è¾“å‡ºç»“æœPromise.resolve(&#39;1&#39;)\n  .then(res &#x3D;&gt; &#123;\n    console.log(res)\n  &#125;)\n  .finally(() &#x3D;&gt; &#123;\n    console.log(&#39;finally&#39;)\n  &#125;)\nPromise.resolve(&#39;2&#39;)\n  .finally(() &#x3D;&gt; &#123;\n    console.log(&#39;finally2&#39;)\n  \treturn &#39;æˆ‘æ˜¯finally2è¿”å›çš„å€¼&#39;\n  &#125;)\n  .then(res &#x3D;&gt; &#123;\n    console.log(&#39;finally2åé¢çš„thenå‡½æ•°&#39;, res)\n  &#125;)\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š\n1\nfinally2\nfinally\nfinally2åé¢çš„thenå‡½æ•° 2\nå¤åˆ¶ä»£ç \n\n.finally()ä¸€èˆ¬ç”¨çš„å¾ˆå°‘ï¼Œåªè¦è®°ä½ä»¥ä¸‹å‡ ç‚¹å°±å¯ä»¥äº†ï¼š\n\n.finally()æ–¹æ³•ä¸ç®¡Promiseå¯¹è±¡æœ€åçš„çŠ¶æ€å¦‚ä½•éƒ½ä¼šæ‰§è¡Œ\n.finally()æ–¹æ³•çš„å›è°ƒå‡½æ•°ä¸æ¥å—ä»»ä½•çš„å‚æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ åœ¨.finally()å‡½æ•°ä¸­æ˜¯æ— æ³•çŸ¥é“Promiseæœ€ç»ˆçš„çŠ¶æ€æ˜¯resolvedè¿˜æ˜¯rejectedçš„\nå®ƒæœ€ç»ˆè¿”å›çš„é»˜è®¤ä¼šæ˜¯ä¸€ä¸ªä¸Šä¸€æ¬¡çš„Promiseå¯¹è±¡å€¼ï¼Œä¸è¿‡å¦‚æœæŠ›å‡ºçš„æ˜¯ä¸€ä¸ªå¼‚å¸¸åˆ™è¿”å›å¼‚å¸¸çš„Promiseå¯¹è±¡ã€‚\nfinallyæœ¬è´¨ä¸Šæ˜¯thenæ–¹æ³•çš„ç‰¹ä¾‹\n\n.finally()çš„é”™è¯¯æ•è·ï¼š\nPromise.resolve(&#39;1&#39;)\n  .finally(() &#x3D;&gt; &#123;\n    console.log(&#39;finally1&#39;)\n    throw new Error(&#39;æˆ‘æ˜¯finallyä¸­æŠ›å‡ºçš„å¼‚å¸¸&#39;)\n  &#125;)\n  .then(res &#x3D;&gt; &#123;\n    console.log(&#39;finallyåé¢çš„thenå‡½æ•°&#39;, res)\n  &#125;)\n  .catch(err &#x3D;&gt; &#123;\n    console.log(&#39;æ•è·é”™è¯¯&#39;, err)\n  &#125;)\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœä¸ºï¼š\n&#39;finally1&#39;\n&#39;æ•è·é”™è¯¯&#39; Error: æˆ‘æ˜¯finallyä¸­æŠ›å‡ºçš„å¼‚å¸¸\nå¤åˆ¶ä»£ç \n\n14. ä»£ç è¾“å‡ºç»“æœfunction runAsync (x) &#123;\n    const p &#x3D; new Promise(r &#x3D;&gt; setTimeout(() &#x3D;&gt; r(x, console.log(x)), 1000))\n    return p\n&#125;\n\nPromise.all([runAsync(1), runAsync(2), runAsync(3)]).then(res &#x3D;&gt; console.log(res))\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š\n1\n2\n3\n[1, 2, 3]\nå¤åˆ¶ä»£ç \n\né¦–å…ˆï¼Œå®šä¹‰äº†ä¸€ä¸ªPromiseï¼Œæ¥å¼‚æ­¥æ‰§è¡Œå‡½æ•°runAsyncï¼Œè¯¥å‡½æ•°ä¼ å…¥ä¸€ä¸ªå€¼xï¼Œç„¶åé—´éš”ä¸€ç§’åæ‰“å°å‡ºè¿™ä¸ªxã€‚\nä¹‹åå†ä½¿ç”¨Promise.allæ¥æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œæ‰§è¡Œçš„æ—¶å€™ï¼Œçœ‹åˆ°ä¸€ç§’ä¹‹åè¾“å‡ºäº†1ï¼Œ2ï¼Œ3ï¼ŒåŒæ—¶è¾“å‡ºäº†æ•°ç»„[1, 2, 3]ï¼Œä¸‰ä¸ªå‡½æ•°æ˜¯åŒæ­¥æ‰§è¡Œçš„ï¼Œå¹¶ä¸”åœ¨ä¸€ä¸ªå›è°ƒå‡½æ•°ä¸­è¿”å›äº†æ‰€æœ‰çš„ç»“æœã€‚å¹¶ä¸”ç»“æœå’Œå‡½æ•°çš„æ‰§è¡Œé¡ºåºæ˜¯ä¸€è‡´çš„ã€‚\n15. ä»£ç è¾“å‡ºç»“æœfunction runAsync (x) &#123;\n  const p &#x3D; new Promise(r &#x3D;&gt; setTimeout(() &#x3D;&gt; r(x, console.log(x)), 1000))\n  return p\n&#125;\nfunction runReject (x) &#123;\n  const p &#x3D; new Promise((res, rej) &#x3D;&gt; setTimeout(() &#x3D;&gt; rej(&#96;Error: $&#123;x&#125;&#96;, console.log(x)), 1000 * x))\n  return p\n&#125;\nPromise.all([runAsync(1), runReject(4), runAsync(3), runReject(2)])\n       .then(res &#x3D;&gt; console.log(res))\n       .catch(err &#x3D;&gt; console.log(err))\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š\n&#x2F;&#x2F; 1såè¾“å‡º\n1\n3\n&#x2F;&#x2F; 2såè¾“å‡º\n2\nError: 2\n&#x2F;&#x2F; 4såè¾“å‡º\n4\nå¤åˆ¶ä»£ç \n\nå¯ä»¥çœ‹åˆ°ã€‚catchæ•è·åˆ°äº†ç¬¬ä¸€ä¸ªé”™è¯¯ï¼Œåœ¨è¿™é“é¢˜ç›®ä¸­æœ€å…ˆçš„é”™è¯¯å°±æ˜¯runReject(2)çš„ç»“æœã€‚å¦‚æœä¸€ç»„å¼‚æ­¥æ“ä½œä¸­æœ‰ä¸€ä¸ªå¼‚å¸¸éƒ½ä¸ä¼šè¿›å…¥.then()çš„ç¬¬ä¸€ä¸ªå›è°ƒå‡½æ•°å‚æ•°ä¸­ã€‚ä¼šè¢«.then()çš„ç¬¬äºŒä¸ªå›è°ƒå‡½æ•°æ•è·ã€‚\n16. ä»£ç è¾“å‡ºç»“æœfunction runAsync (x) &#123;\n  const p &#x3D; new Promise(r &#x3D;&gt; setTimeout(() &#x3D;&gt; r(x, console.log(x)), 1000))\n  return p\n&#125;\nPromise.race([runAsync(1), runAsync(2), runAsync(3)])\n  .then(res &#x3D;&gt; console.log(&#39;result: &#39;, res))\n  .catch(err &#x3D;&gt; console.log(err))\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š\n1\n&#39;result: &#39; 1\n2\n3\nå¤åˆ¶ä»£ç \n\nthenåªä¼šæ•è·ç¬¬ä¸€ä¸ªæˆåŠŸçš„æ–¹æ³•ï¼Œå…¶ä»–çš„å‡½æ•°è™½ç„¶è¿˜ä¼šç»§ç»­æ‰§è¡Œï¼Œä½†æ˜¯ä¸æ˜¯è¢«thenæ•è·äº†ã€‚\n17. ä»£ç è¾“å‡ºç»“æœfunction runAsync(x) &#123;\n  const p &#x3D; new Promise(r &#x3D;&gt;\n    setTimeout(() &#x3D;&gt; r(x, console.log(x)), 1000)\n  );\n  return p;\n&#125;\nfunction runReject(x) &#123;\n  const p &#x3D; new Promise((res, rej) &#x3D;&gt;\n    setTimeout(() &#x3D;&gt; rej(&#96;Error: $&#123;x&#125;&#96;, console.log(x)), 1000 * x)\n  );\n  return p;\n&#125;\nPromise.race([runReject(0), runAsync(1), runAsync(2), runAsync(3)])\n  .then(res &#x3D;&gt; console.log(&quot;result: &quot;, res))\n  .catch(err &#x3D;&gt; console.log(err));\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š\n0\nError: 0\n1\n2\n3\nå¤åˆ¶ä»£ç \n\nå¯ä»¥çœ‹åˆ°åœ¨catchæ•è·åˆ°ç¬¬ä¸€ä¸ªé”™è¯¯ä¹‹åï¼Œåé¢çš„ä»£ç è¿˜ä¸æ‰§è¡Œï¼Œä¸è¿‡ä¸ä¼šå†è¢«æ•è·äº†ã€‚\næ³¨æ„ï¼šallå’Œraceä¼ å…¥çš„æ•°ç»„ä¸­å¦‚æœæœ‰ä¼šæŠ›å‡ºå¼‚å¸¸çš„å¼‚æ­¥ä»»åŠ¡ï¼Œé‚£ä¹ˆåªæœ‰æœ€å…ˆæŠ›å‡ºçš„é”™è¯¯ä¼šè¢«æ•è·ï¼Œå¹¶ä¸”æ˜¯è¢«thençš„ç¬¬äºŒä¸ªå‚æ•°æˆ–è€…åé¢çš„catchæ•è·ï¼›ä½†å¹¶ä¸ä¼šå½±å“æ•°ç»„ä¸­å…¶å®ƒçš„å¼‚æ­¥ä»»åŠ¡çš„æ‰§è¡Œã€‚\n18. ä»£ç è¾“å‡ºç»“æœasync function async1() &#123;\n  console.log(&quot;async1 start&quot;);\n  await async2();\n  console.log(&quot;async1 end&quot;);\n&#125;\nasync function async2() &#123;\n  console.log(&quot;async2&quot;);\n&#125;\nasync1();\nconsole.log(&#39;start&#39;)\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š\nasync1 start\nasync2\nstart\nasync1 end\nå¤åˆ¶ä»£ç \n\nä»£ç çš„æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š\n\né¦–å…ˆæ‰§è¡Œå‡½æ•°ä¸­çš„åŒæ­¥ä»£ç async1 startï¼Œä¹‹åé‡åˆ°äº†awaitï¼Œå®ƒä¼šé˜»å¡async1åé¢ä»£ç çš„æ‰§è¡Œï¼Œå› æ­¤ä¼šå…ˆå»æ‰§è¡Œasync2ä¸­çš„åŒæ­¥ä»£ç async2ï¼Œç„¶åè·³å‡ºasync1ï¼›\nè·³å‡ºasync1å‡½æ•°åï¼Œæ‰§è¡ŒåŒæ­¥ä»£ç startï¼›\nåœ¨ä¸€è½®å®ä»»åŠ¡å…¨éƒ¨æ‰§è¡Œå®Œä¹‹åï¼Œå†æ¥æ‰§è¡Œawaitåé¢çš„å†…å®¹async1 endã€‚\n\nè¿™é‡Œå¯ä»¥ç†è§£ä¸ºawaitåé¢çš„è¯­å¥ç›¸å½“äºæ”¾åˆ°äº†new Promiseä¸­ï¼Œä¸‹ä¸€è¡ŒåŠä¹‹åçš„è¯­å¥ç›¸å½“äºæ”¾åœ¨Promise.thenä¸­ã€‚\n19. ä»£ç è¾“å‡ºç»“æœasync function async1() &#123;\n  console.log(&quot;async1 start&quot;);\n  await async2();\n  console.log(&quot;async1 end&quot;);\n  setTimeout(() &#x3D;&gt; &#123;\n    console.log(&#39;timer1&#39;)\n  &#125;, 0)\n&#125;\nasync function async2() &#123;\n  setTimeout(() &#x3D;&gt; &#123;\n    console.log(&#39;timer2&#39;)\n  &#125;, 0)\n  console.log(&quot;async2&quot;);\n&#125;\nasync1();\nsetTimeout(() &#x3D;&gt; &#123;\n  console.log(&#39;timer3&#39;)\n&#125;, 0)\nconsole.log(&quot;start&quot;)\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š\nasync1 start\nasync2\nstart\nasync1 end\ntimer2\ntimer3\ntimer1\nå¤åˆ¶ä»£ç \n\nä»£ç çš„æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š\n\né¦–å…ˆè¿›å…¥async1ï¼Œæ‰“å°å‡ºasync1 startï¼›\nä¹‹åé‡åˆ°async2ï¼Œè¿›å…¥async2ï¼Œé‡åˆ°å®šæ—¶å™¨timer2ï¼ŒåŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—ï¼Œä¹‹åæ‰“å°async2ï¼›\nç”±äºasync2é˜»å¡äº†åé¢ä»£ç çš„æ‰§è¡Œï¼Œæ‰€ä»¥æ‰§è¡Œåé¢çš„å®šæ—¶å™¨timer3ï¼Œå°†å…¶åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—ï¼Œä¹‹åæ‰“å°startï¼›\nç„¶åæ‰§è¡Œasync2åé¢çš„ä»£ç ï¼Œæ‰“å°å‡ºasync1 endï¼Œé‡åˆ°å®šæ—¶å™¨timer1ï¼Œå°†å…¶åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—ï¼›\næœ€åï¼Œå®ä»»åŠ¡é˜Ÿåˆ—æœ‰ä¸‰ä¸ªä»»åŠ¡ï¼Œå…ˆåé¡ºåºä¸ºtimer2ï¼Œtimer3ï¼Œtimer1ï¼Œæ²¡æœ‰å¾®ä»»åŠ¡ï¼Œæ‰€ä»¥ç›´æ¥æ‰€æœ‰çš„å®ä»»åŠ¡æŒ‰ç…§å…ˆè¿›å…ˆå‡ºçš„åŸåˆ™æ‰§è¡Œã€‚\n\n20. ä»£ç è¾“å‡ºç»“æœasync function async1 () &#123;\n  console.log(&#39;async1 start&#39;);\n  await new Promise(resolve &#x3D;&gt; &#123;\n    console.log(&#39;promise1&#39;)\n  &#125;)\n  console.log(&#39;async1 success&#39;);\n  return &#39;async1 end&#39;\n&#125;\nconsole.log(&#39;srcipt start&#39;)\nasync1().then(res &#x3D;&gt; console.log(res))\nconsole.log(&#39;srcipt end&#39;)\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š\nscript start\nasync1 start\npromise1\nscript end\nå¤åˆ¶ä»£ç \n\nè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯åœ¨async1ä¸­awaitåé¢çš„Promiseæ˜¯æ²¡æœ‰è¿”å›å€¼çš„ï¼Œä¹Ÿå°±æ˜¯å®ƒçš„çŠ¶æ€å§‹ç»ˆæ˜¯pendingçŠ¶æ€ï¼Œæ‰€ä»¥åœ¨awaitä¹‹åçš„å†…å®¹æ˜¯ä¸ä¼šæ‰§è¡Œçš„ï¼ŒåŒ…æ‹¬async1åé¢çš„ .thenã€‚\n21. ä»£ç è¾“å‡ºç»“æœasync function async1 () &#123;\n  console.log(&#39;async1 start&#39;);\n  await new Promise(resolve &#x3D;&gt; &#123;\n    console.log(&#39;promise1&#39;)\n    resolve(&#39;promise1 resolve&#39;)\n  &#125;).then(res &#x3D;&gt; console.log(res))\n  console.log(&#39;async1 success&#39;);\n  return &#39;async1 end&#39;\n&#125;\nconsole.log(&#39;srcipt start&#39;)\nasync1().then(res &#x3D;&gt; console.log(res))\nconsole.log(&#39;srcipt end&#39;)\nå¤åˆ¶ä»£ç \n\nè¿™é‡Œæ˜¯å¯¹ä¸Šé¢ä¸€é¢˜è¿›è¡Œäº†æ”¹é€ ï¼ŒåŠ ä¸Šäº†resolveã€‚\nè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š\nscript start\nasync1 start\npromise1\nscript end\npromise1 resolve\nasync1 success\nasync1 end\nå¤åˆ¶ä»£ç \n\n22. ä»£ç è¾“å‡ºç»“æœasync function async1() &#123;\n  console.log(&quot;async1 start&quot;);\n  await async2();\n  console.log(&quot;async1 end&quot;);\n&#125;\n\nasync function async2() &#123;\n  console.log(&quot;async2&quot;);\n&#125;\n\nconsole.log(&quot;script start&quot;);\n\nsetTimeout(function() &#123;\n  console.log(&quot;setTimeout&quot;);\n&#125;, 0);\n\nasync1();\n\nnew Promise(resolve &#x3D;&gt; &#123;\n  console.log(&quot;promise1&quot;);\n  resolve();\n&#125;).then(function() &#123;\n  console.log(&quot;promise2&quot;);\n&#125;);\nconsole.log(&#39;script end&#39;)\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š\nscript start\nasync1 start\nasync2\npromise1\nscript end\nasync1 end\npromise2\nsetTimeout\nå¤åˆ¶ä»£ç \n\nä»£ç æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š\n\nå¼€å¤´å®šä¹‰äº†async1å’Œasync2ä¸¤ä¸ªå‡½æ•°ï¼Œä½†æ˜¯å¹¶æœªæ‰§è¡Œï¼Œæ‰§è¡Œscriptä¸­çš„ä»£ç ï¼Œæ‰€ä»¥æ‰“å°å‡ºscript startï¼›\né‡åˆ°å®šæ—¶å™¨Settimeoutï¼Œå®ƒæ˜¯ä¸€ä¸ªå®ä»»åŠ¡ï¼Œå°†å…¶åŠ å…¥åˆ°å®ä»»åŠ¡é˜Ÿåˆ—ï¼›\nä¹‹åæ‰§è¡Œå‡½æ•°async1ï¼Œé¦–å…ˆæ‰“å°å‡ºasync1 startï¼›\né‡åˆ°awaitï¼Œæ‰§è¡Œasync2ï¼Œæ‰“å°å‡ºasync2ï¼Œå¹¶é˜»æ–­åé¢ä»£ç çš„æ‰§è¡Œï¼Œå°†åé¢çš„ä»£ç åŠ å…¥åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼›\nç„¶åè·³å‡ºasync1å’Œasync2ï¼Œé‡åˆ°Promiseï¼Œæ‰“å°å‡ºpromise1ï¼›\né‡åˆ°resolveï¼Œå°†å…¶åŠ å…¥åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œç„¶åæ‰§è¡Œåé¢çš„scriptä»£ç ï¼Œæ‰“å°å‡ºscript endï¼›\nä¹‹åå°±è¯¥æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—äº†ï¼Œé¦–å…ˆæ‰“å°å‡ºasync1 endï¼Œç„¶åæ‰“å°å‡ºpromise2ï¼›\næ‰§è¡Œå®Œå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå°±å¼€å§‹æ‰§è¡Œå®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„å®šæ—¶å™¨ï¼Œæ‰“å°å‡ºsetTimeoutã€‚\n\n23. ä»£ç è¾“å‡ºç»“æœasync function async1 () &#123;\n  await async2();\n  console.log(&#39;async1&#39;);\n  return &#39;async1 success&#39;\n&#125;\nasync function async2 () &#123;\n  return new Promise((resolve, reject) &#x3D;&gt; &#123;\n    console.log(&#39;async2&#39;)\n    reject(&#39;error&#39;)\n  &#125;)\n&#125;\nasync1().then(res &#x3D;&gt; console.log(res))\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š\nasync2\nUncaught (in promise) error\nå¤åˆ¶ä»£ç \n\nå¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœasyncå‡½æ•°ä¸­æŠ›å‡ºäº†é”™è¯¯ï¼Œå°±ä¼šç»ˆæ­¢é”™è¯¯ç»“æœï¼Œä¸ä¼šç»§ç»­å‘ä¸‹æ‰§è¡Œã€‚\nå¦‚æœæƒ³è¦è®©é”™è¯¯ä¸è¶³ä¹‹å¤„åé¢çš„ä»£ç æ‰§è¡Œï¼Œå¯ä»¥ä½¿ç”¨catchæ¥æ•è·ï¼š\nasync function async1 () &#123;\n  await Promise.reject(&#39;error!!!&#39;).catch(e &#x3D;&gt; console.log(e))\n  console.log(&#39;async1&#39;);\n  return Promise.resolve(&#39;async1 success&#39;)\n&#125;\nasync1().then(res &#x3D;&gt; console.log(res))\nconsole.log(&#39;script start&#39;)\nå¤åˆ¶ä»£ç \n\nè¿™æ ·çš„è¾“å‡ºç»“æœå°±æ˜¯ï¼š\nscript start\nerror!!!\nasync1\nasync1 success\nå¤åˆ¶ä»£ç \n\n24. ä»£ç è¾“å‡ºç»“æœconst first &#x3D; () &#x3D;&gt; (new Promise((resolve, reject) &#x3D;&gt; &#123;\n    console.log(3);\n    let p &#x3D; new Promise((resolve, reject) &#x3D;&gt; &#123;\n        console.log(7);\n        setTimeout(() &#x3D;&gt; &#123;\n            console.log(5);\n            resolve(6);\n            console.log(p)\n        &#125;, 0)\n        resolve(1);\n    &#125;);\n    resolve(2);\n    p.then((arg) &#x3D;&gt; &#123;\n        console.log(arg);\n    &#125;);\n&#125;));\nfirst().then((arg) &#x3D;&gt; &#123;\n    console.log(arg);\n&#125;);\nconsole.log(4);\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š\n3\n7\n4\n1\n2\n5\nPromise&#123;&lt;resolved&gt;: 1&#125;\nå¤åˆ¶ä»£ç \n\nä»£ç çš„æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š\n\né¦–å…ˆä¼šè¿›å…¥Promiseï¼Œæ‰“å°å‡º3ï¼Œä¹‹åè¿›å…¥ä¸‹é¢çš„Promiseï¼Œæ‰“å°å‡º7ï¼›\né‡åˆ°äº†å®šæ—¶å™¨ï¼Œå°†å…¶åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—ï¼›\næ‰§è¡ŒPromise Â pä¸­çš„resolveï¼ŒçŠ¶æ€å˜ä¸ºresolvedï¼Œè¿”å›å€¼ä¸º1ï¼›\næ‰§è¡ŒPromise firstä¸­çš„resolveï¼ŒçŠ¶æ€å˜ä¸ºresolvedï¼Œè¿”å›å€¼ä¸º2ï¼›\né‡åˆ°p.thenï¼Œå°†å…¶åŠ å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œé‡åˆ°first().thenï¼Œå°†å…¶åŠ å…¥ä»»åŠ¡é˜Ÿåˆ—ï¼›\næ‰§è¡Œå¤–é¢çš„ä»£ç ï¼Œæ‰“å°å‡º4ï¼›\nè¿™æ ·ç¬¬ä¸€è½®å®ä»»åŠ¡å°±æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼Œå…ˆåæ‰“å°å‡º1å’Œ2ï¼›\nè¿™æ ·å¾®ä»»åŠ¡å°±æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€è½®å®ä»»åŠ¡ï¼Œå®ä»»åŠ¡é˜Ÿåˆ—ä¸­æœ‰ä¸€ä¸ªå®šæ—¶å™¨ï¼Œæ‰§è¡Œå®ƒï¼Œæ‰“å°å‡º5ï¼Œç”±äºæ‰§è¡Œå·²ç»å˜ä¸ºresolvedçŠ¶æ€ï¼Œæ‰€ä»¥resolve(6)ä¸ä¼šå†æ‰§è¡Œï¼›\næœ€åconsole.log(p)æ‰“å°å‡ºPromise&#123;&lt;resolved&gt;: 1&#125;ï¼›\n\n25. ä»£ç è¾“å‡ºç»“æœconst async1 &#x3D; async () &#x3D;&gt; &#123;\n  console.log(&#39;async1&#39;);\n  setTimeout(() &#x3D;&gt; &#123;\n    console.log(&#39;timer1&#39;)\n  &#125;, 2000)\n  await new Promise(resolve &#x3D;&gt; &#123;\n    console.log(&#39;promise1&#39;)\n  &#125;)\n  console.log(&#39;async1 end&#39;)\n  return &#39;async1 success&#39;\n&#125; \nconsole.log(&#39;script start&#39;);\nasync1().then(res &#x3D;&gt; console.log(res));\nconsole.log(&#39;script end&#39;);\nPromise.resolve(1)\n  .then(2)\n  .then(Promise.resolve(3))\n  .catch(4)\n  .then(res &#x3D;&gt; console.log(res))\nsetTimeout(() &#x3D;&gt; &#123;\n  console.log(&#39;timer2&#39;)\n&#125;, 1000)\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š\nscript start\nasync1\npromise1\nscript end\n1\ntimer2\ntimer1\nå¤åˆ¶ä»£ç \n\nä»£ç çš„æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š\n\né¦–å…ˆæ‰§è¡ŒåŒæ­¥å¸¦å—ï¼Œæ‰“å°å‡ºscript startï¼›\né‡åˆ°å®šæ—¶å™¨timer1å°†å…¶åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—ï¼›\nä¹‹åæ˜¯æ‰§è¡ŒPromiseï¼Œæ‰“å°å‡ºpromise1ï¼Œç”±äºPromiseæ²¡æœ‰è¿”å›å€¼ï¼Œæ‰€ä»¥åé¢çš„ä»£ç ä¸ä¼šæ‰§è¡Œï¼›\nç„¶åæ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œæ‰“å°å‡ºscript endï¼›\nç»§ç»­æ‰§è¡Œä¸‹é¢çš„Promiseï¼Œ.thenå’Œ.catchæœŸæœ›å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿™é‡Œä¼ å…¥çš„æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå› æ­¤å°±ä¼šå‘ç”Ÿå€¼æ¸—é€ï¼Œå°†resolve(1)çš„å€¼ä¼ åˆ°æœ€åä¸€ä¸ªthenï¼Œç›´æ¥æ‰“å°å‡º1ï¼›\né‡åˆ°ç¬¬äºŒä¸ªå®šæ—¶å™¨ï¼Œå°†å…¶åŠ å…¥åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼ŒæŒ‰é¡ºåºä¾æ¬¡æ‰§è¡Œä¸¤ä¸ªå®šæ—¶å™¨ï¼Œä½†æ˜¯ç”±äºå®šæ—¶å™¨æ—¶é—´çš„åŸå› ï¼Œä¼šåœ¨ä¸¤ç§’åå…ˆæ‰“å°å‡ºtimer2ï¼Œåœ¨å››ç§’åæ‰“å°å‡ºtimer1ã€‚\n\n26. ä»£ç è¾“å‡ºç»“æœconst p1 &#x3D; new Promise((resolve) &#x3D;&gt; &#123;\n  setTimeout(() &#x3D;&gt; &#123;\n    resolve(&#39;resolve3&#39;);\n    console.log(&#39;timer1&#39;)\n  &#125;, 0)\n  resolve(&#39;resovle1&#39;);\n  resolve(&#39;resolve2&#39;);\n&#125;).then(res &#x3D;&gt; &#123;\n  console.log(res)  &#x2F;&#x2F; resolve1\n  setTimeout(() &#x3D;&gt; &#123;\n    console.log(p1)\n  &#125;, 1000)\n&#125;).finally(res &#x3D;&gt; &#123;\n  console.log(&#39;finally&#39;, res)\n&#125;)\nå¤åˆ¶ä»£ç \n\næ‰§è¡Œç»“æœä¸ºå¦‚ä¸‹ï¼š\nresolve1\nfinally  undefined\ntimer1\nPromise&#123;&lt;resolved&gt;: undefined&#125;\nå¤åˆ¶ä»£ç \n\néœ€è¦æ³¨æ„çš„æ˜¯æœ€åä¸€ä¸ªå®šæ—¶å™¨æ‰“å°å‡ºçš„p1å…¶å®æ˜¯.finallyçš„è¿”å›å€¼ï¼Œæˆ‘ä»¬çŸ¥é“.finallyçš„è¿”å›å€¼å¦‚æœåœ¨æ²¡æœ‰æŠ›å‡ºé”™è¯¯çš„æƒ…å†µä¸‹é»˜è®¤ä¼šæ˜¯ä¸Šä¸€ä¸ªPromiseçš„è¿”å›å€¼ï¼Œè€Œè¿™é“é¢˜ä¸­.finallyä¸Šä¸€ä¸ªPromiseæ˜¯.then()ï¼Œä½†æ˜¯è¿™ä¸ª.then()å¹¶æ²¡æœ‰è¿”å›å€¼ï¼Œæ‰€ä»¥p1æ‰“å°å‡ºæ¥çš„Promiseçš„å€¼ä¼šæ˜¯undefinedï¼Œå¦‚æœåœ¨å®šæ—¶å™¨çš„ä¸‹é¢åŠ ä¸Šä¸€ä¸ªreturn 1ï¼Œåˆ™å€¼å°±ä¼šå˜æˆ1ã€‚\n27. ä»£ç è¾“å‡ºç»“æœconsole.log(&#39;1&#39;);\n\nsetTimeout(function() &#123;\n    console.log(&#39;2&#39;);\n    process.nextTick(function() &#123;\n        console.log(&#39;3&#39;);\n    &#125;)\n    new Promise(function(resolve) &#123;\n        console.log(&#39;4&#39;);\n        resolve();\n    &#125;).then(function() &#123;\n        console.log(&#39;5&#39;)\n    &#125;)\n&#125;)\nprocess.nextTick(function() &#123;\n    console.log(&#39;6&#39;);\n&#125;)\nnew Promise(function(resolve) &#123;\n    console.log(&#39;7&#39;);\n    resolve();\n&#125;).then(function() &#123;\n    console.log(&#39;8&#39;)\n&#125;)\n\nsetTimeout(function() &#123;\n    console.log(&#39;9&#39;);\n    process.nextTick(function() &#123;\n        console.log(&#39;10&#39;);\n    &#125;)\n    new Promise(function(resolve) &#123;\n        console.log(&#39;11&#39;);\n        resolve();\n    &#125;).then(function() &#123;\n        console.log(&#39;12&#39;)\n    &#125;)\n&#125;)\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š\n1\n7\n6\n8\n2\n4\n3\n5\n9\n11\n10\n12\nå¤åˆ¶ä»£ç \n\nï¼ˆ1ï¼‰ç¬¬ä¸€è½®äº‹ä»¶å¾ªç¯æµç¨‹åˆ†æå¦‚ä¸‹ï¼š\n\næ•´ä½“scriptä½œä¸ºç¬¬ä¸€ä¸ªå®ä»»åŠ¡è¿›å…¥ä¸»çº¿ç¨‹ï¼Œé‡åˆ°console.logï¼Œè¾“å‡º1ã€‚\né‡åˆ°setTimeoutï¼Œå…¶å›è°ƒå‡½æ•°è¢«åˆ†å‘åˆ°å®ä»»åŠ¡Event Queueä¸­ã€‚æš‚ä¸”è®°ä¸ºsetTimeout1ã€‚\né‡åˆ°process.nextTick()ï¼Œå…¶å›è°ƒå‡½æ•°è¢«åˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueä¸­ã€‚è®°ä¸ºprocess1ã€‚\né‡åˆ°Promiseï¼Œnew Promiseç›´æ¥æ‰§è¡Œï¼Œè¾“å‡º7ã€‚thenè¢«åˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueä¸­ã€‚è®°ä¸ºthen1ã€‚\nåˆé‡åˆ°äº†setTimeoutï¼Œå…¶å›è°ƒå‡½æ•°è¢«åˆ†å‘åˆ°å®ä»»åŠ¡Event Queueä¸­ï¼Œè®°ä¸ºsetTimeout2ã€‚\n\n\n\n\nå®ä»»åŠ¡Event Queue\nå¾®ä»»åŠ¡Event Queue\n\n\n\nsetTimeout1\nprocess1\n\n\nsetTimeout2\nthen1\n\n\nä¸Šè¡¨æ˜¯ç¬¬ä¸€è½®äº‹ä»¶å¾ªç¯å®ä»»åŠ¡ç»“æŸæ—¶å„Event Queueçš„æƒ…å†µï¼Œæ­¤æ—¶å·²ç»è¾“å‡ºäº†1å’Œ7ã€‚å‘ç°äº†process1å’Œthen1ä¸¤ä¸ªå¾®ä»»åŠ¡ï¼š\n\næ‰§è¡Œprocess1ï¼Œè¾“å‡º6ã€‚\næ‰§è¡Œthen1ï¼Œè¾“å‡º8ã€‚\n\nç¬¬ä¸€è½®äº‹ä»¶å¾ªç¯æ­£å¼ç»“æŸï¼Œè¿™ä¸€è½®çš„ç»“æœæ˜¯è¾“å‡º1ï¼Œ7ï¼Œ6ï¼Œ8ã€‚\nï¼ˆ2ï¼‰ç¬¬äºŒè½®æ—¶é—´å¾ªç¯ä»**setTimeout1**å®ä»»åŠ¡å¼€å§‹ï¼š\n\né¦–å…ˆè¾“å‡º2ã€‚æ¥ä¸‹æ¥é‡åˆ°äº†process.nextTick()ï¼ŒåŒæ ·å°†å…¶åˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueä¸­ï¼Œè®°ä¸ºprocess2ã€‚\nnew Promiseç«‹å³æ‰§è¡Œè¾“å‡º4ï¼Œthenä¹Ÿåˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueä¸­ï¼Œè®°ä¸ºthen2ã€‚\n\n\n\n\nå®ä»»åŠ¡Event Queue\nå¾®ä»»åŠ¡Event Queue\n\n\n\nsetTimeout2\nprocess2\n\n\n\nthen2\n\n\nç¬¬äºŒè½®äº‹ä»¶å¾ªç¯å®ä»»åŠ¡ç»“æŸï¼Œå‘ç°æœ‰process2å’Œthen2ä¸¤ä¸ªå¾®ä»»åŠ¡å¯ä»¥æ‰§è¡Œï¼š\n\nè¾“å‡º3ã€‚\nè¾“å‡º5ã€‚\n\nç¬¬äºŒè½®äº‹ä»¶å¾ªç¯ç»“æŸï¼Œç¬¬äºŒè½®è¾“å‡º2ï¼Œ4ï¼Œ3ï¼Œ5ã€‚\nï¼ˆ3ï¼‰ç¬¬ä¸‰è½®äº‹ä»¶å¾ªç¯å¼€å§‹ï¼Œæ­¤æ—¶åªå‰©setTimeout2äº†ï¼Œæ‰§è¡Œã€‚\n\nç›´æ¥è¾“å‡º9ã€‚\nå°†process.nextTick()åˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueä¸­ã€‚è®°ä¸ºprocess3ã€‚\nç›´æ¥æ‰§è¡Œnew Promiseï¼Œè¾“å‡º11ã€‚\nå°†thenåˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueä¸­ï¼Œè®°ä¸ºthen3ã€‚\n\n\n\n\nå®ä»»åŠ¡Event Queue\nå¾®ä»»åŠ¡Event Queue\n\n\n\n\nprocess3\n\n\n\nthen3\n\n\nç¬¬ä¸‰è½®äº‹ä»¶å¾ªç¯å®ä»»åŠ¡æ‰§è¡Œç»“æŸï¼Œæ‰§è¡Œä¸¤ä¸ªå¾®ä»»åŠ¡process3å’Œthen3ï¼š\n\nè¾“å‡º10ã€‚\nè¾“å‡º12ã€‚\n\nç¬¬ä¸‰è½®äº‹ä»¶å¾ªç¯ç»“æŸï¼Œç¬¬ä¸‰è½®è¾“å‡º9ï¼Œ11ï¼Œ10ï¼Œ12ã€‚\næ•´æ®µä»£ç ï¼Œå…±è¿›è¡Œäº†ä¸‰æ¬¡äº‹ä»¶å¾ªç¯ï¼Œå®Œæ•´çš„è¾“å‡ºä¸º1ï¼Œ7ï¼Œ6ï¼Œ8ï¼Œ2ï¼Œ4ï¼Œ3ï¼Œ5ï¼Œ9ï¼Œ11ï¼Œ10ï¼Œ12ã€‚\n28. ä»£ç è¾“å‡ºç»“æœconsole.log(1)\n\nsetTimeout(() &#x3D;&gt; &#123;\n  console.log(2)\n&#125;)\n\nnew Promise(resolve &#x3D;&gt;  &#123;\n  console.log(3)\n  resolve(4)\n&#125;).then(d &#x3D;&gt; console.log(d))\n\nsetTimeout(() &#x3D;&gt; &#123;\n  console.log(5)\n  new Promise(resolve &#x3D;&gt;  &#123;\n    resolve(6)\n  &#125;).then(d &#x3D;&gt; console.log(d))\n&#125;)\n\nsetTimeout(() &#x3D;&gt; &#123;\n  console.log(7)\n&#125;)\n\nconsole.log(8)\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š\n1\n3\n8\n4\n2\n5\n6\n7\nå¤åˆ¶ä»£ç \n\nä»£ç æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š\n\né¦–å…ˆæ‰§è¡Œscriptä»£ç ï¼Œæ‰“å°å‡º1ï¼›\né‡åˆ°ç¬¬ä¸€ä¸ªå®šæ—¶å™¨ï¼ŒåŠ å…¥åˆ°å®ä»»åŠ¡é˜Ÿåˆ—ï¼›\né‡åˆ°Promiseï¼Œæ‰§è¡Œä»£ç ï¼Œæ‰“å°å‡º3ï¼Œé‡åˆ°resolveï¼Œå°†å…¶åŠ å…¥åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼›\né‡åˆ°ç¬¬äºŒä¸ªå®šæ—¶å™¨ï¼ŒåŠ å…¥åˆ°å®ä»»åŠ¡é˜Ÿåˆ—ï¼›\né‡åˆ°ç¬¬ä¸‰ä¸ªå®šæ—¶å™¨ï¼ŒåŠ å…¥åˆ°å®ä»»åŠ¡é˜Ÿåˆ—ï¼›\nç»§ç»­æ‰§è¡Œscriptä»£ç ï¼Œæ‰“å°å‡º8ï¼Œç¬¬ä¸€è½®æ‰§è¡Œç»“æŸï¼›\næ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ‰“å°å‡ºç¬¬ä¸€ä¸ªPromiseçš„resolveç»“æœï¼š4ï¼›\nå¼€å§‹æ‰§è¡Œå®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ‰§è¡Œç¬¬ä¸€ä¸ªå®šæ—¶å™¨ï¼Œæ‰“å°å‡º2ï¼›\næ­¤æ—¶æ²¡æœ‰å¾®ä»»åŠ¡ï¼Œç»§ç»­æ‰§è¡Œå®ä»»åŠ¡ä¸­çš„ç¬¬äºŒä¸ªå®šæ—¶å™¨ï¼Œé¦–å…ˆæ‰“å°å‡º5ï¼Œé‡åˆ°Promiseï¼Œé¦–é€‰æ‰“å°å‡º6ï¼Œé‡åˆ°resolveï¼Œå°†å…¶åŠ å…¥åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼›\næ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ‰“å°å‡º6ï¼›\næ‰§è¡Œå®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„æœ€åä¸€ä¸ªå®šæ—¶å™¨ï¼Œæ‰“å°å‡º7ã€‚\n\n29. ä»£ç è¾“å‡ºç»“æœconsole.log(1);\n    \nsetTimeout(() &#x3D;&gt; &#123;\n  console.log(2);\n  Promise.resolve().then(() &#x3D;&gt; &#123;\n    console.log(3)\n  &#125;);\n&#125;);\n\nnew Promise((resolve, reject) &#x3D;&gt; &#123;\n  console.log(4)\n  resolve(5)\n&#125;).then((data) &#x3D;&gt; &#123;\n  console.log(data);\n&#125;)\n\nsetTimeout(() &#x3D;&gt; &#123;\n  console.log(6);\n&#125;)\n\nconsole.log(7);\nå¤åˆ¶ä»£ç \n\nä»£ç è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š\n1\n4\n7\n5\n2\n3\n6\nå¤åˆ¶ä»£ç \n\nä»£ç æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š\n\né¦–å…ˆæ‰§è¡Œscripä»£ç ï¼Œæ‰“å°å‡º1ï¼›\né‡åˆ°ç¬¬ä¸€ä¸ªå®šæ—¶å™¨setTimeoutï¼Œå°†å…¶åŠ å…¥åˆ°å®ä»»åŠ¡é˜Ÿåˆ—ï¼›\né‡åˆ°Promiseï¼Œæ‰§è¡Œé‡Œé¢çš„åŒæ­¥ä»£ç ï¼Œæ‰“å°å‡º4ï¼Œé‡åˆ°resolveï¼Œå°†å…¶åŠ å…¥åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼›\né‡åˆ°ç¬¬äºŒä¸ªå®šæ—¶å™¨setTimeoutï¼Œå°†å…¶åŠ å…¥åˆ°çº¢ä»»åŠ¡é˜Ÿåˆ—ï¼›\næ‰§è¡Œscriptä»£ç ï¼Œæ‰“å°å‡º7ï¼Œè‡³æ­¤ç¬¬ä¸€è½®æ‰§è¡Œå®Œæˆï¼›\næŒ‡å®šå¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»£ç ï¼Œæ‰“å°å‡ºresolveçš„ç»“æœï¼š5ï¼›\næ‰§è¡Œå®ä»»åŠ¡ä¸­çš„ç¬¬ä¸€ä¸ªå®šæ—¶å™¨setTimeoutï¼Œé¦–å…ˆæ‰“å°å‡º2ï¼Œç„¶åé‡åˆ°Â Promise.resolve().then()ï¼Œå°†å…¶åŠ å…¥åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼›\næ‰§è¡Œå®Œè¿™ä¸ªå®ä»»åŠ¡ï¼Œå°±å¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ‰“å°å‡º3ï¼›\nç»§ç»­æ‰§è¡Œå®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ç¬¬äºŒä¸ªå®šæ—¶å™¨ï¼Œæ‰“å°å‡º6ã€‚\n\n30. ä»£ç è¾“å‡ºç»“æœPromise.resolve().then(() &#x3D;&gt; &#123;\n    console.log(&#39;1&#39;);\n    throw &#39;Error&#39;;\n&#125;).then(() &#x3D;&gt; &#123;\n    console.log(&#39;2&#39;);\n&#125;).catch(() &#x3D;&gt; &#123;\n    console.log(&#39;3&#39;);\n    throw &#39;Error&#39;;\n&#125;).then(() &#x3D;&gt; &#123;\n    console.log(&#39;4&#39;);\n&#125;).catch(() &#x3D;&gt; &#123;\n    console.log(&#39;5&#39;);\n&#125;).then(() &#x3D;&gt; &#123;\n    console.log(&#39;6&#39;);\n&#125;);\nå¤åˆ¶ä»£ç \n\næ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š\n1 \n3 \n5 \n6\nå¤åˆ¶ä»£ç \n\nåœ¨è¿™é“é¢˜ç›®ä¸­ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ï¼Œæ— è®ºæ˜¯thneè¿˜æ˜¯catchä¸­ï¼Œåªè¦throw æŠ›å‡ºäº†é”™è¯¯ï¼Œå°±ä¼šè¢«catchæ•è·ï¼Œå¦‚æœæ²¡æœ‰throwå‡ºé”™è¯¯ï¼Œå°±è¢«ç»§ç»­æ‰§è¡Œåé¢çš„thenã€‚\n31. ä»£ç è¾“å‡ºç»“æœsetTimeout(function () &#123;\n  console.log(1);\n&#125;, 100);\n\nnew Promise(function (resolve) &#123;\n  console.log(2);\n  resolve();\n  console.log(3);\n&#125;).then(function () &#123;\n  console.log(4);\n  new Promise((resove, reject) &#x3D;&gt; &#123;\n    console.log(5);\n    setTimeout(() &#x3D;&gt;  &#123;\n      console.log(6);\n    &#125;, 10);\n  &#125;)\n&#125;);\nconsole.log(7);\nconsole.log(8);\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœä¸ºï¼š\n2\n3\n7\n8\n4\n5\n6\n1\nå¤åˆ¶ä»£ç \n\nä»£ç æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š\n\né¦–å…ˆé‡åˆ°å®šæ—¶å™¨ï¼Œå°†å…¶åŠ å…¥åˆ°å®ä»»åŠ¡é˜Ÿåˆ—ï¼›\né‡åˆ°Promiseï¼Œé¦–å…ˆæ‰§è¡Œé‡Œé¢çš„åŒæ­¥ä»£ç ï¼Œæ‰“å°å‡º2ï¼Œé‡åˆ°resolveï¼Œå°†å…¶åŠ å…¥åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ‰§è¡Œåé¢åŒæ­¥ä»£ç ï¼Œæ‰“å°å‡º3ï¼›\nç»§ç»­æ‰§è¡Œscriptä¸­çš„ä»£ç ï¼Œæ‰“å°å‡º7å’Œ8ï¼Œè‡³æ­¤ç¬¬ä¸€è½®ä»£ç æ‰§è¡Œå®Œæˆï¼›\næ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»£ç ï¼Œé¦–å…ˆæ‰“å°å‡º4ï¼Œå¦‚é‡åˆ°Promiseï¼Œæ‰§è¡Œå…¶ä¸­çš„åŒæ­¥ä»£ç ï¼Œæ‰“å°å‡º5ï¼Œé‡åˆ°å®šæ—¶å™¨ï¼Œå°†å…¶åŠ å…¥åˆ°å®ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œæ­¤æ—¶å®ä»»åŠ¡é˜Ÿåˆ—ä¸­æœ‰ä¸¤ä¸ªå®šæ—¶å™¨ï¼›\næ‰§è¡Œå®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»£ç ï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦æ³¨æ„æ˜¯çš„ç¬¬ä¸€ä¸ªå®šæ—¶å™¨çš„æ—¶é—´ä¸º100msï¼Œç¬¬äºŒä¸ªå®šæ—¶å™¨çš„æ—¶é—´ä¸º10msï¼Œæ‰€ä»¥å…ˆæ‰§è¡Œç¬¬äºŒä¸ªå®šæ—¶å™¨ï¼Œæ‰“å°å‡º6ï¼›\næ­¤æ—¶å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸ºç©ºï¼Œç»§ç»­æ‰§è¡Œå®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ‰“å°å‡º1ã€‚\n\nåšå®Œè¿™é“é¢˜ç›®ï¼Œæˆ‘ä»¬å°±éœ€è¦æ ¼å¤–æ³¨æ„ï¼Œæ¯ä¸ªå®šæ—¶å™¨çš„æ—¶é—´ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰å®šæ—¶å™¨çš„æ—¶é—´éƒ½ä¸º0å“¦ã€‚\näºŒã€this1. ä»£ç è¾“å‡ºç»“æœfunction foo() &#123;\n  console.log( this.a );\n&#125;\n\nfunction doFoo() &#123;\n  foo();\n&#125;\n\nvar obj &#x3D; &#123;\n  a: 1,\n  doFoo: doFoo\n&#125;;\n\nvar a &#x3D; 2; \nobj.doFoo()\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœï¼š2\nåœ¨Javascriptä¸­ï¼ŒthisæŒ‡å‘å‡½æ•°æ‰§è¡Œæ—¶çš„å½“å‰å¯¹è±¡ã€‚åœ¨æ‰§è¡Œfooçš„æ—¶å€™ï¼Œæ‰§è¡Œç¯å¢ƒå°±æ˜¯doFooå‡½æ•°ï¼Œæ‰§è¡Œç¯å¢ƒä¸ºå…¨å±€ã€‚æ‰€ä»¥ï¼Œfooä¸­çš„thisæ˜¯æŒ‡å‘windowçš„ï¼Œæ‰€ä»¥ä¼šæ‰“å°å‡º2ã€‚\n2. ä»£ç è¾“å‡ºç»“æœvar a &#x3D; 10\nvar obj &#x3D; &#123;\n  a: 20,\n  say: () &#x3D;&gt; &#123;\n    console.log(this.a)\n  &#125;\n&#125;\nobj.say() \n\nvar anotherObj &#x3D; &#123; a: 30 &#125; \nobj.say.apply(anotherObj) \nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœï¼š10 10\næˆ‘ä¹ˆçŸ¥é“ï¼Œç®­å¤´å‡½æ•°æ—¶ä¸ç»‘å®šthisçš„ï¼Œå®ƒçš„thisæ¥è‡ªåŸå…¶çˆ¶çº§æ‰€å¤„çš„ä¸Šä¸‹æ–‡ï¼Œæ‰€ä»¥é¦–å…ˆä¼šæ‰“å°å…¨å±€ä¸­çš„ a çš„å€¼10ã€‚åé¢è™½ç„¶è®©sayæ–¹æ³•æŒ‡å‘äº†å¦å¤–ä¸€ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯ä»ä¸èƒ½æ”¹å˜ç®­å¤´å‡½æ•°çš„ç‰¹æ€§ï¼Œå®ƒçš„thisä»ç„¶æ˜¯æŒ‡å‘å…¨å±€çš„ï¼Œæ‰€ä»¥ä¾æ—§ä¼šè¾“å‡º10ã€‚\nä½†æ˜¯ï¼Œå¦‚æœæ˜¯æ™®é€šå‡½æ•°ï¼Œé‚£ä¹ˆå°±ä¼šæœ‰å®Œå…¨ä¸ä¸€æ ·çš„ç»“æœï¼š\nvar a &#x3D; 10  \nvar obj &#x3D; &#123;  \n  a: 20,  \n  say()&#123;\n    console.log(this.a)  \n  &#125;  \n&#125;  \nobj.say()   \nvar anotherObj&#x3D;&#123;a:30&#125;   \nobj.say.apply(anotherObj)\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœï¼š20 30\nè¿™æ—¶ï¼Œsayæ–¹æ³•ä¸­çš„thiså°±ä¼šæŒ‡å‘ä»–æ‰€åœ¨çš„å¯¹è±¡ï¼Œè¾“å‡ºå…¶ä¸­çš„açš„å€¼ã€‚\n3. ä»£ç è¾“å‡ºç»“æœfunction a() &#123;\n  console.log(this);\n&#125;\na.call(null);\nå¤åˆ¶ä»£ç \n\næ‰“å°ç»“æœï¼šwindowå¯¹è±¡\næ ¹æ®ECMAScript262è§„èŒƒè§„å®šï¼šå¦‚æœç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥çš„å¯¹è±¡è°ƒç”¨è€…æ˜¯nullæˆ–è€…undefinedï¼Œcallæ–¹æ³•å°†æŠŠå…¨å±€å¯¹è±¡ï¼ˆæµè§ˆå™¨ä¸Šæ˜¯windowå¯¹è±¡ï¼‰ä½œä¸ºthisçš„å€¼ã€‚æ‰€ä»¥ï¼Œä¸ç®¡ä¼ å…¥null è¿˜æ˜¯ undefinedï¼Œå…¶thiséƒ½æ˜¯å…¨å±€å¯¹è±¡windowã€‚æ‰€ä»¥ï¼Œåœ¨æµè§ˆå™¨ä¸Šç­”æ¡ˆæ˜¯è¾“å‡º window å¯¹è±¡ã€‚\nè¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œnull å°±æ˜¯ nullï¼Œundefined å°±æ˜¯ undefinedï¼š\n&#39;use strict&#39;;\n\nfunction a() &#123;\n    console.log(this);\n&#125;\na.call(null); &#x2F;&#x2F; null\na.call(undefined); &#x2F;&#x2F; undefined\nå¤åˆ¶ä»£ç \n\n4. ä»£ç è¾“å‡ºç»“æœvar obj &#x3D; &#123; \n  name : &#39;cuggz&#39;, \n  fun : function()&#123; \n    console.log(this.name); \n  &#125; \n&#125; \nobj.fun()     &#x2F;&#x2F; cuggz\nnew obj.fun() &#x2F;&#x2F; undefined\nå¤åˆ¶ä»£ç \n\nä½¿ç”¨newæ„é€ å‡½æ•°æ—¶ï¼Œå…¶thisæŒ‡å‘çš„æ˜¯å…¨å±€ç¯å¢ƒwindowã€‚\n6. ä»£ç è¾“å‡ºç»“æœvar obj &#x3D; &#123;\n   say: function() &#123;\n     var f1 &#x3D; () &#x3D;&gt;  &#123;\n       console.log(&quot;1111&quot;, this);\n     &#125;\n     f1();\n   &#125;,\n   pro: &#123;\n     getPro:() &#x3D;&gt;  &#123;\n        console.log(this);\n     &#125;\n   &#125;\n&#125;\nvar o &#x3D; obj.say;\no();\nobj.say();\nobj.pro.getPro();\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœï¼š\n1111 windowå¯¹è±¡\n1111 objå¯¹è±¡\nwindowå¯¹è±¡\nå¤åˆ¶ä»£ç \n\nè§£æï¼š\n\no()ï¼Œoæ˜¯åœ¨å…¨å±€æ‰§è¡Œçš„ï¼Œè€Œf1æ˜¯ç®­å¤´å‡½æ•°ï¼Œå®ƒæ˜¯æ²¡æœ‰ç»‘å®šthisçš„ï¼Œå®ƒçš„thisæŒ‡å‘å…¶çˆ¶çº§çš„thisï¼Œå…¶çˆ¶çº§sayæ–¹æ³•çš„thisæŒ‡å‘çš„æ˜¯å…¨å±€ä½œç”¨åŸŸï¼Œæ‰€ä»¥ä¼šæ‰“å°å‡ºwindowï¼›\nobj.say()ï¼Œè°è°ƒç”¨sayï¼Œsay çš„thiså°±æŒ‡å‘è°ï¼Œæ‰€ä»¥æ­¤æ—¶thisæŒ‡å‘çš„æ˜¯objå¯¹è±¡ï¼›\nobj.pro.getPro()ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œç®­å¤´å‡½æ•°æ—¶ä¸ç»‘å®šthisçš„ï¼ŒgetProå¤„äºproä¸­ï¼Œè€Œå¯¹è±¡ä¸æ„æˆå•ç‹¬çš„ä½œç”¨åŸŸï¼Œæ‰€ä»¥ç®­å¤´çš„å‡½æ•°çš„thiså°±æŒ‡å‘äº†å…¨å±€ä½œç”¨åŸŸwindowã€‚\n\n7. ä»£ç è¾“å‡ºç»“æœvar myObject &#x3D; &#123;\n    foo: &quot;bar&quot;,\n    func: function() &#123;\n        var self &#x3D; this;\n        console.log(this.foo);  \n        console.log(self.foo);  \n        (function() &#123;\n            console.log(this.foo);  \n            console.log(self.foo);  \n        &#125;());\n    &#125;\n&#125;;\nmyObject.func();\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœï¼šbar bar undefined bar\nè§£æï¼š\n\né¦–å…ˆfuncæ˜¯ç”±myObjectè°ƒç”¨çš„ï¼ŒthisæŒ‡å‘myObjectã€‚åˆå› ä¸ºvar self &#x3D; this;æ‰€ä»¥selfæŒ‡å‘myObjectã€‚\nè¿™ä¸ªç«‹å³æ‰§è¡ŒåŒ¿åå‡½æ•°è¡¨è¾¾å¼æ˜¯ç”±windowè°ƒç”¨çš„ï¼ŒthisæŒ‡å‘window ã€‚ç«‹å³æ‰§è¡ŒåŒ¿åå‡½æ•°çš„ä½œç”¨åŸŸå¤„äºmyObject.funcçš„ä½œç”¨åŸŸä¸­ï¼Œåœ¨è¿™ä¸ªä½œç”¨åŸŸæ‰¾ä¸åˆ°selfå˜é‡ï¼Œæ²¿ç€ä½œç”¨åŸŸé“¾å‘ä¸ŠæŸ¥æ‰¾selfå˜é‡ï¼Œæ‰¾åˆ°äº†æŒ‡å‘ myObjectå¯¹è±¡çš„selfã€‚\n\n8. ä»£ç è¾“å‡ºé—®é¢˜window.number &#x3D; 2;\nvar obj &#x3D; &#123;\nÂ number: 3,\nÂ db1: (function()&#123;\nÂ   console.log(this);\nÂ   this.number *&#x3D; 4;\nÂ   return function()&#123;\nÂ    Â console.log(this);\nÂ    Â this.number *&#x3D; 5;\nÂ   &#125;\nÂ &#125;)()\n&#125;\nvar db1 &#x3D; obj.db1;\ndb1();\nobj.db1();\nconsole.log(obj.number);     &#x2F;&#x2F; 15\nconsole.log(window.number);  &#x2F;&#x2F; 40\nå¤åˆ¶ä»£ç \n\nè¿™é“é¢˜ç›®çœ‹æ¸…èµ·æ¥æœ‰ç‚¹ä¹±ï¼Œä½†æ˜¯å®é™…ä¸Šæ˜¯è€ƒå¯ŸthisæŒ‡å‘çš„:\n\næ‰§è¡Œdb1()æ—¶ï¼ŒthisæŒ‡å‘å…¨å±€ä½œç”¨åŸŸï¼Œæ‰€ä»¥window.number * 4 &#x3D; 8ï¼Œç„¶åæ‰§è¡ŒåŒ¿åå‡½æ•°ï¼Œ æ‰€ä»¥window.number * 5 &#x3D; 40ï¼›\næ‰§è¡Œobj.db1();æ—¶ï¼ŒthisæŒ‡å‘objå¯¹è±¡ï¼Œæ‰§è¡ŒåŒ¿åå‡½æ•°ï¼Œæ‰€ä»¥obj.numer * 5 &#x3D; 15ã€‚\n\n9. ä»£ç è¾“å‡ºç»“æœvar length &#x3D; 10;\nfunction fn() &#123;\n    console.log(this.length);\n&#125;\n \nvar obj &#x3D; &#123;\n  length: 5,\n  method: function(fn) &#123;\n    fn();\n    arguments[0]();\n  &#125;\n&#125;;\n \nobj.method(fn, 1);\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœï¼š 10 2\nè§£æï¼š\n\nç¬¬ä¸€æ¬¡æ‰§è¡Œfn()ï¼ŒthisæŒ‡å‘windowå¯¹è±¡ï¼Œè¾“å‡º10ã€‚\nç¬¬äºŒæ¬¡æ‰§è¡Œarguments0ï¼Œç›¸å½“äºargumentsè°ƒç”¨æ–¹æ³•ï¼ŒthisæŒ‡å‘argumentsï¼Œè€Œè¿™é‡Œä¼ äº†ä¸¤ä¸ªå‚æ•°ï¼Œæ•…è¾“å‡ºargumentsé•¿åº¦ä¸º2ã€‚\n\n10. ä»£ç è¾“å‡ºç»“æœvar a &#x3D; 1;\nfunction printA()&#123;\n  console.log(this.a);\n&#125;\nvar obj&#x3D;&#123;\n  a:2,\n  foo:printA,\n  bar:function()&#123;\n    printA();\n  &#125;\n&#125;\n\nobj.foo(); &#x2F;&#x2F; 2\nobj.bar(); &#x2F;&#x2F; 1\nvar foo &#x3D; obj.foo;\nfoo(); &#x2F;&#x2F; 1\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœï¼š 2 1 1\nè§£æï¼š\n\nobj.foo()ï¼Œfoo çš„thisæŒ‡å‘objå¯¹è±¡ï¼Œæ‰€ä»¥aä¼šè¾“å‡º2ï¼›\nobj.bar()ï¼ŒprintAåœ¨baræ–¹æ³•ä¸­æ‰§è¡Œï¼Œæ‰€ä»¥æ­¤æ—¶printAçš„thisæŒ‡å‘çš„æ˜¯windowï¼Œæ‰€ä»¥ä¼šè¾“å‡º1ï¼›\nfoo()ï¼Œfooæ˜¯åœ¨å…¨å±€å¯¹è±¡ä¸­æ‰§è¡Œçš„ï¼Œæ‰€ä»¥å…¶thisæŒ‡å‘çš„æ˜¯windowï¼Œæ‰€ä»¥ä¼šè¾“å‡º1ï¼›\n\n11. ä»£ç è¾“å‡ºç»“æœvar x &#x3D; 3;\nvar y &#x3D; 4;\nvar obj &#x3D; &#123;\n    x: 1,\n    y: 6,\n    getX: function() &#123;\n        var x &#x3D; 5;\n        return function() &#123;\n            return this.x;\n        &#125;();\n    &#125;,\n    getY: function() &#123;\n        var y &#x3D; 7;\n        return this.y;\n    &#125;\n&#125;\nconsole.log(obj.getX()) &#x2F;&#x2F; 3\nconsole.log(obj.getY()) &#x2F;&#x2F; 6\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœï¼š3 6\nè§£æï¼š\n\næˆ‘ä»¬çŸ¥é“ï¼ŒåŒ¿åå‡½æ•°çš„thisæ˜¯æŒ‡å‘å…¨å±€å¯¹è±¡çš„ï¼Œæ‰€ä»¥thisæŒ‡å‘windowï¼Œä¼šæ‰“å°å‡º3ï¼›\ngetYæ˜¯ç”±objè°ƒç”¨çš„ï¼Œæ‰€ä»¥å…¶thisæŒ‡å‘çš„æ˜¯objå¯¹è±¡ï¼Œä¼šæ‰“å°å‡º6ã€‚\n\n12. ä»£ç è¾“å‡ºç»“æœ var a &#x3D; 10; \n var obt &#x3D; &#123; \n   a: 20, \n   fn: function()&#123; \n     var a &#x3D; 30; \n     console.log(this.a)\n   &#125; \n &#125;\n obt.fn();  &#x2F;&#x2F; 20\n obt.fn.call(); &#x2F;&#x2F; 10\n (obt.fn)(); &#x2F;&#x2F; 20\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœï¼š 20 10 20\nè§£æï¼š\n\nÂ obt.fn()ï¼Œfnæ˜¯ç”±obtè°ƒç”¨çš„ï¼Œæ‰€ä»¥å…¶thisæŒ‡å‘obtå¯¹è±¡ï¼Œä¼šæ‰“å°å‡º20ï¼›\nÂ obt.fn.call()ï¼Œè¿™é‡Œcallçš„å‚æ•°å•¥éƒ½æ²¡å†™ï¼Œå°±è¡¨ç¤ºnullï¼Œæˆ‘ä»¬çŸ¥é“å¦‚æœcallçš„å‚æ•°ä¸ºundefinedæˆ–nullï¼Œé‚£ä¹ˆthiså°±ä¼šæŒ‡å‘å…¨å±€å¯¹è±¡thisï¼Œæ‰€ä»¥ä¼šæ‰“å°å‡º 10ï¼›\nÂ (obt.fn)()ï¼Œ è¿™é‡Œç»™è¡¨è¾¾å¼åŠ äº†æ‹¬å·ï¼Œè€Œæ‹¬å·çš„ä½œç”¨æ˜¯æ”¹å˜è¡¨è¾¾å¼çš„è¿ç®—é¡ºåºï¼Œè€Œåœ¨è¿™é‡ŒåŠ ä¸ä¸åŠ æ‹¬å·å¹¶æ— å½±å“ï¼›ç›¸å½“äº Â obt.fn()ï¼Œæ‰€ä»¥ä¼šæ‰“å°å‡º 20ï¼›\n\n13. ä»£ç è¾“å‡ºç»“æœfunction a(xx)&#123;\n  this.x &#x3D; xx;\n  return this\n&#125;;\nvar x &#x3D; a(5);\nvar y &#x3D; a(6);\n\nconsole.log(x.x)  &#x2F;&#x2F; undefined\nconsole.log(y.x)  &#x2F;&#x2F; 6\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœï¼š undefined 6\nè§£æï¼š\n\næœ€å…³é”®çš„å°±æ˜¯var x &#x3D; a(5)ï¼Œå‡½æ•°aæ˜¯åœ¨å…¨å±€ä½œç”¨åŸŸè°ƒç”¨ï¼Œæ‰€ä»¥å‡½æ•°å†…éƒ¨çš„thisæŒ‡å‘windowå¯¹è±¡ã€‚æ‰€ä»¥ this.x &#x3D; 5 å°±ç›¸å½“äºï¼šwindow.x &#x3D; 5ã€‚ä¹‹å return thisï¼Œä¹Ÿå°±æ˜¯è¯´ var x &#x3D; a(5) ä¸­çš„xå˜é‡çš„å€¼æ˜¯windowï¼Œè¿™é‡Œçš„xå°†å‡½æ•°å†…éƒ¨çš„xçš„å€¼è¦†ç›–äº†ã€‚ç„¶åæ‰§è¡Œconsole.log(x.x)ï¼Œ ä¹Ÿå°±æ˜¯console.log(window.x)ï¼Œè€Œwindowå¯¹è±¡ä¸­æ²¡æœ‰xå±æ€§ï¼Œæ‰€ä»¥ä¼šè¾“å‡ºundefinedã€‚\nå½“æŒ‡å‘y.xæ—¶ï¼Œä¼šç»™å…¨å±€å˜é‡ä¸­çš„xèµ‹å€¼ä¸º6ï¼Œæ‰€ä»¥ä¼šæ‰“å°å‡º6ã€‚\n\n14. ä»£ç è¾“å‡ºç»“æœfunction foo(something)&#123;\n    this.a &#x3D; something\n&#125;\n\nvar obj1 &#x3D; &#123;\n    foo: foo\n&#125;\n\nvar obj2 &#x3D; &#123;&#125;\n\nobj1.foo(2); \nconsole.log(obj1.a); &#x2F;&#x2F; 2\n\nobj1.foo.call(obj2, 3);\nconsole.log(obj2.a); &#x2F;&#x2F; 3\n\nvar bar &#x3D; new obj1.foo(4)\nconsole.log(obj1.a); &#x2F;&#x2F; 2\nconsole.log(bar.a); &#x2F;&#x2F; 4\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœï¼š 2 3 2 4\nè§£æï¼š\n\né¦–å…ˆæ‰§è¡Œobj1.foo(2);Â ä¼šåœ¨objä¸­æ·»åŠ aå±æ€§ï¼Œå…¶å€¼ä¸º2ã€‚ä¹‹åæ‰§è¡Œobj1.aï¼Œaæ˜¯å³obj1è°ƒç”¨çš„ï¼Œæ‰€ä»¥thisæŒ‡å‘objï¼Œæ‰“å°å‡º2ï¼›\næ‰§è¡Œ obj1.foo.call(obj2, 3) æ—¶ï¼Œä¼šå°†fooçš„thisæŒ‡å‘obj2ï¼Œåé¢å°±å’Œä¸Šé¢ä¸€æ ·äº†ï¼Œæ‰€ä»¥ä¼šæ‰“å°å‡º3ï¼›\nobj1.aä¼šæ‰“å°å‡º2ï¼›\næœ€åå°±æ˜¯è€ƒå¯Ÿthisç»‘å®šçš„ä¼˜å…ˆçº§äº†ï¼Œnew ç»‘å®šæ˜¯æ¯”éšå¼ç»‘å®šä¼˜å…ˆçº§é«˜ï¼Œæ‰€ä»¥ä¼šè¾“å‡º4ã€‚\n\n15. ä»£ç è¾“å‡ºç»“æœfunction foo(something)&#123;\n    this.a &#x3D; something\n&#125;\n\nvar obj1 &#x3D; &#123;&#125;\n\nvar bar &#x3D; foo.bind(obj1);\nbar(2);\nconsole.log(obj1.a); &#x2F;&#x2F; 2\n\nvar baz &#x3D; new bar(3);\nconsole.log(obj1.a); &#x2F;&#x2F; 2\nconsole.log(baz.a); &#x2F;&#x2F; 3\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœï¼š 2 2 3\nè¿™é“é¢˜ç›®å’Œä¸Šé¢é¢˜ç›®å·®ä¸å¤šï¼Œä¸»è¦éƒ½æ˜¯è€ƒå¯Ÿthisç»‘å®šçš„ä¼˜å…ˆçº§ã€‚è®°ä½ä»¥ä¸‹ç»“è®ºå³å¯ï¼šthisç»‘å®šçš„ä¼˜å…ˆçº§ï¼šnewç»‘å®š &gt; æ˜¾å¼ç»‘å®š &gt; éšå¼ç»‘å®š &gt; é»˜è®¤ç»‘å®šã€‚\nä¸‰ã€ä½œç”¨åŸŸ&amp;å˜é‡æå‡&amp;é—­åŒ…1. ä»£ç è¾“å‡ºç»“æœ(function()&#123;\n   var x &#x3D; y &#x3D; 1;\n&#125;)();\nvar z;\n\nconsole.log(y); &#x2F;&#x2F; 1\nconsole.log(z); &#x2F;&#x2F; undefined\nconsole.log(x); &#x2F;&#x2F; Uncaught ReferenceError: x is not defined\nå¤åˆ¶ä»£ç \n\nè¿™æ®µä»£ç çš„å…³é”®åœ¨äºï¼švar x &#x3D; y &#x3D; 1; å®é™…ä¸Šè¿™é‡Œæ˜¯ä»å³å¾€å·¦æ‰§è¡Œçš„ï¼Œé¦–å…ˆæ‰§è¡Œy &#x3D; 1, å› ä¸ºyæ²¡æœ‰ä½¿ç”¨varå£°æ˜ï¼Œæ‰€ä»¥å®ƒæ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œç„¶åç¬¬äºŒæ­¥æ˜¯å°†yèµ‹å€¼ç»™xï¼Œè®²ä¸€ä¸ªå…¨å±€å˜é‡èµ‹å€¼ç»™äº†ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œæœ€ç»ˆï¼Œxæ˜¯ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œyæ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œæ‰€ä»¥æ‰“å°xæ˜¯æŠ¥é”™ã€‚\n2. ä»£ç è¾“å‡ºç»“æœvar a, b\n(function () &#123;\n   console.log(a);\n   console.log(b);\n   var a &#x3D; (b &#x3D; 3);\n   console.log(a);\n   console.log(b);   \n&#125;)()\nconsole.log(a);\nconsole.log(b);\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœï¼š\nundefined \nundefined \n3 \n3 \nundefined \n3\nå¤åˆ¶ä»£ç \n\nè¿™ä¸ªé¢˜ç›®å’Œä¸Šé¢é¢˜ç›®è€ƒå¯Ÿçš„çŸ¥è¯†ç‚¹ç±»ä¼¼ï¼Œbèµ‹å€¼ä¸º3ï¼Œbæ­¤æ—¶æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œè€Œå°†3èµ‹å€¼ç»™aï¼Œaæ˜¯ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œæ‰€ä»¥æœ€åæ‰“å°çš„æ—¶å€™ï¼Œaä»æ—§æ˜¯undefinedã€‚\n3. ä»£ç è¾“å‡ºç»“æœvar friendName &#x3D; &#39;World&#39;;\n(function() &#123;\n  if (typeof friendName &#x3D;&#x3D;&#x3D; &#39;undefined&#39;) &#123;\n    var friendName &#x3D; &#39;Jack&#39;;\n    console.log(&#39;Goodbye &#39; + friendName);\n  &#125; else &#123;\n    console.log(&#39;Hello &#39; + friendName);\n  &#125;\n&#125;)();\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœï¼šGoodbye Jack\næˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ JavaScriptä¸­ï¼Œ Function å’Œ var éƒ½ä¼šè¢«æå‡ï¼ˆå˜é‡æå‡ï¼‰ï¼Œæ‰€ä»¥ä¸Šé¢çš„ä»£ç å°±ç›¸å½“äºï¼š\nvar name &#x3D; &#39;World!&#39;;\n(function () &#123;\n    var name;\n    if (typeof name &#x3D;&#x3D;&#x3D; &#39;undefined&#39;) &#123;\n        name &#x3D; &#39;Jack&#39;;\n        console.log(&#39;Goodbye &#39; + name);\n    &#125; else &#123;\n        console.log(&#39;Hello &#39; + name);\n    &#125;\n&#125;)();\nå¤åˆ¶ä»£ç \n\nè¿™æ ·ï¼Œç­”æ¡ˆå°±ä¸€ç›®äº†ç„¶äº†ã€‚\n4. ä»£ç è¾“å‡ºç»“æœfunctionÂ fn1()&#123;\nÂ Â console.log(&#39;fn1&#39;)\n&#125;\nvarÂ fn2\n \nfn1()\nfn2()\n \nfn2Â &#x3D;Â function() &#123;\nÂ Â console.log(&#39;fn2&#39;)\n&#125;\n \nfn2()\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœï¼š\nfn1\nUncaught TypeError: fn2 is not a function\nfn2\nå¤åˆ¶ä»£ç \n\nè¿™é‡Œä¹Ÿæ˜¯åœ¨è€ƒå¯Ÿå˜é‡æå‡ï¼Œå…³é”®åœ¨äºç¬¬ä¸€ä¸ªfn2()ï¼Œè¿™æ—¶fn2ä»æ˜¯ä¸€ä¸ªundefinedçš„å˜é‡ï¼Œæ‰€ä»¥ä¼šæŠ¥é”™fn2ä¸æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚\n5. ä»£ç è¾“å‡ºç»“æœfunction a() &#123;\n    var temp &#x3D; 10;\n    function b() &#123;\n        console.log(temp); &#x2F;&#x2F; 10\n    &#125;\n    b();\n&#125;\na();\n\nfunction a() &#123;\n    var temp &#x3D; 10;\n    b();\n&#125;\nfunction b() &#123;\n    console.log(temp); &#x2F;&#x2F; æŠ¥é”™ Uncaught ReferenceError: temp is not defined\n&#125;\na();\nå¤åˆ¶ä»£ç \n\nåœ¨ä¸Šé¢çš„ä¸¤æ®µä»£ç ä¸­ï¼Œç¬¬ä¸€æ®µæ˜¯å¯ä»¥æ­£å¸¸è¾“å‡ºï¼Œè¿™ä¸ªåº”è¯¥æ²¡å•¥é—®é¢˜ï¼Œå…³é”®åœ¨äºç¬¬äºŒæ®µä»£ç ï¼Œå®ƒä¼šæŠ¥é”™Uncaught ReferenceError: temp is not definedã€‚è¿™æ—¶å› ä¸ºåœ¨bæ–¹æ³•æ‰§è¡Œæ—¶ï¼Œtemp çš„å€¼ä¸ºundefinedã€‚\n6. ä»£ç è¾“å‡ºç»“æœ var a&#x3D;3;\n function c()&#123;\n    alert(a);\n &#125;\n (function()&#123;\n  var a&#x3D;4;\n  c();\n &#125;)();\nå¤åˆ¶ä»£ç \n\njsä¸­å˜é‡çš„ä½œç”¨åŸŸé“¾ä¸å®šä¹‰æ—¶çš„ç¯å¢ƒæœ‰å…³ï¼Œä¸æ‰§è¡Œæ—¶æ— å…³ã€‚æ‰§è¡Œç¯å¢ƒåªä¼šæ”¹å˜thisã€ä¼ é€’çš„å‚æ•°ã€å…¨å±€å˜é‡ç­‰\n7. ä»£ç è¾“å‡ºé—®é¢˜function fun(n, o) &#123;\n  console.log(o)\n  return &#123;\n    fun: function(m)&#123;\n      return fun(m, n);\n    &#125;\n  &#125;;\n&#125;\nvar a &#x3D; fun(0);  a.fun(1);  a.fun(2);  a.fun(3);\nvar b &#x3D; fun(0).fun(1).fun(2).fun(3);\nvar c &#x3D; fun(0).fun(1);  c.fun(2);  c.fun(3);\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœï¼š\nundefined  0  0  0\nundefined  0  1  2\nundefined  0  1  1\nå¤åˆ¶ä»£ç \n\nè¿™æ˜¯ä¸€é“å…³äºé—­åŒ…çš„é¢˜ç›®ï¼Œå¯¹äºfunæ–¹æ³•ï¼Œè°ƒç”¨ä¹‹åè¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œå½“è°ƒç”¨å‡½æ•°çš„æ—¶å€™ä¼ å…¥çš„å®å‚æ¯”å‡½æ•°å£°æ˜æ—¶æŒ‡å®šçš„å½¢å‚ä¸ªæ•°è¦å°‘ï¼Œå‰©ä¸‹çš„å½¢å‚éƒ½å°†è®¾ç½®ä¸ºundefinedå€¼ã€‚æ‰€ä»¥ console.log(o);Â ä¼šè¾“å‡ºundefinedã€‚è€Œaå°±æ˜¯æ˜¯fun(0)è¿”å›çš„é‚£ä¸ªå¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå‡½æ•°funä¸­å‚æ•° n çš„å€¼æ˜¯0ï¼Œè€Œè¿”å›çš„é‚£ä¸ªå¯¹è±¡ä¸­ï¼Œéœ€è¦ä¸€ä¸ªå‚æ•°nï¼Œè€Œè¿™ä¸ªå¯¹è±¡çš„ä½œç”¨åŸŸä¸­æ²¡æœ‰nï¼Œå®ƒå°±ç»§ç»­æ²¿ç€ä½œç”¨åŸŸå‘ä¸Šä¸€çº§çš„ä½œç”¨åŸŸä¸­å¯»æ‰¾nï¼Œæœ€ååœ¨å‡½æ•°funä¸­æ‰¾åˆ°äº†nï¼Œnçš„å€¼æ˜¯0ã€‚äº†è§£äº†è¿™ä¸€ç‚¹ï¼Œå…¶ä»–è¿ç®—å°±å¾ˆç®€å•äº†ï¼Œä»¥æ­¤ç±»æ¨ã€‚\n8. ä»£ç è¾“å‡ºç»“æœf &#x3D; function() &#123;return true;&#125;;   \ng &#x3D; function() &#123;return false;&#125;;   \n(function() &#123;   \n   if (g() &amp;&amp; [] &#x3D;&#x3D; ![]) &#123;   \n      f &#x3D; function f() &#123;return false;&#125;;   \n      function g() &#123;return true;&#125;   \n   &#125;   \n&#125;)();   \nconsole.log(f());\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœï¼š false\nè¿™é‡Œé¦–å…ˆå®šä¹‰äº†ä¸¤ä¸ªå˜é‡få’Œgï¼Œæˆ‘ä»¬çŸ¥é“å˜é‡æ˜¯å¯ä»¥é‡æ–°èµ‹å€¼çš„ã€‚åé¢æ˜¯ä¸€ä¸ªåŒ¿åè‡ªæ‰§è¡Œå‡½æ•°ï¼Œåœ¨ if æ¡ä»¶ä¸­è°ƒç”¨äº†å‡½æ•° g()ï¼Œç”±äºåœ¨åŒ¿åå‡½æ•°ä¸­ï¼Œåˆé‡æ–°å®šä¹‰äº†å‡½æ•°gï¼Œå°±è¦†ç›–äº†å¤–éƒ¨å®šä¹‰çš„å˜é‡gï¼Œæ‰€ä»¥ï¼Œè¿™é‡Œè°ƒç”¨çš„æ˜¯å†…éƒ¨å‡½æ•° g æ–¹æ³•ï¼Œè¿”å›ä¸º trueã€‚ç¬¬ä¸€ä¸ªæ¡ä»¶é€šè¿‡ï¼Œè¿›å…¥ç¬¬äºŒä¸ªæ¡ä»¶ã€‚\nç¬¬äºŒä¸ªæ¡ä»¶æ˜¯[] &#x3D;&#x3D; ![]ï¼Œå…ˆçœ‹ ![] ï¼Œåœ¨ JavaScript ä¸­ï¼Œå½“ç”¨äºå¸ƒå°”è¿ç®—æ—¶ï¼Œæ¯”å¦‚åœ¨è¿™é‡Œï¼Œå¯¹è±¡çš„éç©ºå¼•ç”¨è¢«è§†ä¸º trueï¼Œç©ºå¼•ç”¨ null åˆ™è¢«è§†ä¸º falseã€‚ç”±äºè¿™é‡Œä¸æ˜¯ä¸€ä¸ª null, è€Œæ˜¯ä¸€ä¸ªæ²¡æœ‰å…ƒç´ çš„æ•°ç»„ï¼Œæ‰€ä»¥ [] è¢«è§†ä¸º true, è€Œ ![] çš„ç»“æœå°±æ˜¯ false äº†ã€‚å½“ä¸€ä¸ªå¸ƒå°”å€¼å‚ä¸åˆ°æ¡ä»¶è¿ç®—çš„æ—¶å€™ï¼Œtrue ä¼šè¢«çœ‹ä½œ 1, è€Œ false ä¼šè¢«çœ‹ä½œ 0ã€‚ç°åœ¨æ¡ä»¶å˜æˆäº† [] &#x3D;&#x3D; 0 çš„é—®é¢˜äº†ï¼Œå½“ä¸€ä¸ªå¯¹è±¡å‚ä¸æ¡ä»¶æ¯”è¾ƒçš„æ—¶å€™ï¼Œå®ƒä¼šè¢«æ±‚å€¼ï¼Œæ±‚å€¼çš„ç»“æœæ˜¯æ•°ç»„æˆä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œ[] çš„ç»“æœå°±æ˜¯ â€˜â€™ ï¼Œè€Œ â€˜â€™ ä¼šè¢«å½“ä½œ 0 ï¼Œæ‰€ä»¥ï¼Œæ¡ä»¶æˆç«‹ã€‚\nä¸¤ä¸ªæ¡ä»¶éƒ½æˆç«‹ï¼Œæ‰€ä»¥ä¼šæ‰§è¡Œæ¡ä»¶ä¸­çš„ä»£ç ï¼Œ f åœ¨å®šä¹‰æ˜¯æ²¡æœ‰ä½¿ç”¨varï¼Œæ‰€ä»¥ä»–æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ã€‚å› æ­¤ï¼Œè¿™é‡Œä¼šé€šè¿‡é—­åŒ…è®¿é—®åˆ°å¤–éƒ¨çš„å˜é‡ f, é‡æ–°èµ‹å€¼ï¼Œç°åœ¨æ‰§è¡Œ f å‡½æ•°è¿”å›å€¼å·²ç»æˆä¸º false äº†ã€‚è€Œ g åˆ™ä¸ä¼šæœ‰è¿™ä¸ªé—®é¢˜ï¼Œè¿™é‡Œæ˜¯ä¸€ä¸ªå‡½æ•°å†…å®šä¹‰çš„ gï¼Œä¸ä¼šå½±å“åˆ°å¤–éƒ¨çš„ g å‡½æ•°ã€‚æ‰€ä»¥æœ€åçš„ç»“æœå°±æ˜¯ falseã€‚\nå››ã€åŸå‹&amp;ç»§æ‰¿1. ä»£ç è¾“å‡ºç»“æœfunction Person(name) &#123;\n    this.name &#x3D; name\n&#125;\nvar p2 &#x3D; new Person(&#39;king&#39;);\nconsole.log(p2.__proto__) &#x2F;&#x2F;Person.prototype\nconsole.log(p2.__proto__.__proto__) &#x2F;&#x2F;Object.prototype\nconsole.log(p2.__proto__.__proto__.__proto__) &#x2F;&#x2F; null\nconsole.log(p2.__proto__.__proto__.__proto__.__proto__)&#x2F;&#x2F;nullåé¢æ²¡æœ‰äº†ï¼ŒæŠ¥é”™\nconsole.log(p2.__proto__.__proto__.__proto__.__proto__.__proto__)&#x2F;&#x2F;nullåé¢æ²¡æœ‰äº†ï¼ŒæŠ¥é”™\nconsole.log(p2.constructor)&#x2F;&#x2F;Person\nconsole.log(p2.prototype)&#x2F;&#x2F;undefined p2æ˜¯å®ä¾‹ï¼Œæ²¡æœ‰prototypeå±æ€§\nconsole.log(Person.constructor)&#x2F;&#x2F;Function ä¸€ä¸ªç©ºå‡½æ•°\nconsole.log(Person.prototype)&#x2F;&#x2F;æ‰“å°å‡ºPerson.prototypeè¿™ä¸ªå¯¹è±¡é‡Œæ‰€æœ‰çš„æ–¹æ³•å’Œå±æ€§\nconsole.log(Person.prototype.constructor)&#x2F;&#x2F;Person\nconsole.log(Person.prototype.__proto__)&#x2F;&#x2F; Object.prototype\nconsole.log(Person.__proto__) &#x2F;&#x2F;Function.prototype\nconsole.log(Function.prototype.__proto__)&#x2F;&#x2F;Object.prototype\nconsole.log(Function.__proto__)&#x2F;&#x2F;Function.prototype\nconsole.log(Object.__proto__)&#x2F;&#x2F;Function.prototype\nconsole.log(Object.prototype.__proto__)&#x2F;&#x2F;null\nå¤åˆ¶ä»£ç \n\nè¿™é“ä¹‰é¢˜ç›®è€ƒå¯ŸåŸå‹ã€åŸå‹é“¾çš„åŸºç¡€ï¼Œè®°ä½å°±å¯ä»¥äº†ã€‚\n2. ä»£ç è¾“å‡ºç»“æœ&#x2F;&#x2F; a\nfunction Foo () &#123;\n getName &#x3D; function () &#123;\n   console.log(1);\n &#125;\n return this;\n&#125;\n&#x2F;&#x2F; b\nFoo.getName &#x3D; function () &#123;\n console.log(2);\n&#125;\n&#x2F;&#x2F; c\nFoo.prototype.getName &#x3D; function () &#123;\n console.log(3);\n&#125;\n&#x2F;&#x2F; d\nvar getName &#x3D; function () &#123;\n console.log(4);\n&#125;\n&#x2F;&#x2F; e\nfunction getName () &#123;\n console.log(5);\n&#125;\n\nFoo.getName();           &#x2F;&#x2F; 2\ngetName();               &#x2F;&#x2F; 4\nFoo().getName();         &#x2F;&#x2F; 1\ngetName();               &#x2F;&#x2F; 1 \nnew Foo.getName();       &#x2F;&#x2F; 2\nnew Foo().getName();     &#x2F;&#x2F; 3\nnew new Foo().getName(); &#x2F;&#x2F; 3\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœï¼š2 4 1 1 2 3 3\nè§£æï¼š\n\nFoo.getName()ï¼Œ Fooä¸ºä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼Œå¯¹è±¡éƒ½å¯ä»¥æœ‰å±æ€§ï¼Œb å¤„å®šä¹‰Fooçš„getNameå±æ€§ä¸ºå‡½æ•°ï¼Œè¾“å‡º2ï¼›\ngetName()ï¼Œ è¿™é‡Œçœ‹dã€eå¤„ï¼Œdä¸ºå‡½æ•°è¡¨è¾¾å¼ï¼Œeä¸ºå‡½æ•°å£°æ˜ï¼Œä¸¤è€…åŒºåˆ«åœ¨äºå˜é‡æå‡ï¼Œå‡½æ•°å£°æ˜çš„ 5 ä¼šè¢«åè¾¹å‡½æ•°è¡¨è¾¾å¼çš„ 4 è¦†ç›–ï¼›\n**Â Foo().getName()ï¼Œ** è¿™é‡Œè¦çœ‹aå¤„ï¼Œåœ¨Fooå†…éƒ¨å°†å…¨å±€çš„getNameé‡æ–°èµ‹å€¼ä¸º console.log(1) çš„å‡½æ•°ï¼Œæ‰§è¡ŒFoo()è¿”å› thisï¼Œè¿™ä¸ªthisæŒ‡å‘windowï¼ŒFoo().getName() å³ä¸ºwindow.getName()ï¼Œè¾“å‡º 1ï¼›\ngetName()ï¼Œ ä¸Šé¢3ä¸­ï¼Œå…¨å±€çš„getNameå·²ç»è¢«é‡æ–°èµ‹å€¼ï¼Œæ‰€ä»¥è¿™é‡Œä¾ç„¶è¾“å‡º 1ï¼›\nnew Foo.getName()ï¼Œ è¿™é‡Œç­‰ä»·äºÂ new (Foo.getName())ï¼Œå…ˆæ‰§è¡Œ Foo.getName()ï¼Œè¾“å‡º 2ï¼Œç„¶ånewä¸€ä¸ªå®ä¾‹ï¼›\nnew Foo().getName()ï¼Œ è¿™ é‡Œç­‰ä»·äº (new Foo()).getName(), å…ˆnewä¸€ä¸ªFooçš„å®ä¾‹ï¼Œå†æ‰§è¡Œè¿™ä¸ªå®ä¾‹çš„getNameæ–¹æ³•ï¼Œä½†æ˜¯è¿™ä¸ªå®ä¾‹æœ¬èº«æ²¡æœ‰è¿™ä¸ªæ–¹æ³•ï¼Œæ‰€ä»¥å»åŸå‹é“¾__protot__ä¸Šè¾¹æ‰¾ï¼Œå®ä¾‹.protot &#x3D;&#x3D;&#x3D; Foo.prototypeï¼Œæ‰€ä»¥è¾“å‡º 3ï¼›\nnew new Foo().getName()ï¼Œ è¿™é‡Œç­‰ä»·äºnew (new Foo().getName())ï¼Œå¦‚ä¸Šè¿°6ï¼Œå…ˆè¾“å‡º 3ï¼Œç„¶ånew ä¸€ä¸ªÂ new Foo().getName() çš„å®ä¾‹ã€‚\n\n3. ä»£ç è¾“å‡ºç»“æœvar F &#x3D; function() &#123;&#125;;\nObject.prototype.a &#x3D; function() &#123;\n  console.log(&#39;a&#39;);\n&#125;;\nFunction.prototype.b &#x3D; function() &#123;\n  console.log(&#39;b&#39;);\n&#125;\nvar f &#x3D; new F();\nf.a();\nf.b();\nF.a();\nF.b()\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœï¼š\na\nUncaught TypeError: f.b is not a function\na\nb\nå¤åˆ¶ä»£ç \n\nè§£æï¼š\n\nf å¹¶ä¸æ˜¯ Function çš„å®ä¾‹ï¼Œå› ä¸ºå®ƒæœ¬æ¥å°±ä¸æ˜¯æ„é€ å‡½æ•°ï¼Œè°ƒç”¨çš„æ˜¯ Function åŸå‹é“¾ä¸Šçš„ç›¸å…³å±æ€§å’Œæ–¹æ³•ï¼Œåªèƒ½è®¿é—®åˆ° Object åŸå‹é“¾ã€‚æ‰€ä»¥ f.a() è¾“å‡º aÂ  ï¼Œè€Œ f.b() å°±æŠ¥é”™äº†ã€‚\nF æ˜¯ä¸ªæ„é€ å‡½æ•°ï¼Œè€Œ F æ˜¯æ„é€ å‡½æ•° Function çš„ä¸€ä¸ªå®ä¾‹ã€‚å› ä¸º F instanceofÂ  Object &#x3D;&#x3D;&#x3D; trueï¼ŒF instanceof Function &#x3D;&#x3D;&#x3D; trueï¼Œç”±æ­¤å¯ä»¥å¾—å‡ºç»“è®ºï¼šF æ˜¯ Object å’Œ Function ä¸¤ä¸ªçš„å®ä¾‹ï¼Œå³ F èƒ½è®¿é—®åˆ° aï¼Œ ä¹Ÿèƒ½è®¿é—®åˆ° bã€‚æ‰€ä»¥ F.a() è¾“å‡º a ï¼ŒF.b() è¾“å‡º bã€‚\n\n4. ä»£ç è¾“å‡ºç»“æœfunction Foo()&#123;\n    Foo.a &#x3D; function()&#123;\n        console.log(1);\n    &#125;\n    this.a &#x3D; function()&#123;\n        console.log(2)\n    &#125;\n&#125;\n\nFoo.prototype.a &#x3D; function()&#123;\n    console.log(3);\n&#125;\n\nFoo.a &#x3D; function()&#123;\n    console.log(4);\n&#125;\n\nFoo.a();\nlet obj &#x3D; new Foo();\nobj.a();\nFoo.a();\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœï¼š4 2 1\nè§£æï¼š\n\nFoo.a() è¿™ä¸ªæ˜¯è°ƒç”¨ Foo å‡½æ•°çš„é™æ€æ–¹æ³• aï¼Œè™½ç„¶ Foo ä¸­æœ‰ä¼˜å…ˆçº§æ›´é«˜çš„å±æ€§æ–¹æ³• aï¼Œä½† Foo æ­¤æ—¶æ²¡æœ‰è¢«è°ƒç”¨ï¼Œæ‰€ä»¥æ­¤æ—¶è¾“å‡º Foo çš„é™æ€æ–¹æ³• a çš„ç»“æœï¼š4\nlet obj &#x3D; new Foo(); ä½¿ç”¨äº† new æ–¹æ³•è°ƒç”¨äº†å‡½æ•°ï¼Œè¿”å›äº†å‡½æ•°å®ä¾‹å¯¹è±¡ï¼Œæ­¤æ—¶ Foo å‡½æ•°å†…éƒ¨çš„å±æ€§æ–¹æ³•åˆå§‹åŒ–ï¼ŒåŸå‹é“¾å»ºç«‹ã€‚\nobj.a() ; è°ƒç”¨ obj å®ä¾‹ä¸Šçš„æ–¹æ³• aï¼Œè¯¥å®ä¾‹ä¸Šç›®å‰æœ‰ä¸¤ä¸ª a æ–¹æ³•ï¼šä¸€ä¸ªæ˜¯å†…éƒ¨å±æ€§æ–¹æ³•ï¼Œå¦ä¸€ä¸ªæ˜¯åŸå‹ä¸Šçš„æ–¹æ³•ã€‚å½“è¿™ä¸¤è€…éƒ½å­˜åœ¨æ—¶ï¼Œé¦–å…ˆæŸ¥æ‰¾ ownProperty ï¼Œå¦‚æœæ²¡æœ‰æ‰å»åŸå‹é“¾ä¸Šæ‰¾ï¼Œæ‰€ä»¥è°ƒç”¨å®ä¾‹ä¸Šçš„ a è¾“å‡ºï¼š2\nFoo.a() ; æ ¹æ®ç¬¬2æ­¥å¯çŸ¥ Foo å‡½æ•°å†…éƒ¨çš„å±æ€§æ–¹æ³•å·²åˆå§‹åŒ–ï¼Œè¦†ç›–äº†åŒåçš„é™æ€æ–¹æ³•ï¼Œæ‰€ä»¥è¾“å‡ºï¼š1\n\n5. ä»£ç è¾“å‡ºç»“æœfunction Dog() &#123;\n  this.name &#x3D; &#39;puppy&#39;\n&#125;\nDog.prototype.bark &#x3D; () &#x3D;&gt; &#123;\n  console.log(&#39;woof!woof!&#39;)\n&#125;\nconst dog &#x3D; new Dog()\nconsole.log(Dog.prototype.constructor &#x3D;&#x3D;&#x3D; Dog &amp;&amp; dog.constructor &#x3D;&#x3D;&#x3D; Dog &amp;&amp; dog instanceof Dog)\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœï¼štrue\nè§£æï¼š å› ä¸ºconstructoræ˜¯prototypeä¸Šçš„å±æ€§ï¼Œæ‰€ä»¥dog.constructorå®é™…ä¸Šå°±æ˜¯æŒ‡å‘Dog.prototype.constructorï¼›constructorå±æ€§æŒ‡å‘æ„é€ å‡½æ•°ã€‚instanceofè€Œå®é™…æ£€æµ‹çš„æ˜¯ç±»å‹æ˜¯å¦åœ¨å®ä¾‹çš„åŸå‹é“¾ä¸Šã€‚\nconstructoræ˜¯prototypeä¸Šçš„å±æ€§ï¼Œè¿™ä¸€ç‚¹å¾ˆå®¹æ˜“è¢«å¿½ç•¥æ‰ã€‚constructorå’Œinstanceof çš„ä½œç”¨æ˜¯ä¸åŒçš„ï¼Œæ„Ÿæ€§åœ°æ¥è¯´ï¼Œconstructorçš„é™åˆ¶æ¯”è¾ƒä¸¥æ ¼ï¼Œå®ƒåªèƒ½ä¸¥æ ¼å¯¹æ¯”å¯¹è±¡çš„æ„é€ å‡½æ•°æ˜¯ä¸æ˜¯æŒ‡å®šçš„å€¼ï¼›è€Œinstanceofæ¯”è¾ƒæ¾æ•£ï¼Œåªè¦æ£€æµ‹çš„ç±»å‹åœ¨åŸå‹é“¾ä¸Šï¼Œå°±ä¼šè¿”å›trueã€‚\n6. ä»£ç è¾“å‡ºç»“æœvar A &#x3D; &#123;n: 4399&#125;;\nvar B &#x3D;  function()&#123;this.n &#x3D; 9999&#125;;\nvar C &#x3D;  function()&#123;var n &#x3D; 8888&#125;;\nB.prototype &#x3D; A;\nC.prototype &#x3D; A;\nvar b &#x3D; new B();\nvar c &#x3D; new C();\nA.n++\nconsole.log(b.n);\nconsole.log(c.n);\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœï¼š9999 4400\nè§£æï¼š\n\nconsole.log(b.n)ï¼Œåœ¨æŸ¥æ‰¾b.næ˜¯é¦–å…ˆæŸ¥æ‰¾ b å¯¹è±¡è‡ªèº«æœ‰æ²¡æœ‰ n å±æ€§ï¼Œå¦‚æœæ²¡æœ‰ä¼šå»åŸå‹ï¼ˆprototypeï¼‰ä¸ŠæŸ¥æ‰¾ï¼Œå½“æ‰§è¡Œvar b &#x3D; new B()æ—¶ï¼Œå‡½æ•°å†…éƒ¨this.n&#x3D;9999(æ­¤æ—¶thisæŒ‡å‘ b) è¿”å›bå¯¹è±¡ï¼Œbå¯¹è±¡æœ‰è‡ªèº«çš„nå±æ€§ï¼Œæ‰€ä»¥è¿”å› 9999ã€‚\nconsole.log(c.n)ï¼ŒåŒç†ï¼Œå½“æ‰§è¡Œvar c &#x3D; new C()æ—¶ï¼Œcå¯¹è±¡æ²¡æœ‰è‡ªèº«çš„nå±æ€§ï¼Œå‘ä¸ŠæŸ¥æ‰¾ï¼Œæ‰¾åˆ°åŸå‹ ï¼ˆprototypeï¼‰ä¸Šçš„ n å±æ€§ï¼Œå› ä¸º A.n++(æ­¤æ—¶å¯¹è±¡Aä¸­çš„nä¸º4400)ï¼Œ æ‰€ä»¥è¿”å›4400ã€‚\n\n7. ä»£ç è¾“å‡ºé—®é¢˜function A()&#123;\n&#125;\nfunction B(a)&#123;\nã€€ã€€this.a &#x3D; a;\n&#125;\nfunction C(a)&#123;\nã€€ã€€if(a)&#123;\nthis.a &#x3D; a;\nã€€ã€€&#125;\n&#125;\nA.prototype.a &#x3D; 1;\nB.prototype.a &#x3D; 1;\nC.prototype.a &#x3D; 1;\n \nconsole.log(new A().a);\nconsole.log(new B().a);\nconsole.log(new C(2).a);\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœï¼š1 undefined 2\nè§£æï¼š\n\nconsole.log(new A().a)ï¼Œnew A()ä¸ºæ„é€ å‡½æ•°åˆ›å»ºçš„å¯¹è±¡ï¼Œæœ¬èº«æ²¡æœ‰aå±æ€§ï¼Œæ‰€ä»¥å‘å®ƒçš„åŸå‹å»æ‰¾ï¼Œå‘ç°åŸå‹çš„aå±æ€§çš„å±æ€§å€¼ä¸º1ï¼Œæ•…è¯¥è¾“å‡ºå€¼ä¸º1ï¼›\nconsole.log(new B().a)ï¼Œew B()ä¸ºæ„é€ å‡½æ•°åˆ›å»ºçš„å¯¹è±¡ï¼Œè¯¥æ„é€ å‡½æ•°æœ‰å‚æ•°aï¼Œä½†è¯¥å¯¹è±¡æ²¡æœ‰ä¼ å‚ï¼Œæ•…è¯¥è¾“å‡ºå€¼ä¸ºundefined;\nconsole.log(new C(2).a)ï¼Œnew C()ä¸ºæ„é€ å‡½æ•°åˆ›å»ºçš„å¯¹è±¡ï¼Œè¯¥æ„é€ å‡½æ•°æœ‰å‚æ•°aï¼Œä¸”ä¼ çš„å®å‚ä¸º2ï¼Œæ‰§è¡Œå‡½æ•°å†…éƒ¨ï¼Œå‘ç°ifä¸ºçœŸï¼Œæ‰§è¡Œthis.a &#x3D; 2,æ•…å±æ€§açš„å€¼ä¸º2ã€‚\n\n8 ä»£ç è¾“å‡ºé—®é¢˜function Parent() &#123;\n    this.a &#x3D; 1;\n    this.b &#x3D; [1, 2, this.a];\n    this.c &#x3D; &#123; demo: 5 &#125;;\n    this.show &#x3D; function () &#123;\n        console.log(this.a , this.b , this.c.demo );\n    &#125;\n&#125;\n\nfunction Child() &#123;\n    this.a &#x3D; 2;\n    this.change &#x3D; function () &#123;\n        this.b.push(this.a);\n        this.a &#x3D; this.b.length;\n        this.c.demo &#x3D; this.a++;\n    &#125;\n&#125;\n\nChild.prototype &#x3D; new Parent();\nvar parent &#x3D; new Parent();\nvar child1 &#x3D; new Child();\nvar child2 &#x3D; new Child();\nchild1.a &#x3D; 11;\nchild2.a &#x3D; 12;\nparent.show();\nchild1.show();\nchild2.show();\nchild1.change();\nchild2.change();\nparent.show();\nchild1.show();\nchild2.show();\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœï¼š\nparent.show(); &#x2F;&#x2F; 1  [1,2,1] 5\n\nchild1.show(); &#x2F;&#x2F; 11 [1,2,1] 5\nchild2.show(); &#x2F;&#x2F; 12 [1,2,1] 5\n\nparent.show(); &#x2F;&#x2F; 1 [1,2,1] 5\n\nchild1.show(); &#x2F;&#x2F; 5 [1,2,1,11,12] 5\n\nchild2.show(); &#x2F;&#x2F; 6 [1,2,1,11,12] 5\nå¤åˆ¶ä»£ç \n\nè¿™é“é¢˜ç›®å€¼å¾—ç¥å¸ï¼Œä»–æ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹å¾ˆå¤šï¼Œä¾‹å¦‚thisçš„æŒ‡å‘ã€åŸå‹ã€åŸå‹é“¾ã€ç±»çš„ç»§æ‰¿ã€æ•°æ®ç±»å‹ç­‰ã€‚\nè§£æï¼š\n\nparent.show()ï¼Œå¯ä»¥ç›´æ¥è·å¾—æ‰€éœ€çš„å€¼ï¼Œæ²¡å•¥å¥½è¯´çš„ï¼›\nchild1.show()ï¼ŒChildçš„æ„é€ å‡½æ•°åŸæœ¬æ˜¯æŒ‡å‘Childçš„ï¼Œé¢˜ç›®æ˜¾å¼å°†Childç±»çš„åŸå‹å¯¹è±¡æŒ‡å‘äº†Parentç±»çš„ä¸€ä¸ªå®ä¾‹ï¼Œéœ€è¦æ³¨æ„Child.prototypeæŒ‡å‘çš„æ˜¯Parentçš„å®ä¾‹parentï¼Œè€Œä¸æ˜¯æŒ‡å‘Parentè¿™ä¸ªç±»ã€‚\nchild2.show()ï¼Œè¿™ä¸ªä¹Ÿæ²¡å•¥å¥½è¯´çš„ï¼›\nparent.show()ï¼Œparentæ˜¯ä¸€ä¸ªParentç±»çš„å®ä¾‹ï¼ŒChild.prorotypeæŒ‡å‘çš„æ˜¯Parentç±»çš„å¦ä¸€ä¸ªå®ä¾‹ï¼Œä¸¤è€…åœ¨å †å†…å­˜ä¸­äº’ä¸å½±å“ï¼Œæ‰€ä»¥ä¸Šè¿°æ“ä½œä¸å½±å“parentå®ä¾‹ï¼Œæ‰€ä»¥è¾“å‡ºç»“æœä¸å˜ï¼›\nchild1.show()ï¼Œchild1æ‰§è¡Œäº†change()æ–¹æ³•åï¼Œå‘ç”Ÿäº†æ€æ ·çš„å˜åŒ–å‘¢?\n\n\nthis.b.push(this.a)ï¼Œç”±äºthisçš„åŠ¨æ€æŒ‡å‘ç‰¹æ€§ï¼Œthis.bä¼šæŒ‡å‘Child.prototypeä¸Šçš„bæ•°ç»„,this.aä¼šæŒ‡å‘child1çš„aå±æ€§,æ‰€ä»¥Child.prototype.bå˜æˆäº†**[1,2,1,11]**;\nthis.a &#x3D; this.b.lengthï¼Œè¿™æ¡è¯­å¥ä¸­this.aå’Œthis.bçš„æŒ‡å‘ä¸ä¸Šä¸€å¥ä¸€è‡´ï¼Œæ•…ç»“æœä¸ºchild1.aå˜ä¸º4;\nthis.c.demo &#x3D; this.a++ï¼Œç”±äºchild1è‡ªèº«å±æ€§å¹¶æ²¡æœ‰cè¿™ä¸ªå±æ€§ï¼Œæ‰€ä»¥æ­¤å¤„çš„this.cä¼šæŒ‡å‘Child.prototype.cï¼Œthis.aå€¼ä¸º4ï¼Œä¸ºåŸå§‹ç±»å‹ï¼Œæ•…èµ‹å€¼æ“ä½œæ—¶ä¼šç›´æ¥èµ‹å€¼ï¼ŒChild.prototype.c.demoçš„ç»“æœä¸º4ï¼Œè€Œthis.aéšåè‡ªå¢ä¸º5(4 + 1 &#x3D; 5)ã€‚\n\n\nchild2æ‰§è¡Œäº†change()æ–¹æ³•, è€Œchild2å’Œchild1å‡æ˜¯Childç±»çš„å®ä¾‹ï¼Œæ‰€ä»¥ä»–ä»¬çš„åŸå‹é“¾æŒ‡å‘åŒä¸€ä¸ªåŸå‹å¯¹è±¡Child.prototype,ä¹Ÿå°±æ˜¯åŒä¸€ä¸ªparentå®ä¾‹ï¼Œæ‰€ä»¥child2.change()ä¸­æ‰€æœ‰å½±å“åˆ°åŸå‹å¯¹è±¡çš„è¯­å¥éƒ½ä¼šå½±å“child1çš„æœ€ç»ˆè¾“å‡ºç»“æœã€‚\n\n\nthis.b.push(this.a)ï¼Œç”±äºthisçš„åŠ¨æ€æŒ‡å‘ç‰¹æ€§ï¼Œthis.bä¼šæŒ‡å‘Child.prototypeä¸Šçš„bæ•°ç»„,this.aä¼šæŒ‡å‘child2çš„aå±æ€§,æ‰€ä»¥Child.prototype.bå˜æˆäº†**[1,2,1,11,12]**;\nthis.a &#x3D; this.b.lengthï¼Œè¿™æ¡è¯­å¥ä¸­this.aå’Œthis.bçš„æŒ‡å‘ä¸ä¸Šä¸€å¥ä¸€è‡´ï¼Œæ•…ç»“æœä¸ºchild2.aå˜ä¸º5;\nthis.c.demo &#x3D; this.a++ï¼Œç”±äºchild2è‡ªèº«å±æ€§å¹¶æ²¡æœ‰cè¿™ä¸ªå±æ€§ï¼Œæ‰€ä»¥æ­¤å¤„çš„this.cä¼šæŒ‡å‘Child.prototype.cï¼Œæ•…æ‰§è¡Œç»“æœä¸ºChild.prototype.c.demoçš„å€¼å˜ä¸ºchild2.açš„å€¼5ï¼Œè€Œchild2.aæœ€ç»ˆè‡ªå¢ä¸º6(5 + 1 &#x3D; 6)ã€‚\n\n9. ä»£ç è¾“å‡ºç»“æœfunction SuperType()&#123;\n    this.property &#x3D; true;\n&#125;\n\nSuperType.prototype.getSuperValue &#x3D; function()&#123;\n    return this.property;\n&#125;;\n\nfunction SubType()&#123;\n    this.subproperty &#x3D; false;\n&#125;\n\nSubType.prototype &#x3D; new SuperType();\nSubType.prototype.getSubValue &#x3D; function ()&#123;\n    return this.subproperty;\n&#125;;\n\nvar instance &#x3D; new SubType();\nconsole.log(instance.getSuperValue());\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœï¼štrue\nå®é™…ä¸Šï¼Œè¿™æ®µä»£ç å°±æ˜¯åœ¨å®ç°åŸå‹é“¾ç»§æ‰¿ï¼ŒSubTypeç»§æ‰¿äº†SuperTypeï¼Œæœ¬è´¨æ˜¯é‡å†™äº†SubTypeçš„åŸå‹å¯¹è±¡ï¼Œä»£ä¹‹ä»¥ä¸€ä¸ªæ–°ç±»å‹çš„å®ä¾‹ã€‚SubTypeçš„åŸå‹è¢«é‡å†™äº†ï¼Œæ‰€ä»¥instance.constructoræŒ‡å‘çš„æ˜¯SuperTypeã€‚å…·ä½“å¦‚ä¸‹ï¼š \n","slug":"é¢è¯•é¢˜ç¬”è®°â€”â€”ä»£ç è¾“å‡ºç»“æœç¯‡","date":"2022-06-25T10:41:12.000Z","categories_index":"","tags_index":"","author_index":"Beastrong"},{"id":"b9b334bea88dfba73a4e01092c68ab76","title":"æ€§èƒ½ä¼˜åŒ–å¸¸ç”¨æ–¹æ¡ˆ","content":"ä¸€ã€CDN1. CDNçš„æ¦‚å¿µCDNï¼ˆContent Delivery Networkï¼Œå†…å®¹åˆ†å‘ç½‘ç»œï¼‰æ˜¯æŒ‡ä¸€ç§é€šè¿‡äº’è”ç½‘äº’ç›¸è¿æ¥çš„ç”µè„‘ç½‘ç»œç³»ç»Ÿï¼Œåˆ©ç”¨æœ€é è¿‘æ¯ä½ç”¨æˆ·çš„æœåŠ¡å™¨ï¼Œæ›´å¿«ã€æ›´å¯é åœ°å°†éŸ³ä¹ã€å›¾ç‰‡ã€è§†é¢‘ã€åº”ç”¨ç¨‹åºåŠå…¶ä»–æ–‡ä»¶å‘é€ç»™ç”¨æˆ·ï¼Œæ¥æä¾›é«˜æ€§èƒ½ã€å¯æ‰©å±•æ€§åŠä½æˆæœ¬çš„ç½‘ç»œå†…å®¹ä¼ é€’ç»™ç”¨æˆ·ã€‚\nå…¸å‹çš„CDNç³»ç»Ÿç”±ä¸‹é¢ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼š\n\nåˆ†å‘æœåŠ¡ç³»ç»Ÿï¼š æœ€åŸºæœ¬çš„å·¥ä½œå•å…ƒå°±æ˜¯Cacheè®¾å¤‡ï¼Œcacheï¼ˆè¾¹ç¼˜cacheï¼‰è´Ÿè´£ç›´æ¥å“åº”æœ€ç»ˆç”¨æˆ·çš„è®¿é—®è¯·æ±‚ï¼ŒæŠŠç¼“å­˜åœ¨æœ¬åœ°çš„å†…å®¹å¿«é€Ÿåœ°æä¾›ç»™ç”¨æˆ·ã€‚åŒæ—¶cacheè¿˜è´Ÿè´£ä¸æºç«™ç‚¹è¿›è¡Œå†…å®¹åŒæ­¥ï¼ŒæŠŠæ›´æ–°çš„å†…å®¹ä»¥åŠæœ¬åœ°æ²¡æœ‰çš„å†…å®¹ä»æºç«™ç‚¹è·å–å¹¶ä¿å­˜åœ¨æœ¬åœ°ã€‚Cacheè®¾å¤‡çš„æ•°é‡ã€è§„æ¨¡ã€æ€»æœåŠ¡èƒ½åŠ›æ˜¯è¡¡é‡ä¸€ä¸ªCDNç³»ç»ŸæœåŠ¡èƒ½åŠ›çš„æœ€åŸºæœ¬çš„æŒ‡æ ‡ã€‚\nè´Ÿè½½å‡è¡¡ç³»ç»Ÿï¼š ä¸»è¦åŠŸèƒ½æ˜¯è´Ÿè´£å¯¹æ‰€æœ‰å‘èµ·æœåŠ¡è¯·æ±‚çš„ç”¨æˆ·è¿›è¡Œè®¿é—®è°ƒåº¦ï¼Œç¡®å®šæä¾›ç»™ç”¨æˆ·çš„æœ€ç»ˆå®é™…è®¿é—®åœ°å€ã€‚ä¸¤çº§è°ƒåº¦ä½“ç³»åˆ†ä¸ºå…¨å±€è´Ÿè½½å‡è¡¡ï¼ˆGSLBï¼‰å’Œæœ¬åœ°è´Ÿè½½å‡è¡¡ï¼ˆSLBï¼‰ã€‚å…¨å±€è´Ÿè½½å‡è¡¡ä¸»è¦æ ¹æ®ç”¨æˆ·å°±è¿‘æ€§åŸåˆ™ï¼Œé€šè¿‡å¯¹æ¯ä¸ªæœåŠ¡èŠ‚ç‚¹è¿›è¡Œâ€œæœ€ä¼˜â€åˆ¤æ–­ï¼Œç¡®å®šå‘ç”¨æˆ·æä¾›æœåŠ¡çš„cacheçš„ç‰©ç†ä½ç½®ã€‚æœ¬åœ°è´Ÿè½½å‡è¡¡ä¸»è¦è´Ÿè´£èŠ‚ç‚¹å†…éƒ¨çš„è®¾å¤‡è´Ÿè½½å‡è¡¡\nè¿è¥ç®¡ç†ç³»ç»Ÿï¼š è¿è¥ç®¡ç†ç³»ç»Ÿåˆ†ä¸ºè¿è¥ç®¡ç†å’Œç½‘ç»œç®¡ç†å­ç³»ç»Ÿï¼Œè´Ÿè´£å¤„ç†ä¸šåŠ¡å±‚é¢çš„ä¸å¤–ç•Œç³»ç»Ÿäº¤äº’æ‰€å¿…é¡»çš„æ”¶é›†ã€æ•´ç†ã€äº¤ä»˜å·¥ä½œï¼ŒåŒ…å«å®¢æˆ·ç®¡ç†ã€äº§å“ç®¡ç†ã€è®¡è´¹ç®¡ç†ã€ç»Ÿè®¡åˆ†æç­‰åŠŸèƒ½ã€‚\n\n2. CDNçš„ä½œç”¨CDNä¸€èˆ¬ä¼šç”¨æ¥æ‰˜ç®¡Webèµ„æºï¼ˆåŒ…æ‹¬æ–‡æœ¬ã€å›¾ç‰‡å’Œè„šæœ¬ç­‰ï¼‰ï¼Œå¯ä¾›ä¸‹è½½çš„èµ„æºï¼ˆåª’ä½“æ–‡ä»¶ã€è½¯ä»¶ã€æ–‡æ¡£ç­‰ï¼‰ï¼Œåº”ç”¨ç¨‹åºï¼ˆé—¨æˆ·ç½‘ç«™ç­‰ï¼‰ã€‚ä½¿ç”¨CDNæ¥åŠ é€Ÿè¿™äº›èµ„æºçš„è®¿é—®ã€‚\nï¼ˆ1ï¼‰åœ¨æ€§èƒ½æ–¹é¢ï¼Œå¼•å…¥CDNçš„ä½œç”¨åœ¨äºï¼š\n\nç”¨æˆ·æ”¶åˆ°çš„å†…å®¹æ¥è‡ªæœ€è¿‘çš„æ•°æ®ä¸­å¿ƒï¼Œå»¶è¿Ÿæ›´ä½ï¼Œå†…å®¹åŠ è½½æ›´å¿«\néƒ¨åˆ†èµ„æºè¯·æ±‚åˆ†é…ç»™äº†CDNï¼Œå‡å°‘äº†æœåŠ¡å™¨çš„è´Ÿè½½\n\nï¼ˆ2ï¼‰åœ¨å®‰å…¨æ–¹é¢ï¼ŒCDNæœ‰åŠ©äºé˜²å¾¡DDoSã€MITMç­‰ç½‘ç»œæ”»å‡»ï¼š\n\né’ˆå¯¹DDoSï¼šé€šè¿‡ç›‘æ§åˆ†æå¼‚å¸¸æµé‡ï¼Œé™åˆ¶å…¶è¯·æ±‚é¢‘ç‡\né’ˆå¯¹MITMï¼šä»æºæœåŠ¡å™¨åˆ° CDN èŠ‚ç‚¹åˆ° ISPï¼ˆInternet Service Providerï¼‰ï¼Œå…¨é“¾è·¯ HTTPS é€šä¿¡\n\né™¤æ­¤ä¹‹å¤–ï¼ŒCDNä½œä¸ºä¸€ç§åŸºç¡€çš„äº‘æœåŠ¡ï¼ŒåŒæ ·å…·æœ‰èµ„æºæ‰˜ç®¡ã€æŒ‰éœ€æ‰©å±•ï¼ˆèƒ½å¤Ÿåº”å¯¹æµé‡é«˜å³°ï¼‰ç­‰æ–¹é¢çš„ä¼˜åŠ¿ã€‚\n3. CDNçš„åŸç†CDNå’ŒDNSæœ‰ç€å¯†ä¸å¯åˆ†çš„è”ç³»ï¼Œå…ˆæ¥çœ‹ä¸€ä¸‹DNSçš„è§£æåŸŸåè¿‡ç¨‹ï¼Œåœ¨æµè§ˆå™¨è¾“å…¥ www.test.com çš„è§£æè¿‡ç¨‹å¦‚ä¸‹ï¼š ï¼ˆ1ï¼‰ æ£€æŸ¥æµè§ˆå™¨ç¼“å­˜ ï¼ˆ2ï¼‰æ£€æŸ¥æ“ä½œç³»ç»Ÿç¼“å­˜ï¼Œå¸¸è§çš„å¦‚hostsæ–‡ä»¶ ï¼ˆ3ï¼‰æ£€æŸ¥è·¯ç”±å™¨ç¼“å­˜ ï¼ˆ4ï¼‰å¦‚æœå‰å‡ æ­¥éƒ½æ²¡æ²¡æ‰¾åˆ°ï¼Œä¼šå‘ISP(ç½‘ç»œæœåŠ¡æä¾›å•†)çš„LDNSæœåŠ¡å™¨æŸ¥è¯¢ ï¼ˆ5ï¼‰å¦‚æœLDNSæœåŠ¡å™¨æ²¡æ‰¾åˆ°ï¼Œä¼šå‘æ ¹åŸŸåæœåŠ¡å™¨(Root Server)è¯·æ±‚è§£æï¼Œåˆ†ä¸ºä»¥ä¸‹å‡ æ­¥ï¼š\n\næ ¹æœåŠ¡å™¨è¿”å›é¡¶çº§åŸŸå(TLD)æœåŠ¡å™¨å¦‚.comï¼Œ.cnï¼Œ.orgç­‰çš„åœ°å€ï¼Œè¯¥ä¾‹å­ä¸­ä¼šè¿”å›.comçš„åœ°å€\næ¥ç€å‘é¡¶çº§åŸŸåæœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œç„¶åä¼šè¿”å›æ¬¡çº§åŸŸå(SLD)æœåŠ¡å™¨çš„åœ°å€ï¼Œæœ¬ä¾‹å­ä¼šè¿”å›.testçš„åœ°å€\næ¥ç€å‘æ¬¡çº§åŸŸåæœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œç„¶åä¼šè¿”å›é€šè¿‡åŸŸåæŸ¥è¯¢åˆ°çš„ç›®æ ‡IPï¼Œæœ¬ä¾‹å­ä¼šè¿”å›www.test.comçš„åœ°å€\nLocal DNS Serverä¼šç¼“å­˜ç»“æœï¼Œå¹¶è¿”å›ç»™ç”¨æˆ·ï¼Œç¼“å­˜åœ¨ç³»ç»Ÿä¸­\n\nCDNçš„å·¥ä½œåŸç†ï¼š ï¼ˆ1ï¼‰ç”¨æˆ·æœªä½¿ç”¨CDNç¼“å­˜èµ„æºçš„è¿‡ç¨‹ï¼š\n\næµè§ˆå™¨é€šè¿‡DNSå¯¹åŸŸåè¿›è¡Œè§£æï¼ˆå°±æ˜¯ä¸Šé¢çš„DNSè§£æè¿‡ç¨‹ï¼‰ï¼Œä¾æ¬¡å¾—åˆ°æ­¤åŸŸåå¯¹åº”çš„IPåœ°å€\næµè§ˆå™¨æ ¹æ®å¾—åˆ°çš„IPåœ°å€ï¼Œå‘åŸŸåçš„æœåŠ¡ä¸»æœºå‘é€æ•°æ®è¯·æ±‚\næœåŠ¡å™¨å‘æµè§ˆå™¨è¿”å›å“åº”æ•°æ®\n\nï¼ˆ2ï¼‰ç”¨æˆ·ä½¿ç”¨CDNç¼“å­˜èµ„æºçš„è¿‡ç¨‹ï¼š\n\nå¯¹äºç‚¹å‡»çš„æ•°æ®çš„URLï¼Œç»è¿‡æœ¬åœ°DNSç³»ç»Ÿçš„è§£æï¼Œå‘ç°è¯¥URLå¯¹åº”çš„æ˜¯ä¸€ä¸ªCDNä¸“ç”¨çš„DNSæœåŠ¡å™¨ï¼ŒDNSç³»ç»Ÿå°±ä¼šå°†åŸŸåè§£ææƒäº¤ç»™CNAMEæŒ‡å‘çš„CDNä¸“ç”¨çš„DNSæœåŠ¡å™¨ã€‚\nCNDä¸“ç”¨DNSæœåŠ¡å™¨å°†CNDçš„å…¨å±€è´Ÿè½½å‡è¡¡è®¾å¤‡IPåœ°å€è¿”å›ç»™ç”¨æˆ·\nç”¨æˆ·å‘CDNçš„å…¨å±€è´Ÿè½½å‡è¡¡è®¾å¤‡å‘èµ·æ•°æ®è¯·æ±‚\nCDNçš„å…¨å±€è´Ÿè½½å‡è¡¡è®¾å¤‡æ ¹æ®ç”¨æˆ·çš„IPåœ°å€ï¼Œä»¥åŠç”¨æˆ·è¯·æ±‚çš„å†…å®¹URLï¼Œé€‰æ‹©ä¸€å°ç”¨æˆ·æ‰€å±åŒºåŸŸçš„åŒºåŸŸè´Ÿè½½å‡è¡¡è®¾å¤‡ï¼Œå‘Šè¯‰ç”¨æˆ·å‘è¿™å°è®¾å¤‡å‘èµ·è¯·æ±‚\nåŒºåŸŸè´Ÿè½½å‡è¡¡è®¾å¤‡é€‰æ‹©ä¸€å°åˆé€‚çš„ç¼“å­˜æœåŠ¡å™¨æ¥æä¾›æœåŠ¡ï¼Œå°†è¯¥ç¼“å­˜æœåŠ¡å™¨çš„IPåœ°å€è¿”å›ç»™å…¨å±€è´Ÿè½½å‡è¡¡è®¾å¤‡\nå…¨å±€è´Ÿè½½å‡è¡¡è®¾å¤‡æŠŠæœåŠ¡å™¨çš„IPåœ°å€è¿”å›ç»™ç”¨æˆ·\nç”¨æˆ·å‘è¯¥ç¼“å­˜æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œç¼“å­˜æœåŠ¡å™¨å“åº”ç”¨æˆ·çš„è¯·æ±‚ï¼Œå°†ç”¨æˆ·æ‰€éœ€å†…å®¹å‘é€è‡³ç”¨æˆ·ç»ˆç«¯ã€‚\n\nå¦‚æœç¼“å­˜æœåŠ¡å™¨æ²¡æœ‰ç”¨æˆ·æƒ³è¦çš„å†…å®¹ï¼Œé‚£ä¹ˆç¼“å­˜æœåŠ¡å™¨å°±ä¼šå‘å®ƒçš„ä¸Šä¸€çº§ç¼“å­˜æœåŠ¡å™¨è¯·æ±‚å†…å®¹ï¼Œä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°è·å–åˆ°éœ€è¦çš„èµ„æºã€‚æœ€åå¦‚æœè¿˜æ˜¯æ²¡æœ‰ï¼Œå°±ä¼šå›åˆ°è‡ªå·±çš„æœåŠ¡å™¨å»è·å–èµ„æºã€‚\n CNAMEï¼ˆæ„ä¸ºï¼šåˆ«åï¼‰ï¼šåœ¨åŸŸåè§£æä¸­ï¼Œå®é™…ä¸Šè§£æå‡ºæ¥çš„æŒ‡å®šåŸŸåå¯¹åº”çš„IPåœ°å€ï¼Œæˆ–è€…è¯¥åŸŸåçš„ä¸€ä¸ªCNAMEï¼Œç„¶åå†æ ¹æ®è¿™ä¸ªCNAMEæ¥æŸ¥æ‰¾å¯¹åº”çš„IPåœ°å€ã€‚\n4. CDNçš„ä½¿ç”¨åœºæ™¯\nä½¿ç”¨ç¬¬ä¸‰æ–¹çš„CDNæœåŠ¡ï¼šå¦‚æœæƒ³è¦å¼€æºä¸€äº›é¡¹ç›®ï¼Œå¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„CDNæœåŠ¡\nä½¿ç”¨CDNè¿›è¡Œé™æ€èµ„æºçš„ç¼“å­˜ï¼šå°†è‡ªå·±ç½‘ç«™çš„é™æ€èµ„æºæ”¾åœ¨CDNä¸Šï¼Œæ¯”å¦‚jsã€cssã€å›¾ç‰‡ç­‰ã€‚å¯ä»¥å°†æ•´ä¸ªé¡¹ç›®æ”¾åœ¨CDNä¸Šï¼Œå®Œæˆä¸€é”®éƒ¨ç½²ã€‚\nç›´æ’­ä¼ é€ï¼šç›´æ’­æœ¬è´¨ä¸Šæ˜¯ä½¿ç”¨æµåª’ä½“è¿›è¡Œä¼ é€ï¼ŒCDNä¹Ÿæ˜¯æ”¯æŒæµåª’ä½“ä¼ é€çš„ï¼Œæ‰€ä»¥ç›´æ’­å®Œå…¨å¯ä»¥ä½¿ç”¨CDNæ¥æé«˜è®¿é—®é€Ÿåº¦ã€‚CDNåœ¨å¤„ç†æµåª’ä½“çš„æ—¶å€™ä¸å¤„ç†æ™®é€šé™æ€æ–‡ä»¶æœ‰æ‰€ä¸åŒï¼Œæ™®é€šæ–‡ä»¶å¦‚æœåœ¨è¾¹ç¼˜èŠ‚ç‚¹æ²¡æœ‰æ‰¾åˆ°çš„è¯ï¼Œå°±ä¼šå»ä¸Šä¸€å±‚æ¥ç€å¯»æ‰¾ï¼Œä½†æ˜¯æµåª’ä½“æœ¬èº«æ•°æ®é‡å°±éå¸¸å¤§ï¼Œå¦‚æœä½¿ç”¨å›æºçš„æ–¹å¼ï¼Œå¿…ç„¶ä¼šå¸¦æ¥æ€§èƒ½é—®é¢˜ï¼Œæ‰€ä»¥æµåª’ä½“ä¸€èˆ¬é‡‡ç”¨çš„éƒ½æ˜¯ä¸»åŠ¨æ¨é€çš„æ–¹å¼æ¥è¿›è¡Œã€‚\n\näºŒã€æ‡’åŠ è½½1. æ‡’åŠ è½½çš„æ¦‚å¿µæ‡’åŠ è½½ä¹Ÿå«åšå»¶è¿ŸåŠ è½½ã€æŒ‰éœ€åŠ è½½ï¼ŒæŒ‡çš„æ˜¯åœ¨é•¿ç½‘é¡µä¸­å»¶è¿ŸåŠ è½½å›¾ç‰‡æ•°æ®ï¼Œæ˜¯ä¸€ç§è¾ƒå¥½çš„ç½‘é¡µæ€§èƒ½ä¼˜åŒ–çš„æ–¹å¼ã€‚åœ¨æ¯”è¾ƒé•¿çš„ç½‘é¡µæˆ–åº”ç”¨ä¸­ï¼Œå¦‚æœå›¾ç‰‡å¾ˆå¤šï¼Œæ‰€æœ‰çš„å›¾ç‰‡éƒ½è¢«åŠ è½½å‡ºæ¥ï¼Œè€Œç”¨æˆ·åªèƒ½çœ‹åˆ°å¯è§†çª—å£çš„é‚£ä¸€éƒ¨åˆ†å›¾ç‰‡æ•°æ®ï¼Œè¿™æ ·å°±æµªè´¹äº†æ€§èƒ½ã€‚\nå¦‚æœä½¿ç”¨å›¾ç‰‡çš„æ‡’åŠ è½½å°±å¯ä»¥è§£å†³ä»¥ä¸Šé—®é¢˜ã€‚åœ¨æ»šåŠ¨å±å¹•ä¹‹å‰ï¼Œå¯è§†åŒ–åŒºåŸŸä¹‹å¤–çš„å›¾ç‰‡ä¸ä¼šè¿›è¡ŒåŠ è½½ï¼Œåœ¨æ»šåŠ¨å±å¹•æ—¶æ‰åŠ è½½ã€‚è¿™æ ·ä½¿å¾—ç½‘é¡µçš„åŠ è½½é€Ÿåº¦æ›´å¿«ï¼Œå‡å°‘äº†æœåŠ¡å™¨çš„è´Ÿè½½ã€‚æ‡’åŠ è½½é€‚ç”¨äºå›¾ç‰‡è¾ƒå¤šï¼Œé¡µé¢åˆ—è¡¨è¾ƒé•¿ï¼ˆé•¿åˆ—è¡¨ï¼‰çš„åœºæ™¯ä¸­ã€‚\n2. æ‡’åŠ è½½çš„ç‰¹ç‚¹\nå‡å°‘æ— ç”¨èµ„æºçš„åŠ è½½ï¼šä½¿ç”¨æ‡’åŠ è½½æ˜æ˜¾å‡å°‘äº†æœåŠ¡å™¨çš„å‹åŠ›å’Œæµé‡ï¼ŒåŒæ—¶ä¹Ÿå‡å°äº†æµè§ˆå™¨çš„è´Ÿæ‹…ã€‚\næå‡ç”¨æˆ·ä½“éªŒ: å¦‚æœåŒæ—¶åŠ è½½è¾ƒå¤šå›¾ç‰‡ï¼Œå¯èƒ½éœ€è¦ç­‰å¾…çš„æ—¶é—´è¾ƒé•¿ï¼Œè¿™æ ·å½±å“äº†ç”¨æˆ·ä½“éªŒï¼Œè€Œä½¿ç”¨æ‡’åŠ è½½å°±èƒ½å¤§å¤§çš„æé«˜ç”¨æˆ·ä½“éªŒã€‚\né˜²æ­¢åŠ è½½è¿‡å¤šå›¾ç‰‡è€Œå½±å“å…¶ä»–èµ„æºæ–‡ä»¶çš„åŠ è½½ ï¼šä¼šå½±å“ç½‘ç«™åº”ç”¨çš„æ­£å¸¸ä½¿ç”¨ã€‚\n\n3. æ‡’åŠ è½½çš„å®ç°åŸç†å›¾ç‰‡çš„åŠ è½½æ˜¯ç”±srcå¼•èµ·çš„ï¼Œå½“å¯¹srcèµ‹å€¼æ—¶ï¼Œæµè§ˆå™¨å°±ä¼šè¯·æ±‚å›¾ç‰‡èµ„æºã€‚æ ¹æ®è¿™ä¸ªåŸç†ï¼Œæˆ‘ä»¬ä½¿ç”¨HTML5 çš„data-xxxå±æ€§æ¥å‚¨å­˜å›¾ç‰‡çš„è·¯å¾„ï¼Œåœ¨éœ€è¦åŠ è½½å›¾ç‰‡çš„æ—¶å€™ï¼Œå°†data-xxxä¸­å›¾ç‰‡çš„è·¯å¾„èµ‹å€¼ç»™srcï¼Œè¿™æ ·å°±å®ç°äº†å›¾ç‰‡çš„æŒ‰éœ€åŠ è½½ï¼Œå³æ‡’åŠ è½½ã€‚\næ³¨æ„ï¼šdata-xxx ä¸­çš„xxxå¯ä»¥è‡ªå®šä¹‰ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨data-srcæ¥å®šä¹‰ã€‚\næ‡’åŠ è½½çš„å®ç°é‡ç‚¹åœ¨äºç¡®å®šç”¨æˆ·éœ€è¦åŠ è½½å“ªå¼ å›¾ç‰‡ï¼Œåœ¨æµè§ˆå™¨ä¸­ï¼Œå¯è§†åŒºåŸŸå†…çš„èµ„æºå°±æ˜¯ç”¨æˆ·éœ€è¦çš„èµ„æºã€‚æ‰€ä»¥å½“å›¾ç‰‡å‡ºç°åœ¨å¯è§†åŒºåŸŸæ—¶ï¼Œè·å–å›¾ç‰‡çš„çœŸå®åœ°å€å¹¶èµ‹å€¼ç»™å›¾ç‰‡å³å¯ã€‚\nä½¿ç”¨åŸç”ŸJavaScriptå®ç°æ‡’åŠ è½½ï¼š\nçŸ¥è¯†ç‚¹ï¼š\nï¼ˆ1ï¼‰window.innerHeight æ˜¯æµè§ˆå™¨å¯è§†åŒºçš„é«˜åº¦\nï¼ˆ2ï¼‰document.body.scrollTop || document.documentElement.scrollTop æ˜¯æµè§ˆå™¨æ»šåŠ¨çš„è¿‡çš„è·ç¦»\nï¼ˆ3ï¼‰imgs.offsetTop æ˜¯å…ƒç´ é¡¶éƒ¨è·ç¦»æ–‡æ¡£é¡¶éƒ¨çš„é«˜åº¦ï¼ˆåŒ…æ‹¬æ»šåŠ¨æ¡çš„è·ç¦»ï¼‰\nï¼ˆ4ï¼‰å›¾ç‰‡åŠ è½½æ¡ä»¶ï¼šimg.offsetTop &lt; window.innerHeight + document.body.scrollTop;\nå›¾ç¤ºï¼š  ä»£ç å®ç°ï¼š\n&lt;div class&#x3D;&quot;container&quot;&gt;\n     &lt;img src&#x3D;&quot;loading.gif&quot;  data-src&#x3D;&quot;pic.png&quot;&gt;\n     &lt;img src&#x3D;&quot;loading.gif&quot;  data-src&#x3D;&quot;pic.png&quot;&gt;\n     &lt;img src&#x3D;&quot;loading.gif&quot;  data-src&#x3D;&quot;pic.png&quot;&gt;\n     &lt;img src&#x3D;&quot;loading.gif&quot;  data-src&#x3D;&quot;pic.png&quot;&gt;\n     &lt;img src&#x3D;&quot;loading.gif&quot;  data-src&#x3D;&quot;pic.png&quot;&gt;\n     &lt;img src&#x3D;&quot;loading.gif&quot;  data-src&#x3D;&quot;pic.png&quot;&gt;\n&lt;&#x2F;div&gt;\n&lt;script&gt;\nvar imgs &#x3D; document.querySelectorAll(&#39;img&#39;);\nfunction lozyLoad()&#123;\n\t\tvar scrollTop &#x3D; document.body.scrollTop || document.documentElement.scrollTop;\n\t\tvar winHeight&#x3D; window.innerHeight;\n\t\tfor(var i&#x3D;0;i &lt; imgs.length;i++)&#123;\n\t\t\tif(imgs[i].offsetTop &lt; scrollTop + winHeight )&#123;\n\t\t\t\timgs[i].src &#x3D; imgs[i].getAttribute(&#39;data-src&#39;);\n\t\t\t&#125;\n\t\t&#125;\n\t&#125;\n  window.onscroll &#x3D; lozyLoad();\n&lt;&#x2F;script&gt;\nå¤åˆ¶ä»£ç \n\n4. æ‡’åŠ è½½ä¸é¢„åŠ è½½çš„åŒºåˆ«è¿™ä¸¤ç§æ–¹å¼éƒ½æ˜¯æé«˜ç½‘é¡µæ€§èƒ½çš„æ–¹å¼ï¼Œä¸¤è€…ä¸»è¦åŒºåˆ«æ˜¯ä¸€ä¸ªæ˜¯æå‰åŠ è½½ï¼Œä¸€ä¸ªæ˜¯è¿Ÿç¼“ç”šè‡³ä¸åŠ è½½ã€‚æ‡’åŠ è½½å¯¹æœåŠ¡å™¨å‰ç«¯æœ‰ä¸€å®šçš„ç¼“è§£å‹åŠ›ä½œç”¨ï¼Œé¢„åŠ è½½åˆ™ä¼šå¢åŠ æœåŠ¡å™¨å‰ç«¯å‹åŠ›ã€‚\n\næ‡’åŠ è½½ä¹Ÿå«å»¶è¿ŸåŠ è½½ï¼ŒæŒ‡çš„æ˜¯åœ¨é•¿ç½‘é¡µä¸­å»¶è¿ŸåŠ è½½å›¾ç‰‡çš„æ—¶æœºï¼Œå½“ç”¨æˆ·éœ€è¦è®¿é—®æ—¶ï¼Œå†å»åŠ è½½ï¼Œè¿™æ ·å¯ä»¥æé«˜ç½‘ç«™çš„é¦–å±åŠ è½½é€Ÿåº¦ï¼Œæå‡ç”¨æˆ·çš„ä½“éªŒï¼Œå¹¶ä¸”å¯ä»¥å‡å°‘æœåŠ¡å™¨çš„å‹åŠ›ã€‚å®ƒé€‚ç”¨äºå›¾ç‰‡å¾ˆå¤šï¼Œé¡µé¢å¾ˆé•¿çš„ç”µå•†ç½‘ç«™çš„åœºæ™¯ã€‚æ‡’åŠ è½½çš„å®ç°åŸç†æ˜¯ï¼Œå°†é¡µé¢ä¸Šçš„å›¾ç‰‡çš„ src å±æ€§è®¾ç½®ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œå°†å›¾ç‰‡çš„çœŸå®è·¯å¾„ä¿å­˜åœ¨ä¸€ä¸ªè‡ªå®šä¹‰å±æ€§ä¸­ï¼Œå½“é¡µé¢æ»šåŠ¨çš„æ—¶å€™ï¼Œè¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœå›¾ç‰‡è¿›å…¥é¡µé¢å¯è§†åŒºåŸŸå†…ï¼Œåˆ™ä»è‡ªå®šä¹‰å±æ€§ä¸­å–å‡ºçœŸå®è·¯å¾„èµ‹å€¼ç»™å›¾ç‰‡çš„ src å±æ€§ï¼Œä»¥æ­¤æ¥å®ç°å›¾ç‰‡çš„å»¶è¿ŸåŠ è½½ã€‚\né¢„åŠ è½½æŒ‡çš„æ˜¯å°†æ‰€éœ€çš„èµ„æºæå‰è¯·æ±‚åŠ è½½åˆ°æœ¬åœ°ï¼Œè¿™æ ·åé¢åœ¨éœ€è¦ç”¨åˆ°æ—¶å°±ç›´æ¥ä»ç¼“å­˜å–èµ„æºã€‚ é€šè¿‡é¢„åŠ è½½èƒ½å¤Ÿå‡å°‘ç”¨æˆ·çš„ç­‰å¾…æ—¶é—´ï¼Œæé«˜ç”¨æˆ·çš„ä½“éªŒã€‚æˆ‘äº†è§£çš„é¢„åŠ è½½çš„æœ€å¸¸ç”¨çš„æ–¹å¼æ˜¯ä½¿ç”¨ js ä¸­çš„ image å¯¹è±¡ï¼Œé€šè¿‡ä¸º image å¯¹è±¡æ¥è®¾ç½® scr å±æ€§ï¼Œæ¥å®ç°å›¾ç‰‡çš„é¢„åŠ è½½ã€‚\n\nä¸‰ã€å›æµä¸é‡ç»˜1. å›æµä¸é‡ç»˜çš„æ¦‚å¿µåŠè§¦å‘æ¡ä»¶ï¼ˆ1ï¼‰å›æµå½“æ¸²æŸ“æ ‘ä¸­éƒ¨åˆ†æˆ–è€…å…¨éƒ¨å…ƒç´ çš„å°ºå¯¸ã€ç»“æ„æˆ–è€…å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæµè§ˆå™¨ä¼šé‡æ–°æ¸²æŸ“éƒ¨åˆ†æˆ–è€…å…¨éƒ¨æ–‡æ¡£çš„è¿‡ç¨‹å°±ç§°ä¸ºå›æµã€‚\nä¸‹é¢è¿™äº›æ“ä½œä¼šå¯¼è‡´å›æµï¼š\n\né¡µé¢çš„é¦–æ¬¡æ¸²æŸ“\næµè§ˆå™¨çš„çª—å£å¤§å°å‘ç”Ÿå˜åŒ–\nå…ƒç´ çš„å†…å®¹å‘ç”Ÿå˜åŒ–\nå…ƒç´ çš„å°ºå¯¸æˆ–è€…ä½ç½®å‘ç”Ÿå˜åŒ–\nå…ƒç´ çš„å­—ä½“å¤§å°å‘ç”Ÿå˜åŒ–\næ¿€æ´»CSSä¼ªç±»\næŸ¥è¯¢æŸäº›å±æ€§æˆ–è€…è°ƒç”¨æŸäº›æ–¹æ³•\næ·»åŠ æˆ–è€…åˆ é™¤å¯è§çš„DOMå…ƒç´ \n\nåœ¨è§¦å‘å›æµï¼ˆé‡æ’ï¼‰çš„æ—¶å€™ï¼Œç”±äºæµè§ˆå™¨æ¸²æŸ“é¡µé¢æ˜¯åŸºäºæµå¼å¸ƒå±€çš„ï¼Œæ‰€ä»¥å½“è§¦å‘å›æµæ—¶ï¼Œä¼šå¯¼è‡´å‘¨å›´çš„DOMå…ƒç´ é‡æ–°æ’åˆ—ï¼Œå®ƒçš„å½±å“èŒƒå›´æœ‰ä¸¤ç§ï¼š\n\nå…¨å±€èŒƒå›´ï¼šä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œå¯¹æ•´ä¸ªæ¸²æŸ“æ ‘è¿›è¡Œé‡æ–°å¸ƒå±€\nå±€éƒ¨èŒƒå›´ï¼šå¯¹æ¸²æŸ“æ ‘çš„æŸéƒ¨åˆ†æˆ–è€…ä¸€ä¸ªæ¸²æŸ“å¯¹è±¡è¿›è¡Œé‡æ–°å¸ƒå±€\n\nï¼ˆ2ï¼‰é‡ç»˜å½“é¡µé¢ä¸­æŸäº›å…ƒç´ çš„æ ·å¼å‘ç”Ÿå˜åŒ–ï¼Œä½†æ˜¯ä¸ä¼šå½±å“å…¶åœ¨æ–‡æ¡£æµä¸­çš„ä½ç½®æ—¶ï¼Œæµè§ˆå™¨å°±ä¼šå¯¹å…ƒç´ è¿›è¡Œé‡æ–°ç»˜åˆ¶ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯é‡ç»˜ã€‚\nä¸‹é¢è¿™äº›æ“ä½œä¼šå¯¼è‡´å›æµï¼š\n\ncolorã€background ç›¸å…³å±æ€§ï¼šbackground-colorã€background-image ç­‰\noutline ç›¸å…³å±æ€§ï¼šoutline-colorã€outline-width ã€text-decoration\nborder-radiusã€visibilityã€box-shadow\n\næ³¨æ„ï¼š å½“è§¦å‘å›æµæ—¶ï¼Œä¸€å®šä¼šè§¦å‘é‡ç»˜ï¼Œä½†æ˜¯é‡ç»˜ä¸ä¸€å®šä¼šå¼•å‘å›æµã€‚\n2. å¦‚ä½•é¿å…å›æµä¸é‡ç»˜ï¼Ÿå‡å°‘å›æµä¸é‡ç»˜çš„æªæ–½ï¼š\n\næ“ä½œDOMæ—¶ï¼Œå°½é‡åœ¨ä½å±‚çº§çš„DOMèŠ‚ç‚¹è¿›è¡Œæ“ä½œ\nä¸è¦ä½¿ç”¨tableå¸ƒå±€ï¼Œ ä¸€ä¸ªå°çš„æ”¹åŠ¨å¯èƒ½ä¼šä½¿æ•´ä¸ªtableè¿›è¡Œé‡æ–°å¸ƒå±€\nä½¿ç”¨CSSçš„è¡¨è¾¾å¼\nä¸è¦é¢‘ç¹æ“ä½œå…ƒç´ çš„æ ·å¼ï¼Œå¯¹äºé™æ€é¡µé¢ï¼Œå¯ä»¥ä¿®æ”¹ç±»åï¼Œè€Œä¸æ˜¯æ ·å¼ã€‚\nä½¿ç”¨absoluteæˆ–è€…fixedï¼Œä½¿å…ƒç´ è„±ç¦»æ–‡æ¡£æµï¼Œè¿™æ ·ä»–ä»¬å‘ç”Ÿå˜åŒ–å°±ä¸ä¼šå½±å“å…¶ä»–å…ƒç´ \né¿å…é¢‘ç¹æ“ä½œDOMï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªæ–‡æ¡£ç‰‡æ®µdocumentFragmentï¼Œåœ¨å®ƒä¸Šé¢åº”ç”¨æ‰€æœ‰DOMæ“ä½œï¼Œæœ€åå†æŠŠå®ƒæ·»åŠ åˆ°æ–‡æ¡£ä¸­\nå°†å…ƒç´ å…ˆè®¾ç½®display: noneï¼Œæ“ä½œç»“æŸåå†æŠŠå®ƒæ˜¾ç¤ºå‡ºæ¥ã€‚å› ä¸ºåœ¨displayå±æ€§ä¸ºnoneçš„å…ƒç´ ä¸Šè¿›è¡Œçš„DOMæ“ä½œä¸ä¼šå¼•å‘å›æµå’Œé‡ç»˜ã€‚\nå°†DOMçš„å¤šä¸ªè¯»æ“ä½œï¼ˆæˆ–è€…å†™æ“ä½œï¼‰æ”¾åœ¨ä¸€èµ·ï¼Œè€Œä¸æ˜¯è¯»å†™æ“ä½œç©¿æ’ç€å†™ã€‚è¿™å¾—ç›Šäºæµè§ˆå™¨çš„æ¸²æŸ“é˜Ÿåˆ—æœºåˆ¶ã€‚\n\næµè§ˆå™¨é’ˆå¯¹é¡µé¢çš„å›æµä¸é‡ç»˜ï¼Œè¿›è¡Œäº†è‡ªèº«çš„ä¼˜åŒ–â€”â€”æ¸²æŸ“é˜Ÿåˆ—\næµè§ˆå™¨ä¼šå°†æ‰€æœ‰çš„å›æµã€é‡ç»˜çš„æ“ä½œæ”¾åœ¨ä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼Œå½“é˜Ÿåˆ—ä¸­çš„æ“ä½œåˆ°äº†ä¸€å®šçš„æ•°é‡æˆ–è€…åˆ°äº†ä¸€å®šçš„æ—¶é—´é—´éš”ï¼Œæµè§ˆå™¨å°±ä¼šå¯¹é˜Ÿåˆ—è¿›è¡Œæ‰¹å¤„ç†ã€‚è¿™æ ·å°±ä¼šè®©å¤šæ¬¡çš„å›æµã€é‡ç»˜å˜æˆä¸€æ¬¡å›æµé‡ç»˜ã€‚\nä¸Šé¢ï¼Œå°†å¤šä¸ªè¯»æ“ä½œï¼ˆæˆ–è€…å†™æ“ä½œï¼‰æ”¾åœ¨ä¸€èµ·ï¼Œå°±ä¼šç­‰æ‰€æœ‰çš„è¯»æ“ä½œè¿›å…¥é˜Ÿåˆ—ä¹‹åæ‰§è¡Œï¼Œè¿™æ ·ï¼ŒåŸæœ¬åº”è¯¥æ˜¯è§¦å‘å¤šæ¬¡å›æµï¼Œå˜æˆäº†åªè§¦å‘ä¸€æ¬¡å›æµã€‚\n3. å¦‚ä½•ä¼˜åŒ–åŠ¨ç”»ï¼Ÿå¯¹äºå¦‚ä½•ä¼˜åŒ–åŠ¨ç”»ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒåŠ¨ç”»éœ€è¦é¢‘ç¹çš„æ“ä½œDOMï¼Œå°±å°±ä¼šå¯¼è‡´é¡µé¢çš„æ€§èƒ½é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥å°†åŠ¨ç”»çš„positionå±æ€§è®¾ç½®ä¸ºabsoluteæˆ–è€…fixedï¼Œå°†åŠ¨ç”»è„±ç¦»æ–‡æ¡£æµï¼Œè¿™æ ·ä»–çš„å›æµå°±ä¸ä¼šå½±å“åˆ°é¡µé¢äº†ã€‚\n4. documentFragment æ˜¯ä»€ä¹ˆï¼Ÿç”¨å®ƒè·Ÿç›´æ¥æ“ä½œ DOM çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼ŸMDNä¸­å¯¹documentFragmentçš„è§£é‡Šï¼š\n\n\n\n\n\n\n\n\n\nDocumentFragmentï¼Œæ–‡æ¡£ç‰‡æ®µæ¥å£ï¼Œä¸€ä¸ªæ²¡æœ‰çˆ¶å¯¹è±¡çš„æœ€å°æ–‡æ¡£å¯¹è±¡ã€‚å®ƒè¢«ä½œä¸ºä¸€ä¸ªè½»é‡ç‰ˆçš„ Documentä½¿ç”¨ï¼Œå°±åƒæ ‡å‡†çš„documentä¸€æ ·ï¼Œå­˜å‚¨ç”±èŠ‚ç‚¹ï¼ˆnodesï¼‰ç»„æˆçš„æ–‡æ¡£ç»“æ„ã€‚ä¸documentç›¸æ¯”ï¼Œæœ€å¤§çš„åŒºåˆ«æ˜¯DocumentFragmentä¸æ˜¯çœŸå® DOM æ ‘çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒçš„å˜åŒ–ä¸ä¼šè§¦å‘ DOM æ ‘çš„é‡æ–°æ¸²æŸ“ï¼Œä¸”ä¸ä¼šå¯¼è‡´æ€§èƒ½ç­‰é—®é¢˜ã€‚\nå½“æˆ‘ä»¬æŠŠä¸€ä¸ª DocumentFragment èŠ‚ç‚¹æ’å…¥æ–‡æ¡£æ ‘æ—¶ï¼Œæ’å…¥çš„ä¸æ˜¯ DocumentFragment è‡ªèº«ï¼Œè€Œæ˜¯å®ƒçš„æ‰€æœ‰å­å­™èŠ‚ç‚¹ã€‚åœ¨é¢‘ç¹çš„DOMæ“ä½œæ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†DOMå…ƒç´ æ’å…¥DocumentFragmentï¼Œä¹‹åä¸€æ¬¡æ€§çš„å°†æ‰€æœ‰çš„å­å­™èŠ‚ç‚¹æ’å…¥æ–‡æ¡£ä¸­ã€‚å’Œç›´æ¥æ“ä½œDOMç›¸æ¯”ï¼Œå°†DocumentFragment èŠ‚ç‚¹æ’å…¥DOMæ ‘æ—¶ï¼Œä¸ä¼šè§¦å‘é¡µé¢çš„é‡ç»˜ï¼Œè¿™æ ·å°±å¤§å¤§æé«˜äº†é¡µé¢çš„æ€§èƒ½ã€‚\nå››ã€èŠ‚æµä¸é˜²æŠ–1. å¯¹èŠ‚æµä¸é˜²æŠ–çš„ç†è§£\nå‡½æ•°é˜²æŠ–æ˜¯æŒ‡åœ¨äº‹ä»¶è¢«è§¦å‘ n ç§’åå†æ‰§è¡Œå›è°ƒï¼Œå¦‚æœåœ¨è¿™ n ç§’å†…äº‹ä»¶åˆè¢«è§¦å‘ï¼Œåˆ™é‡æ–°è®¡æ—¶ã€‚è¿™å¯ä»¥ä½¿ç”¨åœ¨ä¸€äº›ç‚¹å‡»è¯·æ±‚çš„äº‹ä»¶ä¸Šï¼Œé¿å…å› ä¸ºç”¨æˆ·çš„å¤šæ¬¡ç‚¹å‡»å‘åç«¯å‘é€å¤šæ¬¡è¯·æ±‚ã€‚\nå‡½æ•°èŠ‚æµæ˜¯æŒ‡è§„å®šä¸€ä¸ªå•ä½æ—¶é—´ï¼Œåœ¨è¿™ä¸ªå•ä½æ—¶é—´å†…ï¼Œåªèƒ½æœ‰ä¸€æ¬¡è§¦å‘äº‹ä»¶çš„å›è°ƒå‡½æ•°æ‰§è¡Œï¼Œå¦‚æœåœ¨åŒä¸€ä¸ªå•ä½æ—¶é—´å†…æŸäº‹ä»¶è¢«è§¦å‘å¤šæ¬¡ï¼Œåªæœ‰ä¸€æ¬¡èƒ½ç”Ÿæ•ˆã€‚èŠ‚æµå¯ä»¥ä½¿ç”¨åœ¨ scroll å‡½æ•°çš„äº‹ä»¶ç›‘å¬ä¸Šï¼Œé€šè¿‡äº‹ä»¶èŠ‚æµæ¥é™ä½äº‹ä»¶è°ƒç”¨çš„é¢‘ç‡ã€‚\n\né˜²æŠ–å‡½æ•°çš„åº”ç”¨åœºæ™¯ï¼š\n\næŒ‰é’®æäº¤åœºæ™¯ï¼šé˜²â½Œå¤šæ¬¡æäº¤æŒ‰é’®ï¼Œåªæ‰§â¾æœ€åæäº¤çš„â¼€æ¬¡\næœåŠ¡ç«¯éªŒè¯åœºæ™¯ï¼šè¡¨å•éªŒè¯éœ€è¦æœåŠ¡ç«¯é…åˆï¼Œåªæ‰§â¾â¼€æ®µè¿ç»­çš„è¾“â¼Šäº‹ä»¶çš„æœ€åâ¼€æ¬¡ï¼Œè¿˜æœ‰æœç´¢è”æƒ³è¯åŠŸèƒ½ç±»ä¼¼â½£å­˜ç¯å¢ƒè¯·â½¤lodash.debounce\n\nèŠ‚æµå‡½æ•°çš„é€‚â½¤åœºæ™¯ï¼š\n\næ‹–æ‹½åœºæ™¯ï¼šå›ºå®šæ—¶é—´å†…åªæ‰§â¾â¼€æ¬¡ï¼Œé˜²â½Œè¶…â¾¼é¢‘æ¬¡è§¦å‘ä½ç½®å˜åŠ¨\nç¼©æ”¾åœºæ™¯ï¼šç›‘æ§æµè§ˆå™¨resize\nåŠ¨ç”»åœºæ™¯ï¼šé¿å…çŸ­æ—¶é—´å†…å¤šæ¬¡è§¦å‘åŠ¨ç”»å¼•èµ·æ€§èƒ½é—®é¢˜\n\n2. å®ç°èŠ‚æµå‡½æ•°å’Œé˜²æŠ–å‡½æ•°å‡½æ•°é˜²æŠ–çš„å®ç°ï¼š\nfunction debounce(fn, wait) &#123;\n  var timer &#x3D; null;\n\n  return function() &#123;\n    var context &#x3D; this,\n      args &#x3D; [...arguments];\n\n    &#x2F;&#x2F; å¦‚æœæ­¤æ—¶å­˜åœ¨å®šæ—¶å™¨çš„è¯ï¼Œåˆ™å–æ¶ˆä¹‹å‰çš„å®šæ—¶å™¨é‡æ–°è®°æ—¶\n    if (timer) &#123;\n      clearTimeout(timer);\n      timer &#x3D; null;\n    &#125;\n\n    &#x2F;&#x2F; è®¾ç½®å®šæ—¶å™¨ï¼Œä½¿äº‹ä»¶é—´éš”æŒ‡å®šäº‹ä»¶åæ‰§è¡Œ\n    timer &#x3D; setTimeout(() &#x3D;&gt; &#123;\n      fn.apply(context, args);\n    &#125;, wait);\n  &#125;;\n&#125;\nå¤åˆ¶ä»£ç \n\nå‡½æ•°èŠ‚æµçš„å®ç°ï¼š\n&#x2F;&#x2F; æ—¶é—´æˆ³ç‰ˆ\nfunction throttle(fn, delay) &#123;\n  var preTime &#x3D; Date.now();\n\n  return function() &#123;\n    var context &#x3D; this,\n      args &#x3D; [...arguments],\n      nowTime &#x3D; Date.now();\n\n    &#x2F;&#x2F; å¦‚æœä¸¤æ¬¡æ—¶é—´é—´éš”è¶…è¿‡äº†æŒ‡å®šæ—¶é—´ï¼Œåˆ™æ‰§è¡Œå‡½æ•°ã€‚\n    if (nowTime - preTime &gt;&#x3D; delay) &#123;\n      preTime &#x3D; Date.now();\n      return fn.apply(context, args);\n    &#125;\n  &#125;;\n&#125;\n\n&#x2F;&#x2F; å®šæ—¶å™¨ç‰ˆ\nfunction throttle (fun, wait)&#123;\n  let timeout &#x3D; null\n  return function()&#123;\n    let context &#x3D; this\n    let args &#x3D; [...arguments]\n    if(!timeout)&#123;\n      timeout &#x3D; setTimeout(() &#x3D;&gt; &#123;\n        fun.apply(context, args)\n        timeout &#x3D; null \n      &#125;, wait)\n    &#125;\n  &#125;\n&#125;\nå¤åˆ¶ä»£ç \n\näº”ã€å›¾ç‰‡ä¼˜åŒ–1. å¦‚ä½•å¯¹é¡¹ç›®ä¸­çš„å›¾ç‰‡è¿›è¡Œä¼˜åŒ–ï¼Ÿ\nä¸ç”¨å›¾ç‰‡ã€‚å¾ˆå¤šæ—¶å€™ä¼šä½¿ç”¨åˆ°å¾ˆå¤šä¿®é¥°ç±»å›¾ç‰‡ï¼Œå…¶å®è¿™ç±»ä¿®é¥°å›¾ç‰‡å®Œå…¨å¯ä»¥ç”¨ CSS å»ä»£æ›¿ã€‚\n\nå¯¹äºç§»åŠ¨ç«¯æ¥è¯´ï¼Œå±å¹•å®½åº¦å°±é‚£ä¹ˆç‚¹ï¼Œå®Œå…¨æ²¡æœ‰å¿…è¦å»åŠ è½½åŸå›¾æµªè´¹å¸¦å®½ã€‚ä¸€èˆ¬å›¾ç‰‡éƒ½ç”¨ CDN åŠ è½½ï¼Œå¯ä»¥è®¡ç®—å‡ºé€‚é…å±å¹•çš„å®½åº¦ï¼Œç„¶åå»è¯·æ±‚ç›¸åº”è£å‰ªå¥½çš„å›¾ç‰‡ã€‚\n\nå°å›¾ä½¿ç”¨ base64 æ ¼å¼\n\nå°†å¤šä¸ªå›¾æ ‡æ–‡ä»¶æ•´åˆåˆ°ä¸€å¼ å›¾ç‰‡ä¸­ï¼ˆé›ªç¢§å›¾ï¼‰\n\né€‰æ‹©æ­£ç¡®çš„å›¾ç‰‡æ ¼å¼ï¼š\n\nå¯¹äºèƒ½å¤Ÿæ˜¾ç¤º WebP æ ¼å¼çš„æµè§ˆå™¨å°½é‡ä½¿ç”¨ WebP æ ¼å¼ã€‚å› ä¸º WebP æ ¼å¼å…·æœ‰æ›´å¥½çš„å›¾åƒæ•°æ®å‹ç¼©ç®—æ³•ï¼Œèƒ½å¸¦æ¥æ›´å°çš„å›¾ç‰‡ä½“ç§¯ï¼Œè€Œä¸”æ‹¥æœ‰è‚‰çœ¼è¯†åˆ«æ— å·®å¼‚çš„å›¾åƒè´¨é‡ï¼Œç¼ºç‚¹å°±æ˜¯å…¼å®¹æ€§å¹¶ä¸å¥½\nå°å›¾ä½¿ç”¨ PNGï¼Œå…¶å®å¯¹äºå¤§éƒ¨åˆ†å›¾æ ‡è¿™ç±»å›¾ç‰‡ï¼Œå®Œå…¨å¯ä»¥ä½¿ç”¨ SVG ä»£æ›¿\nç…§ç‰‡ä½¿ç”¨ JPEG\n\n\n\n2. å¸¸è§çš„å›¾ç‰‡æ ¼å¼åŠä½¿ç”¨åœºæ™¯ï¼ˆ1ï¼‰BMPï¼Œæ˜¯æ— æŸçš„ã€æ—¢æ”¯æŒç´¢å¼•è‰²ä¹Ÿæ”¯æŒç›´æ¥è‰²çš„ç‚¹é˜µå›¾ã€‚è¿™ç§å›¾ç‰‡æ ¼å¼å‡ ä¹æ²¡æœ‰å¯¹æ•°æ®è¿›è¡Œå‹ç¼©ï¼Œæ‰€ä»¥BMPæ ¼å¼çš„å›¾ç‰‡é€šå¸¸æ˜¯è¾ƒå¤§çš„æ–‡ä»¶ã€‚\nï¼ˆ2ï¼‰GIFæ˜¯æ— æŸçš„ã€é‡‡ç”¨ç´¢å¼•è‰²çš„ç‚¹é˜µå›¾ã€‚é‡‡ç”¨LZWå‹ç¼©ç®—æ³•è¿›è¡Œç¼–ç ã€‚æ–‡ä»¶å°ï¼Œæ˜¯GIFæ ¼å¼çš„ä¼˜ç‚¹ï¼ŒåŒæ—¶ï¼ŒGIFæ ¼å¼è¿˜å…·æœ‰æ”¯æŒåŠ¨ç”»ä»¥åŠé€æ˜çš„ä¼˜ç‚¹ã€‚ä½†æ˜¯GIFæ ¼å¼ä»…æ”¯æŒ8bitçš„ç´¢å¼•è‰²ï¼Œæ‰€ä»¥GIFæ ¼å¼é€‚ç”¨äºå¯¹è‰²å½©è¦æ±‚ä¸é«˜åŒæ—¶éœ€è¦æ–‡ä»¶ä½“ç§¯è¾ƒå°çš„åœºæ™¯ã€‚\nï¼ˆ3ï¼‰JPEGæ˜¯æœ‰æŸçš„ã€é‡‡ç”¨ç›´æ¥è‰²çš„ç‚¹é˜µå›¾ã€‚JPEGçš„å›¾ç‰‡çš„ä¼˜ç‚¹æ˜¯é‡‡ç”¨äº†ç›´æ¥è‰²ï¼Œå¾—ç›Šäºæ›´ä¸°å¯Œçš„è‰²å½©ï¼ŒJPEGéå¸¸é€‚åˆç”¨æ¥å­˜å‚¨ç…§ç‰‡ï¼Œä¸GIFç›¸æ¯”ï¼ŒJPEGä¸é€‚åˆç”¨æ¥å­˜å‚¨ä¼ä¸šLogoã€çº¿æ¡†ç±»çš„å›¾ã€‚å› ä¸ºæœ‰æŸå‹ç¼©ä¼šå¯¼è‡´å›¾ç‰‡æ¨¡ç³Šï¼Œè€Œç›´æ¥è‰²çš„é€‰ç”¨ï¼Œåˆä¼šå¯¼è‡´å›¾ç‰‡æ–‡ä»¶è¾ƒGIFæ›´å¤§ã€‚\nï¼ˆ4ï¼‰PNG-8æ˜¯æ— æŸçš„ã€ä½¿ç”¨ç´¢å¼•è‰²çš„ç‚¹é˜µå›¾ã€‚PNGæ˜¯ä¸€ç§æ¯”è¾ƒæ–°çš„å›¾ç‰‡æ ¼å¼ï¼ŒPNG-8æ˜¯éå¸¸å¥½çš„GIFæ ¼å¼æ›¿ä»£è€…ï¼Œåœ¨å¯èƒ½çš„æƒ…å†µä¸‹ï¼Œåº”è¯¥å°½å¯èƒ½çš„ä½¿ç”¨PNG-8è€Œä¸æ˜¯GIFï¼Œå› ä¸ºåœ¨ç›¸åŒçš„å›¾ç‰‡æ•ˆæœä¸‹ï¼ŒPNG-8å…·æœ‰æ›´å°çš„æ–‡ä»¶ä½“ç§¯ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒPNG-8è¿˜æ”¯æŒé€æ˜åº¦çš„è°ƒèŠ‚ï¼Œè€ŒGIFå¹¶ä¸æ”¯æŒã€‚é™¤ééœ€è¦åŠ¨ç”»çš„æ”¯æŒï¼Œå¦åˆ™æ²¡æœ‰ç†ç”±ä½¿ç”¨GIFè€Œä¸æ˜¯PNG-8ã€‚\nï¼ˆ5ï¼‰PNG-24æ˜¯æ— æŸçš„ã€ä½¿ç”¨ç›´æ¥è‰²çš„ç‚¹é˜µå›¾ã€‚PNG-24çš„ä¼˜ç‚¹åœ¨äºå®ƒå‹ç¼©äº†å›¾ç‰‡çš„æ•°æ®ï¼Œä½¿å¾—åŒæ ·æ•ˆæœçš„å›¾ç‰‡ï¼ŒPNG-24æ ¼å¼çš„æ–‡ä»¶å¤§å°è¦æ¯”BMPå°å¾—å¤šã€‚å½“ç„¶ï¼ŒPNG24çš„å›¾ç‰‡è¿˜æ˜¯è¦æ¯”JPEGã€GIFã€PNG-8å¤§å¾—å¤šã€‚\nï¼ˆ6ï¼‰SVGæ˜¯æ— æŸçš„çŸ¢é‡å›¾ã€‚SVGæ˜¯çŸ¢é‡å›¾æ„å‘³ç€SVGå›¾ç‰‡ç”±ç›´çº¿å’Œæ›²çº¿ä»¥åŠç»˜åˆ¶å®ƒä»¬çš„æ–¹æ³•ç»„æˆã€‚å½“æ”¾å¤§SVGå›¾ç‰‡æ—¶ï¼Œçœ‹åˆ°çš„è¿˜æ˜¯çº¿å’Œæ›²çº¿ï¼Œè€Œä¸ä¼šå‡ºç°åƒç´ ç‚¹ã€‚è¿™æ„å‘³ç€SVGå›¾ç‰‡åœ¨æ”¾å¤§æ—¶ï¼Œä¸ä¼šå¤±çœŸï¼Œæ‰€ä»¥å®ƒéå¸¸é€‚åˆç”¨æ¥ç»˜åˆ¶Logoã€Iconç­‰ã€‚\nï¼ˆ7ï¼‰WebPæ˜¯è°·æ­Œå¼€å‘çš„ä¸€ç§æ–°å›¾ç‰‡æ ¼å¼ï¼ŒWebPæ˜¯åŒæ—¶æ”¯æŒæœ‰æŸå’Œæ— æŸå‹ç¼©çš„ã€ä½¿ç”¨ç›´æ¥è‰²çš„ç‚¹é˜µå›¾ã€‚ä»åå­—å°±å¯ä»¥çœ‹å‡ºæ¥å®ƒæ˜¯ä¸ºWebè€Œç”Ÿçš„ï¼Œä»€ä¹ˆå«ä¸ºWebè€Œç”Ÿå‘¢ï¼Ÿå°±æ˜¯è¯´ç›¸åŒè´¨é‡çš„å›¾ç‰‡ï¼ŒWebPå…·æœ‰æ›´å°çš„æ–‡ä»¶ä½“ç§¯ã€‚ç°åœ¨ç½‘ç«™ä¸Šå……æ»¡äº†å¤§é‡çš„å›¾ç‰‡ï¼Œå¦‚æœèƒ½å¤Ÿé™ä½æ¯ä¸€ä¸ªå›¾ç‰‡çš„æ–‡ä»¶å¤§å°ï¼Œé‚£ä¹ˆå°†å¤§å¤§å‡å°‘æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´çš„æ•°æ®ä¼ è¾“é‡ï¼Œè¿›è€Œé™ä½è®¿é—®å»¶è¿Ÿï¼Œæå‡è®¿é—®ä½“éªŒã€‚ç›®å‰åªæœ‰Chromeæµè§ˆå™¨å’ŒOperaæµè§ˆå™¨æ”¯æŒWebPæ ¼å¼ï¼Œå…¼å®¹æ€§ä¸å¤ªå¥½ã€‚\n\nåœ¨æ— æŸå‹ç¼©çš„æƒ…å†µä¸‹ï¼Œç›¸åŒè´¨é‡çš„WebPå›¾ç‰‡ï¼Œæ–‡ä»¶å¤§å°è¦æ¯”PNGå°26%ï¼›\nåœ¨æœ‰æŸå‹ç¼©çš„æƒ…å†µä¸‹ï¼Œå…·æœ‰ç›¸åŒå›¾ç‰‡ç²¾åº¦çš„WebPå›¾ç‰‡ï¼Œæ–‡ä»¶å¤§å°è¦æ¯”JPEGå°25%~34%ï¼›\nWebPå›¾ç‰‡æ ¼å¼æ”¯æŒå›¾ç‰‡é€æ˜åº¦ï¼Œä¸€ä¸ªæ— æŸå‹ç¼©çš„WebPå›¾ç‰‡ï¼Œå¦‚æœè¦æ”¯æŒé€æ˜åº¦åªéœ€è¦22%çš„æ ¼å¤–æ–‡ä»¶å¤§å°ã€‚\n\nå…­ã€Webpackä¼˜åŒ–1. å¦‚ä½•æâ¾¼webpackçš„æ‰“åŒ…é€Ÿåº¦?ï¼ˆ1ï¼‰ä¼˜åŒ– Loaderå¯¹äº Loader æ¥è¯´ï¼Œå½±å“æ‰“åŒ…æ•ˆç‡é¦–å½“å…¶å†²å¿…å± Babel äº†ã€‚å› ä¸º Babel ä¼šå°†ä»£ç è½¬ä¸ºå­—ç¬¦ä¸²ç”Ÿæˆ ASTï¼Œç„¶åå¯¹ AST ç»§ç»­è¿›è¡Œè½¬å˜æœ€åå†ç”Ÿæˆæ–°çš„ä»£ç ï¼Œé¡¹ç›®è¶Šå¤§ï¼Œè½¬æ¢ä»£ç è¶Šå¤šï¼Œæ•ˆç‡å°±è¶Šä½ã€‚å½“ç„¶äº†ï¼Œè¿™æ˜¯å¯ä»¥ä¼˜åŒ–çš„ã€‚\né¦–å…ˆæˆ‘ä»¬ä¼˜åŒ– Loader çš„æ–‡ä»¶æœç´¢èŒƒå›´\nmodule.exports &#x3D; &#123;\n  module: &#123;\n    rules: [\n      &#123;\n        &#x2F;&#x2F; js æ–‡ä»¶æ‰ä½¿ç”¨ babel\n        test: &#x2F;.js$&#x2F;,\n        loader: &#39;babel-loader&#39;,\n        &#x2F;&#x2F; åªåœ¨ src æ–‡ä»¶å¤¹ä¸‹æŸ¥æ‰¾\n        include: [resolve(&#39;src&#39;)],\n        &#x2F;&#x2F; ä¸ä¼šå»æŸ¥æ‰¾çš„è·¯å¾„\n        exclude: &#x2F;node_modules&#x2F;\n      &#125;\n    ]\n  &#125;\n&#125;\nå¤åˆ¶ä»£ç \n\nå¯¹äº Babel æ¥è¯´ï¼Œå¸Œæœ›åªä½œç”¨åœ¨ JS ä»£ç ä¸Šçš„ï¼Œç„¶å node_modules ä¸­ä½¿ç”¨çš„ä»£ç éƒ½æ˜¯ç¼–è¯‘è¿‡çš„ï¼Œæ‰€ä»¥å®Œå…¨æ²¡æœ‰å¿…è¦å†å»å¤„ç†ä¸€éã€‚\nå½“ç„¶è¿™æ ·åšè¿˜ä¸å¤Ÿï¼Œè¿˜å¯ä»¥å°† Babel ç¼–è¯‘è¿‡çš„æ–‡ä»¶ç¼“å­˜èµ·æ¥ï¼Œä¸‹æ¬¡åªéœ€è¦ç¼–è¯‘æ›´æ”¹è¿‡çš„ä»£ç æ–‡ä»¶å³å¯ï¼Œè¿™æ ·å¯ä»¥å¤§å¹…åº¦åŠ å¿«æ‰“åŒ…æ—¶é—´\nloader: &#39;babel-loader?cacheDirectory&#x3D;true&#39;\nå¤åˆ¶ä»£ç \n\nï¼ˆ2ï¼‰HappyPackå—é™äº Node æ˜¯å•çº¿ç¨‹è¿è¡Œçš„ï¼Œæ‰€ä»¥ Webpack åœ¨æ‰“åŒ…çš„è¿‡ç¨‹ä¸­ä¹Ÿæ˜¯å•çº¿ç¨‹çš„ï¼Œç‰¹åˆ«æ˜¯åœ¨æ‰§è¡Œ Loader çš„æ—¶å€™ï¼Œé•¿æ—¶é—´ç¼–è¯‘çš„ä»»åŠ¡å¾ˆå¤šï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´ç­‰å¾…çš„æƒ…å†µã€‚\nHappyPack å¯ä»¥å°† Loader çš„åŒæ­¥æ‰§è¡Œè½¬æ¢ä¸ºå¹¶è¡Œçš„ï¼Œè¿™æ ·å°±èƒ½å……åˆ†åˆ©ç”¨ç³»ç»Ÿèµ„æºæ¥åŠ å¿«æ‰“åŒ…æ•ˆç‡äº†\nmodule: &#123;\n  loaders: [\n    &#123;\n      test: &#x2F;.js$&#x2F;,\n      include: [resolve(&#39;src&#39;)],\n      exclude: &#x2F;node_modules&#x2F;,\n      &#x2F;&#x2F; id åé¢çš„å†…å®¹å¯¹åº”ä¸‹é¢\n      loader: &#39;happypack&#x2F;loader?id&#x3D;happybabel&#39;\n    &#125;\n  ]\n&#125;,\nplugins: [\n  new HappyPack(&#123;\n    id: &#39;happybabel&#39;,\n    loaders: [&#39;babel-loader?cacheDirectory&#39;],\n    &#x2F;&#x2F; å¼€å¯ 4 ä¸ªçº¿ç¨‹\n    threads: 4\n  &#125;)\n]\nå¤åˆ¶ä»£ç \n\nï¼ˆ3ï¼‰DllPluginDllPlugin å¯ä»¥å°†ç‰¹å®šçš„ç±»åº“æå‰æ‰“åŒ…ç„¶åå¼•å…¥ã€‚è¿™ç§æ–¹å¼å¯ä»¥æå¤§çš„å‡å°‘æ‰“åŒ…ç±»åº“çš„æ¬¡æ•°ï¼Œåªæœ‰å½“ç±»åº“æ›´æ–°ç‰ˆæœ¬æ‰æœ‰éœ€è¦é‡æ–°æ‰“åŒ…ï¼Œå¹¶ä¸”ä¹Ÿå®ç°äº†å°†å…¬å…±ä»£ç æŠ½ç¦»æˆå•ç‹¬æ–‡ä»¶çš„ä¼˜åŒ–æ–¹æ¡ˆã€‚DllPluginçš„ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š\n&#x2F;&#x2F; å•ç‹¬é…ç½®åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­\n&#x2F;&#x2F; webpack.dll.conf.js\nconst path &#x3D; require(&#39;path&#39;)\nconst webpack &#x3D; require(&#39;webpack&#39;)\nmodule.exports &#x3D; &#123;\n  entry: &#123;\n    &#x2F;&#x2F; æƒ³ç»Ÿä¸€æ‰“åŒ…çš„ç±»åº“\n    vendor: [&#39;react&#39;]\n  &#125;,\n  output: &#123;\n    path: path.join(__dirname, &#39;dist&#39;),\n    filename: &#39;[name].dll.js&#39;,\n    library: &#39;[name]-[hash]&#39;\n  &#125;,\n  plugins: [\n    new webpack.DllPlugin(&#123;\n      &#x2F;&#x2F; name å¿…é¡»å’Œ output.library ä¸€è‡´\n      name: &#39;[name]-[hash]&#39;,\n      &#x2F;&#x2F; è¯¥å±æ€§éœ€è¦ä¸ DllReferencePlugin ä¸­ä¸€è‡´\n      context: __dirname,\n      path: path.join(__dirname, &#39;dist&#39;, &#39;[name]-manifest.json&#39;)\n    &#125;)\n  ]\n&#125;\nå¤åˆ¶ä»£ç \n\nç„¶åéœ€è¦æ‰§è¡Œè¿™ä¸ªé…ç½®æ–‡ä»¶ç”Ÿæˆä¾èµ–æ–‡ä»¶ï¼Œæ¥ä¸‹æ¥éœ€è¦ä½¿ç”¨ DllReferencePlugin å°†ä¾èµ–æ–‡ä»¶å¼•å…¥é¡¹ç›®ä¸­\n&#x2F;&#x2F; webpack.conf.js\nmodule.exports &#x3D; &#123;\n  &#x2F;&#x2F; ...çœç•¥å…¶ä»–é…ç½®\n  plugins: [\n    new webpack.DllReferencePlugin(&#123;\n      context: __dirname,\n      &#x2F;&#x2F; manifest å°±æ˜¯ä¹‹å‰æ‰“åŒ…å‡ºæ¥çš„ json æ–‡ä»¶\n      manifest: require(&#39;.&#x2F;dist&#x2F;vendor-manifest.json&#39;),\n    &#125;)\n  ]\n&#125;\nå¤åˆ¶ä»£ç \n\nï¼ˆ4ï¼‰ä»£ç å‹ç¼©åœ¨ Webpack3 ä¸­ï¼Œä¸€èˆ¬ä½¿ç”¨ UglifyJS æ¥å‹ç¼©ä»£ç ï¼Œä½†æ˜¯è¿™ä¸ªæ˜¯å•çº¿ç¨‹è¿è¡Œçš„ï¼Œä¸ºäº†åŠ å¿«æ•ˆç‡ï¼Œå¯ä»¥ä½¿ç”¨ webpack-parallel-uglify-plugin æ¥å¹¶è¡Œè¿è¡Œ UglifyJSï¼Œä»è€Œæé«˜æ•ˆç‡ã€‚\nåœ¨ Webpack4 ä¸­ï¼Œä¸éœ€è¦ä»¥ä¸Šè¿™äº›æ“ä½œäº†ï¼Œåªéœ€è¦å°† mode è®¾ç½®ä¸º production å°±å¯ä»¥é»˜è®¤å¼€å¯ä»¥ä¸ŠåŠŸèƒ½ã€‚ä»£ç å‹ç¼©ä¹Ÿæ˜¯æˆ‘ä»¬å¿…åšçš„æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆï¼Œå½“ç„¶æˆ‘ä»¬ä¸æ­¢å¯ä»¥å‹ç¼© JS ä»£ç ï¼Œè¿˜å¯ä»¥å‹ç¼© HTMLã€CSS ä»£ç ï¼Œå¹¶ä¸”åœ¨å‹ç¼© JS ä»£ç çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡é…ç½®å®ç°æ¯”å¦‚åˆ é™¤ console.log è¿™ç±»ä»£ç çš„åŠŸèƒ½ã€‚\nï¼ˆ5ï¼‰å…¶ä»–å¯ä»¥é€šè¿‡ä¸€äº›å°çš„ä¼˜åŒ–ç‚¹æ¥åŠ å¿«æ‰“åŒ…é€Ÿåº¦\n\nresolve.extensionsï¼šç”¨æ¥è¡¨æ˜æ–‡ä»¶åç¼€åˆ—è¡¨ï¼Œé»˜è®¤æŸ¥æ‰¾é¡ºåºæ˜¯ [&#39;.js&#39;, &#39;.json&#39;]ï¼Œå¦‚æœä½ çš„å¯¼å…¥æ–‡ä»¶æ²¡æœ‰æ·»åŠ åç¼€å°±ä¼šæŒ‰ç…§è¿™ä¸ªé¡ºåºæŸ¥æ‰¾æ–‡ä»¶ã€‚æˆ‘ä»¬åº”è¯¥å°½å¯èƒ½å‡å°‘åç¼€åˆ—è¡¨é•¿åº¦ï¼Œç„¶åå°†å‡ºç°é¢‘ç‡é«˜çš„åç¼€æ’åœ¨å‰é¢\nresolve.aliasï¼šå¯ä»¥é€šè¿‡åˆ«åçš„æ–¹å¼æ¥æ˜ å°„ä¸€ä¸ªè·¯å¾„ï¼Œèƒ½è®© Webpack æ›´å¿«æ‰¾åˆ°è·¯å¾„\nmodule.noParseï¼šå¦‚æœä½ ç¡®å®šä¸€ä¸ªæ–‡ä»¶ä¸‹æ²¡æœ‰å…¶ä»–ä¾èµ–ï¼Œå°±å¯ä»¥ä½¿ç”¨è¯¥å±æ€§è®© Webpack ä¸æ‰«æè¯¥æ–‡ä»¶ï¼Œè¿™ç§æ–¹å¼å¯¹äºå¤§å‹çš„ç±»åº“å¾ˆæœ‰å¸®åŠ©\n\n2. å¦‚ä½•å‡å°‘ Webpack æ‰“åŒ…ä½“ç§¯ï¼ˆ1ï¼‰æŒ‰éœ€åŠ è½½åœ¨å¼€å‘ SPA é¡¹ç›®çš„æ—¶å€™ï¼Œé¡¹ç›®ä¸­éƒ½ä¼šå­˜åœ¨å¾ˆå¤šè·¯ç”±é¡µé¢ã€‚å¦‚æœå°†è¿™äº›é¡µé¢å…¨éƒ¨æ‰“åŒ…è¿›ä¸€ä¸ª JS æ–‡ä»¶çš„è¯ï¼Œè™½ç„¶å°†å¤šä¸ªè¯·æ±‚åˆå¹¶äº†ï¼Œä½†æ˜¯åŒæ ·ä¹ŸåŠ è½½äº†å¾ˆå¤šå¹¶ä¸éœ€è¦çš„ä»£ç ï¼Œè€—è´¹äº†æ›´é•¿çš„æ—¶é—´ã€‚é‚£ä¹ˆä¸ºäº†é¦–é¡µèƒ½æ›´å¿«åœ°å‘ˆç°ç»™ç”¨æˆ·ï¼Œå¸Œæœ›é¦–é¡µèƒ½åŠ è½½çš„æ–‡ä»¶ä½“ç§¯è¶Šå°è¶Šå¥½ï¼Œè¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨æŒ‰éœ€åŠ è½½ï¼Œå°†æ¯ä¸ªè·¯ç”±é¡µé¢å•ç‹¬æ‰“åŒ…ä¸ºä¸€ä¸ªæ–‡ä»¶ã€‚å½“ç„¶ä¸ä»…ä»…è·¯ç”±å¯ä»¥æŒ‰éœ€åŠ è½½ï¼Œå¯¹äº loadash è¿™ç§å¤§å‹ç±»åº“åŒæ ·å¯ä»¥ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½ã€‚\næŒ‰éœ€åŠ è½½çš„ä»£ç å®ç°è¿™é‡Œå°±ä¸è¯¦ç»†å±•å¼€äº†ï¼Œå› ä¸ºé‰´äºç”¨çš„æ¡†æ¶ä¸åŒï¼Œå®ç°èµ·æ¥éƒ½æ˜¯ä¸ä¸€æ ·çš„ã€‚å½“ç„¶äº†ï¼Œè™½ç„¶ä»–ä»¬çš„ç”¨æ³•å¯èƒ½ä¸åŒï¼Œä½†æ˜¯åº•å±‚çš„æœºåˆ¶éƒ½æ˜¯ä¸€æ ·çš„ã€‚éƒ½æ˜¯å½“ä½¿ç”¨çš„æ—¶å€™å†å»ä¸‹è½½å¯¹åº”æ–‡ä»¶ï¼Œè¿”å›ä¸€ä¸ª Promiseï¼Œå½“ Promise æˆåŠŸä»¥åå»æ‰§è¡Œå›è°ƒã€‚\nï¼ˆ2ï¼‰Scope HoistingScope Hoisting ä¼šåˆ†æå‡ºæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œå°½å¯èƒ½çš„æŠŠæ‰“åŒ…å‡ºæ¥çš„æ¨¡å—åˆå¹¶åˆ°ä¸€ä¸ªå‡½æ•°ä¸­å»ã€‚\næ¯”å¦‚å¸Œæœ›æ‰“åŒ…ä¸¤ä¸ªæ–‡ä»¶ï¼š\n&#x2F;&#x2F; test.js\nexport const a &#x3D; 1\n&#x2F;&#x2F; index.js\nimport &#123; a &#125; from &#39;.&#x2F;test.js&#39;\nå¤åˆ¶ä»£ç \n\nå¯¹äºè¿™ç§æƒ…å†µï¼Œæ‰“åŒ…å‡ºæ¥çš„ä»£ç ä¼šç±»ä¼¼è¿™æ ·ï¼š\n[\n  &#x2F;* 0 *&#x2F;\n  function (module, exports, require) &#123;\n    &#x2F;&#x2F;...\n  &#125;,\n  &#x2F;* 1 *&#x2F;\n  function (module, exports, require) &#123;\n    &#x2F;&#x2F;...\n  &#125;\n]\nå¤åˆ¶ä»£ç \n\nä½†æ˜¯å¦‚æœä½¿ç”¨ Scope Hoisting ï¼Œä»£ç å°±ä¼šå°½å¯èƒ½çš„åˆå¹¶åˆ°ä¸€ä¸ªå‡½æ•°ä¸­å»ï¼Œä¹Ÿå°±å˜æˆäº†è¿™æ ·çš„ç±»ä¼¼ä»£ç ï¼š\n[\n  &#x2F;* 0 *&#x2F;\n  function (module, exports, require) &#123;\n    &#x2F;&#x2F;...\n  &#125;\n]\nå¤åˆ¶ä»£ç \n\nè¿™æ ·çš„æ‰“åŒ…æ–¹å¼ç”Ÿæˆçš„ä»£ç æ˜æ˜¾æ¯”ä¹‹å‰çš„å°‘å¤šäº†ã€‚å¦‚æœåœ¨ Webpack4 ä¸­ä½ å¸Œæœ›å¼€å¯è¿™ä¸ªåŠŸèƒ½ï¼Œåªéœ€è¦å¯ç”¨ optimization.concatenateModules å°±å¯ä»¥äº†ï¼š\nmodule.exports &#x3D; &#123;\n  optimization: &#123;\n    concatenateModules: true\n  &#125;\n&#125;\nå¤åˆ¶ä»£ç \n\nï¼ˆ3ï¼‰Tree ShakingTree Shaking å¯ä»¥å®ç°åˆ é™¤é¡¹ç›®ä¸­æœªè¢«å¼•ç”¨çš„ä»£ç ï¼Œæ¯”å¦‚ï¼š\n&#x2F;&#x2F; test.js\nexport const a &#x3D; 1\nexport const b &#x3D; 2\n&#x2F;&#x2F; index.js\nimport &#123; a &#125; from &#39;.&#x2F;test.js&#39;\nå¤åˆ¶ä»£ç \n\nå¯¹äºä»¥ä¸Šæƒ…å†µï¼Œtest æ–‡ä»¶ä¸­çš„å˜é‡ b å¦‚æœæ²¡æœ‰åœ¨é¡¹ç›®ä¸­ä½¿ç”¨åˆ°çš„è¯ï¼Œå°±ä¸ä¼šè¢«æ‰“åŒ…åˆ°æ–‡ä»¶ä¸­ã€‚\nå¦‚æœä½¿ç”¨ Webpack 4 çš„è¯ï¼Œå¼€å¯ç”Ÿäº§ç¯å¢ƒå°±ä¼šè‡ªåŠ¨å¯åŠ¨è¿™ä¸ªä¼˜åŒ–åŠŸèƒ½ã€‚\n3. å¦‚ä½•â½¤webpackæ¥ä¼˜åŒ–å‰ç«¯æ€§èƒ½ï¼Ÿâ½¤webpackä¼˜åŒ–å‰ç«¯æ€§èƒ½æ˜¯æŒ‡ä¼˜åŒ–webpackçš„è¾“å‡ºç»“æœï¼Œè®©æ‰“åŒ…çš„æœ€ç»ˆç»“æœåœ¨æµè§ˆå™¨è¿â¾å¿«é€Ÿâ¾¼æ•ˆã€‚\n\nå‹ç¼©ä»£ç ï¼šåˆ é™¤å¤šä½™çš„ä»£ç ã€æ³¨é‡Šã€ç®€åŒ–ä»£ç çš„å†™æ³•ç­‰ç­‰â½…å¼ã€‚å¯ä»¥åˆ©â½¤webpackçš„ UglifyJsPlugin å’Œ ParallelUglifyPlugin æ¥å‹ç¼©JSâ½‚ä»¶ï¼Œ åˆ©â½¤ cssnano ï¼ˆcss-loader?minimizeï¼‰æ¥å‹ç¼©css\nåˆ©â½¤CDNåŠ é€Ÿ: åœ¨æ„å»ºè¿‡ç¨‹ä¸­ï¼Œå°†å¼•â½¤çš„é™æ€èµ„æºè·¯å¾„ä¿®æ”¹ä¸ºCDNä¸Šå¯¹åº”çš„è·¯å¾„ã€‚å¯ä»¥åˆ©â½¤webpackå¯¹äº output å‚æ•°å’Œå„loaderçš„ publicPath å‚æ•°æ¥ä¿®æ”¹èµ„æºè·¯å¾„\nTree Shaking: å°†ä»£ç ä¸­æ°¸è¿œä¸ä¼šâ¾›åˆ°çš„â½šæ®µåˆ é™¤æ‰ã€‚å¯ä»¥é€šè¿‡åœ¨å¯åŠ¨webpackæ—¶è¿½åŠ å‚æ•° â€“optimize-minimize æ¥å®ç°\nCode Splitting: å°†ä»£ç æŒ‰è·¯ç”±ç»´åº¦æˆ–è€…ç»„ä»¶åˆ†å—(chunk),è¿™æ ·åšåˆ°æŒ‰éœ€åŠ è½½,åŒæ—¶å¯ä»¥å……åˆ†åˆ©â½¤æµè§ˆå™¨ç¼“å­˜\næå–å…¬å…±ç¬¬ä¸‰â½…åº“: SplitChunksPluginæ’ä»¶æ¥è¿›â¾å…¬å…±æ¨¡å—æŠ½å–,åˆ©â½¤æµè§ˆå™¨ç¼“å­˜å¯ä»¥â»“æœŸç¼“å­˜è¿™äº›â½†éœ€é¢‘ç¹å˜åŠ¨çš„å…¬å…±ä»£ç \n\n4. å¦‚ä½•æâ¾¼webpackçš„æ„å»ºé€Ÿåº¦ï¼Ÿ\nå¤šâ¼Šâ¼æƒ…å†µä¸‹ï¼Œä½¿â½¤ CommonsChunkPlugin æ¥æå–å…¬å…±ä»£ç \né€šè¿‡ externals é…ç½®æ¥æå–å¸¸â½¤åº“\nåˆ©â½¤ DllPlugin å’Œ DllReferencePlugin é¢„ç¼–è¯‘èµ„æºæ¨¡å— é€šè¿‡ DllPlugin æ¥å¯¹é‚£äº›æˆ‘ä»¬å¼•â½¤ä½†æ˜¯ç»å¯¹ä¸ä¼šä¿®æ”¹çš„npmåŒ…æ¥è¿›â¾é¢„ç¼–è¯‘ï¼Œå†é€šè¿‡ DllReferencePlugin å°†é¢„ç¼–è¯‘çš„æ¨¡å—åŠ è½½è¿›æ¥ã€‚\nä½¿â½¤ Happypack å®ç°å¤šçº¿ç¨‹åŠ é€Ÿç¼–è¯‘\nä½¿â½¤ webpack-uglify-parallel æ¥æå‡ uglifyPlugin çš„å‹ç¼©é€Ÿåº¦ã€‚ åŸç†ä¸Š webpack-uglify-parallel é‡‡â½¤äº†å¤šæ ¸å¹¶â¾å‹ç¼©æ¥æå‡å‹ç¼©é€Ÿåº¦\nä½¿â½¤ Tree-shaking å’Œ Scope Hoisting æ¥å‰”é™¤å¤šä½™ä»£ç \n\n","slug":"æ€§èƒ½ä¼˜åŒ–å¸¸ç”¨æ–¹æ¡ˆ","date":"2022-05-13T07:21:05.000Z","categories_index":"","tags_index":"","author_index":"Beastrong"},{"id":"b0c39a989b20ba4596f03e3c1987bd23","title":"é¢è¯•é¢˜ç¬”è®°â€”â€”REACTç¯‡(ä¸‹)","content":"\nå…­ã€Redux1. å¯¹ Redux çš„ç†è§£ï¼Œä¸»è¦è§£å†³ä»€ä¹ˆé—®é¢˜Reactæ˜¯è§†å›¾å±‚æ¡†æ¶ã€‚Reduxæ˜¯ä¸€ä¸ªç”¨æ¥ç®¡ç†æ•°æ®çŠ¶æ€å’ŒUIçŠ¶æ€çš„JavaScriptåº”ç”¨å·¥å…·ã€‚éšç€JavaScriptå•é¡µåº”ç”¨ï¼ˆSPAï¼‰å¼€å‘æ—¥è¶‹å¤æ‚ï¼Œ JavaScriptéœ€è¦ç®¡ç†æ¯”ä»»ä½•æ—¶å€™éƒ½è¦å¤šçš„stateï¼ˆçŠ¶æ€ï¼‰ï¼Œ Reduxå°±æ˜¯é™ä½ç®¡ç†éš¾åº¦çš„ã€‚ï¼ˆReduxæ”¯æŒReactã€Angularã€jQueryç”šè‡³çº¯JavaScriptï¼‰ã€‚\nåœ¨ React ä¸­ï¼ŒUI ä»¥ç»„ä»¶çš„å½¢å¼æ¥æ­å»ºï¼Œç»„ä»¶ä¹‹é—´å¯ä»¥åµŒå¥—ç»„åˆã€‚ä½† React ä¸­ç»„ä»¶é—´é€šä¿¡çš„æ•°æ®æµæ˜¯å•å‘çš„ï¼Œé¡¶å±‚ç»„ä»¶å¯ä»¥é€šè¿‡ props å±æ€§å‘ä¸‹å±‚ç»„ä»¶ä¼ é€’æ•°æ®ï¼Œè€Œä¸‹å±‚ç»„ä»¶ä¸èƒ½å‘ä¸Šå±‚ç»„ä»¶ä¼ é€’æ•°æ®ï¼Œå…„å¼Ÿç»„ä»¶ä¹‹é—´åŒæ ·ä¸èƒ½ã€‚è¿™æ ·ç®€å•çš„å•å‘æ•°æ®æµæ”¯æ’‘èµ·äº† React ä¸­çš„æ•°æ®å¯æ§æ€§ã€‚\nå½“é¡¹ç›®è¶Šæ¥è¶Šå¤§çš„æ—¶å€™ï¼Œç®¡ç†æ•°æ®çš„äº‹ä»¶æˆ–å›è°ƒå‡½æ•°å°†è¶Šæ¥è¶Šå¤šï¼Œä¹Ÿå°†è¶Šæ¥è¶Šä¸å¥½ç®¡ç†ã€‚ç®¡ç†ä¸æ–­å˜åŒ–çš„ state éå¸¸å›°éš¾ã€‚å¦‚æœä¸€ä¸ª model çš„å˜åŒ–ä¼šå¼•èµ·å¦ä¸€ä¸ª model å˜åŒ–ï¼Œé‚£ä¹ˆå½“ view å˜åŒ–æ—¶ï¼Œå°±å¯èƒ½å¼•èµ·å¯¹åº” model ä»¥åŠå¦ä¸€ä¸ª model çš„å˜åŒ–ï¼Œä¾æ¬¡åœ°ï¼Œå¯èƒ½ä¼šå¼•èµ·å¦ä¸€ä¸ª view çš„å˜åŒ–ã€‚ç›´è‡³ä½ æä¸æ¸…æ¥šåˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆã€‚state åœ¨ä»€ä¹ˆæ—¶å€™ï¼Œç”±äºä»€ä¹ˆåŸå› ï¼Œå¦‚ä½•å˜åŒ–å·²ç„¶ä¸å—æ§åˆ¶ã€‚ å½“ç³»ç»Ÿå˜å¾—é”™ç»¼å¤æ‚çš„æ—¶å€™ï¼Œæƒ³é‡ç°é—®é¢˜æˆ–è€…æ·»åŠ æ–°åŠŸèƒ½å°±ä¼šå˜å¾—ä¸¾æ­¥ç»´è‰°ã€‚å¦‚æœè¿™è¿˜ä¸å¤Ÿç³Ÿç³•ï¼Œè€ƒè™‘ä¸€äº›æ¥è‡ªå‰ç«¯å¼€å‘é¢†åŸŸçš„æ–°éœ€æ±‚ï¼Œå¦‚æ›´æ–°è°ƒä¼˜ã€æœåŠ¡ç«¯æ¸²æŸ“ã€è·¯ç”±è·³è½¬å‰è¯·æ±‚æ•°æ®ç­‰ã€‚state çš„ç®¡ç†åœ¨å¤§é¡¹ç›®ä¸­ç›¸å½“å¤æ‚ã€‚\nRedux æä¾›äº†ä¸€ä¸ªå« store çš„ç»Ÿä¸€ä»“å‚¨åº“ï¼Œç»„ä»¶é€šè¿‡ dispatch å°† state ç›´æ¥ä¼ å…¥storeï¼Œä¸ç”¨é€šè¿‡å…¶ä»–çš„ç»„ä»¶ã€‚å¹¶ä¸”ç»„ä»¶é€šè¿‡ subscribe ä» storeè·å–åˆ° state çš„æ”¹å˜ã€‚ä½¿ç”¨äº† Reduxï¼Œæ‰€æœ‰çš„ç»„ä»¶éƒ½å¯ä»¥ä» store ä¸­è·å–åˆ°æ‰€éœ€çš„ stateï¼Œä»–ä»¬ä¹Ÿèƒ½ä»store è·å–åˆ° state çš„æ”¹å˜ã€‚è¿™æ¯”ç»„ä»¶ä¹‹é—´äº’ç›¸ä¼ é€’æ•°æ®æ¸…æ™°æ˜æœ—çš„å¤šã€‚\nä¸»è¦è§£å†³çš„é—®é¢˜ï¼š å•çº¯çš„Reduxåªæ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œæ˜¯æ²¡æœ‰UIå‘ˆç°çš„ï¼Œreact- reduxä½œç”¨æ˜¯å°†Reduxçš„çŠ¶æ€æœºå’ŒReactçš„UIå‘ˆç°ç»‘å®šåœ¨ä¸€èµ·ï¼Œå½“ä½ dispatch actionæ”¹å˜stateçš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨æ›´æ–°é¡µé¢ã€‚\n2. Redux åŸç†åŠå·¥ä½œæµç¨‹ï¼ˆ1ï¼‰åŸç† Reduxæºç ä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ¨¡å—æ–‡ä»¶\n\ncompose.js æä¾›ä»å³åˆ°å·¦è¿›è¡Œå‡½æ•°å¼ç¼–ç¨‹\ncreateStore.js æä¾›ä½œä¸ºç”Ÿæˆå”¯ä¸€storeçš„å‡½æ•°\ncombineReducers.js æä¾›åˆå¹¶å¤šä¸ªreducerçš„å‡½æ•°ï¼Œä¿è¯storeçš„å”¯ä¸€æ€§\nbindActionCreators.js å¯ä»¥è®©å¼€å‘è€…åœ¨ä¸ç›´æ¥æ¥è§¦dispacthçš„å‰æä¸‹è¿›è¡Œæ›´æ”¹stateçš„æ“ä½œ\napplyMiddleware.js è¿™ä¸ªæ–¹æ³•é€šè¿‡ä¸­é—´ä»¶æ¥å¢å¼ºdispatchçš„åŠŸèƒ½\n\nconst actionTypes &#x3D; &#123;\n    ADD: &#39;ADD&#39;,\n    CHANGEINFO: &#39;CHANGEINFO&#39;,\n&#125;\n\nconst initState &#x3D; &#123;\n    info: &#39;åˆå§‹åŒ–&#39;,\n&#125;\n\nexport default function initReducer(state&#x3D;initState, action) &#123;\n    switch(action.type) &#123;\n        case actionTypes.CHANGEINFO:\n            return &#123;\n                ...state,\n                info: action.preload.info || &#39;&#39;,\n            &#125;\n        default:\n            return &#123; ...state &#125;;\n    &#125;\n&#125;\n\nexport default function createStore(reducer, initialState, middleFunc) &#123;\n\n    if (initialState &amp;&amp; typeof initialState &#x3D;&#x3D;&#x3D; &#39;function&#39;) &#123;\n        middleFunc &#x3D; initialState;\n        initialState &#x3D; undefined;\n    &#125;\n\n    let currentState &#x3D; initialState;\n\n    const listeners &#x3D; [];\n\n    if (middleFunc &amp;&amp; typeof middleFunc &#x3D;&#x3D;&#x3D; &#39;function&#39;) &#123;\n        &#x2F;&#x2F; å°è£…dispatch \n        return middleFunc(createStore)(reducer, initialState);\n    &#125;\n\n    const getState &#x3D; () &#x3D;&gt; &#123;\n        return currentState;\n    &#125;\n\n    const dispatch &#x3D; (action) &#x3D;&gt; &#123;\n        currentState &#x3D; reducer(currentState, action);\n\n        listeners.forEach(listener &#x3D;&gt; &#123;\n            listener();\n        &#125;)\n    &#125;\n\n    const subscribe &#x3D; (listener) &#x3D;&gt; &#123;\n        listeners.push(listener);\n    &#125;\n\n    return &#123;\n        getState,\n        dispatch,\n        subscribe\n    &#125;\n&#125;\nå¤åˆ¶ä»£ç \n\nï¼ˆ2ï¼‰å·¥ä½œæµç¨‹\n\nconst store&#x3D; createStoreï¼ˆfnï¼‰ç”Ÿæˆæ•°æ®;\naction: {type: Symble(â€˜action01), payload:â€™payloadâ€™ }å®šä¹‰è¡Œä¸º;\ndispatchå‘èµ·actionï¼šstore.dispatch(doSomething(â€˜action001â€™));\nreducerï¼šå¤„ç†actionï¼Œè¿”å›æ–°çš„state;\n\né€šä¿—ç‚¹è§£é‡Šï¼š\n\né¦–å…ˆï¼Œç”¨æˆ·ï¼ˆé€šè¿‡Viewï¼‰å‘å‡ºActionï¼Œå‘å‡ºæ–¹å¼å°±ç”¨åˆ°äº†dispatchæ–¹æ³•\nç„¶åï¼ŒStoreè‡ªåŠ¨è°ƒç”¨Reducerï¼Œå¹¶ä¸”ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼šå½“å‰Stateå’Œæ”¶åˆ°çš„Actionï¼ŒReducerä¼šè¿”å›æ–°çš„State\nStateâ€”æ—¦æœ‰å˜åŒ–ï¼ŒStoreå°±ä¼šè°ƒç”¨ç›‘å¬å‡½æ•°ï¼Œæ¥æ›´æ–°View\n\nä»¥ store ä¸ºæ ¸å¿ƒï¼Œå¯ä»¥æŠŠå®ƒçœ‹æˆæ•°æ®å­˜å‚¨ä¸­å¿ƒï¼Œä½†æ˜¯ä»–è¦æ›´æ”¹æ•°æ®çš„æ—¶å€™ä¸èƒ½ç›´æ¥ä¿®æ”¹ï¼Œæ•°æ®ä¿®æ”¹æ›´æ–°çš„è§’è‰²ç”±Reducersæ¥æ‹…ä»»ï¼Œstoreåªåšå­˜å‚¨ï¼Œä¸­é—´äººï¼Œå½“Reducersçš„æ›´æ–°å®Œæˆä»¥åä¼šé€šè¿‡storeçš„è®¢é˜…æ¥é€šçŸ¥react componentï¼Œç»„ä»¶æŠŠæ–°çš„çŠ¶æ€é‡æ–°è·å–æ¸²æŸ“ï¼Œç»„ä»¶ä¸­ä¹Ÿèƒ½ä¸»åŠ¨å‘é€actionï¼Œåˆ›å»ºactionåè¿™ä¸ªåŠ¨ä½œæ˜¯ä¸ä¼šæ‰§è¡Œçš„ï¼Œæ‰€ä»¥è¦dispatchè¿™ä¸ªactionï¼Œè®©storeé€šè¿‡reducerså»åšæ›´æ–°React Component å°±æ˜¯reactçš„æ¯ä¸ªç»„ä»¶ã€‚\n3. Redux ä¸­å¼‚æ­¥çš„è¯·æ±‚æ€ä¹ˆå¤„ç†å¯ä»¥åœ¨ componentDidmount ä¸­ç›´æ¥è¿›â¾è¯·æ±‚â½†é¡»å€ŸåŠ©reduxã€‚ä½†æ˜¯åœ¨â¼€å®šè§„æ¨¡çš„é¡¹â½¬ä¸­,ä¸Šè¿°â½…æ³•å¾ˆéš¾è¿›â¾å¼‚æ­¥æµçš„ç®¡ç†,é€šå¸¸æƒ…å†µä¸‹æˆ‘ä»¬ä¼šå€ŸåŠ©reduxçš„å¼‚æ­¥ä¸­é—´ä»¶è¿›â¾å¼‚æ­¥å¤„ç†ã€‚reduxå¼‚æ­¥æµä¸­é—´ä»¶å…¶å®æœ‰å¾ˆå¤šï¼Œå½“ä¸‹ä¸»æµçš„å¼‚æ­¥ä¸­é—´ä»¶æœ‰ä¸¤ç§redux-thunkã€redux-sagaã€‚\nï¼ˆ1ï¼‰ä½¿ç”¨react-thunkä¸­é—´ä»¶\nredux-thunkä¼˜ç‚¹:\n\nä½“ç§¯â¼©: redux-thunkçš„å®ç°â½…å¼å¾ˆç®€å•,åªæœ‰ä¸åˆ°20â¾ä»£ç \nä½¿â½¤ç®€å•: redux-thunkæ²¡æœ‰å¼•â¼Šåƒredux-sagaæˆ–è€…redux-observableé¢å¤–çš„èŒƒå¼,ä¸Šâ¼¿ç®€å•\n\nredux-thunkç¼ºé™·:\n\næ ·æ¿ä»£ç è¿‡å¤š: ä¸reduxæœ¬èº«â¼€æ ·,é€šå¸¸â¼€ä¸ªè¯·æ±‚éœ€è¦â¼¤é‡çš„ä»£ç ,â½½ä¸”å¾ˆå¤šéƒ½æ˜¯é‡å¤æ€§è´¨çš„\nè€¦åˆä¸¥é‡: å¼‚æ­¥æ“ä½œä¸reduxçš„actionå¶åˆåœ¨â¼€èµ·,ä¸â½…ä¾¿ç®¡ç†\nåŠŸèƒ½å­±å¼±: æœ‰â¼€äº›å®é™…å¼€å‘ä¸­å¸¸â½¤çš„åŠŸèƒ½éœ€è¦â¾ƒâ¼°è¿›â¾å°è£…\n\nä½¿ç”¨æ­¥éª¤ï¼š\n\né…ç½®ä¸­é—´ä»¶ï¼Œåœ¨storeçš„åˆ›å»ºä¸­é…ç½®\n\nimport &#123;createStore, applyMiddleware, compose&#125; from &#39;redux&#39;;\nimport reducer from &#39;.&#x2F;reducer&#39;;\nimport thunk from &#39;redux-thunk&#39;\n\n&#x2F;&#x2F; è®¾ç½®è°ƒè¯•å·¥å…·\nconst composeEnhancers &#x3D; window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__(&#123;&#125;) : compose;\n&#x2F;&#x2F; è®¾ç½®ä¸­é—´ä»¶\nconst enhancer &#x3D; composeEnhancers(\n  applyMiddleware(thunk)\n);\n\nconst store &#x3D; createStore(reducer, enhancer);\n\nexport default store;\nå¤åˆ¶ä»£ç \n\n\næ·»åŠ ä¸€ä¸ªè¿”å›å‡½æ•°çš„actionCreatorï¼Œå°†å¼‚æ­¥è¯·æ±‚é€»è¾‘æ”¾åœ¨é‡Œé¢\n\n&#x2F;**\n  å‘é€getè¯·æ±‚ï¼Œå¹¶ç”Ÿæˆç›¸åº”actionï¼Œæ›´æ–°storeçš„å‡½æ•°\n  @param url &#123;string&#125; è¯·æ±‚åœ°å€\n  @param func &#123;function&#125; çœŸæ­£éœ€è¦ç”Ÿæˆçš„actionå¯¹åº”çš„actionCreator\n  @return &#123;function&#125; \n*&#x2F;\n&#x2F;&#x2F; dispatchä¸ºè‡ªåŠ¨æ¥æ”¶çš„store.dispatchå‡½æ•° \nexport const getHttpAction &#x3D; (url, func) &#x3D;&gt; (dispatch) &#x3D;&gt; &#123;\n    axios.get(url).then(function(res)&#123;\n        const action &#x3D; func(res.data)\n        dispatch(action)\n    &#125;)\n&#125;\nå¤åˆ¶ä»£ç \n\n\nç”Ÿæˆactionï¼Œå¹¶å‘é€action\n\ncomponentDidMount()&#123;\n    var action &#x3D; getHttpAction(&#39;&#x2F;getData&#39;, getInitTodoItemAction)\n    &#x2F;&#x2F; å‘é€å‡½æ•°ç±»å‹çš„actionæ—¶ï¼Œè¯¥actionçš„å‡½æ•°ä½“ä¼šè‡ªåŠ¨æ‰§è¡Œ\n    store.dispatch(action)\n&#125;\nå¤åˆ¶ä»£ç \n\nï¼ˆ2ï¼‰ä½¿ç”¨redux-sagaä¸­é—´ä»¶\nredux-sagaä¼˜ç‚¹:\n\nå¼‚æ­¥è§£è€¦: å¼‚æ­¥æ“ä½œè¢«è¢«è½¬ç§»åˆ°å•ç‹¬ saga.js ä¸­ï¼Œä¸å†æ˜¯æºæ‚åœ¨ action.js æˆ– component.js ä¸­\nactionæ‘†è„±thunk function: dispatch çš„å‚æ•°ä¾ç„¶æ˜¯â¼€ä¸ªçº¯ç²¹çš„ action (FSA)ï¼Œâ½½ä¸æ˜¯å……æ»¡ â€œâ¿Šé­”æ³•â€ thunk function\nå¼‚å¸¸å¤„ç†: å—ç›Šäº generator function çš„ saga å®ç°ï¼Œä»£ç å¼‚å¸¸&#x2F;è¯·æ±‚å¤±è´¥ éƒ½å¯ä»¥ç›´æ¥é€šè¿‡ try&#x2F;catch è¯­æ³•ç›´æ¥æ•è·å¤„ç†\nåŠŸèƒ½å¼ºâ¼¤: redux-sagaæä¾›äº†â¼¤é‡çš„Saga è¾…åŠ©å‡½æ•°å’ŒEffect åˆ›å»ºå™¨ä¾›å¼€å‘è€…ä½¿â½¤,å¼€å‘è€…â½†é¡»å°è£…æˆ–è€…ç®€å•å°è£…å³å¯ä½¿â½¤\nçµæ´»: redux-sagaå¯ä»¥å°†å¤šä¸ªSagaå¯ä»¥ä¸²â¾&#x2F;å¹¶â¾ç»„åˆèµ·æ¥,å½¢æˆâ¼€ä¸ªâ¾®å¸¸å®â½¤çš„å¼‚æ­¥flow\næ˜“æµ‹è¯•ï¼Œæä¾›äº†å„ç§caseçš„æµ‹è¯•â½…æ¡ˆï¼ŒåŒ…æ‹¬mock taskï¼Œåˆ†â½€è¦†ç›–ç­‰ç­‰\n\nredux-sagaç¼ºé™·:\n\né¢å¤–çš„å­¦ä¹ æˆæœ¬: redux-sagaä¸ä»…åœ¨ä½¿â½¤éš¾ä»¥ç†è§£çš„ generator function,â½½ä¸”æœ‰æ•°â¼—ä¸ªAPI,å­¦ä¹ æˆæœ¬è¿œè¶…redux-thunk,æœ€é‡è¦çš„æ˜¯ä½ çš„é¢å¤–å­¦ä¹ æˆæœ¬æ˜¯åªæœåŠ¡äºè¿™ä¸ªåº“çš„,ä¸redux-observableä¸åŒ,redux-observableè™½ç„¶ä¹Ÿæœ‰é¢å¤–å­¦ä¹ æˆæœ¬ä½†æ˜¯èƒŒåæ˜¯rxjså’Œâ¼€æ•´å¥—æ€æƒ³\nä½“ç§¯åºâ¼¤: ä½“ç§¯ç•¥â¼¤,ä»£ç è¿‘2000â¾ï¼Œminç‰ˆ25KBå·¦å³\nåŠŸèƒ½è¿‡å‰©: å®é™…ä¸Šå¹¶å‘æ§åˆ¶ç­‰åŠŸèƒ½å¾ˆéš¾â½¤åˆ°,ä½†æ˜¯æˆ‘ä»¬ä¾ç„¶éœ€è¦å¼•â¼Šè¿™äº›ä»£ç \ntsâ½€æŒä¸å‹å¥½: yieldâ½†æ³•è¿”å›TSç±»å‹\n\nredux-sagaå¯ä»¥æ•è·actionï¼Œç„¶åæ‰§è¡Œä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆå¯ä»¥æŠŠå¼‚æ­¥ä»£ç æ”¾åœ¨è¿™ä¸ªå‡½æ•°ä¸­ï¼Œä½¿ç”¨æ­¥éª¤å¦‚ä¸‹ï¼š\n\né…ç½®ä¸­é—´ä»¶\n\nimport &#123;createStore, applyMiddleware, compose&#125; from &#39;redux&#39;;\nimport reducer from &#39;.&#x2F;reducer&#39;;\nimport createSagaMiddleware from &#39;redux-saga&#39;\nimport TodoListSaga from &#39;.&#x2F;sagas&#39;\n\nconst composeEnhancers &#x3D; window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__(&#123;&#125;) : compose;\nconst sagaMiddleware &#x3D; createSagaMiddleware()\n\nconst enhancer &#x3D; composeEnhancers(\n  applyMiddleware(sagaMiddleware)\n);\n\nconst store &#x3D; createStore(reducer, enhancer);\nsagaMiddleware.run(TodoListSaga)\n\nexport default store;\nå¤åˆ¶ä»£ç \n\n\nå°†å¼‚æ­¥è¯·æ±‚æ”¾åœ¨sagas.jsä¸­\n\nimport &#123;takeEvery, put&#125; from &#39;redux-saga&#x2F;effects&#39;\nimport &#123;initTodoList&#125; from &#39;.&#x2F;actionCreator&#39;\nimport &#123;GET_INIT_ITEM&#125; from &#39;.&#x2F;actionTypes&#39;\nimport axios from &#39;axios&#39;\n\nfunction* func()&#123;\n    try&#123;\n        &#x2F;&#x2F; å¯ä»¥è·å–å¼‚æ­¥è¿”å›æ•°æ®\n        const res &#x3D; yield axios.get(&#39;&#x2F;getData&#39;)\n        const action &#x3D; initTodoList(res.data)\n        &#x2F;&#x2F; å°†actionå‘é€åˆ°reducer\n        yield put(action)\n    &#125;catch(e)&#123;\n        console.log(&#39;ç½‘ç»œè¯·æ±‚å¤±è´¥&#39;)\n    &#125;\n&#125;\n\nfunction* mySaga()&#123;\n    &#x2F;&#x2F; è‡ªåŠ¨æ•è·GET_INIT_ITEMç±»å‹çš„actionï¼Œå¹¶æ‰§è¡Œfunc\n    yield takeEvery(GET_INIT_ITEM, func)\n&#125;\n\nexport default mySaga\nå¤åˆ¶ä»£ç \n\n\nå‘é€action\n\ncomponentDidMount()&#123;\n  const action &#x3D; getInitTodoItemAction()\n  store.dispatch(action)\n&#125;\nå¤åˆ¶ä»£ç \n\n4. Redux æ€ä¹ˆå®ç°å±æ€§ä¼ é€’ï¼Œä»‹ç»ä¸‹åŸç†react-redux æ•°æ®ä¼ è¾“âˆ¶ viewâ€“&gt;actionâ€“&gt;reducerâ€“&gt;storeâ€“&gt;viewã€‚çœ‹ä¸‹ç‚¹å‡»äº‹ä»¶çš„æ•°æ®æ˜¯å¦‚ä½•é€šè¿‡reduxä¼ åˆ°viewä¸Šï¼š\n\nview ä¸Šçš„AddClick äº‹ä»¶é€šè¿‡mapDispatchToProps æŠŠæ•°æ®ä¼ åˆ°action â€”&gt; click:()&#x3D;&gt;dispatch(ADD)\naction çš„ADD ä¼ åˆ°reducerä¸Š\nreducerä¼ åˆ°storeä¸Š const store &#x3D; createStore(reducer);\nstoreå†é€šè¿‡ mapStateToProps æ˜ å°„ç©¿åˆ°viewä¸Štext:State.text\n\nä»£ç ç¤ºä¾‹âˆ¶\nimport React from &#39;react&#39;;\nimport ReactDOM from &#39;react-dom&#39;;\nimport &#123; createStore &#125; from &#39;redux&#39;;\nimport &#123; Provider, connect &#125; from &#39;react-redux&#39;;\nclass App extends React.Component&#123;\n    render()&#123;\n        let &#123; text, click, clickR &#125; &#x3D; this.props;\n        return(\n            &lt;div&gt;\n                &lt;div&gt;æ•°æ®:å·²æœ‰äºº&#123;text&#125;&lt;&#x2F;div&gt;\n                &lt;div onClick&#x3D;&#123;click&#125;&gt;åŠ äºº&lt;&#x2F;div&gt;\n                &lt;div onClick&#x3D;&#123;clickR&#125;&gt;å‡äºº&lt;&#x2F;div&gt;\n            &lt;&#x2F;div&gt;\n        )\n    &#125;\n&#125;\nconst initialState &#x3D; &#123;\n    text:5\n&#125;\nconst reducer &#x3D; function(state,action)&#123;\n    switch(action.type)&#123;\n        case &#39;ADD&#39;:\n            return &#123;text:state.text+1&#125;\n        case &#39;REMOVE&#39;:\n            return &#123;text:state.text-1&#125;\n        default:\n            return initialState;\n    &#125;\n&#125;\n\nlet ADD &#x3D; &#123;\n    type:&#39;ADD&#39;\n&#125;\nlet Remove &#x3D; &#123;\n    type:&#39;REMOVE&#39;\n&#125;\n\nconst store &#x3D; createStore(reducer);\n\nlet mapStateToProps &#x3D; function (state)&#123;\n    return&#123;\n        text:state.text\n    &#125;\n&#125;\n\nlet mapDispatchToProps &#x3D; function(dispatch)&#123;\n    return&#123;\n        click:()&#x3D;&gt;dispatch(ADD),\n        clickR:()&#x3D;&gt;dispatch(Remove)\n    &#125;\n&#125;\n\nconst App1 &#x3D; connect(mapStateToProps,mapDispatchToProps)(App);\n\nReactDOM.render(\n    &lt;Provider store &#x3D; &#123;store&#125;&gt;\n        &lt;App1&gt;&lt;&#x2F;App1&gt;\n    &lt;&#x2F;Provider&gt;,document.getElementById(&#39;root&#39;)\n)\nå¤åˆ¶ä»£ç \n\n5. Redux ä¸­é—´ä»¶æ˜¯ä»€ä¹ˆï¼Ÿæ¥å—å‡ ä¸ªå‚æ•°ï¼ŸæŸ¯é‡ŒåŒ–å‡½æ•°ä¸¤ç«¯çš„å‚æ•°å…·ä½“æ˜¯ä»€ä¹ˆï¼ŸRedux çš„ä¸­é—´ä»¶æä¾›çš„æ˜¯ä½äº action è¢«å‘èµ·ä¹‹åï¼Œåˆ°è¾¾ reducer ä¹‹å‰çš„æ‰©å±•ç‚¹ï¼Œæ¢è€Œè¨€ä¹‹ï¼ŒåŸæœ¬ view -â†’&gt; action -&gt; reducer -&gt; store çš„æ•°æ®æµåŠ ä¸Šä¸­é—´ä»¶åå˜æˆäº† view -&gt; action -&gt; middleware -&gt; reducer -&gt; store ï¼Œåœ¨è¿™ä¸€ç¯èŠ‚å¯ä»¥åšä¸€äº›â€å‰¯ä½œç”¨â€çš„æ“ä½œï¼Œå¦‚å¼‚æ­¥è¯·æ±‚ã€æ‰“å°æ—¥å¿—ç­‰ã€‚\napplyMiddlewareæºç ï¼š\nexport default function applyMiddleware(...middlewares) &#123;\n    return createStore &#x3D;&gt; (...args) &#x3D;&gt; &#123;\n        &#x2F;&#x2F; åˆ©ç”¨ä¼ å…¥çš„createStoreå’Œreducerå’Œåˆ›å»ºä¸€ä¸ªstore\n        const store &#x3D; createStore(...args)\n        let dispatch &#x3D; () &#x3D;&gt; &#123;\n            throw new Error()\n        &#125;\n        const middlewareAPI &#x3D; &#123;\n            getState: store.getState,\n            dispatch: (...args) &#x3D;&gt; dispatch(...args)\n        &#125;\n        &#x2F;&#x2F; è®©æ¯ä¸ª middleware å¸¦ç€ middlewareAPI è¿™ä¸ªå‚æ•°åˆ†åˆ«æ‰§è¡Œä¸€é\n        const chain &#x3D; middlewares.map(middleware &#x3D;&gt; middleware(middlewareAPI))\n        &#x2F;&#x2F; æ¥ç€ compose å°† chain ä¸­çš„æ‰€æœ‰åŒ¿åå‡½æ•°ï¼Œç»„è£…æˆä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œå³æ–°çš„ dispatch\n        dispatch &#x3D; compose(...chain)(store.dispatch)\n        return &#123;\n            ...store,\n            dispatch\n        &#125;\n    &#125;\n&#125;\nå¤åˆ¶ä»£ç \n\nä»applyMiddlewareä¸­å¯ä»¥çœ‹å‡ºâˆ¶\n\nreduxä¸­é—´ä»¶æ¥å—ä¸€ä¸ªå¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œå¯¹è±¡çš„å‚æ•°ä¸Šæœ‰ä¸¤ä¸ªå­—æ®µ dispatch å’Œ getStateï¼Œåˆ†åˆ«ä»£è¡¨ç€ Redux Store ä¸Šçš„ä¸¤ä¸ªåŒåå‡½æ•°ã€‚\næŸ¯é‡ŒåŒ–å‡½æ•°ä¸¤ç«¯ä¸€ä¸ªæ˜¯ middewaresï¼Œä¸€ä¸ªæ˜¯store.dispatch\n\n6. Redux è¯·æ±‚ä¸­é—´ä»¶å¦‚ä½•å¤„ç†å¹¶å‘ä½¿ç”¨redux-Saga redux-sagaæ˜¯ä¸€ä¸ªç®¡ç†reduxåº”ç”¨å¼‚æ­¥æ“ä½œçš„ä¸­é—´ä»¶ï¼Œç”¨äºä»£æ›¿ redux-thunk çš„ã€‚å®ƒé€šè¿‡åˆ›å»º Sagas å°†æ‰€æœ‰å¼‚æ­¥æ“ä½œé€»è¾‘å­˜æ”¾åœ¨ä¸€ä¸ªåœ°æ–¹è¿›è¡Œé›†ä¸­å¤„ç†ï¼Œä»¥æ­¤å°†reactä¸­çš„åŒæ­¥æ“ä½œä¸å¼‚æ­¥æ“ä½œåŒºåˆ†å¼€æ¥ï¼Œä»¥ä¾¿äºåæœŸçš„ç®¡ç†ä¸ç»´æŠ¤ã€‚ redux-sagaå¦‚ä½•å¤„ç†å¹¶å‘ï¼š\n\ntakeEvery\n\nå¯ä»¥è®©å¤šä¸ª saga ä»»åŠ¡å¹¶è¡Œè¢« fork æ‰§è¡Œã€‚\nimport &#123;\n    fork,\n    take\n&#125; from &quot;redux-saga&#x2F;effects&quot;\n\nconst takeEvery &#x3D; (pattern, saga, ...args) &#x3D;&gt; fork(function*() &#123;\n    while (true) &#123;\n        const action &#x3D; yield take(pattern)\n        yield fork(saga, ...args.concat(action))\n    &#125;\n&#125;)\nå¤åˆ¶ä»£ç \n\n\ntakeLatest\n\ntakeLatest ä¸å…è®¸å¤šä¸ª saga ä»»åŠ¡å¹¶è¡Œåœ°æ‰§è¡Œã€‚ä¸€æ—¦æ¥æ”¶åˆ°æ–°çš„å‘èµ·çš„ actionï¼Œå®ƒå°±ä¼šå–æ¶ˆå‰é¢æ‰€æœ‰ fork è¿‡çš„ä»»åŠ¡ï¼ˆå¦‚æœè¿™äº›ä»»åŠ¡è¿˜åœ¨æ‰§è¡Œçš„è¯ï¼‰ã€‚ åœ¨å¤„ç† AJAX è¯·æ±‚çš„æ—¶å€™ï¼Œå¦‚æœåªå¸Œæœ›è·å–æœ€åé‚£ä¸ªè¯·æ±‚çš„å“åº”ï¼Œ takeLatest å°±ä¼šéå¸¸æœ‰ç”¨ã€‚\nimport &#123;\n    cancel,\n    fork,\n    take\n&#125; from &quot;redux-saga&#x2F;effects&quot;\n\nconst takeLatest &#x3D; (pattern, saga, ...args) &#x3D;&gt; fork(function*() &#123;\n    let lastTask\n    while (true) &#123;\n        const action &#x3D; yield take(pattern)\n        if (lastTask) &#123;\n            yield cancel(lastTask) &#x2F;&#x2F; å¦‚æœä»»åŠ¡å·²ç»ç»“æŸï¼Œåˆ™ cancel ä¸ºç©ºæ“ä½œ\n        &#125;\n        lastTask &#x3D; yield fork(saga, ...args.concat(action))\n    &#125;\n&#125;)\nå¤åˆ¶ä»£ç \n\n7. Redux çŠ¶æ€ç®¡ç†å™¨å’Œå˜é‡æŒ‚è½½åˆ° window ä¸­æœ‰ä»€ä¹ˆåŒºåˆ«ä¸¤è€…éƒ½æ˜¯å­˜å‚¨æ•°æ®ä»¥ä¾›åæœŸä½¿ç”¨ã€‚ä½†æ˜¯ReduxçŠ¶æ€æ›´æ”¹å¯å›æº¯â€”â€”Time travelï¼Œæ•°æ®å¤šäº†çš„æ—¶å€™å¯ä»¥å¾ˆæ¸…æ™°çš„çŸ¥é“æ”¹åŠ¨åœ¨å“ªé‡Œå‘ç”Ÿï¼Œå®Œæ•´çš„æä¾›äº†ä¸€å¥—çŠ¶æ€ç®¡ç†æ¨¡å¼ã€‚\néšç€ JavaScript å•é¡µåº”ç”¨å¼€å‘æ—¥è¶‹å¤æ‚ï¼ŒJavaScript éœ€è¦ç®¡ç†æ¯”ä»»ä½•æ—¶å€™éƒ½è¦å¤šçš„ state ï¼ˆçŠ¶æ€ï¼‰ã€‚ è¿™äº› state å¯èƒ½åŒ…æ‹¬æœåŠ¡å™¨å“åº”ã€ç¼“å­˜æ•°æ®ã€æœ¬åœ°ç”Ÿæˆå°šæœªæŒä¹…åŒ–åˆ°æœåŠ¡å™¨çš„æ•°æ®ï¼Œä¹ŸåŒ…æ‹¬ UIçŠ¶æ€ï¼Œå¦‚æ¿€æ´»çš„è·¯ç”±ï¼Œè¢«é€‰ä¸­çš„æ ‡ç­¾ï¼Œæ˜¯å¦æ˜¾ç¤ºåŠ è½½åŠ¨æ•ˆæˆ–è€…åˆ†é¡µå™¨ç­‰ç­‰ã€‚\nç®¡ç†ä¸æ–­å˜åŒ–çš„ state éå¸¸å›°éš¾ã€‚å¦‚æœä¸€ä¸ª model çš„å˜åŒ–ä¼šå¼•èµ·å¦ä¸€ä¸ª model å˜åŒ–ï¼Œé‚£ä¹ˆå½“ view å˜åŒ–æ—¶ï¼Œå°±å¯èƒ½å¼•èµ·å¯¹åº” model ä»¥åŠå¦ä¸€ä¸ªmodel çš„å˜åŒ–ï¼Œä¾æ¬¡åœ°ï¼Œå¯èƒ½ä¼šå¼•èµ·å¦ä¸€ä¸ª view çš„å˜åŒ–ã€‚ç›´è‡³ä½ æä¸æ¸…æ¥šåˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆã€‚state åœ¨ä»€ä¹ˆæ—¶å€™ï¼Œç”±äºä»€ä¹ˆåŸå› ï¼Œå¦‚ä½•å˜åŒ–å·²ç„¶ä¸å—æ§åˆ¶ã€‚ å½“ç³»ç»Ÿå˜å¾—é”™ç»¼å¤æ‚çš„æ—¶å€™ï¼Œæƒ³é‡ç°é—®é¢˜æˆ–è€…æ·»åŠ æ–°åŠŸèƒ½å°±ä¼šå˜å¾—ä¸¾æ­¥ç»´è‰°ã€‚ å¦‚æœè¿™è¿˜ä¸å¤Ÿç³Ÿç³•ï¼Œè€ƒè™‘ä¸€äº›æ¥è‡ªå‰ç«¯å¼€å‘é¢†åŸŸçš„æ–°éœ€æ±‚ï¼Œå¦‚æ›´æ–°è°ƒä¼˜ã€æœåŠ¡ç«¯æ¸²æŸ“ã€è·¯ç”±è·³è½¬å‰è¯·æ±‚æ•°æ®ç­‰ç­‰ã€‚å‰ç«¯å¼€å‘è€…æ­£åœ¨ç»å—å‰æ‰€æœªæœ‰çš„å¤æ‚æ€§ï¼Œéš¾é“å°±è¿™ä¹ˆæ”¾å¼ƒäº†å—?å½“ç„¶ä¸æ˜¯ã€‚\nè¿™é‡Œçš„å¤æ‚æ€§å¾ˆå¤§ç¨‹åº¦ä¸Šæ¥è‡ªäºï¼šæˆ‘ä»¬æ€»æ˜¯å°†ä¸¤ä¸ªéš¾ä»¥ç†æ¸…çš„æ¦‚å¿µæ··æ·†åœ¨ä¸€èµ·ï¼šå˜åŒ–å’Œå¼‚æ­¥ã€‚ å¯ä»¥ç§°å®ƒä»¬ä¸ºæ›¼å¦¥æ€å’Œå¯ä¹ã€‚å¦‚æœæŠŠäºŒè€…åˆ†å¼€ï¼Œèƒ½åšçš„å¾ˆå¥½ï¼Œä½†æ··åˆ°ä¸€èµ·ï¼Œå°±å˜å¾—ä¸€å›¢ç³Ÿã€‚ä¸€äº›åº“å¦‚ React è§†å›¾åœ¨è§†å›¾å±‚ç¦æ­¢å¼‚æ­¥å’Œç›´æ¥æ“ä½œ DOMæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ç¾ä¸­ä¸è¶³çš„æ˜¯ï¼ŒReact ä¾æ—§æŠŠå¤„ç† state ä¸­æ•°æ®çš„é—®é¢˜ç•™ç»™äº†ä½ ã€‚Reduxå°±æ˜¯ä¸ºäº†å¸®ä½ è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\n8. mobox å’Œ redux æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿï¼ˆ1ï¼‰å…±åŒç‚¹\n\nä¸ºäº†è§£å†³çŠ¶æ€ç®¡ç†æ··ä¹±ï¼Œæ— æ³•æœ‰æ•ˆåŒæ­¥çš„é—®é¢˜ç»Ÿä¸€ç»´æŠ¤ç®¡ç†åº”ç”¨çŠ¶æ€;\næŸä¸€çŠ¶æ€åªæœ‰ä¸€ä¸ªå¯ä¿¡æ•°æ®æ¥æºï¼ˆé€šå¸¸å‘½åä¸ºstoreï¼ŒæŒ‡çŠ¶æ€å®¹å™¨ï¼‰;\næ“ä½œæ›´æ–°çŠ¶æ€æ–¹å¼ç»Ÿä¸€ï¼Œå¹¶ä¸”å¯æ§ï¼ˆé€šå¸¸ä»¥actionæ–¹å¼æä¾›æ›´æ–°çŠ¶æ€çš„é€”å¾„ï¼‰;\næ”¯æŒå°†storeä¸Reactç»„ä»¶è¿æ¥ï¼Œå¦‚react-reduxï¼Œmobx- react;\n\nï¼ˆ2ï¼‰åŒºåˆ« Reduxæ›´å¤šçš„æ˜¯éµå¾ªFluxæ¨¡å¼çš„ä¸€ç§å®ç°ï¼Œæ˜¯ä¸€ä¸ª JavaScriptåº“ï¼Œå®ƒå…³æ³¨ç‚¹ä¸»è¦æ˜¯ä»¥ä¸‹å‡ æ–¹é¢âˆ¶\n\nActionâˆ¶ ä¸€ä¸ªJavaScriptå¯¹è±¡ï¼Œæè¿°åŠ¨ä½œç›¸å…³ä¿¡æ¯ï¼Œä¸»è¦åŒ…å«typeå±æ€§å’Œpayloadå±æ€§âˆ¶\no typeâˆ¶ action ç±»å‹; o payloadâˆ¶ è´Ÿè½½æ•°æ®;\nå¤åˆ¶ä»£ç \n\nReducerâˆ¶ å®šä¹‰åº”ç”¨çŠ¶æ€å¦‚ä½•å“åº”ä¸åŒåŠ¨ä½œï¼ˆactionï¼‰ï¼Œå¦‚ä½•æ›´æ–°çŠ¶æ€;\n\nStoreâˆ¶ ç®¡ç†actionå’ŒreduceråŠå…¶å…³ç³»çš„å¯¹è±¡ï¼Œä¸»è¦æä¾›ä»¥ä¸‹åŠŸèƒ½âˆ¶\no ç»´æŠ¤åº”ç”¨çŠ¶æ€å¹¶æ”¯æŒè®¿é—®çŠ¶æ€(getState());\no æ”¯æŒç›‘å¬actionçš„åˆ†å‘ï¼Œæ›´æ–°çŠ¶æ€(dispatch(action)); \no æ”¯æŒè®¢é˜…storeçš„å˜æ›´(subscribe(listener));\nå¤åˆ¶ä»£ç \n\nå¼‚æ­¥æµâˆ¶ ç”±äºReduxæ‰€æœ‰å¯¹storeçŠ¶æ€çš„å˜æ›´ï¼Œéƒ½åº”è¯¥é€šè¿‡actionè§¦å‘ï¼Œå¼‚æ­¥ä»»åŠ¡ï¼ˆé€šå¸¸éƒ½æ˜¯ä¸šåŠ¡æˆ–è·å–æ•°æ®ä»»åŠ¡ï¼‰ä¹Ÿä¸ä¾‹å¤–ï¼Œè€Œä¸ºäº†ä¸å°†ä¸šåŠ¡æˆ–æ•°æ®ç›¸å…³çš„ä»»åŠ¡æ··å…¥Reactç»„ä»¶ä¸­ï¼Œå°±éœ€è¦ä½¿ç”¨å…¶ä»–æ¡†æ¶é…åˆç®¡ç†å¼‚æ­¥ä»»åŠ¡æµç¨‹ï¼Œå¦‚redux-thunkï¼Œredux-sagaç­‰;\n\n\nMobxæ˜¯ä¸€ä¸ªé€æ˜å‡½æ•°å“åº”å¼ç¼–ç¨‹çš„çŠ¶æ€ç®¡ç†åº“ï¼Œå®ƒä½¿å¾—çŠ¶æ€ç®¡ç†ç®€å•å¯ä¼¸ç¼©âˆ¶\n\nActionâˆ¶å®šä¹‰æ”¹å˜çŠ¶æ€çš„åŠ¨ä½œå‡½æ•°ï¼ŒåŒ…æ‹¬å¦‚ä½•å˜æ›´çŠ¶æ€;\nStoreâˆ¶ é›†ä¸­ç®¡ç†æ¨¡å—çŠ¶æ€ï¼ˆStateï¼‰å’ŒåŠ¨ä½œ(action)\nDerivationï¼ˆè¡ç”Ÿï¼‰âˆ¶ ä»åº”ç”¨çŠ¶æ€ä¸­æ´¾ç”Ÿè€Œå‡ºï¼Œä¸”æ²¡æœ‰ä»»ä½•å…¶ä»–å½±å“çš„æ•°æ®\n\nå¯¹æ¯”æ€»ç»“ï¼š\n\nreduxå°†æ•°æ®ä¿å­˜åœ¨å•ä¸€çš„storeä¸­ï¼Œmobxå°†æ•°æ®ä¿å­˜åœ¨åˆ†æ•£çš„å¤šä¸ªstoreä¸­\nreduxä½¿ç”¨plain objectä¿å­˜æ•°æ®ï¼Œéœ€è¦æ‰‹åŠ¨å¤„ç†å˜åŒ–åçš„æ“ä½œ;mobxé€‚ç”¨observableä¿å­˜æ•°æ®ï¼Œæ•°æ®å˜åŒ–åè‡ªåŠ¨å¤„ç†å“åº”çš„æ“ä½œ\nreduxä½¿ç”¨ä¸å¯å˜çŠ¶æ€ï¼Œè¿™æ„å‘³ç€çŠ¶æ€æ˜¯åªè¯»çš„ï¼Œä¸èƒ½ç›´æ¥å»ä¿®æ”¹å®ƒï¼Œè€Œæ˜¯åº”è¯¥è¿”å›ä¸€ä¸ªæ–°çš„çŠ¶æ€ï¼ŒåŒæ—¶ä½¿ç”¨çº¯å‡½æ•°;mobxä¸­çš„çŠ¶æ€æ˜¯å¯å˜çš„ï¼Œå¯ä»¥ç›´æ¥å¯¹å…¶è¿›è¡Œä¿®æ”¹\nmobxç›¸å¯¹æ¥è¯´æ¯”è¾ƒç®€å•ï¼Œåœ¨å…¶ä¸­æœ‰å¾ˆå¤šçš„æŠ½è±¡ï¼Œmobxæ›´å¤šçš„ä½¿ç”¨é¢å‘å¯¹è±¡çš„ç¼–ç¨‹æ€ç»´;reduxä¼šæ¯”è¾ƒå¤æ‚ï¼Œå› ä¸ºå…¶ä¸­çš„å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³æŒæ¡èµ·æ¥ä¸æ˜¯é‚£ä¹ˆå®¹æ˜“ï¼ŒåŒæ—¶éœ€è¦å€ŸåŠ©ä¸€ç³»åˆ—çš„ä¸­é—´ä»¶æ¥å¤„ç†å¼‚æ­¥å’Œå‰¯ä½œç”¨\nmobxä¸­æœ‰æ›´å¤šçš„æŠ½è±¡å’Œå°è£…ï¼Œè°ƒè¯•ä¼šæ¯”è¾ƒå›°éš¾ï¼ŒåŒæ—¶ç»“æœä¹Ÿéš¾ä»¥é¢„æµ‹;è€Œreduxæä¾›èƒ½å¤Ÿè¿›è¡Œæ—¶é—´å›æº¯çš„å¼€å‘å·¥å…·ï¼ŒåŒæ—¶å…¶çº¯å‡½æ•°ä»¥åŠæ›´å°‘çš„æŠ½è±¡ï¼Œè®©è°ƒè¯•å˜å¾—æ›´åŠ çš„å®¹æ˜“\n\n9. Redux å’Œ Vuex æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œå®ƒä»¬çš„å…±åŒæ€æƒ³ï¼ˆ1ï¼‰Redux å’Œ VuexåŒºåˆ«\n\nVuexæ”¹è¿›äº†Reduxä¸­çš„Actionå’ŒReducerå‡½æ•°ï¼Œä»¥mutationså˜åŒ–å‡½æ•°å–ä»£Reducerï¼Œæ— éœ€switchï¼Œåªéœ€åœ¨å¯¹åº”çš„mutationå‡½æ•°é‡Œæ”¹å˜stateå€¼å³å¯\nVuexç”±äºVueè‡ªåŠ¨é‡æ–°æ¸²æŸ“çš„ç‰¹æ€§ï¼Œæ— éœ€è®¢é˜…é‡æ–°æ¸²æŸ“å‡½æ•°ï¼Œåªè¦ç”Ÿæˆæ–°çš„Stateå³å¯\nVuexæ•°æ®æµçš„é¡ºåºæ˜¯âˆ¶Viewè°ƒç”¨store.commitæäº¤å¯¹åº”çš„è¯·æ±‚åˆ°Storeä¸­å¯¹åº”çš„mutationå‡½æ•°-&gt;storeæ”¹å˜ï¼ˆvueæ£€æµ‹åˆ°æ•°æ®å˜åŒ–è‡ªåŠ¨æ¸²æŸ“ï¼‰\n\né€šä¿—ç‚¹ç†è§£å°±æ˜¯ï¼Œvuex å¼±åŒ– dispatchï¼Œé€šè¿‡commitè¿›è¡Œ storeçŠ¶æ€çš„ä¸€æ¬¡æ›´å˜ï¼›å–æ¶ˆäº†actionæ¦‚å¿µï¼Œä¸å¿…ä¼ å…¥ç‰¹å®šçš„ actionå½¢å¼è¿›è¡ŒæŒ‡å®šå˜æ›´ï¼›å¼±åŒ–reducerï¼ŒåŸºäºcommitå‚æ•°ç›´æ¥å¯¹æ•°æ®è¿›è¡Œè½¬å˜ï¼Œä½¿å¾—æ¡†æ¶æ›´åŠ ç®€æ˜“;\nï¼ˆ2ï¼‰å…±åŒæ€æƒ³\n\nå•â€”çš„æ•°æ®æº\nå˜åŒ–å¯ä»¥é¢„æµ‹\n\næœ¬è´¨ä¸Šâˆ¶ reduxä¸vuexéƒ½æ˜¯å¯¹mvvmæ€æƒ³çš„æœåŠ¡ï¼Œå°†æ•°æ®ä»è§†å›¾ä¸­æŠ½ç¦»çš„ä¸€ç§æ–¹æ¡ˆã€‚\n10. Redux ä¸­é—´ä»¶æ˜¯æ€ä¹ˆæ‹¿åˆ°store å’Œ action? ç„¶åæ€ä¹ˆå¤„ç†?reduxä¸­é—´ä»¶æœ¬è´¨å°±æ˜¯ä¸€ä¸ªå‡½æ•°æŸ¯é‡ŒåŒ–ã€‚redux applyMiddleware Api æºç ä¸­æ¯ä¸ªmiddleware æ¥å—2ä¸ªå‚æ•°ï¼Œ Store çš„getState å‡½æ•°å’Œdispatch å‡½æ•°ï¼Œåˆ†åˆ«è·å¾—storeå’Œactionï¼Œæœ€ç»ˆè¿”å›ä¸€ä¸ªå‡½æ•°ã€‚è¯¥å‡½æ•°ä¼šè¢«ä¼ å…¥ next çš„ä¸‹ä¸€ä¸ª middleware çš„ dispatch æ–¹æ³•ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ¥æ”¶ action çš„æ–°å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å¯ä»¥ç›´æ¥è°ƒç”¨ nextï¼ˆactionï¼‰ï¼Œæˆ–è€…åœ¨å…¶ä»–éœ€è¦çš„æ—¶åˆ»è°ƒç”¨ï¼Œç”šè‡³æ ¹æœ¬ä¸å»è°ƒç”¨å®ƒã€‚è°ƒç”¨é“¾ä¸­æœ€åä¸€ä¸ª middleware ä¼šæ¥å—çœŸå®çš„ storeçš„ dispatch æ–¹æ³•ä½œä¸º next å‚æ•°ï¼Œå¹¶å€Ÿæ­¤ç»“æŸè°ƒç”¨é“¾ã€‚æ‰€ä»¥ï¼Œmiddleware çš„å‡½æ•°ç­¾åæ˜¯ï¼ˆ{ getStateï¼Œdispatch })&#x3D;&gt; next &#x3D;&gt; actionã€‚\n11. Reduxä¸­çš„connectæœ‰ä»€ä¹ˆä½œç”¨connectè´Ÿè´£è¿æ¥Reactå’ŒRedux\nï¼ˆ1ï¼‰è·å–state\nconnect é€šè¿‡ contextè·å– Provider ä¸­çš„ storeï¼Œé€šè¿‡ store.getState() è·å–æ•´ä¸ªstore tree ä¸Šæ‰€æœ‰state\nï¼ˆ2ï¼‰åŒ…è£…åŸç»„ä»¶\nå°†stateå’Œactioné€šè¿‡propsçš„æ–¹å¼ä¼ å…¥åˆ°åŸç»„ä»¶å†…éƒ¨ wrapWithConnect è¿”å›â€”ä¸ª ReactComponent å¯¹ è±¡ Connectï¼ŒConnect é‡ æ–° render å¤–éƒ¨ä¼ å…¥çš„åŸç»„ä»¶ WrappedComponent ï¼Œå¹¶æŠŠ connect ä¸­ä¼ å…¥çš„ mapStateToPropsï¼ŒmapDispatchToPropsä¸ç»„ä»¶ä¸ŠåŸæœ‰çš„ propsåˆå¹¶åï¼Œé€šè¿‡å±æ€§çš„æ–¹å¼ä¼ ç»™WrappedComponent\nï¼ˆ3ï¼‰ç›‘å¬store treeå˜åŒ–\nconnectç¼“å­˜äº†store treeä¸­stateçš„çŠ¶æ€ï¼Œé€šè¿‡å½“å‰stateçŠ¶æ€ å’Œå˜æ›´å‰ state çŠ¶æ€è¿›è¡Œæ¯”è¾ƒï¼Œä»è€Œç¡®å®šæ˜¯å¦è°ƒç”¨ this.setState()æ–¹æ³•è§¦å‘ConnectåŠå…¶å­ç»„ä»¶çš„é‡æ–°æ¸²æŸ“\nä¸ƒã€Hooks1. å¯¹ React Hook çš„ç†è§£ï¼Œå®ƒçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆReact-Hooks æ˜¯ React å›¢é˜Ÿåœ¨ React ç»„ä»¶å¼€å‘å®è·µä¸­ï¼Œé€æ¸è®¤çŸ¥åˆ°çš„ä¸€ä¸ªæ”¹è¿›ç‚¹ï¼Œè¿™èƒŒåå…¶å®æ¶‰åŠå¯¹ç±»ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶ä¸¤ç§ç»„ä»¶å½¢å¼çš„æ€è€ƒå’Œä¾§é‡ã€‚\nï¼ˆ1ï¼‰ç±»ç»„ä»¶ï¼š æ‰€è°“ç±»ç»„ä»¶ï¼Œå°±æ˜¯åŸºäº ES6 Class è¿™ç§å†™æ³•ï¼Œé€šè¿‡ç»§æ‰¿ React.Component å¾—æ¥çš„ React ç»„ä»¶ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç±»ç»„ä»¶ï¼š\nclass DemoClass extends React.Component &#123;\n  state &#x3D; &#123;\n    text: &quot;&quot;\n  &#125;;\n  componentDidMount() &#123;\n    &#x2F;&#x2F;...\n  &#125;\n  changeText &#x3D; (newText) &#x3D;&gt; &#123;\n    this.setState(&#123;\n      text: newText\n    &#125;);\n  &#125;;\n\n  render() &#123;\n    return (\n      &lt;div className&#x3D;&quot;demoClass&quot;&gt;\n        &lt;p&gt;&#123;this.state.text&#125;&lt;&#x2F;p&gt;\n        &lt;button onClick&#x3D;&#123;this.changeText&#125;&gt;ä¿®æ”¹&lt;&#x2F;button&gt;\n      &lt;&#x2F;div&gt;\n    );\n  &#125;\n&#125;\n\nå¤åˆ¶ä»£ç \n\nå¯ä»¥çœ‹å‡ºï¼ŒReact ç±»ç»„ä»¶å†…éƒ¨é¢„ç½®äº†ç›¸å½“å¤šçš„â€œç°æˆçš„ä¸œè¥¿â€ç­‰ç€æˆ‘ä»¬å»è°ƒåº¦&#x2F;å®šåˆ¶ï¼Œstate å’Œç”Ÿå‘½å‘¨æœŸå°±æ˜¯è¿™äº›â€œç°æˆä¸œè¥¿â€ä¸­çš„å…¸å‹ã€‚è¦æƒ³å¾—åˆ°è¿™äº›ä¸œè¥¿ï¼Œéš¾åº¦ä¹Ÿä¸å¤§ï¼Œåªéœ€è¦ç»§æ‰¿ä¸€ä¸ª React.Component å³å¯ã€‚\nå½“ç„¶ï¼Œè¿™ä¹Ÿæ˜¯ç±»ç»„ä»¶çš„ä¸€ä¸ªä¸ä¾¿ï¼Œå®ƒå¤ªç¹æ‚äº†ï¼Œå¯¹äºè§£å†³è®¸å¤šé—®é¢˜æ¥è¯´ï¼Œç¼–å†™ä¸€ä¸ªç±»ç»„ä»¶å®åœ¨æ˜¯ä¸€ä¸ªè¿‡äºå¤æ‚çš„å§¿åŠ¿ã€‚å¤æ‚çš„å§¿åŠ¿å¿…ç„¶å¸¦æ¥é«˜æ˜‚çš„ç†è§£æˆæœ¬ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬æ‰€ä¸æƒ³çœ‹åˆ°çš„ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œç”±äºå¼€å‘è€…ç¼–å†™çš„é€»è¾‘åœ¨å°è£…åæ˜¯å’Œç»„ä»¶ç²˜åœ¨ä¸€èµ·çš„ï¼Œè¿™å°±ä½¿å¾—ç±»ç»„ä»¶å†…éƒ¨çš„é€»è¾‘éš¾ä»¥å®ç°æ‹†åˆ†å’Œå¤ç”¨ã€‚\nï¼ˆ2ï¼‰å‡½æ•°ç»„ä»¶ï¼šå‡½æ•°ç»„ä»¶å°±æ˜¯ä»¥å‡½æ•°çš„å½¢æ€å­˜åœ¨çš„ React ç»„ä»¶ã€‚æ—©æœŸå¹¶æ²¡æœ‰ React-Hooksï¼Œå‡½æ•°ç»„ä»¶å†…éƒ¨æ— æ³•å®šä¹‰å’Œç»´æŠ¤ stateï¼Œå› æ­¤å®ƒè¿˜æœ‰ä¸€ä¸ªåˆ«åå«â€œæ— çŠ¶æ€ç»„ä»¶â€ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªå‡½æ•°ç»„ä»¶ï¼š\nfunction DemoFunction(props) &#123;\n  const &#123; text &#125; &#x3D; props\n  return (\n    &lt;div className&#x3D;&quot;demoFunction&quot;&gt;\n      &lt;p&gt;&#123;&#96;å‡½æ•°ç»„ä»¶æ¥æ”¶çš„å†…å®¹ï¼š[$&#123;text&#125;]&#96;&#125;&lt;&#x2F;p&gt;\n    &lt;&#x2F;div&gt;\n  );\n&#125;\nå¤åˆ¶ä»£ç \n\nç›¸æ¯”äºç±»ç»„ä»¶ï¼Œå‡½æ•°ç»„ä»¶è‚‰çœ¼å¯è§çš„ç‰¹è´¨è‡ªç„¶åŒ…æ‹¬è½»é‡ã€çµæ´»ã€æ˜“äºç»„ç»‡å’Œç»´æŠ¤ã€è¾ƒä½çš„å­¦ä¹ æˆæœ¬ç­‰ã€‚\né€šè¿‡å¯¹æ¯”ï¼Œä»å½¢æ€ä¸Šå¯ä»¥å¯¹ä¸¤ç§ç»„ä»¶åšåŒºåˆ†ï¼Œå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«å¦‚ä¸‹ï¼š\n\nç±»ç»„ä»¶éœ€è¦ç»§æ‰¿ classï¼Œå‡½æ•°ç»„ä»¶ä¸éœ€è¦ï¼›\nç±»ç»„ä»¶å¯ä»¥è®¿é—®ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œå‡½æ•°ç»„ä»¶ä¸èƒ½ï¼›\nç±»ç»„ä»¶ä¸­å¯ä»¥è·å–åˆ°å®ä¾‹åŒ–åçš„ thisï¼Œå¹¶åŸºäºè¿™ä¸ª this åšå„ç§å„æ ·çš„äº‹æƒ…ï¼Œè€Œå‡½æ•°ç»„ä»¶ä¸å¯ä»¥ï¼›\nç±»ç»„ä»¶ä¸­å¯ä»¥å®šä¹‰å¹¶ç»´æŠ¤ stateï¼ˆçŠ¶æ€ï¼‰ï¼Œè€Œå‡½æ•°ç»„ä»¶ä¸å¯ä»¥ï¼›\n\né™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„ä¸åŒã€‚é€šè¿‡ä¸Šé¢çš„åŒºåˆ«ï¼Œæˆ‘ä»¬ä¸èƒ½è¯´è°å¥½è°åï¼Œå®ƒä»¬å„æœ‰è‡ªå·±çš„ä¼˜åŠ¿ã€‚åœ¨ React-Hooks å‡ºç°ä¹‹å‰ï¼Œç±»ç»„ä»¶çš„èƒ½åŠ›è¾¹ç•Œæ˜æ˜¾å¼ºäºå‡½æ•°ç»„ä»¶ã€‚\nå®é™…ä¸Šï¼Œç±»ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶ä¹‹é—´ï¼Œæ˜¯é¢å‘å¯¹è±¡å’Œå‡½æ•°å¼ç¼–ç¨‹è¿™ä¸¤å¥—ä¸åŒçš„è®¾è®¡æ€æƒ³ä¹‹é—´çš„å·®å¼‚ã€‚è€Œå‡½æ•°ç»„ä»¶æ›´åŠ å¥‘åˆ React æ¡†æ¶çš„è®¾è®¡ç†å¿µï¼š  React ç»„ä»¶æœ¬èº«çš„å®šä½å°±æ˜¯å‡½æ•°ï¼Œä¸€ä¸ªè¾“å…¥æ•°æ®ã€è¾“å‡º UI çš„å‡½æ•°ã€‚ä½œä¸ºå¼€å‘è€…ï¼Œæˆ‘ä»¬ç¼–å†™çš„æ˜¯å£°æ˜å¼çš„ä»£ç ï¼Œè€Œ React æ¡†æ¶çš„ä¸»è¦å·¥ä½œï¼Œå°±æ˜¯åŠæ—¶åœ°æŠŠå£°æ˜å¼çš„ä»£ç è½¬æ¢ä¸ºå‘½ä»¤å¼çš„ DOM æ“ä½œï¼ŒæŠŠæ•°æ®å±‚é¢çš„æè¿°æ˜ å°„åˆ°ç”¨æˆ·å¯è§çš„ UI å˜åŒ–ä¸­å»ã€‚è¿™å°±æ„å‘³ç€ä»åŸåˆ™ä¸Šæ¥è®²ï¼ŒReact çš„æ•°æ®åº”è¯¥æ€»æ˜¯ç´§ç´§åœ°å’Œæ¸²æŸ“ç»‘å®šåœ¨ä¸€èµ·çš„ï¼Œè€Œç±»ç»„ä»¶åšä¸åˆ°è¿™ä¸€ç‚¹ã€‚å‡½æ•°ç»„ä»¶å°±çœŸæ­£åœ°å°†æ•°æ®å’Œæ¸²æŸ“ç»‘å®šåˆ°äº†ä¸€èµ·ã€‚å‡½æ•°ç»„ä»¶æ˜¯ä¸€ä¸ªæ›´åŠ åŒ¹é…å…¶è®¾è®¡ç†å¿µã€ä¹Ÿæ›´æœ‰åˆ©äºé€»è¾‘æ‹†åˆ†ä¸é‡ç”¨çš„ç»„ä»¶è¡¨è¾¾å½¢å¼ã€‚\nä¸ºäº†èƒ½è®©å¼€å‘è€…æ›´å¥½çš„çš„å»ç¼–å†™å‡½æ•°å¼ç»„ä»¶ã€‚äºæ˜¯ï¼ŒReact-Hooks ä¾¿åº”è¿è€Œç”Ÿã€‚\nReact-Hooks æ˜¯ä¸€å¥—èƒ½å¤Ÿä½¿å‡½æ•°ç»„ä»¶æ›´å¼ºå¤§ã€æ›´çµæ´»çš„â€œé’©å­â€ã€‚\nå‡½æ•°ç»„ä»¶æ¯”èµ·ç±»ç»„ä»¶å°‘äº†å¾ˆå¤šä¸œè¥¿ï¼Œæ¯”å¦‚ç”Ÿå‘½å‘¨æœŸã€å¯¹ state çš„ç®¡ç†ç­‰ã€‚è¿™å°±ç»™å‡½æ•°ç»„ä»¶çš„ä½¿ç”¨å¸¦æ¥äº†éå¸¸å¤šçš„å±€é™æ€§ï¼Œå¯¼è‡´æˆ‘ä»¬å¹¶ä¸èƒ½ä½¿ç”¨å‡½æ•°è¿™ç§å½¢å¼ï¼Œå†™å‡ºä¸€ä¸ªçœŸæ­£çš„å…¨åŠŸèƒ½çš„ç»„ä»¶ã€‚è€ŒReact-Hooks çš„å‡ºç°ï¼Œå°±æ˜¯ä¸ºäº†å¸®åŠ©å‡½æ•°ç»„ä»¶è¡¥é½è¿™äº›ï¼ˆç›¸å¯¹äºç±»ç»„ä»¶æ¥è¯´ï¼‰ç¼ºå¤±çš„èƒ½åŠ›ã€‚\nå¦‚æœè¯´å‡½æ•°ç»„ä»¶æ˜¯ä¸€å°è½»å·§çš„å¿«è‰‡ï¼Œé‚£ä¹ˆ React-Hooks å°±æ˜¯ä¸€ä¸ªå†…å®¹ä¸°å¯Œçš„é›¶éƒ¨ä»¶ç®±ã€‚â€œé‡è£…æˆ˜èˆ°â€æ‰€é¢„ç½®çš„é‚£äº›è®¾å¤‡ï¼Œè¿™ä¸ªç®±å­é‡ŒåŸºæœ¬å…¨éƒ½æœ‰ï¼ŒåŒæ—¶å®ƒè¿˜ä¸å¼ºåˆ¶ä½ å…¨éƒ½è¦ï¼Œè€Œæ˜¯å…è®¸ä½ è‡ªç”±åœ°é€‰æ‹©å’Œä½¿ç”¨ä½ éœ€è¦çš„é‚£äº›èƒ½åŠ›ï¼Œç„¶åå°†è¿™äº›èƒ½åŠ›ä»¥ Hookï¼ˆé’©å­ï¼‰çš„å½¢å¼â€œé’©â€è¿›ä½ çš„ç»„ä»¶é‡Œï¼Œä»è€Œå®šåˆ¶å‡ºä¸€ä¸ªæœ€é€‚åˆä½ çš„â€œä¸“å±æˆ˜èˆ°â€ã€‚\n2. ä¸ºä»€ä¹ˆ useState è¦ä½¿ç”¨æ•°ç»„è€Œä¸æ˜¯å¯¹è±¡useState çš„ç”¨æ³•ï¼š\nconst [count, setCount] &#x3D; useState(0)\nå¤åˆ¶ä»£ç \n\nå¯ä»¥çœ‹åˆ° useState è¿”å›çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆæ˜¯è¿”å›æ•°ç»„è€Œä¸æ˜¯è¿”å›å¯¹è±¡å‘¢ï¼Ÿ\nè¿™é‡Œç”¨åˆ°äº†è§£æ„èµ‹å€¼ï¼Œæ‰€ä»¥å…ˆæ¥çœ‹ä¸€ä¸‹ES6 çš„è§£æ„èµ‹å€¼ï¼š\næ•°ç»„çš„è§£æ„èµ‹å€¼const foo &#x3D; [1, 2, 3];\nconst [one, two, three] &#x3D; foo;\nconsole.log(one);\t&#x2F;&#x2F; 1\nconsole.log(two);\t&#x2F;&#x2F; 2\nconsole.log(three);\t&#x2F;&#x2F; 3\nå¤åˆ¶ä»£ç \n\nå¯¹è±¡çš„è§£æ„èµ‹å€¼const user &#x3D; &#123;\n  id: 888,\n  name: &quot;xiaoxin&quot;\n&#125;;\nconst &#123; id, name &#125; &#x3D; user;\nconsole.log(id);\t&#x2F;&#x2F; 888\nconsole.log(name);\t&#x2F;&#x2F; &quot;xiaoxin&quot;\nå¤åˆ¶ä»£ç \n\nçœ‹å®Œè¿™ä¸¤ä¸ªä¾‹å­ï¼Œç­”æ¡ˆåº”è¯¥å°±å‡ºæ¥äº†ï¼š\n\nå¦‚æœ useState è¿”å›çš„æ˜¯æ•°ç»„ï¼Œé‚£ä¹ˆä½¿ç”¨è€…å¯ä»¥å¯¹æ•°ç»„ä¸­çš„å…ƒç´ å‘½åï¼Œä»£ç çœ‹èµ·æ¥ä¹Ÿæ¯”è¾ƒå¹²å‡€\nå¦‚æœ useState è¿”å›çš„æ˜¯å¯¹è±¡ï¼Œåœ¨è§£æ„å¯¹è±¡çš„æ—¶å€™å¿…é¡»è¦å’Œ useState å†…éƒ¨å®ç°è¿”å›çš„å¯¹è±¡åŒåï¼Œæƒ³è¦ä½¿ç”¨å¤šæ¬¡çš„è¯ï¼Œå¿…é¡»å¾—è®¾ç½®åˆ«åæ‰èƒ½ä½¿ç”¨è¿”å›å€¼\n\nä¸‹é¢æ¥çœ‹çœ‹å¦‚æœ useState è¿”å›å¯¹è±¡çš„æƒ…å†µï¼š\n&#x2F;&#x2F; ç¬¬ä¸€æ¬¡ä½¿ç”¨\nconst &#123; state, setState &#125; &#x3D; useState(false);\n&#x2F;&#x2F; ç¬¬äºŒæ¬¡ä½¿ç”¨\nconst &#123; state: counter, setState: setCounter &#125; &#x3D; useState(0) \nå¤åˆ¶ä»£ç \n\nè¿™é‡Œå¯ä»¥çœ‹åˆ°ï¼Œè¿”å›å¯¹è±¡çš„ä½¿ç”¨æ–¹å¼è¿˜æ˜¯æŒºéº»çƒ¦çš„ï¼Œæ›´ä½•å†µå®é™…é¡¹ç›®ä¸­ä¼šä½¿ç”¨çš„æ›´é¢‘ç¹ã€‚ æ€»ç»“ï¼šuseState è¿”å›çš„æ˜¯ array è€Œä¸æ˜¯ object çš„åŸå› å°±æ˜¯ä¸ºäº†é™ä½ä½¿ç”¨çš„å¤æ‚åº¦ï¼Œè¿”å›æ•°ç»„çš„è¯å¯ä»¥ç›´æ¥æ ¹æ®é¡ºåºè§£æ„ï¼Œè€Œè¿”å›å¯¹è±¡çš„è¯è¦æƒ³ä½¿ç”¨å¤šæ¬¡å°±éœ€è¦å®šä¹‰åˆ«åäº†ã€‚\n3. React Hooks è§£å†³äº†å“ªäº›é—®é¢˜ï¼ŸReact Hooks ä¸»è¦è§£å†³äº†ä»¥ä¸‹é—®é¢˜ï¼š\nï¼ˆ1ï¼‰åœ¨ç»„ä»¶ä¹‹é—´å¤ç”¨çŠ¶æ€é€»è¾‘å¾ˆéš¾\nReact æ²¡æœ‰æä¾›å°†å¯å¤ç”¨æ€§è¡Œä¸ºâ€œé™„åŠ â€åˆ°ç»„ä»¶çš„é€”å¾„ï¼ˆä¾‹å¦‚ï¼ŒæŠŠç»„ä»¶è¿æ¥åˆ° storeï¼‰è§£å†³æ­¤ç±»é—®é¢˜å¯ä»¥ä½¿ç”¨ render props å’Œ é«˜é˜¶ç»„ä»¶ã€‚ä½†æ˜¯è¿™ç±»æ–¹æ¡ˆéœ€è¦é‡æ–°ç»„ç»‡ç»„ä»¶ç»“æ„ï¼Œè¿™å¯èƒ½ä¼šå¾ˆéº»çƒ¦ï¼Œå¹¶ä¸”ä¼šä½¿ä»£ç éš¾ä»¥ç†è§£ã€‚ç”± providersï¼Œconsumersï¼Œé«˜é˜¶ç»„ä»¶ï¼Œrender props ç­‰å…¶ä»–æŠ½è±¡å±‚ç»„æˆçš„ç»„ä»¶ä¼šå½¢æˆâ€œåµŒå¥—åœ°ç‹±â€ã€‚å°½ç®¡å¯ä»¥åœ¨ DevTools è¿‡æ»¤æ‰å®ƒä»¬ï¼Œä½†è¿™è¯´æ˜äº†ä¸€ä¸ªæ›´æ·±å±‚æ¬¡çš„é—®é¢˜ï¼šReact éœ€è¦ä¸ºå…±äº«çŠ¶æ€é€»è¾‘æä¾›æ›´å¥½çš„åŸç”Ÿé€”å¾„ã€‚\nå¯ä»¥ä½¿ç”¨ Hook ä»ç»„ä»¶ä¸­æå–çŠ¶æ€é€»è¾‘ï¼Œä½¿å¾—è¿™äº›é€»è¾‘å¯ä»¥å•ç‹¬æµ‹è¯•å¹¶å¤ç”¨ã€‚Hook ä½¿æˆ‘ä»¬åœ¨æ— éœ€ä¿®æ”¹ç»„ä»¶ç»“æ„çš„æƒ…å†µä¸‹å¤ç”¨çŠ¶æ€é€»è¾‘ã€‚ è¿™ä½¿å¾—åœ¨ç»„ä»¶é—´æˆ–ç¤¾åŒºå†…å…±äº« Hook å˜å¾—æ›´ä¾¿æ·ã€‚\nï¼ˆ2ï¼‰å¤æ‚ç»„ä»¶å˜å¾—éš¾ä»¥ç†è§£\nåœ¨ç»„ä»¶ä¸­ï¼Œæ¯ä¸ªç”Ÿå‘½å‘¨æœŸå¸¸å¸¸åŒ…å«ä¸€äº›ä¸ç›¸å…³çš„é€»è¾‘ã€‚ä¾‹å¦‚ï¼Œç»„ä»¶å¸¸å¸¸åœ¨ componentDidMount å’Œ componentDidUpdate ä¸­è·å–æ•°æ®ã€‚ä½†æ˜¯ï¼ŒåŒä¸€ä¸ª componentDidMount ä¸­å¯èƒ½ä¹ŸåŒ…å«å¾ˆå¤šå…¶å®ƒçš„é€»è¾‘ï¼Œå¦‚è®¾ç½®äº‹ä»¶ç›‘å¬ï¼Œè€Œä¹‹åéœ€åœ¨ componentWillUnmount ä¸­æ¸…é™¤ã€‚ç›¸äº’å…³è”ä¸”éœ€è¦å¯¹ç…§ä¿®æ”¹çš„ä»£ç è¢«è¿›è¡Œäº†æ‹†åˆ†ï¼Œè€Œå®Œå…¨ä¸ç›¸å…³çš„ä»£ç å´åœ¨åŒä¸€ä¸ªæ–¹æ³•ä¸­ç»„åˆåœ¨ä¸€èµ·ã€‚å¦‚æ­¤å¾ˆå®¹æ˜“äº§ç”Ÿ bugï¼Œå¹¶ä¸”å¯¼è‡´é€»è¾‘ä¸ä¸€è‡´ã€‚\nåœ¨å¤šæ•°æƒ…å†µä¸‹ï¼Œä¸å¯èƒ½å°†ç»„ä»¶æ‹†åˆ†ä¸ºæ›´å°çš„ç²’åº¦ï¼Œå› ä¸ºçŠ¶æ€é€»è¾‘æ— å¤„ä¸åœ¨ã€‚è¿™ä¹Ÿç»™æµ‹è¯•å¸¦æ¥äº†ä¸€å®šæŒ‘æˆ˜ã€‚åŒæ—¶ï¼Œè¿™ä¹Ÿæ˜¯å¾ˆå¤šäººå°† React ä¸çŠ¶æ€ç®¡ç†åº“ç»“åˆä½¿ç”¨çš„åŸå› ä¹‹ä¸€ã€‚ä½†æ˜¯ï¼Œè¿™å¾€å¾€ä¼šå¼•å…¥äº†å¾ˆå¤šæŠ½è±¡æ¦‚å¿µï¼Œéœ€è¦ä½ åœ¨ä¸åŒçš„æ–‡ä»¶ä¹‹é—´æ¥å›åˆ‡æ¢ï¼Œä½¿å¾—å¤ç”¨å˜å¾—æ›´åŠ å›°éš¾ã€‚\nä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒHook å°†ç»„ä»¶ä¸­ç›¸äº’å…³è”çš„éƒ¨åˆ†æ‹†åˆ†æˆæ›´å°çš„å‡½æ•°ï¼ˆæ¯”å¦‚è®¾ç½®è®¢é˜…æˆ–è¯·æ±‚æ•°æ®ï¼‰ï¼Œè€Œå¹¶éå¼ºåˆ¶æŒ‰ç…§ç”Ÿå‘½å‘¨æœŸåˆ’åˆ†ã€‚ä½ è¿˜å¯ä»¥ä½¿ç”¨ reducer æ¥ç®¡ç†ç»„ä»¶çš„å†…éƒ¨çŠ¶æ€ï¼Œä½¿å…¶æ›´åŠ å¯é¢„æµ‹ã€‚\nï¼ˆ3ï¼‰éš¾ä»¥ç†è§£çš„ class\né™¤äº†ä»£ç å¤ç”¨å’Œä»£ç ç®¡ç†ä¼šé‡åˆ°å›°éš¾å¤–ï¼Œclass æ˜¯å­¦ä¹  React çš„ä¸€å¤§å±éšœã€‚æˆ‘ä»¬å¿…é¡»å»ç†è§£ JavaScript ä¸­ this çš„å·¥ä½œæ–¹å¼ï¼Œè¿™ä¸å…¶ä»–è¯­è¨€å­˜åœ¨å·¨å¤§å·®å¼‚ã€‚è¿˜ä¸èƒ½å¿˜è®°ç»‘å®šäº‹ä»¶å¤„ç†å™¨ã€‚æ²¡æœ‰ç¨³å®šçš„è¯­æ³•ææ¡ˆï¼Œè¿™äº›ä»£ç éå¸¸å†—ä½™ã€‚å¤§å®¶å¯ä»¥å¾ˆå¥½åœ°ç†è§£ propsï¼Œstate å’Œè‡ªé¡¶å‘ä¸‹çš„æ•°æ®æµï¼Œä½†å¯¹ class å´ä¸€ç­¹è«å±•ã€‚å³ä¾¿åœ¨æœ‰ç»éªŒçš„ React å¼€å‘è€…ä¹‹é—´ï¼Œå¯¹äºå‡½æ•°ç»„ä»¶ä¸ class ç»„ä»¶çš„å·®å¼‚ä¹Ÿå­˜åœ¨åˆ†æ­§ï¼Œç”šè‡³è¿˜è¦åŒºåˆ†ä¸¤ç§ç»„ä»¶çš„ä½¿ç”¨åœºæ™¯ã€‚\nä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼ŒHook ä½¿ä½ åœ¨é class çš„æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨æ›´å¤šçš„ React ç‰¹æ€§ã€‚ ä»æ¦‚å¿µä¸Šè®²ï¼ŒReact ç»„ä»¶ä¸€ç›´æ›´åƒæ˜¯å‡½æ•°ã€‚è€Œ Hook åˆ™æ‹¥æŠ±äº†å‡½æ•°ï¼ŒåŒæ—¶ä¹Ÿæ²¡æœ‰ç‰ºç‰² React çš„ç²¾ç¥åŸåˆ™ã€‚Hook æä¾›äº†é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼Œæ— éœ€å­¦ä¹ å¤æ‚çš„å‡½æ•°å¼æˆ–å“åº”å¼ç¼–ç¨‹æŠ€æœ¯\n4. React Hook çš„ä½¿ç”¨é™åˆ¶æœ‰å“ªäº›ï¼ŸReact Hooks çš„é™åˆ¶ä¸»è¦æœ‰ä¸¤æ¡ï¼š\n\nä¸è¦åœ¨å¾ªç¯ã€æ¡ä»¶æˆ–åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨ Hookï¼›\nåœ¨ React çš„å‡½æ•°ç»„ä»¶ä¸­è°ƒç”¨ Hookã€‚\n\né‚£ä¸ºä»€ä¹ˆä¼šæœ‰è¿™æ ·çš„é™åˆ¶å‘¢ï¼ŸHooks çš„è®¾è®¡åˆè¡·æ˜¯ä¸ºäº†æ”¹è¿› React ç»„ä»¶çš„å¼€å‘æ¨¡å¼ã€‚åœ¨æ—§æœ‰çš„å¼€å‘æ¨¡å¼ä¸‹é‡åˆ°äº†ä¸‰ä¸ªé—®é¢˜ã€‚\n\nç»„ä»¶ä¹‹é—´éš¾ä»¥å¤ç”¨çŠ¶æ€é€»è¾‘ã€‚è¿‡å»å¸¸è§çš„è§£å†³æ–¹æ¡ˆæ˜¯é«˜é˜¶ç»„ä»¶ã€render props åŠçŠ¶æ€ç®¡ç†æ¡†æ¶ã€‚\nå¤æ‚çš„ç»„ä»¶å˜å¾—éš¾ä»¥ç†è§£ã€‚ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸ä¸šåŠ¡é€»è¾‘è€¦åˆå¤ªæ·±ï¼Œå¯¼è‡´å…³è”éƒ¨åˆ†éš¾ä»¥æ‹†åˆ†ã€‚\näººå’Œæœºå™¨éƒ½å¾ˆå®¹æ˜“æ··æ·†ç±»ã€‚å¸¸è§çš„æœ‰ this çš„é—®é¢˜ï¼Œä½†åœ¨ React å›¢é˜Ÿä¸­è¿˜æœ‰ç±»éš¾ä»¥ä¼˜åŒ–çš„é—®é¢˜ï¼Œå¸Œæœ›åœ¨ç¼–è¯‘ä¼˜åŒ–å±‚é¢åšå‡ºä¸€äº›æ”¹è¿›ã€‚\n\nè¿™ä¸‰ä¸ªé—®é¢˜åœ¨ä¸€å®šç¨‹åº¦ä¸Šé˜»ç¢äº† React çš„åç»­å‘å±•ï¼Œæ‰€ä»¥ä¸ºäº†è§£å†³è¿™ä¸‰ä¸ªé—®é¢˜ï¼ŒHooks åŸºäºå‡½æ•°ç»„ä»¶å¼€å§‹è®¾è®¡ã€‚ç„¶è€Œç¬¬ä¸‰ä¸ªé—®é¢˜å†³å®šäº† Hooks åªæ”¯æŒå‡½æ•°ç»„ä»¶ã€‚\né‚£ä¸ºä»€ä¹ˆä¸è¦åœ¨å¾ªç¯ã€æ¡ä»¶æˆ–åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨ Hook å‘¢ï¼Ÿå› ä¸º Hooks çš„è®¾è®¡æ˜¯åŸºäºæ•°ç»„å®ç°ã€‚åœ¨è°ƒç”¨æ—¶æŒ‰é¡ºåºåŠ å…¥æ•°ç»„ä¸­ï¼Œå¦‚æœä½¿ç”¨å¾ªç¯ã€æ¡ä»¶æˆ–åµŒå¥—å‡½æ•°å¾ˆæœ‰å¯èƒ½å¯¼è‡´æ•°ç»„å–å€¼é”™ä½ï¼Œæ‰§è¡Œé”™è¯¯çš„ Hookã€‚å½“ç„¶ï¼Œå®è´¨ä¸Š React çš„æºç é‡Œä¸æ˜¯æ•°ç»„ï¼Œæ˜¯é“¾è¡¨ã€‚\nè¿™äº›é™åˆ¶ä¼šåœ¨ç¼–ç ä¸Šé€ æˆä¸€å®šç¨‹åº¦çš„å¿ƒæ™ºè´Ÿæ‹…ï¼Œæ–°æ‰‹å¯èƒ½ä¼šå†™é”™ï¼Œä¸ºäº†é¿å…è¿™æ ·çš„æƒ…å†µï¼Œå¯ä»¥å¼•å…¥ ESLint çš„ Hooks æ£€æŸ¥æ’ä»¶è¿›è¡Œé¢„é˜²ã€‚\n5. useEffect ä¸ useLayoutEffect çš„åŒºåˆ«ï¼ˆ1ï¼‰å…±åŒç‚¹\n\nè¿ç”¨æ•ˆæœï¼š useEffect ä¸ useLayoutEffect ä¸¤è€…éƒ½æ˜¯ç”¨äºå¤„ç†å‰¯ä½œç”¨ï¼Œè¿™äº›å‰¯ä½œç”¨åŒ…æ‹¬æ”¹å˜ DOMã€è®¾ç½®è®¢é˜…ã€æ“ä½œå®šæ—¶å™¨ç­‰ã€‚åœ¨å‡½æ•°ç»„ä»¶å†…éƒ¨æ“ä½œå‰¯ä½œç”¨æ˜¯ä¸è¢«å…è®¸çš„ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨è¿™ä¸¤ä¸ªå‡½æ•°å»å¤„ç†ã€‚\nä½¿ç”¨æ–¹å¼ï¼š useEffect ä¸ useLayoutEffect ä¸¤è€…åº•å±‚çš„å‡½æ•°ç­¾åæ˜¯å®Œå…¨ä¸€è‡´çš„ï¼Œéƒ½æ˜¯è°ƒç”¨çš„ mountEffectImplæ–¹æ³•ï¼Œåœ¨ä½¿ç”¨ä¸Šä¹Ÿæ²¡ä»€ä¹ˆå·®å¼‚ï¼ŒåŸºæœ¬å¯ä»¥ç›´æ¥æ›¿æ¢ã€‚\n\nï¼ˆ2ï¼‰ä¸åŒç‚¹\n\nä½¿ç”¨åœºæ™¯ï¼š useEffect åœ¨ React çš„æ¸²æŸ“è¿‡ç¨‹ä¸­æ˜¯è¢«å¼‚æ­¥è°ƒç”¨çš„ï¼Œç”¨äºç»å¤§å¤šæ•°åœºæ™¯ï¼›è€Œ useLayoutEffect ä¼šåœ¨æ‰€æœ‰çš„ DOM å˜æ›´ä¹‹ååŒæ­¥è°ƒç”¨ï¼Œä¸»è¦ç”¨äºå¤„ç† DOM æ“ä½œã€è°ƒæ•´æ ·å¼ã€é¿å…é¡µé¢é—ªçƒç­‰é—®é¢˜ã€‚ä¹Ÿæ­£å› ä¸ºæ˜¯åŒæ­¥å¤„ç†ï¼Œæ‰€ä»¥éœ€è¦é¿å…åœ¨ useLayoutEffect åšè®¡ç®—é‡è¾ƒå¤§çš„è€—æ—¶ä»»åŠ¡ä»è€Œé€ æˆé˜»å¡ã€‚\nä½¿ç”¨æ•ˆæœï¼š useEffectæ˜¯æŒ‰ç…§é¡ºåºæ‰§è¡Œä»£ç çš„ï¼Œæ”¹å˜å±å¹•åƒç´ ä¹‹åæ‰§è¡Œï¼ˆå…ˆæ¸²æŸ“ï¼Œåæ”¹å˜DOMï¼‰ï¼Œå½“æ”¹å˜å±å¹•å†…å®¹æ—¶å¯èƒ½ä¼šäº§ç”Ÿé—ªçƒï¼›useLayoutEffectæ˜¯æ”¹å˜å±å¹•åƒç´ ä¹‹å‰å°±æ‰§è¡Œäº†ï¼ˆä¼šæ¨è¿Ÿé¡µé¢æ˜¾ç¤ºçš„äº‹ä»¶ï¼Œå…ˆæ”¹å˜DOMåæ¸²æŸ“ï¼‰ï¼Œä¸ä¼šäº§ç”Ÿé—ªçƒã€‚useLayoutEffectæ€»æ˜¯æ¯”useEffectå…ˆæ‰§è¡Œã€‚\n\nåœ¨æœªæ¥çš„è¶‹åŠ¿ä¸Šï¼Œä¸¤ä¸ª API æ˜¯ä¼šé•¿æœŸå…±å­˜çš„ï¼Œæš‚æ—¶æ²¡æœ‰åˆ å‡åˆå¹¶çš„è®¡åˆ’ï¼Œéœ€è¦å¼€å‘è€…æ ¹æ®åœºæ™¯å»è‡ªè¡Œé€‰æ‹©ã€‚React å›¢é˜Ÿçš„å»ºè®®éå¸¸å®ç”¨ï¼Œå¦‚æœå®åœ¨åˆ†ä¸æ¸…ï¼Œå…ˆç”¨ useEffectï¼Œä¸€èˆ¬é—®é¢˜ä¸å¤§ï¼›å¦‚æœé¡µé¢æœ‰å¼‚å¸¸ï¼Œå†ç›´æ¥æ›¿æ¢ä¸º useLayoutEffect å³å¯ã€‚\n6. React Hooksåœ¨å¹³æ—¶å¼€å‘ä¸­éœ€è¦æ³¨æ„çš„é—®é¢˜å’ŒåŸå› ï¼ˆ1ï¼‰ä¸è¦åœ¨å¾ªç¯ï¼Œæ¡ä»¶æˆ–åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨Hookï¼Œå¿…é¡»å§‹ç»ˆåœ¨ Reactå‡½æ•°çš„é¡¶å±‚ä½¿ç”¨Hook\nè¿™æ˜¯å› ä¸ºReactéœ€è¦åˆ©ç”¨è°ƒç”¨é¡ºåºæ¥æ­£ç¡®æ›´æ–°ç›¸åº”çš„çŠ¶æ€ï¼Œä»¥åŠè°ƒç”¨ç›¸åº”çš„é’©å­å‡½æ•°ã€‚ä¸€æ—¦åœ¨å¾ªç¯æˆ–æ¡ä»¶åˆ†æ”¯è¯­å¥ä¸­è°ƒç”¨Hookï¼Œå°±å®¹æ˜“å¯¼è‡´è°ƒç”¨é¡ºåºçš„ä¸ä¸€è‡´æ€§ï¼Œä»è€Œäº§ç”Ÿéš¾ä»¥é¢„æ–™åˆ°çš„åæœã€‚\nï¼ˆ2ï¼‰ä½¿ç”¨useStateæ—¶å€™ï¼Œä½¿ç”¨pushï¼Œpopï¼Œspliceç­‰ç›´æ¥æ›´æ”¹æ•°ç»„å¯¹è±¡çš„å‘\nä½¿ç”¨pushç›´æ¥æ›´æ”¹æ•°ç»„æ— æ³•è·å–åˆ°æ–°å€¼ï¼Œåº”è¯¥é‡‡ç”¨ææ„æ–¹å¼ï¼Œä½†æ˜¯åœ¨classé‡Œé¢ä¸ä¼šæœ‰è¿™ä¸ªé—®é¢˜ã€‚ä»£ç ç¤ºä¾‹ï¼š\nfunction Indicatorfilter() &#123;\n  let [num,setNums] &#x3D; useState([0,1,2,3])\n  const test &#x3D; () &#x3D;&gt; &#123;\n    &#x2F;&#x2F; è¿™é‡Œå‘æ˜¯ç›´æ¥é‡‡ç”¨pushå»æ›´æ–°num\n    &#x2F;&#x2F; setNums(num)æ˜¯æ— æ³•æ›´æ–°numçš„\n    &#x2F;&#x2F; å¿…é¡»ä½¿ç”¨num &#x3D; [...num ,1]\n    num.push(1)\n    &#x2F;&#x2F; num &#x3D; [...num ,1]\n    setNums(num)\n  &#125;\nreturn (\n    &lt;div className&#x3D;&#39;filter&#39;&gt;\n      &lt;div onClick&#x3D;&#123;test&#125;&gt;æµ‹è¯•&lt;&#x2F;div&gt;\n        &lt;div&gt;\n          &#123;num.map((item,index) &#x3D;&gt; (\n              &lt;div key&#x3D;&#123;index&#125;&gt;&#123;item&#125;&lt;&#x2F;div&gt;\n          ))&#125;\n      &lt;&#x2F;div&gt;\n    &lt;&#x2F;div&gt;\n  )\n&#125;\n\nclass Indicatorfilter extends React.Component&lt;any,any&gt;&#123;\n  constructor(props:any)&#123;\n      super(props)\n      this.state &#x3D; &#123;\n          nums:[1,2,3]\n      &#125;\n      this.test &#x3D; this.test.bind(this)\n  &#125;\n\n  test()&#123;\n      &#x2F;&#x2F; classé‡‡ç”¨åŒæ ·çš„æ–¹å¼æ˜¯æ²¡æœ‰é—®é¢˜çš„\n      this.state.nums.push(1)\n      this.setState(&#123;\n          nums: this.state.nums\n      &#125;)\n  &#125;\n\n  render()&#123;\n      let &#123;nums&#125; &#x3D; this.state\n      return(\n          &lt;div&gt;\n              &lt;div onClick&#x3D;&#123;this.test&#125;&gt;æµ‹è¯•&lt;&#x2F;div&gt;\n                  &lt;div&gt;\n                      &#123;nums.map((item:any,index:number) &#x3D;&gt; (\n                          &lt;div key&#x3D;&#123;index&#125;&gt;&#123;item&#125;&lt;&#x2F;div&gt;\n                      ))&#125;\n                  &lt;&#x2F;div&gt;\n          &lt;&#x2F;div&gt;\n\n      )\n  &#125;\n&#125;\nå¤åˆ¶ä»£ç \n\nï¼ˆ3ï¼‰useStateè®¾ç½®çŠ¶æ€çš„æ—¶å€™ï¼Œåªæœ‰ç¬¬ä¸€æ¬¡ç”Ÿæ•ˆï¼ŒåæœŸéœ€è¦æ›´æ–°çŠ¶æ€ï¼Œå¿…é¡»é€šè¿‡useEffect\nTableDeailæ˜¯ä¸€ä¸ªå…¬å…±ç»„ä»¶ï¼Œåœ¨è°ƒç”¨å®ƒçš„çˆ¶ç»„ä»¶é‡Œé¢ï¼Œæˆ‘ä»¬é€šè¿‡setæ”¹å˜columnsçš„å€¼ï¼Œä»¥ä¸ºä¼ é€’ç»™TableDeail çš„ columnsæ˜¯æœ€æ–°çš„å€¼ï¼Œæ‰€ä»¥tabColumnæ¯æ¬¡ä¹Ÿæ˜¯æœ€æ–°çš„å€¼ï¼Œä½†æ˜¯å®é™…tabColumnæ˜¯æœ€å¼€å§‹çš„å€¼ï¼Œä¸ä¼šéšç€columnsçš„æ›´æ–°è€Œæ›´æ–°ï¼š\nconst TableDeail &#x3D; (&#123;\n    columns,\n&#125;:TableData) &#x3D;&gt; &#123;\n    const [tabColumn, setTabColumn] &#x3D; useState(columns) \n&#125;\n\n&#x2F;&#x2F; æ­£ç¡®çš„åšæ³•æ˜¯é€šè¿‡useEffectæ”¹å˜è¿™ä¸ªå€¼\nconst TableDeail &#x3D; (&#123;\n    columns,\n&#125;:TableData) &#x3D;&gt; &#123;\n    const [tabColumn, setTabColumn] &#x3D; useState(columns) \n    useEffect(() &#x3D;&gt;&#123;setTabColumn(columns)&#125;,[columns])\n&#125;\n\nå¤åˆ¶ä»£ç \n\nï¼ˆ4ï¼‰å–„ç”¨useCallback\nçˆ¶ç»„ä»¶ä¼ é€’ç»™å­ç»„ä»¶äº‹ä»¶å¥æŸ„æ—¶ï¼Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰ä»»ä½•å‚æ•°å˜åŠ¨å¯èƒ½ä¼šé€‰ç”¨useMemoã€‚ä½†æ˜¯æ¯ä¸€æ¬¡çˆ¶ç»„ä»¶æ¸²æŸ“å­ç»„ä»¶å³ä½¿æ²¡å˜åŒ–ä¹Ÿä¼šè·Ÿç€æ¸²æŸ“ä¸€æ¬¡ã€‚\nï¼ˆ5ï¼‰ä¸è¦æ»¥ç”¨useContext\nå¯ä»¥ä½¿ç”¨åŸºäº useContext å°è£…çš„çŠ¶æ€ç®¡ç†å·¥å…·ã€‚\n7. React Hooks å’Œç”Ÿå‘½å‘¨æœŸçš„å…³ç³»ï¼Ÿå‡½æ•°ç»„ä»¶ çš„æœ¬è´¨æ˜¯å‡½æ•°ï¼Œæ²¡æœ‰ state çš„æ¦‚å¿µçš„ï¼Œå› æ­¤ä¸å­˜åœ¨ç”Ÿå‘½å‘¨æœŸä¸€è¯´ï¼Œä»…ä»…æ˜¯ä¸€ä¸ª render å‡½æ•°è€Œå·²ã€‚ ä½†æ˜¯å¼•å…¥ Hooks ä¹‹åå°±å˜å¾—ä¸åŒäº†ï¼Œå®ƒèƒ½è®©ç»„ä»¶åœ¨ä¸ä½¿ç”¨ class çš„æƒ…å†µä¸‹æ‹¥æœ‰ stateï¼Œæ‰€ä»¥å°±æœ‰äº†ç”Ÿå‘½å‘¨æœŸçš„æ¦‚å¿µï¼Œæ‰€è°“çš„ç”Ÿå‘½å‘¨æœŸå…¶å®å°±æ˜¯ useStateã€ useEffect() å’Œ useLayoutEffect() ã€‚\nå³ï¼šHooks ç»„ä»¶ï¼ˆä½¿ç”¨äº†Hooksçš„å‡½æ•°ç»„ä»¶ï¼‰æœ‰ç”Ÿå‘½å‘¨æœŸï¼Œè€Œå‡½æ•°ç»„ä»¶ï¼ˆæœªä½¿ç”¨Hooksçš„å‡½æ•°ç»„ä»¶ï¼‰æ˜¯æ²¡æœ‰ç”Ÿå‘½å‘¨æœŸçš„ã€‚\nä¸‹é¢æ˜¯å…·ä½“çš„ class ä¸ Hooks çš„ç”Ÿå‘½å‘¨æœŸå¯¹åº”å…³ç³»ï¼š\n\nconstructorï¼šå‡½æ•°ç»„ä»¶ä¸éœ€è¦æ„é€ å‡½æ•°ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨ **useState æ¥åˆå§‹åŒ– state**ã€‚å¦‚æœè®¡ç®—çš„ä»£ä»·æ¯”è¾ƒæ˜‚è´µï¼Œä¹Ÿå¯ä»¥ä¼ ä¸€ä¸ªå‡½æ•°ç»™ useStateã€‚\n\nconst [num, UpdateNum] &#x3D; useState(0)\nå¤åˆ¶ä»£ç \n\n\ngetDerivedStateFromPropsï¼šä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸éœ€è¦ä½¿ç”¨å®ƒï¼Œå¯ä»¥åœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­æ›´æ–° stateï¼Œä»¥è¾¾åˆ°å®ç° getDerivedStateFromProps çš„ç›®çš„ã€‚\n\nfunction ScrollView(&#123;row&#125;) &#123;\n  let [isScrollingDown, setIsScrollingDown] &#x3D; useState(false);\n  let [prevRow, setPrevRow] &#x3D; useState(null);\n  if (row !&#x3D;&#x3D; prevRow) &#123;\n    &#x2F;&#x2F; Row è‡ªä¸Šæ¬¡æ¸²æŸ“ä»¥æ¥å‘ç”Ÿè¿‡æ”¹å˜ã€‚æ›´æ–° isScrollingDownã€‚\n    setIsScrollingDown(prevRow !&#x3D;&#x3D; null &amp;&amp; row &gt; prevRow);\n    setPrevRow(row);\n  &#125;\n  return &#96;Scrolling down: $&#123;isScrollingDown&#125;&#96;;\n&#125;\nå¤åˆ¶ä»£ç \n\nReact ä¼šç«‹å³é€€å‡ºç¬¬ä¸€æ¬¡æ¸²æŸ“å¹¶ç”¨æ›´æ–°åçš„ state é‡æ–°è¿è¡Œç»„ä»¶ä»¥é¿å…è€—è´¹å¤ªå¤šæ€§èƒ½ã€‚\n\nshouldComponentUpdateï¼šå¯ä»¥ç”¨ **React.memo** åŒ…è£¹ä¸€ä¸ªç»„ä»¶æ¥å¯¹å®ƒçš„ props è¿›è¡Œæµ…æ¯”è¾ƒ\n\nconst Button &#x3D; React.memo((props) &#x3D;&gt; &#123;  &#x2F;&#x2F; å…·ä½“çš„ç»„ä»¶&#125;);\nå¤åˆ¶ä»£ç \n\næ³¨æ„ï¼š**React.memo ç­‰æ•ˆäº **``**PureComponent**ï¼Œå®ƒåªæµ…æ¯”è¾ƒ propsã€‚è¿™é‡Œä¹Ÿå¯ä»¥ä½¿ç”¨ useMemo ä¼˜åŒ–æ¯ä¸€ä¸ªèŠ‚ç‚¹ã€‚\n\nrenderï¼šè¿™æ˜¯å‡½æ•°ç»„ä»¶ä½“æœ¬èº«ã€‚\ncomponentDidMount, componentDidUpdateï¼š useLayoutEffect ä¸å®ƒä»¬ä¸¤çš„è°ƒç”¨é˜¶æ®µæ˜¯ä¸€æ ·çš„ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬æ¨èä½ ä¸€å¼€å§‹å…ˆç”¨Â useEffectï¼Œåªæœ‰å½“å®ƒå‡ºé—®é¢˜çš„æ—¶å€™å†å°è¯•ä½¿ç”¨ useLayoutEffectã€‚useEffect å¯ä»¥è¡¨è¾¾æ‰€æœ‰è¿™äº›çš„ç»„åˆã€‚\n\n&#x2F;&#x2F; componentDidMount\nuseEffect(()&#x3D;&gt;&#123;\n  &#x2F;&#x2F; éœ€è¦åœ¨ componentDidMount æ‰§è¡Œçš„å†…å®¹\n&#125;, [])\nuseEffect(() &#x3D;&gt; &#123; \n  &#x2F;&#x2F; åœ¨ componentDidMountï¼Œä»¥åŠ count æ›´æ”¹æ—¶ componentDidUpdate æ‰§è¡Œçš„å†…å®¹\n  document.title &#x3D; &#96;You clicked $&#123;count&#125; times&#96;; \n  return () &#x3D;&gt; &#123;\n    &#x2F;&#x2F; éœ€è¦åœ¨ count æ›´æ”¹æ—¶ componentDidUpdateï¼ˆå…ˆäº document.title &#x3D; ... æ‰§è¡Œï¼Œéµå®ˆå…ˆæ¸…ç†åæ›´æ–°ï¼‰\n    &#x2F;&#x2F; ä»¥åŠ componentWillUnmount æ‰§è¡Œçš„å†…å®¹       \n  &#125; &#x2F;&#x2F; å½“å‡½æ•°ä¸­ Cleanup å‡½æ•°ä¼šæŒ‰ç…§åœ¨ä»£ç ä¸­å®šä¹‰çš„é¡ºåºå…ˆåæ‰§è¡Œï¼Œä¸å‡½æ•°æœ¬èº«çš„ç‰¹æ€§æ— å…³\n&#125;, [count]); &#x2F;&#x2F; ä»…åœ¨ count æ›´æ”¹æ—¶æ›´æ–°\nå¤åˆ¶ä»£ç \n\nè¯·è®°å¾— React ä¼šç­‰å¾…æµè§ˆå™¨å®Œæˆç”»é¢æ¸²æŸ“ä¹‹åæ‰ä¼šå»¶è¿Ÿè°ƒç”¨ ï¼Œå› æ­¤ä¼šä½¿å¾—é¢å¤–æ“ä½œå¾ˆæ–¹ä¾¿\n\ncomponentWillUnmountï¼šç›¸å½“äº useEffectÂ é‡Œé¢è¿”å›çš„ cleanup å‡½æ•°\n\n&#x2F;&#x2F; componentDidMount&#x2F;componentWillUnmount\nuseEffect(()&#x3D;&gt;&#123;\n  &#x2F;&#x2F; éœ€è¦åœ¨ componentDidMount æ‰§è¡Œçš„å†…å®¹\n  return function cleanup() &#123;\n    &#x2F;&#x2F; éœ€è¦åœ¨ componentWillUnmount æ‰§è¡Œçš„å†…å®¹      \n  &#125;\n&#125;, [])\nå¤åˆ¶ä»£ç \n\n\ncomponentDidCatch and getDerivedStateFromErrorï¼šç›®å‰è¿˜æ²¡æœ‰è¿™äº›æ–¹æ³•çš„ Hook ç­‰ä»·å†™æ³•ï¼Œä½†å¾ˆå¿«ä¼šåŠ ä¸Šã€‚\n\n\n\n\nclass ç»„ä»¶\nHooks ç»„ä»¶\n\n\n\nconstructor\nuseState\n\n\ngetDerivedStateFromProps\nuseState é‡Œé¢ update å‡½æ•°\n\n\nshouldComponentUpdate\nuseMemo\n\n\nrender\nå‡½æ•°æœ¬èº«\n\n\ncomponentDidMount\nuseEffect\n\n\ncomponentDidUpdate\nuseEffect\n\n\ncomponentWillUnmount\nuseEffect é‡Œé¢è¿”å›çš„å‡½æ•°\n\n\ncomponentDidCatch\næ— \n\n\ngetDerivedStateFromError\næ— \n\n\nå…«ã€è™šæ‹ŸDOM1. å¯¹è™šæ‹Ÿ DOM çš„ç†è§£ï¼Ÿè™šæ‹Ÿ DOM ä¸»è¦åšäº†ä»€ä¹ˆï¼Ÿè™šæ‹Ÿ DOM æœ¬èº«æ˜¯ä»€ä¹ˆï¼Ÿä»æœ¬è´¨ä¸Šæ¥è¯´ï¼ŒVirtual Domæ˜¯ä¸€ä¸ªJavaScriptå¯¹è±¡ï¼Œé€šè¿‡å¯¹è±¡çš„æ–¹å¼æ¥è¡¨ç¤ºDOMç»“æ„ã€‚å°†é¡µé¢çš„çŠ¶æ€æŠ½è±¡ä¸ºJSå¯¹è±¡çš„å½¢å¼ï¼Œé…åˆä¸åŒçš„æ¸²æŸ“å·¥å…·ï¼Œä½¿è·¨å¹³å°æ¸²æŸ“æˆä¸ºå¯èƒ½ã€‚é€šè¿‡äº‹åŠ¡å¤„ç†æœºåˆ¶ï¼Œå°†å¤šæ¬¡DOMä¿®æ”¹çš„ç»“æœä¸€æ¬¡æ€§çš„æ›´æ–°åˆ°é¡µé¢ä¸Šï¼Œä»è€Œæœ‰æ•ˆçš„å‡å°‘é¡µé¢æ¸²æŸ“çš„æ¬¡æ•°ï¼Œå‡å°‘ä¿®æ”¹DOMçš„é‡ç»˜é‡æ’æ¬¡æ•°ï¼Œæé«˜æ¸²æŸ“æ€§èƒ½ã€‚\nè™šæ‹ŸDOMæ˜¯å¯¹DOMçš„æŠ½è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æ˜¯æ›´åŠ è½»é‡çº§çš„å¯¹DOMçš„æè¿°ã€‚å®ƒè®¾è®¡çš„æœ€åˆç›®çš„ï¼Œå°±æ˜¯æ›´å¥½çš„è·¨å¹³å°ï¼Œæ¯”å¦‚node.jså°±æ²¡æœ‰DOMï¼Œå¦‚æœæƒ³å®ç°SSRï¼Œé‚£ä¹ˆä¸€ä¸ªæ–¹å¼å°±æ˜¯å€ŸåŠ©è™šæ‹Ÿdomï¼Œå› ä¸ºè™šæ‹Ÿdomæœ¬èº«æ˜¯jså¯¹è±¡ã€‚ åœ¨ä»£ç æ¸²æŸ“åˆ°é¡µé¢ä¹‹å‰ï¼Œvueæˆ–è€…reactä¼šæŠŠä»£ç è½¬æ¢æˆä¸€ä¸ªå¯¹è±¡ï¼ˆè™šæ‹ŸDOMï¼‰ã€‚ä»¥å¯¹è±¡çš„å½¢å¼æ¥æè¿°çœŸå®domç»“æ„ï¼Œæœ€ç»ˆæ¸²æŸ“åˆ°é¡µé¢ã€‚åœ¨æ¯æ¬¡æ•°æ®å‘ç”Ÿå˜åŒ–å‰ï¼Œè™šæ‹Ÿdoméƒ½ä¼šç¼“å­˜ä¸€ä»½ï¼Œå˜åŒ–ä¹‹æ—¶ï¼Œç°åœ¨çš„è™šæ‹Ÿdomä¼šä¸ç¼“å­˜çš„è™šæ‹Ÿdomè¿›è¡Œæ¯”è¾ƒã€‚åœ¨vueæˆ–è€…reactå†…éƒ¨å°è£…äº†diffç®—æ³•ï¼Œé€šè¿‡è¿™ä¸ªç®—æ³•æ¥è¿›è¡Œæ¯”è¾ƒï¼Œæ¸²æŸ“æ—¶ä¿®æ”¹æ”¹å˜çš„å˜åŒ–ï¼ŒåŸå…ˆæ²¡æœ‰å‘ç”Ÿæ”¹å˜çš„é€šè¿‡åŸå…ˆçš„æ•°æ®è¿›è¡Œæ¸²æŸ“ã€‚\nå¦å¤–ç°ä»£å‰ç«¯æ¡†æ¶çš„ä¸€ä¸ªåŸºæœ¬è¦æ±‚å°±æ˜¯æ— é¡»æ‰‹åŠ¨æ“ä½œDOMï¼Œä¸€æ–¹é¢æ˜¯å› ä¸ºæ‰‹åŠ¨æ“ä½œDOMæ— æ³•ä¿è¯ç¨‹åºæ€§èƒ½ï¼Œå¤šäººåä½œçš„é¡¹ç›®ä¸­å¦‚æœreviewä¸ä¸¥æ ¼ï¼Œå¯èƒ½ä¼šæœ‰å¼€å‘è€…å†™å‡ºæ€§èƒ½è¾ƒä½çš„ä»£ç ï¼Œå¦ä¸€æ–¹é¢æ›´é‡è¦çš„æ˜¯çœç•¥æ‰‹åŠ¨DOMæ“ä½œå¯ä»¥å¤§å¤§æé«˜å¼€å‘æ•ˆç‡ã€‚\nä¸ºä»€ä¹ˆè¦ç”¨ Virtual DOMï¼š\nï¼ˆ1ï¼‰ä¿è¯æ€§èƒ½ä¸‹é™ï¼Œåœ¨ä¸è¿›è¡Œæ‰‹åŠ¨ä¼˜åŒ–çš„æƒ…å†µä¸‹ï¼Œæä¾›è¿‡å¾—å»çš„æ€§èƒ½\nä¸‹é¢å¯¹æ¯”ä¸€ä¸‹ä¿®æ”¹DOMæ—¶çœŸå®DOMæ“ä½œå’ŒVirtual DOMçš„è¿‡ç¨‹ï¼Œæ¥çœ‹ä¸€ä¸‹å®ƒä»¬é‡æ’é‡ç»˜çš„æ€§èƒ½æ¶ˆè€—âˆ¶\n\nçœŸå®DOMâˆ¶ ç”ŸæˆHTMLå­—ç¬¦ä¸²ï¼‹ é‡å»ºæ‰€æœ‰çš„DOMå…ƒç´ \nVirtual DOMâˆ¶ ç”ŸæˆvNodeï¼‹ DOMDiffï¼‹å¿…è¦çš„DOMæ›´æ–°\n\nVirtual DOMçš„æ›´æ–°DOMçš„å‡†å¤‡å·¥ä½œè€—è´¹æ›´å¤šçš„æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯JSå±‚é¢ï¼Œç›¸æ¯”äºæ›´å¤šçš„DOMæ“ä½œå®ƒçš„æ¶ˆè´¹æ˜¯æå…¶ä¾¿å®œçš„ã€‚å°¤é›¨æºªåœ¨ç¤¾åŒºè®ºå›ä¸­è¯´é“âˆ¶ æ¡†æ¶ç»™ä½ çš„ä¿è¯æ˜¯ï¼Œä½ ä¸éœ€è¦æ‰‹åŠ¨ä¼˜åŒ–çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä¾ç„¶å¯ä»¥ç»™ä½ æä¾›è¿‡å¾—å»çš„æ€§èƒ½ã€‚ ï¼ˆ2ï¼‰è·¨å¹³å° Virtual DOMæœ¬è´¨ä¸Šæ˜¯JavaScriptçš„å¯¹è±¡ï¼Œå®ƒå¯ä»¥å¾ˆæ–¹ä¾¿çš„è·¨å¹³å°æ“ä½œï¼Œæ¯”å¦‚æœåŠ¡ç«¯æ¸²æŸ“ã€uniappç­‰ã€‚\n2. React diff ç®—æ³•çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿå®é™…ä¸Šï¼Œdiff ç®—æ³•æ¢è®¨çš„å°±æ˜¯è™šæ‹Ÿ DOM æ ‘å‘ç”Ÿå˜åŒ–åï¼Œç”Ÿæˆ DOM æ ‘æ›´æ–°è¡¥ä¸çš„æ–¹å¼ã€‚å®ƒé€šè¿‡å¯¹æ¯”æ–°æ—§ä¸¤æ ªè™šæ‹Ÿ DOM æ ‘çš„å˜æ›´å·®å¼‚ï¼Œå°†æ›´æ–°è¡¥ä¸ä½œç”¨äºçœŸå® DOMï¼Œä»¥æœ€å°æˆæœ¬å®Œæˆè§†å›¾æ›´æ–°ã€‚  å…·ä½“çš„æµç¨‹å¦‚ä¸‹ï¼š\n\nçœŸå®çš„ DOM é¦–å…ˆä¼šæ˜ å°„ä¸ºè™šæ‹Ÿ DOMï¼›\nå½“è™šæ‹Ÿ DOM å‘ç”Ÿå˜åŒ–åï¼Œå°±ä¼šæ ¹æ®å·®è·è®¡ç®—ç”Ÿæˆ patchï¼Œè¿™ä¸ª patch æ˜¯ä¸€ä¸ªç»“æ„åŒ–çš„æ•°æ®ï¼Œå†…å®¹åŒ…å«äº†å¢åŠ ã€æ›´æ–°ã€ç§»é™¤ç­‰ï¼›\næ ¹æ® patch å»æ›´æ–°çœŸå®çš„ DOMï¼Œåé¦ˆåˆ°ç”¨æˆ·çš„ç•Œé¢ä¸Šã€‚\n\n ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š\nimport React from &#39;react&#39;\nexport default class ExampleComponent extends React.Component &#123;\n  render() &#123;\n    if(this.props.isVisible) &#123;\n       return &lt;div className&#x3D;&quot;visible&quot;&gt;visbile&lt;&#x2F;div&gt;;\n    &#125;\n     return &lt;div className&#x3D;&quot;hidden&quot;&gt;hidden&lt;&#x2F;div&gt;;\n  &#125;\n&#125;\nå¤åˆ¶ä»£ç \n\nè¿™é‡Œï¼Œé¦–å…ˆå‡å®š ExampleComponent å¯è§ï¼Œç„¶åå†æ”¹å˜å®ƒçš„çŠ¶æ€ï¼Œè®©å®ƒä¸å¯è§ ã€‚æ˜ å°„ä¸ºçœŸå®çš„ DOM æ“ä½œæ˜¯è¿™æ ·çš„ï¼ŒReact ä¼šåˆ›å»ºä¸€ä¸ª div èŠ‚ç‚¹ã€‚\n&lt;div class&#x3D;&quot;visible&quot;&gt;visbile&lt;&#x2F;div&gt;\nå¤åˆ¶ä»£ç \n\nå½“æŠŠ visbile çš„å€¼å˜ä¸º false æ—¶ï¼Œå°±ä¼šæ›¿æ¢ class å±æ€§ä¸º hiddenï¼Œå¹¶é‡å†™å†…éƒ¨çš„ innerText ä¸º hiddenã€‚è¿™æ ·ä¸€ä¸ªç”Ÿæˆè¡¥ä¸ã€æ›´æ–°å·®å¼‚çš„è¿‡ç¨‹ç»Ÿç§°ä¸º diff ç®—æ³•ã€‚\ndiffç®—æ³•å¯ä»¥æ€»ç»“ä¸ºä¸‰ä¸ªç­–ç•¥ï¼Œåˆ†åˆ«ä»æ ‘ã€ç»„ä»¶åŠå…ƒç´ ä¸‰ä¸ªå±‚é¢è¿›è¡Œå¤æ‚åº¦çš„ä¼˜åŒ–ï¼š\nç­–ç•¥ä¸€ï¼šå¿½ç•¥èŠ‚ç‚¹è·¨å±‚çº§æ“ä½œåœºæ™¯ï¼Œæå‡æ¯”å¯¹æ•ˆç‡ã€‚ï¼ˆåŸºäºæ ‘è¿›è¡Œå¯¹æ¯”ï¼‰\nè¿™ä¸€ç­–ç•¥éœ€è¦è¿›è¡Œæ ‘æ¯”å¯¹ï¼Œå³å¯¹æ ‘è¿›è¡Œåˆ†å±‚æ¯”è¾ƒã€‚æ ‘æ¯”å¯¹çš„å¤„ç†æ‰‹æ³•æ˜¯éå¸¸â€œæš´åŠ›â€çš„ï¼Œå³ä¸¤æ£µæ ‘åªå¯¹åŒä¸€å±‚æ¬¡çš„èŠ‚ç‚¹è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœå‘ç°èŠ‚ç‚¹å·²ç»ä¸å­˜åœ¨äº†ï¼Œåˆ™è¯¥èŠ‚ç‚¹åŠå…¶å­èŠ‚ç‚¹ä¼šè¢«å®Œå…¨åˆ é™¤æ‰ï¼Œä¸ä¼šç”¨äºè¿›ä¸€æ­¥çš„æ¯”è¾ƒï¼Œè¿™å°±æå‡äº†æ¯”å¯¹æ•ˆç‡ã€‚\nç­–ç•¥äºŒï¼šå¦‚æœç»„ä»¶çš„ class ä¸€è‡´ï¼Œåˆ™é»˜è®¤ä¸ºç›¸ä¼¼çš„æ ‘ç»“æ„ï¼Œå¦åˆ™é»˜è®¤ä¸ºä¸åŒçš„æ ‘ç»“æ„ã€‚ï¼ˆåŸºäºç»„ä»¶è¿›è¡Œå¯¹æ¯”ï¼‰\nåœ¨ç»„ä»¶æ¯”å¯¹çš„è¿‡ç¨‹ä¸­ï¼š\n\nå¦‚æœç»„ä»¶æ˜¯åŒä¸€ç±»å‹åˆ™è¿›è¡Œæ ‘æ¯”å¯¹ï¼›\nå¦‚æœä¸æ˜¯åˆ™ç›´æ¥æ”¾å…¥è¡¥ä¸ä¸­ã€‚\n\nåªè¦çˆ¶ç»„ä»¶ç±»å‹ä¸åŒï¼Œå°±ä¼šè¢«é‡æ–°æ¸²æŸ“ã€‚è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆ shouldComponentUpdateã€PureComponent åŠ React.memo å¯ä»¥æé«˜æ€§èƒ½çš„åŸå› ã€‚\nç­–ç•¥ä¸‰ï¼šåŒä¸€å±‚çº§çš„å­èŠ‚ç‚¹ï¼Œå¯ä»¥é€šè¿‡æ ‡è®° key çš„æ–¹å¼è¿›è¡Œåˆ—è¡¨å¯¹æ¯”ã€‚ï¼ˆåŸºäºèŠ‚ç‚¹è¿›è¡Œå¯¹æ¯”ï¼‰\nå…ƒç´ æ¯”å¯¹ä¸»è¦å‘ç”Ÿåœ¨åŒå±‚çº§ä¸­ï¼Œé€šè¿‡æ ‡è®°èŠ‚ç‚¹æ“ä½œç”Ÿæˆè¡¥ä¸ã€‚èŠ‚ç‚¹æ“ä½œåŒ…å«äº†æ’å…¥ã€ç§»åŠ¨ã€åˆ é™¤ç­‰ã€‚å…¶ä¸­èŠ‚ç‚¹é‡æ–°æ’åºåŒæ—¶æ¶‰åŠæ’å…¥ã€ç§»åŠ¨ã€åˆ é™¤ä¸‰ä¸ªæ“ä½œï¼Œæ‰€ä»¥æ•ˆç‡æ¶ˆè€—æœ€å¤§ï¼Œæ­¤æ—¶ç­–ç•¥ä¸‰èµ·åˆ°äº†è‡³å…³é‡è¦çš„ä½œç”¨ã€‚é€šè¿‡æ ‡è®° key çš„æ–¹å¼ï¼ŒReact å¯ä»¥ç›´æ¥ç§»åŠ¨ DOM èŠ‚ç‚¹ï¼Œé™ä½å†…è€—ã€‚\n3. React key æ˜¯å¹²å˜›ç”¨çš„ ä¸ºä»€ä¹ˆè¦åŠ ï¼Ÿkey ä¸»è¦æ˜¯è§£å†³å“ªä¸€ç±»é—®é¢˜çš„Keys æ˜¯ React ç”¨äºè¿½è¸ªå“ªäº›åˆ—è¡¨ä¸­å…ƒç´ è¢«ä¿®æ”¹ã€è¢«æ·»åŠ æˆ–è€…è¢«ç§»é™¤çš„è¾…åŠ©æ ‡è¯†ã€‚åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä¿è¯æŸä¸ªå…ƒç´ çš„ key åœ¨å…¶åŒçº§å…ƒç´ ä¸­å…·æœ‰å”¯ä¸€æ€§ã€‚\nåœ¨ React Diff ç®—æ³•ä¸­ React ä¼šå€ŸåŠ©å…ƒç´ çš„ Key å€¼æ¥åˆ¤æ–­è¯¥å…ƒç´ æ˜¯æ–°è¿‘åˆ›å»ºçš„è¿˜æ˜¯è¢«ç§»åŠ¨è€Œæ¥çš„å…ƒç´ ï¼Œä»è€Œå‡å°‘ä¸å¿…è¦çš„å…ƒç´ é‡æ¸²æŸ“æ­¤å¤–ï¼ŒReact è¿˜éœ€è¦å€ŸåŠ© Key å€¼æ¥åˆ¤æ–­å…ƒç´ ä¸æœ¬åœ°çŠ¶æ€çš„å…³è”å…³ç³»ã€‚\næ³¨æ„äº‹é¡¹ï¼š\n\nkeyå€¼ä¸€å®šè¦å’Œå…·ä½“çš„å…ƒç´ â€”ä¸€å¯¹åº”ï¼›\nå°½é‡ä¸è¦ç”¨æ•°ç»„çš„indexå»ä½œä¸ºkeyï¼›\nä¸è¦åœ¨renderçš„æ—¶å€™ç”¨éšæœºæ•°æˆ–è€…å…¶ä»–æ“ä½œç»™å…ƒç´ åŠ ä¸Šä¸ç¨³å®šçš„keyï¼Œè¿™æ ·é€ æˆçš„æ€§èƒ½å¼€é”€æ¯”ä¸åŠ keyçš„æƒ…å†µä¸‹æ›´ç³Ÿç³•ã€‚\n\n4. è™šæ‹Ÿ DOM çš„å¼•å…¥ä¸ç›´æ¥æ“ä½œåŸç”Ÿ DOM ç›¸æ¯”ï¼Œå“ªä¸€ä¸ªæ•ˆç‡æ›´é«˜ï¼Œä¸ºä»€ä¹ˆè™šæ‹ŸDOMç›¸å¯¹åŸç”Ÿçš„DOMä¸ä¸€å®šæ˜¯æ•ˆç‡æ›´é«˜ï¼Œå¦‚æœåªä¿®æ”¹ä¸€ä¸ªæŒ‰é’®çš„æ–‡æ¡ˆï¼Œé‚£ä¹ˆè™šæ‹Ÿ DOM çš„æ“ä½œæ— è®ºå¦‚ä½•éƒ½ä¸å¯èƒ½æ¯”çœŸå®çš„ DOM æ“ä½œæ›´å¿«ã€‚åœ¨é¦–æ¬¡æ¸²æŸ“å¤§é‡DOMæ—¶ï¼Œç”±äºå¤šäº†ä¸€å±‚è™šæ‹ŸDOMçš„è®¡ç®—ï¼Œè™šæ‹ŸDOMä¹Ÿä¼šæ¯”innerHTMLæ’å…¥æ…¢ã€‚å®ƒèƒ½ä¿è¯æ€§èƒ½ä¸‹é™ï¼Œåœ¨çœŸå®DOMæ“ä½œçš„æ—¶å€™è¿›è¡Œé’ˆå¯¹æ€§çš„ä¼˜åŒ–æ—¶ï¼Œè¿˜æ˜¯æ›´å¿«çš„ã€‚æ‰€ä»¥è¦æ ¹æ®å…·ä½“çš„åœºæ™¯è¿›è¡Œæ¢è®¨ã€‚\nåœ¨æ•´ä¸ª DOM æ“ä½œçš„æ¼”åŒ–è¿‡ç¨‹ä¸­ï¼Œå…¶å®ä¸»è¦çŸ›ç›¾å¹¶ä¸åœ¨äºæ€§èƒ½ï¼Œè€Œåœ¨äºå¼€å‘è€…å†™å¾—çˆ½ä¸çˆ½ï¼Œåœ¨äºç ”å‘ä½“éªŒ&#x2F;ç ”å‘æ•ˆç‡ã€‚è™šæ‹Ÿ DOM ä¸æ˜¯åˆ«çš„ï¼Œæ­£æ˜¯å‰ç«¯å¼€å‘ä»¬ä¸ºäº†è¿½æ±‚æ›´å¥½çš„ç ”å‘ä½“éªŒå’Œç ”å‘æ•ˆç‡è€Œåˆ›é€ å‡ºæ¥çš„é«˜é˜¶äº§ç‰©ã€‚è™šæ‹Ÿ DOM å¹¶ä¸ä¸€å®šä¼šå¸¦æ¥æ›´å¥½çš„æ€§èƒ½ï¼ŒReact å®˜æ–¹ä¹Ÿä»æ¥æ²¡æœ‰æŠŠè™šæ‹Ÿ DOM ä½œä¸ºæ€§èƒ½å±‚é¢çš„å–ç‚¹å¯¹å¤–è¾“å‡ºè¿‡ã€‚è™šæ‹Ÿ DOM çš„ä¼˜è¶Šä¹‹å¤„åœ¨äºï¼Œå®ƒèƒ½å¤Ÿåœ¨æä¾›æ›´çˆ½ã€æ›´é«˜æ•ˆçš„ç ”å‘æ¨¡å¼ï¼ˆä¹Ÿå°±æ˜¯å‡½æ•°å¼çš„ UI ç¼–ç¨‹æ–¹å¼ï¼‰çš„åŒæ—¶ï¼Œä»ç„¶ä¿æŒä¸€ä¸ªè¿˜ä¸é”™çš„æ€§èƒ½ã€‚\n5. React ä¸ Vue çš„ diff ç®—æ³•æœ‰ä½•ä¸åŒï¼Ÿdiff ç®—æ³•æ˜¯æŒ‡ç”Ÿæˆæ›´æ–°è¡¥ä¸çš„æ–¹å¼ï¼Œä¸»è¦åº”ç”¨äºè™šæ‹Ÿ DOM æ ‘å˜åŒ–åï¼Œæ›´æ–°çœŸå® DOMã€‚æ‰€ä»¥ diff ç®—æ³•ä¸€å®šå­˜åœ¨è¿™æ ·ä¸€ä¸ªè¿‡ç¨‹ï¼šè§¦å‘æ›´æ–° â†’ ç”Ÿæˆè¡¥ä¸ â†’ åº”ç”¨è¡¥ä¸ã€‚\nReact çš„ diff ç®—æ³•ï¼Œè§¦å‘æ›´æ–°çš„æ—¶æœºä¸»è¦åœ¨ state å˜åŒ–ä¸ hooks è°ƒç”¨ä¹‹åã€‚æ­¤æ—¶è§¦å‘è™šæ‹Ÿ DOM æ ‘å˜æ›´éå†ï¼Œé‡‡ç”¨äº†æ·±åº¦ä¼˜å…ˆéå†ç®—æ³•ã€‚ä½†ä¼ ç»Ÿçš„éå†æ–¹å¼ï¼Œæ•ˆç‡è¾ƒä½ã€‚ä¸ºäº†ä¼˜åŒ–æ•ˆç‡ï¼Œä½¿ç”¨äº†åˆ†æ²»çš„æ–¹å¼ã€‚å°†å•ä¸€èŠ‚ç‚¹æ¯”å¯¹è½¬åŒ–ä¸ºäº† 3 ç§ç±»å‹èŠ‚ç‚¹çš„æ¯”å¯¹ï¼Œåˆ†åˆ«æ˜¯æ ‘ã€ç»„ä»¶åŠå…ƒç´ ï¼Œä»¥æ­¤æå‡æ•ˆç‡ã€‚\n\næ ‘æ¯”å¯¹ï¼šç”±äºç½‘é¡µè§†å›¾ä¸­è¾ƒå°‘æœ‰è·¨å±‚çº§èŠ‚ç‚¹ç§»åŠ¨ï¼Œä¸¤æ ªè™šæ‹Ÿ DOM æ ‘åªå¯¹åŒä¸€å±‚æ¬¡çš„èŠ‚ç‚¹è¿›è¡Œæ¯”è¾ƒã€‚\nç»„ä»¶æ¯”å¯¹ï¼šå¦‚æœç»„ä»¶æ˜¯åŒä¸€ç±»å‹ï¼Œåˆ™è¿›è¡Œæ ‘æ¯”å¯¹ï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™ç›´æ¥æ”¾å…¥åˆ°è¡¥ä¸ä¸­ã€‚\nå…ƒç´ æ¯”å¯¹ï¼šä¸»è¦å‘ç”Ÿåœ¨åŒå±‚çº§ä¸­ï¼Œé€šè¿‡æ ‡è®°èŠ‚ç‚¹æ“ä½œç”Ÿæˆè¡¥ä¸ï¼ŒèŠ‚ç‚¹æ“ä½œå¯¹åº”çœŸå®çš„ DOM å‰ªè£æ“ä½œã€‚\n\nä»¥ä¸Šæ˜¯ç»å…¸çš„ React diff ç®—æ³•å†…å®¹ã€‚è‡ª React 16 èµ·ï¼Œå¼•å…¥äº† Fiber æ¶æ„ã€‚ä¸ºäº†ä½¿æ•´ä¸ªæ›´æ–°è¿‡ç¨‹å¯éšæ—¶æš‚åœæ¢å¤ï¼ŒèŠ‚ç‚¹ä¸æ ‘åˆ†åˆ«é‡‡ç”¨äº† FiberNode ä¸ FiberTree è¿›è¡Œé‡æ„ã€‚fiberNode ä½¿ç”¨äº†åŒé“¾è¡¨çš„ç»“æ„ï¼Œå¯ä»¥ç›´æ¥æ‰¾åˆ°å…„å¼ŸèŠ‚ç‚¹ä¸å­èŠ‚ç‚¹ã€‚æ•´ä¸ªæ›´æ–°è¿‡ç¨‹ç”± current ä¸ workInProgress ä¸¤æ ªæ ‘åŒç¼“å†²å®Œæˆã€‚workInProgress æ›´æ–°å®Œæˆåï¼Œå†é€šè¿‡ä¿®æ”¹ current ç›¸å…³æŒ‡é’ˆæŒ‡å‘æ–°èŠ‚ç‚¹ã€‚\nVue çš„æ•´ä½“ diff ç­–ç•¥ä¸ React å¯¹é½ï¼Œè™½ç„¶ç¼ºä¹æ—¶é—´åˆ‡ç‰‡èƒ½åŠ›ï¼Œä½†è¿™å¹¶ä¸æ„å‘³ç€ Vue çš„æ€§èƒ½æ›´å·®ï¼Œå› ä¸ºåœ¨ Vue 3 åˆæœŸå¼•å…¥è¿‡ï¼ŒåæœŸå› ä¸ºæ”¶ç›Šä¸é«˜ç§»é™¤æ‰äº†ã€‚é™¤äº†é«˜å¸§ç‡åŠ¨ç”»ï¼Œåœ¨ Vue ä¸­å…¶ä»–çš„åœºæ™¯å‡ ä¹éƒ½å¯ä»¥ä½¿ç”¨é˜²æŠ–å’ŒèŠ‚æµå»æé«˜å“åº”æ€§èƒ½ã€‚\nä¹ã€å…¶ä»–1. Reactç»„ä»¶å‘½åæ¨èçš„æ–¹å¼æ˜¯å“ªä¸ªï¼Ÿé€šè¿‡å¼•ç”¨è€Œä¸æ˜¯ä½¿ç”¨æ¥å‘½åç»„ä»¶displayNameã€‚\nä½¿ç”¨displayNameå‘½åç»„ä»¶ï¼š\nexport default React.createClass(&#123;  displayName: &#39;TodoApp&#39;,  &#x2F;&#x2F; ...&#125;)\nå¤åˆ¶ä»£ç \n\nReactæ¨èçš„æ–¹æ³•ï¼š\nexport default class TodoApp extends React.Component &#123;  &#x2F;&#x2F; ...&#125;\nå¤åˆ¶ä»£ç \n\n2. react æœ€æ–°ç‰ˆæœ¬è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Œå¢åŠ äº†å“ªäº›ä¸œè¥¿React 16.xçš„ä¸‰å¤§æ–°ç‰¹æ€§ Time Slicingã€Suspenseã€ hooks\n\nTime Slicingï¼ˆè§£å†³CPUé€Ÿåº¦é—®é¢˜ï¼‰ä½¿å¾—åœ¨æ‰§è¡Œä»»åŠ¡çš„æœŸé—´å¯ä»¥éšæ—¶æš‚åœï¼Œè·‘å»å¹²åˆ«çš„äº‹æƒ…ï¼Œè¿™ä¸ªç‰¹æ€§ä½¿å¾—reactèƒ½åœ¨æ€§èƒ½æå…¶å·®çš„æœºå™¨è·‘æ—¶ï¼Œä»ç„¶ä¿æŒæœ‰è‰¯å¥½çš„æ€§èƒ½\nSuspense ï¼ˆè§£å†³ç½‘ç»œIOé—®é¢˜ï¼‰ å’Œlazyé…åˆï¼Œå®ç°å¼‚æ­¥åŠ è½½ç»„ä»¶ã€‚ èƒ½æš‚åœå½“å‰ç»„ä»¶çš„æ¸²æŸ“ï¼Œ å½“å®ŒæˆæŸä»¶äº‹ä»¥åå†ç»§ç»­æ¸²æŸ“ï¼Œè§£å†³ä»reactå‡ºç”Ÿåˆ°ç°åœ¨éƒ½å­˜åœ¨çš„ã€Œå¼‚æ­¥å‰¯ä½œç”¨ã€çš„é—®é¢˜ï¼Œè€Œä¸”è§£å†³å¾—éçš„ä¼˜é›…ï¼Œä½¿ç”¨çš„æ˜¯ Tå¼‚æ­¥ä½†æ˜¯åŒæ­¥çš„å†™æ³•ï¼Œè¿™æ˜¯æœ€å¥½çš„è§£å†³å¼‚æ­¥é—®é¢˜çš„æ–¹å¼\næä¾›äº†ä¸€ä¸ªå†…ç½®å‡½æ•°componentDidCatchï¼Œå½“æœ‰é”™è¯¯å‘ç”Ÿæ—¶ï¼Œå¯ä»¥å‹å¥½åœ°å±•ç¤º fallback ç»„ä»¶; å¯ä»¥æ•æ‰åˆ°å®ƒçš„å­å…ƒç´ ï¼ˆåŒ…æ‹¬åµŒå¥—å­å…ƒç´ ï¼‰æŠ›å‡ºçš„å¼‚å¸¸; å¯ä»¥å¤ç”¨é”™è¯¯ç»„ä»¶ã€‚\n\nï¼ˆ1ï¼‰React16.8 åŠ å…¥hooksï¼Œè®©Reactå‡½æ•°å¼ç»„ä»¶æ›´åŠ çµæ´»ï¼Œhooksä¹‹å‰ï¼ŒReactå­˜åœ¨å¾ˆå¤šé—®é¢˜ï¼š\n\nåœ¨ç»„ä»¶é—´å¤ç”¨çŠ¶æ€é€»è¾‘å¾ˆéš¾\nå¤æ‚ç»„ä»¶å˜å¾—éš¾ä»¥ç†è§£ï¼Œé«˜é˜¶ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶çš„åµŒå¥—è¿‡æ·±ã€‚\nclassç»„ä»¶çš„thisæŒ‡å‘é—®é¢˜\néš¾ä»¥è®°å¿†çš„ç”Ÿå‘½å‘¨æœŸ\n\nhookså¾ˆå¥½çš„è§£å†³äº†ä¸Šè¿°é—®é¢˜ï¼Œhooksæä¾›äº†å¾ˆå¤šæ–¹æ³•\n\nuseState è¿”å›æœ‰çŠ¶æ€å€¼ï¼Œä»¥åŠæ›´æ–°è¿™ä¸ªçŠ¶æ€å€¼çš„å‡½æ•°\nuseEffect æ¥å—åŒ…å«å‘½ä»¤å¼ï¼Œå¯èƒ½æœ‰å‰¯ä½œç”¨ä»£ç çš„å‡½æ•°ã€‚\nuseContext æ¥å—ä¸Šä¸‹æ–‡å¯¹è±¡ï¼ˆä» React.createContextè¿”å›çš„å€¼ï¼‰å¹¶è¿”å›å½“å‰ä¸Šä¸‹æ–‡å€¼ï¼Œ\nuseReducer useState çš„æ›¿ä»£æ–¹æ¡ˆã€‚æ¥å—ç±»å‹ä¸º ï¼ˆstateï¼Œactionï¼‰&#x3D;&gt; newStateçš„reducerï¼Œå¹¶è¿”å›ä¸dispatchæ–¹æ³•é…å¯¹çš„å½“å‰çŠ¶æ€ã€‚\nuseCalLback è¿”å›ä¸€ä¸ªå›å¿†çš„memoizedç‰ˆæœ¬ï¼Œè¯¥ç‰ˆæœ¬ä»…åœ¨å…¶ä¸­ä¸€ä¸ªè¾“å…¥å‘ç”Ÿæ›´æ”¹æ—¶æ‰ä¼šæ›´æ”¹ã€‚çº¯å‡½æ•°çš„è¾“å…¥è¾“å‡ºç¡®å®šæ€§ o useMemo çº¯çš„ä¸€ä¸ªè®°å¿†å‡½æ•° o useRef è¿”å›ä¸€ä¸ªå¯å˜çš„refå¯¹è±¡ï¼Œå…¶Current å±æ€§è¢«åˆå§‹åŒ–ä¸ºä¼ é€’çš„å‚æ•°ï¼Œè¿”å›çš„ ref å¯¹è±¡åœ¨ç»„ä»¶çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…ä¿æŒä¸å˜ã€‚\nuseImperativeMethods è‡ªå®šä¹‰ä½¿ç”¨refæ—¶å…¬å¼€ç»™çˆ¶ç»„ä»¶çš„å®ä¾‹å€¼\nuseMutationEffect æ›´æ–°å…„å¼Ÿç»„ä»¶ä¹‹å‰ï¼Œå®ƒåœ¨Reactæ‰§è¡Œå…¶DOMæ”¹å˜çš„åŒä¸€é˜¶æ®µåŒæ­¥è§¦å‘\nuseLayoutEffect DOMæ”¹å˜ååŒæ­¥è§¦å‘ã€‚ä½¿ç”¨å®ƒæ¥ä»DOMè¯»å–å¸ƒå±€å¹¶åŒæ­¥é‡æ–°æ¸²æŸ“\n\nï¼ˆ2ï¼‰React16.9\n\né‡å‘½å Unsafe çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚æ–°çš„ UNSAFE_å‰ç¼€å°†æœ‰åŠ©äºåœ¨ä»£ç  review å’Œ debug æœŸé—´ï¼Œä½¿è¿™äº›æœ‰é—®é¢˜çš„å­—æ ·æ›´çªå‡º\nåºŸå¼ƒ javascrip:å½¢å¼çš„ URLã€‚ä»¥javascript:å¼€å¤´çš„URL éå¸¸å®¹æ˜“é­å—æ”»å‡»ï¼Œé€ æˆå®‰å…¨æ¼æ´ã€‚\nåºŸå¼ƒâ€Factoryâ€ç»„ä»¶ã€‚ å·¥å‚ç»„ä»¶ä¼šå¯¼è‡´ React å˜å¤§ä¸”å˜æ…¢ã€‚\nactï¼ˆï¼‰ä¹Ÿæ”¯æŒå¼‚æ­¥å‡½æ•°ï¼Œå¹¶ä¸”ä½ å¯ä»¥åœ¨è°ƒç”¨å®ƒæ—¶ä½¿ç”¨ awaitã€‚\nä½¿ç”¨ &lt;React.ProfiLer&gt; è¿›è¡Œæ€§èƒ½è¯„ä¼°ã€‚åœ¨è¾ƒå¤§çš„åº”ç”¨ä¸­è¿½è¸ªæ€§èƒ½å›å½’å¯èƒ½ä¼šå¾ˆæ–¹ä¾¿\n\nï¼ˆ3ï¼‰React16.13.0\n\næ”¯æŒåœ¨æ¸²æŸ“æœŸé—´è°ƒç”¨setStateï¼Œä½†ä»…é€‚ç”¨äºåŒä¸€ç»„ä»¶\nå¯æ£€æµ‹å†²çªçš„æ ·å¼è§„åˆ™å¹¶è®°å½•è­¦å‘Š\nåºŸå¼ƒ unstable_createPortalï¼Œä½¿ç”¨CreatePortal\nå°†ç»„ä»¶å †æ ˆæ·»åŠ åˆ°å…¶å¼€å‘è­¦å‘Šä¸­ï¼Œä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿéš”ç¦»bugå¹¶è°ƒè¯•å…¶ç¨‹åºï¼Œè¿™å¯ä»¥æ¸…æ¥šåœ°è¯´æ˜é—®é¢˜æ‰€åœ¨ï¼Œå¹¶æ›´å¿«åœ°å®šä½å’Œä¿®å¤é”™è¯¯ã€‚\n\n3. react å®ç°ä¸€ä¸ªå…¨å±€çš„ dialogimportÂ React, &#123; Component &#125; fromÂ &#39;react&#39;;\nimportÂ &#123; is, fromJS &#125; fromÂ &#39;immutable&#39;;\nimportÂ ReactDOM fromÂ &#39;react-dom&#39;;\nimportÂ ReactCSSTransitionGroup fromÂ &#39;react-addons-css-transition-group&#39;;\nimportÂ &#39;.&#x2F;dialog.css&#39;;\nletÂ defaultState &#x3D; &#123;\nÂ Â alertStatus:false,\nÂ Â alertTip:&quot;æç¤º&quot;,\nÂ Â closeDialog:function()&#123;&#125;,\nÂ Â childs:&#39;&#39;\n&#125;\nclassÂ DialogÂ extendsÂ Component&#123;\nÂ Â state &#x3D; &#123;\nÂ Â Â Â ...defaultState\nÂ Â &#125;;\nÂ Â &#x2F;&#x2F; cssåŠ¨ç”»ç»„ä»¶è®¾ç½®ä¸ºç›®æ ‡ç»„ä»¶\nÂ Â FirstChild &#x3D; props &#x3D;&gt; &#123;\nÂ Â Â Â const childrenArray &#x3D; React.Children.toArray(props.children);\nÂ Â Â Â returnÂ childrenArray[0] ||Â null;\nÂ Â &#125;\nÂ Â &#x2F;&#x2F;æ‰“å¼€å¼¹çª—\nÂ Â open &#x3D;(options)&#x3D;&gt;&#123;\nÂ Â Â Â options &#x3D; options || &#123;&#125;;\nÂ Â Â Â options.alertStatus &#x3D;Â true;\nÂ Â Â Â varÂ props &#x3D; options.props || &#123;&#125;;\nÂ Â Â Â varÂ childs &#x3D;Â this.renderChildren(props,options.childrens) ||Â &#39;&#39;;\nÂ Â Â Â console.log(childs);\nÂ Â Â Â this.setState(&#123;\nÂ Â Â Â Â Â ...defaultState,\nÂ Â Â Â Â Â ...options,\nÂ Â Â Â Â Â childs\nÂ Â Â Â &#125;)\nÂ Â &#125;\nÂ Â &#x2F;&#x2F;å…³é—­å¼¹çª—\nÂ Â close()&#123;\nÂ Â Â Â this.state.closeDialog();\nÂ Â Â Â this.setState(&#123;\nÂ Â Â Â Â Â ...defaultState\nÂ Â Â Â &#125;)\nÂ Â &#125;\nÂ Â renderChildren(props,childrens) &#123;\nÂ Â Â Â &#x2F;&#x2F;éå†æ‰€æœ‰å­ç»„ä»¶\nÂ Â Â Â varÂ childs &#x3D; [];\nÂ Â Â Â childrens &#x3D; childrens || [];\nÂ Â Â Â varÂ ps &#x3D; &#123;\nÂ Â Â Â Â Â Â Â ...props,Â Â &#x2F;&#x2F;ç»™å­ç»„ä»¶ç»‘å®šprops\nÂ Â Â Â Â Â Â Â _close:this.closeÂ Â &#x2F;&#x2F;ç»™å­ç»„ä»¶ä¹Ÿç»‘å®šä¸€ä¸ªå…³é—­å¼¹çª—çš„äº‹ä»¶Â Â Â Â \nÂ Â Â Â Â Â Â &#125;;\nÂ Â Â Â childrens.forEach((currentItem,index) &#x3D;&gt; &#123;\nÂ Â Â Â Â Â Â Â childs.push(React.createElement(\nÂ Â Â Â Â Â Â Â Â Â Â Â currentItem,\nÂ Â Â Â Â Â Â Â Â Â Â Â &#123;\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ...ps,\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â key:index\nÂ Â Â Â Â Â Â Â Â Â Â Â &#125;\nÂ Â Â Â Â Â Â Â ));\nÂ Â Â Â &#125;)\nÂ Â Â Â returnÂ childs;\nÂ Â &#125;\nÂ Â shouldComponentUpdate(nextProps, nextState)&#123;\nÂ Â Â Â returnÂ !is(fromJS(this.props), fromJS(nextProps)) || !is(fromJS(this.state), fromJS(nextState))\nÂ Â &#125;\nÂ Â Â \nÂ Â render()&#123;\nÂ Â Â Â returnÂ (\nÂ Â Â Â Â Â &lt;ReactCSSTransitionGroup\nÂ Â Â Â Â Â Â Â component&#x3D;&#123;this.FirstChild&#125;\nÂ Â Â Â Â Â Â Â transitionName&#x3D;&#39;hide&#39;\nÂ Â Â Â Â Â Â Â transitionEnterTimeout&#x3D;&#123;300&#125;\nÂ Â Â Â Â Â Â Â transitionLeaveTimeout&#x3D;&#123;300&#125;&gt;\nÂ Â Â Â Â Â Â Â &lt;div className&#x3D;&quot;dialog-con&quot;Â style&#x3D;&#123;this.state.alertStatus? &#123;display:&#39;block&#39;&#125;:&#123;display:&#39;none&#39;&#125;&#125;&gt;\nÂ Â Â Â Â Â Â Â Â Â Â Â &#123;this.state.childs&#125;\nÂ Â Â Â Â Â Â Â &lt;&#x2F;div&gt;\nÂ Â Â Â Â Â &lt;&#x2F;ReactCSSTransitionGroup&gt;\nÂ Â Â Â );\nÂ Â &#125;\n&#125;\nletÂ div &#x3D; document.createElement(&#39;div&#39;);\nletÂ props &#x3D; &#123;\nÂ Â Â \n&#125;;\ndocument.body.appendChild(div);\nletÂ Box &#x3D; ReactD\nå¤åˆ¶ä»£ç \n\nå­ç±»ï¼š\n&#x2F;&#x2F;å­ç±»jsx\nimportÂ React, &#123; Component &#125; fromÂ &#39;react&#39;;\nclassÂ ChildÂ extendsÂ Component &#123;\nÂ Â Â Â constructor(props)&#123;\nÂ Â Â Â Â Â Â Â super(props);\nÂ Â Â Â Â Â Â Â this.state &#x3D; &#123;date:Â newÂ Date()&#125;;\nÂ Â &#125;\nÂ Â showValue&#x3D;()&#x3D;&gt;&#123;\nÂ Â Â Â this.props.showValue &amp;&amp;Â this.props.showValue()\nÂ Â &#125;\nÂ Â render() &#123;\nÂ Â Â Â returnÂ (\nÂ Â Â Â Â Â &lt;div className&#x3D;&quot;Child&quot;&gt;\nÂ Â Â Â Â Â Â Â &lt;div className&#x3D;&quot;content&quot;&gt;\nÂ Â Â Â Â Â Â Â Â Â Â Child\nÂ Â Â Â Â Â Â Â Â Â Â &lt;button onClick&#x3D;&#123;this.showValue&#125;&gt;è°ƒç”¨çˆ¶çš„æ–¹æ³•&lt;&#x2F;button&gt;\nÂ Â Â Â Â Â Â Â &lt;&#x2F;div&gt;\nÂ Â Â Â Â Â &lt;&#x2F;div&gt;\nÂ Â Â Â );\nÂ Â &#125;\n&#125;\nexportÂ defaultÂ Child;\nå¤åˆ¶ä»£ç \n\ncssï¼š\n.dialog-con&#123;\nÂ Â Â Â position: fixed;\nÂ Â Â Â top: 0;\nÂ Â Â Â left: 0;\nÂ Â Â Â width: 100%;\nÂ Â Â Â height: 100%;\nÂ Â Â Â background: rgba(0, 0, 0, 0.3);\n&#125;\nå¤åˆ¶ä»£ç \n\n4. React æ•°æ®æŒä¹…åŒ–æœ‰ä»€ä¹ˆå®è·µå—ï¼Ÿå°è£…æ•°æ®æŒä¹…åŒ–ç»„ä»¶ï¼š\nã€‘let storage&#x3D;&#123;\n    &#x2F;&#x2F; å¢åŠ \n    set(key, value)&#123;\n        localStorage.setItem(key, JSON.stringify(value));\n    &#125;,\n    &#x2F;&#x2F; è·å–\n    get(key)&#123;\n        return JSON.parse(localStorage.getItem(key));\n    &#125;,\n    &#x2F;&#x2F; åˆ é™¤\n    remove(key)&#123;\n        localStorage.removeItem(key);\n    &#125;\n&#125;;\nexport default Storage;\nå¤åˆ¶ä»£ç \n\nåœ¨Reacté¡¹ç›®ä¸­ï¼Œé€šè¿‡reduxå­˜å‚¨å…¨å±€æ•°æ®æ—¶ï¼Œä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœç”¨æˆ·åˆ·æ–°äº†ç½‘é¡µï¼Œé‚£ä¹ˆé€šè¿‡reduxå­˜å‚¨çš„å…¨å±€æ•°æ®å°±ä¼šè¢«å…¨éƒ¨æ¸…ç©ºï¼Œæ¯”å¦‚ç™»å½•ä¿¡æ¯ç­‰ã€‚è¿™æ—¶å°±ä¼šæœ‰å…¨å±€æ•°æ®æŒä¹…åŒ–å­˜å‚¨çš„éœ€æ±‚ã€‚é¦–å…ˆæƒ³åˆ°çš„å°±æ˜¯localStorageï¼ŒlocalStorageæ˜¯æ²¡æœ‰æ—¶é—´é™åˆ¶çš„æ•°æ®å­˜å‚¨ï¼Œå¯ä»¥é€šè¿‡å®ƒæ¥å®ç°æ•°æ®çš„æŒä¹…åŒ–å­˜å‚¨ã€‚\nä½†æ˜¯åœ¨å·²ç»ä½¿ç”¨reduxæ¥ç®¡ç†å’Œå­˜å‚¨å…¨å±€æ•°æ®çš„åŸºç¡€ä¸Šï¼Œå†å»ä½¿ç”¨localStorageæ¥è¯»å†™æ•°æ®ï¼Œè¿™æ ·ä¸ä»…æ˜¯å·¥ä½œé‡å·¨å¤§ï¼Œè¿˜å®¹æ˜“å‡ºé”™ã€‚é‚£ä¹ˆæœ‰æ²¡æœ‰ç»“åˆreduxæ¥è¾¾åˆ°æŒä¹…æ•°æ®å­˜å‚¨åŠŸèƒ½çš„æ¡†æ¶å‘¢ï¼Ÿå½“ç„¶ï¼Œå®ƒå°±æ˜¯redux-persistã€‚redux-persistä¼šå°†reduxçš„storeä¸­çš„æ•°æ®ç¼“å­˜åˆ°æµè§ˆå™¨çš„localStorageä¸­ã€‚å…¶ä½¿ç”¨æ­¥éª¤å¦‚ä¸‹ï¼š\nï¼ˆ1ï¼‰é¦–å…ˆè¦å®‰è£…redux-persistï¼š\nnpm i redux-persist\nå¤åˆ¶ä»£ç \n\nï¼ˆ2ï¼‰å¯¹äºreducerå’Œactionçš„å¤„ç†ä¸å˜ï¼Œåªéœ€ä¿®æ”¹storeçš„ç”Ÿæˆä»£ç ï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š\nimport &#123;createStore&#125; from &#39;redux&#39;\nimport reducers from &#39;..&#x2F;reducers&#x2F;index&#39;\nimport &#123;persistStore, persistReducer&#125; from &#39;redux-persist&#39;;\nimport storage from &#39;redux-persist&#x2F;lib&#x2F;storage&#39;;\nimport autoMergeLevel2 from &#39;redux-persist&#x2F;lib&#x2F;stateReconciler&#x2F;autoMergeLevel2&#39;;\nconst persistConfig &#x3D; &#123;\n    key: &#39;root&#39;,\n    storage: storage,\n    stateReconciler: autoMergeLevel2 &#x2F;&#x2F; æŸ¥çœ‹ &#39;Merge Process&#39; éƒ¨åˆ†çš„å…·ä½“æƒ…å†µ\n&#125;;\nconst myPersistReducer &#x3D; persistReducer(persistConfig, reducers)\nconst store &#x3D; createStore(myPersistReducer)\nexport const persistor &#x3D; persistStore(store)\nexport default store\nå¤åˆ¶ä»£ç \n\nï¼ˆ3ï¼‰åœ¨index.jsä¸­ï¼Œå°†PersistGateæ ‡ç­¾ä½œä¸ºç½‘é¡µå†…å®¹çš„çˆ¶æ ‡ç­¾ï¼š\nimport React from &#39;react&#39;;\nimport ReactDOM from &#39;react-dom&#39;;\nimport &#123;Provider&#125; from &#39;react-redux&#39;\nimport store from &#39;.&#x2F;redux&#x2F;store&#x2F;store&#39;\nimport &#123;persistor&#125; from &#39;.&#x2F;redux&#x2F;store&#x2F;store&#39;\nimport &#123;PersistGate&#125; from &#39;redux-persist&#x2F;lib&#x2F;integration&#x2F;react&#39;;\nReactDOM.render(&lt;Provider store&#x3D;&#123;store&#125;&gt;\n            &lt;PersistGate loading&#x3D;&#123;null&#125; persistor&#x3D;&#123;persistor&#125;&gt;\n                &#123;&#x2F;*ç½‘é¡µå†…å®¹*&#x2F;&#125;\n            &lt;&#x2F;PersistGate&gt;\n        &lt;&#x2F;Provider&gt;, document.getElementById(&#39;root&#39;));\nå¤åˆ¶ä»£ç \n\nè¿™å°±å®Œæˆäº†é€šè¿‡redux-persistå®ç°ReactæŒä¹…åŒ–æœ¬åœ°æ•°æ®å­˜å‚¨çš„ç®€å•åº”ç”¨ã€‚\n5. å¯¹ React å’Œ Vue çš„ç†è§£ï¼Œå®ƒä»¬çš„å¼‚åŒç›¸ä¼¼ä¹‹å¤„ï¼š\n\néƒ½å°†æ³¨æ„åŠ›é›†ä¸­ä¿æŒåœ¨æ ¸å¿ƒåº“ï¼Œè€Œå°†å…¶ä»–åŠŸèƒ½å¦‚è·¯ç”±å’Œå…¨å±€çŠ¶æ€ç®¡ç†äº¤ç»™ç›¸å…³çš„åº“\néƒ½æœ‰è‡ªå·±çš„æ„å»ºå·¥å…·ï¼Œèƒ½è®©ä½ å¾—åˆ°ä¸€ä¸ªæ ¹æ®æœ€ä½³å®è·µè®¾ç½®çš„é¡¹ç›®æ¨¡æ¿ã€‚\néƒ½ä½¿ç”¨äº†Virtual DOMï¼ˆè™šæ‹ŸDOMï¼‰æé«˜é‡ç»˜æ€§èƒ½\néƒ½æœ‰propsçš„æ¦‚å¿µï¼Œå…è®¸ç»„ä»¶é—´çš„æ•°æ®ä¼ é€’\néƒ½é¼“åŠ±ç»„ä»¶åŒ–åº”ç”¨ï¼Œå°†åº”ç”¨åˆ†æ‹†æˆä¸€ä¸ªä¸ªåŠŸèƒ½æ˜ç¡®çš„æ¨¡å—ï¼Œæé«˜å¤ç”¨æ€§\n\nä¸åŒä¹‹å¤„ï¼š\n1ï¼‰æ•°æ®æµ\nVueé»˜è®¤æ”¯æŒæ•°æ®åŒå‘ç»‘å®šï¼Œè€ŒReactä¸€ç›´æå€¡å•å‘æ•°æ®æµ\n2ï¼‰è™šæ‹ŸDOM\nVue2.xå¼€å§‹å¼•å…¥â€Virtual DOMâ€ï¼Œæ¶ˆé™¤äº†å’ŒReactåœ¨è¿™æ–¹é¢çš„å·®å¼‚ï¼Œä½†æ˜¯åœ¨å…·ä½“çš„ç»†èŠ‚è¿˜æ˜¯æœ‰å„è‡ªçš„ç‰¹ç‚¹ã€‚\n\nVueå®£ç§°å¯ä»¥æ›´å¿«åœ°è®¡ç®—å‡ºVirtual DOMçš„å·®å¼‚ï¼Œè¿™æ˜¯ç”±äºå®ƒåœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­ï¼Œä¼šè·Ÿè¸ªæ¯ä¸€ä¸ªç»„ä»¶çš„ä¾èµ–å…³ç³»ï¼Œä¸éœ€è¦é‡æ–°æ¸²æŸ“æ•´ä¸ªç»„ä»¶æ ‘ã€‚\nå¯¹äºReactè€Œè¨€ï¼Œæ¯å½“åº”ç”¨çš„çŠ¶æ€è¢«æ”¹å˜æ—¶ï¼Œå…¨éƒ¨å­ç»„ä»¶éƒ½ä¼šé‡æ–°æ¸²æŸ“ã€‚å½“ç„¶ï¼Œè¿™å¯ä»¥é€šè¿‡ PureComponent&#x2F;shouldComponentUpdateè¿™ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•æ¥è¿›è¡Œæ§åˆ¶ï¼Œä½†Vueå°†æ­¤è§†ä¸ºé»˜è®¤çš„ä¼˜åŒ–ã€‚\n\n3ï¼‰ç»„ä»¶åŒ–\nReactä¸Vueæœ€å¤§çš„ä¸åŒæ˜¯æ¨¡æ¿çš„ç¼–å†™ã€‚\n\nVueé¼“åŠ±å†™è¿‘ä¼¼å¸¸è§„HTMLçš„æ¨¡æ¿ã€‚å†™èµ·æ¥å¾ˆæ¥è¿‘æ ‡å‡† HTMLå…ƒç´ ï¼Œåªæ˜¯å¤šäº†ä¸€äº›å±æ€§ã€‚\nReactæ¨èä½ æ‰€æœ‰çš„æ¨¡æ¿é€šç”¨JavaScriptçš„è¯­æ³•æ‰©å±•â€”â€”JSXä¹¦å†™ã€‚\n\nå…·ä½“æ¥è®²ï¼šReactä¸­renderå‡½æ•°æ˜¯æ”¯æŒé—­åŒ…ç‰¹æ€§çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬importçš„ç»„ä»¶åœ¨renderä¸­å¯ä»¥ç›´æ¥è°ƒç”¨ã€‚ä½†æ˜¯åœ¨Vueä¸­ï¼Œç”±äºæ¨¡æ¿ä¸­ä½¿ç”¨çš„æ•°æ®éƒ½å¿…é¡»æŒ‚åœ¨ this ä¸Šè¿›è¡Œä¸€æ¬¡ä¸­è½¬ï¼Œæ‰€ä»¥ import å®Œç»„ä»¶ä¹‹åï¼Œè¿˜éœ€è¦åœ¨ components ä¸­å†å£°æ˜ä¸‹ã€‚\n4ï¼‰ç›‘å¬æ•°æ®å˜åŒ–çš„å®ç°åŸç†ä¸åŒ\n\nVue é€šè¿‡ getter&#x2F;setter ä»¥åŠä¸€äº›å‡½æ•°çš„åŠ«æŒï¼Œèƒ½ç²¾ç¡®çŸ¥é“æ•°æ®å˜åŒ–ï¼Œä¸éœ€è¦ç‰¹åˆ«çš„ä¼˜åŒ–å°±èƒ½è¾¾åˆ°å¾ˆå¥½çš„æ€§èƒ½\nReact é»˜è®¤æ˜¯é€šè¿‡æ¯”è¾ƒå¼•ç”¨çš„æ–¹å¼è¿›è¡Œçš„ï¼Œå¦‚æœä¸ä¼˜åŒ–ï¼ˆPureComponent&#x2F;shouldComponentUpdateï¼‰å¯èƒ½å¯¼è‡´å¤§é‡ä¸å¿…è¦çš„vDOMçš„é‡æ–°æ¸²æŸ“ã€‚è¿™æ˜¯å› ä¸º Vue ä½¿ç”¨çš„æ˜¯å¯å˜æ•°æ®ï¼Œè€ŒReactæ›´å¼ºè°ƒæ•°æ®çš„ä¸å¯å˜ã€‚\n\n5ï¼‰é«˜é˜¶ç»„ä»¶\nreactå¯ä»¥é€šè¿‡é«˜é˜¶ç»„ä»¶ï¼ˆHigher Order Componentsâ€“ HOCï¼‰æ¥æ‰©å±•ï¼Œè€Œvueéœ€è¦é€šè¿‡mixinsæ¥æ‰©å±•ã€‚\nåŸå› é«˜é˜¶ç»„ä»¶å°±æ˜¯é«˜é˜¶å‡½æ•°ï¼Œè€ŒReactçš„ç»„ä»¶æœ¬èº«å°±æ˜¯çº¯ç²¹çš„å‡½æ•°ï¼Œæ‰€ä»¥é«˜é˜¶å‡½æ•°å¯¹Reactæ¥è¯´æ˜“å¦‚åæŒã€‚ç›¸åVue.jsä½¿ç”¨HTMLæ¨¡æ¿åˆ›å»ºè§†å›¾ç»„ä»¶ï¼Œè¿™æ—¶æ¨¡æ¿æ— æ³•æœ‰æ•ˆçš„ç¼–è¯‘ï¼Œå› æ­¤Vueä¸é‡‡ç”¨HOCæ¥å®ç°ã€‚\n6ï¼‰æ„å»ºå·¥å…·\nä¸¤è€…éƒ½æœ‰è‡ªå·±çš„æ„å»ºå·¥å…·\n\nReact &#x3D;&#x3D;&gt; Create React APP\nVue &#x3D;&#x3D;&gt; vue-cli\n\n7ï¼‰è·¨å¹³å°\n\nReact &#x3D;&#x3D;&gt; React Native\nVue &#x3D;&#x3D;&gt; Weex\n\n6. å¯ä»¥ä½¿ç”¨TypeScriptå†™Reactåº”ç”¨å—ï¼Ÿæ€ä¹ˆæ“ä½œï¼Ÿï¼ˆ1ï¼‰å¦‚æœè¿˜æœªåˆ›å»º Create React App é¡¹ç›®\n\nç›´æ¥åˆ›å»ºä¸€ä¸ªå…·æœ‰ typescript çš„ Create React App é¡¹ç›®ï¼š\n\n npx create-react-app demo --typescript\nå¤åˆ¶ä»£ç \n\nï¼ˆ2ï¼‰å¦‚æœå·²ç»åˆ›å»ºäº†Â Create React App é¡¹ç›®ï¼Œéœ€è¦å°†Â typescript å¼•å…¥åˆ°å·²æœ‰é¡¹ç›®ä¸­\n\né€šè¿‡å‘½ä»¤å°† typescript å¼•å…¥é¡¹ç›®ï¼š\n\nnpm install --save typescript @types&#x2F;node @types&#x2F;react @types&#x2F;react-dom @types&#x2F;jest\nå¤åˆ¶ä»£ç \n\n\nå°†é¡¹ç›®ä¸­ä»»ä½• åç¼€åä¸º â€˜.jsâ€™ çš„ JavaScript æ–‡ä»¶é‡å‘½åä¸º TypeScript æ–‡ä»¶å³åç¼€åä¸º â€˜.tsxâ€™ï¼ˆä¾‹å¦‚Â src&#x2F;index.jsÂ é‡å‘½åä¸ºÂ src&#x2F;index.tsxÂ ï¼‰\n\n7. React è®¾è®¡æ€è·¯ï¼Œå®ƒçš„ç†å¿µæ˜¯ä»€ä¹ˆï¼Ÿï¼ˆ1ï¼‰ç¼–å†™ç®€å•ç›´è§‚çš„ä»£ç \nReactæœ€å¤§çš„ä»·å€¼ä¸æ˜¯é«˜æ€§èƒ½çš„è™šæ‹ŸDOMã€å°è£…çš„äº‹ä»¶æœºåˆ¶ã€æœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼Œè€Œæ˜¯å£°æ˜å¼çš„ç›´è§‚çš„ç¼–ç æ–¹å¼ã€‚reactæ–‡æ¡£ç¬¬ä¸€æ¡å°±æ˜¯å£°æ˜å¼ï¼ŒReact ä½¿åˆ›å»ºäº¤äº’å¼ UI å˜å¾—è½»è€Œæ˜“ä¸¾ã€‚ä¸ºåº”ç”¨çš„æ¯ä¸€ä¸ªçŠ¶æ€è®¾è®¡ç®€æ´çš„è§†å›¾ï¼Œå½“æ•°æ®æ”¹å˜æ—¶ React èƒ½æœ‰æ•ˆåœ°æ›´æ–°å¹¶æ­£ç¡®åœ°æ¸²æŸ“ç»„ä»¶ã€‚ ä»¥å£°æ˜å¼ç¼–å†™ UIï¼Œå¯ä»¥è®©ä»£ç æ›´åŠ å¯é ï¼Œä¸”æ–¹ä¾¿è°ƒè¯•ã€‚\nï¼ˆ2ï¼‰ç®€åŒ–å¯å¤ç”¨çš„ç»„ä»¶\nReactæ¡†æ¶é‡Œé¢ä½¿ç”¨äº†ç®€åŒ–çš„ç»„ä»¶æ¨¡å‹ï¼Œä½†æ›´å½»åº•åœ°ä½¿ç”¨äº†ç»„ä»¶åŒ–çš„æ¦‚å¿µã€‚Reactå°†æ•´ä¸ªUIä¸Šçš„æ¯ä¸€ä¸ªåŠŸèƒ½æ¨¡å—å®šä¹‰æˆç»„ä»¶ï¼Œç„¶åå°†å°çš„ç»„ä»¶é€šè¿‡ç»„åˆæˆ–è€…åµŒå¥—çš„æ–¹å¼æ„æˆæ›´å¤§çš„ç»„ä»¶ã€‚Reactçš„ç»„ä»¶å…·æœ‰å¦‚ä¸‹çš„ç‰¹æ€§âˆ¶\n\nå¯ç»„åˆï¼šç®€å•ç»„ä»¶å¯ä»¥ç»„åˆä¸ºå¤æ‚çš„ç»„ä»¶\nå¯é‡ç”¨ï¼šæ¯ä¸ªç»„ä»¶éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œå¯ä»¥è¢«å¤šä¸ªç»„ä»¶ä½¿ç”¨\nå¯ç»´æŠ¤ï¼šå’Œç»„ä»¶ç›¸å…³çš„é€»è¾‘å’ŒUIéƒ½å°è£…åœ¨äº†ç»„ä»¶çš„å†…éƒ¨ï¼Œæ–¹ä¾¿ç»´æŠ¤\nå¯æµ‹è¯•ï¼šå› ä¸ºç»„ä»¶çš„ç‹¬ç«‹æ€§ï¼Œæµ‹è¯•ç»„ä»¶å°±å˜å¾—æ–¹ä¾¿å¾ˆå¤šã€‚\n\nï¼ˆ3) Virtual DOM\nçœŸå®é¡µé¢å¯¹åº”ä¸€ä¸ª DOM æ ‘ã€‚åœ¨ä¼ ç»Ÿé¡µé¢çš„å¼€å‘æ¨¡å¼ä¸­ï¼Œæ¯æ¬¡éœ€è¦æ›´æ–°é¡µé¢æ—¶ï¼Œéƒ½è¦æ‰‹åŠ¨æ“ä½œ DOM æ¥è¿›è¡Œæ›´æ–°ã€‚ DOM æ“ä½œéå¸¸æ˜‚è´µã€‚åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œæ€§èƒ½æ¶ˆè€—æœ€å¤§çš„å°±æ˜¯ DOM æ“ä½œï¼Œè€Œä¸”è¿™éƒ¨åˆ†ä»£ç ä¼šè®©æ•´ä½“é¡¹ç›®çš„ä»£ç å˜å¾—éš¾ ä»¥ç»´æŠ¤ã€‚React æŠŠçœŸå® DOM æ ‘è½¬æ¢æˆ JavaScript å¯¹è±¡æ ‘ï¼Œä¹Ÿå°±æ˜¯ Virtual DOMï¼Œæ¯æ¬¡æ•°æ®æ›´æ–°åï¼Œé‡æ–°è®¡ç®— Virtual DOMï¼Œå¹¶å’Œä¸Šä¸€æ¬¡ç”Ÿæˆçš„ Virtual DOM åšå¯¹æ¯”ï¼Œå¯¹å‘ç”Ÿå˜åŒ–çš„éƒ¨åˆ†åšæ‰¹é‡æ›´æ–°ã€‚React ä¹Ÿæä¾›äº†ç›´è§‚çš„ shouldComponentUpdate ç”Ÿå‘½å‘¨æœŸå›è°ƒï¼Œæ¥å‡å°‘æ•°æ®å˜åŒ–åä¸å¿…è¦çš„ Virtual DOM å¯¹æ¯”è¿‡ç¨‹ï¼Œä»¥ä¿è¯æ€§èƒ½ã€‚\nï¼ˆ4ï¼‰å‡½æ•°å¼ç¼–ç¨‹\nReact æŠŠè¿‡å»ä¸æ–­é‡å¤æ„å»º UI çš„è¿‡ç¨‹æŠ½è±¡æˆäº†ç»„ä»¶ï¼Œä¸”åœ¨ç»™å®šå‚æ•°çš„æƒ…å†µä¸‹çº¦å®šæ¸²æŸ“å¯¹åº”çš„ UI ç•Œé¢ã€‚React èƒ½å……åˆ†åˆ©ç”¨å¾ˆå¤šå‡½æ•°å¼æ–¹æ³•å»å‡å°‘å†—ä½™ä»£ç ã€‚æ­¤å¤–ï¼Œç”±äºå®ƒæœ¬èº«å°±æ˜¯ç®€å•å‡½æ•°ï¼Œæ‰€ä»¥æ˜“äºæµ‹è¯•ã€‚\nï¼ˆ5ï¼‰ä¸€æ¬¡å­¦ä¹ ï¼Œéšå¤„ç¼–å†™\næ— è®ºç°åœ¨æ­£åœ¨ä½¿ç”¨ä»€ä¹ˆæŠ€æœ¯æ ˆï¼Œéƒ½å¯ä»¥éšæ—¶å¼•å…¥ Reactæ¥å¼€å‘æ–°ç‰¹æ€§ï¼Œè€Œä¸éœ€è¦é‡å†™ç°æœ‰ä»£ç ã€‚\nReact è¿˜å¯ä»¥ä½¿ç”¨ Node è¿›è¡ŒæœåŠ¡å™¨æ¸²æŸ“ï¼Œæˆ–ä½¿ç”¨ React Native å¼€å‘åŸç”Ÿç§»åŠ¨åº”ç”¨ã€‚å› ä¸º React ç»„ä»¶å¯ä»¥æ˜ å°„ä¸ºå¯¹åº”çš„åŸç”Ÿæ§ä»¶ã€‚åœ¨è¾“å‡ºçš„æ—¶å€™ï¼Œæ˜¯è¾“å‡º Web DOMï¼Œè¿˜æ˜¯ Android æ§ä»¶ï¼Œè¿˜æ˜¯ iOS æ§ä»¶ï¼Œå°±ç”±å¹³å°æœ¬èº«å†³å®šäº†ã€‚æ‰€ä»¥ï¼Œreactå¾ˆæ–¹ä¾¿å’Œå…¶ä»–å¹³å°é›†æˆ\n8. Reactä¸­props.childrenå’ŒReact.Childrençš„åŒºåˆ«åœ¨Reactä¸­ï¼Œå½“æ¶‰åŠç»„ä»¶åµŒå¥—ï¼Œåœ¨çˆ¶ç»„ä»¶ä¸­ä½¿ç”¨props.childrenæŠŠæ‰€æœ‰å­ç»„ä»¶æ˜¾ç¤ºå‡ºæ¥ã€‚å¦‚ä¸‹ï¼š\nfunction ParentComponent(props)&#123;\n\treturn (\n\t\t&lt;div&gt;\n\t\t\t&#123;props.children&#125;\n\t\t&lt;&#x2F;div&gt;\n\t)\n&#125;\nå¤åˆ¶ä»£ç \n\nå¦‚æœæƒ³æŠŠçˆ¶ç»„ä»¶ä¸­çš„å±æ€§ä¼ ç»™æ‰€æœ‰çš„å­ç»„ä»¶ï¼Œéœ€è¦ä½¿ç”¨React.Childrenæ–¹æ³•ã€‚\næ¯”å¦‚ï¼ŒæŠŠå‡ ä¸ªRadioç»„åˆèµ·æ¥ï¼Œåˆæˆä¸€ä¸ªRadioGroupï¼Œè¿™å°±è¦æ±‚æ‰€æœ‰çš„Radioå…·æœ‰åŒæ ·çš„nameå±æ€§å€¼ã€‚å¯ä»¥è¿™æ ·ï¼šæŠŠRadioçœ‹åšå­ç»„ä»¶ï¼ŒRadioGroupçœ‹åšçˆ¶ç»„ä»¶ï¼Œnameçš„å±æ€§å€¼åœ¨RadioGroupè¿™ä¸ªçˆ¶ç»„ä»¶ä¸­è®¾ç½®ã€‚\né¦–å…ˆæ˜¯å­ç»„ä»¶ï¼š\n&#x2F;&#x2F;å­ç»„ä»¶\nfunction RadioOption(props) &#123;\n  return (\n    &lt;label&gt;\n      &lt;input type&#x3D;&quot;radio&quot; value&#x3D;&#123;props.value&#125; name&#x3D;&#123;props.name&#125; &#x2F;&gt;\n      &#123;props.label&#125;\n    &lt;&#x2F;label&gt;\n  )\n&#125;\nå¤åˆ¶ä»£ç \n\nç„¶åæ˜¯çˆ¶ç»„ä»¶ï¼Œä¸ä»…éœ€è¦æŠŠå®ƒæ‰€æœ‰çš„å­ç»„ä»¶æ˜¾ç¤ºå‡ºæ¥ï¼Œè¿˜éœ€è¦ä¸ºæ¯ä¸ªå­ç»„ä»¶èµ‹ä¸Šnameå±æ€§å’Œå€¼ï¼š\n&#x2F;&#x2F;çˆ¶ç»„ä»¶ç”¨,propsæ˜¯æŒ‡çˆ¶ç»„ä»¶çš„props\nfunction renderChildren(props) &#123;\n    \n  &#x2F;&#x2F;éå†æ‰€æœ‰å­ç»„ä»¶\n  return React.Children.map(props.children, child &#x3D;&gt; &#123;\n    if (child.type &#x3D;&#x3D;&#x3D; RadioOption)\n      return React.cloneElement(child, &#123;\n        &#x2F;&#x2F;æŠŠçˆ¶ç»„ä»¶çš„props.nameèµ‹å€¼ç»™æ¯ä¸ªå­ç»„ä»¶\n        name: props.name\n      &#125;)\n    else\n      return child\n  &#125;)\n&#125;\n&#x2F;&#x2F;çˆ¶ç»„ä»¶\nfunction RadioGroup(props) &#123;\n  return (\n    &lt;div&gt;\n      &#123;renderChildren(props)&#125;\n    &lt;&#x2F;div&gt;\n  )\n&#125;\nfunction App() &#123;\n  return (\n    &lt;RadioGroup name&#x3D;&quot;hello&quot;&gt;\n      &lt;RadioOption label&#x3D;&quot;é€‰é¡¹ä¸€&quot; value&#x3D;&quot;1&quot; &#x2F;&gt;\n      &lt;RadioOption label&#x3D;&quot;é€‰é¡¹äºŒ&quot; value&#x3D;&quot;2&quot; &#x2F;&gt;\n      &lt;RadioOption label&#x3D;&quot;é€‰é¡¹ä¸‰&quot; value&#x3D;&quot;3&quot; &#x2F;&gt;\n    &lt;&#x2F;RadioGroup&gt;\n  )\n&#125;\nexport default App;\nå¤åˆ¶ä»£ç \n\nä»¥ä¸Šï¼ŒReact.Children.mapè®©æˆ‘ä»¬å¯¹çˆ¶ç»„ä»¶çš„æ‰€æœ‰å­ç»„ä»¶åˆæ›´çµæ´»çš„æ§åˆ¶ã€‚\n9. Reactçš„çŠ¶æ€æå‡æ˜¯ä»€ä¹ˆï¼Ÿä½¿ç”¨åœºæ™¯æœ‰å“ªäº›ï¼ŸReactçš„çŠ¶æ€æå‡å°±æ˜¯ç”¨æˆ·å¯¹å­ç»„ä»¶æ“ä½œï¼Œå­ç»„ä»¶ä¸æ”¹å˜è‡ªå·±çš„çŠ¶æ€ï¼Œé€šè¿‡è‡ªå·±çš„propsæŠŠè¿™ä¸ªæ“ä½œæ”¹å˜çš„æ•°æ®ä¼ é€’ç»™çˆ¶ç»„ä»¶ï¼Œæ”¹å˜çˆ¶ç»„ä»¶çš„çŠ¶æ€ï¼Œä»è€Œæ”¹å˜å—çˆ¶ç»„ä»¶æ§åˆ¶çš„æ‰€æœ‰å­ç»„ä»¶çš„çŠ¶æ€ï¼Œè¿™ä¹Ÿæ˜¯Reactå•é¡¹æ•°æ®æµçš„ç‰¹æ€§å†³å®šçš„ã€‚å®˜æ–¹çš„åŸè¯æ˜¯ï¼šå…±äº« state(çŠ¶æ€) æ˜¯é€šè¿‡å°†å…¶ç§»åŠ¨åˆ°éœ€è¦å®ƒçš„ç»„ä»¶çš„æœ€æ¥è¿‘çš„å…±åŒç¥–å…ˆç»„ä»¶æ¥å®ç°çš„ã€‚ è¿™è¢«ç§°ä¸ºâ€œçŠ¶æ€æå‡(Lifting State Up)â€ã€‚\næ¦‚æ‹¬æ¥è¯´å°±æ˜¯å°†å¤šä¸ªç»„ä»¶éœ€è¦å…±äº«çš„çŠ¶æ€æå‡åˆ°å®ƒä»¬æœ€è¿‘çš„çˆ¶ç»„ä»¶ä¸Šï¼Œåœ¨çˆ¶ç»„ä»¶ä¸Šæ”¹å˜è¿™ä¸ªçŠ¶æ€ç„¶åé€šè¿‡propsåˆ†å‘ç»™å­ç»„ä»¶ã€‚\nä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œçˆ¶ç»„ä»¶ä¸­æœ‰ä¸¤ä¸ªinputå­ç»„ä»¶ï¼Œå¦‚æœæƒ³åœ¨ç¬¬ä¸€ä¸ªè¾“å…¥æ¡†è¾“å…¥æ•°æ®ï¼Œæ¥æ”¹å˜ç¬¬äºŒä¸ªè¾“å…¥æ¡†çš„å€¼ï¼Œè¿™å°±éœ€è¦ç”¨åˆ°çŠ¶æ€æå‡ã€‚\nclass Father extends React.Component &#123;\n    constructor(props) &#123;\n        super(props)\n        this.state &#x3D; &#123;\n            Value1: &#39;&#39;,\n            Value2: &#39;&#39;\n        &#125;\n    &#125;\n    value1Change(aa) &#123;\n        this.setState(&#123;\n            Value1: aa\n        &#125;)\n    &#125;\n    value2Change(bb) &#123;\n        this.setState(&#123;\n            Value2: bb\n        &#125;)\n    &#125;\n    render() &#123;\n        return (\n            &lt;div style&#x3D;&#123;&#123; padding: &quot;100px&quot; &#125;&#125;&gt;\n                &lt;Child1 value1&#x3D;&#123;this.state.Value1&#125; onvalue1Change&#x3D;&#123;this.value1Change.bind(this)&#125; &#x2F;&gt;\n                \n\n                &lt;Child2 value2&#x3D;&#123;this.state.Value1&#125; &#x2F;&gt;\n            &lt;&#x2F;div&gt;\n        )\n    &#125;\n&#125;\nclass Child1 extends React.Component &#123;\n    constructor(props) &#123;\n        super(props)\n    &#125;\n    changeValue(e) &#123;\n        this.props.onvalue1Change(e.target.value)\n    &#125;\n    render() &#123;\n        return (\n            &lt;input value&#x3D;&#123;this.props.Value1&#125; onChange&#x3D;&#123;this.changeValue.bind(this)&#125; &#x2F;&gt;\n        )\n    &#125;\n&#125;\nclass Child2 extends React.Component &#123;\n    constructor(props) &#123;\n        super(props)\n    &#125;\n    render() &#123;\n        return (\n            &lt;input value&#x3D;&#123;this.props.value2&#125; &#x2F;&gt;\n        )\n    &#125;\n&#125;\n \nReactDOM.render(\n    &lt;Father &#x2F;&gt;,\n    document.getElementById(&#39;root&#39;)\n)\nå¤åˆ¶ä»£ç \n\n10. Reactä¸­constructorå’ŒgetInitialStateçš„åŒºåˆ«?ä¸¤è€…éƒ½æ˜¯ç”¨æ¥åˆå§‹åŒ–stateçš„ã€‚å‰è€…æ˜¯ES6ä¸­çš„è¯­æ³•ï¼Œåè€…æ˜¯ES5ä¸­çš„è¯­æ³•ï¼Œæ–°ç‰ˆæœ¬çš„Reactä¸­å·²ç»åºŸå¼ƒäº†è¯¥æ–¹æ³•ã€‚\ngetInitialStateæ˜¯ES5ä¸­çš„æ–¹æ³•ï¼Œå¦‚æœä½¿ç”¨createClassæ–¹æ³•åˆ›å»ºä¸€ä¸ªComponentç»„ä»¶ï¼Œå¯ä»¥è‡ªåŠ¨è°ƒç”¨å®ƒçš„getInitialStateæ–¹æ³•æ¥è·å–åˆå§‹åŒ–çš„Stateå¯¹è±¡ï¼Œ\nvar APP &#x3D; React.creatClass (&#123;\n  getInitialState() &#123;\n    return &#123; \n        userName: &#39;hi&#39;,\n        userId: 0\n     &#125;;\nã€€&#125;\n&#125;)\nå¤åˆ¶ä»£ç \n\nReactåœ¨ES6çš„å®ç°ä¸­å»æ‰äº†getInitialStateè¿™ä¸ªhookå‡½æ•°ï¼Œè§„å®šstateåœ¨constructorä¸­å®ç°ï¼Œå¦‚ä¸‹ï¼š\nClass App extends React.Component&#123;\n    constructor(props)&#123;\n      super(props);\n      this.state&#x3D;&#123;&#125;;\n    &#125;\n  &#125;\nå¤åˆ¶ä»£ç \n\n11. Reactçš„ä¸¥æ ¼æ¨¡å¼å¦‚ä½•ä½¿ç”¨ï¼Œæœ‰ä»€ä¹ˆç”¨å¤„ï¼ŸStrictMode æ˜¯ä¸€ä¸ªç”¨æ¥çªå‡ºæ˜¾ç¤ºåº”ç”¨ç¨‹åºä¸­æ½œåœ¨é—®é¢˜çš„å·¥å…·ã€‚ä¸ Fragment ä¸€æ ·ï¼ŒStrictMode ä¸ä¼šæ¸²æŸ“ä»»ä½•å¯è§çš„ UIã€‚å®ƒä¸ºå…¶åä»£å…ƒç´ è§¦å‘é¢å¤–çš„æ£€æŸ¥å’Œè­¦å‘Šã€‚ å¯ä»¥ä¸ºåº”ç”¨ç¨‹åºçš„ä»»ä½•éƒ¨åˆ†å¯ç”¨ä¸¥æ ¼æ¨¡å¼ã€‚ä¾‹å¦‚ï¼š\nimport React from &#39;react&#39;;\nfunction ExampleApplication() &#123;\n  return (\n    &lt;div&gt;\n      &lt;Header &#x2F;&gt;\n      &lt;React.StrictMode&gt;        \n        &lt;div&gt;\n          &lt;ComponentOne &#x2F;&gt;\n          &lt;ComponentTwo &#x2F;&gt;\n        &lt;&#x2F;div&gt;\n      &lt;&#x2F;React.StrictMode&gt;      \n      &lt;Footer &#x2F;&gt;\n    &lt;&#x2F;div&gt;\n  );\n&#125;\nå¤åˆ¶ä»£ç \n\nåœ¨ä¸Šè¿°çš„ç¤ºä¾‹ä¸­ï¼Œä¸ä¼šå¯¹ Header å’Œ Footer ç»„ä»¶è¿è¡Œä¸¥æ ¼æ¨¡å¼æ£€æŸ¥ã€‚ä½†æ˜¯ï¼ŒComponentOne å’Œ ComponentTwo ä»¥åŠå®ƒä»¬çš„æ‰€æœ‰åä»£å…ƒç´ éƒ½å°†è¿›è¡Œæ£€æŸ¥ã€‚\nStrictMode ç›®å‰æœ‰åŠ©äºï¼š\n\nè¯†åˆ«ä¸å®‰å…¨çš„ç”Ÿå‘½å‘¨æœŸ\nå…³äºä½¿ç”¨è¿‡æ—¶å­—ç¬¦ä¸² ref API çš„è­¦å‘Š\nå…³äºä½¿ç”¨åºŸå¼ƒçš„ findDOMNode æ–¹æ³•çš„è­¦å‘Š\næ£€æµ‹æ„å¤–çš„å‰¯ä½œç”¨\næ£€æµ‹è¿‡æ—¶çš„ context API\n\n12. åœ¨Reactä¸­éå†çš„æ–¹æ³•æœ‰å“ªäº›ï¼Ÿï¼ˆ1ï¼‰éå†æ•°ç»„ï¼šmap &amp;&amp; forEach\nimport React from &#39;react&#39;;\n\nclass App extends React.Component &#123;\n  render() &#123;\n    let arr &#x3D; [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;];\n    return (\n      &lt;ul&gt;\n        &#123;\n          arr.map((item, index) &#x3D;&gt; &#123;\n            return &lt;li key&#x3D;&#123;index&#125;&gt;&#123;item&#125;&lt;&#x2F;li&gt;\n          &#125;)\n        &#125;\n      &lt;&#x2F;ul&gt;\n    )\n  &#125;\n&#125;\n\nclass App extends React.Component &#123;\n  render() &#123;\n    let arr &#x3D; [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;];\n    return (\n      &lt;ul&gt;\n        &#123;\n          arr.forEach((item, index) &#x3D;&gt; &#123;\n            return &lt;li key&#x3D;&#123;index&#125;&gt;&#123;item&#125;&lt;&#x2F;li&gt;\n          &#125;)\n        &#125;\n      &lt;&#x2F;ul&gt;\n    )\n  &#125;\n&#125;\nå¤åˆ¶ä»£ç \n\nï¼ˆ2ï¼‰éå†å¯¹è±¡ï¼šmap &amp;&amp; for in\nclass App extends React.Component &#123;\n  render() &#123;\n    let obj &#x3D; &#123;\n      a: 1,\n      b: 2,\n      c: 3\n    &#125;\n    return (\n      &lt;ul&gt;\n        &#123;\n          (() &#x3D;&gt; &#123;\n            let domArr &#x3D; [];\n            for(const key in obj) &#123;\n              if(obj.hasOwnProperty(key)) &#123;\n                const value &#x3D; obj[key]\n                domArr.push(&lt;li key&#x3D;&#123;key&#125;&gt;&#123;value&#125;&lt;&#x2F;li&gt;)\n              &#125;\n            &#125;\n            return domArr;\n          &#125;)()\n        &#125;\n      &lt;&#x2F;ul&gt;\n    )\n  &#125;\n&#125;\n\n&#x2F;&#x2F; Object.entries() æŠŠå¯¹è±¡è½¬æ¢æˆæ•°ç»„\nclass App extends React.Component &#123;\n  render() &#123;\n    let obj &#x3D; &#123;\n      a: 1,\n      b: 2,\n      c: 3\n    &#125;\n    return (\n      &lt;ul&gt;\n        &#123;\n          Object.entries(obj).map(([key, value], index) &#x3D;&gt; &#123;   &#x2F;&#x2F; itemæ˜¯ä¸€ä¸ªæ•°ç»„ï¼ŒæŠŠitemè§£æ„ï¼Œå†™æ³•æ˜¯[key, value]\n            return &lt;li key&#x3D;&#123;key&#125;&gt;&#123;value&#125;&lt;&#x2F;li&gt;\n          &#125;) \n        &#125;\n      &lt;&#x2F;ul&gt;\n    )\n  &#125;\n&#125;\nå¤åˆ¶ä»£ç \n\n13. åœ¨Reactä¸­é¡µé¢é‡æ–°åŠ è½½æ—¶æ€æ ·ä¿ç•™æ•°æ®ï¼Ÿè¿™ä¸ªé—®é¢˜å°±è®¾è®¡åˆ°äº†æ•°æ®æŒä¹…åŒ–ï¼Œ ä¸»è¦çš„å®ç°æ–¹å¼æœ‰ä»¥ä¸‹å‡ ç§ï¼š\n\nReduxï¼š å°†é¡µé¢çš„æ•°æ®å­˜å‚¨åœ¨reduxä¸­ï¼Œåœ¨é‡æ–°åŠ è½½é¡µé¢æ—¶ï¼Œè·å–Reduxä¸­çš„æ•°æ®ï¼›\ndata.jsï¼š ä½¿ç”¨webpackæ„å»ºçš„é¡¹ç›®ï¼Œå¯ä»¥å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œdata.jsï¼Œå°†æ•°æ®ä¿å­˜data.jsä¸­ï¼Œè·³è½¬é¡µé¢åè·å–ï¼›\nsessionStorgeï¼š åœ¨è¿›å…¥é€‰æ‹©åœ°å€é¡µé¢ä¹‹å‰ï¼ŒcomponentWillUnMountçš„æ—¶å€™ï¼Œå°†æ•°æ®å­˜å‚¨åˆ°sessionStorageä¸­ï¼Œæ¯æ¬¡è¿›å…¥é¡µé¢åˆ¤æ–­sessionStorageä¸­æœ‰æ²¡æœ‰å­˜å‚¨çš„é‚£ä¸ªå€¼ï¼Œæœ‰ï¼Œåˆ™è¯»å–æ¸²æŸ“æ•°æ®ï¼›æ²¡æœ‰ï¼Œåˆ™è¯´æ˜æ•°æ®æ˜¯åˆå§‹åŒ–çš„çŠ¶æ€ã€‚è¿”å›æˆ–è¿›å…¥é™¤äº†é€‰æ‹©åœ°å€ä»¥å¤–çš„é¡µé¢ï¼Œæ¸…æ‰å­˜å‚¨çš„sessionStorageï¼Œä¿è¯ä¸‹æ¬¡è¿›å…¥æ˜¯åˆå§‹åŒ–çš„æ•°æ®\nhistory APIï¼š History API çš„ pushState å‡½æ•°å¯ä»¥ç»™å†å²è®°å½•å…³è”ä¸€ä¸ªä»»æ„çš„å¯åºåˆ—åŒ– stateï¼Œæ‰€ä»¥å¯ä»¥åœ¨è·¯ç”± push çš„æ—¶å€™å°†å½“å‰é¡µé¢çš„ä¸€äº›ä¿¡æ¯å­˜åˆ° state ä¸­ï¼Œä¸‹æ¬¡è¿”å›åˆ°è¿™ä¸ªé¡µé¢çš„æ—¶å€™å°±èƒ½ä» state é‡Œé¢å–å‡ºç¦»å¼€å‰çš„æ•°æ®é‡æ–°æ¸²æŸ“ã€‚react-router ç›´æ¥å¯ä»¥æ”¯æŒã€‚è¿™ä¸ªæ–¹æ³•é€‚åˆä¸€äº›éœ€è¦ä¸´æ—¶å­˜å‚¨çš„åœºæ™¯ã€‚\n\n14. åŒæ—¶å¼•ç”¨è¿™ä¸‰ä¸ªåº“react.jsã€react-dom.jså’Œbabel.jså®ƒä»¬éƒ½æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ\nreactï¼šåŒ…å«reactæ‰€å¿…é¡»çš„æ ¸å¿ƒä»£ç \nreact-domï¼šreactæ¸²æŸ“åœ¨ä¸åŒå¹³å°æ‰€éœ€è¦çš„æ ¸å¿ƒä»£ç \nbabelï¼šå°†jsxè½¬æ¢æˆReactä»£ç çš„å·¥å…·\n\n15. Reactå¿…é¡»ä½¿ç”¨JSXå—ï¼ŸReact å¹¶ä¸å¼ºåˆ¶è¦æ±‚ä½¿ç”¨ JSXã€‚å½“ä¸æƒ³åœ¨æ„å»ºç¯å¢ƒä¸­é…ç½®æœ‰å…³ JSX ç¼–è¯‘æ—¶ï¼Œä¸åœ¨ React ä¸­ä½¿ç”¨ JSX ä¼šæ›´åŠ æ–¹ä¾¿ã€‚\næ¯ä¸ª JSX å…ƒç´ åªæ˜¯è°ƒç”¨ React.createElement(component, props, ...children) çš„è¯­æ³•ç³–ã€‚å› æ­¤ï¼Œä½¿ç”¨ JSX å¯ä»¥å®Œæˆçš„ä»»ä½•äº‹æƒ…éƒ½å¯ä»¥é€šè¿‡çº¯ JavaScript å®Œæˆã€‚\nä¾‹å¦‚ï¼Œç”¨ JSX ç¼–å†™çš„ä»£ç ï¼š\nclass Hello extends React.Component &#123;\n  render() &#123;\n    return &lt;div&gt;Hello &#123;this.props.toWhat&#125;&lt;&#x2F;div&gt;;\n  &#125;\n&#125;\nReactDOM.render(\n  &lt;Hello toWhat&#x3D;&quot;World&quot; &#x2F;&gt;,\n  document.getElementById(&#39;root&#39;)\n);\nå¤åˆ¶ä»£ç \n\nå¯ä»¥ç¼–å†™ä¸ºä¸ä½¿ç”¨ JSX çš„ä»£ç ï¼š\nclass Hello extends React.Component &#123;\n  render() &#123;\n    return React.createElement(&#39;div&#39;, null, &#96;Hello $&#123;this.props.toWhat&#125;&#96;);\n  &#125;\n&#125;\nReactDOM.render(\n  React.createElement(Hello, &#123;toWhat: &#39;World&#39;&#125;, null),\n  document.getElementById(&#39;root&#39;)\n);\nå¤åˆ¶ä»£ç \n\n16. ä¸ºä»€ä¹ˆä½¿ç”¨jsxçš„ç»„ä»¶ä¸­æ²¡æœ‰çœ‹åˆ°ä½¿ç”¨reactå´éœ€è¦å¼•å…¥reactï¼Ÿæœ¬è´¨ä¸Šæ¥è¯´JSXæ˜¯React.createElement(component, props, ...children)æ–¹æ³•çš„è¯­æ³•ç³–ã€‚åœ¨React 17ä¹‹å‰ï¼Œå¦‚æœä½¿ç”¨äº†JSXï¼Œå…¶å®å°±æ˜¯åœ¨ä½¿ç”¨Reactï¼ŒÂ babelÂ ä¼šæŠŠç»„ä»¶è½¬æ¢ä¸ºÂ CreateElementÂ å½¢å¼ã€‚åœ¨React 17ä¹‹åï¼Œå°±ä¸å†éœ€è¦å¼•å…¥ï¼Œå› ä¸ºÂ babelÂ å·²ç»å¯ä»¥å¸®æˆ‘ä»¬è‡ªåŠ¨å¼•å…¥reactã€‚\n17. åœ¨Reactä¸­æ€ä¹ˆä½¿ç”¨async&#x2F;awaitï¼Ÿasync&#x2F;awaitæ˜¯ES7æ ‡å‡†ä¸­çš„æ–°ç‰¹æ€§ã€‚å¦‚æœæ˜¯ä½¿ç”¨Reactå®˜æ–¹çš„è„šæ‰‹æ¶åˆ›å»ºçš„é¡¹ç›®ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚å¦‚æœæ˜¯åœ¨è‡ªå·±æ­å»ºçš„webpacké…ç½®çš„é¡¹ç›®ä¸­ä½¿ç”¨ï¼Œå¯èƒ½ä¼šé‡åˆ°Â regeneratorRuntime is not definedÂ çš„å¼‚å¸¸é”™è¯¯ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦å¼•å…¥babelï¼Œå¹¶åœ¨babelä¸­é…ç½®ä½¿ç”¨async&#x2F;awaitã€‚å¯ä»¥åˆ©ç”¨babelçš„ transform-async-to-module-method æ’ä»¶æ¥è½¬æ¢å…¶æˆä¸ºæµè§ˆå™¨æ”¯æŒçš„è¯­æ³•ï¼Œè™½ç„¶æ²¡æœ‰æ€§èƒ½çš„æå‡ï¼Œä½†å¯¹äºä»£ç ç¼–å†™ä½“éªŒè¦æ›´å¥½ã€‚\n18. React.Children.mapå’Œjsçš„mapæœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŸJavaScriptä¸­çš„mapä¸ä¼šå¯¹ä¸ºnullæˆ–è€…undefinedçš„æ•°æ®è¿›è¡Œå¤„ç†ï¼Œè€ŒReact.Children.mapä¸­çš„mapå¯ä»¥å¤„ç†React.Childrenä¸ºnullæˆ–è€…undefinedçš„æƒ…å†µã€‚\n19. å¯¹React SSRçš„ç†è§£æœåŠ¡ç«¯æ¸²æŸ“æ˜¯æ•°æ®ä¸æ¨¡ç‰ˆç»„æˆçš„htmlï¼Œå³ HTML &#x3D; æ•°æ® ï¼‹ æ¨¡ç‰ˆã€‚å°†ç»„ä»¶æˆ–é¡µé¢é€šè¿‡æœåŠ¡å™¨ç”Ÿæˆhtmlå­—ç¬¦ä¸²ï¼Œå†å‘é€åˆ°æµè§ˆå™¨ï¼Œæœ€åå°†é™æ€æ ‡è®°â€æ··åˆâ€ä¸ºå®¢æˆ·ç«¯ä¸Šå®Œå…¨äº¤äº’çš„åº”ç”¨ç¨‹åºã€‚é¡µé¢æ²¡ä½¿ç”¨æœåŠ¡æ¸²æŸ“ï¼Œå½“è¯·æ±‚é¡µé¢æ—¶ï¼Œè¿”å›çš„bodyé‡Œä¸ºç©ºï¼Œä¹‹åæ‰§è¡Œjså°†htmlç»“æ„æ³¨å…¥åˆ°bodyé‡Œï¼Œç»“åˆcssæ˜¾ç¤ºå‡ºæ¥;\nSSRçš„ä¼˜åŠ¿ï¼š\n\nå¯¹SEOå‹å¥½\næ‰€æœ‰çš„æ¨¡ç‰ˆã€å›¾ç‰‡ç­‰èµ„æºéƒ½å­˜åœ¨æœåŠ¡å™¨ç«¯\nä¸€ä¸ªhtmlè¿”å›æ‰€æœ‰æ•°æ®\nå‡å°‘HTTPè¯·æ±‚\nå“åº”å¿«ã€ç”¨æˆ·ä½“éªŒå¥½ã€é¦–å±æ¸²æŸ“å¿«\n\n1ï¼‰æ›´åˆ©äºSEO\nä¸åŒçˆ¬è™«å·¥ä½œåŸç†ç±»ä¼¼ï¼Œåªä¼šçˆ¬å–æºç ï¼Œä¸ä¼šæ‰§è¡Œç½‘ç«™çš„ä»»ä½•è„šæœ¬ä½¿ç”¨äº†Reactæˆ–è€…å…¶å®ƒMVVMæ¡†æ¶ä¹‹åï¼Œé¡µé¢å¤§å¤šæ•°DOMå…ƒç´ éƒ½æ˜¯åœ¨å®¢æˆ·ç«¯æ ¹æ®jsåŠ¨æ€ç”Ÿæˆï¼Œå¯ä¾›çˆ¬è™«æŠ“å–åˆ†æçš„å†…å®¹å¤§å¤§å‡å°‘ã€‚å¦å¤–ï¼Œæµè§ˆå™¨çˆ¬è™«ä¸ä¼šç­‰å¾…æˆ‘ä»¬çš„æ•°æ®å®Œæˆä¹‹åå†å»æŠ“å–é¡µé¢æ•°æ®ã€‚æœåŠ¡ç«¯æ¸²æŸ“è¿”å›ç»™å®¢æˆ·ç«¯çš„æ˜¯å·²ç»è·å–äº†å¼‚æ­¥æ•°æ®å¹¶æ‰§è¡ŒJavaScriptè„šæœ¬çš„æœ€ç»ˆHTMLï¼Œç½‘ç»œçˆ¬ä¸­å°±å¯ä»¥æŠ“å–åˆ°å®Œæ•´é¡µé¢çš„ä¿¡æ¯ã€‚\n2ï¼‰æ›´åˆ©äºé¦–å±æ¸²æŸ“\né¦–å±çš„æ¸²æŸ“æ˜¯nodeå‘é€è¿‡æ¥çš„htmlå­—ç¬¦ä¸²ï¼Œå¹¶ä¸ä¾èµ–äºjsæ–‡ä»¶äº†ï¼Œè¿™å°±ä¼šä½¿ç”¨æˆ·æ›´å¿«çš„çœ‹åˆ°é¡µé¢çš„å†…å®¹ã€‚å°¤å…¶æ˜¯é’ˆå¯¹å¤§å‹å•é¡µåº”ç”¨ï¼Œæ‰“åŒ…åæ–‡ä»¶ä½“ç§¯æ¯”è¾ƒå¤§ï¼Œæ™®é€šå®¢æˆ·ç«¯æ¸²æŸ“åŠ è½½æ‰€æœ‰æ‰€éœ€æ–‡ä»¶æ—¶é—´è¾ƒé•¿ï¼Œé¦–é¡µå°±ä¼šæœ‰ä¸€ä¸ªå¾ˆé•¿çš„ç™½å±ç­‰å¾…æ—¶é—´ã€‚\nSSRçš„å±€é™ï¼š\n1ï¼‰æœåŠ¡ç«¯å‹åŠ›è¾ƒå¤§\næœ¬æ¥æ˜¯é€šè¿‡å®¢æˆ·ç«¯å®Œæˆæ¸²æŸ“ï¼Œç°åœ¨ç»Ÿä¸€åˆ°æœåŠ¡ç«¯nodeæœåŠ¡å»åšã€‚å°¤å…¶æ˜¯é«˜å¹¶å‘è®¿é—®çš„æƒ…å†µï¼Œä¼šå¤§é‡å ç”¨æœåŠ¡ç«¯CPUèµ„æº;\n2ï¼‰å¼€å‘æ¡ä»¶å—é™\nåœ¨æœåŠ¡ç«¯æ¸²æŸ“ä¸­ï¼Œåªä¼šæ‰§è¡Œåˆ°componentDidMountä¹‹å‰çš„ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œå› æ­¤é¡¹ç›®å¼•ç”¨çš„ç¬¬ä¸‰æ–¹çš„åº“ä¹Ÿä¸å¯ç”¨å…¶å®ƒç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œè¿™å¯¹å¼•ç”¨åº“çš„é€‰æ‹©äº§ç”Ÿäº†å¾ˆå¤§çš„é™åˆ¶;\n3ï¼‰å­¦ä¹ æˆæœ¬ç›¸å¯¹è¾ƒé«˜ é™¤äº†å¯¹webpackã€MVVMæ¡†æ¶è¦ç†Ÿæ‚‰ï¼Œè¿˜éœ€è¦æŒæ¡nodeã€ Koa2ç­‰ç›¸å…³æŠ€æœ¯ã€‚ç›¸å¯¹äºå®¢æˆ·ç«¯æ¸²æŸ“ï¼Œé¡¹ç›®æ„å»ºã€éƒ¨ç½²è¿‡ç¨‹æ›´åŠ å¤æ‚ã€‚\næ—¶é—´è€—æ—¶æ¯”è¾ƒï¼š\n1ï¼‰æ•°æ®è¯·æ±‚\nç”±æœåŠ¡ç«¯è¯·æ±‚é¦–å±æ•°æ®ï¼Œè€Œä¸æ˜¯å®¢æˆ·ç«¯è¯·æ±‚é¦–å±æ•°æ®ï¼Œè¿™æ˜¯â€å¿«â€çš„ä¸€ä¸ªä¸»è¦åŸå› ã€‚æœåŠ¡ç«¯åœ¨å†…ç½‘è¿›è¡Œè¯·æ±‚ï¼Œæ•°æ®å“åº”é€Ÿåº¦å¿«ã€‚å®¢æˆ·ç«¯åœ¨ä¸åŒç½‘ç»œç¯å¢ƒè¿›è¡Œæ•°æ®è¯·æ±‚ï¼Œä¸”å¤–ç½‘httpè¯·æ±‚å¼€é”€å¤§ï¼Œå¯¼è‡´æ—¶é—´å·®\n\nå®¢æˆ·ç«¯æ•°æ®è¯·æ±‚\n\n\n\næœåŠ¡ç«¯æ•°æ®è¯·æ±‚\n\n 2ï¼‰htmlæ¸²æŸ“ æœåŠ¡ç«¯æ¸²æŸ“æ˜¯å…ˆå‘åç«¯æœåŠ¡å™¨è¯·æ±‚æ•°æ®ï¼Œç„¶åç”Ÿæˆå®Œæ•´é¦–å± htmlè¿”å›ç»™æµè§ˆå™¨ï¼›è€Œå®¢æˆ·ç«¯æ¸²æŸ“æ˜¯ç­‰jsä»£ç ä¸‹è½½ã€åŠ è½½ã€è§£æå®Œæˆåå†è¯·æ±‚æ•°æ®æ¸²æŸ“ï¼Œç­‰å¾…çš„è¿‡ç¨‹é¡µé¢æ˜¯ä»€ä¹ˆéƒ½æ²¡æœ‰çš„ï¼Œå°±æ˜¯ç”¨æˆ·çœ‹åˆ°çš„ç™½å±ã€‚å°±æ˜¯æœåŠ¡ç«¯æ¸²æŸ“ä¸éœ€è¦ç­‰å¾…jsä»£ç ä¸‹è½½å®Œæˆå¹¶è¯·æ±‚æ•°æ®ï¼Œå°±å¯ä»¥è¿”å›ä¸€ä¸ªå·²æœ‰å®Œæ•´æ•°æ®çš„é¦–å±é¡µé¢ã€‚\n\néssr htmlæ¸²æŸ“\n\n\n\nssr htmlæ¸²æŸ“\n\n\n20. ä¸ºä»€ä¹ˆÂ React è¦ç”¨ JSXï¼ŸJSX æ˜¯ä¸€ä¸ª JavaScript çš„è¯­æ³•æ‰©å±•ï¼Œæˆ–è€…è¯´æ˜¯ä¸€ä¸ªç±»ä¼¼äº XML çš„ ECMAScript è¯­æ³•æ‰©å±•ã€‚å®ƒæœ¬èº«æ²¡æœ‰å¤ªå¤šçš„è¯­æ³•å®šä¹‰ï¼Œä¹Ÿä¸æœŸæœ›å¼•å…¥æ›´å¤šçš„æ ‡å‡†ã€‚\nå…¶å® React æœ¬èº«å¹¶ä¸å¼ºåˆ¶ä½¿ç”¨ JSXã€‚åœ¨æ²¡æœ‰ JSX çš„æ—¶å€™ï¼ŒReact å®ç°ä¸€ä¸ªç»„ä»¶ä¾èµ–äºä½¿ç”¨ React.createElement å‡½æ•°ã€‚ä»£ç å¦‚ä¸‹ï¼š\nclass Hello extends React.Component &#123;\n  render() &#123;\n    return React.createElement(\n        &#39;div&#39;,\n        null, \n        &#96;Hello $&#123;this.props.toWhat&#125;&#96;\n      );\n  &#125;\n&#125;\nReactDOM.render(\n  React.createElement(Hello, &#123;toWhat: &#39;World&#39;&#125;, null),\n  document.getElementById(&#39;root&#39;)\n);\nå¤åˆ¶ä»£ç \n\nè€Œ JSX æ›´åƒæ˜¯ä¸€ç§è¯­æ³•ç³–ï¼Œé€šè¿‡ç±»ä¼¼ XML çš„æè¿°æ–¹å¼ï¼Œæå†™å‡½æ•°å¯¹è±¡ã€‚åœ¨é‡‡ç”¨ JSX ä¹‹åï¼Œè¿™æ®µä»£ç ä¼šè¿™æ ·å†™ï¼š\nclass Hello extends React.Component &#123;\n  render() &#123;\n    return &lt;div&gt;Hello &#123;this.props.toWhat&#125;&lt;&#x2F;div&gt;;\n  &#125;\n&#125;\nReactDOM.render(\n  &lt;Hello toWhat&#x3D;&quot;World&quot; &#x2F;&gt;,\n  document.getElementById(&#39;root&#39;)\n);\nå¤åˆ¶ä»£ç \n\né€šè¿‡å¯¹æ¯”ï¼Œå¯ä»¥æ¸…æ™°åœ°å‘ç°ï¼Œä»£ç å˜å¾—æ›´ä¸ºç®€æ´ï¼Œè€Œä¸”ä»£ç ç»“æ„å±‚æ¬¡æ›´ä¸ºæ¸…æ™°ã€‚\nå› ä¸º React éœ€è¦å°†ç»„ä»¶è½¬åŒ–ä¸ºè™šæ‹Ÿ DOM æ ‘ï¼Œæ‰€ä»¥åœ¨ç¼–å†™ä»£ç æ—¶ï¼Œå®é™…ä¸Šæ˜¯åœ¨æ‰‹å†™ä¸€æ£µç»“æ„æ ‘ã€‚è€ŒXML åœ¨æ ‘ç»“æ„çš„æè¿°ä¸Šå¤©ç”Ÿå…·æœ‰å¯è¯»æ€§å¼ºçš„ä¼˜åŠ¿ã€‚\nä½†è¿™æ ·å¯è¯»æ€§å¼ºçš„ä»£ç ä»…ä»…æ˜¯ç»™å†™ç¨‹åºçš„åŒå­¦çœ‹çš„ï¼Œå®é™…ä¸Šåœ¨è¿è¡Œçš„æ—¶å€™ï¼Œä¼šä½¿ç”¨ Babel æ’ä»¶å°† JSX è¯­æ³•çš„ä»£ç è¿˜åŸä¸º React.createElement çš„ä»£ç ã€‚\næ€»ç»“ï¼š JSX æ˜¯ä¸€ä¸ª JavaScript çš„è¯­æ³•æ‰©å±•ï¼Œç»“æ„ç±»ä¼¼ XMLã€‚JSX ä¸»è¦ç”¨äºå£°æ˜ React å…ƒç´ ï¼Œä½† React ä¸­å¹¶ä¸å¼ºåˆ¶ä½¿ç”¨ JSXã€‚å³ä½¿ä½¿ç”¨äº† JSXï¼Œä¹Ÿä¼šåœ¨æ„å»ºè¿‡ç¨‹ä¸­ï¼Œé€šè¿‡ Babel æ’ä»¶ç¼–è¯‘ä¸º React.createElementã€‚æ‰€ä»¥ JSX æ›´åƒæ˜¯ React.createElement çš„ä¸€ç§è¯­æ³•ç³–ã€‚\nReact å›¢é˜Ÿå¹¶ä¸æƒ³å¼•å…¥ JavaScript æœ¬èº«ä»¥å¤–çš„å¼€å‘ä½“ç³»ã€‚è€Œæ˜¯å¸Œæœ›é€šè¿‡åˆç†çš„å…³æ³¨ç‚¹åˆ†ç¦»ä¿æŒç»„ä»¶å¼€å‘çš„çº¯ç²¹æ€§ã€‚\n22. React ä¸­çš„é«˜é˜¶ç»„ä»¶è¿ç”¨äº†ä»€ä¹ˆè®¾è®¡æ¨¡å¼ï¼Ÿä½¿ç”¨äº†è£…é¥°æ¨¡å¼ï¼Œé«˜é˜¶ç»„ä»¶çš„è¿ç”¨ï¼š\nfunction withWindowWidth(BaseComponent) &#123;\n  class DerivedClass extends React.Component &#123;\n    state &#x3D; &#123;\n      windowWidth: window.innerWidth,\n    &#125;\n    onResize &#x3D; () &#x3D;&gt; &#123;\n      this.setState(&#123;\n        windowWidth: window.innerWidth,\n      &#125;)\n    &#125;\n    componentDidMount() &#123;\n      window.addEventListener(&#39;resize&#39;, this.onResize)\n    &#125;\n    componentWillUnmount() &#123;\n      window.removeEventListener(&#39;resize&#39;, this.onResize);\n    &#125;\n    render() &#123;\n      return &lt;BaseComponent &#123;...this.props&#125; &#123;...this.state&#125;&#x2F;&gt;\n    &#125;\n  &#125;\n  return DerivedClass;\n&#125;\nconst MyComponent &#x3D; (props) &#x3D;&gt; &#123;\n  return &lt;div&gt;Window width is: &#123;props.windowWidth&#125;&lt;&#x2F;div&gt;\n&#125;;\nexport default withWindowWidth(MyComponent);\nå¤åˆ¶ä»£ç \n\nè£…é¥°æ¨¡å¼çš„ç‰¹ç‚¹æ˜¯ä¸éœ€è¦æ”¹å˜ è¢«è£…é¥°å¯¹è±¡ æœ¬èº«ï¼Œè€Œåªæ˜¯åœ¨å¤–é¢å¥—ä¸€ä¸ªå¤–å£³æ¥å£ã€‚JavaScript ç›®å‰å·²ç»æœ‰äº†åŸç”Ÿè£…é¥°å™¨çš„ææ¡ˆï¼Œå…¶ç”¨æ³•å¦‚ä¸‹ï¼š\n@testable\n   class MyTestableClass &#123;\n&#125;\n\nä½œè€…ï¼šCUGGZé“¾æ¥ï¼šhttps://juejin.cn/post/6940942549305524238æ¥æºï¼šç¨€åœŸæ˜é‡‘è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚\n","slug":"é¢è¯•é¢˜ç¬”è®°â€”â€”REACTç¯‡(ä¸‹)","date":"2022-04-10T03:03:54.000Z","categories_index":"","tags_index":"","author_index":"Beastrong"},{"id":"0b7c0bb77310ab4c9c1a186c882be3d6","title":"é¢è¯•é¢˜ç¬”è®°â€”â€”REACTç¯‡(ä¸Š)","content":"\nä¸€ã€ç»„ä»¶åŸºç¡€1. React äº‹ä»¶æœºåˆ¶&lt;div onClick&#x3D;&#123;this.handleClick.bind(this)&#125;&gt;ç‚¹æˆ‘&lt;&#x2F;div&gt;\nå¤åˆ¶ä»£ç \n\nReactå¹¶ä¸æ˜¯å°†clickäº‹ä»¶ç»‘å®šåˆ°äº†divçš„çœŸå®DOMä¸Šï¼Œè€Œæ˜¯åœ¨documentå¤„ç›‘å¬äº†æ‰€æœ‰çš„äº‹ä»¶ï¼Œå½“äº‹ä»¶å‘ç”Ÿå¹¶ä¸”å†’æ³¡åˆ°documentå¤„çš„æ—¶å€™ï¼ŒReactå°†äº‹ä»¶å†…å®¹å°è£…å¹¶äº¤ç”±çœŸæ­£çš„å¤„ç†å‡½æ•°è¿è¡Œã€‚è¿™æ ·çš„æ–¹å¼ä¸ä»…ä»…å‡å°‘äº†å†…å­˜çš„æ¶ˆè€—ï¼Œè¿˜èƒ½åœ¨ç»„ä»¶æŒ‚åœ¨é”€æ¯æ—¶ç»Ÿä¸€è®¢é˜…å’Œç§»é™¤äº‹ä»¶ã€‚\né™¤æ­¤ä¹‹å¤–ï¼Œå†’æ³¡åˆ°documentä¸Šçš„äº‹ä»¶ä¹Ÿä¸æ˜¯åŸç”Ÿçš„æµè§ˆå™¨äº‹ä»¶ï¼Œè€Œæ˜¯ç”±reactè‡ªå·±å®ç°çš„åˆæˆäº‹ä»¶ï¼ˆSyntheticEventï¼‰ã€‚å› æ­¤å¦‚æœä¸æƒ³è¦æ˜¯äº‹ä»¶å†’æ³¡çš„è¯åº”è¯¥è°ƒç”¨event.preventDefault()æ–¹æ³•ï¼Œè€Œä¸æ˜¯è°ƒç”¨event.stopProppagation()æ–¹æ³•ã€‚  JSX ä¸Šå†™çš„äº‹ä»¶å¹¶æ²¡æœ‰ç»‘å®šåœ¨å¯¹åº”çš„çœŸå® DOM ä¸Šï¼Œè€Œæ˜¯é€šè¿‡äº‹ä»¶ä»£ç†çš„æ–¹å¼ï¼Œå°†æ‰€æœ‰çš„äº‹ä»¶éƒ½ç»Ÿä¸€ç»‘å®šåœ¨äº† document ä¸Šã€‚è¿™æ ·çš„æ–¹å¼ä¸ä»…å‡å°‘äº†å†…å­˜æ¶ˆè€—ï¼Œè¿˜èƒ½åœ¨ç»„ä»¶æŒ‚è½½é”€æ¯æ—¶ç»Ÿä¸€è®¢é˜…å’Œç§»é™¤äº‹ä»¶ã€‚\nå¦å¤–å†’æ³¡åˆ° document ä¸Šçš„äº‹ä»¶ä¹Ÿä¸æ˜¯åŸç”Ÿæµè§ˆå™¨äº‹ä»¶ï¼Œè€Œæ˜¯ React è‡ªå·±å®ç°çš„åˆæˆäº‹ä»¶ï¼ˆSyntheticEventï¼‰ã€‚å› æ­¤æˆ‘ä»¬å¦‚æœä¸æƒ³è¦äº‹ä»¶å†’æ³¡çš„è¯ï¼Œè°ƒç”¨ event.stopPropagation æ˜¯æ— æ•ˆçš„ï¼Œè€Œåº”è¯¥è°ƒç”¨ event.preventDefaultã€‚\nå®ç°åˆæˆäº‹ä»¶çš„ç›®çš„å¦‚ä¸‹ï¼š\n\nåˆæˆäº‹ä»¶é¦–å…ˆæŠ¹å¹³äº†æµè§ˆå™¨ä¹‹é—´çš„å…¼å®¹é—®é¢˜ï¼Œå¦å¤–è¿™æ˜¯ä¸€ä¸ªè·¨æµè§ˆå™¨åŸç”Ÿäº‹ä»¶åŒ…è£…å™¨ï¼Œèµ‹äºˆäº†è·¨æµè§ˆå™¨å¼€å‘çš„èƒ½åŠ›ï¼›\nå¯¹äºåŸç”Ÿæµè§ˆå™¨äº‹ä»¶æ¥è¯´ï¼Œæµè§ˆå™¨ä¼šç»™ç›‘å¬å™¨åˆ›å»ºä¸€ä¸ªäº‹ä»¶å¯¹è±¡ã€‚å¦‚æœä½ æœ‰å¾ˆå¤šçš„äº‹ä»¶ç›‘å¬ï¼Œé‚£ä¹ˆå°±éœ€è¦åˆ†é…å¾ˆå¤šçš„äº‹ä»¶å¯¹è±¡ï¼Œé€ æˆé«˜é¢çš„å†…å­˜åˆ†é…é—®é¢˜ã€‚ä½†æ˜¯å¯¹äºåˆæˆäº‹ä»¶æ¥è¯´ï¼Œæœ‰ä¸€ä¸ªäº‹ä»¶æ± ä¸“é—¨æ¥ç®¡ç†å®ƒä»¬çš„åˆ›å»ºå’Œé”€æ¯ï¼Œå½“äº‹ä»¶éœ€è¦è¢«ä½¿ç”¨æ—¶ï¼Œå°±ä¼šä»æ± å­ä¸­å¤ç”¨å¯¹è±¡ï¼Œäº‹ä»¶å›è°ƒç»“æŸåï¼Œå°±ä¼šé”€æ¯äº‹ä»¶å¯¹è±¡ä¸Šçš„å±æ€§ï¼Œä»è€Œä¾¿äºä¸‹æ¬¡å¤ç”¨äº‹ä»¶å¯¹è±¡ã€‚\n\n2. Reactçš„äº‹ä»¶å’Œæ™®é€šçš„HTMLäº‹ä»¶æœ‰ä»€ä¹ˆä¸åŒï¼ŸåŒºåˆ«ï¼š\n\nå¯¹äºäº‹ä»¶åç§°å‘½åæ–¹å¼ï¼ŒåŸç”Ÿäº‹ä»¶ä¸ºå…¨å°å†™ï¼Œreact äº‹ä»¶é‡‡ç”¨å°é©¼å³°ï¼›\nå¯¹äºäº‹ä»¶å‡½æ•°å¤„ç†è¯­æ³•ï¼ŒåŸç”Ÿäº‹ä»¶ä¸ºå­—ç¬¦ä¸²ï¼Œreact äº‹ä»¶ä¸ºå‡½æ•°ï¼›\nreact äº‹ä»¶ä¸èƒ½é‡‡ç”¨ return false çš„æ–¹å¼æ¥é˜»æ­¢æµè§ˆå™¨çš„é»˜è®¤è¡Œä¸ºï¼Œè€Œå¿…é¡»è¦åœ°æ˜ç¡®åœ°è°ƒç”¨preventDefault()æ¥é˜»æ­¢é»˜è®¤è¡Œä¸ºã€‚\n\nåˆæˆäº‹ä»¶æ˜¯ react æ¨¡æ‹ŸåŸç”Ÿ DOM äº‹ä»¶æ‰€æœ‰èƒ½åŠ›çš„ä¸€ä¸ªäº‹ä»¶å¯¹è±¡ï¼Œå…¶ä¼˜ç‚¹å¦‚ä¸‹ï¼š\n\nå…¼å®¹æ‰€æœ‰æµè§ˆå™¨ï¼Œæ›´å¥½çš„è·¨å¹³å°ï¼›\nå°†äº‹ä»¶ç»Ÿä¸€å­˜æ”¾åœ¨ä¸€ä¸ªæ•°ç»„ï¼Œé¿å…é¢‘ç¹çš„æ–°å¢ä¸åˆ é™¤ï¼ˆåƒåœ¾å›æ”¶ï¼‰ã€‚\næ–¹ä¾¿ react ç»Ÿä¸€ç®¡ç†å’Œäº‹åŠ¡æœºåˆ¶ã€‚\n\näº‹ä»¶çš„æ‰§è¡Œé¡ºåºä¸ºåŸç”Ÿäº‹ä»¶å…ˆæ‰§è¡Œï¼Œåˆæˆäº‹ä»¶åæ‰§è¡Œï¼Œåˆæˆäº‹ä»¶ä¼šå†’æ³¡ç»‘å®šåˆ° document ä¸Šï¼Œæ‰€ä»¥å°½é‡é¿å…åŸç”Ÿäº‹ä»¶ä¸åˆæˆäº‹ä»¶æ··ç”¨ï¼Œå¦‚æœåŸç”Ÿäº‹ä»¶é˜»æ­¢å†’æ³¡ï¼Œå¯èƒ½ä¼šå¯¼è‡´åˆæˆäº‹ä»¶ä¸æ‰§è¡Œï¼Œå› ä¸ºéœ€è¦å†’æ³¡åˆ°document ä¸Šåˆæˆäº‹ä»¶æ‰ä¼šæ‰§è¡Œã€‚\n3. React ç»„ä»¶ä¸­æ€ä¹ˆåšäº‹ä»¶ä»£ç†ï¼Ÿå®ƒçš„åŸç†æ˜¯ä»€ä¹ˆï¼ŸReactåŸºäºVirtual DOMå®ç°äº†ä¸€ä¸ªSyntheticEventå±‚ï¼ˆåˆæˆäº‹ä»¶å±‚ï¼‰ï¼Œå®šä¹‰çš„äº‹ä»¶å¤„ç†å™¨ä¼šæ¥æ”¶åˆ°ä¸€ä¸ªåˆæˆäº‹ä»¶å¯¹è±¡çš„å®ä¾‹ï¼Œå®ƒç¬¦åˆW3Cæ ‡å‡†ï¼Œä¸”ä¸åŸç”Ÿçš„æµè§ˆå™¨äº‹ä»¶æ‹¥æœ‰åŒæ ·çš„æ¥å£ï¼Œæ”¯æŒå†’æ³¡æœºåˆ¶ï¼Œæ‰€æœ‰çš„äº‹ä»¶éƒ½è‡ªåŠ¨ç»‘å®šåœ¨æœ€å¤–å±‚ä¸Šã€‚\nåœ¨Reactåº•å±‚ï¼Œä¸»è¦å¯¹åˆæˆäº‹ä»¶åšäº†ä¸¤ä»¶äº‹ï¼š\n\näº‹ä»¶å§”æ´¾ï¼š Reactä¼šæŠŠæ‰€æœ‰çš„äº‹ä»¶ç»‘å®šåˆ°ç»“æ„çš„æœ€å¤–å±‚ï¼Œä½¿ç”¨ç»Ÿä¸€çš„äº‹ä»¶ç›‘å¬å™¨ï¼Œè¿™ä¸ªäº‹ä»¶ç›‘å¬å™¨ä¸Šç»´æŒäº†ä¸€ä¸ªæ˜ å°„æ¥ä¿å­˜æ‰€æœ‰ç»„ä»¶å†…éƒ¨äº‹ä»¶ç›‘å¬å’Œå¤„ç†å‡½æ•°ã€‚\nè‡ªåŠ¨ç»‘å®šï¼š Reactç»„ä»¶ä¸­ï¼Œæ¯ä¸ªæ–¹æ³•çš„ä¸Šä¸‹æ–‡éƒ½ä¼šæŒ‡å‘è¯¥ç»„ä»¶çš„å®ä¾‹ï¼Œå³è‡ªåŠ¨ç»‘å®šthisä¸ºå½“å‰ç»„ä»¶ã€‚\n\n4. React é«˜é˜¶ç»„ä»¶ã€Render propsã€hooks æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œä¸ºä»€ä¹ˆè¦ä¸æ–­è¿­ä»£è¿™ä¸‰è€…æ˜¯ç›®å‰reactè§£å†³ä»£ç å¤ç”¨çš„ä¸»è¦æ–¹å¼ï¼š\n\né«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰æ˜¯ React ä¸­ç”¨äºå¤ç”¨ç»„ä»¶é€»è¾‘çš„ä¸€ç§é«˜çº§æŠ€å·§ã€‚HOC è‡ªèº«ä¸æ˜¯ React API çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒæ˜¯ä¸€ç§åŸºäº React çš„ç»„åˆç‰¹æ€§è€Œå½¢æˆçš„è®¾è®¡æ¨¡å¼ã€‚å…·ä½“è€Œè¨€ï¼Œé«˜é˜¶ç»„ä»¶æ˜¯å‚æ•°ä¸ºç»„ä»¶ï¼Œè¿”å›å€¼ä¸ºæ–°ç»„ä»¶çš„å‡½æ•°ã€‚\nrender propsæ˜¯æŒ‡ä¸€ç§åœ¨ React ç»„ä»¶ä¹‹é—´ä½¿ç”¨ä¸€ä¸ªå€¼ä¸ºå‡½æ•°çš„ prop å…±äº«ä»£ç çš„ç®€å•æŠ€æœ¯ï¼Œæ›´å…·ä½“çš„è¯´ï¼Œrender prop æ˜¯ä¸€ä¸ªç”¨äºå‘ŠçŸ¥ç»„ä»¶éœ€è¦æ¸²æŸ“ä»€ä¹ˆå†…å®¹çš„å‡½æ•° propã€‚\né€šå¸¸ï¼Œrender props å’Œé«˜é˜¶ç»„ä»¶åªæ¸²æŸ“ä¸€ä¸ªå­èŠ‚ç‚¹ã€‚è®© Hook æ¥æœåŠ¡è¿™ä¸ªä½¿ç”¨åœºæ™¯æ›´åŠ ç®€å•ã€‚è¿™ä¸¤ç§æ¨¡å¼ä»æœ‰ç”¨æ­¦ä¹‹åœ°ï¼Œï¼ˆä¾‹å¦‚ï¼Œä¸€ä¸ªè™šæ‹Ÿæ»šåŠ¨æ¡ç»„ä»¶æˆ–è®¸ä¼šæœ‰ä¸€ä¸ª renderltem å±æ€§ï¼Œæˆ–æ˜¯ä¸€ä¸ªå¯è§çš„å®¹å™¨ç»„ä»¶æˆ–è®¸ä¼šæœ‰å®ƒè‡ªå·±çš„ DOM ç»“æ„ï¼‰ã€‚ä½†åœ¨å¤§éƒ¨åˆ†åœºæ™¯ä¸‹ï¼ŒHook è¶³å¤Ÿäº†ï¼Œå¹¶ä¸”èƒ½å¤Ÿå¸®åŠ©å‡å°‘åµŒå¥—ã€‚\n\nï¼ˆ1ï¼‰HOC å®˜æ–¹è§£é‡Šâˆ¶\n\n\n\n\n\n\n\n\n\né«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰æ˜¯ React ä¸­ç”¨äºå¤ç”¨ç»„ä»¶é€»è¾‘çš„ä¸€ç§é«˜çº§æŠ€å·§ã€‚HOC è‡ªèº«ä¸æ˜¯ React API çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒæ˜¯ä¸€ç§åŸºäº React çš„ç»„åˆç‰¹æ€§è€Œå½¢æˆçš„è®¾è®¡æ¨¡å¼ã€‚\nç®€è¨€ä¹‹ï¼ŒHOCæ˜¯ä¸€ç§ç»„ä»¶çš„è®¾è®¡æ¨¡å¼ï¼ŒHOCæ¥å—ä¸€ä¸ªç»„ä»¶å’Œé¢å¤–çš„å‚æ•°ï¼ˆå¦‚æœéœ€è¦ï¼‰ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„ç»„ä»¶ã€‚HOC æ˜¯çº¯å‡½æ•°ï¼Œæ²¡æœ‰å‰¯ä½œç”¨ã€‚\n&#x2F;&#x2F; hocçš„å®šä¹‰\nfunction withSubscription(WrappedComponent, selectData) &#123;\n  return class extends React.Component &#123;\n    constructor(props) &#123;\n      super(props);\n      this.state &#x3D; &#123;\n        data: selectData(DataSource, props)\n      &#125;;\n    &#125;\n    &#x2F;&#x2F; ä¸€äº›é€šç”¨çš„é€»è¾‘å¤„ç†\n    render() &#123;\n      &#x2F;&#x2F; ... å¹¶ä½¿ç”¨æ–°æ•°æ®æ¸²æŸ“è¢«åŒ…è£…çš„ç»„ä»¶!\n      return &lt;WrappedComponent data&#x3D;&#123;this.state.data&#125; &#123;...this.props&#125; &#x2F;&gt;;\n    &#125;\n  &#125;;\n\n&#x2F;&#x2F; ä½¿ç”¨\nconst BlogPostWithSubscription &#x3D; withSubscription(BlogPost,\n  (DataSource, props) &#x3D;&gt; DataSource.getBlogPost(props.id));\nå¤åˆ¶ä»£ç \n\nHOCçš„ä¼˜ç¼ºç‚¹âˆ¶\n\nä¼˜ç‚¹âˆ¶ é€»è¾‘æœç”¨ã€ä¸å½±å“è¢«åŒ…è£¹ç»„ä»¶çš„å†…éƒ¨é€»è¾‘ã€‚\nç¼ºç‚¹âˆ¶ hocä¼ é€’ç»™è¢«åŒ…è£¹ç»„ä»¶çš„propså®¹æ˜“å’Œè¢«åŒ…è£¹åçš„ç»„ä»¶é‡åï¼Œè¿›è€Œè¢«è¦†ç›–\n\nï¼ˆ2ï¼‰Render props å®˜æ–¹è§£é‡Šâˆ¶\n\n\n\n\n\n\n\n\n\nâ€œrender propâ€æ˜¯æŒ‡ä¸€ç§åœ¨ React ç»„ä»¶ä¹‹é—´ä½¿ç”¨ä¸€ä¸ªå€¼ä¸ºå‡½æ•°çš„ prop å…±äº«ä»£ç çš„ç®€å•æŠ€æœ¯\nå…·æœ‰render prop çš„ç»„ä»¶æ¥å—ä¸€ä¸ªè¿”å›Reactå…ƒç´ çš„å‡½æ•°ï¼Œå°†renderçš„æ¸²æŸ“é€»è¾‘æ³¨å…¥åˆ°ç»„ä»¶å†…éƒ¨ã€‚åœ¨è¿™é‡Œï¼Œâ€renderâ€çš„å‘½åå¯ä»¥æ˜¯ä»»ä½•å…¶ä»–æœ‰æ•ˆçš„æ ‡è¯†ç¬¦ã€‚\n&#x2F;&#x2F; DataProviderç»„ä»¶å†…éƒ¨çš„æ¸²æŸ“é€»è¾‘å¦‚ä¸‹\nclass DataProvider extends React.Components &#123;\n     state &#x3D; &#123;\n    name: &#39;Tom&#39;\n  &#125;\n\n    render() &#123;\n    return (\n        &lt;div&gt;\n          &lt;p&gt;å…±äº«æ•°æ®ç»„ä»¶è‡ªå·±å†…éƒ¨çš„æ¸²æŸ“é€»è¾‘&lt;&#x2F;p&gt;\n          &#123; this.props.render(this.state) &#125;\n      &lt;&#x2F;div&gt;\n    );\n  &#125;\n&#125;\n\n&#x2F;&#x2F; è°ƒç”¨æ–¹å¼\n&lt;DataProvider render&#x3D;&#123;data &#x3D;&gt; (\n  &lt;h1&gt;Hello &#123;data.name&#125;&lt;&#x2F;h1&gt;\n)&#125;&#x2F;&gt;\n\nå¤åˆ¶ä»£ç \n\nç”±æ­¤å¯ä»¥çœ‹åˆ°ï¼Œrender propsçš„ä¼˜ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾âˆ¶\n\nä¼˜ç‚¹ï¼šæ•°æ®å…±äº«ã€ä»£ç å¤ç”¨ï¼Œå°†ç»„ä»¶å†…çš„stateä½œä¸ºpropsä¼ é€’ç»™è°ƒç”¨è€…ï¼Œå°†æ¸²æŸ“é€»è¾‘äº¤ç»™è°ƒç”¨è€…ã€‚\nç¼ºç‚¹ï¼šæ— æ³•åœ¨ return è¯­å¥å¤–è®¿é—®æ•°æ®ã€åµŒå¥—å†™æ³•ä¸å¤Ÿä¼˜é›…\n\nï¼ˆ3ï¼‰Hooks å®˜æ–¹è§£é‡Šâˆ¶\n\n\n\n\n\n\n\n\n\nHookæ˜¯ React 16.8 çš„æ–°å¢ç‰¹æ€§ã€‚å®ƒå¯ä»¥è®©ä½ åœ¨ä¸ç¼–å†™ class çš„æƒ…å†µä¸‹ä½¿ç”¨ state ä»¥åŠå…¶ä»–çš„ React ç‰¹æ€§ã€‚é€šè¿‡è‡ªå®šä¹‰hookï¼Œå¯ä»¥å¤ç”¨ä»£ç é€»è¾‘ã€‚\n&#x2F;&#x2F; è‡ªå®šä¹‰ä¸€ä¸ªè·å–è®¢é˜…æ•°æ®çš„hook\nfunction useSubscription() &#123;\n  const data &#x3D; DataSource.getComments();\n  return [data];\n&#125;\n&#x2F;&#x2F; \nfunction CommentList(props) &#123;\n  const &#123;data&#125; &#x3D; props;\n  const [subData] &#x3D; useSubscription();\n    ...\n&#125;\n&#x2F;&#x2F; ä½¿ç”¨\n&lt;CommentList data&#x3D;&#39;hello&#39; &#x2F;&gt;\nå¤åˆ¶ä»£ç \n\nä»¥ä¸Šå¯ä»¥çœ‹å‡ºï¼Œhookè§£å†³äº†hocçš„propè¦†ç›–çš„é—®é¢˜ï¼ŒåŒæ—¶ä½¿ç”¨çš„æ–¹å¼è§£å†³äº†render propsçš„åµŒå¥—åœ°ç‹±çš„é—®é¢˜ã€‚hookçš„ä¼˜ç‚¹å¦‚ä¸‹âˆ¶\n\nä½¿ç”¨ç›´è§‚ï¼›\nè§£å†³hocçš„prop é‡åé—®é¢˜ï¼›\nè§£å†³render props å› å…±äº«æ•°æ® è€Œå‡ºç°åµŒå¥—åœ°ç‹±çš„é—®é¢˜ï¼›\nèƒ½åœ¨returnä¹‹å¤–ä½¿ç”¨æ•°æ®çš„é—®é¢˜ã€‚\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼šhookåªèƒ½åœ¨ç»„ä»¶é¡¶å±‚ä½¿ç”¨ï¼Œä¸å¯åœ¨åˆ†æ”¯è¯­å¥ä¸­ä½¿ç”¨ã€‚\næ€»ç»“âˆ¶ Hocã€render propså’Œhookéƒ½æ˜¯ä¸ºäº†è§£å†³ä»£ç å¤ç”¨çš„é—®é¢˜ï¼Œä½†æ˜¯hocå’Œrender propséƒ½æœ‰ç‰¹å®šçš„ä½¿ç”¨åœºæ™¯å’Œæ˜æ˜¾çš„ç¼ºç‚¹ã€‚hookæ˜¯react16.8æ›´æ–°çš„æ–°çš„APIï¼Œè®©ç»„ä»¶é€»è¾‘å¤ç”¨æ›´ç®€æ´æ˜äº†ï¼ŒåŒæ—¶ä¹Ÿè§£å†³äº†hocå’Œrender propsçš„ä¸€äº›ç¼ºç‚¹ã€‚\n5. å¯¹React-Fiberçš„ç†è§£ï¼Œå®ƒè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼ŸReact V15 åœ¨æ¸²æŸ“æ—¶ï¼Œä¼šé€’å½’æ¯”å¯¹ VirtualDOM æ ‘ï¼Œæ‰¾å‡ºéœ€è¦å˜åŠ¨çš„èŠ‚ç‚¹ï¼Œç„¶ååŒæ­¥æ›´æ–°å®ƒä»¬ï¼Œ ä¸€æ°”å‘µæˆã€‚è¿™ä¸ªè¿‡ç¨‹æœŸé—´ï¼Œ React ä¼šå æ®æµè§ˆå™¨èµ„æºï¼Œè¿™ä¼šå¯¼è‡´ç”¨æˆ·è§¦å‘çš„äº‹ä»¶å¾—ä¸åˆ°å“åº”ï¼Œå¹¶ä¸”ä¼šå¯¼è‡´æ‰å¸§ï¼Œå¯¼è‡´ç”¨æˆ·æ„Ÿè§‰åˆ°å¡é¡¿ã€‚\nä¸ºäº†ç»™ç”¨æˆ·åˆ¶é€ ä¸€ç§åº”ç”¨å¾ˆå¿«çš„â€œå‡è±¡â€ï¼Œä¸èƒ½è®©ä¸€ä¸ªä»»åŠ¡é•¿æœŸéœ¸å ç€èµ„æºã€‚ å¯ä»¥å°†æµè§ˆå™¨çš„æ¸²æŸ“ã€å¸ƒå±€ã€ç»˜åˆ¶ã€èµ„æºåŠ è½½(ä¾‹å¦‚ HTML è§£æ)ã€äº‹ä»¶å“åº”ã€è„šæœ¬æ‰§è¡Œè§†ä½œæ“ä½œç³»ç»Ÿçš„â€œè¿›ç¨‹â€ï¼Œéœ€è¦é€šè¿‡æŸäº›è°ƒåº¦ç­–ç•¥åˆç†åœ°åˆ†é… CPU èµ„æºï¼Œä»è€Œæé«˜æµè§ˆå™¨çš„ç”¨æˆ·å“åº”é€Ÿç‡, åŒæ—¶å…¼é¡¾ä»»åŠ¡æ‰§è¡Œæ•ˆç‡ã€‚\næ‰€ä»¥ React é€šè¿‡Fiber æ¶æ„ï¼Œè®©è¿™ä¸ªæ‰§è¡Œè¿‡ç¨‹å˜æˆå¯è¢«ä¸­æ–­ã€‚â€œé€‚æ—¶â€åœ°è®©å‡º CPU æ‰§è¡Œæƒï¼Œé™¤äº†å¯ä»¥è®©æµè§ˆå™¨åŠæ—¶åœ°å“åº”ç”¨æˆ·çš„äº¤äº’ï¼Œè¿˜æœ‰å…¶ä»–å¥½å¤„:\n\nåˆ†æ‰¹å»¶æ—¶å¯¹DOMè¿›è¡Œæ“ä½œï¼Œé¿å…ä¸€æ¬¡æ€§æ“ä½œå¤§é‡ DOM èŠ‚ç‚¹ï¼Œå¯ä»¥å¾—åˆ°æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼›\nç»™æµè§ˆå™¨ä¸€ç‚¹å–˜æ¯çš„æœºä¼šï¼Œå®ƒä¼šå¯¹ä»£ç è¿›è¡Œç¼–è¯‘ä¼˜åŒ–ï¼ˆJITï¼‰åŠè¿›è¡Œçƒ­ä»£ç ä¼˜åŒ–ï¼Œæˆ–è€…å¯¹ reflow è¿›è¡Œä¿®æ­£ã€‚\n\næ ¸å¿ƒæ€æƒ³: Fiber ä¹Ÿç§°åç¨‹æˆ–è€…çº¤ç¨‹ã€‚å®ƒå’Œçº¿ç¨‹å¹¶ä¸ä¸€æ ·ï¼Œåç¨‹æœ¬èº«æ˜¯æ²¡æœ‰å¹¶å‘æˆ–è€…å¹¶è¡Œèƒ½åŠ›çš„ï¼ˆéœ€è¦é…åˆçº¿ç¨‹ï¼‰ï¼Œå®ƒåªæ˜¯ä¸€ç§æ§åˆ¶æµç¨‹çš„è®©å‡ºæœºåˆ¶ã€‚è®©å‡º CPU çš„æ‰§è¡Œæƒï¼Œè®© CPU èƒ½åœ¨è¿™æ®µæ—¶é—´æ‰§è¡Œå…¶ä»–çš„æ“ä½œã€‚æ¸²æŸ“çš„è¿‡ç¨‹å¯ä»¥è¢«ä¸­æ–­ï¼Œå¯ä»¥å°†æ§åˆ¶æƒäº¤å›æµè§ˆå™¨ï¼Œè®©ä½ç»™é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡ï¼Œæµè§ˆå™¨ç©ºé—²åå†æ¢å¤æ¸²æŸ“ã€‚\n6. React.Component å’Œ React.PureComponent çš„åŒºåˆ«PureComponentè¡¨ç¤ºä¸€ä¸ªçº¯ç»„ä»¶ï¼Œå¯ä»¥ç”¨æ¥ä¼˜åŒ–Reactç¨‹åºï¼Œå‡å°‘renderå‡½æ•°æ‰§è¡Œçš„æ¬¡æ•°ï¼Œä»è€Œæé«˜ç»„ä»¶çš„æ€§èƒ½ã€‚\nåœ¨Reactä¸­ï¼Œå½“propæˆ–è€…stateå‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¯ä»¥é€šè¿‡åœ¨shouldComponentUpdateç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­æ‰§è¡Œreturn falseæ¥é˜»æ­¢é¡µé¢çš„æ›´æ–°ï¼Œä»è€Œå‡å°‘ä¸å¿…è¦çš„renderæ‰§è¡Œã€‚React.PureComponentä¼šè‡ªåŠ¨æ‰§è¡ŒÂ shouldComponentUpdateã€‚\nä¸è¿‡ï¼ŒpureComponentä¸­çš„ shouldComponentUpdate()Â è¿›è¡Œçš„æ˜¯æµ…æ¯”è¾ƒï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœæ˜¯å¼•ç”¨æ•°æ®ç±»å‹çš„æ•°æ®ï¼Œåªä¼šæ¯”è¾ƒä¸æ˜¯åŒä¸€ä¸ªåœ°å€ï¼Œè€Œä¸ä¼šæ¯”è¾ƒè¿™ä¸ªåœ°å€é‡Œé¢çš„æ•°æ®æ˜¯å¦ä¸€è‡´ã€‚æµ…æ¯”è¾ƒä¼šå¿½ç•¥å±æ€§å’Œæˆ–çŠ¶æ€çªå˜æƒ…å†µï¼Œå…¶å®ä¹Ÿå°±æ˜¯æ•°æ®å¼•ç”¨æŒ‡é’ˆæ²¡æœ‰å˜åŒ–ï¼Œè€Œæ•°æ®å‘ç”Ÿæ”¹å˜çš„æ—¶å€™renderæ˜¯ä¸ä¼šæ‰§è¡Œçš„ã€‚å¦‚æœéœ€è¦é‡æ–°æ¸²æŸ“é‚£ä¹ˆå°±éœ€è¦é‡æ–°å¼€è¾Ÿç©ºé—´å¼•ç”¨æ•°æ®ã€‚PureComponentä¸€èˆ¬ä¼šç”¨åœ¨ä¸€äº›çº¯å±•ç¤ºç»„ä»¶ä¸Šã€‚\nä½¿ç”¨pureComponentçš„å¥½å¤„ï¼šå½“ç»„ä»¶æ›´æ–°æ—¶ï¼Œå¦‚æœç»„ä»¶çš„propsæˆ–è€…stateéƒ½æ²¡æœ‰æ”¹å˜ï¼Œrenderå‡½æ•°å°±ä¸ä¼šè§¦å‘ã€‚çœå»è™šæ‹ŸDOMçš„ç”Ÿæˆå’Œå¯¹æ¯”è¿‡ç¨‹ï¼Œè¾¾åˆ°æå‡æ€§èƒ½çš„ç›®çš„ã€‚è¿™æ˜¯å› ä¸ºreactè‡ªåŠ¨åšäº†ä¸€å±‚æµ…æ¯”è¾ƒã€‚\n7. Component, Element, Instance ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«å’Œè”ç³»ï¼Ÿ\nå…ƒç´ ï¼š ä¸€ä¸ªå…ƒç´ elementæ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡(plain object)ï¼Œæè¿°äº†å¯¹äºä¸€ä¸ªDOMèŠ‚ç‚¹æˆ–è€…å…¶ä»–ç»„ä»¶componentï¼Œä½ æƒ³è®©å®ƒåœ¨å±å¹•ä¸Šå‘ˆç°æˆä»€ä¹ˆæ ·å­ã€‚å…ƒç´ elementå¯ä»¥åœ¨å®ƒçš„å±æ€§propsä¸­åŒ…å«å…¶ä»–å…ƒç´ (è¯‘æ³¨:ç”¨äºå½¢æˆå…ƒç´ æ ‘)ã€‚åˆ›å»ºä¸€ä¸ªReactå…ƒç´ elementæˆæœ¬å¾ˆä½ã€‚å…ƒç´ elementåˆ›å»ºä¹‹åæ˜¯ä¸å¯å˜çš„ã€‚\nç»„ä»¶ï¼š ä¸€ä¸ªç»„ä»¶componentå¯ä»¥é€šè¿‡å¤šç§æ–¹å¼å£°æ˜ã€‚å¯ä»¥æ˜¯å¸¦æœ‰ä¸€ä¸ªrender()æ–¹æ³•çš„ç±»ï¼Œç®€å•ç‚¹ä¹Ÿå¯ä»¥å®šä¹‰ä¸ºä¸€ä¸ªå‡½æ•°ã€‚è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œå®ƒéƒ½æŠŠå±æ€§propsä½œä¸ºè¾“å…¥ï¼ŒæŠŠè¿”å›çš„ä¸€æ£µå…ƒç´ æ ‘ä½œä¸ºè¾“å‡ºã€‚\nå®ä¾‹ï¼š ä¸€ä¸ªå®ä¾‹instanceæ˜¯ä½ åœ¨æ‰€å†™çš„ç»„ä»¶ç±»component classä¸­ä½¿ç”¨å…³é”®å­—thisæ‰€æŒ‡å‘çš„ä¸œè¥¿(è¯‘æ³¨:ç»„ä»¶å®ä¾‹)ã€‚å®ƒç”¨æ¥å­˜å‚¨æœ¬åœ°çŠ¶æ€å’Œå“åº”ç”Ÿå‘½å‘¨æœŸäº‹ä»¶å¾ˆæœ‰ç”¨ã€‚\n\nå‡½æ•°å¼ç»„ä»¶(Functional component)æ ¹æœ¬æ²¡æœ‰å®ä¾‹instanceã€‚ç±»ç»„ä»¶(Class component)æœ‰å®ä¾‹instanceï¼Œä½†æ˜¯æ°¸è¿œä¹Ÿä¸éœ€è¦ç›´æ¥åˆ›å»ºä¸€ä¸ªç»„ä»¶çš„å®ä¾‹ï¼Œå› ä¸ºReactå¸®æˆ‘ä»¬åšäº†è¿™äº›ã€‚\n8. React.createClasså’Œextends Componentçš„åŒºåˆ«æœ‰å“ªäº›ï¼ŸReact.createClasså’Œextends Componentçš„baiåŒºåˆ«ä¸»è¦åœ¨äºï¼š\nï¼ˆ1ï¼‰è¯­æ³•åŒºåˆ«\n\ncreateClassæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå·¥å‚å‡½æ•°ï¼Œextendsçš„æ–¹å¼æ›´åŠ æ¥è¿‘æœ€æ–°çš„ES6è§„èŒƒçš„classå†™æ³•ã€‚ä¸¤ç§æ–¹å¼åœ¨è¯­æ³•ä¸Šçš„å·®åˆ«ä¸»è¦ä½“ç°åœ¨æ–¹æ³•çš„å®šä¹‰å’Œé™æ€å±æ€§çš„å£°æ˜ä¸Šã€‚\ncreateClassæ–¹å¼çš„æ–¹æ³•å®šä¹‰ä½¿ç”¨é€—å·ï¼Œéš”å¼€ï¼Œå› ä¸ºcreatClassæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¼ é€’ç»™å®ƒçš„æ˜¯ä¸€ä¸ªObjectï¼›è€Œclassçš„æ–¹å¼å®šä¹‰æ–¹æ³•æ—¶åŠ¡å¿…è°¨è®°ä¸è¦ä½¿ç”¨é€—å·éš”å¼€ï¼Œè¿™æ˜¯ES6 classçš„è¯­æ³•è§„èŒƒã€‚\n\nï¼ˆ2ï¼‰propType å’Œ getDefaultProps\n\nReact.createClassï¼šé€šè¿‡proTypeså¯¹è±¡å’ŒgetDefaultProps()æ–¹æ³•æ¥è®¾ç½®å’Œè·å–props.\nReact.Componentï¼šé€šè¿‡è®¾ç½®ä¸¤ä¸ªå±æ€§propTypeså’ŒdefaultProps\n\nï¼ˆ3ï¼‰çŠ¶æ€çš„åŒºåˆ«\n\nReact.createClassï¼šé€šè¿‡getInitialState()æ–¹æ³•è¿”å›ä¸€ä¸ªåŒ…å«åˆå§‹å€¼çš„å¯¹è±¡\nReact.Componentï¼šé€šè¿‡constructorè®¾ç½®åˆå§‹çŠ¶æ€\n\nï¼ˆ4ï¼‰thisåŒºåˆ«\n\nReact.createClassï¼šä¼šæ­£ç¡®ç»‘å®šthis\nReact.Componentï¼šç”±äºä½¿ç”¨äº† ES6ï¼Œè¿™é‡Œä¼šæœ‰äº›å¾®ä¸åŒï¼Œå±æ€§å¹¶ä¸ä¼šè‡ªåŠ¨ç»‘å®šåˆ° React ç±»çš„å®ä¾‹ä¸Šã€‚\n\nï¼ˆ5ï¼‰Mixins\n\nReact.createClassï¼šä½¿ç”¨ React.createClass çš„è¯ï¼Œå¯ä»¥åœ¨åˆ›å»ºç»„ä»¶æ—¶æ·»åŠ ä¸€ä¸ªå«åš mixins çš„å±æ€§ï¼Œå¹¶å°†å¯ä¾›æ··åˆçš„ç±»çš„é›†åˆä»¥æ•°ç»„çš„å½¢å¼èµ‹ç»™ mixinsã€‚\nå¦‚æœä½¿ç”¨ ES6 çš„æ–¹å¼æ¥åˆ›å»ºç»„ä»¶ï¼Œé‚£ä¹ˆ React mixins çš„ç‰¹æ€§å°†ä¸èƒ½è¢«ä½¿ç”¨äº†ã€‚\n\n9. React é«˜é˜¶ç»„ä»¶æ˜¯ä»€ä¹ˆï¼Œå’Œæ™®é€šç»„ä»¶æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œé€‚ç”¨ä»€ä¹ˆåœºæ™¯å®˜æ–¹è§£é‡Šâˆ¶\n\n\n\n\n\n\n\n\n\né«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰æ˜¯ React ä¸­ç”¨äºå¤ç”¨ç»„ä»¶é€»è¾‘çš„ä¸€ç§é«˜çº§æŠ€å·§ã€‚HOC è‡ªèº«ä¸æ˜¯ React API çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒæ˜¯ä¸€ç§åŸºäº React çš„ç»„åˆç‰¹æ€§è€Œå½¢æˆçš„è®¾è®¡æ¨¡å¼ã€‚\né«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¸”è¯¥å‡½æ•°æ¥å—ä¸€ä¸ªç»„ä»¶ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„ç»„ä»¶ï¼Œå®ƒåªæ˜¯ä¸€ç§ç»„ä»¶çš„è®¾è®¡æ¨¡å¼ï¼Œè¿™ç§è®¾è®¡æ¨¡å¼æ˜¯ç”±reactè‡ªèº«çš„ç»„åˆæ€§è´¨å¿…ç„¶äº§ç”Ÿçš„ã€‚æˆ‘ä»¬å°†å®ƒä»¬ç§°ä¸ºçº¯ç»„ä»¶ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥æ¥å—ä»»ä½•åŠ¨æ€æä¾›çš„å­ç»„ä»¶ï¼Œä½†å®ƒä»¬ä¸ä¼šä¿®æ”¹æˆ–å¤åˆ¶å…¶è¾“å…¥ç»„ä»¶ä¸­çš„ä»»ä½•è¡Œä¸ºã€‚\n&#x2F;&#x2F; hocçš„å®šä¹‰\nfunction withSubscription(WrappedComponent, selectData) &#123;\n  return class extends React.Component &#123;\n    constructor(props) &#123;\n      super(props);\n      this.state &#x3D; &#123;\n        data: selectData(DataSource, props)\n      &#125;;\n    &#125;\n    &#x2F;&#x2F; ä¸€äº›é€šç”¨çš„é€»è¾‘å¤„ç†\n    render() &#123;\n      &#x2F;&#x2F; ... å¹¶ä½¿ç”¨æ–°æ•°æ®æ¸²æŸ“è¢«åŒ…è£…çš„ç»„ä»¶!\n      return &lt;WrappedComponent data&#x3D;&#123;this.state.data&#125; &#123;...this.props&#125; &#x2F;&gt;;\n    &#125;\n  &#125;;\n\n&#x2F;&#x2F; ä½¿ç”¨\nconst BlogPostWithSubscription &#x3D; withSubscription(BlogPost,\n  (DataSource, props) &#x3D;&gt; DataSource.getBlogPost(props.id));\nå¤åˆ¶ä»£ç \n\n1ï¼‰HOCçš„ä¼˜ç¼ºç‚¹\n\nä¼˜ç‚¹âˆ¶ é€»è¾‘æœç”¨ã€ä¸å½±å“è¢«åŒ…è£¹ç»„ä»¶çš„å†…éƒ¨é€»è¾‘ã€‚\nç¼ºç‚¹âˆ¶hocä¼ é€’ç»™è¢«åŒ…è£¹ç»„ä»¶çš„propså®¹æ˜“å’Œè¢«åŒ…è£¹åçš„ç»„ä»¶é‡åï¼Œè¿›è€Œè¢«è¦†ç›–\n\n2ï¼‰é€‚ç”¨åœºæ™¯\n\nä»£ç å¤ç”¨ï¼Œé€»è¾‘æŠ½è±¡\næ¸²æŸ“åŠ«æŒ\nState æŠ½è±¡å’Œæ›´æ”¹\nProps æ›´æ”¹\n\n3ï¼‰å…·ä½“åº”ç”¨ä¾‹å­\n\næƒé™æ§åˆ¶ï¼š åˆ©ç”¨é«˜é˜¶ç»„ä»¶çš„ æ¡ä»¶æ¸²æŸ“ ç‰¹æ€§å¯ä»¥å¯¹é¡µé¢è¿›è¡Œæƒé™æ§åˆ¶ï¼Œæƒé™æ§åˆ¶ä¸€èˆ¬åˆ†ä¸ºä¸¤ä¸ªç»´åº¦ï¼šé¡µé¢çº§åˆ«å’Œ é¡µé¢å…ƒç´ çº§åˆ«\n\n&#x2F;&#x2F; HOC.js\nfunction withAdminAuth(WrappedComponent) &#123;\n    return class extends React.Component &#123;\n        state &#x3D; &#123;\n            isAdmin: false,\n        &#125;\n        async UNSAFE_componentWillMount() &#123;\n            const currentRole &#x3D; await getCurrentUserRole();\n            this.setState(&#123;\n                isAdmin: currentRole &#x3D;&#x3D;&#x3D; &#39;Admin&#39;,\n            &#125;);\n        &#125;\n        render() &#123;\n            if (this.state.isAdmin) &#123;\n                return &lt;WrappedComponent &#123;...this.props&#125; &#x2F;&gt;;\n            &#125; else &#123;\n                return (&lt;div&gt;æ‚¨æ²¡æœ‰æƒé™æŸ¥çœ‹è¯¥é¡µé¢ï¼Œè¯·è”ç³»ç®¡ç†å‘˜ï¼&lt;&#x2F;div&gt;);\n            &#125;\n        &#125;\n    &#125;;\n&#125;\n\n&#x2F;&#x2F; pages&#x2F;page-a.js\nclass PageA extends React.Component &#123;\n    constructor(props) &#123;\n        super(props);\n        &#x2F;&#x2F; something here...\n    &#125;\n    UNSAFE_componentWillMount() &#123;\n        &#x2F;&#x2F; fetching data\n    &#125;\n    render() &#123;\n        &#x2F;&#x2F; render page with data\n    &#125;\n&#125;\nexport default withAdminAuth(PageA);\n\n\n&#x2F;&#x2F; pages&#x2F;page-b.js\nclass PageB extends React.Component &#123;\n    constructor(props) &#123;\n        super(props);\n    &#x2F;&#x2F; something here...\n        &#125;\n    UNSAFE_componentWillMount() &#123;\n    &#x2F;&#x2F; fetching data\n    &#125;\n    render() &#123;\n    &#x2F;&#x2F; render page with data\n    &#125;\n&#125;\nexport default withAdminAuth(PageB);\nå¤åˆ¶ä»£ç \n\n\nç»„ä»¶æ¸²æŸ“æ€§èƒ½è¿½è¸ªï¼š å€ŸåŠ©çˆ¶ç»„ä»¶å­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸè§„åˆ™æ•è·å­ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¯ä»¥æ–¹ä¾¿çš„å¯¹æŸä¸ªç»„ä»¶çš„æ¸²æŸ“æ—¶é—´è¿›è¡Œè®°å½•âˆ¶\n\nclass Home extends React.Component &#123;\n        render() &#123;\n            return (&lt;h1&gt;Hello World.&lt;&#x2F;h1&gt;);\n        &#125;\n    &#125;\n    function withTiming(WrappedComponent) &#123;\n        return class extends WrappedComponent &#123;\n            constructor(props) &#123;\n                super(props);\n                this.start &#x3D; 0;\n                this.end &#x3D; 0;\n            &#125;\n            UNSAFE_componentWillMount() &#123;\n                super.componentWillMount &amp;&amp; super.componentWillMount();\n                this.start &#x3D; Date.now();\n            &#125;\n            componentDidMount() &#123;\n                super.componentDidMount &amp;&amp; super.componentDidMount();\n                this.end &#x3D; Date.now();\n                console.log(&#96;$&#123;WrappedComponent.name&#125; ç»„ä»¶æ¸²æŸ“æ—¶é—´ä¸º $&#123;this.end - this.start&#125; ms&#96;);\n            &#125;\n            render() &#123;\n                return super.render();\n            &#125;\n        &#125;;\n    &#125;\n\n    export default withTiming(Home);   \n\n\nå¤åˆ¶ä»£ç \n\næ³¨æ„ï¼šwithTiming æ˜¯åˆ©ç”¨ åå‘ç»§æ‰¿ å®ç°çš„ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ï¼ŒåŠŸèƒ½æ˜¯è®¡ç®—è¢«åŒ…è£¹ç»„ä»¶ï¼ˆè¿™é‡Œæ˜¯ Home ç»„ä»¶ï¼‰çš„æ¸²æŸ“æ—¶é—´ã€‚\n\né¡µé¢å¤ç”¨\n\nconst withFetching &#x3D; fetching &#x3D;&gt; WrappedComponent &#x3D;&gt; &#123;\n    return class extends React.Component &#123;\n        state &#x3D; &#123;\n            data: [],\n        &#125;\n        async UNSAFE_componentWillMount() &#123;\n            const data &#x3D; await fetching();\n            this.setState(&#123;\n                data,\n            &#125;);\n        &#125;\n        render() &#123;\n            return &lt;WrappedComponent data&#x3D;&#123;this.state.data&#125; &#123;...this.props&#125; &#x2F;&gt;;\n        &#125;\n    &#125;\n&#125;\n\n&#x2F;&#x2F; pages&#x2F;page-a.js\nexport default withFetching(fetching(&#39;science-fiction&#39;))(MovieList);\n&#x2F;&#x2F; pages&#x2F;page-b.js\nexport default withFetching(fetching(&#39;action&#39;))(MovieList);\n&#x2F;&#x2F; pages&#x2F;page-other.js\nexport default withFetching(fetching(&#39;some-other-type&#39;))(MovieList);\nå¤åˆ¶ä»£ç \n\n10. å¯¹componentWillReceiveProps çš„ç†è§£è¯¥æ–¹æ³•å½“propså‘ç”Ÿå˜åŒ–æ—¶æ‰§è¡Œï¼Œåˆå§‹åŒ–renderæ—¶ä¸æ‰§è¡Œï¼Œåœ¨è¿™ä¸ªå›è°ƒå‡½æ•°é‡Œé¢ï¼Œä½ å¯ä»¥æ ¹æ®å±æ€§çš„å˜åŒ–ï¼Œé€šè¿‡è°ƒç”¨this.setState()æ¥æ›´æ–°ä½ çš„ç»„ä»¶çŠ¶æ€ï¼Œæ—§çš„å±æ€§è¿˜æ˜¯å¯ä»¥é€šè¿‡this.propsæ¥è·å–,è¿™é‡Œè°ƒç”¨æ›´æ–°çŠ¶æ€æ˜¯å®‰å…¨çš„ï¼Œå¹¶ä¸ä¼šè§¦å‘é¢å¤–çš„renderè°ƒç”¨ã€‚\nä½¿ç”¨å¥½å¤„ï¼š åœ¨è¿™ä¸ªç”Ÿå‘½å‘¨æœŸä¸­ï¼Œå¯ä»¥åœ¨å­ç»„ä»¶çš„renderå‡½æ•°æ‰§è¡Œå‰è·å–æ–°çš„propsï¼Œä»è€Œæ›´æ–°å­ç»„ä»¶è‡ªå·±çš„stateã€‚Â å¯ä»¥å°†æ•°æ®è¯·æ±‚æ”¾åœ¨è¿™é‡Œè¿›è¡Œæ‰§è¡Œï¼Œéœ€è¦ä¼ çš„å‚æ•°åˆ™ä»componentWillReceiveProps(nextProps)ä¸­è·å–ã€‚è€Œä¸å¿…å°†æ‰€æœ‰çš„è¯·æ±‚éƒ½æ”¾åœ¨çˆ¶ç»„ä»¶ä¸­ã€‚äºæ˜¯è¯¥è¯·æ±‚åªä¼šåœ¨è¯¥ç»„ä»¶æ¸²æŸ“æ—¶æ‰ä¼šå‘å‡ºï¼Œä»è€Œå‡è½»è¯·æ±‚è´Ÿæ‹…ã€‚\ncomponentWillReceivePropsåœ¨åˆå§‹åŒ–renderçš„æ—¶å€™ä¸ä¼šæ‰§è¡Œï¼Œå®ƒä¼šåœ¨Componentæ¥å—åˆ°æ–°çš„çŠ¶æ€(Props)æ—¶è¢«è§¦å‘ï¼Œä¸€èˆ¬ç”¨äºçˆ¶ç»„ä»¶çŠ¶æ€æ›´æ–°æ—¶å­ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚\n11. å“ªäº›æ–¹æ³•ä¼šè§¦å‘ React é‡æ–°æ¸²æŸ“ï¼Ÿé‡æ–°æ¸²æŸ“ render ä¼šåšäº›ä»€ä¹ˆï¼Ÿï¼ˆ1ï¼‰å“ªäº›æ–¹æ³•ä¼šè§¦å‘ react é‡æ–°æ¸²æŸ“?\n\nsetStateï¼ˆï¼‰æ–¹æ³•è¢«è°ƒç”¨\n\nsetState æ˜¯ React ä¸­æœ€å¸¸ç”¨çš„å‘½ä»¤ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œæ‰§è¡Œ setState ä¼šè§¦å‘ renderã€‚ä½†æ˜¯è¿™é‡Œæœ‰ä¸ªç‚¹å€¼å¾—å…³æ³¨ï¼Œæ‰§è¡Œ setState çš„æ—¶å€™ä¸ä¸€å®šä¼šé‡æ–°æ¸²æŸ“ã€‚å½“ setState ä¼ å…¥ null æ—¶ï¼Œå¹¶ä¸ä¼šè§¦å‘ renderã€‚\nclass App extends React.Component &#123;\n  state &#x3D; &#123;\n    a: 1\n  &#125;;\n\n  render() &#123;\n    console.log(&quot;render&quot;);\n    return (\n      &lt;React.Fragement&gt;\n        &lt;p&gt;&#123;this.state.a&#125;&lt;&#x2F;p&gt;\n        &lt;button\n          onClick&#x3D;&#123;() &#x3D;&gt; &#123;\n            this.setState(&#123; a: 1 &#125;); &#x2F;&#x2F; è¿™é‡Œå¹¶æ²¡æœ‰æ”¹å˜ a çš„å€¼\n          &#125;&#125;\n        &gt;\n          Click me\n        &lt;&#x2F;button&gt;\n        &lt;button onClick&#x3D;&#123;() &#x3D;&gt; this.setState(null)&#125;&gt;setState null&lt;&#x2F;button&gt;\n        &lt;Child &#x2F;&gt;\n      &lt;&#x2F;React.Fragement&gt;\n    );\n  &#125;\n&#125;\nå¤åˆ¶ä»£ç \n\n\nçˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“\n\nåªè¦çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“äº†ï¼Œå³ä½¿ä¼ å…¥å­ç»„ä»¶çš„ props æœªå‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆå­ç»„ä»¶ä¹Ÿä¼šé‡æ–°æ¸²æŸ“ï¼Œè¿›è€Œè§¦å‘ render\nï¼ˆ2ï¼‰é‡æ–°æ¸²æŸ“ render ä¼šåšäº›ä»€ä¹ˆ?\n\nä¼šå¯¹æ–°æ—§ VNode è¿›è¡Œå¯¹æ¯”ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„Diffç®—æ³•ã€‚\nå¯¹æ–°æ—§ä¸¤æ£µæ ‘è¿›è¡Œä¸€ä¸ªæ·±åº¦ä¼˜å…ˆéå†ï¼Œè¿™æ ·æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½ä¼šä¸€ä¸ªæ ‡è®°ï¼Œåœ¨åˆ°æ·±åº¦éå†çš„æ—¶å€™ï¼Œæ¯éå†åˆ°ä¸€å’Œä¸ªèŠ‚ç‚¹ï¼Œå°±æŠŠè¯¥èŠ‚ç‚¹å’Œæ–°çš„èŠ‚ç‚¹æ ‘è¿›è¡Œå¯¹æ¯”ï¼Œå¦‚æœæœ‰å·®å¼‚å°±æ”¾åˆ°ä¸€ä¸ªå¯¹è±¡é‡Œé¢\néå†å·®å¼‚å¯¹è±¡ï¼Œæ ¹æ®å·®å¼‚çš„ç±»å‹ï¼Œæ ¹æ®å¯¹åº”å¯¹è§„åˆ™æ›´æ–°VNode\n\nReact çš„å¤„ç† render çš„åŸºæœ¬æ€ç»´æ¨¡å¼æ˜¯æ¯æ¬¡ä¸€æœ‰å˜åŠ¨å°±ä¼šå»é‡æ–°æ¸²æŸ“æ•´ä¸ªåº”ç”¨ã€‚åœ¨ Virtual DOM æ²¡æœ‰å‡ºç°ä¹‹å‰ï¼Œæœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯ç›´æ¥è°ƒç”¨ innerHTMLã€‚Virtual DOMå‰å®³çš„åœ°æ–¹å¹¶ä¸æ˜¯è¯´å®ƒæ¯”ç›´æ¥æ“ä½œ DOM å¿«ï¼Œè€Œæ˜¯è¯´ä¸ç®¡æ•°æ®æ€ä¹ˆå˜ï¼Œéƒ½ä¼šå°½é‡ä»¥æœ€å°çš„ä»£ä»·å»æ›´æ–° DOMã€‚React å°† render å‡½æ•°è¿”å›çš„è™šæ‹Ÿ DOM æ ‘ä¸è€çš„è¿›è¡Œæ¯”è¾ƒï¼Œä»è€Œç¡®å®š DOM è¦ä¸è¦æ›´æ–°ã€æ€ä¹ˆæ›´æ–°ã€‚å½“ DOM æ ‘å¾ˆå¤§æ—¶ï¼Œéå†ä¸¤æ£µæ ‘è¿›è¡Œå„ç§æ¯”å¯¹è¿˜æ˜¯ç›¸å½“è€—æ€§èƒ½çš„ï¼Œç‰¹åˆ«æ˜¯åœ¨é¡¶å±‚ setState ä¸€ä¸ªå¾®å°çš„ä¿®æ”¹ï¼Œé»˜è®¤ä¼šå»éå†æ•´æ£µæ ‘ã€‚å°½ç®¡ React ä½¿ç”¨é«˜åº¦ä¼˜åŒ–çš„ Diff ç®—æ³•ï¼Œä½†æ˜¯è¿™ä¸ªè¿‡ç¨‹ä»ç„¶ä¼šæŸè€—æ€§èƒ½.\n12. Reactå¦‚ä½•åˆ¤æ–­ä»€ä¹ˆæ—¶å€™é‡æ–°æ¸²æŸ“ç»„ä»¶ï¼Ÿç»„ä»¶çŠ¶æ€çš„æ”¹å˜å¯ä»¥å› ä¸ºpropsçš„æ”¹å˜ï¼Œæˆ–è€…ç›´æ¥é€šè¿‡setStateæ–¹æ³•æ”¹å˜ã€‚ç»„ä»¶è·å¾—æ–°çš„çŠ¶æ€ï¼Œç„¶åReactå†³å®šæ˜¯å¦åº”è¯¥é‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚åªè¦ç»„ä»¶çš„stateå‘ç”Ÿå˜åŒ–ï¼ŒReactå°±ä¼šå¯¹ç»„ä»¶è¿›è¡Œé‡æ–°æ¸²æŸ“ã€‚è¿™æ˜¯å› ä¸ºReactä¸­çš„shouldComponentUpdateæ–¹æ³•é»˜è®¤è¿”å›trueï¼Œè¿™å°±æ˜¯å¯¼è‡´æ¯æ¬¡æ›´æ–°éƒ½é‡æ–°æ¸²æŸ“çš„åŸå› ã€‚\nå½“Reactå°†è¦æ¸²æŸ“ç»„ä»¶æ—¶ä¼šæ‰§è¡ŒshouldComponentUpdateæ–¹æ³•æ¥çœ‹å®ƒæ˜¯å¦è¿”å›trueï¼ˆç»„ä»¶åº”è¯¥æ›´æ–°ï¼Œä¹Ÿå°±æ˜¯é‡æ–°æ¸²æŸ“ï¼‰ã€‚æ‰€ä»¥éœ€è¦é‡å†™shouldComponentUpdateæ–¹æ³•è®©å®ƒæ ¹æ®æƒ…å†µè¿”å›trueæˆ–è€…falseæ¥å‘Šè¯‰Reactä»€ä¹ˆæ—¶å€™é‡æ–°æ¸²æŸ“ä»€ä¹ˆæ—¶å€™è·³è¿‡é‡æ–°æ¸²æŸ“ã€‚\n13. Reactå£°æ˜ç»„ä»¶æœ‰å“ªå‡ ç§æ–¹æ³•ï¼Œæœ‰ä»€ä¹ˆä¸åŒï¼ŸReact å£°æ˜ç»„ä»¶çš„ä¸‰ç§æ–¹å¼ï¼š\n\nå‡½æ•°å¼å®šä¹‰çš„æ— çŠ¶æ€ç»„ä»¶\nES5åŸç”Ÿæ–¹å¼React.createClasså®šä¹‰çš„ç»„ä»¶\nES6å½¢å¼çš„extends React.Componentå®šä¹‰çš„ç»„ä»¶\n\nï¼ˆ1ï¼‰æ— çŠ¶æ€å‡½æ•°å¼ç»„ä»¶ å®ƒæ˜¯ä¸ºäº†åˆ›å»ºçº¯å±•ç¤ºç»„ä»¶ï¼Œè¿™ç§ç»„ä»¶åªè´Ÿè´£æ ¹æ®ä¼ å…¥çš„propsæ¥å±•ç¤ºï¼Œä¸æ¶‰åŠåˆ°stateçŠ¶æ€çš„æ“ä½œ ç»„ä»¶ä¸ä¼šè¢«å®ä¾‹åŒ–ï¼Œæ•´ä½“æ¸²æŸ“æ€§èƒ½å¾—åˆ°æå‡ï¼Œä¸èƒ½è®¿é—®thiså¯¹è±¡ï¼Œä¸èƒ½è®¿é—®ç”Ÿå‘½å‘¨æœŸçš„æ–¹æ³•\nï¼ˆ2ï¼‰ES5 åŸç”Ÿæ–¹å¼ React.createClass &#x2F;&#x2F; RFC React.createClassä¼šè‡ªç»‘å®šå‡½æ•°æ–¹æ³•ï¼Œå¯¼è‡´ä¸å¿…è¦çš„æ€§èƒ½å¼€é”€ï¼Œå¢åŠ ä»£ç è¿‡æ—¶çš„å¯èƒ½æ€§ã€‚\nï¼ˆ3ï¼‰E6ç»§æ‰¿å½¢å¼ React.Component &#x2F;&#x2F; RCC ç›®å‰æä¸ºæ¨èçš„åˆ›å»ºæœ‰çŠ¶æ€ç»„ä»¶çš„æ–¹å¼ï¼Œæœ€ç»ˆä¼šå–ä»£React.createClasså½¢å¼ï¼›ç›¸å¯¹äº React.createClasså¯ä»¥æ›´å¥½å®ç°ä»£ç å¤ç”¨ã€‚\næ— çŠ¶æ€ç»„ä»¶ç›¸å¯¹äºäºåè€…çš„åŒºåˆ«ï¼š ä¸æ— çŠ¶æ€ç»„ä»¶ç›¸æ¯”ï¼ŒReact.createClasså’ŒReact.Componentéƒ½æ˜¯åˆ›å»ºæœ‰çŠ¶æ€çš„ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶æ˜¯è¦è¢«å®ä¾‹åŒ–çš„ï¼Œå¹¶ä¸”å¯ä»¥è®¿é—®ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚\nReact.createClassä¸React.ComponentåŒºåˆ«ï¼š\nâ‘  å‡½æ•°thisè‡ªç»‘å®š\n\nReact.createClassåˆ›å»ºçš„ç»„ä»¶ï¼Œå…¶æ¯ä¸€ä¸ªæˆå‘˜å‡½æ•°çš„thiséƒ½æœ‰Reactè‡ªåŠ¨ç»‘å®šï¼Œå‡½æ•°ä¸­çš„thisä¼šè¢«æ­£ç¡®è®¾ç½®ã€‚\nReact.Componentåˆ›å»ºçš„ç»„ä»¶ï¼Œå…¶æˆå‘˜å‡½æ•°ä¸ä¼šè‡ªåŠ¨ç»‘å®šthisï¼Œéœ€è¦å¼€å‘è€…æ‰‹åŠ¨ç»‘å®šï¼Œå¦åˆ™thisä¸èƒ½è·å–å½“å‰ç»„ä»¶å®ä¾‹å¯¹è±¡ã€‚\n\nâ‘¡ ç»„ä»¶å±æ€§ç±»å‹propTypesåŠå…¶é»˜è®¤propså±æ€§defaultPropsé…ç½®ä¸åŒ\n\nReact.createClassåœ¨åˆ›å»ºç»„ä»¶æ—¶ï¼Œæœ‰å…³ç»„ä»¶propsçš„å±æ€§ç±»å‹åŠç»„ä»¶é»˜è®¤çš„å±æ€§ä¼šä½œä¸ºç»„ä»¶å®ä¾‹çš„å±æ€§æ¥é…ç½®ï¼Œå…¶ä¸­defaultPropsæ˜¯ä½¿ç”¨getDefaultPropsçš„æ–¹æ³•æ¥è·å–é»˜è®¤ç»„ä»¶å±æ€§çš„\nReact.Componentåœ¨åˆ›å»ºç»„ä»¶æ—¶é…ç½®è¿™ä¸¤ä¸ªå¯¹åº”ä¿¡æ¯æ—¶ï¼Œä»–ä»¬æ˜¯ä½œä¸ºç»„ä»¶ç±»çš„å±æ€§ï¼Œä¸æ˜¯ç»„ä»¶å®ä¾‹çš„å±æ€§ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„ç±»çš„é™æ€å±æ€§æ¥é…ç½®çš„ã€‚\n\nâ‘¢ ç»„ä»¶åˆå§‹çŠ¶æ€stateçš„é…ç½®ä¸åŒ\n\nReact.createClassåˆ›å»ºçš„ç»„ä»¶ï¼Œå…¶çŠ¶æ€stateæ˜¯é€šè¿‡getInitialStateæ–¹æ³•æ¥é…ç½®ç»„ä»¶ç›¸å…³çš„çŠ¶æ€ï¼›\nReact.Componentåˆ›å»ºçš„ç»„ä»¶ï¼Œå…¶çŠ¶æ€stateæ˜¯åœ¨constructorä¸­åƒåˆå§‹åŒ–ç»„ä»¶å±æ€§ä¸€æ ·å£°æ˜çš„ã€‚\n\n14. å¯¹æœ‰çŠ¶æ€ç»„ä»¶å’Œæ— çŠ¶æ€ç»„ä»¶çš„ç†è§£åŠä½¿ç”¨åœºæ™¯ï¼ˆ1ï¼‰æœ‰çŠ¶æ€ç»„ä»¶\nç‰¹ç‚¹ï¼š\n\næ˜¯ç±»ç»„ä»¶\næœ‰ç»§æ‰¿\nå¯ä»¥ä½¿ç”¨this\nå¯ä»¥ä½¿ç”¨reactçš„ç”Ÿå‘½å‘¨æœŸ\nä½¿ç”¨è¾ƒå¤šï¼Œå®¹æ˜“é¢‘ç¹è§¦å‘ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼Œå½±å“æ€§èƒ½\nå†…éƒ¨ä½¿ç”¨ stateï¼Œç»´æŠ¤è‡ªèº«çŠ¶æ€çš„å˜åŒ–ï¼Œæœ‰çŠ¶æ€ç»„ä»¶æ ¹æ®å¤–éƒ¨ç»„ä»¶ä¼ å…¥çš„ props å’Œè‡ªèº«çš„ stateè¿›è¡Œæ¸²æŸ“ã€‚\n\nä½¿ç”¨åœºæ™¯ï¼š\n\néœ€è¦ä½¿ç”¨åˆ°çŠ¶æ€çš„ã€‚\néœ€è¦ä½¿ç”¨çŠ¶æ€æ“ä½œç»„ä»¶çš„ï¼ˆæ— çŠ¶æ€ç»„ä»¶çš„ä¹Ÿå¯ä»¥å®ç°æ–°ç‰ˆæœ¬react hooksä¹Ÿå¯å®ç°ï¼‰\n\næ€»ç»“ï¼š ç±»ç»„ä»¶å¯ä»¥ç»´æŠ¤è‡ªèº«çš„çŠ¶æ€å˜é‡ï¼Œå³ç»„ä»¶çš„ state ï¼Œç±»ç»„ä»¶è¿˜æœ‰ä¸åŒçš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œå¯ä»¥è®©å¼€å‘è€…èƒ½å¤Ÿåœ¨ç»„ä»¶çš„ä¸åŒé˜¶æ®µï¼ˆæŒ‚è½½ã€æ›´æ–°ã€å¸è½½ï¼‰ï¼Œå¯¹ç»„ä»¶åšæ›´å¤šçš„æ§åˆ¶ã€‚ç±»ç»„ä»¶åˆ™æ—¢å¯ä»¥å……å½“æ— çŠ¶æ€ç»„ä»¶ï¼Œä¹Ÿå¯ä»¥å……å½“æœ‰çŠ¶æ€ç»„ä»¶ã€‚å½“ä¸€ä¸ªç±»ç»„ä»¶ä¸éœ€è¦ç®¡ç†è‡ªèº«çŠ¶æ€æ—¶ï¼Œä¹Ÿå¯ç§°ä¸ºæ— çŠ¶æ€ç»„ä»¶ã€‚\nï¼ˆ2ï¼‰æ— çŠ¶æ€ç»„ä»¶ ç‰¹ç‚¹ï¼š\n\nä¸ä¾èµ–è‡ªèº«çš„çŠ¶æ€state\nå¯ä»¥æ˜¯ç±»ç»„ä»¶æˆ–è€…å‡½æ•°ç»„ä»¶ã€‚\nå¯ä»¥å®Œå…¨é¿å…ä½¿ç”¨ this å…³é”®å­—ã€‚ï¼ˆç”±äºä½¿ç”¨çš„æ˜¯ç®­å¤´å‡½æ•°äº‹ä»¶æ— éœ€ç»‘å®šï¼‰\næœ‰æ›´é«˜çš„æ€§èƒ½ã€‚å½“ä¸éœ€è¦ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸé’©å­æ—¶ï¼Œåº”è¯¥é¦–å…ˆä½¿ç”¨æ— çŠ¶æ€å‡½æ•°ç»„ä»¶\nç»„ä»¶å†…éƒ¨ä¸ç»´æŠ¤ state ï¼Œåªæ ¹æ®å¤–éƒ¨ç»„ä»¶ä¼ å…¥çš„ props è¿›è¡Œæ¸²æŸ“çš„ç»„ä»¶ï¼Œå½“ props æ”¹å˜æ—¶ï¼Œç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚\n\nä½¿ç”¨åœºæ™¯ï¼š\n\nç»„ä»¶ä¸éœ€è¦ç®¡ç† stateï¼Œçº¯å±•ç¤º\n\nä¼˜ç‚¹ï¼š\n\nç®€åŒ–ä»£ç ã€ä¸“æ³¨äº render\nç»„ä»¶ä¸éœ€è¦è¢«å®ä¾‹åŒ–ï¼Œæ— ç”Ÿå‘½å‘¨æœŸï¼Œæå‡æ€§èƒ½ã€‚ è¾“å‡ºï¼ˆæ¸²æŸ“ï¼‰åªå–å†³äºè¾“å…¥ï¼ˆå±æ€§ï¼‰ï¼Œæ— å‰¯ä½œç”¨\nè§†å›¾å’Œæ•°æ®çš„è§£è€¦åˆ†ç¦»\n\nç¼ºç‚¹ï¼š\n\næ— æ³•ä½¿ç”¨ ref\næ— ç”Ÿå‘½å‘¨æœŸæ–¹æ³•\næ— æ³•æ§åˆ¶ç»„ä»¶çš„é‡æ¸²æŸ“ï¼Œå› ä¸ºæ— æ³•ä½¿ç”¨shouldComponentUpdate æ–¹æ³•ï¼Œå½“ç»„ä»¶æ¥å—åˆ°æ–°çš„å±æ€§æ—¶åˆ™ä¼šé‡æ¸²æŸ“\n\næ€»ç»“ï¼š ç»„ä»¶å†…éƒ¨çŠ¶æ€ä¸”ä¸å¤–éƒ¨æ— å…³çš„ç»„ä»¶ï¼Œå¯ä»¥è€ƒè™‘ç”¨çŠ¶æ€ç»„ä»¶ï¼Œè¿™æ ·çŠ¶æ€æ ‘å°±ä¸ä¼šè¿‡äºå¤æ‚ï¼Œæ˜“äºç†è§£å’Œç®¡ç†ã€‚å½“ä¸€ä¸ªç»„ä»¶ä¸éœ€è¦ç®¡ç†è‡ªèº«çŠ¶æ€æ—¶ï¼Œä¹Ÿå°±æ˜¯æ— çŠ¶æ€ç»„ä»¶ï¼Œåº”è¯¥ä¼˜å…ˆè®¾è®¡ä¸ºå‡½æ•°ç»„ä»¶ã€‚æ¯”å¦‚è‡ªå®šä¹‰çš„ &lt;Button/&gt;ã€ &lt;Input /&gt; ç­‰ç»„ä»¶ã€‚\n15. å¯¹Reactä¸­Fragmentçš„ç†è§£ï¼Œå®ƒçš„ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿåœ¨Reactä¸­ï¼Œç»„ä»¶è¿”å›çš„å…ƒç´ åªèƒ½æœ‰ä¸€ä¸ªæ ¹å…ƒç´ ã€‚ä¸ºäº†ä¸æ·»åŠ å¤šä½™çš„DOMèŠ‚ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Fragmentæ ‡ç­¾æ¥åŒ…è£¹æ‰€æœ‰çš„å…ƒç´ ï¼ŒFragmentæ ‡ç­¾ä¸ä¼šæ¸²æŸ“å‡ºä»»ä½•å…ƒç´ ã€‚Reactå®˜æ–¹å¯¹Fragmentçš„è§£é‡Šï¼š\n\n\n\n\n\n\n\n\n\nReact ä¸­çš„ä¸€ä¸ªå¸¸è§æ¨¡å¼æ˜¯ä¸€ä¸ªç»„ä»¶è¿”å›å¤šä¸ªå…ƒç´ ã€‚Fragments å…è®¸ä½ å°†å­åˆ—è¡¨åˆ†ç»„ï¼Œè€Œæ— éœ€å‘ DOM æ·»åŠ é¢å¤–èŠ‚ç‚¹ã€‚\nimport React, &#123; Component, Fragment &#125; from &#39;react&#39;\n\n&#x2F;&#x2F; ä¸€èˆ¬å½¢å¼\nrender() &#123;\n  return (\n    &lt;React.Fragment&gt;\n      &lt;ChildA &#x2F;&gt;\n      &lt;ChildB &#x2F;&gt;\n      &lt;ChildC &#x2F;&gt;\n    &lt;&#x2F;React.Fragment&gt;\n  );\n&#125;\n&#x2F;&#x2F; ä¹Ÿå¯ä»¥å†™æˆä»¥ä¸‹å½¢å¼\nrender() &#123;\n  return (\n    &lt;&gt;\n      &lt;ChildA &#x2F;&gt;\n      &lt;ChildB &#x2F;&gt;\n      &lt;ChildC &#x2F;&gt;\n    &lt;&#x2F;&gt;\n  );\n&#125;\nå¤åˆ¶ä»£ç \n\n16. Reactå¦‚ä½•è·å–ç»„ä»¶å¯¹åº”çš„DOMå…ƒç´ ï¼Ÿå¯ä»¥ç”¨refæ¥è·å–æŸä¸ªå­èŠ‚ç‚¹çš„å®ä¾‹ï¼Œç„¶åé€šè¿‡å½“å‰classç»„ä»¶å®ä¾‹çš„ä¸€äº›ç‰¹å®šå±æ€§æ¥ç›´æ¥è·å–å­èŠ‚ç‚¹å®ä¾‹ã€‚refæœ‰ä¸‰ç§å®ç°æ–¹æ³•:\n\nå­—ç¬¦ä¸²æ ¼å¼ï¼šå­—ç¬¦ä¸²æ ¼å¼ï¼Œè¿™æ˜¯React16ç‰ˆæœ¬ä¹‹å‰ç”¨å¾—æœ€å¤šçš„ï¼Œä¾‹å¦‚ï¼š&lt;p ref=&quot;info&quot;&gt;span&lt;/p&gt;\nå‡½æ•°æ ¼å¼ï¼šrefå¯¹åº”ä¸€ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•æœ‰ä¸€ä¸ªå‚æ•°ï¼Œä¹Ÿå°±æ˜¯å¯¹åº”çš„èŠ‚ç‚¹å®ä¾‹ï¼Œä¾‹å¦‚ï¼š&lt;p ref=&#123;ele =&gt; this.info = ele&#125;&gt;&lt;/p&gt;\ncreateRefæ–¹æ³•ï¼šReact 16æä¾›çš„ä¸€ä¸ªAPIï¼Œä½¿ç”¨React.createRef()æ¥å®ç°\n\n ã€€ã€€ã€€ã€€ã€€ã€€Â Â \n17. Reactä¸­å¯ä»¥åœ¨renderè®¿é—®refså—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ&lt;&gt;\n  &lt;span id&#x3D;&quot;name&quot; ref&#x3D;&#123;this.spanRef&#125;&gt;&#123;this.state.title&#125;&lt;&#x2F;span&gt;\n  &lt;span&gt;&#123;\n     this.spanRef.current ? &#39;æœ‰å€¼&#39; : &#39;æ— å€¼&#39;\n  &#125;&lt;&#x2F;span&gt;\n&lt;&#x2F;&gt;\nå¤åˆ¶ä»£ç \n\nä¸å¯ä»¥ï¼Œrender é˜¶æ®µ DOM è¿˜æ²¡æœ‰ç”Ÿæˆï¼Œæ— æ³•è·å– DOMã€‚DOM çš„è·å–éœ€è¦åœ¨ pre-commit é˜¶æ®µå’Œ commit é˜¶æ®µï¼š \n18. å¯¹Reactçš„æ’æ§½(Portals)çš„ç†è§£ï¼Œå¦‚ä½•ä½¿ç”¨ï¼Œæœ‰å“ªäº›ä½¿ç”¨åœºæ™¯React å®˜æ–¹å¯¹ Portals çš„å®šä¹‰ï¼š\n\n\n\n\n\n\n\n\n\nPortal æä¾›äº†ä¸€ç§å°†å­èŠ‚ç‚¹æ¸²æŸ“åˆ°å­˜åœ¨äºçˆ¶ç»„ä»¶ä»¥å¤–çš„ DOM èŠ‚ç‚¹çš„ä¼˜ç§€çš„æ–¹æ¡ˆ\nPortals æ˜¯React 16æä¾›çš„å®˜æ–¹è§£å†³æ–¹æ¡ˆï¼Œä½¿å¾—ç»„ä»¶å¯ä»¥è„±ç¦»çˆ¶ç»„ä»¶å±‚çº§æŒ‚è½½åœ¨DOMæ ‘çš„ä»»ä½•ä½ç½®ã€‚é€šä¿—æ¥è®²ï¼Œå°±æ˜¯æˆ‘ä»¬ render ä¸€ä¸ªç»„ä»¶ï¼Œä½†è¿™ä¸ªç»„ä»¶çš„ DOM ç»“æ„å¹¶ä¸åœ¨æœ¬ç»„ä»¶å†…ã€‚\nPortalsè¯­æ³•å¦‚ä¸‹ï¼š\nReactDOM.createPortal(child, container);\nå¤åˆ¶ä»£ç \n\n\nç¬¬ä¸€ä¸ªå‚æ•° child æ˜¯å¯æ¸²æŸ“çš„ React å­é¡¹ï¼Œæ¯”å¦‚å…ƒç´ ï¼Œå­—ç¬¦ä¸²æˆ–è€…ç‰‡æ®µç­‰;\nç¬¬äºŒä¸ªå‚æ•° container æ˜¯ä¸€ä¸ª DOM å…ƒç´ ã€‚\n\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç»„ä»¶çš„renderå‡½æ•°è¿”å›çš„å…ƒç´ ä¼šè¢«æŒ‚è½½åœ¨å®ƒçš„çˆ¶çº§ç»„ä»¶ä¸Šï¼š\nimport DemoComponent from &#39;.&#x2F;DemoComponent&#39;;\nrender() &#123;\n  &#x2F;&#x2F; DemoComponentå…ƒç´ ä¼šè¢«æŒ‚è½½åœ¨idä¸ºparentçš„divçš„å…ƒç´ ä¸Š\n  return (\n    &lt;div id&#x3D;&quot;parent&quot;&gt;\n        &lt;DemoComponent &#x2F;&gt;\n    &lt;&#x2F;div&gt;\n  );\n&#125;\nå¤åˆ¶ä»£ç \n\nç„¶è€Œï¼Œæœ‰äº›å…ƒç´ éœ€è¦è¢«æŒ‚è½½åœ¨æ›´é«˜å±‚çº§çš„ä½ç½®ã€‚æœ€å…¸å‹çš„åº”ç”¨åœºæ™¯ï¼šå½“çˆ¶ç»„ä»¶å…·æœ‰overflow: hiddenæˆ–è€…z-indexçš„æ ·å¼è®¾ç½®æ—¶ï¼Œç»„ä»¶æœ‰å¯èƒ½è¢«å…¶ä»–å…ƒç´ é®æŒ¡ï¼Œè¿™æ—¶å°±å¯ä»¥è€ƒè™‘è¦ä¸è¦ä½¿ç”¨Portalä½¿ç»„ä»¶çš„æŒ‚è½½è„±ç¦»çˆ¶ç»„ä»¶ã€‚ä¾‹å¦‚ï¼šå¯¹è¯æ¡†ï¼Œæ¨¡æ€çª—ã€‚\nimport DemoComponent from &#39;.&#x2F;DemoComponent&#39;;\nrender() &#123;\n  &#x2F;&#x2F; DemoComponentå…ƒç´ ä¼šè¢«æŒ‚è½½åœ¨idä¸ºparentçš„divçš„å…ƒç´ ä¸Š\n  return (\n    &lt;div id&#x3D;&quot;parent&quot;&gt;\n        &lt;DemoComponent &#x2F;&gt;\n    &lt;&#x2F;div&gt;\n  );\n&#125;\nå¤åˆ¶ä»£ç \n\n19. åœ¨Reactä¸­å¦‚ä½•é¿å…ä¸å¿…è¦çš„renderï¼ŸReact åŸºäºè™šæ‹Ÿ DOM å’Œé«˜æ•ˆ Diff ç®—æ³•çš„å®Œç¾é…åˆï¼Œå®ç°äº†å¯¹ DOM æœ€å°ç²’åº¦çš„æ›´æ–°ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒReact å¯¹ DOM çš„æ¸²æŸ“æ•ˆç‡è¶³ä»¥ä¸šåŠ¡æ—¥å¸¸ã€‚ä½†åœ¨ä¸ªåˆ«å¤æ‚ä¸šåŠ¡åœºæ™¯ä¸‹ï¼Œæ€§èƒ½é—®é¢˜ä¾ç„¶ä¼šå›°æ‰°æˆ‘ä»¬ã€‚æ­¤æ—¶éœ€è¦é‡‡å–ä¸€äº›æªæ–½æ¥æå‡è¿è¡Œæ€§èƒ½ï¼Œå…¶å¾ˆé‡è¦çš„ä¸€ä¸ªæ–¹å‘ï¼Œå°±æ˜¯é¿å…ä¸å¿…è¦çš„æ¸²æŸ“ï¼ˆRenderï¼‰ã€‚è¿™é‡Œæä¸‹ä¼˜åŒ–çš„ç‚¹ï¼š\n\nshouldComponentUpdate å’Œ PureComponent\n\nåœ¨ React ç±»ç»„ä»¶ä¸­ï¼Œå¯ä»¥åˆ©ç”¨ shouldComponentUpdateæˆ–è€… PureComponent æ¥å‡å°‘å› çˆ¶ç»„ä»¶æ›´æ–°è€Œè§¦å‘å­ç»„ä»¶çš„ renderï¼Œä»è€Œè¾¾åˆ°ç›®çš„ã€‚shouldComponentUpdate æ¥å†³å®šæ˜¯å¦ç»„ä»¶æ˜¯å¦é‡æ–°æ¸²æŸ“ï¼Œå¦‚æœä¸å¸Œæœ›ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œè¿”å› false å³å¯ã€‚\n\nåˆ©ç”¨é«˜é˜¶ç»„ä»¶\n\nåœ¨å‡½æ•°ç»„ä»¶ä¸­ï¼Œå¹¶æ²¡æœ‰ shouldComponentUpdate è¿™ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œå¯ä»¥åˆ©ç”¨é«˜é˜¶ç»„ä»¶ï¼Œå°è£…ä¸€ä¸ªç±»ä¼¼ PureComponet çš„åŠŸèƒ½\n\nä½¿ç”¨ React.memo\n\nReact.memo æ˜¯ React 16.6 æ–°çš„ä¸€ä¸ª APIï¼Œç”¨æ¥ç¼“å­˜ç»„ä»¶çš„æ¸²æŸ“ï¼Œé¿å…ä¸å¿…è¦çš„æ›´æ–°ï¼Œå…¶å®ä¹Ÿæ˜¯ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ï¼Œä¸ PureComponent ååˆ†ç±»ä¼¼ï¼Œä½†ä¸åŒçš„æ˜¯ï¼Œ React.memoåªèƒ½ç”¨äºå‡½æ•°ç»„ä»¶ã€‚\n20. å¯¹ React-Intl çš„ç†è§£ï¼Œå®ƒçš„å·¥ä½œåŸç†ï¼ŸReact-intlæ˜¯é›…è™çš„è¯­è¨€å›½é™…åŒ–å¼€æºé¡¹ç›®FormatJSçš„ä¸€éƒ¨åˆ†ï¼Œé€šè¿‡å…¶æä¾›çš„ç»„ä»¶å’ŒAPIå¯ä»¥ä¸ReactJSç»‘å®šã€‚\nReact-intlæä¾›äº†ä¸¤ç§ä½¿ç”¨æ–¹æ³•ï¼Œä¸€ç§æ˜¯å¼•ç”¨Reactç»„ä»¶ï¼Œå¦ä¸€ç§æ˜¯ç›´æ¥è°ƒå–APIï¼Œå®˜æ–¹æ›´åŠ æ¨èåœ¨Reacté¡¹ç›®ä¸­ä½¿ç”¨å‰è€…ï¼Œåªæœ‰åœ¨æ— æ³•ä½¿ç”¨Reactç»„ä»¶çš„åœ°æ–¹ï¼Œæ‰åº”è¯¥è°ƒç”¨æ¡†æ¶æä¾›çš„APIã€‚å®ƒæä¾›äº†ä¸€ç³»åˆ—çš„Reactç»„ä»¶ï¼ŒåŒ…æ‹¬æ•°å­—æ ¼å¼åŒ–ã€å­—ç¬¦ä¸²æ ¼å¼åŒ–ã€æ—¥æœŸæ ¼å¼åŒ–ç­‰ã€‚\nåœ¨React-intlä¸­ï¼Œå¯ä»¥é…ç½®ä¸åŒçš„è¯­è¨€åŒ…ï¼Œä»–çš„å·¥ä½œåŸç†å°±æ˜¯æ ¹æ®éœ€è¦ï¼Œåœ¨è¯­è¨€åŒ…ä¹‹é—´è¿›è¡Œåˆ‡æ¢ã€‚\n21. å¯¹ React context çš„ç†è§£åœ¨Reactä¸­ï¼Œæ•°æ®ä¼ é€’ä¸€èˆ¬ä½¿ç”¨propsä¼ é€’æ•°æ®ï¼Œç»´æŒå•å‘æ•°æ®æµï¼Œè¿™æ ·å¯ä»¥è®©ç»„ä»¶ä¹‹é—´çš„å…³ç³»å˜å¾—ç®€å•ä¸”å¯é¢„æµ‹ï¼Œä½†æ˜¯å•é¡¹æ•°æ®æµåœ¨æŸäº›åœºæ™¯ä¸­å¹¶ä¸é€‚ç”¨ã€‚å•çº¯ä¸€å¯¹çš„çˆ¶å­ç»„ä»¶ä¼ é€’å¹¶æ— é—®é¢˜ï¼Œä½†è¦æ˜¯ç»„ä»¶ä¹‹é—´å±‚å±‚ä¾èµ–æ·±å…¥ï¼Œpropså°±éœ€è¦å±‚å±‚ä¼ é€’æ˜¾ç„¶ï¼Œè¿™æ ·åšå¤ªç¹çäº†ã€‚\nContext æä¾›äº†ä¸€ç§åœ¨ç»„ä»¶ä¹‹é—´å…±äº«æ­¤ç±»å€¼çš„æ–¹å¼ï¼Œè€Œä¸å¿…æ˜¾å¼åœ°é€šè¿‡ç»„ä»¶æ ‘çš„é€å±‚ä¼ é€’ propsã€‚\nå¯ä»¥æŠŠcontextå½“åšæ˜¯ç‰¹å®šä¸€ä¸ªç»„ä»¶æ ‘å†…å…±äº«çš„storeï¼Œç”¨æ¥åšæ•°æ®ä¼ é€’ã€‚ç®€å•è¯´å°±æ˜¯ï¼Œå½“ä½ ä¸æƒ³åœ¨ç»„ä»¶æ ‘ä¸­é€šè¿‡é€å±‚ä¼ é€’propsæˆ–è€…stateçš„æ–¹å¼æ¥ä¼ é€’æ•°æ®æ—¶ï¼Œå¯ä»¥ä½¿ç”¨Contextæ¥å®ç°è·¨å±‚çº§çš„ç»„ä»¶æ•°æ®ä¼ é€’ã€‚\nJSçš„ä»£ç å—åœ¨æ‰§è¡ŒæœŸé—´ï¼Œä¼šåˆ›å»ºä¸€ä¸ªç›¸åº”çš„ä½œç”¨åŸŸé“¾ï¼Œè¿™ä¸ªä½œç”¨åŸŸé“¾è®°å½•ç€è¿è¡Œæ—¶JSä»£ç å—æ‰§è¡ŒæœŸé—´æ‰€èƒ½è®¿é—®çš„æ´»åŠ¨å¯¹è±¡ï¼ŒåŒ…æ‹¬å˜é‡å’Œå‡½æ•°ï¼ŒJSç¨‹åºé€šè¿‡ä½œç”¨åŸŸé“¾è®¿é—®åˆ°ä»£ç å—å†…éƒ¨æˆ–è€…å¤–éƒ¨çš„å˜é‡å’Œå‡½æ•°ã€‚\nå‡å¦‚ä»¥JSçš„ä½œç”¨åŸŸé“¾ä½œä¸ºç±»æ¯”ï¼ŒReactç»„ä»¶æä¾›çš„Contextå¯¹è±¡å…¶å®å°±å¥½æ¯”ä¸€ä¸ªæä¾›ç»™å­ç»„ä»¶è®¿é—®çš„ä½œç”¨åŸŸï¼Œè€Œ Contextå¯¹è±¡çš„å±æ€§å¯ä»¥çœ‹æˆä½œç”¨åŸŸä¸Šçš„æ´»åŠ¨å¯¹è±¡ã€‚ç”±äºç»„ä»¶ çš„ Context ç”±å…¶çˆ¶èŠ‚ç‚¹é“¾ä¸Šæ‰€æœ‰ç»„ä»¶é€š è¿‡ getChildContextï¼ˆï¼‰è¿”å›çš„Contextå¯¹è±¡ç»„åˆè€Œæˆï¼Œæ‰€ä»¥ï¼Œç»„ä»¶é€šè¿‡Contextæ˜¯å¯ä»¥è®¿é—®åˆ°å…¶çˆ¶ç»„ä»¶é“¾ä¸Šæ‰€æœ‰èŠ‚ç‚¹ç»„ä»¶æä¾›çš„Contextçš„å±æ€§ã€‚\n22. ä¸ºä»€ä¹ˆReactå¹¶ä¸æ¨èä¼˜å…ˆè€ƒè™‘ä½¿ç”¨Contextï¼Ÿ\nContextç›®å‰è¿˜å¤„äºå®éªŒé˜¶æ®µï¼Œå¯èƒ½ä¼šåœ¨åé¢çš„å‘è¡Œç‰ˆæœ¬ä¸­æœ‰å¾ˆå¤§çš„å˜åŒ–ï¼Œäº‹å®ä¸Šè¿™ç§æƒ…å†µå·²ç»å‘ç”Ÿäº†ï¼Œæ‰€ä»¥ä¸ºäº†é¿å…ç»™ä»Šåå‡çº§å¸¦æ¥å¤§çš„å½±å“å’Œéº»çƒ¦ï¼Œä¸å»ºè®®åœ¨appä¸­ä½¿ç”¨contextã€‚\nå°½ç®¡ä¸å»ºè®®åœ¨appä¸­ä½¿ç”¨contextï¼Œä½†æ˜¯ç‹¬æœ‰ç»„ä»¶è€Œè¨€ï¼Œç”±äºå½±å“èŒƒå›´å°äºappï¼Œå¦‚æœå¯ä»¥åšåˆ°é«˜å†…èšï¼Œä¸ç ´åç»„ä»¶æ ‘ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨context\nå¯¹äºç»„ä»¶ä¹‹é—´çš„æ•°æ®é€šä¿¡æˆ–è€…çŠ¶æ€ç®¡ç†ï¼Œæœ‰æ•ˆä½¿ç”¨propsæˆ–è€…stateè§£å†³ï¼Œç„¶åå†è€ƒè™‘ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„æˆç†Ÿåº“è¿›è¡Œè§£å†³ï¼Œä»¥ä¸Šçš„æ–¹æ³•éƒ½ä¸æ˜¯æœ€ä½³çš„æ–¹æ¡ˆçš„æ—¶å€™ï¼Œåœ¨è€ƒè™‘contextã€‚\ncontextçš„æ›´æ–°éœ€è¦é€šè¿‡setState()è§¦å‘ï¼Œä½†æ˜¯è¿™å¹¶ä¸æ˜¯å¾ˆå¯é çš„ï¼ŒContextæ”¯æŒè·¨ç»„ä»¶çš„è®¿é—®ï¼Œä½†æ˜¯å¦‚æœä¸­é—´çš„å­ç»„ä»¶é€šè¿‡ä¸€äº›æ–¹æ³•ä¸å½±å“æ›´æ–°ï¼Œæ¯”å¦‚ shouldComponentUpdate() è¿”å›false é‚£ä¹ˆä¸èƒ½ä¿è¯Contextçš„æ›´æ–°ä¸€å®šå¯ä»¥ä½¿ç”¨Contextçš„å­ç»„ä»¶ï¼Œå› æ­¤ï¼ŒContextçš„å¯é æ€§éœ€è¦å…³æ³¨\n\n23. Reactä¸­ä»€ä¹ˆæ˜¯å—æ§ç»„ä»¶å’Œéæ§ç»„ä»¶ï¼Ÿï¼ˆ1ï¼‰å—æ§ç»„ä»¶ åœ¨ä½¿ç”¨è¡¨å•æ¥æ”¶é›†ç”¨æˆ·è¾“å…¥æ—¶ï¼Œä¾‹å¦‚&lt;input&gt;&lt;select&gt;&lt;textearea&gt;ç­‰å…ƒç´ éƒ½è¦ç»‘å®šä¸€ä¸ªchangeäº‹ä»¶ï¼Œå½“è¡¨å•çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œå°±ä¼šè§¦å‘onChangeäº‹ä»¶ï¼Œæ›´æ–°ç»„ä»¶çš„stateã€‚è¿™ç§ç»„ä»¶åœ¨Reactä¸­è¢«ç§°ä¸ºå—æ§ç»„ä»¶ï¼Œåœ¨å—æ§ç»„ä»¶ä¸­ï¼Œç»„ä»¶æ¸²æŸ“å‡ºçš„çŠ¶æ€ä¸å®ƒçš„valueæˆ–checkedå±æ€§ç›¸å¯¹åº”ï¼Œreacté€šè¿‡è¿™ç§æ–¹å¼æ¶ˆé™¤äº†ç»„ä»¶çš„å±€éƒ¨çŠ¶æ€ï¼Œä½¿æ•´ä¸ªçŠ¶æ€å¯æ§ã€‚reactå®˜æ–¹æ¨èä½¿ç”¨å—æ§è¡¨å•ç»„ä»¶ã€‚\nå—æ§ç»„ä»¶æ›´æ–°stateçš„æµç¨‹ï¼š\n\nå¯ä»¥é€šè¿‡åˆå§‹stateä¸­è®¾ç½®è¡¨å•çš„é»˜è®¤å€¼\næ¯å½“è¡¨å•çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè°ƒç”¨onChangeäº‹ä»¶å¤„ç†å™¨\näº‹ä»¶å¤„ç†å™¨é€šè¿‡äº‹ä»¶å¯¹è±¡eæ‹¿åˆ°æ”¹å˜åçš„çŠ¶æ€ï¼Œå¹¶æ›´æ–°ç»„ä»¶çš„state\nä¸€æ—¦é€šè¿‡setStateæ–¹æ³•æ›´æ–°stateï¼Œå°±ä¼šè§¦å‘è§†å›¾çš„é‡æ–°æ¸²æŸ“ï¼Œå®Œæˆè¡¨å•ç»„ä»¶çš„æ›´æ–°\n\nå—æ§ç»„ä»¶ç¼ºé™·ï¼š è¡¨å•å…ƒç´ çš„å€¼éƒ½æ˜¯ç”±Reactç»„ä»¶è¿›è¡Œç®¡ç†ï¼Œå½“æœ‰å¤šä¸ªè¾“å…¥æ¡†ï¼Œæˆ–è€…å¤šä¸ªè¿™ç§ç»„ä»¶æ—¶ï¼Œå¦‚æœæƒ³åŒæ—¶è·å–åˆ°å…¨éƒ¨çš„å€¼å°±å¿…é¡»æ¯ä¸ªéƒ½è¦ç¼–å†™äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œè¿™ä¼šè®©ä»£ç çœ‹ç€å¾ˆè‡ƒè‚¿ï¼Œæ‰€ä»¥ä¸ºäº†è§£å†³è¿™ç§æƒ…å†µï¼Œå‡ºç°äº†éå—æ§ç»„ä»¶ã€‚\nï¼ˆ2ï¼‰éå—æ§ç»„ä»¶ å¦‚æœä¸€ä¸ªè¡¨å•ç»„ä»¶æ²¡æœ‰value propsï¼ˆå•é€‰å’Œå¤é€‰æŒ‰é’®å¯¹åº”çš„æ˜¯checked propsï¼‰æ—¶ï¼Œå°±å¯ä»¥ç§°ä¸ºéå—æ§ç»„ä»¶ã€‚åœ¨éå—æ§ç»„ä»¶ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªrefæ¥ä»DOMè·å¾—è¡¨å•å€¼ã€‚è€Œä¸æ˜¯ä¸ºæ¯ä¸ªçŠ¶æ€æ›´æ–°ç¼–å†™ä¸€ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºã€‚\nReactå®˜æ–¹çš„è§£é‡Šï¼š\n\n\n\n\n\n\n\n\n\nè¦ç¼–å†™ä¸€ä¸ªéå—æ§ç»„ä»¶ï¼Œè€Œä¸æ˜¯ä¸ºæ¯ä¸ªçŠ¶æ€æ›´æ–°éƒ½ç¼–å†™æ•°æ®å¤„ç†å‡½æ•°ï¼Œä½ å¯ä»¥ä½¿ç”¨ refæ¥ä» DOM èŠ‚ç‚¹ä¸­è·å–è¡¨å•æ•°æ®ã€‚ å› ä¸ºéå—æ§ç»„ä»¶å°†çœŸå®æ•°æ®å‚¨å­˜åœ¨ DOM èŠ‚ç‚¹ä¸­ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨éå—æ§ç»„ä»¶æ—¶ï¼Œæœ‰æ—¶å€™åè€Œæ›´å®¹æ˜“åŒæ—¶é›†æˆ React å’Œé React ä»£ç ã€‚å¦‚æœä½ ä¸ä»‹æ„ä»£ç ç¾è§‚æ€§ï¼Œå¹¶ä¸”å¸Œæœ›å¿«é€Ÿç¼–å†™ä»£ç ï¼Œä½¿ç”¨éå—æ§ç»„ä»¶å¾€å¾€å¯ä»¥å‡å°‘ä½ çš„ä»£ç é‡ã€‚å¦åˆ™ï¼Œä½ åº”è¯¥ä½¿ç”¨å—æ§ç»„ä»¶ã€‚\nä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç åœ¨éå—æ§ç»„ä»¶ä¸­æ¥æ”¶å•ä¸ªå±æ€§ï¼š\nclass NameForm extends React.Component &#123;\n  constructor(props) &#123;\n    super(props);\n    this.handleSubmit &#x3D; this.handleSubmit.bind(this);\n  &#125;\n  handleSubmit(event) &#123;\n    alert(&#39;A name was submitted: &#39; + this.input.value);\n    event.preventDefault();\n  &#125;\n  render() &#123;\n    return (\n      &lt;form onSubmit&#x3D;&#123;this.handleSubmit&#125;&gt;\n        &lt;label&gt;\n          Name:\n          &lt;input type&#x3D;&quot;text&quot; ref&#x3D;&#123;(input) &#x3D;&gt; this.input &#x3D; input&#125; &#x2F;&gt;\n        &lt;&#x2F;label&gt;\n        &lt;input type&#x3D;&quot;submit&quot; value&#x3D;&quot;Submit&quot; &#x2F;&gt;\n      &lt;&#x2F;form&gt;\n    );\n  &#125;\n&#125;\nå¤åˆ¶ä»£ç \n\næ€»ç»“ï¼š é¡µé¢ä¸­æ‰€æœ‰è¾“å…¥ç±»çš„DOMå¦‚æœæ˜¯ç°ç”¨ç°å–çš„ç§°ä¸ºéå—æ§ç»„ä»¶ï¼Œè€Œé€šè¿‡setStateå°†è¾“å…¥çš„å€¼ç»´æŠ¤åˆ°äº†stateä¸­ï¼Œéœ€è¦æ—¶å†ä»stateä¸­å–å‡ºï¼Œè¿™é‡Œçš„æ•°æ®å°±å—åˆ°äº†stateçš„æ§åˆ¶ï¼Œç§°ä¸ºå—æ§ç»„ä»¶ã€‚\n24. Reactä¸­refsçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿæœ‰å“ªäº›åº”ç”¨åœºæ™¯ï¼ŸRefs æä¾›äº†ä¸€ç§æ–¹å¼ï¼Œç”¨äºè®¿é—®åœ¨ render æ–¹æ³•ä¸­åˆ›å»ºçš„ React å…ƒç´ æˆ– DOM èŠ‚ç‚¹ã€‚Refs åº”è¯¥è°¨æ…ä½¿ç”¨ï¼Œå¦‚ä¸‹åœºæ™¯ä½¿ç”¨ Refs æ¯”è¾ƒé€‚åˆï¼š\n\nå¤„ç†ç„¦ç‚¹ã€æ–‡æœ¬é€‰æ‹©æˆ–è€…åª’ä½“çš„æ§åˆ¶\nè§¦å‘å¿…è¦çš„åŠ¨ç”»\né›†æˆç¬¬ä¸‰æ–¹ DOM åº“\n\nRefs æ˜¯ä½¿ç”¨ React.createRef() æ–¹æ³•åˆ›å»ºçš„ï¼Œä»–é€šè¿‡ ref å±æ€§é™„åŠ åˆ° React å…ƒç´ ä¸Šã€‚è¦åœ¨æ•´ä¸ªç»„ä»¶ä¸­ä½¿ç”¨ Refsï¼Œéœ€è¦å°† ref åœ¨æ„é€ å‡½æ•°ä¸­åˆ†é…ç»™å…¶å®ä¾‹å±æ€§ï¼š\nclass MyComponent extends React.Component &#123;\n  constructor(props) &#123;\n    super(props)\n    this.myRef &#x3D; React.createRef()\n  &#125;\n  render() &#123;\n    return &lt;div ref&#x3D;&#123;this.myRef&#125; &#x2F;&gt;\n  &#125;\n&#125;\nå¤åˆ¶ä»£ç \n\nç”±äºå‡½æ•°ç»„ä»¶æ²¡æœ‰å®ä¾‹ï¼Œå› æ­¤ä¸èƒ½åœ¨å‡½æ•°ç»„ä»¶ä¸Šç›´æ¥ä½¿ç”¨ refï¼š\nfunction MyFunctionalComponent() &#123;\n  return &lt;input &#x2F;&gt;;\n&#125;\nclass Parent extends React.Component &#123;\n  constructor(props) &#123;\n    super(props);\n    this.textInput &#x3D; React.createRef();\n  &#125;\n  render() &#123;\n    &#x2F;&#x2F; è¿™å°†ä¸ä¼šå·¥ä½œï¼\n    return (\n      &lt;MyFunctionalComponent ref&#x3D;&#123;this.textInput&#125; &#x2F;&gt;\n    );\n  &#125;\n&#125;\nå¤åˆ¶ä»£ç \n\nä½†å¯ä»¥é€šè¿‡é—­åˆçš„å¸®åŠ©åœ¨å‡½æ•°ç»„ä»¶å†…éƒ¨è¿›è¡Œä½¿ç”¨ Refsï¼š\nfunction CustomTextInput(props) &#123;\n  &#x2F;&#x2F; è¿™é‡Œå¿…é¡»å£°æ˜ textInputï¼Œè¿™æ · ref å›è°ƒæ‰å¯ä»¥å¼•ç”¨å®ƒ\n  let textInput &#x3D; null;\n  function handleClick() &#123;\n    textInput.focus();\n  &#125;\n  return (\n    &lt;div&gt;\n      &lt;input\n        type&#x3D;&quot;text&quot;\n        ref&#x3D;&#123;(input) &#x3D;&gt; &#123; textInput &#x3D; input; &#125;&#125; &#x2F;&gt;\n      &lt;input\n        type&#x3D;&quot;button&quot;\n        value&#x3D;&quot;Focus the text input&quot;\n        onClick&#x3D;&#123;handleClick&#125;\n      &#x2F;&gt;\n    &lt;&#x2F;div&gt;\n  );  \n&#125;\nå¤åˆ¶ä»£ç \n\næ³¨æ„ï¼š\n\nä¸åº”è¯¥è¿‡åº¦çš„ä½¿ç”¨ Refs\n\nref çš„è¿”å›å€¼å–å†³äºèŠ‚ç‚¹çš„ç±»å‹ï¼š\n\nå½“ ref å±æ€§è¢«ç”¨äºä¸€ä¸ªæ™®é€šçš„ HTML å…ƒç´ æ—¶ï¼ŒReact.createRef() å°†æ¥æ”¶åº•å±‚ DOM å…ƒç´ ä½œä¸ºä»–çš„ current å±æ€§ä»¥åˆ›å»º refã€‚\nå½“ ref å±æ€§è¢«ç”¨äºä¸€ä¸ªè‡ªå®šä¹‰çš„ç±»ç»„ä»¶æ—¶ï¼Œref å¯¹è±¡å°†æ¥æ”¶è¯¥ç»„ä»¶å·²æŒ‚è½½çš„å®ä¾‹ä½œä¸ºä»–çš„ currentã€‚\n\n\nå½“åœ¨çˆ¶ç»„ä»¶ä¸­éœ€è¦è®¿é—®å­ç»„ä»¶ä¸­çš„ ref æ—¶å¯ä½¿ç”¨ä¼ é€’ Refs æˆ–å›è°ƒ Refsã€‚\n\n\n26. Reactç»„ä»¶çš„æ„é€ å‡½æ•°æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿå®ƒæ˜¯å¿…é¡»çš„å—ï¼Ÿæ„é€ å‡½æ•°ä¸»è¦ç”¨äºä¸¤ä¸ªç›®çš„ï¼š\n\né€šè¿‡å°†å¯¹è±¡åˆ†é…ç»™this.stateæ¥åˆå§‹åŒ–æœ¬åœ°çŠ¶æ€\nå°†äº‹ä»¶å¤„ç†ç¨‹åºæ–¹æ³•ç»‘å®šåˆ°å®ä¾‹ä¸Š\n\næ‰€ä»¥ï¼Œå½“åœ¨React classä¸­éœ€è¦è®¾ç½®stateçš„åˆå§‹å€¼æˆ–è€…ç»‘å®šäº‹ä»¶æ—¶ï¼Œéœ€è¦åŠ ä¸Šæ„é€ å‡½æ•°ï¼Œå®˜æ–¹Demoï¼š\nclass LikeButton extends React.Component &#123;\n  constructor() &#123;\n    super();\n    this.state &#x3D; &#123;\n      liked: false\n    &#125;;\n    this.handleClick &#x3D; this.handleClick.bind(this);\n  &#125;\n  handleClick() &#123;\n    this.setState(&#123;liked: !this.state.liked&#125;);\n  &#125;\n  render() &#123;\n    const text &#x3D; this.state.liked ? &#39;liked&#39; : &#39;haven&#39;t liked&#39;;\n    return (\n      &lt;div onClick&#x3D;&#123;this.handleClick&#125;&gt;\n        You &#123;text&#125; this. Click to toggle.\n      &lt;&#x2F;div&gt;\n    );\n  &#125;\n&#125;\nReactDOM.render(\n  &lt;LikeButton &#x2F;&gt;,\n  document.getElementById(&#39;example&#39;)\n);\nå¤åˆ¶ä»£ç \n\næ„é€ å‡½æ•°ç”¨æ¥æ–°å»ºçˆ¶ç±»çš„thiså¯¹è±¡ï¼›å­ç±»å¿…é¡»åœ¨constructoræ–¹æ³•ä¸­è°ƒç”¨superæ–¹æ³•ï¼›å¦åˆ™æ–°å»ºå®ä¾‹æ—¶ä¼šæŠ¥é”™ï¼›å› ä¸ºå­ç±»æ²¡æœ‰è‡ªå·±çš„thiså¯¹è±¡ï¼Œè€Œæ˜¯ç»§æ‰¿çˆ¶ç±»çš„thiså¯¹è±¡ï¼Œç„¶åå¯¹å…¶è¿›è¡ŒåŠ å·¥ã€‚å¦‚æœä¸è°ƒç”¨superæ–¹æ³•ï¼›å­ç±»å°±å¾—ä¸åˆ°thiså¯¹è±¡ã€‚\næ³¨æ„ï¼š\n\nconstructor () å¿…é¡»é…ä¸Š super(), å¦‚æœè¦åœ¨constructor å†…éƒ¨ä½¿ç”¨ this.props å°±è¦ ä¼ å…¥props , å¦åˆ™ä¸ç”¨\nJavaScriptä¸­çš„ bind æ¯æ¬¡éƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°, ä¸ºäº†æ€§èƒ½ç­‰è€ƒè™‘, å°½é‡åœ¨constructorä¸­ç»‘å®šäº‹ä»¶\n\n27. React.forwardRefæ˜¯ä»€ä¹ˆï¼Ÿå®ƒæœ‰ä»€ä¹ˆä½œç”¨ï¼ŸReact.forwardRef ä¼šåˆ›å»ºä¸€ä¸ªReactç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶èƒ½å¤Ÿå°†å…¶æ¥å—çš„ ref å±æ€§è½¬å‘åˆ°å…¶ç»„ä»¶æ ‘ä¸‹çš„å¦ä¸€ä¸ªç»„ä»¶ä¸­ã€‚è¿™ç§æŠ€æœ¯å¹¶ä¸å¸¸è§ï¼Œä½†åœ¨ä»¥ä¸‹ä¸¤ç§åœºæ™¯ä¸­ç‰¹åˆ«æœ‰ç”¨ï¼š\n\nè½¬å‘ refs åˆ° DOM ç»„ä»¶\nåœ¨é«˜é˜¶ç»„ä»¶ä¸­è½¬å‘ refs\n\n28. ç±»ç»„ä»¶ä¸å‡½æ•°ç»„ä»¶æœ‰ä»€ä¹ˆå¼‚åŒï¼Ÿç›¸åŒç‚¹ï¼š ç»„ä»¶æ˜¯ React å¯å¤ç”¨çš„æœ€å°ä»£ç ç‰‡æ®µï¼Œå®ƒä»¬ä¼šè¿”å›è¦åœ¨é¡µé¢ä¸­æ¸²æŸ“çš„ React å…ƒç´ ã€‚ä¹Ÿæ­£å› ä¸ºç»„ä»¶æ˜¯ React çš„æœ€å°ç¼–ç å•ä½ï¼Œæ‰€ä»¥æ— è®ºæ˜¯å‡½æ•°ç»„ä»¶è¿˜æ˜¯ç±»ç»„ä»¶ï¼Œåœ¨ä½¿ç”¨æ–¹å¼å’Œæœ€ç»ˆå‘ˆç°æ•ˆæœä¸Šéƒ½æ˜¯å®Œå…¨ä¸€è‡´çš„ã€‚\næˆ‘ä»¬ç”šè‡³å¯ä»¥å°†ä¸€ä¸ªç±»ç»„ä»¶æ”¹å†™æˆå‡½æ•°ç»„ä»¶ï¼Œæˆ–è€…æŠŠå‡½æ•°ç»„ä»¶æ”¹å†™æˆä¸€ä¸ªç±»ç»„ä»¶ï¼ˆè™½ç„¶å¹¶ä¸æ¨èè¿™ç§é‡æ„è¡Œä¸ºï¼‰ã€‚ä»ä½¿ç”¨è€…çš„è§’åº¦è€Œè¨€ï¼Œå¾ˆéš¾ä»ä½¿ç”¨ä½“éªŒä¸ŠåŒºåˆ†ä¸¤è€…ï¼Œè€Œä¸”åœ¨ç°ä»£æµè§ˆå™¨ä¸­ï¼Œé—­åŒ…å’Œç±»çš„æ€§èƒ½åªåœ¨æç«¯åœºæ™¯ä¸‹æ‰ä¼šæœ‰æ˜æ˜¾çš„å·®åˆ«ã€‚æ‰€ä»¥ï¼ŒåŸºæœ¬å¯è®¤ä¸ºä¸¤è€…ä½œä¸ºç»„ä»¶æ˜¯å®Œå…¨ä¸€è‡´çš„ã€‚\nä¸åŒç‚¹ï¼š\n\nå®ƒä»¬åœ¨å¼€å‘æ—¶çš„å¿ƒæ™ºæ¨¡å‹ä¸Šå´å­˜åœ¨å·¨å¤§çš„å·®å¼‚ã€‚ç±»ç»„ä»¶æ˜¯åŸºäºé¢å‘å¯¹è±¡ç¼–ç¨‹çš„ï¼Œå®ƒä¸»æ‰“çš„æ˜¯ç»§æ‰¿ã€ç”Ÿå‘½å‘¨æœŸç­‰æ ¸å¿ƒæ¦‚å¿µï¼›è€Œå‡½æ•°ç»„ä»¶å†…æ ¸æ˜¯å‡½æ•°å¼ç¼–ç¨‹ï¼Œä¸»æ‰“çš„æ˜¯ immutableã€æ²¡æœ‰å‰¯ä½œç”¨ã€å¼•ç”¨é€æ˜ç­‰ç‰¹ç‚¹ã€‚\nä¹‹å‰ï¼Œåœ¨ä½¿ç”¨åœºæ™¯ä¸Šï¼Œå¦‚æœå­˜åœ¨éœ€è¦ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸçš„ç»„ä»¶ï¼Œé‚£ä¹ˆä¸»æ¨ç±»ç»„ä»¶ï¼›è®¾è®¡æ¨¡å¼ä¸Šï¼Œå¦‚æœéœ€è¦ä½¿ç”¨ç»§æ‰¿ï¼Œé‚£ä¹ˆä¸»æ¨ç±»ç»„ä»¶ã€‚ä½†ç°åœ¨ç”±äº React Hooks çš„æ¨å‡ºï¼Œç”Ÿå‘½å‘¨æœŸæ¦‚å¿µçš„æ·¡å‡ºï¼Œå‡½æ•°ç»„ä»¶å¯ä»¥å®Œå…¨å–ä»£ç±»ç»„ä»¶ã€‚å…¶æ¬¡ç»§æ‰¿å¹¶ä¸æ˜¯ç»„ä»¶æœ€ä½³çš„è®¾è®¡æ¨¡å¼ï¼Œå®˜æ–¹æ›´æ¨å´‡â€œç»„åˆä¼˜äºç»§æ‰¿â€çš„è®¾è®¡æ¦‚å¿µï¼Œæ‰€ä»¥ç±»ç»„ä»¶åœ¨è¿™æ–¹é¢çš„ä¼˜åŠ¿ä¹Ÿåœ¨æ·¡å‡ºã€‚\næ€§èƒ½ä¼˜åŒ–ä¸Šï¼Œç±»ç»„ä»¶ä¸»è¦ä¾é  shouldComponentUpdateÂ é˜»æ–­æ¸²æŸ“æ¥æå‡æ€§èƒ½ï¼Œè€Œå‡½æ•°ç»„ä»¶ä¾é  React.memo ç¼“å­˜æ¸²æŸ“ç»“æœæ¥æå‡æ€§èƒ½ã€‚\nä»ä¸Šæ‰‹ç¨‹åº¦è€Œè¨€ï¼Œç±»ç»„ä»¶æ›´å®¹æ˜“ä¸Šæ‰‹ï¼Œä»æœªæ¥è¶‹åŠ¿ä¸Šçœ‹ï¼Œç”±äºReact Hooks çš„æ¨å‡ºï¼Œå‡½æ•°ç»„ä»¶æˆäº†ç¤¾åŒºæœªæ¥ä¸»æ¨çš„æ–¹æ¡ˆã€‚\nç±»ç»„ä»¶åœ¨æœªæ¥æ—¶é—´åˆ‡ç‰‡ä¸å¹¶å‘æ¨¡å¼ä¸­ï¼Œç”±äºç”Ÿå‘½å‘¨æœŸå¸¦æ¥çš„å¤æ‚åº¦ï¼Œå¹¶ä¸æ˜“äºä¼˜åŒ–ã€‚è€Œå‡½æ•°ç»„ä»¶æœ¬èº«è½»é‡ç®€å•ï¼Œä¸”åœ¨ Hooks çš„åŸºç¡€ä¸Šæä¾›äº†æ¯”åŸå…ˆæ›´ç»†ç²’åº¦çš„é€»è¾‘ç»„ç»‡ä¸å¤ç”¨ï¼Œæ›´èƒ½é€‚åº” React çš„æœªæ¥å‘å±•ã€‚\n\näºŒã€æ•°æ®ç®¡ç†1. React setState è°ƒç”¨çš„åŸç† å…·ä½“çš„æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼ˆæºç çº§è§£æï¼‰ï¼š\n\né¦–å…ˆè°ƒç”¨äº†setState å…¥å£å‡½æ•°ï¼Œå…¥å£å‡½æ•°åœ¨è¿™é‡Œå°±æ˜¯å……å½“ä¸€ä¸ªåˆ†å‘å™¨çš„è§’è‰²ï¼Œæ ¹æ®å…¥å‚çš„ä¸åŒï¼Œå°†å…¶åˆ†å‘åˆ°ä¸åŒçš„åŠŸèƒ½å‡½æ•°ä¸­å»ï¼›\n\nReactComponent.prototype.setState &#x3D; function (partialState, callback) &#123;\n  this.updater.enqueueSetState(this, partialState);\n  if (callback) &#123;\n    this.updater.enqueueCallback(this, callback, &#39;setState&#39;);\n  &#125;\n&#125;;\nå¤åˆ¶ä»£ç \n\n\nenqueueSetState æ–¹æ³•å°†æ–°çš„ state æ”¾è¿›ç»„ä»¶çš„çŠ¶æ€é˜Ÿåˆ—é‡Œï¼Œå¹¶è°ƒç”¨ enqueueUpdate æ¥å¤„ç†å°†è¦æ›´æ–°çš„å®ä¾‹å¯¹è±¡ï¼›\n\nenqueueSetState: function (publicInstance, partialState) &#123;\n  &#x2F;&#x2F; æ ¹æ® this æ‹¿åˆ°å¯¹åº”çš„ç»„ä»¶å®ä¾‹\n  var internalInstance &#x3D; getInternalInstanceReadyForUpdate(publicInstance, &#39;setState&#39;);\n  &#x2F;&#x2F; è¿™ä¸ª queue å¯¹åº”çš„å°±æ˜¯ä¸€ä¸ªç»„ä»¶å®ä¾‹çš„ state æ•°ç»„\n  var queue &#x3D; internalInstance._pendingStateQueue || (internalInstance._pendingStateQueue &#x3D; []);\n  queue.push(partialState);\n  &#x2F;&#x2F;  enqueueUpdate ç”¨æ¥å¤„ç†å½“å‰çš„ç»„ä»¶å®ä¾‹\n  enqueueUpdate(internalInstance);\n&#125;\nå¤åˆ¶ä»£ç \n\n\nåœ¨ enqueueUpdate æ–¹æ³•ä¸­å¼•å‡ºäº†ä¸€ä¸ªå…³é”®çš„å¯¹è±¡â€”â€”batchingStrategyï¼Œè¯¥å¯¹è±¡æ‰€å…·å¤‡çš„isBatchingUpdates å±æ€§ç›´æ¥å†³å®šäº†å½“ä¸‹æ˜¯è¦èµ°æ›´æ–°æµç¨‹ï¼Œè¿˜æ˜¯åº”è¯¥æ’é˜Ÿç­‰å¾…ï¼›å¦‚æœè½®åˆ°æ‰§è¡Œï¼Œå°±è°ƒç”¨ batchedUpdates æ–¹æ³•æ¥ç›´æ¥å‘èµ·æ›´æ–°æµç¨‹ã€‚ç”±æ­¤å¯ä»¥æ¨æµ‹ï¼ŒbatchingStrategy æˆ–è®¸æ­£æ˜¯ React å†…éƒ¨ä¸“é—¨ç”¨äºç®¡æ§æ‰¹é‡æ›´æ–°çš„å¯¹è±¡ã€‚\n\nfunction enqueueUpdate(component) &#123;\n  ensureInjected();\n  &#x2F;&#x2F; æ³¨æ„è¿™ä¸€å¥æ˜¯é—®é¢˜çš„å…³é”®ï¼ŒisBatchingUpdatesæ ‡è¯†ç€å½“å‰æ˜¯å¦å¤„äºæ‰¹é‡åˆ›å»º&#x2F;æ›´æ–°ç»„ä»¶çš„é˜¶æ®µ\n  if (!batchingStrategy.isBatchingUpdates) &#123;\n    &#x2F;&#x2F; è‹¥å½“å‰æ²¡æœ‰å¤„äºæ‰¹é‡åˆ›å»º&#x2F;æ›´æ–°ç»„ä»¶çš„é˜¶æ®µï¼Œåˆ™ç«‹å³æ›´æ–°ç»„ä»¶\n    batchingStrategy.batchedUpdates(enqueueUpdate, component);\n    return;\n  &#125;\n  &#x2F;&#x2F; å¦åˆ™ï¼Œå…ˆæŠŠç»„ä»¶å¡å…¥ dirtyComponents é˜Ÿåˆ—é‡Œï¼Œè®©å®ƒâ€œå†ç­‰ç­‰â€\n  dirtyComponents.push(component);\n  if (component._updateBatchNumber &#x3D;&#x3D; null) &#123;\n    component._updateBatchNumber &#x3D; updateBatchNumber + 1;\n  &#125;\n&#125;\nå¤åˆ¶ä»£ç \n\næ³¨æ„ï¼š batchingStrategy å¯¹è±¡å¯ä»¥ç†è§£ä¸ºâ€œé”ç®¡ç†å™¨â€ã€‚è¿™é‡Œçš„â€œé”â€ï¼Œæ˜¯æŒ‡ React å…¨å±€å”¯ä¸€çš„ isBatchingUpdates å˜é‡ï¼ŒisBatchingUpdates çš„åˆå§‹å€¼æ˜¯ falseï¼Œæ„å‘³ç€â€œå½“å‰å¹¶æœªè¿›è¡Œä»»ä½•æ‰¹é‡æ›´æ–°æ“ä½œâ€ã€‚æ¯å½“ React è°ƒç”¨ batchedUpdate å»æ‰§è¡Œæ›´æ–°åŠ¨ä½œæ—¶ï¼Œä¼šå…ˆæŠŠè¿™ä¸ªé”ç»™â€œé”ä¸Šâ€ï¼ˆç½®ä¸º trueï¼‰ï¼Œè¡¨æ˜â€œç°åœ¨æ­£å¤„äºæ‰¹é‡æ›´æ–°è¿‡ç¨‹ä¸­â€ã€‚å½“é”è¢«â€œé”ä¸Šâ€çš„æ—¶å€™ï¼Œä»»ä½•éœ€è¦æ›´æ–°çš„ç»„ä»¶éƒ½åªèƒ½æš‚æ—¶è¿›å…¥ dirtyComponents é‡Œæ’é˜Ÿç­‰å€™ä¸‹ä¸€æ¬¡çš„æ‰¹é‡æ›´æ–°ï¼Œè€Œä¸èƒ½éšæ„â€œæ’é˜Ÿâ€ã€‚æ­¤å¤„ä½“ç°çš„â€œä»»åŠ¡é”â€çš„æ€æƒ³ï¼Œæ˜¯ React é¢å¯¹å¤§é‡çŠ¶æ€ä»ç„¶èƒ½å¤Ÿå®ç°æœ‰åºåˆ†æ‰¹å¤„ç†çš„åŸºçŸ³ã€‚\n2. React setState è°ƒç”¨ä¹‹åå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿæ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥ï¼Ÿï¼ˆ1ï¼‰Reactä¸­setStateåå‘ç”Ÿäº†ä»€ä¹ˆ\nåœ¨ä»£ç ä¸­è°ƒç”¨setStateå‡½æ•°ä¹‹åï¼ŒReact ä¼šå°†ä¼ å…¥çš„å‚æ•°å¯¹è±¡ä¸ç»„ä»¶å½“å‰çš„çŠ¶æ€åˆå¹¶ï¼Œç„¶åè§¦å‘è°ƒå’Œè¿‡ç¨‹(Reconciliation)ã€‚ç»è¿‡è°ƒå’Œè¿‡ç¨‹ï¼ŒReact ä¼šä»¥ç›¸å¯¹é«˜æ•ˆçš„æ–¹å¼æ ¹æ®æ–°çš„çŠ¶æ€æ„å»º React å…ƒç´ æ ‘å¹¶ä¸”ç€æ‰‹é‡æ–°æ¸²æŸ“æ•´ä¸ªUIç•Œé¢ã€‚\nåœ¨ React å¾—åˆ°å…ƒç´ æ ‘ä¹‹åï¼ŒReact ä¼šè‡ªåŠ¨è®¡ç®—å‡ºæ–°çš„æ ‘ä¸è€æ ‘çš„èŠ‚ç‚¹å·®å¼‚ï¼Œç„¶åæ ¹æ®å·®å¼‚å¯¹ç•Œé¢è¿›è¡Œæœ€å°åŒ–é‡æ¸²æŸ“ã€‚åœ¨å·®å¼‚è®¡ç®—ç®—æ³•ä¸­ï¼ŒReact èƒ½å¤Ÿç›¸å¯¹ç²¾ç¡®åœ°çŸ¥é“å“ªäº›ä½ç½®å‘ç”Ÿäº†æ”¹å˜ä»¥åŠåº”è¯¥å¦‚ä½•æ”¹å˜ï¼Œè¿™å°±ä¿è¯äº†æŒ‰éœ€æ›´æ–°ï¼Œè€Œä¸æ˜¯å…¨éƒ¨é‡æ–°æ¸²æŸ“ã€‚\nå¦‚æœåœ¨çŸ­æ—¶é—´å†…é¢‘ç¹setStateã€‚Reactä¼šå°†stateçš„æ”¹å˜å‹å…¥æ ˆä¸­ï¼Œåœ¨åˆé€‚çš„æ—¶æœºï¼Œæ‰¹é‡æ›´æ–°stateå’Œè§†å›¾ï¼Œè¾¾åˆ°æé«˜æ€§èƒ½çš„æ•ˆæœã€‚\nï¼ˆ2ï¼‰setState æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥çš„\nå‡å¦‚æ‰€æœ‰setStateæ˜¯åŒæ­¥çš„ï¼Œæ„å‘³ç€æ¯æ‰§è¡Œä¸€æ¬¡setStateæ—¶ï¼ˆæœ‰å¯èƒ½ä¸€ä¸ªåŒæ­¥ä»£ç ä¸­ï¼Œå¤šæ¬¡setStateï¼‰ï¼Œéƒ½é‡æ–°vnode diff + domä¿®æ”¹ï¼Œè¿™å¯¹æ€§èƒ½æ¥è¯´æ˜¯æä¸ºä¸å¥½çš„ã€‚å¦‚æœæ˜¯å¼‚æ­¥ï¼Œåˆ™å¯ä»¥æŠŠä¸€ä¸ªåŒæ­¥ä»£ç ä¸­çš„å¤šä¸ªsetStateåˆå¹¶æˆä¸€æ¬¡ç»„ä»¶æ›´æ–°ã€‚æ‰€ä»¥é»˜è®¤æ˜¯å¼‚æ­¥çš„ï¼Œä½†æ˜¯åœ¨ä¸€äº›æƒ…å†µä¸‹æ˜¯åŒæ­¥çš„ã€‚\nsetState å¹¶ä¸æ˜¯å•çº¯åŒæ­¥&#x2F;å¼‚æ­¥çš„ï¼Œå®ƒçš„è¡¨ç°ä¼šå› è°ƒç”¨åœºæ™¯çš„ä¸åŒè€Œä¸åŒã€‚åœ¨æºç ä¸­ï¼Œé€šè¿‡ isBatchingUpdates æ¥åˆ¤æ–­setState æ˜¯å…ˆå­˜è¿› state é˜Ÿåˆ—è¿˜æ˜¯ç›´æ¥æ›´æ–°ï¼Œå¦‚æœå€¼ä¸º true åˆ™æ‰§è¡Œå¼‚æ­¥æ“ä½œï¼Œä¸º false åˆ™ç›´æ¥æ›´æ–°ã€‚\n\nå¼‚æ­¥ï¼š åœ¨ React å¯ä»¥æ§åˆ¶çš„åœ°æ–¹ï¼Œå°±ä¸º trueï¼Œæ¯”å¦‚åœ¨ React ç”Ÿå‘½å‘¨æœŸäº‹ä»¶å’Œåˆæˆäº‹ä»¶ä¸­ï¼Œéƒ½ä¼šèµ°åˆå¹¶æ“ä½œï¼Œå»¶è¿Ÿæ›´æ–°çš„ç­–ç•¥ã€‚\nåŒæ­¥ï¼š åœ¨ React æ— æ³•æ§åˆ¶çš„åœ°æ–¹ï¼Œæ¯”å¦‚åŸç”Ÿäº‹ä»¶ï¼Œå…·ä½“å°±æ˜¯åœ¨ addEventListenerÂ ã€setTimeoutã€setInterval ç­‰äº‹ä»¶ä¸­ï¼Œå°±åªèƒ½åŒæ­¥æ›´æ–°ã€‚\n\nä¸€èˆ¬è®¤ä¸ºï¼Œåšå¼‚æ­¥è®¾è®¡æ˜¯ä¸ºäº†æ€§èƒ½ä¼˜åŒ–ã€å‡å°‘æ¸²æŸ“æ¬¡æ•°ï¼š\n\nsetStateè®¾è®¡ä¸ºå¼‚æ­¥ï¼Œå¯ä»¥æ˜¾è‘—çš„æå‡æ€§èƒ½ã€‚å¦‚æœæ¯æ¬¡è°ƒç”¨ setStateéƒ½è¿›è¡Œä¸€æ¬¡æ›´æ–°ï¼Œé‚£ä¹ˆæ„å‘³ç€renderå‡½æ•°ä¼šè¢«é¢‘ç¹è°ƒç”¨ï¼Œç•Œé¢é‡æ–°æ¸²æŸ“ï¼Œè¿™æ ·æ•ˆç‡æ˜¯å¾ˆä½çš„ï¼›æœ€å¥½çš„åŠæ³•åº”è¯¥æ˜¯è·å–åˆ°å¤šä¸ªæ›´æ–°ï¼Œä¹‹åè¿›è¡Œæ‰¹é‡æ›´æ–°ï¼›\nå¦‚æœåŒæ­¥æ›´æ–°äº†stateï¼Œä½†æ˜¯è¿˜æ²¡æœ‰æ‰§è¡Œrenderå‡½æ•°ï¼Œé‚£ä¹ˆstateå’Œpropsä¸èƒ½ä¿æŒåŒæ­¥ã€‚stateå’Œpropsä¸èƒ½ä¿æŒä¸€è‡´æ€§ï¼Œä¼šåœ¨å¼€å‘ä¸­äº§ç”Ÿå¾ˆå¤šçš„é—®é¢˜ï¼›\n\n3. Reactä¸­çš„setStateæ‰¹é‡æ›´æ–°çš„è¿‡ç¨‹æ˜¯ä»€ä¹ˆï¼Ÿè°ƒç”¨ setState æ—¶ï¼Œç»„ä»¶çš„ state å¹¶ä¸ä¼šç«‹å³æ”¹å˜ï¼Œ setState åªæ˜¯æŠŠè¦ä¿®æ”¹çš„ state æ”¾å…¥ä¸€ä¸ªé˜Ÿåˆ—ï¼Œ React ä¼šä¼˜åŒ–çœŸæ­£çš„æ‰§è¡Œæ—¶æœºï¼Œå¹¶å‡ºäºæ€§èƒ½åŸå› ï¼Œä¼šå°† React äº‹ä»¶å¤„ç†ç¨‹åºä¸­çš„å¤šæ¬¡React äº‹ä»¶å¤„ç†ç¨‹åºä¸­çš„å¤šæ¬¡ setState çš„çŠ¶æ€ä¿®æ”¹åˆå¹¶æˆä¸€æ¬¡çŠ¶æ€ä¿®æ”¹ã€‚ æœ€ç»ˆæ›´æ–°åªäº§ç”Ÿä¸€æ¬¡ç»„ä»¶åŠå…¶å­ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ï¼Œè¿™å¯¹äºå¤§å‹åº”ç”¨ç¨‹åºä¸­çš„æ€§èƒ½æå‡è‡³å…³é‡è¦ã€‚\nthis.setState(&#123;\n  count: this.state.count + 1    &#x3D;&#x3D;&#x3D;&gt;    å…¥é˜Ÿï¼Œ[count+1çš„ä»»åŠ¡]\n&#125;);\nthis.setState(&#123;\n  count: this.state.count + 1    &#x3D;&#x3D;&#x3D;&gt;    å…¥é˜Ÿï¼Œ[count+1çš„ä»»åŠ¡ï¼Œcount+1çš„ä»»åŠ¡]\n&#125;);\n                                          â†“\n                                         åˆå¹¶ stateï¼Œ[count+1çš„ä»»åŠ¡]\n                                          â†“\n                                         æ‰§è¡Œ count+1çš„ä»»åŠ¡\nå¤åˆ¶ä»£ç \n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåªè¦åŒæ­¥ä»£ç è¿˜åœ¨æ‰§è¡Œï¼Œâ€œæ”’èµ·æ¥â€è¿™ä¸ªåŠ¨ä½œå°±ä¸ä¼šåœæ­¢ã€‚ï¼ˆæ³¨ï¼šè¿™é‡Œä¹‹æ‰€ä»¥å¤šæ¬¡ +1 æœ€ç»ˆåªæœ‰ä¸€æ¬¡ç”Ÿæ•ˆï¼Œæ˜¯å› ä¸ºåœ¨åŒä¸€ä¸ªæ–¹æ³•ä¸­å¤šæ¬¡ setState çš„åˆå¹¶åŠ¨ä½œä¸æ˜¯å•çº¯åœ°å°†æ›´æ–°ç´¯åŠ ã€‚æ¯”å¦‚è¿™é‡Œå¯¹äºç›¸åŒå±æ€§çš„è®¾ç½®ï¼ŒReact åªä¼šä¸ºå…¶ä¿ç•™æœ€åä¸€æ¬¡çš„æ›´æ–°ï¼‰ã€‚\n4. Reactä¸­æœ‰ä½¿ç”¨è¿‡getDefaultPropså—ï¼Ÿå®ƒæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿé€šè¿‡å®ç°ç»„ä»¶çš„getDefaultPropsï¼Œå¯¹å±æ€§è®¾ç½®é»˜è®¤å€¼ï¼ˆES5çš„å†™æ³•ï¼‰ï¼š\nvar ShowTitle &#x3D; React.createClass(&#123;\n  getDefaultProps:function()&#123;\n    return&#123;\n      title : &quot;React&quot;\n    &#125;\n  &#125;,\n  render : function()&#123;\n    return &lt;h1&gt;&#123;this.props.title&#125;&lt;&#x2F;h1&gt;\n  &#125;\n&#125;);\nå¤åˆ¶ä»£ç \n\n5. Reactä¸­setStateçš„ç¬¬äºŒä¸ªå‚æ•°ä½œç”¨æ˜¯ä»€ä¹ˆï¼ŸsetState çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå¯é€‰çš„å›è°ƒå‡½æ•°ã€‚è¿™ä¸ªå›è°ƒå‡½æ•°å°†åœ¨ç»„ä»¶é‡æ–°æ¸²æŸ“åæ‰§è¡Œã€‚ç­‰ä»·äºåœ¨ componentDidUpdate ç”Ÿå‘½å‘¨æœŸå†…æ‰§è¡Œã€‚é€šå¸¸å»ºè®®ä½¿ç”¨ componentDidUpdate æ¥ä»£æ›¿æ­¤æ–¹å¼ã€‚åœ¨è¿™ä¸ªå›è°ƒå‡½æ•°ä¸­ä½ å¯ä»¥æ‹¿åˆ°æ›´æ–°å state çš„å€¼ï¼š\nthis.setState(&#123;\n    key1: newState1,\n    key2: newState2,\n    ...\n&#125;, callback) &#x2F;&#x2F; ç¬¬äºŒä¸ªå‚æ•°æ˜¯ state æ›´æ–°å®Œæˆåçš„å›è°ƒå‡½æ•°\nå¤åˆ¶ä»£ç \n\n6. Reactä¸­çš„setStateå’ŒreplaceStateçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆ1ï¼‰setState() setState()ç”¨äºè®¾ç½®çŠ¶æ€å¯¹è±¡ï¼Œå…¶è¯­æ³•å¦‚ä¸‹ï¼š\nsetState(object nextState[, function callback])\nå¤åˆ¶ä»£ç \n\n\nnextStateï¼Œå°†è¦è®¾ç½®çš„æ–°çŠ¶æ€ï¼Œè¯¥çŠ¶æ€ä¼šå’Œå½“å‰çš„stateåˆå¹¶\ncallbackï¼Œå¯é€‰å‚æ•°ï¼Œå›è°ƒå‡½æ•°ã€‚è¯¥å‡½æ•°ä¼šåœ¨setStateè®¾ç½®æˆåŠŸï¼Œä¸”ç»„ä»¶é‡æ–°æ¸²æŸ“åè°ƒç”¨ã€‚\n\nåˆå¹¶nextStateå’Œå½“å‰stateï¼Œå¹¶é‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚setStateæ˜¯Reactäº‹ä»¶å¤„ç†å‡½æ•°ä¸­å’Œè¯·æ±‚å›è°ƒå‡½æ•°ä¸­è§¦å‘UIæ›´æ–°çš„ä¸»è¦æ–¹æ³•ã€‚\nï¼ˆ2ï¼‰replaceState() replaceState()æ–¹æ³•ä¸setState()ç±»ä¼¼ï¼Œä½†æ˜¯æ–¹æ³•åªä¼šä¿ç•™nextStateä¸­çŠ¶æ€ï¼ŒåŸstateä¸åœ¨nextStateä¸­çš„çŠ¶æ€éƒ½ä¼šè¢«åˆ é™¤ã€‚å…¶è¯­æ³•å¦‚ä¸‹ï¼š\nreplaceState(object nextState[, function callback])\nå¤åˆ¶ä»£ç \n\n\nnextStateï¼Œå°†è¦è®¾ç½®çš„æ–°çŠ¶æ€ï¼Œè¯¥çŠ¶æ€ä¼šæ›¿æ¢å½“å‰çš„stateã€‚\ncallbackï¼Œå¯é€‰å‚æ•°ï¼Œå›è°ƒå‡½æ•°ã€‚è¯¥å‡½æ•°ä¼šåœ¨replaceStateè®¾ç½®æˆåŠŸï¼Œä¸”ç»„ä»¶é‡æ–°æ¸²æŸ“åè°ƒç”¨ã€‚\n\næ€»ç»“ï¼š setStateÂ æ˜¯ä¿®æ”¹å…¶ä¸­çš„éƒ¨åˆ†çŠ¶æ€ï¼Œç›¸å½“äº Object.assignï¼Œåªæ˜¯è¦†ç›–ï¼Œä¸ä¼šå‡å°‘åŸæ¥çš„çŠ¶æ€ã€‚è€ŒreplaceState æ˜¯å®Œå…¨æ›¿æ¢åŸæ¥çš„çŠ¶æ€ï¼Œç›¸å½“äºèµ‹å€¼ï¼Œå°†åŸæ¥çš„ state æ›¿æ¢ä¸ºå¦ä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœæ–°çŠ¶æ€å±æ€§å‡å°‘ï¼Œé‚£ä¹ˆ state ä¸­å°±æ²¡æœ‰è¿™ä¸ªçŠ¶æ€äº†ã€‚\n7. åœ¨Reactä¸­ç»„ä»¶çš„this.stateå’ŒsetStateæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿthis.stateé€šå¸¸æ˜¯ç”¨æ¥åˆå§‹åŒ–stateçš„ï¼Œthis.setStateæ˜¯ç”¨æ¥ä¿®æ”¹stateå€¼çš„ã€‚å¦‚æœåˆå§‹åŒ–äº†stateä¹‹åå†ä½¿ç”¨this.stateï¼Œä¹‹å‰çš„stateä¼šè¢«è¦†ç›–æ‰ï¼Œå¦‚æœä½¿ç”¨this.setStateï¼Œåªä¼šæ›¿æ¢æ‰ç›¸åº”çš„stateå€¼ã€‚æ‰€ä»¥ï¼Œå¦‚æœæƒ³è¦ä¿®æ”¹stateçš„å€¼ï¼Œå°±éœ€è¦ä½¿ç”¨setStateï¼Œè€Œä¸èƒ½ç›´æ¥ä¿®æ”¹stateï¼Œç›´æ¥ä¿®æ”¹stateä¹‹åé¡µé¢æ˜¯ä¸ä¼šæ›´æ–°çš„ã€‚\n8. state æ˜¯æ€ä¹ˆæ³¨å…¥åˆ°ç»„ä»¶çš„ï¼Œä» reducer åˆ°ç»„ä»¶ç»å†äº†ä»€ä¹ˆæ ·çš„è¿‡ç¨‹é€šè¿‡connectå’ŒmapStateToPropså°†stateæ³¨å…¥åˆ°ç»„ä»¶ä¸­ï¼š\nimport &#123; connect &#125; from &#39;react-redux&#39;\nimport &#123; setVisibilityFilter &#125; from &#39;@&#x2F;reducers&#x2F;Todo&#x2F;actions&#39;\nimport Link from &#39;@&#x2F;containers&#x2F;Todo&#x2F;components&#x2F;Link&#39;\n\nconst mapStateToProps &#x3D; (state, ownProps) &#x3D;&gt; (&#123;\n    active: ownProps.filter &#x3D;&#x3D;&#x3D; state.visibilityFilter\n&#125;)\n\nconst mapDispatchToProps &#x3D; (dispatch, ownProps) &#x3D;&gt; (&#123;\n    setFilter: () &#x3D;&gt; &#123;\n        dispatch(setVisibilityFilter(ownProps.filter))\n    &#125;\n&#125;)\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(Link)\nå¤åˆ¶ä»£ç \n\nä¸Šé¢ä»£ç ä¸­ï¼Œactiveå°±æ˜¯æ³¨å…¥åˆ°Linkç»„ä»¶ä¸­çš„çŠ¶æ€ã€‚ mapStateToPropsï¼ˆstateï¼ŒownPropsï¼‰ä¸­å¸¦æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œå«ä¹‰æ˜¯âˆ¶\n\nstate-storeç®¡ç†çš„å…¨å±€çŠ¶æ€å¯¹è±¡ï¼Œæ‰€æœ‰éƒ½ç»„ä»¶çŠ¶æ€æ•°æ®éƒ½å­˜å‚¨åœ¨è¯¥å¯¹è±¡ä¸­ã€‚\nownProps ç»„ä»¶é€šè¿‡propsä¼ å…¥çš„å‚æ•°ã€‚\n\nreducer åˆ°ç»„ä»¶ç»å†çš„è¿‡ç¨‹ï¼š\n\nreducerå¯¹actionå¯¹è±¡å¤„ç†ï¼Œæ›´æ–°ç»„ä»¶çŠ¶æ€ï¼Œå¹¶å°†æ–°çš„çŠ¶æ€å€¼è¿”å›storeã€‚\né€šè¿‡connectï¼ˆmapStateToPropsï¼ŒmapDispatchToPropsï¼‰ï¼ˆComponentï¼‰å¯¹ç»„ä»¶ Componentè¿›è¡Œå‡çº§ï¼Œæ­¤æ—¶å°†çŠ¶æ€å€¼ä»storeå–å‡ºå¹¶ä½œä¸ºpropså‚æ•°ä¼ é€’åˆ°ç»„ä»¶ã€‚\n\né«˜é˜¶ç»„ä»¶å®ç°æºç âˆ¶\nimport React from &#39;react&#39;\nimport PropTypes from &#39;prop-types&#39;\n\n&#x2F;&#x2F; é«˜é˜¶ç»„ä»¶ contect \nexport const connect &#x3D; (mapStateToProps, mapDispatchToProps) &#x3D;&gt; (WrappedComponent) &#x3D;&gt; &#123;\n    class Connect extends React.Component &#123;\n        &#x2F;&#x2F; é€šè¿‡å¯¹contextè°ƒç”¨è·å–store\n        static contextTypes &#x3D; &#123;\n            store: PropTypes.object\n        &#125;\n\n        constructor() &#123;\n            super()\n            this.state &#x3D; &#123;\n                allProps: &#123;&#125;\n            &#125;\n        &#125;\n\n        &#x2F;&#x2F; ç¬¬ä¸€ééœ€åˆå§‹åŒ–æ‰€æœ‰ç»„ä»¶åˆå§‹çŠ¶æ€\n        componentWillMount() &#123;\n            const store &#x3D; this.context.store\n            this._updateProps()\n            store.subscribe(() &#x3D;&gt; this._updateProps()); &#x2F;&#x2F; åŠ å…¥_updateProps()è‡³storeé‡Œçš„ç›‘å¬äº‹ä»¶åˆ—è¡¨\n        &#125;\n\n        &#x2F;&#x2F; æ‰§è¡Œactionåæ›´æ–°propsï¼Œä½¿ç»„ä»¶å¯ä»¥æ›´æ–°è‡³æœ€æ–°çŠ¶æ€ï¼ˆç±»ä¼¼äºsetStateï¼‰\n        _updateProps() &#123;\n            const store &#x3D; this.context.store;\n            let stateProps &#x3D; mapStateToProps ?\n                mapStateToProps(store.getState(), this.props) : &#123;&#125; &#x2F;&#x2F; é˜²æ­¢ mapStateToProps æ²¡æœ‰ä¼ å…¥\n            let dispatchProps &#x3D; mapDispatchToProps ?\n                mapDispatchToProps(store.dispatch, this.props) : &#123;\n                                    dispatch: store.dispatch\n                                &#125; &#x2F;&#x2F; é˜²æ­¢ mapDispatchToProps æ²¡æœ‰ä¼ å…¥\n            this.setState(&#123;\n                allProps: &#123;\n                    ...stateProps,\n                    ...dispatchProps,\n                    ...this.props\n                &#125;\n            &#125;)\n        &#125;\n\n        render() &#123;\n            return &lt;WrappedComponent &#123;...this.state.allProps&#125; &#x2F;&gt;\n        &#125;\n    &#125;\n    return Connect\n&#125;\nå¤åˆ¶ä»£ç \n\n9. Reactç»„ä»¶çš„stateå’Œpropsæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿï¼ˆ1ï¼‰props\npropsæ˜¯ä¸€ä¸ªä»å¤–éƒ¨ä¼ è¿›ç»„ä»¶çš„å‚æ•°ï¼Œä¸»è¦ä½œä¸ºå°±æ˜¯ä»çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’æ•°æ®ï¼Œå®ƒå…·æœ‰å¯è¯»æ€§å’Œä¸å˜æ€§ï¼Œåªèƒ½é€šè¿‡å¤–éƒ¨ç»„ä»¶ä¸»åŠ¨ä¼ å…¥æ–°çš„propsæ¥é‡æ–°æ¸²æŸ“å­ç»„ä»¶ï¼Œå¦åˆ™å­ç»„ä»¶çš„propsä»¥åŠå±•ç°å½¢å¼ä¸ä¼šæ”¹å˜ã€‚\nï¼ˆ2ï¼‰state\nstateçš„ä¸»è¦ä½œç”¨æ˜¯ç”¨äºç»„ä»¶ä¿å­˜ã€æ§åˆ¶ä»¥åŠä¿®æ”¹è‡ªå·±çš„çŠ¶æ€ï¼Œå®ƒåªèƒ½åœ¨constructorä¸­åˆå§‹åŒ–ï¼Œå®ƒç®—æ˜¯ç»„ä»¶çš„ç§æœ‰å±æ€§ï¼Œä¸å¯é€šè¿‡å¤–éƒ¨è®¿é—®å’Œä¿®æ”¹ï¼Œåªèƒ½é€šè¿‡ç»„ä»¶å†…éƒ¨çš„this.setStateæ¥ä¿®æ”¹ï¼Œä¿®æ”¹stateå±æ€§ä¼šå¯¼è‡´ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚\nï¼ˆ3ï¼‰åŒºåˆ«\n\nprops æ˜¯ä¼ é€’ç»™ç»„ä»¶çš„ï¼ˆç±»ä¼¼äºå‡½æ•°çš„å½¢å‚ï¼‰ï¼Œè€Œstate æ˜¯åœ¨ç»„ä»¶å†…è¢«ç»„ä»¶è‡ªå·±ç®¡ç†çš„ï¼ˆç±»ä¼¼äºåœ¨ä¸€ä¸ªå‡½æ•°å†…å£°æ˜çš„å˜é‡ï¼‰ã€‚\nprops æ˜¯ä¸å¯ä¿®æ”¹çš„ï¼Œæ‰€æœ‰ React ç»„ä»¶éƒ½å¿…é¡»åƒçº¯å‡½æ•°ä¸€æ ·ä¿æŠ¤å®ƒä»¬çš„ props ä¸è¢«æ›´æ”¹ã€‚\nstate æ˜¯åœ¨ç»„ä»¶ä¸­åˆ›å»ºçš„ï¼Œä¸€èˆ¬åœ¨ constructorä¸­åˆå§‹åŒ– stateã€‚state æ˜¯å¤šå˜çš„ã€å¯ä»¥ä¿®æ”¹ï¼Œæ¯æ¬¡setStateéƒ½å¼‚æ­¥æ›´æ–°çš„ã€‚\n\n10. Reactä¸­çš„propsä¸ºä»€ä¹ˆæ˜¯åªè¯»çš„ï¼Ÿthis.propsæ˜¯ç»„ä»¶ä¹‹é—´æ²Ÿé€šçš„ä¸€ä¸ªæ¥å£ï¼ŒåŸåˆ™ä¸Šæ¥è®²ï¼Œå®ƒåªèƒ½ä»çˆ¶ç»„ä»¶æµå‘å­ç»„ä»¶ã€‚Reactå…·æœ‰æµ“é‡çš„å‡½æ•°å¼ç¼–ç¨‹çš„æ€æƒ³ã€‚\næåˆ°å‡½æ•°å¼ç¼–ç¨‹å°±è¦æä¸€ä¸ªæ¦‚å¿µï¼šçº¯å‡½æ•°ã€‚å®ƒæœ‰å‡ ä¸ªç‰¹ç‚¹ï¼š\n\nç»™å®šç›¸åŒçš„è¾“å…¥ï¼Œæ€»æ˜¯è¿”å›ç›¸åŒçš„è¾“å‡ºã€‚\nè¿‡ç¨‹æ²¡æœ‰å‰¯ä½œç”¨ã€‚\nä¸ä¾èµ–å¤–éƒ¨çŠ¶æ€ã€‚\n\nthis.propså°±æ˜¯æ±²å–äº†çº¯å‡½æ•°çš„æ€æƒ³ã€‚propsçš„ä¸å¯ä»¥å˜æ€§å°±ä¿è¯çš„ç›¸åŒçš„è¾“å…¥ï¼Œé¡µé¢æ˜¾ç¤ºçš„å†…å®¹æ˜¯ä¸€æ ·çš„ï¼Œå¹¶ä¸”ä¸ä¼šäº§ç”Ÿå‰¯ä½œç”¨\n11. åœ¨Reactä¸­ç»„ä»¶çš„propsæ”¹å˜æ—¶æ›´æ–°ç»„ä»¶çš„æœ‰å“ªäº›æ–¹æ³•ï¼Ÿåœ¨ä¸€ä¸ªç»„ä»¶ä¼ å…¥çš„propsæ›´æ–°æ—¶é‡æ–°æ¸²æŸ“è¯¥ç»„ä»¶å¸¸ç”¨çš„æ–¹æ³•æ˜¯åœ¨componentWillReceivePropsä¸­å°†æ–°çš„propsæ›´æ–°åˆ°ç»„ä»¶çš„stateä¸­ï¼ˆè¿™ç§stateè¢«æˆä¸ºæ´¾ç”ŸçŠ¶æ€ï¼ˆDerived Stateï¼‰ï¼‰ï¼Œä»è€Œå®ç°é‡æ–°æ¸²æŸ“ã€‚React 16.3ä¸­è¿˜å¼•å…¥äº†ä¸€ä¸ªæ–°çš„é’©å­å‡½æ•°getDerivedStateFromPropsæ¥ä¸“é—¨å®ç°è¿™ä¸€éœ€æ±‚ã€‚\nï¼ˆ1ï¼‰componentWillReceivePropsï¼ˆå·²åºŸå¼ƒï¼‰\nåœ¨reactçš„componentWillReceiveProps(nextProps)ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œå¯ä»¥åœ¨å­ç»„ä»¶çš„renderå‡½æ•°æ‰§è¡Œå‰ï¼Œé€šè¿‡this.propsè·å–æ—§çš„å±æ€§ï¼Œé€šè¿‡nextPropsè·å–æ–°çš„propsï¼Œå¯¹æ¯”ä¸¤æ¬¡propsæ˜¯å¦ç›¸åŒï¼Œä»è€Œæ›´æ–°å­ç»„ä»¶è‡ªå·±çš„stateã€‚\nè¿™æ ·çš„å¥½å¤„æ˜¯ï¼Œå¯ä»¥å°†æ•°æ®è¯·æ±‚æ”¾åœ¨è¿™é‡Œè¿›è¡Œæ‰§è¡Œï¼Œéœ€è¦ä¼ çš„å‚æ•°åˆ™ä»componentWillReceiveProps(nextProps)ä¸­è·å–ã€‚è€Œä¸å¿…å°†æ‰€æœ‰çš„è¯·æ±‚éƒ½æ”¾åœ¨çˆ¶ç»„ä»¶ä¸­ã€‚äºæ˜¯è¯¥è¯·æ±‚åªä¼šåœ¨è¯¥ç»„ä»¶æ¸²æŸ“æ—¶æ‰ä¼šå‘å‡ºï¼Œä»è€Œå‡è½»è¯·æ±‚è´Ÿæ‹…ã€‚\nï¼ˆ2ï¼‰getDerivedStateFromPropsï¼ˆ16.3å¼•å…¥ï¼‰\nè¿™ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°æ˜¯ä¸ºäº†æ›¿ä»£componentWillReceivePropså­˜åœ¨çš„ï¼Œæ‰€ä»¥åœ¨éœ€è¦ä½¿ç”¨componentWillReceivePropsæ—¶ï¼Œå°±å¯ä»¥è€ƒè™‘ä½¿ç”¨getDerivedStateFromPropsæ¥è¿›è¡Œæ›¿ä»£ã€‚\nä¸¤è€…çš„å‚æ•°æ˜¯ä¸ç›¸åŒçš„ï¼Œè€ŒgetDerivedStateFromPropsæ˜¯ä¸€ä¸ªé™æ€å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªå‡½æ•°ä¸èƒ½é€šè¿‡thisè®¿é—®åˆ°classçš„å±æ€§ï¼Œä¹Ÿå¹¶ä¸æ¨èç›´æ¥è®¿é—®å±æ€§ã€‚è€Œæ˜¯åº”è¯¥é€šè¿‡å‚æ•°æä¾›çš„nextPropsä»¥åŠprevStateæ¥è¿›è¡Œåˆ¤æ–­ï¼Œæ ¹æ®æ–°ä¼ å…¥çš„propsæ¥æ˜ å°„åˆ°stateã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœpropsä¼ å…¥çš„å†…å®¹ä¸éœ€è¦å½±å“åˆ°ä½ çš„stateï¼Œé‚£ä¹ˆå°±éœ€è¦è¿”å›ä¸€ä¸ªnullï¼Œè¿™ä¸ªè¿”å›å€¼æ˜¯å¿…é¡»çš„ï¼Œæ‰€ä»¥å°½é‡å°†å…¶å†™åˆ°å‡½æ•°çš„æœ«å°¾ï¼š\nstatic getDerivedStateFromProps(nextProps, prevState) &#123;\n    const &#123;type&#125; &#x3D; nextProps;\n    &#x2F;&#x2F; å½“ä¼ å…¥çš„typeå‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œæ›´æ–°state\n    if (type !&#x3D;&#x3D; prevState.type) &#123;\n        return &#123;\n            type,\n        &#125;;\n    &#125;\n    &#x2F;&#x2F; å¦åˆ™ï¼Œå¯¹äºstateä¸è¿›è¡Œä»»ä½•æ“ä½œ\n    return null;\n&#125;\nå¤åˆ¶ä»£ç \n\n12. Reactä¸­æ€ä¹ˆæ£€éªŒpropsï¼ŸéªŒè¯propsçš„ç›®çš„æ˜¯ä»€ä¹ˆï¼ŸReactä¸ºæˆ‘ä»¬æä¾›äº†PropTypesä»¥ä¾›éªŒè¯ä½¿ç”¨ã€‚å½“æˆ‘ä»¬å‘Propsä¼ å…¥çš„æ•°æ®æ— æ•ˆï¼ˆå‘Propsä¼ å…¥çš„æ•°æ®ç±»å‹å’ŒéªŒè¯çš„æ•°æ®ç±»å‹ä¸ç¬¦ï¼‰å°±ä¼šåœ¨æ§åˆ¶å°å‘å‡ºè­¦å‘Šä¿¡æ¯ã€‚å®ƒå¯ä»¥é¿å…éšç€åº”ç”¨è¶Šæ¥è¶Šå¤æ‚ä»è€Œå‡ºç°çš„é—®é¢˜ã€‚å¹¶ä¸”ï¼Œå®ƒè¿˜å¯ä»¥è®©ç¨‹åºå˜å¾—æ›´æ˜“è¯»ã€‚\nimport PropTypes from &#39;prop-types&#39;;\n\nclass Greeting extends React.Component &#123;\n  render() &#123;\n    return (\n      &lt;h1&gt;Hello, &#123;this.props.name&#125;&lt;&#x2F;h1&gt;\n    );\n  &#125;\n&#125;\n\nGreeting.propTypes &#x3D; &#123;\n  name: PropTypes.string\n&#125;;\nå¤åˆ¶ä»£ç \n\nå½“ç„¶ï¼Œå¦‚æœé¡¹ç›®æ±‡ä¸­ä½¿ç”¨äº†TypeScriptï¼Œé‚£ä¹ˆå°±å¯ä»¥ä¸ç”¨PropTypesæ¥æ ¡éªŒï¼Œè€Œä½¿ç”¨TypeScriptå®šä¹‰æ¥å£æ¥æ ¡éªŒpropsã€‚\nä¸‰ã€ç”Ÿå‘½å‘¨æœŸ1. Reactçš„ç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›ï¼ŸReact é€šå¸¸å°†ç»„ä»¶ç”Ÿå‘½å‘¨æœŸåˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š\n\nè£…è½½é˜¶æ®µï¼ˆMountï¼‰ï¼Œç»„ä»¶ç¬¬ä¸€æ¬¡åœ¨DOMæ ‘ä¸­è¢«æ¸²æŸ“çš„è¿‡ç¨‹ï¼›\næ›´æ–°è¿‡ç¨‹ï¼ˆUpdateï¼‰ï¼Œç»„ä»¶çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œé‡æ–°æ›´æ–°æ¸²æŸ“çš„è¿‡ç¨‹ï¼›\nå¸è½½è¿‡ç¨‹ï¼ˆUnmountï¼‰ï¼Œç»„ä»¶ä»DOMæ ‘ä¸­è¢«ç§»é™¤çš„è¿‡ç¨‹ï¼›\n\n\n1ï¼‰ç»„ä»¶æŒ‚è½½é˜¶æ®µæŒ‚è½½é˜¶æ®µç»„ä»¶è¢«åˆ›å»ºï¼Œç„¶åç»„ä»¶å®ä¾‹æ’å…¥åˆ° DOM ä¸­ï¼Œå®Œæˆç»„ä»¶çš„ç¬¬ä¸€æ¬¡æ¸²æŸ“ï¼Œè¯¥è¿‡ç¨‹åªä¼šå‘ç”Ÿä¸€æ¬¡ï¼Œåœ¨æ­¤é˜¶æ®µä¼šä¾æ¬¡è°ƒç”¨ä»¥ä¸‹è¿™äº›æ–¹æ³•ï¼š\n\nconstructor\ngetDerivedStateFromProps\nrender\ncomponentDidMount\n\nï¼ˆ1ï¼‰constructorç»„ä»¶çš„æ„é€ å‡½æ•°ï¼Œç¬¬ä¸€ä¸ªè¢«æ‰§è¡Œï¼Œè‹¥æ²¡æœ‰æ˜¾å¼å®šä¹‰å®ƒï¼Œä¼šæœ‰ä¸€ä¸ªé»˜è®¤çš„æ„é€ å‡½æ•°ï¼Œä½†æ˜¯è‹¥æ˜¾å¼å®šä¹‰äº†æ„é€ å‡½æ•°ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨æ„é€ å‡½æ•°ä¸­æ‰§è¡Œ super(props)ï¼Œå¦åˆ™æ— æ³•åœ¨æ„é€ å‡½æ•°ä¸­æ‹¿åˆ°thisã€‚\nå¦‚æœä¸åˆå§‹åŒ– state æˆ–ä¸è¿›è¡Œæ–¹æ³•ç»‘å®šï¼Œåˆ™ä¸éœ€è¦ä¸º React ç»„ä»¶å®ç°æ„é€ å‡½æ•°Constructorã€‚\nconstructorä¸­é€šå¸¸åªåšä¸¤ä»¶äº‹ï¼š\n\nåˆå§‹åŒ–ç»„ä»¶çš„ state\nç»™äº‹ä»¶å¤„ç†æ–¹æ³•ç»‘å®š this\n\nconstructor(props) &#123;\n  super(props);\n  &#x2F;&#x2F; ä¸è¦åœ¨æ„é€ å‡½æ•°ä¸­è°ƒç”¨ setStateï¼Œå¯ä»¥ç›´æ¥ç»™ state è®¾ç½®åˆå§‹å€¼\n  this.state &#x3D; &#123; counter: 0 &#125;\n  this.handleClick &#x3D; this.handleClick.bind(this)\n&#125;\nå¤åˆ¶ä»£ç \n\nï¼ˆ2ï¼‰getDerivedStateFromPropsstatic getDerivedStateFromProps(props, state)\nå¤åˆ¶ä»£ç \n\nè¿™æ˜¯ä¸ªé™æ€æ–¹æ³•ï¼Œæ‰€ä»¥ä¸èƒ½åœ¨è¿™ä¸ªå‡½æ•°é‡Œä½¿ç”¨ thisï¼Œæœ‰ä¸¤ä¸ªå‚æ•° props å’Œ stateï¼Œåˆ†åˆ«æŒ‡æ¥æ”¶åˆ°çš„æ–°å‚æ•°å’Œå½“å‰ç»„ä»¶çš„ state å¯¹è±¡ï¼Œè¿™ä¸ªå‡½æ•°ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ç”¨æ¥æ›´æ–°å½“å‰çš„ state å¯¹è±¡ï¼Œå¦‚æœä¸éœ€è¦æ›´æ–°å¯ä»¥è¿”å› nullã€‚\nè¯¥å‡½æ•°ä¼šåœ¨è£…è½½æ—¶ï¼Œæ¥æ”¶åˆ°æ–°çš„ props æˆ–è€…è°ƒç”¨äº† setState å’Œ forceUpdate æ—¶è¢«è°ƒç”¨ã€‚å¦‚å½“æ¥æ”¶åˆ°æ–°çš„å±æ€§æƒ³ä¿®æ”¹ state ï¼Œå°±å¯ä»¥ä½¿ç”¨ã€‚\n&#x2F;&#x2F; å½“ props.counter å˜åŒ–æ—¶ï¼Œèµ‹å€¼ç»™ state \nclass App extends React.Component &#123;\n  constructor(props) &#123;\n    super(props)\n    this.state &#x3D; &#123;\n      counter: 0\n    &#125;\n  &#125;\n  static getDerivedStateFromProps(props, state) &#123;\n    if (props.counter !&#x3D;&#x3D; state.counter) &#123;\n      return &#123;\n        counter: props.counter\n      &#125;\n    &#125;\n    return null\n  &#125;\n  \n  handleClick &#x3D; () &#x3D;&gt; &#123;\n    this.setState(&#123;\n      counter: this.state.counter + 1\n    &#125;)\n  &#125;\n  render() &#123;\n    return (\n      &lt;div&gt;\n        &lt;h1 onClick&#x3D;&#123;this.handleClick&#125;&gt;Hello, world!&#123;this.state.counter&#125;&lt;&#x2F;h1&gt;\n      &lt;&#x2F;div&gt;\n    )\n  &#125;\n&#125;\nå¤åˆ¶ä»£ç \n\nç°åœ¨å¯ä»¥æ˜¾å¼ä¼ å…¥ counter ï¼Œä½†æ˜¯è¿™é‡Œæœ‰ä¸ªé—®é¢˜ï¼Œå¦‚æœæƒ³è¦é€šè¿‡ç‚¹å‡»å®ç° state.counter çš„å¢åŠ ï¼Œä½†è¿™æ—¶ä¼šå‘ç°å€¼ä¸ä¼šå‘ç”Ÿä»»ä½•å˜åŒ–ï¼Œä¸€ç›´ä¿æŒ props ä¼ è¿›æ¥çš„å€¼ã€‚è¿™æ˜¯ç”±äºåœ¨ React 16.4^ çš„ç‰ˆæœ¬ä¸­ setState å’Œ forceUpdate ä¹Ÿä¼šè§¦å‘è¿™ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œæ‰€ä»¥å½“ç»„ä»¶å†…éƒ¨ state å˜åŒ–åï¼Œå°±ä¼šé‡æ–°èµ°è¿™ä¸ªæ–¹æ³•ï¼ŒåŒæ—¶ä¼šæŠŠ state å€¼èµ‹å€¼ä¸º props çš„å€¼ã€‚å› æ­¤éœ€è¦å¤šåŠ ä¸€ä¸ªå­—æ®µæ¥è®°å½•ä¹‹å‰çš„ props å€¼ï¼Œè¿™æ ·å°±ä¼šè§£å†³ä¸Šè¿°é—®é¢˜ã€‚å…·ä½“å¦‚ä¸‹ï¼š\n&#x2F;&#x2F; è¿™é‡Œåªåˆ—å‡ºéœ€è¦å˜åŒ–çš„åœ°æ–¹\nclass App extends React.Component &#123;\n  constructor(props) &#123;\n    super(props)\n    this.state &#x3D; &#123;\n      &#x2F;&#x2F; å¢åŠ ä¸€ä¸ª preCounter æ¥è®°å½•ä¹‹å‰çš„ props ä¼ æ¥çš„å€¼\n      preCounter: 0,\n      counter: 0\n    &#125;\n  &#125;\n  static getDerivedStateFromProps(props, state) &#123;\n    &#x2F;&#x2F; è·Ÿ state.preCounter è¿›è¡Œæ¯”è¾ƒ\n    if (props.counter !&#x3D;&#x3D; state.preCounter) &#123;\n      return &#123;\n        counter: props.counter,\n        preCounter: props.counter\n      &#125;\n    &#125;\n    return null\n  &#125;\n  handleClick &#x3D; () &#x3D;&gt; &#123;\n    this.setState(&#123;\n      counter: this.state.counter + 1\n    &#125;)\n  &#125;\n  render() &#123;\n    return (\n      &lt;div&gt;\n        &lt;h1 onClick&#x3D;&#123;this.handleClick&#125;&gt;Hello, world!&#123;this.state.counter&#125;&lt;&#x2F;h1&gt;\n      &lt;&#x2F;div&gt;\n    )\n  &#125;\n&#125;\nå¤åˆ¶ä»£ç \n\nï¼ˆ3ï¼‰renderrenderæ˜¯React ä¸­æœ€æ ¸å¿ƒçš„æ–¹æ³•ï¼Œä¸€ä¸ªç»„ä»¶ä¸­å¿…é¡»è¦æœ‰è¿™ä¸ªæ–¹æ³•ï¼Œå®ƒä¼šæ ¹æ®çŠ¶æ€ state å’Œå±æ€§ props æ¸²æŸ“ç»„ä»¶ã€‚è¿™ä¸ªå‡½æ•°åªåšä¸€ä»¶äº‹ï¼Œå°±æ˜¯è¿”å›éœ€è¦æ¸²æŸ“çš„å†…å®¹ï¼Œæ‰€ä»¥ä¸è¦åœ¨è¿™ä¸ªå‡½æ•°å†…åšå…¶ä»–ä¸šåŠ¡é€»è¾‘ï¼Œé€šå¸¸è°ƒç”¨è¯¥æ–¹æ³•ä¼šè¿”å›ä»¥ä¸‹ç±»å‹ä¸­ä¸€ä¸ªï¼š\n\nReact å…ƒç´ ï¼šè¿™é‡ŒåŒ…æ‹¬åŸç”Ÿçš„ DOM ä»¥åŠ React ç»„ä»¶ï¼›\næ•°ç»„å’Œ Fragmentï¼ˆç‰‡æ®µï¼‰ ï¼šå¯ä»¥è¿”å›å¤šä¸ªå…ƒç´ ï¼›\nPortalsï¼ˆæ’æ§½ï¼‰ ï¼šå¯ä»¥å°†å­å…ƒç´ æ¸²æŸ“åˆ°ä¸åŒçš„ DOM å­æ ‘ç§ï¼›\nå­—ç¬¦ä¸²å’Œæ•°å­—ï¼šè¢«æ¸²æŸ“æˆ DOM ä¸­çš„ text èŠ‚ç‚¹ï¼›\nå¸ƒå°”å€¼æˆ– nullï¼šä¸æ¸²æŸ“ä»»ä½•å†…å®¹ã€‚\n\nï¼ˆ4ï¼‰componentDidMount()componentDidMount()ä¼šåœ¨ç»„ä»¶æŒ‚è½½åï¼ˆæ’å…¥ DOM æ ‘ä¸­ï¼‰ç«‹å³è°ƒã€‚è¯¥é˜¶æ®µé€šå¸¸è¿›è¡Œä»¥ä¸‹æ“ä½œï¼š\n\næ‰§è¡Œä¾èµ–äºDOMçš„æ“ä½œï¼›\nå‘é€ç½‘ç»œè¯·æ±‚ï¼›ï¼ˆå®˜æ–¹å»ºè®®ï¼‰\næ·»åŠ è®¢é˜…æ¶ˆæ¯ï¼ˆä¼šåœ¨componentWillUnmountå–æ¶ˆè®¢é˜…ï¼‰ï¼›\n\nå¦‚æœåœ¨ componentDidMount ä¸­è°ƒç”¨ setState ï¼Œå°±ä¼šè§¦å‘ä¸€æ¬¡é¢å¤–çš„æ¸²æŸ“ï¼Œå¤šè°ƒç”¨äº†ä¸€æ¬¡ render å‡½æ•°ï¼Œç”±äºå®ƒæ˜¯åœ¨æµè§ˆå™¨åˆ·æ–°å±å¹•å‰æ‰§è¡Œçš„ï¼Œæ‰€ä»¥ç”¨æˆ·å¯¹æ­¤æ˜¯æ²¡æœ‰æ„ŸçŸ¥çš„ï¼Œä½†æ˜¯æˆ‘åº”å½“é¿å…è¿™æ ·ä½¿ç”¨ï¼Œè¿™æ ·ä¼šå¸¦æ¥ä¸€å®šçš„æ€§èƒ½é—®é¢˜ï¼Œå°½é‡æ˜¯åœ¨ constructor ä¸­åˆå§‹åŒ– state å¯¹è±¡ã€‚\nåœ¨ç»„ä»¶è£…è½½ä¹‹åï¼Œå°†è®¡æ•°æ•°å­—å˜ä¸º1ï¼š\nclass App extends React.Component  &#123;\n  constructor(props) &#123;\n    super(props)\n    this.state &#x3D; &#123;\n      counter: 0\n    &#125;\n  &#125;\n  componentDidMount () &#123;\n    this.setState(&#123;\n      counter: 1\n    &#125;)\n  &#125;\n  render ()  &#123;\n    return (\n      &lt;div className&#x3D;&quot;counter&quot;&gt;\n        counterå€¼: &#123; this.state.counter &#125;\n      &lt;&#x2F;div&gt;\n    )\n  &#125;\n&#125;\nå¤åˆ¶ä»£ç \n\n2ï¼‰ç»„ä»¶æ›´æ–°é˜¶æ®µå½“ç»„ä»¶çš„ props æ”¹å˜äº†ï¼Œæˆ–ç»„ä»¶å†…éƒ¨è°ƒç”¨äº† setState/forceUpdateï¼Œä¼šè§¦å‘æ›´æ–°é‡æ–°æ¸²æŸ“ï¼Œè¿™ä¸ªè¿‡ç¨‹å¯èƒ½ä¼šå‘ç”Ÿå¤šæ¬¡ã€‚è¿™ä¸ªé˜¶æ®µä¼šä¾æ¬¡è°ƒç”¨ä¸‹é¢è¿™äº›æ–¹æ³•ï¼š\n\ngetDerivedStateFromProps\nshouldComponentUpdate\nrender\ngetSnapshotBeforeUpdate\ncomponentDidUpdate\n\nï¼ˆ1ï¼‰shouldComponentUpdateshouldComponentUpdate(nextProps, nextState)\nå¤åˆ¶ä»£ç \n\nåœ¨è¯´è¿™ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¹‹å‰ï¼Œæ¥çœ‹ä¸¤ä¸ªé—®é¢˜ï¼š\n\nsetState å‡½æ•°åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½ä¼šå¯¼è‡´ç»„ä»¶é‡æ–°æ¸²æŸ“å—ï¼Ÿä¾‹å¦‚ä¸‹é¢è¿™ç§æƒ…å†µï¼š\n\nthis.setState(&#123;number: this.state.number&#125;)\nå¤åˆ¶ä»£ç \n\n\nå¦‚æœæ²¡æœ‰è°ƒç”¨ setStateï¼Œprops å€¼ä¹Ÿæ²¡æœ‰å˜åŒ–ï¼Œæ˜¯ä¸æ˜¯ç»„ä»¶å°±ä¸ä¼šé‡æ–°æ¸²æŸ“ï¼Ÿ\n\nç¬¬ä¸€ä¸ªé—®é¢˜ç­”æ¡ˆæ˜¯ ä¼š ï¼Œç¬¬äºŒä¸ªé—®é¢˜å¦‚æœæ˜¯çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼Œä¸ç®¡ä¼ å…¥çš„ props æœ‰æ²¡æœ‰å˜åŒ–ï¼Œéƒ½ä¼šå¼•èµ·å­ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚\né‚£ä¹ˆæœ‰æ²¡æœ‰ä»€ä¹ˆæ–¹æ³•è§£å†³åœ¨è¿™ä¸¤ä¸ªåœºæ™¯ä¸‹ä¸è®©ç»„ä»¶é‡æ–°æ¸²æŸ“è¿›è€Œæå‡æ€§èƒ½å‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™ shouldComponentUpdate ç™»åœºäº†ï¼Œè¿™ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°æ˜¯ç”¨æ¥æå‡é€Ÿåº¦çš„ï¼Œå®ƒæ˜¯åœ¨é‡æ–°æ¸²æŸ“ç»„ä»¶å¼€å§‹å‰è§¦å‘çš„ï¼Œé»˜è®¤è¿”å› trueï¼Œå¯ä»¥æ¯”è¾ƒ this.props å’Œ nextProps ï¼Œthis.state å’Œ nextState å€¼æ˜¯å¦å˜åŒ–ï¼Œæ¥ç¡®è®¤è¿”å› true æˆ–è€… falseã€‚å½“è¿”å› false æ—¶ï¼Œç»„ä»¶çš„æ›´æ–°è¿‡ç¨‹åœæ­¢ï¼Œåç»­çš„ renderã€componentDidUpdate ä¹Ÿä¸ä¼šè¢«è°ƒç”¨ã€‚\næ³¨æ„ï¼š æ·»åŠ  shouldComponentUpdate æ–¹æ³•æ—¶ï¼Œä¸å»ºè®®ä½¿ç”¨æ·±åº¦ç›¸ç­‰æ£€æŸ¥ï¼ˆå¦‚ä½¿ç”¨ JSON.stringify()ï¼‰ï¼Œå› ä¸ºæ·±æ¯”è¾ƒæ•ˆç‡å¾ˆä½ï¼Œå¯èƒ½ä¼šæ¯”é‡æ–°æ¸²æŸ“ç»„ä»¶æ•ˆç‡è¿˜ä½ã€‚è€Œä¸”è¯¥æ–¹æ³•ç»´æŠ¤æ¯”è¾ƒå›°éš¾ï¼Œå»ºè®®ä½¿ç”¨è¯¥æ–¹æ³•ä¼šäº§ç”Ÿæ˜æ˜¾çš„æ€§èƒ½æå‡æ—¶ä½¿ç”¨ã€‚\nï¼ˆ2ï¼‰getSnapshotBeforeUpdategetSnapshotBeforeUpdate(prevProps, prevState)\nå¤åˆ¶ä»£ç \n\nè¿™ä¸ªæ–¹æ³•åœ¨ render ä¹‹åï¼ŒcomponentDidUpdate ä¹‹å‰è°ƒç”¨ï¼Œæœ‰ä¸¤ä¸ªå‚æ•° prevProps å’Œ prevStateï¼Œè¡¨ç¤ºæ›´æ–°ä¹‹å‰çš„ props å’Œ stateï¼Œè¿™ä¸ªå‡½æ•°å¿…é¡»è¦å’Œ componentDidUpdate ä¸€èµ·ä½¿ç”¨ï¼Œå¹¶ä¸”è¦æœ‰ä¸€ä¸ªè¿”å›å€¼ï¼Œé»˜è®¤æ˜¯ nullï¼Œè¿™ä¸ªè¿”å›å€¼ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ä¼ ç»™ componentDidUpdateã€‚\nï¼ˆ3ï¼‰componentDidUpdatecomponentDidUpdate() ä¼šåœ¨æ›´æ–°åä¼šè¢«ç«‹å³è°ƒç”¨ï¼Œé¦–æ¬¡æ¸²æŸ“ä¸ä¼šæ‰§è¡Œæ­¤æ–¹æ³•ã€‚ è¯¥é˜¶æ®µé€šå¸¸è¿›è¡Œä»¥ä¸‹æ“ä½œï¼š\n\nå½“ç»„ä»¶æ›´æ–°åï¼Œå¯¹ DOM è¿›è¡Œæ“ä½œï¼›\nå¦‚æœä½ å¯¹æ›´æ–°å‰åçš„ props è¿›è¡Œäº†æ¯”è¾ƒï¼Œä¹Ÿå¯ä»¥é€‰æ‹©åœ¨æ­¤å¤„è¿›è¡Œç½‘ç»œè¯·æ±‚ï¼›ï¼ˆä¾‹å¦‚ï¼Œå½“ props æœªå‘ç”Ÿå˜åŒ–æ—¶ï¼Œåˆ™ä¸ä¼šæ‰§è¡Œç½‘ç»œè¯·æ±‚ï¼‰ã€‚\n\ncomponentDidUpdate(prevProps, prevState, snapshot)&#123;&#125;\nå¤åˆ¶ä»£ç \n\nè¯¥æ–¹æ³•æœ‰ä¸‰ä¸ªå‚æ•°ï¼š\n\nprevProps: æ›´æ–°å‰çš„props\nprevState: æ›´æ–°å‰çš„state\nsnapshot: getSnapshotBeforeUpdate()ç”Ÿå‘½å‘¨æœŸçš„è¿”å›å€¼\n\n3ï¼‰ç»„ä»¶å¸è½½é˜¶æ®µå¸è½½é˜¶æ®µåªæœ‰ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼ŒcomponentWillUnmount() ä¼šåœ¨ç»„ä»¶å¸è½½åŠé”€æ¯ä¹‹å‰ç›´æ¥è°ƒç”¨ã€‚åœ¨æ­¤æ–¹æ³•ä¸­æ‰§è¡Œå¿…è¦çš„æ¸…ç†æ“ä½œï¼š\n\næ¸…é™¤ timerï¼Œå–æ¶ˆç½‘ç»œè¯·æ±‚æˆ–æ¸…é™¤\nå–æ¶ˆåœ¨ componentDidMount() ä¸­åˆ›å»ºçš„è®¢é˜…ç­‰ï¼›\n\nè¿™ä¸ªç”Ÿå‘½å‘¨æœŸåœ¨ä¸€ä¸ªç»„ä»¶è¢«å¸è½½å’Œé”€æ¯ä¹‹å‰è¢«è°ƒç”¨ï¼Œå› æ­¤ä½ ä¸åº”è¯¥å†è¿™ä¸ªæ–¹æ³•ä¸­ä½¿ç”¨ setStateï¼Œå› ä¸ºç»„ä»¶ä¸€æ—¦è¢«å¸è½½ï¼Œå°±ä¸ä¼šå†è£…è½½ï¼Œä¹Ÿå°±ä¸ä¼šé‡æ–°æ¸²æŸ“ã€‚\n4ï¼‰é”™è¯¯å¤„ç†é˜¶æ®µcomponentDidCatch(error, info)ï¼Œæ­¤ç”Ÿå‘½å‘¨æœŸåœ¨åä»£ç»„ä»¶æŠ›å‡ºé”™è¯¯åè¢«è°ƒç”¨ã€‚ å®ƒæ¥æ”¶ä¸¤ä¸ªå‚æ•°âˆ¶\n\nerrorï¼šæŠ›å‡ºçš„é”™è¯¯ã€‚\ninfoï¼šå¸¦æœ‰ componentStack key çš„å¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«æœ‰å…³ç»„ä»¶å¼•å‘é”™è¯¯çš„æ ˆä¿¡æ¯\n\nReactå¸¸è§çš„ç”Ÿå‘½å‘¨æœŸå¦‚ä¸‹ï¼š  Reactå¸¸è§ç”Ÿå‘½å‘¨æœŸçš„è¿‡ç¨‹å¤§è‡´å¦‚ä¸‹ï¼š\n\næŒ‚è½½é˜¶æ®µï¼Œé¦–å…ˆæ‰§è¡Œconstructoræ„é€ æ–¹æ³•ï¼Œæ¥åˆ›å»ºç»„ä»¶\nåˆ›å»ºå®Œæˆä¹‹åï¼Œå°±ä¼šæ‰§è¡Œrenderæ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šè¿”å›éœ€è¦æ¸²æŸ“çš„å†…å®¹\néšåï¼ŒReactä¼šå°†éœ€è¦æ¸²æŸ“çš„å†…å®¹æŒ‚è½½åˆ°DOMæ ‘ä¸Š\næŒ‚è½½å®Œæˆä¹‹åå°±ä¼šæ‰§è¡ŒcomponentDidMountç”Ÿå‘½å‘¨æœŸå‡½æ•°\nå¦‚æœæˆ‘ä»¬ç»™ç»„ä»¶åˆ›å»ºä¸€ä¸ªpropsï¼ˆç”¨äºç»„ä»¶é€šä¿¡ï¼‰ã€è°ƒç”¨setStateï¼ˆæ›´æ”¹stateä¸­çš„æ•°æ®ï¼‰ã€è°ƒç”¨forceUpdateï¼ˆå¼ºåˆ¶æ›´æ–°ç»„ä»¶ï¼‰æ—¶ï¼Œéƒ½ä¼šé‡æ–°è°ƒç”¨renderå‡½æ•°\nrenderå‡½æ•°é‡æ–°æ‰§è¡Œä¹‹åï¼Œå°±ä¼šé‡æ–°è¿›è¡ŒDOMæ ‘çš„æŒ‚è½½\næŒ‚è½½å®Œæˆä¹‹åå°±ä¼šæ‰§è¡ŒcomponentDidUpdateç”Ÿå‘½å‘¨æœŸå‡½æ•°\nå½“ç§»é™¤ç»„ä»¶æ—¶ï¼Œå°±ä¼šæ‰§è¡ŒcomponentWillUnmountç”Ÿå‘½å‘¨æœŸå‡½æ•°\n\nReactä¸»è¦ç”Ÿå‘½å‘¨æœŸæ€»ç»“ï¼š\n\ngetDefaultPropsï¼šè¿™ä¸ªå‡½æ•°ä¼šåœ¨ç»„ä»¶åˆ›å»ºä¹‹å‰è¢«è°ƒç”¨ä¸€æ¬¡ï¼ˆæœ‰ä¸”ä»…æœ‰ä¸€æ¬¡ï¼‰ï¼Œå®ƒè¢«ç”¨æ¥åˆå§‹åŒ–ç»„ä»¶çš„ Propsï¼›\ngetInitialStateï¼šç”¨äºåˆå§‹åŒ–ç»„ä»¶çš„ state å€¼ï¼›\ncomponentWillMountï¼šåœ¨ç»„ä»¶åˆ›å»ºåã€render ä¹‹å‰ï¼Œä¼šèµ°åˆ° componentWillMount é˜¶æ®µã€‚è¿™ä¸ªé˜¶æ®µæˆ‘ä¸ªäººä¸€ç›´æ²¡ç”¨è¿‡ã€éå¸¸é¸¡è‚‹ã€‚åæ¥React å®˜æ–¹å·²ç»ä¸æ¨èå¤§å®¶åœ¨ componentWillMount é‡Œåšä»»ä½•äº‹æƒ…ã€åˆ°ç°åœ¨ React16 ç›´æ¥åºŸå¼ƒäº†è¿™ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œè¶³è§å…¶é¸¡è‚‹ç¨‹åº¦äº†ï¼›\nrenderï¼šè¿™æ˜¯æ‰€æœ‰ç”Ÿå‘½å‘¨æœŸä¸­å”¯ä¸€ä¸€ä¸ªä½ å¿…é¡»è¦å®ç°çš„æ–¹æ³•ã€‚ä¸€èˆ¬æ¥è¯´éœ€è¦è¿”å›ä¸€ä¸ª jsx å…ƒç´ ï¼Œè¿™æ—¶ React ä¼šæ ¹æ® props å’Œ state æ¥æŠŠç»„ä»¶æ¸²æŸ“åˆ°ç•Œé¢ä¸Šï¼›ä¸è¿‡æœ‰æ—¶ï¼Œä½ å¯èƒ½ä¸æƒ³æ¸²æŸ“ä»»ä½•ä¸œè¥¿ï¼Œè¿™ç§æƒ…å†µä¸‹è®©å®ƒè¿”å› null æˆ–è€… false å³å¯ï¼›\ncomponentDidMountï¼šä¼šåœ¨ç»„ä»¶æŒ‚è½½åï¼ˆæ’å…¥ DOM æ ‘ä¸­åï¼‰ç«‹å³è°ƒç”¨ï¼Œæ ‡å¿—ç€ç»„ä»¶æŒ‚è½½å®Œæˆã€‚ä¸€äº›æ“ä½œå¦‚æœä¾èµ–è·å–åˆ° DOM èŠ‚ç‚¹ä¿¡æ¯ï¼Œæˆ‘ä»¬å°±ä¼šæ”¾åœ¨è¿™ä¸ªé˜¶æ®µæ¥åšã€‚æ­¤å¤–ï¼Œè¿™è¿˜æ˜¯ React å®˜æ–¹æ¨èçš„å‘èµ· ajax è¯·æ±‚çš„æ—¶æœºã€‚è¯¥æ–¹æ³•å’Œ componentWillMount ä¸€æ ·ï¼Œæœ‰ä¸”ä»…æœ‰ä¸€æ¬¡è°ƒç”¨ã€‚\n\n2. React åºŸå¼ƒäº†å“ªäº›ç”Ÿå‘½å‘¨æœŸï¼Ÿä¸ºä»€ä¹ˆï¼Ÿè¢«åºŸå¼ƒçš„ä¸‰ä¸ªå‡½æ•°éƒ½æ˜¯åœ¨renderä¹‹å‰ï¼Œå› ä¸ºfberçš„å‡ºç°ï¼Œå¾ˆå¯èƒ½å› ä¸ºé«˜ä¼˜å…ˆçº§ä»»åŠ¡çš„å‡ºç°è€Œæ‰“æ–­ç°æœ‰ä»»åŠ¡å¯¼è‡´å®ƒä»¬ä¼šè¢«æ‰§è¡Œå¤šæ¬¡ã€‚å¦å¤–çš„ä¸€ä¸ªåŸå› åˆ™æ˜¯ï¼ŒReactæƒ³çº¦æŸä½¿ç”¨è€…ï¼Œå¥½çš„æ¡†æ¶èƒ½å¤Ÿè®©äººä¸å¾—å·²å†™å‡ºå®¹æ˜“ç»´æŠ¤å’Œæ‰©å±•çš„ä»£ç ï¼Œè¿™ä¸€ç‚¹åˆæ˜¯ä»ä½•è°ˆèµ·ï¼Œå¯ä»¥ä»æ–°å¢åŠ ä»¥åŠå³å°†åºŸå¼ƒçš„ç”Ÿå‘½å‘¨æœŸåˆ†æå…¥æ‰‹\n1) componentWillMount\né¦–å…ˆè¿™ä¸ªå‡½æ•°çš„åŠŸèƒ½å®Œå…¨å¯ä»¥ä½¿ç”¨componentDidMountå’Œ constructoræ¥ä»£æ›¿ï¼Œå¼‚æ­¥è·å–çš„æ•°æ®çš„æƒ…å†µä¸Šé¢å·²ç»è¯´æ˜äº†ï¼Œè€Œå¦‚æœæŠ›å»å¼‚æ­¥è·å–æ•°æ®ï¼Œå…¶ä½™çš„å³æ˜¯åˆå§‹åŒ–è€Œå·²ï¼Œè¿™äº›åŠŸèƒ½éƒ½å¯ä»¥åœ¨constructorä¸­æ‰§è¡Œï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œå¦‚æœåœ¨ willMount ä¸­è®¢é˜…äº‹ä»¶ï¼Œä½†åœ¨æœåŠ¡ç«¯è¿™å¹¶ä¸ä¼šæ‰§è¡Œ willUnMountäº‹ä»¶ï¼Œä¹Ÿå°±æ˜¯è¯´æœåŠ¡ç«¯ä¼šå¯¼è‡´å†…å­˜æ³„æ¼æ‰€ä»¥componentWilIMountå®Œå…¨å¯ä»¥ä¸ä½¿ç”¨ï¼Œä½†ä½¿ç”¨è€…æœ‰æ—¶å€™éš¾å…å› ä¸ºå„ ç§å„æ ·çš„æƒ…å†µåœ¨ componentWilMountä¸­åšä¸€äº›æ“ä½œï¼Œé‚£ä¹ˆReactä¸ºäº†çº¦æŸå¼€å‘è€…ï¼Œå¹²è„†å°±æŠ›æ‰äº†è¿™ä¸ªAPI\n2) componentWillReceiveProps\nåœ¨è€ç‰ˆæœ¬çš„ React ä¸­ï¼Œå¦‚æœç»„ä»¶è‡ªèº«çš„æŸä¸ª state è·Ÿå…¶ props å¯†åˆ‡ç›¸å…³çš„è¯ï¼Œä¸€ç›´éƒ½æ²¡æœ‰ä¸€ç§å¾ˆä¼˜é›…çš„å¤„ç†æ–¹å¼å»æ›´æ–° stateï¼Œè€Œæ˜¯éœ€è¦åœ¨ componentWilReceiveProps ä¸­åˆ¤æ–­å‰åä¸¤ä¸ª props æ˜¯å¦ç›¸åŒï¼Œå¦‚æœä¸åŒå†å°†æ–°çš„ propsæ›´æ–°åˆ°ç›¸åº”çš„ state ä¸Šå»ã€‚è¿™æ ·åšä¸€æ¥ä¼šç ´å state æ•°æ®çš„å•ä¸€æ•°æ®æºï¼Œå¯¼è‡´ç»„ä»¶çŠ¶æ€å˜å¾—ä¸å¯é¢„æµ‹ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿä¼šå¢åŠ ç»„ä»¶çš„é‡ç»˜æ¬¡æ•°ã€‚ç±»ä¼¼çš„ä¸šåŠ¡éœ€æ±‚ä¹Ÿæœ‰å¾ˆå¤šï¼Œå¦‚ä¸€ä¸ªå¯ä»¥æ¨ªå‘æ»‘åŠ¨çš„åˆ—è¡¨ï¼Œå½“å‰é«˜äº®çš„ Tab æ˜¾ç„¶éš¶å±äºåˆ—è¡¨è‡ªèº«çš„æ—¶ï¼Œæ ¹æ®ä¼ å…¥çš„æŸä¸ªå€¼ï¼Œç›´æ¥å®šä½åˆ°æŸä¸ª Tabã€‚ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼ŒReactå¼•å…¥äº†ç¬¬ä¸€ä¸ªæ–°çš„ç”Ÿå‘½å‘¨æœŸï¼šgetDerivedStateFromPropsã€‚å®ƒæœ‰ä»¥ä¸‹çš„ä¼˜ç‚¹âˆ¶\n\ngetDSFPæ˜¯é™æ€æ–¹æ³•ï¼Œåœ¨è¿™é‡Œä¸èƒ½ä½¿ç”¨thisï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œå¼€å‘è€…ä¸èƒ½å†™å‡ºå‰¯ä½œç”¨çš„ä»£ç \nå¼€å‘è€…åªèƒ½é€šè¿‡prevStateè€Œä¸æ˜¯prevPropsæ¥åšå¯¹æ¯”ï¼Œä¿è¯äº†stateå’Œpropsä¹‹é—´çš„ç®€å•å…³ç³»ä»¥åŠä¸éœ€è¦å¤„ç†ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶prevPropsä¸ºç©ºçš„æƒ…å†µ\nåŸºäºç¬¬ä¸€ç‚¹ï¼Œå°†çŠ¶æ€å˜åŒ–ï¼ˆsetStateï¼‰å’Œæ˜‚è´µæ“ä½œï¼ˆtabChangeï¼‰åŒºåˆ†å¼€ï¼Œæ›´åŠ ä¾¿äº render å’Œ commit é˜¶æ®µæ“ä½œæˆ–è€…è¯´ä¼˜åŒ–ã€‚\n\n3) componentWillUpdate\nä¸ componentWillReceiveProps ç±»ä¼¼ï¼Œè®¸å¤šå¼€å‘è€…ä¹Ÿä¼šåœ¨ componentWillUpdate ä¸­æ ¹æ® props çš„å˜åŒ–å»è§¦å‘ä¸€äº›å›è°ƒ ã€‚ ä½†ä¸è®ºæ˜¯ componentWilReceiveProps è¿˜ æ˜¯ componentWilUpdateï¼Œéƒ½æœ‰å¯èƒ½åœ¨ä¸€æ¬¡æ›´æ–°ä¸­è¢«è°ƒç”¨å¤šæ¬¡ï¼Œä¹Ÿå°±æ˜¯è¯´å†™åœ¨è¿™é‡Œçš„å›è°ƒå‡½æ•°ä¹Ÿæœ‰å¯èƒ½ä¼šè¢«è°ƒç”¨å¤šæ¬¡ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸å¯å–çš„ã€‚ä¸ componentDidMount ç±» ä¼¼ï¼Œ componentDidUpdate ä¹Ÿä¸å­˜åœ¨è¿™æ ·çš„é—®é¢˜ï¼Œä¸€æ¬¡æ›´æ–°ä¸­ componentDidUpdate åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ï¼Œæ‰€ä»¥å°†åŸå…ˆå†™åœ¨ componentWillUpdate ä¸­ çš„ å› è°ƒ è¿ ç§» è‡³ componentDidUpdate å°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\nå¦å¤–ä¸€ç§æƒ…å†µåˆ™æ˜¯éœ€è¦è·å–DOMå…ƒç´ çŠ¶æ€ï¼Œä½†æ˜¯ç”±äºåœ¨fberä¸­ï¼Œrenderå¯æ‰“æ–­ï¼Œå¯èƒ½åœ¨wilMountä¸­è·å–åˆ°çš„å…ƒç´ çŠ¶æ€å¾ˆå¯èƒ½ä¸å®é™…éœ€è¦çš„ä¸åŒï¼Œè¿™ä¸ªé€šå¸¸å¯ä»¥ä½¿ç”¨ç¬¬äºŒä¸ªæ–°å¢çš„ç”Ÿå‘½å‡½æ•°çš„è§£å†³ getSnapshotBeforeUpdate(prevProps, prevState)\n4) getSnapshotBeforeUpdate(prevProps, prevState)\nè¿”å›çš„å€¼ä½œä¸ºcomponentDidUpdateçš„ç¬¬ä¸‰ä¸ªå‚æ•°ã€‚ä¸willMountä¸åŒçš„æ˜¯ï¼ŒgetSnapshotBeforeUpdateä¼šåœ¨æœ€ç»ˆç¡®å®šçš„renderæ‰§è¡Œä¹‹å‰æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯èƒ½ä¿è¯å…¶è·å–åˆ°çš„å…ƒç´ çŠ¶æ€ä¸didUpdateä¸­è·å–åˆ°çš„å…ƒç´ çŠ¶æ€ç›¸åŒã€‚å®˜æ–¹å‚è€ƒä»£ç ï¼š\nclass ScrollingList extends React.Component &#123;\n  constructor(props) &#123;\n    super(props);\n    this.listRef &#x3D; React.createRef();\n  &#125;\n\n  getSnapshotBeforeUpdate(prevProps, prevState) &#123;\n    &#x2F;&#x2F; æˆ‘ä»¬æ˜¯å¦åœ¨ list ä¸­æ·»åŠ æ–°çš„ items ï¼Ÿ\n    &#x2F;&#x2F; æ•è·æ»šåŠ¨â€‹â€‹ä½ç½®ä»¥ä¾¿æˆ‘ä»¬ç¨åè°ƒæ•´æ»šåŠ¨ä½ç½®ã€‚\n    if (prevProps.list.length &lt; this.props.list.length) &#123;\n      const list &#x3D; this.listRef.current;\n      return list.scrollHeight - list.scrollTop;\n    &#125;\n    return null;\n  &#125;\n\n  componentDidUpdate(prevProps, prevState, snapshot) &#123;\n    &#x2F;&#x2F; å¦‚æœæˆ‘ä»¬ snapshot æœ‰å€¼ï¼Œè¯´æ˜æˆ‘ä»¬åˆšåˆšæ·»åŠ äº†æ–°çš„ itemsï¼Œ\n    &#x2F;&#x2F; è°ƒæ•´æ»šåŠ¨ä½ç½®ä½¿å¾—è¿™äº›æ–° items ä¸ä¼šå°†æ—§çš„ items æ¨å‡ºè§†å›¾ã€‚\n    &#x2F;&#x2F;ï¼ˆè¿™é‡Œçš„ snapshot æ˜¯ getSnapshotBeforeUpdate çš„è¿”å›å€¼ï¼‰\n    if (snapshot !&#x3D;&#x3D; null) &#123;\n      const list &#x3D; this.listRef.current;\n      list.scrollTop &#x3D; list.scrollHeight - snapshot;\n    &#125;\n  &#125;\n\n  render() &#123;\n    return (\n      &lt;div ref&#x3D;&#123;this.listRef&#125;&gt;&#123;&#x2F;* ...contents... *&#x2F;&#125;&lt;&#x2F;div&gt;\n    );\n  &#125;\n&#125;\nå¤åˆ¶ä»£ç \n\n3. React 16.X ä¸­ props æ”¹å˜ååœ¨å“ªä¸ªç”Ÿå‘½å‘¨æœŸä¸­å¤„ç†åœ¨getDerivedStateFromPropsä¸­è¿›è¡Œå¤„ç†ã€‚\nè¿™ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°æ˜¯ä¸ºäº†æ›¿ä»£componentWillReceivePropså­˜åœ¨çš„ï¼Œæ‰€ä»¥åœ¨éœ€è¦ä½¿ç”¨componentWillReceivePropsæ—¶ï¼Œå°±å¯ä»¥è€ƒè™‘ä½¿ç”¨getDerivedStateFromPropsæ¥è¿›è¡Œæ›¿ä»£ã€‚\nä¸¤è€…çš„å‚æ•°æ˜¯ä¸ç›¸åŒçš„ï¼Œè€ŒgetDerivedStateFromPropsæ˜¯ä¸€ä¸ªé™æ€å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªå‡½æ•°ä¸èƒ½é€šè¿‡thisè®¿é—®åˆ°classçš„å±æ€§ï¼Œä¹Ÿå¹¶ä¸æ¨èç›´æ¥è®¿é—®å±æ€§ã€‚è€Œæ˜¯åº”è¯¥é€šè¿‡å‚æ•°æä¾›çš„nextPropsä»¥åŠprevStateæ¥è¿›è¡Œåˆ¤æ–­ï¼Œæ ¹æ®æ–°ä¼ å…¥çš„propsæ¥æ˜ å°„åˆ°stateã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœpropsä¼ å…¥çš„å†…å®¹ä¸éœ€è¦å½±å“åˆ°ä½ çš„stateï¼Œé‚£ä¹ˆå°±éœ€è¦è¿”å›ä¸€ä¸ªnullï¼Œè¿™ä¸ªè¿”å›å€¼æ˜¯å¿…é¡»çš„ï¼Œæ‰€ä»¥å°½é‡å°†å…¶å†™åˆ°å‡½æ•°çš„æœ«å°¾ï¼š\nstatic getDerivedStateFromProps(nextProps, prevState) &#123;\n    const &#123;type&#125; &#x3D; nextProps;\n    &#x2F;&#x2F; å½“ä¼ å…¥çš„typeå‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œæ›´æ–°state\n    if (type !&#x3D;&#x3D; prevState.type) &#123;\n        return &#123;\n            type,\n        &#125;;\n    &#125;\n    &#x2F;&#x2F; å¦åˆ™ï¼Œå¯¹äºstateä¸è¿›è¡Œä»»ä½•æ“ä½œ\n    return null;\n&#125;\nå¤åˆ¶ä»£ç \n\n4. React æ€§èƒ½ä¼˜åŒ–åœ¨å“ªä¸ªç”Ÿå‘½å‘¨æœŸï¼Ÿå®ƒä¼˜åŒ–çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿreactçš„çˆ¶çº§ç»„ä»¶çš„renderå‡½æ•°é‡æ–°æ¸²æŸ“ä¼šå¼•èµ·å­ç»„ä»¶çš„renderæ–¹æ³•çš„é‡æ–°æ¸²æŸ“ã€‚ä½†æ˜¯ï¼Œæœ‰çš„æ—¶å€™å­ç»„ä»¶çš„æ¥å—çˆ¶ç»„ä»¶çš„æ•°æ®æ²¡æœ‰å˜åŠ¨ã€‚å­ç»„ä»¶renderçš„æ‰§è¡Œä¼šå½±å“æ€§èƒ½ï¼Œè¿™æ—¶å°±å¯ä»¥ä½¿ç”¨shouldComponentUpdateæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\nä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š\nshouldComponentUpdate(nexrProps) &#123;\n    if (this.props.num &#x3D;&#x3D;&#x3D; nexrProps.num) &#123;\n        return false\n    &#125;\n    return true;\n&#125;\nå¤åˆ¶ä»£ç \n\nshouldComponentUpdateæä¾›äº†ä¸¤ä¸ªå‚æ•°nextPropså’ŒnextStateï¼Œè¡¨ç¤ºä¸‹ä¸€æ¬¡propså’Œä¸€æ¬¡stateçš„å€¼ï¼Œå½“å‡½æ•°è¿”å›falseæ—¶å€™ï¼Œrender()æ–¹æ³•ä¸æ‰§è¡Œï¼Œç»„ä»¶ä¹Ÿå°±ä¸ä¼šæ¸²æŸ“ï¼Œè¿”å›trueæ—¶ï¼Œç»„ä»¶ç…§å¸¸é‡æ¸²æŸ“ã€‚æ­¤æ–¹æ³•å°±æ˜¯æ‹¿å½“å‰propsä¸­å€¼å’Œä¸‹ä¸€æ¬¡propsä¸­çš„å€¼è¿›è¡Œå¯¹æ¯”ï¼Œæ•°æ®ç›¸ç­‰æ—¶ï¼Œè¿”å›falseï¼Œåä¹‹è¿”å›trueã€‚\néœ€è¦æ³¨æ„ï¼Œåœ¨è¿›è¡Œæ–°æ—§å¯¹æ¯”çš„æ—¶å€™ï¼Œæ˜¯æµ…å¯¹æ¯”ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœæ¯”è¾ƒçš„æ•°æ®æ—¶å¼•ç”¨æ•°æ®ç±»å‹ï¼Œåªè¦æ•°æ®çš„å¼•ç”¨çš„åœ°å€æ²¡å˜ï¼Œå³ä½¿å†…å®¹å˜äº†ï¼Œä¹Ÿä¼šè¢«åˆ¤å®šä¸ºtrueã€‚\né¢å¯¹è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•è¿›è¡Œè§£å†³ï¼š ï¼ˆ1ï¼‰ä½¿ç”¨setStateæ”¹å˜æ•°æ®ä¹‹å‰ï¼Œå…ˆé‡‡ç”¨ES6ä¸­assginè¿›è¡Œæ‹·è´ï¼Œä½†æ˜¯assginåªæ·±æ‹·è´çš„æ•°æ®çš„ç¬¬ä¸€å±‚ï¼Œæ‰€ä»¥è¯´ä¸æ˜¯æœ€å®Œç¾çš„è§£å†³åŠæ³•ï¼š\nconst o2 &#x3D; Object.assign(&#123;&#125;,this.state.obj)\n    o2.student.count &#x3D; &#39;00000&#39;;\n    this.setState(&#123;\n        obj: o2,\n    &#125;)\nå¤åˆ¶ä»£ç \n\nï¼ˆ2ï¼‰ä½¿ç”¨JSON.parse(JSON.stringfy())è¿›è¡Œæ·±æ‹·è´ï¼Œä½†æ˜¯é‡åˆ°æ•°æ®ä¸ºundefinedå’Œå‡½æ•°æ—¶å°±ä¼šé”™ã€‚\nconst o2 &#x3D; JSON.parse(JSON.stringify(this.state.obj))\n    o2.student.count &#x3D; &#39;00000&#39;;\n    this.setState(&#123;\n        obj: o2,\n    &#125;)\nå¤åˆ¶ä»£ç \n\n5. state å’Œ props è§¦å‘æ›´æ–°çš„ç”Ÿå‘½å‘¨æœŸåˆ†åˆ«æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿstate æ›´æ–°æµç¨‹ï¼š  è¿™ä¸ªè¿‡ç¨‹å½“ä¸­æ¶‰åŠçš„å‡½æ•°ï¼š\n\nshouldComponentUpdate: å½“ç»„ä»¶çš„ state æˆ– props å‘ç”Ÿæ”¹å˜æ—¶ï¼Œéƒ½ä¼šé¦–å…ˆè§¦å‘è¿™ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚å®ƒä¼šæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šnextProps, nextStateâ€”â€”å®ƒä»¬åˆ†åˆ«ä»£è¡¨ä¼ å…¥çš„æ–° props å’Œæ–°çš„ state å€¼ã€‚æ‹¿åˆ°è¿™ä¸¤ä¸ªå€¼ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ä¸€äº›å¯¹æ¯”é€»è¾‘æ¥å†³å®šæ˜¯å¦æœ‰ re-renderï¼ˆé‡æ¸²æŸ“ï¼‰çš„å¿…è¦äº†ã€‚å¦‚æœè¯¥å‡½æ•°çš„è¿”å›å€¼ä¸º falseï¼Œåˆ™ç”Ÿå‘½å‘¨æœŸç»ˆæ­¢ï¼Œåä¹‹ç»§ç»­ï¼›\n\n\n\n\n\n\n\n\n\n\næ³¨æ„ï¼šæ­¤æ–¹æ³•ä»…ä½œä¸ºæ€§èƒ½ä¼˜åŒ–çš„æ–¹å¼è€Œå­˜åœ¨ã€‚ä¸è¦ä¼å›¾ä¾é æ­¤æ–¹æ³•æ¥â€œé˜»æ­¢â€æ¸²æŸ“ï¼Œå› ä¸ºè¿™å¯èƒ½ä¼šäº§ç”Ÿ bugã€‚åº”è¯¥è€ƒè™‘ä½¿ç”¨å†…ç½®çš„ PureComponent ç»„ä»¶ï¼Œè€Œä¸æ˜¯æ‰‹åŠ¨ç¼–å†™ shouldComponentUpdate()\n\ncomponentWillUpdateï¼šå½“ç»„ä»¶çš„ state æˆ– props å‘ç”Ÿæ”¹å˜æ—¶ï¼Œä¼šåœ¨æ¸²æŸ“ä¹‹å‰è°ƒç”¨ componentWillUpdateã€‚componentWillUpdate æ˜¯ React16 åºŸå¼ƒçš„ä¸‰ä¸ªç”Ÿå‘½å‘¨æœŸä¹‹ä¸€ã€‚è¿‡å»ï¼Œæˆ‘ä»¬å¯èƒ½å¸Œæœ›èƒ½åœ¨è¿™ä¸ªé˜¶æ®µå»æ”¶é›†ä¸€äº›å¿…è¦çš„ä¿¡æ¯ï¼ˆæ¯”å¦‚æ›´æ–°å‰çš„ DOM ä¿¡æ¯ç­‰ç­‰ï¼‰ï¼Œç°åœ¨æˆ‘ä»¬å®Œå…¨å¯ä»¥åœ¨ React16 çš„ getSnapshotBeforeUpdate ä¸­å»åšè¿™äº›äº‹ï¼›\ncomponentDidUpdateï¼šcomponentDidUpdate() ä¼šåœ¨UIæ›´æ–°åä¼šè¢«ç«‹å³è°ƒç”¨ã€‚å®ƒæ¥æ”¶ prevPropsï¼ˆä¸Šä¸€æ¬¡çš„ props å€¼ï¼‰ä½œä¸ºå…¥å‚ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨æ­¤å¤„æˆ‘ä»¬ä»ç„¶å¯ä»¥è¿›è¡Œ props å€¼å¯¹æ¯”ï¼ˆå†æ¬¡è¯´æ˜ componentWillUpdate ç¡®å®é¸¡è‚‹å“ˆï¼‰ã€‚\n\nâ€‹\nprops æ›´æ–°æµç¨‹ï¼š  ç›¸å¯¹äº state æ›´æ–°ï¼Œprops æ›´æ–°åå”¯ä¸€çš„åŒºåˆ«æ˜¯å¢åŠ äº†å¯¹ componentWillReceiveProps çš„è°ƒç”¨ã€‚å…³äº componentWillReceivePropsï¼Œéœ€è¦çŸ¥é“è¿™äº›äº‹æƒ…ï¼š\n\ncomponentWillReceivePropsï¼šå®ƒåœ¨Componentæ¥å—åˆ°æ–°çš„ props æ—¶è¢«è§¦å‘ã€‚componentWillReceiveProps ä¼šæ¥æ”¶ä¸€ä¸ªåä¸º nextProps çš„å‚æ•°ï¼ˆå¯¹åº”æ–°çš„ props å€¼ï¼‰ã€‚è¯¥ç”Ÿå‘½å‘¨æœŸæ˜¯ React16 åºŸå¼ƒæ‰çš„ä¸‰ä¸ªç”Ÿå‘½å‘¨æœŸä¹‹ä¸€ã€‚åœ¨å®ƒè¢«åºŸå¼ƒå‰ï¼Œå¯ä»¥ç”¨å®ƒæ¥æ¯”è¾ƒ this.props å’Œ nextProps æ¥é‡æ–°setStateã€‚åœ¨ React16 ä¸­ï¼Œç”¨ä¸€ä¸ªç±»ä¼¼çš„æ–°ç”Ÿå‘½å‘¨æœŸ getDerivedStateFromProps æ¥ä»£æ›¿å®ƒã€‚\n\n6. Reactä¸­å‘èµ·ç½‘ç»œè¯·æ±‚åº”è¯¥åœ¨å“ªä¸ªç”Ÿå‘½å‘¨æœŸä¸­è¿›è¡Œï¼Ÿä¸ºä»€ä¹ˆï¼Ÿå¯¹äºå¼‚æ­¥è¯·æ±‚ï¼Œæœ€å¥½æ”¾åœ¨componentDidMountä¸­å»æ“ä½œï¼Œå¯¹äºåŒæ­¥çš„çŠ¶æ€æ”¹å˜ï¼Œå¯ä»¥æ”¾åœ¨componentWillMountä¸­ï¼Œä¸€èˆ¬ç”¨çš„æ¯”è¾ƒå°‘ã€‚\nå¦‚æœè®¤ä¸ºåœ¨componentWillMounté‡Œå‘èµ·è¯·æ±‚èƒ½ææ—©è·å¾—ç»“æœï¼Œè¿™ç§æƒ³æ³•å…¶å®æ˜¯é”™è¯¯çš„ï¼Œé€šå¸¸componentWillMountæ¯”componentDidMountæ—©ä¸äº†å¤šå°‘å¾®ç§’ï¼Œç½‘ç»œä¸Šä»»ä½•ä¸€ç‚¹å»¶è¿Ÿï¼Œè¿™ä¸€ç‚¹å·®å¼‚éƒ½å¯å¿½ç•¥ä¸è®¡ã€‚\nreactçš„ç”Ÿå‘½å‘¨æœŸï¼š constructor() -&gt; componentWillMount() -&gt; render() -&gt; componentDidMount()\nä¸Šé¢è¿™äº›æ–¹æ³•çš„è°ƒç”¨æ˜¯æœ‰æ¬¡åºçš„ï¼Œç”±ä¸Šè€Œä¸‹ä¾æ¬¡è°ƒç”¨ã€‚\n\nconstructorè¢«è°ƒç”¨æ˜¯åœ¨ç»„ä»¶å‡†å¤‡è¦æŒ‚è½½çš„æœ€å¼€å§‹ï¼Œæ­¤æ—¶ç»„ä»¶å°šæœªæŒ‚è½½åˆ°ç½‘é¡µä¸Šã€‚\ncomponentWillMountæ–¹æ³•çš„è°ƒç”¨åœ¨constructorä¹‹åï¼Œåœ¨renderä¹‹å‰ï¼Œåœ¨è¿™æ–¹æ³•é‡Œçš„ä»£ç è°ƒç”¨setStateæ–¹æ³•ä¸ä¼šè§¦å‘é‡æ–°renderï¼Œæ‰€ä»¥å®ƒä¸€èˆ¬ä¸ä¼šç”¨æ¥ä½œåŠ è½½æ•°æ®ä¹‹ç”¨ã€‚\ncomponentDidMountæ–¹æ³•ä¸­çš„ä»£ç ï¼Œæ˜¯åœ¨ç»„ä»¶å·²ç»å®Œå…¨æŒ‚è½½åˆ°ç½‘é¡µä¸Šæ‰ä¼šè°ƒç”¨è¢«æ‰§è¡Œï¼Œæ‰€ä»¥å¯ä»¥ä¿è¯æ•°æ®çš„åŠ è½½ã€‚æ­¤å¤–ï¼Œåœ¨è¿™æ–¹æ³•ä¸­è°ƒç”¨setStateæ–¹æ³•ï¼Œä¼šè§¦å‘é‡æ–°æ¸²æŸ“ã€‚æ‰€ä»¥ï¼Œå®˜æ–¹è®¾è®¡è¿™ä¸ªæ–¹æ³•å°±æ˜¯ç”¨æ¥åŠ è½½å¤–éƒ¨æ•°æ®ç”¨çš„ï¼Œæˆ–å¤„ç†å…¶ä»–çš„å‰¯ä½œç”¨ä»£ç ã€‚ä¸ç»„ä»¶ä¸Šçš„æ•°æ®æ— å…³çš„åŠ è½½ï¼Œä¹Ÿå¯ä»¥åœ¨constructoré‡Œåšï¼Œä½†constructoræ˜¯åšç»„ä»¶stateåˆç»åŒ–å·¥ä½œï¼Œå¹¶ä¸æ˜¯åšåŠ è½½æ•°æ®è¿™å·¥ä½œçš„ï¼Œconstructoré‡Œä¹Ÿä¸èƒ½setStateï¼Œè¿˜æœ‰åŠ è½½çš„æ—¶é—´å¤ªé•¿æˆ–è€…å‡ºé”™ï¼Œé¡µé¢å°±æ— æ³•åŠ è½½å‡ºæ¥ã€‚æ‰€ä»¥æœ‰å‰¯ä½œç”¨çš„ä»£ç éƒ½ä¼šé›†ä¸­åœ¨componentDidMountæ–¹æ³•é‡Œã€‚\n\næ€»ç»“ï¼š\n\nè·ŸæœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼ˆåŒæ„ï¼‰æœ‰å…³ç³»ï¼Œå¦‚æœåœ¨componentWillMounté‡Œé¢è·å–æ•°æ®ï¼Œfetch dataä¼šæ‰§è¡Œä¸¤æ¬¡ï¼Œä¸€æ¬¡åœ¨æœåŠ¡å™¨ç«¯ä¸€æ¬¡åœ¨å®¢æˆ·ç«¯ã€‚åœ¨componentDidMountä¸­å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒcomponentWillMountåŒæ ·ä¹Ÿä¼šrenderä¸¤æ¬¡ã€‚\nåœ¨componentWillMountä¸­fetch dataï¼Œæ•°æ®ä¸€å®šåœ¨renderåæ‰èƒ½åˆ°è¾¾ï¼Œå¦‚æœå¿˜è®°äº†è®¾ç½®åˆå§‹çŠ¶æ€ï¼Œç”¨æˆ·ä½“éªŒä¸å¥½ã€‚\nreact16.0ä»¥åï¼ŒcomponentWillMountå¯èƒ½ä¼šè¢«æ‰§è¡Œå¤šæ¬¡ã€‚\n\n7. React 16ä¸­æ–°ç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›å…³äº React16 å¼€å§‹åº”ç”¨çš„æ–°ç”Ÿå‘½å‘¨æœŸï¼š  å¯ä»¥çœ‹å‡ºï¼ŒReact16 è‡ªä¸Šè€Œä¸‹åœ°å¯¹ç”Ÿå‘½å‘¨æœŸåšäº†å¦ä¸€ç§ç»´åº¦çš„è§£è¯»ï¼š\n\nRender é˜¶æ®µï¼šç”¨äºè®¡ç®—ä¸€äº›å¿…è¦çš„çŠ¶æ€ä¿¡æ¯ã€‚è¿™ä¸ªé˜¶æ®µå¯èƒ½ä¼šè¢« React æš‚åœï¼Œè¿™ä¸€ç‚¹å’Œ React16 å¼•å…¥çš„ Fiber æ¶æ„ï¼ˆæˆ‘ä»¬åé¢ä¼šé‡ç‚¹è®²è§£ï¼‰æ˜¯æœ‰å…³çš„ï¼›\nPre-commité˜¶æ®µï¼šæ‰€è°“â€œcommitâ€ï¼Œè¿™é‡ŒæŒ‡çš„æ˜¯â€œæ›´æ–°çœŸæ­£çš„ DOM èŠ‚ç‚¹â€è¿™ä¸ªåŠ¨ä½œã€‚æ‰€è°“ Pre-commitï¼Œå°±æ˜¯è¯´æˆ‘åœ¨è¿™ä¸ªé˜¶æ®µå…¶å®è¿˜å¹¶æ²¡æœ‰å»æ›´æ–°çœŸå®çš„ DOMï¼Œä¸è¿‡ DOM ä¿¡æ¯å·²ç»æ˜¯å¯ä»¥è¯»å–çš„äº†ï¼›\nCommit é˜¶æ®µï¼šåœ¨è¿™ä¸€æ­¥ï¼ŒReact ä¼šå®ŒæˆçœŸå® DOM çš„æ›´æ–°å·¥ä½œã€‚Commit é˜¶æ®µï¼Œæˆ‘ä»¬å¯ä»¥æ‹¿åˆ°çœŸå® DOMï¼ˆåŒ…æ‹¬ refsï¼‰ã€‚\n\nä¸æ­¤åŒæ—¶ï¼Œæ–°çš„ç”Ÿå‘½å‘¨æœŸåœ¨æµç¨‹æ–¹é¢ï¼Œä»ç„¶éµå¾ªâ€œæŒ‚è½½â€ã€â€œæ›´æ–°â€ã€â€œå¸è½½â€è¿™ä¸‰ä¸ªå¹¿ä¹‰çš„åˆ’åˆ†æ–¹å¼ã€‚å®ƒä»¬åˆ†åˆ«å¯¹åº”åˆ°ï¼š\n\næŒ‚è½½è¿‡ç¨‹ï¼š\n\nconstructor\ngetDerivedStateFromProps\nrender\ncomponentDidMount\n\n\næ›´æ–°è¿‡ç¨‹ï¼š\n\ngetDerivedStateFromProps\nshouldComponentUpdate\nrender\ngetSnapshotBeforeUpdate\ncomponentDidUpdate\n\n\nå¸è½½è¿‡ç¨‹ï¼š\n\ncomponentWillUnmount\n\n\n\nå››ã€ç»„ä»¶é€šä¿¡Reactç»„ä»¶é—´é€šä¿¡å¸¸è§çš„å‡ ç§æƒ…å†µ:\n\nçˆ¶ç»„ä»¶å‘å­ç»„ä»¶é€šä¿¡\nå­ç»„ä»¶å‘çˆ¶ç»„ä»¶é€šä¿¡\nè·¨çº§ç»„ä»¶é€šä¿¡\néåµŒå¥—å…³ç³»çš„ç»„ä»¶é€šä¿¡\n\n1. çˆ¶å­ç»„ä»¶çš„é€šä¿¡æ–¹å¼ï¼Ÿçˆ¶ç»„ä»¶å‘å­ç»„ä»¶é€šä¿¡ï¼šçˆ¶ç»„ä»¶é€šè¿‡ props å‘å­ç»„ä»¶ä¼ é€’éœ€è¦çš„ä¿¡æ¯ã€‚\n&#x2F;&#x2F; å­ç»„ä»¶: Child\nconst Child &#x3D; props &#x3D;&gt;&#123;\n  return &lt;p&gt;&#123;props.name&#125;&lt;&#x2F;p&gt;\n&#125;\n&#x2F;&#x2F; çˆ¶ç»„ä»¶ Parent\nconst Parent &#x3D; ()&#x3D;&gt;&#123;\n    return &lt;Child name&#x3D;&quot;react&quot;&gt;&lt;&#x2F;Child&gt;\n&#125;\nå¤åˆ¶ä»£ç \n\nå­ç»„ä»¶å‘çˆ¶ç»„ä»¶é€šä¿¡ï¼š: props+å›è°ƒçš„æ–¹å¼ã€‚\n&#x2F;&#x2F; å­ç»„ä»¶: Child\nconst Child &#x3D; props &#x3D;&gt;&#123;\n  const cb &#x3D; msg &#x3D;&gt;&#123;\n      return ()&#x3D;&gt;&#123;\n          props.callback(msg)\n      &#125;\n  &#125;\n  return (\n      &lt;button onClick&#x3D;&#123;cb(&quot;ä½ å¥½!&quot;)&#125;&gt;ä½ å¥½&lt;&#x2F;button&gt;\n  )\n&#125;\n&#x2F;&#x2F; çˆ¶ç»„ä»¶ Parent\nclass Parent extends Component &#123;\n    callback(msg)&#123;\n        console.log(msg)\n    &#125;\n    render()&#123;\n        return &lt;Child callback&#x3D;&#123;this.callback.bind(this)&#125;&gt;&lt;&#x2F;Child&gt;    \n    &#125;\n&#125;\nå¤åˆ¶ä»£ç \n\n2. è·¨çº§ç»„ä»¶çš„é€šä¿¡æ–¹å¼ï¼Ÿçˆ¶ç»„ä»¶å‘å­ç»„ä»¶çš„å­ç»„ä»¶é€šä¿¡ï¼Œå‘æ›´æ·±å±‚å­ç»„ä»¶é€šä¿¡ï¼š\n\nä½¿ç”¨propsï¼Œåˆ©ç”¨ä¸­é—´ç»„ä»¶å±‚å±‚ä¼ é€’,ä½†æ˜¯å¦‚æœçˆ¶ç»„ä»¶ç»“æ„è¾ƒæ·±ï¼Œé‚£ä¹ˆä¸­é—´æ¯ä¸€å±‚ç»„ä»¶éƒ½è¦å»ä¼ é€’propsï¼Œå¢åŠ äº†å¤æ‚åº¦ï¼Œå¹¶ä¸”è¿™äº›propså¹¶ä¸æ˜¯ä¸­é—´ç»„ä»¶è‡ªå·±éœ€è¦çš„ã€‚\nä½¿ç”¨contextï¼Œcontextç›¸å½“äºä¸€ä¸ªå¤§å®¹å™¨ï¼Œå¯ä»¥æŠŠè¦é€šä¿¡çš„å†…å®¹æ”¾åœ¨è¿™ä¸ªå®¹å™¨ä¸­ï¼Œè¿™æ ·ä¸ç®¡åµŒå¥—å¤šæ·±ï¼Œéƒ½å¯ä»¥éšæ„å–ç”¨ï¼Œå¯¹äºè·¨è¶Šå¤šå±‚çš„å…¨å±€æ•°æ®å¯ä»¥ä½¿ç”¨contextå®ç°ã€‚\n\n&#x2F;&#x2F; contextæ–¹å¼å®ç°è·¨çº§ç»„ä»¶é€šä¿¡ \n&#x2F;&#x2F; Context è®¾è®¡ç›®çš„æ˜¯ä¸ºäº†å…±äº«é‚£äº›å¯¹äºä¸€ä¸ªç»„ä»¶æ ‘è€Œè¨€æ˜¯â€œå…¨å±€â€çš„æ•°æ®\nconst BatteryContext &#x3D; createContext();\n&#x2F;&#x2F;  å­ç»„ä»¶çš„å­ç»„ä»¶ \nclass GrandChild extends Component &#123;\n    render()&#123;\n        return (\n            &lt;BatteryContext.Consumer&gt;\n                &#123;\n                    color &#x3D;&gt; &lt;h1 style&#x3D;&#123;&#123;&quot;color&quot;:color&#125;&#125;&gt;æˆ‘æ˜¯çº¢è‰²çš„:&#123;color&#125;&lt;&#x2F;h1&gt;\n                &#125;\n            &lt;&#x2F;BatteryContext.Consumer&gt;\n        )\n    &#125;\n&#125;\n&#x2F;&#x2F;  å­ç»„ä»¶\nconst Child &#x3D; () &#x3D;&gt;&#123;\n    return (\n        &lt;GrandChild&#x2F;&gt;\n    )\n&#125;\n&#x2F;&#x2F; çˆ¶ç»„ä»¶\nclass Parent extends Component &#123;\n      state &#x3D; &#123;\n          color:&quot;red&quot;\n      &#125;\n      render()&#123;\n          const &#123;color&#125; &#x3D; this.state\n          return (\n          &lt;BatteryContext.Provider value&#x3D;&#123;color&#125;&gt;\n              &lt;Child&gt;&lt;&#x2F;Child&gt;\n          &lt;&#x2F;BatteryContext.Provider&gt;\n          )\n      &#125;\n&#125;\nå¤åˆ¶ä»£ç \n\n3. éåµŒå¥—å…³ç³»ç»„ä»¶çš„é€šä¿¡æ–¹å¼ï¼Ÿå³æ²¡æœ‰ä»»ä½•åŒ…å«å…³ç³»çš„ç»„ä»¶ï¼ŒåŒ…æ‹¬å…„å¼Ÿç»„ä»¶ä»¥åŠä¸åœ¨åŒä¸€ä¸ªçˆ¶çº§ä¸­çš„éå…„å¼Ÿç»„ä»¶ã€‚\n\nå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰äº‹ä»¶é€šä¿¡ï¼ˆå‘å¸ƒè®¢é˜…æ¨¡å¼ï¼‰\nå¯ä»¥é€šè¿‡reduxç­‰è¿›è¡Œå…¨å±€çŠ¶æ€ç®¡ç†\nå¦‚æœæ˜¯å…„å¼Ÿç»„ä»¶é€šä¿¡ï¼Œå¯ä»¥æ‰¾åˆ°è¿™ä¸¤ä¸ªå…„å¼ŸèŠ‚ç‚¹å…±åŒçš„çˆ¶èŠ‚ç‚¹, ç»“åˆçˆ¶å­é—´é€šä¿¡æ–¹å¼è¿›è¡Œé€šä¿¡ã€‚\n\n4. å¦‚ä½•è§£å†³ props å±‚çº§è¿‡æ·±çš„é—®é¢˜\nä½¿ç”¨Context APIï¼šæä¾›ä¸€ç§ç»„ä»¶ä¹‹é—´çš„çŠ¶æ€å…±äº«ï¼Œè€Œä¸å¿…é€šè¿‡æ˜¾å¼ç»„ä»¶æ ‘é€å±‚ä¼ é€’propsï¼›\nä½¿ç”¨Reduxç­‰çŠ¶æ€åº“ã€‚\n\n5. ç»„ä»¶é€šä¿¡çš„æ–¹å¼æœ‰å“ªäº›\nâ½—ç»„ä»¶å‘â¼¦ç»„ä»¶é€šè®¯: â½—ç»„ä»¶å¯ä»¥å‘â¼¦ç»„ä»¶é€šè¿‡ä¼  props çš„â½…å¼ï¼Œå‘â¼¦ç»„ä»¶è¿›â¾é€šè®¯\nâ¼¦ç»„ä»¶å‘â½—ç»„ä»¶é€šè®¯: props+å›è°ƒçš„â½…å¼ï¼Œâ½—ç»„ä»¶å‘â¼¦ç»„ä»¶ä¼ é€’propsè¿›â¾é€šè®¯ï¼Œæ­¤propsä¸ºä½œâ½¤åŸŸä¸ºâ½—ç»„ä»¶â¾ƒèº«çš„å‡½ æ•°ï¼Œâ¼¦ç»„ä»¶è°ƒâ½¤è¯¥å‡½æ•°ï¼Œå°†â¼¦ç»„ä»¶æƒ³è¦ä¼ é€’çš„ä¿¡æ¯ï¼Œä½œä¸ºå‚æ•°ï¼Œä¼ é€’åˆ°â½—ç»„ä»¶çš„ä½œâ½¤åŸŸä¸­\nå…„å¼Ÿç»„ä»¶é€šä¿¡: æ‰¾åˆ°è¿™ä¸¤ä¸ªå…„å¼ŸèŠ‚ç‚¹å…±åŒçš„â½—èŠ‚ç‚¹,ç»“åˆä¸Šâ¾¯ä¸¤ç§â½…å¼ç”±â½—èŠ‚ç‚¹è½¬å‘ä¿¡æ¯è¿›â¾é€šä¿¡\nè·¨å±‚çº§é€šä¿¡: Context è®¾è®¡â½¬çš„æ˜¯ä¸ºäº†å…±äº«é‚£äº›å¯¹äºâ¼€ä¸ªç»„ä»¶æ ‘â½½â¾”æ˜¯â€œå…¨å±€â€çš„æ•°æ®ï¼Œä¾‹å¦‚å½“å‰è®¤è¯çš„â½¤æˆ·ã€ä¸»é¢˜æˆ–â¾¸é€‰è¯­â¾”ï¼Œå¯¹äºè·¨è¶Šå¤šå±‚çš„å…¨å±€æ•°æ®é€šè¿‡ Context é€šä¿¡å†é€‚åˆä¸è¿‡\nå‘å¸ƒè®¢é˜…æ¨¡å¼: å‘å¸ƒè€…å‘å¸ƒäº‹ä»¶ï¼Œè®¢é˜…è€…ç›‘å¬äº‹ä»¶å¹¶åšå‡ºååº”,æˆ‘ä»¬å¯ä»¥é€šè¿‡å¼•â¼Ševentæ¨¡å—è¿›â¾é€šä¿¡\nå…¨å±€çŠ¶æ€ç®¡ç†â¼¯å…·: å€ŸåŠ©Reduxæˆ–è€…Mobxç­‰å…¨å±€çŠ¶æ€ç®¡ç†â¼¯å…·è¿›â¾é€šä¿¡,è¿™ç§â¼¯å…·ä¼šç»´æŠ¤â¼€ä¸ªå…¨å±€çŠ¶æ€ä¸­â¼¼Store,å¹¶æ ¹æ®ä¸åŒçš„äº‹ä»¶äº§â½£æ–°çš„çŠ¶æ€\n\näº”ã€è·¯ç”±1. React-Routerçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿå®¢æˆ·ç«¯è·¯ç”±å®ç°çš„æ€æƒ³ï¼š\n\nåŸºäº hash çš„è·¯ç”±ï¼šé€šè¿‡ç›‘å¬hashchangeäº‹ä»¶ï¼Œæ„ŸçŸ¥ hash çš„å˜åŒ–\n\næ”¹å˜ hash å¯ä»¥ç›´æ¥é€šè¿‡ location.hash&#x3D;xxx\n\n\nåŸºäº H5 history è·¯ç”±ï¼š\n\næ”¹å˜ url å¯ä»¥é€šè¿‡ history.pushState å’Œ resplaceState ç­‰ï¼Œä¼šå°†URLå‹å…¥å †æ ˆï¼ŒåŒæ—¶èƒ½å¤Ÿåº”ç”¨ history.go() ç­‰ API\nç›‘å¬ url çš„å˜åŒ–å¯ä»¥é€šè¿‡è‡ªå®šä¹‰äº‹ä»¶è§¦å‘å®ç°\n\n\n\nreact-router å®ç°çš„æ€æƒ³ï¼š\n\nåŸºäº history åº“æ¥å®ç°ä¸Šè¿°ä¸åŒçš„å®¢æˆ·ç«¯è·¯ç”±å®ç°æ€æƒ³ï¼Œå¹¶ä¸”èƒ½å¤Ÿä¿å­˜å†å²è®°å½•ç­‰ï¼Œç£¨å¹³æµè§ˆå™¨å·®å¼‚ï¼Œä¸Šå±‚æ— æ„ŸçŸ¥\né€šè¿‡ç»´æŠ¤çš„åˆ—è¡¨ï¼Œåœ¨æ¯æ¬¡ URL å‘ç”Ÿå˜åŒ–çš„å›æ”¶ï¼Œé€šè¿‡é…ç½®çš„ è·¯ç”±è·¯å¾„ï¼ŒåŒ¹é…åˆ°å¯¹åº”çš„ Componentï¼Œå¹¶ä¸” render\n\n2. å¦‚ä½•é…ç½® React-Router å®ç°è·¯ç”±åˆ‡æ¢ï¼ˆ1ï¼‰ä½¿ç”¨&lt;Route&gt; ç»„ä»¶\nè·¯ç”±åŒ¹é…æ˜¯é€šè¿‡æ¯”è¾ƒ &lt;Route&gt; çš„ path å±æ€§å’Œå½“å‰åœ°å€çš„ pathname æ¥å®ç°çš„ã€‚å½“ä¸€ä¸ª &lt;Route&gt; åŒ¹é…æˆåŠŸæ—¶ï¼Œå®ƒå°†æ¸²æŸ“å…¶å†…å®¹ï¼Œå½“å®ƒä¸åŒ¹é…æ—¶å°±ä¼šæ¸²æŸ“ nullã€‚æ²¡æœ‰è·¯å¾„çš„ &lt;Route&gt; å°†å§‹ç»ˆè¢«åŒ¹é…ã€‚\n&#x2F;&#x2F; when location &#x3D; &#123; pathname: &#39;&#x2F;about&#39; &#125;\n&lt;Route path&#x3D;&#39;&#x2F;about&#39; component&#x3D;&#123;About&#125;&#x2F;&gt; &#x2F;&#x2F; renders &lt;About&#x2F;&gt;\n&lt;Route path&#x3D;&#39;&#x2F;contact&#39; component&#x3D;&#123;Contact&#125;&#x2F;&gt; &#x2F;&#x2F; renders null\n&lt;Route component&#x3D;&#123;Always&#125;&#x2F;&gt; &#x2F;&#x2F; renders &lt;Always&#x2F;&gt;\nå¤åˆ¶ä»£ç \n\nï¼ˆ2ï¼‰ç»“åˆä½¿ç”¨ &lt;Switch&gt; ç»„ä»¶å’Œ &lt;Route&gt; ç»„ä»¶\n&lt;Switch&gt; ç”¨äºå°† &lt;Route&gt; åˆ†ç»„ã€‚\n&lt;Switch&gt;\n    &lt;Route exact path&#x3D;&quot;&#x2F;&quot; component&#x3D;&#123;Home&#125; &#x2F;&gt;\n    &lt;Route path&#x3D;&quot;&#x2F;about&quot; component&#x3D;&#123;About&#125; &#x2F;&gt;\n    &lt;Route path&#x3D;&quot;&#x2F;contact&quot; component&#x3D;&#123;Contact&#125; &#x2F;&gt;\n&lt;&#x2F;Switch&gt;\nå¤åˆ¶ä»£ç \n\n&lt;Switch&gt; ä¸æ˜¯åˆ†ç»„ &lt;Route&gt; æ‰€å¿…é¡»çš„ï¼Œä½†ä»–é€šå¸¸å¾ˆæœ‰ç”¨ã€‚ ä¸€ä¸ª &lt;Switch&gt; ä¼šéå†å…¶æ‰€æœ‰çš„å­ &lt;Route&gt;å…ƒç´ ï¼Œå¹¶ä»…æ¸²æŸ“ä¸å½“å‰åœ°å€åŒ¹é…çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚\nï¼ˆ3ï¼‰ä½¿ç”¨ &lt;Link&gt;ã€ &lt;NavLink&gt;ã€&lt;Redirect&gt; ç»„ä»¶\n&lt;Link&gt; ç»„ä»¶æ¥åœ¨ä½ çš„åº”ç”¨ç¨‹åºä¸­åˆ›å»ºé“¾æ¥ã€‚æ— è®ºä½ åœ¨ä½•å¤„æ¸²æŸ“ä¸€ä¸ª&lt;Link&gt; ï¼Œéƒ½ä¼šåœ¨åº”ç”¨ç¨‹åºçš„ HTML ä¸­æ¸²æŸ“é”šï¼ˆ&lt;a&gt;ï¼‰ã€‚\n&lt;Link to&#x3D;&quot;&#x2F;&quot;&gt;Home&lt;&#x2F;Link&gt;   \n&#x2F;&#x2F; &lt;a href&#x3D;&#39;&#x2F;&#39;&gt;Home&lt;&#x2F;a&gt;\nå¤åˆ¶ä»£ç \n\næ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„ å½“å®ƒçš„ toå±æ€§ä¸å½“å‰åœ°å€åŒ¹é…æ—¶ï¼Œå¯ä»¥å°†å…¶å®šä¹‰ä¸ºâ€æ´»è·ƒçš„â€ã€‚\n&#x2F;&#x2F; location &#x3D; &#123; pathname: &#39;&#x2F;react&#39; &#125;\n&lt;NavLink to&#x3D;&quot;&#x2F;react&quot; activeClassName&#x3D;&quot;hurray&quot;&gt;\n    React\n&lt;&#x2F;NavLink&gt;\n&#x2F;&#x2F; &lt;a href&#x3D;&#39;&#x2F;react&#39; className&#x3D;&#39;hurray&#39;&gt;React&lt;&#x2F;a&gt;\nå¤åˆ¶ä»£ç \n\nå½“æˆ‘ä»¬æƒ³å¼ºåˆ¶å¯¼èˆªæ—¶ï¼Œå¯ä»¥æ¸²æŸ“ä¸€ä¸ª&lt;Redirect&gt;ï¼Œå½“ä¸€ä¸ª&lt;Redirect&gt;æ¸²æŸ“æ—¶ï¼Œå®ƒå°†ä½¿ç”¨å®ƒçš„toå±æ€§è¿›è¡Œå®šå‘ã€‚\n3. React-Routeræ€ä¹ˆè®¾ç½®é‡å®šå‘ï¼Ÿä½¿ç”¨&lt;Redirect&gt;ç»„ä»¶å®ç°è·¯ç”±çš„é‡å®šå‘ï¼š\n&lt;Switch&gt;\n  &lt;Redirect from&#x3D;&#39;&#x2F;users&#x2F;:id&#39; to&#x3D;&#39;&#x2F;users&#x2F;profile&#x2F;:id&#39;&#x2F;&gt;\n  &lt;Route path&#x3D;&#39;&#x2F;users&#x2F;profile&#x2F;:id&#39; component&#x3D;&#123;Profile&#125;&#x2F;&gt;\n&lt;&#x2F;Switch&gt;\nå¤åˆ¶ä»£ç \n\nå½“è¯·æ±‚ /users/:id è¢«é‡å®šå‘å» &#39;/users/profile/:id&#39;ï¼š\n\nå±æ€§ from: stringï¼šéœ€è¦åŒ¹é…çš„å°†è¦è¢«é‡å®šå‘è·¯å¾„ã€‚\nå±æ€§ to: stringï¼šé‡å®šå‘çš„ URL å­—ç¬¦ä¸²\nå±æ€§ to: objectï¼šé‡å®šå‘çš„ location å¯¹è±¡\nå±æ€§ push: boolï¼šè‹¥ä¸ºçœŸï¼Œé‡å®šå‘æ“ä½œå°†ä¼šæŠŠæ–°åœ°å€åŠ å…¥åˆ°è®¿é—®å†å²è®°å½•é‡Œé¢ï¼Œå¹¶ä¸”æ— æ³•å›é€€åˆ°å‰é¢çš„é¡µé¢ã€‚\n\n4. react-router é‡Œçš„ Link æ ‡ç­¾å’Œ a æ ‡ç­¾çš„åŒºåˆ«ä»æœ€ç»ˆæ¸²æŸ“çš„ DOM æ¥çœ‹ï¼Œè¿™ä¸¤è€…éƒ½æ˜¯é“¾æ¥ï¼Œéƒ½æ˜¯ æ ‡ç­¾ï¼ŒåŒºåˆ«æ˜¯âˆ¶ &lt;Link&gt;æ˜¯react-router é‡Œå®ç°è·¯ç”±è·³è½¬çš„é“¾æ¥ï¼Œä¸€èˆ¬é…åˆ&lt;Route&gt; ä½¿ç”¨ï¼Œreact-routeræ¥ç®¡äº†å…¶é»˜è®¤çš„é“¾æ¥è·³è½¬è¡Œä¸ºï¼ŒåŒºåˆ«äºä¼ ç»Ÿçš„é¡µé¢è·³è½¬ï¼Œ&lt;Link&gt; çš„â€œè·³è½¬â€è¡Œä¸ºåªä¼šè§¦å‘ç›¸åŒ¹é…çš„&lt;Route&gt;å¯¹åº”çš„é¡µé¢å†…å®¹æ›´æ–°ï¼Œè€Œä¸ä¼šåˆ·æ–°æ•´ä¸ªé¡µé¢ã€‚\n&lt;Link&gt;åšäº†3ä»¶äº‹æƒ…:\n\næœ‰onclické‚£å°±æ‰§è¡Œonclick\nclickçš„æ—¶å€™é˜»æ­¢aæ ‡ç­¾é»˜è®¤äº‹ä»¶\næ ¹æ®è·³è½¬href(å³æ˜¯to)ï¼Œç”¨history (webå‰ç«¯è·¯ç”±ä¸¤ç§æ–¹å¼ä¹‹ä¸€ï¼Œhistory &amp; hash)è·³è½¬ï¼Œæ­¤æ—¶åªæ˜¯é“¾æ¥å˜äº†ï¼Œå¹¶æ²¡æœ‰åˆ·æ–°é¡µé¢è€Œ&lt;a&gt;æ ‡ç­¾å°±æ˜¯æ™®é€šçš„è¶…é“¾æ¥äº†ï¼Œç”¨äºä»å½“å‰é¡µé¢è·³è½¬åˆ°hrefæŒ‡å‘çš„å¦ä¸€ ä¸ªé¡µé¢(éé”šç‚¹æƒ…å†µ)ã€‚\n\naæ ‡ç­¾é»˜è®¤äº‹ä»¶ç¦æ‰ä¹‹ååšäº†ä»€ä¹ˆæ‰å®ç°äº†è·³è½¬?\nlet domArr &#x3D; document.getElementsByTagName(&#39;a&#39;)\n[...domArr].forEach(item&#x3D;&gt;&#123;\n    item.addEventListener(&#39;click&#39;,function () &#123;\n        location.href &#x3D; this.href\n    &#125;)\n&#125;)\nå¤åˆ¶ä»£ç \n\n5. React-Routerå¦‚ä½•è·å–URLçš„å‚æ•°å’Œå†å²å¯¹è±¡ï¼Ÿï¼ˆ1ï¼‰è·å–URLçš„å‚æ•°\n\ngetä¼ å€¼\n\nè·¯ç”±é…ç½®è¿˜æ˜¯æ™®é€šçš„é…ç½®ï¼Œå¦‚ï¼š&#39;admin&#39;ï¼Œä¼ å‚æ–¹å¼å¦‚ï¼š&#39;admin?id=&#39;1111&#39;&#39;ã€‚é€šè¿‡this.props.location.searchè·å–urlè·å–åˆ°ä¸€ä¸ªå­—ç¬¦ä¸²&#39;?id=&#39;1111&#39; å¯ä»¥ç”¨urlï¼Œqsï¼Œquerystringï¼Œæµè§ˆå™¨æä¾›çš„api URLSearchParamså¯¹è±¡æˆ–è€…è‡ªå·±å°è£…çš„æ–¹æ³•å»è§£æå‡ºidçš„å€¼ã€‚\n\nåŠ¨æ€è·¯ç”±ä¼ å€¼\n\nè·¯ç”±éœ€è¦é…ç½®æˆåŠ¨æ€è·¯ç”±ï¼šå¦‚path=&#39;/admin/:id&#39;ï¼Œä¼ å‚æ–¹å¼ï¼Œå¦‚&#39;admin/111&#39;ã€‚é€šè¿‡this.props.match.params.id å–å¾—urlä¸­çš„åŠ¨æ€è·¯ç”±idéƒ¨åˆ†çš„å€¼ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜å¯ä»¥é€šè¿‡useParamsï¼ˆHooksï¼‰æ¥è·å–\n\né€šè¿‡queryæˆ–stateä¼ å€¼\n\nä¼ å‚æ–¹å¼å¦‚ï¼šåœ¨Linkç»„ä»¶çš„toå±æ€§ä¸­å¯ä»¥ä¼ é€’å¯¹è±¡&#123;pathname:&#39;/admin&#39;,query:&#39;111&#39;,state:&#39;111&#39;&#125;;ã€‚é€šè¿‡this.props.location.stateæˆ–this.props.location.queryæ¥è·å–å³å¯ï¼Œä¼ é€’çš„å‚æ•°å¯ä»¥æ˜¯å¯¹è±¡ã€æ•°ç»„ç­‰ï¼Œä½†æ˜¯å­˜åœ¨ç¼ºç‚¹å°±æ˜¯åªè¦åˆ·æ–°é¡µé¢ï¼Œå‚æ•°å°±ä¼šä¸¢å¤±ã€‚\nï¼ˆ2ï¼‰è·å–å†å²å¯¹è±¡\n\nå¦‚æœReact &gt;&#x3D; 16.8 æ—¶å¯ä»¥ä½¿ç”¨ React Routerä¸­æä¾›çš„Hooks\n\nimport &#123; useHistory &#125; from &quot;react-router-dom&quot;;\nlet history &#x3D; useHistory();\nå¤åˆ¶ä»£ç \n\n2.ä½¿ç”¨this.props.historyè·å–å†å²å¯¹è±¡\nlet history &#x3D; this.props.history;\nå¤åˆ¶ä»£ç \n\n6. React-Router 4æ€æ ·åœ¨è·¯ç”±å˜åŒ–æ—¶é‡æ–°æ¸²æŸ“åŒä¸€ä¸ªç»„ä»¶ï¼Ÿå½“è·¯ç”±å˜åŒ–æ—¶ï¼Œå³ç»„ä»¶çš„propså‘ç”Ÿäº†å˜åŒ–ï¼Œä¼šè°ƒç”¨componentWillReceivePropsç­‰ç”Ÿå‘½å‘¨æœŸé’©å­ã€‚é‚£éœ€è¦åšçš„åªæ˜¯ï¼š å½“è·¯ç”±æ”¹å˜æ—¶ï¼Œæ ¹æ®è·¯ç”±ï¼Œä¹Ÿå»è¯·æ±‚æ•°æ®ï¼š\nclass NewsList extends Component &#123;\n  componentDidMount () &#123;\n     this.fetchData(this.props.location);\n  &#125;\n  \n  fetchData(location) &#123;\n    const type &#x3D; location.pathname.replace(&#39;&#x2F;&#39;, &#39;&#39;) || &#39;top&#39;\n    this.props.dispatch(fetchListData(type))\n  &#125;\n  componentWillReceiveProps(nextProps) &#123;\n     if (nextProps.location.pathname !&#x3D; this.props.location.pathname) &#123;\n         this.fetchData(nextProps.location);\n     &#125; \n  &#125;\n  render () &#123;\n    ...\n  &#125;\n&#125;\nå¤åˆ¶ä»£ç \n\nåˆ©ç”¨ç”Ÿå‘½å‘¨æœŸcomponentWillReceivePropsï¼Œè¿›è¡Œé‡æ–°renderçš„é¢„å¤„ç†æ“ä½œã€‚\n7. React-Routerçš„è·¯ç”±æœ‰å‡ ç§æ¨¡å¼ï¼ŸReact-Router æ”¯æŒä½¿ç”¨ hashï¼ˆå¯¹åº” HashRouterï¼‰å’Œ browserï¼ˆå¯¹åº” BrowserRouterï¼‰ ä¸¤ç§è·¯ç”±è§„åˆ™ï¼Œ react-router-dom æä¾›äº† BrowserRouter å’Œ HashRouter ä¸¤ä¸ªç»„ä»¶æ¥å®ç°åº”ç”¨çš„ UI å’Œ URL åŒæ­¥ï¼š\n\nBrowserRouter åˆ›å»ºçš„ URL æ ¼å¼ï¼šxxx.com&#x2F;path\nHashRouter åˆ›å»ºçš„ URL æ ¼å¼ï¼šxxx.com&#x2F;#&#x2F;path\n\nï¼ˆ1ï¼‰BrowserRouter\nå®ƒä½¿ç”¨ HTML5 æä¾›çš„ history APIï¼ˆpushStateã€replaceState å’Œ popstate äº‹ä»¶ï¼‰æ¥ä¿æŒ UI å’Œ URL çš„åŒæ­¥ã€‚ç”±æ­¤å¯ä»¥çœ‹å‡ºï¼ŒBrowserRouter æ˜¯ä½¿ç”¨ HTML 5 çš„ history API æ¥æ§åˆ¶è·¯ç”±è·³è½¬çš„ï¼š\n&lt;BrowserRouter\n    basename&#x3D;&#123;string&#125;\n    forceRefresh&#x3D;&#123;bool&#125;\n    getUserConfirmation&#x3D;&#123;func&#125;\n    keyLength&#x3D;&#123;number&#125;\n&#x2F;&gt;\nå¤åˆ¶ä»£ç \n\nå…¶ä¸­çš„å±æ€§å¦‚ä¸‹ï¼š\n\nbasename æ‰€æœ‰è·¯ç”±çš„åŸºå‡† URLã€‚basename çš„æ­£ç¡®æ ¼å¼æ˜¯å‰é¢æœ‰ä¸€ä¸ªå‰å¯¼æ–œæ ï¼Œä½†ä¸èƒ½æœ‰å°¾éƒ¨æ–œæ ï¼›\n\n&lt;BrowserRouter basename&#x3D;&quot;&#x2F;calendar&quot;&gt;\n    &lt;Link to&#x3D;&quot;&#x2F;today&quot; &#x2F;&gt;\n&lt;&#x2F;BrowserRouter&gt;\nå¤åˆ¶ä»£ç \n\nç­‰åŒäº\n&lt;a href&#x3D;&quot;&#x2F;calendar&#x2F;today&quot; &#x2F;&gt;\nå¤åˆ¶ä»£ç \n\n\nforceRefresh å¦‚æœä¸º trueï¼Œåœ¨å¯¼èˆªçš„è¿‡ç¨‹ä¸­æ•´ä¸ªé¡µé¢å°†ä¼šåˆ·æ–°ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåªæœ‰åœ¨ä¸æ”¯æŒ HTML5 history API çš„æµè§ˆå™¨ä¸­ä½¿ç”¨æ­¤åŠŸèƒ½ï¼›\ngetUserConfirmation ç”¨äºç¡®è®¤å¯¼èˆªçš„å‡½æ•°ï¼Œé»˜è®¤ä½¿ç”¨ window.confirmã€‚ä¾‹å¦‚ï¼Œå½“ä» &#x2F;a å¯¼èˆªè‡³ &#x2F;b æ—¶ï¼Œä¼šä½¿ç”¨é»˜è®¤çš„ confirm å‡½æ•°å¼¹å‡ºä¸€ä¸ªæç¤ºï¼Œç”¨æˆ·ç‚¹å‡»ç¡®å®šåæ‰è¿›è¡Œå¯¼èˆªï¼Œå¦åˆ™ä¸åšä»»ä½•å¤„ç†ï¼›\n\n&#x2F;&#x2F; è¿™æ˜¯é»˜è®¤çš„ç¡®è®¤å‡½æ•°\nconst getConfirmation &#x3D; (message, callback) &#x3D;&gt; &#123;\n  const allowTransition &#x3D; window.confirm(message);\n  callback(allowTransition);\n&#125;\n&lt;BrowserRouter getUserConfirmation&#x3D;&#123;getConfirmation&#125; &#x2F;&gt;\nå¤åˆ¶ä»£ç \n\n\n\n\n\n\n\n\n\n\néœ€è¦é…åˆ&lt;Prompt&gt; ä¸€èµ·ä½¿ç”¨ã€‚\n\nKeyLength ç”¨æ¥è®¾ç½® Location.Key çš„é•¿åº¦ã€‚\n\nï¼ˆ2ï¼‰HashRouter\nä½¿ç”¨ URL çš„ hash éƒ¨åˆ†ï¼ˆå³ window.location.hashï¼‰æ¥ä¿æŒ UI å’Œ URL çš„åŒæ­¥ã€‚ç”±æ­¤å¯ä»¥çœ‹å‡ºï¼ŒHashRouter æ˜¯é€šè¿‡ URL çš„ hash å±æ€§æ¥æ§åˆ¶è·¯ç”±è·³è½¬çš„ï¼š\n&lt;HashRouter\n    basename&#x3D;&#123;string&#125;\n    getUserConfirmation&#x3D;&#123;func&#125;\n    hashType&#x3D;&#123;string&#125;  \n&#x2F;&gt;\nå¤åˆ¶ä»£ç \n\nå…¶å‚æ•°å¦‚ä¸‹ï¼š\n\nbasename, getUserConfirmation å’Œ BrowserRouter åŠŸèƒ½ä¸€æ ·ï¼›\n\nhashType window.location.hash ä½¿ç”¨çš„ hash ç±»å‹ï¼Œæœ‰å¦‚ä¸‹å‡ ç§ï¼š\n\nslash - åé¢è·Ÿä¸€ä¸ªæ–œæ ï¼Œä¾‹å¦‚ #&#x2F; å’Œ #&#x2F;sunshine&#x2F;lollipopsï¼›\nnoslash - åé¢æ²¡æœ‰æ–œæ ï¼Œä¾‹å¦‚ # å’Œ #sunshine&#x2F;lollipopsï¼›\nhashbang - Google é£æ ¼çš„ ajax crawlableï¼Œä¾‹å¦‚ #!&#x2F; å’Œ #!&#x2F;sunshine&#x2F;lollipopsã€‚\n\n\n\n8. React-Router 4çš„Switchæœ‰ä»€ä¹ˆç”¨ï¼ŸSwitch é€šå¸¸è¢«ç”¨æ¥åŒ…è£¹ Routeï¼Œç”¨äºæ¸²æŸ“ä¸è·¯å¾„åŒ¹é…çš„ç¬¬ä¸€ä¸ªå­ &lt;Route&gt; æˆ– &lt;Redirect&gt;ï¼Œå®ƒé‡Œé¢ä¸èƒ½æ”¾å…¶ä»–å…ƒç´ ã€‚\nå‡å¦‚ä¸åŠ  &lt;Switch&gt; ï¼š\nimport &#123; Route &#125; from &#39;react-router-dom&#39;\n\n&lt;Route path&#x3D;&quot;&#x2F;&quot; component&#x3D;&#123;Home&#125;&gt;&lt;&#x2F;Route&gt;\n&lt;Route path&#x3D;&quot;&#x2F;login&quot; component&#x3D;&#123;Login&#125;&gt;&lt;&#x2F;Route&gt;\nå¤åˆ¶ä»£ç \n\nRoute ç»„ä»¶çš„ path å±æ€§ç”¨äºåŒ¹é…è·¯å¾„ï¼Œå› ä¸ºéœ€è¦åŒ¹é… / åˆ° Homeï¼ŒåŒ¹é… /login åˆ° Loginï¼Œæ‰€ä»¥éœ€è¦ä¸¤ä¸ª Routeï¼Œä½†æ˜¯ä¸èƒ½è¿™ä¹ˆå†™ã€‚è¿™æ ·å†™çš„è¯ï¼Œå½“ URL çš„ path ä¸º â€œ&#x2F;loginâ€ æ—¶ï¼Œ&lt;Route path=&quot;/&quot; /&gt;å’Œ&lt;Route path=&quot;/login&quot; /&gt; éƒ½ä¼šè¢«åŒ¹é…ï¼Œå› æ­¤é¡µé¢ä¼šå±•ç¤º Home å’Œ Login ä¸¤ä¸ªç»„ä»¶ã€‚è¿™æ—¶å°±éœ€è¦å€ŸåŠ© &lt;Switch&gt; æ¥åšåˆ°åªæ˜¾ç¤ºä¸€ä¸ªåŒ¹é…ç»„ä»¶ï¼š\nimport &#123; Switch, Route&#125; from &#39;react-router-dom&#39;\n    \n&lt;Switch&gt;\n    &lt;Route path&#x3D;&quot;&#x2F;&quot; component&#x3D;&#123;Home&#125;&gt;&lt;&#x2F;Route&gt;\n    &lt;Route path&#x3D;&quot;&#x2F;login&quot; component&#x3D;&#123;Login&#125;&gt;&lt;&#x2F;Route&gt;\n&lt;&#x2F;Switch&gt;\nå¤åˆ¶ä»£ç \n\næ­¤æ—¶ï¼Œå†è®¿é—® â€œ&#x2F;loginâ€ è·¯å¾„æ—¶ï¼Œå´åªæ˜¾ç¤ºäº† Home ç»„ä»¶ã€‚è¿™æ˜¯å°±ç”¨åˆ°äº†exactå±æ€§ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯ç²¾ç¡®åŒ¹é…è·¯å¾„ï¼Œç»å¸¸ä¸&lt;Switch&gt; è”åˆä½¿ç”¨ã€‚åªæœ‰å½“ URL å’Œè¯¥ &lt;Route&gt; çš„ path å±æ€§å®Œå…¨ä¸€è‡´çš„æƒ…å†µä¸‹æ‰èƒ½åŒ¹é…ä¸Šï¼š\nimport &#123; Switch, Route&#125; from &#39;react-router-dom&#39;\n   \n&lt;Switch&gt;\n   &lt;Route exact path&#x3D;&quot;&#x2F;&quot; component&#x3D;&#123;Home&#125;&gt;&lt;&#x2F;Route&gt;\n   &lt;Route exact path&#x3D;&quot;&#x2F;login&quot; component&#x3D;&#123;Login&#125;&gt;&lt;&#x2F;Route&gt;\n&lt;&#x2F;Switch&gt;\n","slug":"é¢è¯•é¢˜ç¬”è®°â€”â€”REACTç¯‡(ä¸Š)","date":"2022-04-08T06:06:03.000Z","categories_index":"","tags_index":"","author_index":"Beastrong"},{"id":"af425ac0390f0c4b127b06f565469692","title":"ahooks æ•´ä½“æ¶æ„æºç è§£æ","content":"React hooks utils åº“è‡ªä» React 16.8 ç‰ˆæœ¬æ¨å‡º React hooksï¼Œè¶Šæ¥è¶Šå¤šçš„é¡¹ç›®ä½¿ç”¨ Function Componentã€‚React hooks utils åº“éšå³è¯ç”Ÿï¼Œå®ƒä¸»è¦è§£å†³çš„ä¸¤ä¸ªé—®é¢˜å¦‚ä¸‹ï¼š\n\nå…¬å…±é€»è¾‘çš„æŠ½è±¡ã€‚\nè§£å†³ React hooks å­˜åœ¨çš„å¼Šç«¯ï¼Œæ¯”å¦‚é—­åŒ…ç­‰ã€‚\n\né‚£ç°åœ¨ç¤¾åŒºæœ‰å“ªäº›æ¯”è¾ƒä¼˜ç§€çš„ React Hooks utils åº“å‘¢ï¼Ÿ\nreact-use æ˜¯ç¤¾åŒºæ¯”è¾ƒæ´»è·ƒçš„ React hooks utils åº“ï¼Œå®ƒçš„ star æ•°è¾¾åˆ°äº† 29.6kã€‚å®ƒçš„åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œæ‹¥æœ‰çš„ hooks å·²ç» 100+ã€‚å‡å¦‚ä½ éœ€è¦åŠŸèƒ½æ¯”è¾ƒé½å…¨ï¼Œå¯ä»¥è€ƒè™‘é€‰æ‹© react-useã€‚\nå¦‚æœä¸éœ€è¦éå¸¸é½å…¨çš„åŠŸèƒ½ï¼Œåªéœ€è¦ä¸€äº›å¸¸è§çš„åŠŸèƒ½ï¼Œreact-use å¯èƒ½ä¼šç¨å¾®å†—ä½™äº†ï¼Œå¯ä»¥è€ƒè™‘æˆ‘ä»¬ä»Šå¤©çš„ä¸»è§’â€”â€”ahooksï¼Œç›®å‰å®ƒçš„ star æ•°ä¸º 9.2kï¼Œä¹Ÿç®—æ˜¯ç¤¾åŒºæ¯”è¾ƒæ´»è·ƒã€‚\nahooksç®€ä»‹å®˜æ–¹ä»‹ç»å¦‚ä¸‹ï¼š\n\n\n\n\n\n\n\n\n\nahooksï¼Œå‘éŸ³ [eÉª hÊŠks]ï¼Œæ˜¯ä¸€å¥—é«˜è´¨é‡å¯é çš„ React Hooks åº“ã€‚åœ¨å½“å‰ React é¡¹ç›®ç ”å‘è¿‡ç¨‹ä¸­ï¼Œä¸€å¥—å¥½ç”¨çš„ React Hooks åº“æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œå¸Œæœ› ahooks èƒ½æˆä¸ºæ‚¨çš„é€‰æ‹©ã€‚\nç‰¹ç‚¹å®ƒå…·æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š\n\næ˜“å­¦æ˜“ç”¨ã€‚\n\næ”¯æŒ SSRã€‚\n\nå°†è®¿é—® DOM&#x2F;BOM çš„æ–¹æ³•æ”¾åœ¨ useEffect ä¸­ï¼ˆæœåŠ¡ç«¯ä¸ä¼šæ‰§è¡Œï¼‰ï¼Œé¿å…æœåŠ¡ç«¯æ‰§è¡Œæ—¶æŠ¥é”™ã€‚\næºç ä¸­å¯ä»¥çœ‹åˆ°å¾ˆå¤š isBrowser çš„åˆ¤æ–­ï¼Œä¸»è¦æ˜¯åŒºåˆ†å¼€æµè§ˆå™¨ç¯å¢ƒå’ŒæœåŠ¡å™¨ç¯å¢ƒã€‚\n\n\nå¯¹è¾“å…¥è¾“å‡ºå‡½æ•°åšäº†ç‰¹æ®Šå¤„ç†ï¼Œä¸”é¿å…é—­åŒ…é—®é¢˜ã€‚\n\nè¾“å…¥çš„å‡½æ•°ï¼Œæ°¸è¿œéƒ½æ˜¯ä½¿ç”¨æœ€æ–°çš„ä¸€ä»½ã€‚è¿™ä¸ªæ˜¯é€šè¿‡ useRef è¿›è¡Œå®ç°ã€‚\nè¾“å‡ºå‡½æ•°ï¼Œåœ°å€éƒ½æ˜¯ä¸ä¼šå˜åŒ–çš„ï¼Œè¿™ä¸ªæ˜¯é€šè¿‡ useMemoizedFnï¼ˆahooks å°è£…çš„ï¼‰å®ç°çš„ï¼Œå…¶å®ç°ä¹Ÿæ˜¯é€šè¿‡ useRef å®ç°ã€‚åé¢æˆ‘ä»¬ä¼šæåˆ°ã€‚\n\n\nåŒ…å«å¤§é‡æç‚¼è‡ªä¸šåŠ¡çš„é«˜çº§ Hooksã€‚\n\nåŒ…å«ä¸°å¯Œçš„åŸºç¡€ Hooksã€‚\n\nä½¿ç”¨ TypeScript æ„å»ºï¼Œæä¾›å®Œæ•´çš„ç±»å‹å®šä¹‰æ–‡ä»¶ã€‚å¯ä»¥å­¦ä¹ ä¸€äº› TypeScript çš„æŠ€å·§ã€‚\n\n\nhooks ç§ç±»ahooks åŸºäº UIã€SideEffectã€LifeCycleã€Stateã€DOM ç­‰åˆ†ç±»æä¾›äº†å¸¸ç”¨çš„ Hooksã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š\n\nahooks æ•´ä½“æ¶æ„é¡¹ç›®å¯åŠ¨æˆ‘ä»¬å…ˆä» ahooks ä¸­ folk ä¸€ä»½ï¼Œclone ä¸‹æ¥ã€‚\nyarn run init\nyarn start\nå¤åˆ¶ä»£ç \n\nå¦‚æœä½ èƒ½æˆåŠŸè·‘èµ·æœåŠ¡ï¼Œå°±ä¼šçœ‹åˆ°å’Œå®˜æ–¹æ–‡æ¡£ä¸€æ¨¡ä¸€æ ·çš„é¡µé¢ã€‚\næ•´ä½“ç»“æ„ä»ä»“åº“çš„æ ¹ç›®å½•çš„ package.json ä¸­å¯ä»¥å¾—åˆ°ä»¥ä¸‹ä¿¡æ¯ã€‚\n\næ–‡æ¡£æ˜¯ä½¿ç”¨ dumiã€‚æ˜¯ä¸€æ¬¾ä¸ºç»„ä»¶å¼€å‘åœºæ™¯è€Œç”Ÿçš„æ–‡æ¡£å·¥å…·ã€‚\nè¯¥é¡¹ç›®æ˜¯ä¸€ä¸ª monoRepoã€‚å®ƒçš„é¡¹ç›®ç®¡ç†æ˜¯é€šè¿‡ lerna è¿›è¡Œç®¡ç†çš„ã€‚\nå•å…ƒæµ‹è¯•æ˜¯é€šè¿‡ jest å®ç°ã€‚\n\nå®ƒçš„ç›®å½•ç»“æ„ä¸­ï¼Œå¯ä»¥çœ‹åˆ° docs ä¸­å­˜æ”¾ä»“åº“å…¬å…±æ–‡æ¡£ã€‚packages ä¸­å­˜æ”¾ä¸¤ä¸ªåŒ…ï¼Œhooks å’Œ use-url-stateã€‚æ•´ä½“çš„ç»“æ„è·Ÿ dumi ä¸­ç»™å‡ºçš„ lerna é¡¹ç›®çš„ç»“æ„ç›¸ä¼¼ã€‚å…¶ä¸­æ¯ä¸ªåŒ…ä¸‹é¢çš„æ¯ä¸ªç»„ä»¶éƒ½å¯ä»¥ä¹¦å†™å¯¹åº”çš„æ–‡æ¡£ï¼Œä¸ä¸€æ ·çš„æ˜¯ï¼Œhooks ä¸­æ¯ä¸ªç»„ä»¶å¤šäº† __tests__ æ–‡ä»¶å¤¹ï¼Œè¿™ä¸ªæ˜¯ç”¨æ¥å†™å•å…ƒæµ‹è¯•çš„ã€‚\n\nå¯ä»¥ç”¨ä»¥ä¸‹ä¸€å¼ å›¾ï¼Œå¤§è‡´æ€»ç»“ä¸€ä¸‹ ahooks çš„å·¥ç¨‹æ¶æ„ï¼š\n\nhooksåˆšåˆšä¹Ÿæåˆ°ï¼Œahooks æ˜¯é‡‡ç”¨äº† monoRepo çš„æ–¹å¼ï¼Œæˆ‘ä»¬çš„æºç éƒ½æ˜¯åœ¨ packages ä¸­ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹ hooksã€‚å…ˆçœ‹ packages/hooks/package.jsonã€‚å¦å¤–è¦ä½¿ç”¨ useUrlState è¿™ä¸ª hookï¼Œéœ€è¦ç‹¬ç«‹å®‰è£… @ahooksjs/use-url-stateï¼Œå…¶æºç åœ¨ packages/use-url-state ä¸­ã€‚æˆ‘ç†è§£å®˜æ–¹çš„ç”¨æ„åº”è¯¥æ˜¯è¿™ä¸ªåº“ä¾èµ–äº react-routerï¼Œå¯èƒ½æœ‰ä¸€äº›é¡¹ç›®ä¸éœ€è¦ç”¨åˆ°ï¼ŒæŠŠå®ƒæå‡ºæ¥æœ‰åŠ©äºå‡å°‘åŒ…çš„å¤§å°ã€‚\nnpm i @ahooksjs&#x2F;use-url-state -S\nå¤åˆ¶ä»£ç \n\nå›åˆ° packages/hooksã€‚é‡ç‚¹å…³æ³¨ä¸€ä¸‹ dependencies å’Œ peerDependenciesã€‚å¯ä»¥çœ‹åˆ°å…¶å®å®ƒå†…éƒ¨è¿˜æ˜¯ä½¿ç”¨äº†ä¸€äº›å…¶ä»–çš„å·¥å…·åº“çš„ï¼Œæ¯”å¦‚ lodashï¼ˆä¼°è®¡æ˜¯é¿å…é‡å¤é€ è½®å­ï¼Œä½†æ„Ÿè§‰è¿™æ ·ä¼šå¯¼è‡´åŒ…ä¼šå˜å¤§ï¼‰ã€‚åé¢æˆ‘ä»¬ä¹Ÿä¼šå¯¹è¿™äº›å·¥å…·åº“åšä¸€ä¸ªæ¢ç´¢ã€‚\n&quot;dependencies&quot;: &#123;\n  &quot;@types&#x2F;js-cookie&quot;: &quot;^2.x.x&quot;,\n  &quot;ahooks-v3-count&quot;: &quot;^1.0.0&quot;,\n  &quot;dayjs&quot;: &quot;^1.9.1&quot;,\n  &quot;intersection-observer&quot;: &quot;^0.12.0&quot;,\n  &quot;js-cookie&quot;: &quot;^2.x.x&quot;,\n  &quot;lodash&quot;: &quot;^4.17.21&quot;,\n  &quot;resize-observer-polyfill&quot;: &quot;^1.5.1&quot;,\n  &quot;screenfull&quot;: &quot;^5.0.0&quot;\n&#125;,\n&quot;peerDependencies&quot;: &#123;\n  &quot;react&quot;: &quot;^16.8.0 || ^17.0.0 || ^18.0.0&quot;\n&#125;,\nå¤åˆ¶ä»£ç \n\nå¦å¤–è§£é‡Šä¸‹ peerDependenciesã€‚\n\n\n\n\n\n\n\n\n\npeerDependencies çš„ç›®çš„æ˜¯æç¤ºå®¿ä¸»ç¯å¢ƒå»å®‰è£…æ»¡è¶³æ’ä»¶ peerDependencies æ‰€æŒ‡å®šä¾èµ–çš„åŒ…ï¼Œç„¶ååœ¨æ’ä»¶ import æˆ–è€… require æ‰€ä¾èµ–çš„åŒ…çš„æ—¶å€™ï¼Œæ°¸è¿œéƒ½æ˜¯å¼•ç”¨å®¿ä¸»ç¯å¢ƒç»Ÿä¸€å®‰è£…çš„ npm åŒ…ï¼Œæœ€ç»ˆè§£å†³æ’ä»¶ä¸æ‰€ä¾èµ–åŒ…ä¸ä¸€è‡´çš„é—®é¢˜ã€‚è¿™é‡Œçš„å®¿ä¸»ç¯å¢ƒä¸€èˆ¬æŒ‡çš„å°±æ˜¯æˆ‘ä»¬è‡ªå·±çš„é¡¹ç›®æœ¬èº«äº†ã€‚\nè¿™å¯¹äºå°è£… npm åŒ…éå¸¸é‡è¦ã€‚å½“ä½ å†™çš„åŒ… a é‡Œé¢ä¾èµ–å¦ä¸€ä¸ªåŒ… bï¼Œè€Œè¿™ä¸ªåŒ… b æ˜¯å¼•ç”¨è¿™ä¸ªåŒ… a çš„ä¸šåŠ¡çš„å¸¸ç”¨çš„åŒ…çš„æ—¶å€™ï¼Œå»ºè®®å†™åœ¨ peerDependencies é‡Œï¼Œé¿å…é‡å¤ä¸‹è½½&#x2F;å¤šä¸ªç‰ˆæœ¬å…±å­˜ã€‚\n","slug":"ahooks æ•´ä½“æ¶æ„æºç è§£æ","date":"2022-01-13T14:06:14.000Z","categories_index":"","tags_index":"","author_index":"Beastrong"},{"id":"045012ff9de07809836ee76fe6879635","title":"å¦‚ä½•ä¼˜é›…åœ°åœ¨ React ä¸­ä½¿ç”¨TypeScript","content":"ä¸€ã€ç»„ä»¶å£°æ˜åœ¨Reactä¸­ï¼Œç»„ä»¶çš„å£°æ˜æ–¹å¼æœ‰ä¸¤ç§ï¼šå‡½æ•°ç»„ä»¶å’Œç±»ç»„ä»¶ï¼Œ æ¥çœ‹çœ‹è¿™ä¸¤ç§ç±»å‹çš„ç»„ä»¶å£°æ˜æ—¶æ˜¯å¦‚ä½•å®šä¹‰TSç±»å‹çš„ã€‚\n1. ç±»ç»„ä»¶ç±»ç»„ä»¶çš„å®šä¹‰å½¢å¼æœ‰ä¸¤ç§ï¼šReact.Component&lt;P, S=&#123;&#125;&gt; å’Œ React.PureComponent&lt;P, S=&#123;&#125; SS=&#123;&#125;&gt;ï¼Œå®ƒä»¬éƒ½æ˜¯æ³›å‹æ¥å£ï¼Œæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯propsç±»å‹çš„å®šä¹‰ï¼Œç¬¬äºŒä¸ªæ˜¯stateç±»å‹çš„å®šä¹‰ï¼Œè¿™ä¸¤ä¸ªå‚æ•°éƒ½ä¸æ˜¯å¿…é¡»çš„ï¼Œæ²¡æœ‰æ—¶å¯ä»¥çœç•¥ï¼š\ninterface IProps &#123;\n  name: string;\n&#125;\n\ninterface IState &#123;\n  count: number;\n&#125;\n\nclass App extends React.Component&lt;IProps, IState&gt; &#123;\n  state &#x3D; &#123;\n    count: 0\n  &#125;;\n\n  render() &#123;\n    return (\n      &lt;div&gt;\n        &#123;this.state.count&#125;\n        &#123;this.props.name&#125;\n      &lt;&#x2F;div&gt;\n    );\n  &#125;\n&#125;\n\nexport default App;\nå¤åˆ¶ä»£ç \n\nReact.PureComponent&lt;P, S=&#123;&#125; SS=&#123;&#125;&gt; ä¹Ÿæ˜¯å·®ä¸å¤šçš„ï¼š\nclass App extends React.PureComponent&lt;IProps, IState&gt; &#123;&#125;\nå¤åˆ¶ä»£ç \n\nReact.PureComponentæ˜¯æœ‰ç¬¬ä¸‰ä¸ªå‚æ•°çš„ï¼Œå®ƒè¡¨ç¤ºgetSnapshotBeforeUpdateçš„è¿”å›å€¼ã€‚\né‚£PureComponentå’ŒComponent çš„åŒºåˆ«æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå®ƒä»¬çš„ä¸»è¦åŒºåˆ«æ˜¯PureComponentä¸­çš„shouldComponentUpdate æ˜¯ç”±è‡ªèº«è¿›è¡Œå¤„ç†çš„ï¼Œä¸éœ€è¦æˆ‘ä»¬è‡ªå·±å¤„ç†ï¼Œæ‰€ä»¥PureComponentå¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šæå‡æ€§èƒ½ã€‚\næœ‰æ—¶å€™å¯èƒ½ä¼šè§åˆ°è¿™ç§å†™æ³•ï¼Œå®é™…ä¸Šå’Œä¸Šé¢çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼š\nimport React, &#123;PureComponent, Component&#125; from &quot;react&quot;;\n\nclass App extends PureComponent&lt;IProps, IState&gt; &#123;&#125;\n\nclass App extends Component&lt;IProps, IState&gt; &#123;&#125;\nå¤åˆ¶ä»£ç \n\né‚£å¦‚æœå®šä¹‰æ—¶å€™æˆ‘ä»¬ä¸çŸ¥é“ç»„ä»¶çš„propsçš„ç±»å‹ï¼Œåªæœ‰åœ¨è°ƒç”¨æ—¶æ‰çŸ¥é“ç»„ä»¶ç±»å‹ï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿè¿™æ—¶æ³›å‹å°±å‘æŒ¥ä½œç”¨äº†ï¼š\n&#x2F;&#x2F; å®šä¹‰ç»„ä»¶\nclass MyComponent&lt;P&gt; extends React.Component&lt;P&gt; &#123;\n  internalProp: P;\n  constructor(props: P) &#123;\n    super(props);\n    this.internalProp &#x3D; props;\n  &#125;\n  render() &#123;\n    return (\n    \t &lt;span&gt;hello world&lt;&#x2F;span&gt;\n    );\n  &#125;\n&#125;\n\n&#x2F;&#x2F; ä½¿ç”¨ç»„ä»¶\ntype IProps &#x3D; &#123; name: string; age: number; &#125;;\n\n&lt;MyComponent&lt;IProps&gt; name&#x3D;&quot;React&quot; age&#x3D;&#123;18&#125; &#x2F;&gt;;          &#x2F;&#x2F; Success\n&lt;MyComponent&lt;IProps&gt; name&#x3D;&quot;TypeScript&quot; age&#x3D;&quot;hello&quot; &#x2F;&gt;;  &#x2F;&#x2F; Error\nå¤åˆ¶ä»£ç \n\n2. å‡½æ•°ç»„ä»¶é€šå¸¸æƒ…å†µä¸‹ï¼Œå‡½æ•°ç»„ä»¶æˆ‘æ˜¯è¿™æ ·å†™çš„ï¼š\ninterface IProps &#123;\n  name: string\n&#125;\n\nconst App &#x3D; (props: IProps) &#x3D;&gt; &#123;\n  const &#123;name&#125; &#x3D; props;\n\n  return (\n    &lt;div className&#x3D;&quot;App&quot;&gt;\n      &lt;h1&gt;hello world&lt;&#x2F;h1&gt;\n      &lt;h2&gt;&#123;name&#125;&lt;&#x2F;h2&gt;\n    &lt;&#x2F;div&gt;\n  );\n&#125;\n\nexport default App;\nå¤åˆ¶ä»£ç \n\né™¤æ­¤ä¹‹å¤–ï¼Œå‡½æ•°ç±»å‹è¿˜å¯ä»¥ä½¿ç”¨React.FunctionComponent&lt;P=&#123;&#125;&gt;æ¥å®šä¹‰ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ç®€å†™React.FC&lt;P=&#123;&#125;&gt;ï¼Œä¸¤è€…æ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚å®ƒæ˜¯ä¸€ä¸ªæ³›å‹æ¥å£ï¼Œå¯ä»¥æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œå‚æ•°è¡¨ç¤ºpropsçš„ç±»å‹ï¼Œè¿™ä¸ªå‚æ•°ä¸æ˜¯å¿…é¡»çš„ã€‚å®ƒä»¬å°±ç›¸å½“äºè¿™æ ·ï¼š\ntype React.FC&lt;P &#x3D; &#123;&#125;&gt; &#x3D; React.FunctionComponent&lt;P&gt;\nå¤åˆ¶ä»£ç \n\næœ€ç»ˆçš„å®šä¹‰å½¢å¼å¦‚ä¸‹ï¼š\ninterface IProps &#123;\n  name: string\n&#125;\n\nconst App: React.FC&lt;IProps&gt; &#x3D; (props) &#x3D;&gt; &#123;\n  const &#123;name&#125; &#x3D; props;\n  return (\n    &lt;div className&#x3D;&quot;App&quot;&gt;\n      &lt;h1&gt;hello world&lt;&#x2F;h1&gt;\n      &lt;h2&gt;&#123;name&#125;&lt;&#x2F;h2&gt;\n    &lt;&#x2F;div&gt;\n  );\n&#125;\n\nexport default App;\nå¤åˆ¶ä»£ç \n\nå½“ä½¿ç”¨è¿™ç§å½¢å¼æ¥å®šä¹‰å‡½æ•°ç»„ä»¶æ—¶ï¼Œpropsä¸­é»˜è®¤ä¼šå¸¦æœ‰childrenå±æ€§ï¼Œå®ƒè¡¨ç¤ºè¯¥ç»„ä»¶åœ¨è°ƒç”¨æ—¶ï¼Œå…¶å†…éƒ¨çš„å…ƒç´ ï¼Œæ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼Œé¦–å…ˆå®šä¹‰ä¸€ä¸ªç»„ä»¶ï¼Œç»„ä»¶ä¸­å¼•å…¥äº†Child1å’ŒChild2ç»„ä»¶ï¼š\nimport Child1 from &quot;.&#x2F;child1&quot;;\nimport Child2 from &quot;.&#x2F;child2&quot;;\n\ninterface IProps &#123;\n  name: string;\n&#125;\nconst App: React.FC&lt;IProps&gt; &#x3D; (props) &#x3D;&gt; &#123;\n  const &#123; name &#125; &#x3D; props;\n  return (\n    &lt;Child1 name&#x3D;&#123;name&#125;&gt;\n      &lt;Child2 name&#x3D;&#123;name&#125; &#x2F;&gt;\n      TypeScript\n    &lt;&#x2F;Child1&gt;\n  );\n&#125;;\n\nexport default App;\nå¤åˆ¶ä»£ç \n\nChild1ç»„ä»¶ç»“æ„å¦‚ä¸‹ï¼š\ninterface IProps &#123;\n  name: string;\n&#125;\nconst Child1: React.FC&lt;IProps&gt; &#x3D; (props) &#x3D;&gt; &#123;\n  const &#123; name, children &#125; &#x3D; props;\n  console.log(children);\n  return (\n    &lt;div className&#x3D;&quot;App&quot;&gt;\n      &lt;h1&gt;hello child1&lt;&#x2F;h1&gt;\n      &lt;h2&gt;&#123;name&#125;&lt;&#x2F;h2&gt;\n    &lt;&#x2F;div&gt;\n  );\n&#125;;\n\nexport default Child1;\nå¤åˆ¶ä»£ç \n\næˆ‘ä»¬åœ¨Child1ç»„ä»¶ä¸­æ‰“å°äº†childrenå±æ€§ï¼Œå®ƒçš„å€¼æ˜¯ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«Child2å¯¹è±¡å’Œåé¢çš„æ–‡æœ¬ï¼š\n\nä½¿ç”¨ React.FC å£°æ˜å‡½æ•°ç»„ä»¶å’Œæ™®é€šå£°æ˜çš„åŒºåˆ«å¦‚ä¸‹ï¼š\n\nReact.FC æ˜¾å¼åœ°å®šä¹‰äº†è¿”å›ç±»å‹ï¼Œå…¶ä»–æ–¹å¼æ˜¯éšå¼æ¨å¯¼çš„ï¼›\nReact.FC å¯¹é™æ€å±æ€§ï¼šdisplayNameã€propTypesã€defaultProps æä¾›äº†ç±»å‹æ£€æŸ¥å’Œè‡ªåŠ¨è¡¥å…¨ï¼›\nReact.FC ä¸º children æä¾›äº†éšå¼çš„ç±»å‹ï¼ˆReactElement | nullï¼‰ã€‚\n\né‚£å¦‚æœæˆ‘ä»¬åœ¨å®šä¹‰ç»„ä»¶æ—¶ä¸çŸ¥é“propsçš„ç±»å‹ï¼Œåªæœ‰è°ƒç”¨æ—¶æ‰çŸ¥é“ï¼Œé‚£å°±è¿˜æ˜¯ç”¨æ³›å‹æ¥å®šä¹‰propsçš„ç±»å‹ã€‚å¯¹äºä½¿ç”¨functionå®šä¹‰çš„å‡½æ•°ç»„ä»¶ï¼š\n&#x2F;&#x2F; å®šä¹‰ç»„ä»¶\nfunction MyComponent&lt;P&gt;(props: P) &#123;\n  return (\n  \t&lt;span&gt;\n    \t&#123;props&#125;\n    &lt;&#x2F;span&gt;\n  );\n&#125;\n\n&#x2F;&#x2F; ä½¿ç”¨ç»„ä»¶\ntype IProps &#x3D; &#123; name: string; age: number; &#125;;\n\n&lt;MyComponent&lt;IProps&gt; name&#x3D;&quot;React&quot; age&#x3D;&#123;18&#125; &#x2F;&gt;;          &#x2F;&#x2F; Success\n&lt;MyComponent&lt;IProps&gt; name&#x3D;&quot;TypeScript&quot; age&#x3D;&quot;hello&quot; &#x2F;&gt;;  &#x2F;&#x2F; Error\nå¤åˆ¶ä»£ç \n\nå¦‚æœä½¿ç”¨ç®­å¤´å‡½æ•°å®šä¹‰çš„å‡½æ•°ç»„ä»¶ï¼Œç›´æ¥è¿™æ ·è°ƒç”¨æ—¶é”™è¯¯çš„ï¼š\nconst MyComponent &#x3D; &lt;P&gt;(props: P) &#123;\n  return (\n  \t&lt;span&gt;\n    \t&#123;props&#125;\n    &lt;&#x2F;span&gt;\n  );\n&#125;\nå¤åˆ¶ä»£ç \n\nå¿…é¡»ä½¿ç”¨extendså…³é”®å­—æ¥å®šä¹‰æ³›å‹å‚æ•°æ‰èƒ½è¢«æˆåŠŸè§£æï¼š\nconst MyComponent &#x3D; &lt;P extends any&gt;(props: P) &#123;\n  return (\n  \t&lt;span&gt;\n    \t&#123;props&#125;\n    &lt;&#x2F;span&gt;\n  );\n&#125;\nå¤åˆ¶ä»£ç \n\näºŒã€Reactå†…ç½®ç±»å‹1. JSX.Elementå…ˆæ¥çœ‹çœ‹JSX.Elementç±»å‹çš„å£°æ˜ï¼š\ndeclare global &#123;\n  namespace JSX &#123;\n    interface Element extends React.ReactElement&lt;any, any&gt; &#123; &#125;\n  &#125;\n&#125;\nå¤åˆ¶ä»£ç \n\nå¯ä»¥çœ‹åˆ°ï¼ŒJSX.Elementæ˜¯ReactElementçš„å­ç±»å‹ï¼Œå®ƒæ²¡æœ‰å¢åŠ å±æ€§ï¼Œä¸¤è€…æ˜¯ç­‰ä»·çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸¤ç§ç±»å‹çš„å˜é‡å¯ä»¥ç›¸äº’èµ‹å€¼ã€‚ â€‹\nJSX.Element å¯ä»¥é€šè¿‡æ‰§è¡Œ React.createElement æˆ–æ˜¯è½¬è¯‘ JSX è·å¾—ï¼š\nconst jsx &#x3D; &lt;div&gt;hello&lt;&#x2F;div&gt;\nconst ele &#x3D; React.createElement(&quot;div&quot;, null, &quot;hello&quot;);\nå¤åˆ¶ä»£ç \n\n2. React.ReactElementReact çš„ç±»å‹å£°æ˜æ–‡ä»¶ä¸­æä¾›äº† React.ReactElementï¼œTï¼ï¼Œå®ƒå¯ä»¥è®©æˆ‘ä»¬é€šè¿‡ä¼ å…¥ï¼œT&#x2F;ï¼æ¥æ³¨è§£ç±»ç»„ä»¶çš„å®ä¾‹åŒ–ï¼Œå®ƒåœ¨å£°æ˜æ–‡ä»¶ä¸­çš„å®šä¹‰å¦‚ä¸‹ï¼š\ninterface ReactElement&lt;P &#x3D; any, T extends string | JSXElementConstructor&lt;any&gt; &#x3D; string | JSXElementConstructor&lt;any&gt;&gt; &#123;\n   type: T;\n   props: P;\n   key: Key | null;\n&#125;\nå¤åˆ¶ä»£ç \n\nReactElementæ˜¯ä¸€ä¸ªæ¥å£ï¼ŒåŒ…å«type,props,keyä¸‰ä¸ªå±æ€§å€¼ã€‚è¯¥ç±»å‹çš„å˜é‡å€¼åªèƒ½æ˜¯ä¸¤ç§ï¼š null å’Œ ReactElementå®ä¾‹ã€‚ â€‹\né€šå¸¸æƒ…å†µä¸‹ï¼Œå‡½æ•°ç»„ä»¶è¿”å›ReactElementï¼ˆJXS.Elementï¼‰çš„å€¼ã€‚\n3. React.ReactNodeReactNodeç±»å‹çš„å£°æ˜å¦‚ä¸‹ï¼š\ntype ReactText &#x3D; string | number;\ntype ReactChild &#x3D; ReactElement | ReactText;\n\ninterface ReactNodeArray extends Array&lt;ReactNode&gt; &#123;&#125;\ntype ReactFragment &#x3D; &#123;&#125; | ReactNodeArray;\ntype ReactNode &#x3D; ReactChild | ReactFragment | ReactPortal | boolean | null | undefined;\nå¤åˆ¶ä»£ç \n\nå¯ä»¥çœ‹åˆ°ï¼ŒReactNodeæ˜¯ä¸€ä¸ªè”åˆç±»å‹ï¼Œå®ƒå¯ä»¥æ˜¯stringã€numberã€ReactElementã€nullã€booleanã€ReactNodeArrayã€‚ç”±æ­¤å¯çŸ¥ã€‚ReactElementç±»å‹çš„å˜é‡å¯ä»¥ç›´æ¥èµ‹å€¼ç»™ReactNodeç±»å‹çš„å˜é‡ï¼Œä½†åè¿‡æ¥æ˜¯ä¸è¡Œçš„ã€‚\nç±»ç»„ä»¶çš„ render æˆå‘˜å‡½æ•°ä¼šè¿”å› ReactNode ç±»å‹çš„å€¼ï¼š\nclass MyComponent extends React.Component &#123;\n\trender() &#123;\n    \treturn &lt;div&gt;hello world&lt;&#x2F;div&gt;\n    &#125;\n&#125;\n&#x2F;&#x2F; æ­£ç¡®\nconst component: React.ReactNode&lt;MyComponent&gt; &#x3D; &lt;MyComponent &#x2F;&gt;;\n&#x2F;&#x2F; é”™è¯¯\nconst component: React.ReactNode&lt;MyComponent&gt; &#x3D; &lt;OtherComponent &#x2F;&gt;;\nå¤åˆ¶ä»£ç \n\nä¸Šé¢çš„ä»£ç ä¸­ï¼Œç»™componentå˜é‡è®¾ç½®äº†ç±»å‹æ˜¯Mycomponentç±»å‹çš„reactå®ä¾‹ï¼Œè¿™æ—¶åªèƒ½ç»™å…¶èµ‹å€¼å…¶ä¸ºMyComponentçš„å®ä¾‹ç»„ä»¶ã€‚ â€‹\né€šå¸¸æƒ…å†µä¸‹ï¼Œç±»ç»„ä»¶é€šè¿‡ render() è¿”å› ReactNodeçš„å€¼ã€‚\n4. CSSPropertieså…ˆæ¥çœ‹çœ‹Reactçš„å£°æ˜æ–‡ä»¶ä¸­å¯¹CSSProperties çš„å®šä¹‰ï¼š\nexport interface CSSProperties extends CSS.Properties&lt;string | number&gt; &#123;\n  &#x2F;**\n   * The index signature was removed to enable closed typing for style\n   * using CSSType. You&#39;re able to use type assertion or module augmentation\n   * to add properties or an index signature of your own.\n   *\n   * For examples and more information, visit:\n   * https:&#x2F;&#x2F;github.com&#x2F;frenic&#x2F;csstype#what-should-i-do-when-i-get-type-errors\n   *&#x2F;\n&#125;\nå¤åˆ¶ä»£ç \n\nReact.CSSPropertiesæ˜¯ReactåŸºäºTypeScriptå®šä¹‰çš„CSSå±æ€§ç±»å‹ï¼Œå¯ä»¥å°†ä¸€ä¸ªæ–¹æ³•çš„è¿”å›å€¼è®¾ç½®ä¸ºè¯¥ç±»å‹ï¼š\nimport * as React from &quot;react&quot;;\n\nconst classNames &#x3D; require(&quot;.&#x2F;sidebar.css&quot;);\n\ninterface Props &#123;\n  isVisible: boolean;\n&#125;\n\nconst divStyle &#x3D; (props: Props): React.CSSProperties &#x3D;&gt; (&#123;\n  width: props.isVisible ? &quot;23rem&quot; : &quot;0rem&quot;\n&#125;);\n\nexport const SidebarComponent: React.StatelessComponent&lt;Props&gt; &#x3D; props &#x3D;&gt; (\n  &lt;div id&#x3D;&quot;mySidenav&quot; className&#x3D;&#123;classNames.sidenav&#125; style&#x3D;&#123;divStyle(props)&#125;&gt;\n    &#123;props.children&#125;\n  &lt;&#x2F;div&gt;\n);\nå¤åˆ¶ä»£ç \n\nè¿™é‡ŒdivStyleç»„ä»¶çš„è¿”å›å€¼å°±æ˜¯React.CSSPropertiesç±»å‹ã€‚\næˆ‘ä»¬è¿˜å¯ä»¥å®šä¹‰ä¸€ä¸ªCSSPropertiesç±»å‹çš„å˜é‡ï¼š\nconst divStyle: React.CSSProperties &#x3D; &#123;\n    width: &quot;11rem&quot;,\n    height: &quot;7rem&quot;,\n    backgroundColor: &#96;rgb($&#123;props.color.red&#125;,$&#123;props.color.green&#125;, $&#123;props.color.blue&#125;)&#96;\n&#125;;\nå¤åˆ¶ä»£ç \n\nè¿™ä¸ªå˜é‡å¯ä»¥åœ¨HTMLæ ‡ç­¾çš„styleå±æ€§ä¸Šä½¿ç”¨ï¼š\n&lt;div style&#x3D;&#123;divStyle&#125; &#x2F;&gt;\nå¤åˆ¶ä»£ç \n\nåœ¨Reactçš„ç±»å‹å£°æ˜æ–‡ä»¶ä¸­ï¼Œstyleå±æ€§çš„ç±»å‹å¦‚ä¸‹ï¼š\nstyle?: CSSProperties | undefined;\nå¤åˆ¶ä»£ç \n\nä¸‰ã€React Hooks1. useStateé»˜è®¤æƒ…å†µä¸‹ï¼ŒReactä¼šä¸ºæ ¹æ®è®¾ç½®çš„stateçš„åˆå§‹å€¼æ¥è‡ªåŠ¨æ¨å¯¼stateä»¥åŠæ›´æ–°å‡½æ•°çš„ç±»å‹ï¼š\n\nå¦‚æœå·²çŸ¥state çš„ç±»å‹ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å½¢å¼æ¥è‡ªå®šä¹‰stateçš„ç±»å‹ï¼š\nconst [count, setCount] &#x3D; useState&lt;number&gt;(1)\nå¤åˆ¶ä»£ç \n\nå¦‚æœåˆå§‹å€¼ä¸ºnullï¼Œéœ€è¦æ˜¾å¼åœ°å£°æ˜ state çš„ç±»å‹ï¼š\nconst [count, setCount] &#x3D; useState&lt;number | null&gt;(null); \nå¤åˆ¶ä»£ç \n\nå¦‚æœstateæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæƒ³è¦åˆå§‹åŒ–ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨æ–­è¨€æ¥å¤„ç†ï¼š\nconst [user, setUser] &#x3D; React.useState&lt;IUser&gt;(&#123;&#125; as IUser);\nå¤åˆ¶ä»£ç \n\nå®é™…ä¸Šï¼Œè¿™é‡Œå°†ç©ºå¯¹è±¡{}æ–­è¨€ä¸ºIUseræ¥å£å°±æ˜¯æ¬ºéª—äº†TypeScriptçš„ç¼–è¯‘å™¨ï¼Œç”±äºåé¢çš„ä»£ç å¯èƒ½ä¼šä¾èµ–è¿™ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥åº”è¯¥åœ¨ä½¿ç”¨å‰åŠæ—¶åˆå§‹åŒ– user çš„å€¼ï¼Œå¦åˆ™å°±ä¼šæŠ¥é”™ã€‚\nä¸‹é¢æ˜¯å£°æ˜æ–‡ä»¶ä¸­ useState çš„å®šä¹‰ï¼š\nfunction useState&lt;S&gt;(initialState: S | (() &#x3D;&gt; S)): [S, Dispatch&lt;SetStateAction&lt;S&gt;&gt;];\n&#x2F;&#x2F; convenience overload when first argument is omitted\n\t&#x2F;**\n\t * Returns a stateful value, and a function to update it.\n   *\n   * @version 16.8.0\n   * @see https:&#x2F;&#x2F;reactjs.org&#x2F;docs&#x2F;hooks-reference.html#usestate\n   *&#x2F;\n    \nfunction useState&lt;S &#x3D; undefined&gt;(): [S | undefined, Dispatch&lt;SetStateAction&lt;S | undefined&gt;&gt;];\n  &#x2F;**\n   * An alternative to &#96;useState&#96;.\n   *\n   * &#96;useReducer&#96; is usually preferable to &#96;useState&#96; when you have complex state logic that involves\n   * multiple sub-values. It also lets you optimize performance for components that trigger deep\n   * updates because you can pass &#96;dispatch&#96; down instead of callbacks.\n   *\n   * @version 16.8.0\n   * @see https:&#x2F;&#x2F;reactjs.org&#x2F;docs&#x2F;hooks-reference.html#usereducer\n   *&#x2F;\nå¤åˆ¶ä»£ç \n\nå¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œå®šä¹‰ä¸¤ç§å½¢å¼ï¼Œåˆ†åˆ«æ˜¯æœ‰åˆå§‹å€¼å’Œæ²¡æœ‰åˆå§‹å€¼çš„å½¢å¼ã€‚\n2. useEffectuseEffectçš„ä¸»è¦ä½œç”¨å°±æ˜¯å¤„ç†å‰¯ä½œç”¨ï¼Œå®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¡¨ç¤ºè¦æ¸…é™¤å‰¯ä½œç”¨çš„æ“ä½œï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ç»„å€¼ï¼Œå½“è¿™ç»„å€¼æ”¹å˜æ—¶ï¼Œç¬¬ä¸€ä¸ªå‚æ•°çš„å‡½æ•°æ‰ä¼šæ‰§è¡Œï¼Œè¿™è®©æˆ‘ä»¬å¯ä»¥æ§åˆ¶ä½•æ—¶è¿è¡Œå‡½æ•°æ¥å¤„ç†å‰¯ä½œç”¨ï¼š\nuseEffect(\n  () &#x3D;&gt; &#123;\n    const subscription &#x3D; props.source.subscribe();\n    return () &#x3D;&gt; &#123;\n      subscription.unsubscribe();\n    &#125;;\n  &#125;,\n  [props.source]\n);\nå¤åˆ¶ä»£ç \n\nå½“å‡½æ•°çš„è¿”å›å€¼ä¸æ˜¯å‡½æ•°æˆ–è€…effectå‡½æ•°ä¸­æœªå®šä¹‰çš„å†…å®¹æ—¶ï¼Œå¦‚ä¸‹ï¼š\nuseEffect(\n    () &#x3D;&gt; &#123;\n      subscribe();\n      return null; \n    &#125;\n);\nå¤åˆ¶ä»£ç \n\nTypeScriptå°±ä¼šæŠ¥é”™ï¼š\n\næ¥çœ‹çœ‹useEffectåœ¨ç±»å‹å£°æ˜æ–‡ä»¶ä¸­çš„å®šä¹‰ï¼š\n&#x2F;&#x2F; Destructors are only allowed to return void.\ntype Destructor &#x3D; () &#x3D;&gt; void | &#123; [UNDEFINED_VOID_ONLY]: never &#125;;\n\n&#x2F;&#x2F; NOTE: callbacks are _only_ allowed to return either void, or a destructor.\ntype EffectCallback &#x3D; () &#x3D;&gt; (void | Destructor);\n\n&#x2F;&#x2F; TODO (TypeScript 3.0): ReadonlyArray&lt;unknown&gt;\ntype DependencyList &#x3D; ReadonlyArray&lt;any&gt;;\n\nfunction useEffect(effect: EffectCallback, deps?: DependencyList): void;\n&#x2F;&#x2F; NOTE: this does not accept strings, but this will have to be fixed by removing strings from type Ref&lt;T&gt;\n  &#x2F;**\n   * &#96;useImperativeHandle&#96; customizes the instance value that is exposed to parent components when using\n   * &#96;ref&#96;. As always, imperative code using refs should be avoided in most cases.\n   *\n   * &#96;useImperativeHandle&#96; should be used with &#96;React.forwardRef&#96;.\n   *\n   * @version 16.8.0\n   * @see https:&#x2F;&#x2F;reactjs.org&#x2F;docs&#x2F;hooks-reference.html#useimperativehandle\n   *&#x2F;\nå¤åˆ¶ä»£ç \n\nå¯ä»¥çœ‹åˆ°ï¼ŒuseEffectçš„ç¬¬ä¸€ä¸ªå‚æ•°åªå…è®¸è¿”å›ä¸€ä¸ªå‡½æ•°ã€‚\n3. useRefå½“ä½¿ç”¨ useRef æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—®ä¸€ä¸ªå¯å˜çš„å¼•ç”¨å¯¹è±¡ã€‚å¯ä»¥å°†åˆå§‹å€¼ä¼ é€’ç»™ useRefï¼Œå®ƒç”¨äºåˆå§‹åŒ–å¯å˜ ref å¯¹è±¡å…¬å¼€çš„å½“å‰å±æ€§ã€‚å½“æˆ‘ä»¬ä½¿ç”¨useRefæ—¶ï¼Œéœ€è¦ç»™å…¶æŒ‡å®šç±»å‹ï¼š\nconst nameInput &#x3D; React.useRef&lt;HTMLInputElement&gt;(null)\nå¤åˆ¶ä»£ç \n\nè¿™é‡Œç»™å®ä¾‹çš„ç±»å‹æŒ‡å®šä¸ºäº†inputè¾“å…¥æ¡†ç±»å‹ã€‚ â€‹\nå½“useRefçš„åˆå§‹å€¼ä¸ºnullæ—¶ï¼Œæœ‰ä¸¤ç§åˆ›å»ºçš„å½¢å¼ï¼Œç¬¬ä¸€ç§ï¼š\nconst nameInput &#x3D; React.useRef&lt;HTMLInputElement&gt;(null)\nnameInput.current.innerText &#x3D; &quot;hello world&quot;;\nå¤åˆ¶ä»£ç \n\nè¿™ç§å½¢å¼ä¸‹ï¼Œref1.currentæ˜¯åªè¯»çš„ï¼ˆread-onlyï¼‰ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬å°†å®ƒçš„innerTextå±æ€§é‡æ–°èµ‹å€¼æ—¶ä¼šæŠ¥ä»¥ä¸‹é”™è¯¯ï¼š\nCannot assign to &#39;current&#39; because it is a read-only property.\nå¤åˆ¶ä»£ç \n\né‚£è¯¥æ€ä¹ˆå°†currentå±æ€§å˜ä¸ºåŠ¨æ€å¯å˜å¾—çš„ï¼Œå…ˆæ¥çœ‹çœ‹ç±»å‹å£°æ˜æ–‡ä»¶ä¸­ useRef æ˜¯å¦‚ä½•å®šä¹‰çš„ï¼š\n function useRef&lt;T&gt;(initialValue: T): MutableRefObject&lt;T&gt;;\n &#x2F;&#x2F; convenience overload for refs given as a ref prop as they typically start with a null value\n &#x2F;**\n   * &#96;useRef&#96; returns a mutable ref object whose &#96;.current&#96; property is initialized to the passed argument\n   * (&#96;initialValue&#96;). The returned object will persist for the full lifetime of the component.\n   *\n   * Note that &#96;useRef()&#96; is useful for more than the &#96;ref&#96; attribute. Itâ€™s handy for keeping any mutable\n   * value around similar to how youâ€™d use instance fields in classes.\n   *\n   * Usage note: if you need the result of useRef to be directly mutable, include &#96;| null&#96; in the type\n   * of the generic argument.\n   *\n   * @version 16.8.0\n   * @see https:&#x2F;&#x2F;reactjs.org&#x2F;docs&#x2F;hooks-reference.html#useref\n   *&#x2F;\nå¤åˆ¶ä»£ç \n\nè¿™æ®µä»£ç çš„ç¬¬åè¡Œçš„å‘Šè¯‰æˆ‘ä»¬ï¼Œå¦‚æœéœ€è¦useRefçš„ç›´æ¥å¯å˜ï¼Œå°±éœ€è¦åœ¨æ³›å‹å‚æ•°ä¸­åŒ…å«â€™| nullâ€™ï¼Œæ‰€ä»¥è¿™å°±æ˜¯å½“åˆå§‹å€¼ä¸ºnullçš„ç¬¬äºŒç§å®šä¹‰å½¢å¼ï¼š\nconst nameInput &#x3D; React.useRef&lt;HTMLInputElement | null&gt;(null);\nå¤åˆ¶ä»£ç \n\nè¿™ç§å½¢å¼ä¸‹ï¼ŒnameInput.currentå°±æ˜¯å¯å†™çš„ã€‚ä¸è¿‡ä¸¤ç§ç±»å‹åœ¨ä½¿ç”¨æ—¶éƒ½éœ€è¦åšç±»å‹æ£€æŸ¥ï¼š\nnameInput.current?.innerText &#x3D; &quot;hello world&quot;;\nå¤åˆ¶ä»£ç \n\né‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œä¸ºä»€ä¹ˆç¬¬ä¸€ç§å†™æ³•åœ¨æ²¡æœ‰æ“ä½œcurrentæ—¶æ²¡æœ‰æŠ¥é”™å‘¢ï¼Ÿå› ä¸ºuseRefåœ¨ç±»å‹å®šä¹‰å¼å…·æœ‰å¤šä¸ªé‡è½½å£°æ˜ï¼Œç¬¬ä¸€ç§æ–¹å¼å°±æ˜¯æ‰§è¡Œçš„ä»¥ä¸‹å‡½æ•°é‡è½½ï¼š\nfunction useRef&lt;T&gt;(initialValue: T|null): RefObject&lt;T&gt;;\n&#x2F;&#x2F; convenience overload for potentially undefined initialValue &#x2F; call with 0 arguments\n&#x2F;&#x2F; has a default to stop it from defaulting to &#123;&#125; instead\n&#x2F;**\n  * &#96;useRef&#96; returns a mutable ref object whose &#96;.current&#96; property is initialized to the passed argument\n  * (&#96;initialValue&#96;). The returned object will persist for the full lifetime of the component.\n  *\n  * Note that &#96;useRef()&#96; is useful for more than the &#96;ref&#96; attribute. Itâ€™s handy for keeping any mutable\n  * value around similar to how youâ€™d use instance fields in classes.\n  *\n  * @version 16.8.0\n  * @see https:&#x2F;&#x2F;reactjs.org&#x2F;docs&#x2F;hooks-reference.html#useref\n  *&#x2F;\nå¤åˆ¶ä»£ç \n\nä»ä¸ŠuseRefçš„å£°æ˜ä¸­å¯ä»¥çœ‹åˆ°ï¼Œfunction useRefçš„è¿”å›å€¼ç±»å‹åŒ–æ˜¯MutableRefObjectï¼Œè¿™é‡Œé¢çš„Tå°±æ˜¯å‚æ•°çš„ç±»å‹Tï¼Œæ‰€ä»¥æœ€ç»ˆnameInput çš„ç±»å‹å°±æ˜¯React.MutableRefObjectã€‚ â€‹\næ³¨æ„ï¼Œä¸Šé¢ç”¨åˆ°äº†HTMLInputElementç±»å‹ï¼Œè¿™æ˜¯ä¸€ä¸ªæ ‡ç­¾ç±»å‹ï¼Œè¿™ä¸ªæ“ä½œå°±æ˜¯ç”¨æ¥è®¿é—®DOMå…ƒç´ çš„ã€‚\n4. useCallbackå…ˆæ¥çœ‹çœ‹ç±»å‹å£°æ˜æ–‡ä»¶ä¸­å¯¹useCallbackçš„å®šä¹‰ï¼š\n function useCallback&lt;T extends (...args: any[]) &#x3D;&gt; any&gt;(callback: T, deps: DependencyList): T;\n &#x2F;**\n  * &#96;useMemo&#96; will only recompute the memoized value when one of the &#96;deps&#96; has changed.\n  *\n  * Usage note: if calling &#96;useMemo&#96; with a referentially stable function, also give it as the input in\n  * the second argument.\n  *\n  * &#96;&#96;&#96;ts\n  * function expensive () &#123; ... &#125;\n  *\n  * function Component () &#123;\n  *   const expensiveResult &#x3D; useMemo(expensive, [expensive])\n  *   return ...\n  * &#125;\n  * &#96;&#96;&#96;\n  *\n  * @version 16.8.0\n  * @see https:&#x2F;&#x2F;reactjs.org&#x2F;docs&#x2F;hooks-reference.html#usememo\n  *&#x2F;\nå¤åˆ¶ä»£ç \n\nuseCallbackæ¥æ”¶ä¸€ä¸ªå›è°ƒå‡½æ•°å’Œä¸€ä¸ªä¾èµ–æ•°ç»„ï¼Œåªæœ‰å½“ä¾èµ–æ•°ç»„ä¸­çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶æ‰ä¼šé‡æ–°æ‰§è¡Œå›è°ƒå‡½æ•°ã€‚æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š\nconst add &#x3D; (a: number, b: number) &#x3D;&gt; a + b;\n\nconst memoizedCallback &#x3D; useCallback(\n  (a) &#x3D;&gt; &#123;\n    add(a, b);\n  &#125;,\n  [b]\n);\n\nå¤åˆ¶ä»£ç \n\nè¿™é‡Œæˆ‘ä»¬æ²¡æœ‰ç»™å›è°ƒå‡½æ•°ä¸­çš„å‚æ•°aå®šä¹‰ç±»å‹ï¼Œæ‰€ä»¥ä¸‹é¢çš„è°ƒç”¨æ–¹å¼éƒ½ä¸ä¼šæŠ¥é”™ï¼š\nmemoizedCallback(&quot;hello&quot;);\nmemoizedCallback(5)\nå¤åˆ¶ä»£ç \n\nå°½ç®¡addæ–¹æ³•çš„ä¸¤ä¸ªå‚æ•°éƒ½æ˜¯numberç±»å‹ï¼Œä½†æ˜¯ä¸Šè¿°è°ƒç”¨éƒ½èƒ½å¤Ÿç”¨æ‰§è¡Œã€‚æ‰€ä»¥ä¸ºäº†æ›´åŠ ä¸¥è°¨ï¼Œæˆ‘ä»¬éœ€è¦ç»™å›è°ƒå‡½æ•°å®šä¹‰å…·ä½“çš„ç±»å‹ï¼š\nconst memoizedCallback &#x3D; useCallback(\n  (a: number) &#x3D;&gt; &#123;\n    add(a, b);\n  &#125;,\n  [b]\n);\nå¤åˆ¶ä»£ç \n\nè¿™æ—¶å€™å¦‚æœå†ç»™å›è°ƒå‡½æ•°ä¼ å…¥å­—ç¬¦ä¸²å°±ä¼šæŠ¥é”™äº†ï¼š\n æ‰€æœ‰ï¼Œéœ€è¦æ³¨æ„ï¼Œåœ¨ä½¿ç”¨useCallbackæ—¶éœ€è¦ç»™å›è°ƒå‡½æ•°çš„å‚æ•°æŒ‡å®šç±»å‹ã€‚\n5. useMemoå…ˆæ¥çœ‹çœ‹ç±»å‹å£°æ˜æ–‡ä»¶ä¸­å¯¹useMemoçš„å®šä¹‰ï¼š\nfunction useMemo&lt;T&gt;(factory: () &#x3D;&gt; T, deps: DependencyList | undefined): T;\n   &#x2F;**\n    * &#96;useDebugValue&#96; can be used to display a label for custom hooks in React DevTools.\n    *\n    * NOTE: We donâ€™t recommend adding debug values to every custom hook.\n    * Itâ€™s most valuable for custom hooks that are part of shared libraries.\n    *\n    * @version 16.8.0\n    * @see https:&#x2F;&#x2F;reactjs.org&#x2F;docs&#x2F;hooks-reference.html#usedebugvalue\n    *&#x2F;\nå¤åˆ¶ä»£ç \n\nuseMemoå’ŒuseCallbackæ˜¯éå¸¸ç±»ä¼¼çš„ï¼Œä½†æ˜¯å®ƒè¿”å›çš„æ˜¯ä¸€ä¸ªå€¼ï¼Œè€Œä¸æ˜¯å‡½æ•°ã€‚æ‰€ä»¥åœ¨å®šä¹‰useMemoæ—¶éœ€è¦å®šä¹‰è¿”å›å€¼çš„ç±»å‹ï¼š\nlet a &#x3D; 1;\nsetTimeout(() &#x3D;&gt; &#123;\n  a +&#x3D; 1;\n&#125;, 1000);\n\nconst calculatedValue &#x3D; useMemo&lt;number&gt;(() &#x3D;&gt; a ** 2, [a]);\nå¤åˆ¶ä»£ç \n\nå¦‚æœè¿”å›å€¼ä¸ä¸€è‡´ï¼Œå°±ä¼šæŠ¥é”™ï¼š\nconst calculatedValue &#x3D; useMemo&lt;number&gt;(() &#x3D;&gt; a + &quot;hello&quot;, [a]);\n&#x2F;&#x2F; ç±»å‹â€œ() &#x3D;&gt; stringâ€çš„å‚æ•°ä¸èƒ½èµ‹ç»™ç±»å‹â€œ() &#x3D;&gt; numberâ€çš„å‚æ•°\nå¤åˆ¶ä»£ç \n\n6. useContextuseContextéœ€è¦æä¾›ä¸€ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œå¹¶è¿”å›æ‰€æä¾›çš„ä¸Šä¸‹æ–‡çš„å€¼ï¼Œå½“æä¾›è€…æ›´æ–°ä¸Šä¸‹æ–‡å¯¹è±¡æ—¶ï¼Œå¼•ç”¨è¿™äº›ä¸Šä¸‹æ–‡å¯¹è±¡çš„ç»„ä»¶å°±ä¼šé‡æ–°æ¸²æŸ“ï¼š\nconst ColorContext &#x3D; React.createContext(&#123; color: &quot;green&quot; &#125;);\n\nconst Welcome &#x3D; () &#x3D;&gt; &#123;\n  const &#123; color &#125; &#x3D; useContext(ColorContext);\n  return &lt;div style&#x3D;&#123;&#123; color &#125;&#125;&gt;hello world&lt;&#x2F;div&gt;;\n&#125;;\nå¤åˆ¶ä»£ç \n\nåœ¨ä½¿ç”¨useContextæ—¶ï¼Œä¼šè‡ªåŠ¨æ¨æ–­å‡ºæä¾›çš„ä¸Šä¸‹æ–‡å¯¹è±¡çš„ç±»å‹ï¼Œæ‰€ä»¥å¹¶ä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨è®¾ç½®contextçš„ç±»å‹ã€‚å½“å‰ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨æ³›å‹æ¥è®¾ç½®contextçš„ç±»å‹ï¼š\ninterface IColor &#123;\n\tcolor: string;\n&#125;\n\nconst ColorContext &#x3D; React.createContext&lt;IColor&gt;(&#123; color: &quot;green&quot; &#125;);\nå¤åˆ¶ä»£ç \n\nä¸‹é¢æ˜¯useContextåœ¨ç±»å‹å£°æ˜æ–‡ä»¶ä¸­çš„å®šä¹‰ï¼š\nfunction useContext&lt;T&gt;(context: Context&lt;T&gt;&#x2F;*, (not public API) observedBits?: number|boolean *&#x2F;): T;\n&#x2F;**\n  * Returns a stateful value, and a function to update it.\n  *\n  * @version 16.8.0\n  * @see https:&#x2F;&#x2F;reactjs.org&#x2F;docs&#x2F;hooks-reference.html#usestate\n  *&#x2F;\nå¤åˆ¶ä»£ç \n\n7. useReduceræœ‰æ—¶æˆ‘ä»¬éœ€è¦å¤„ç†ä¸€äº›å¤æ‚çš„çŠ¶æ€ï¼Œå¹¶ä¸”å¯èƒ½å–å†³äºä¹‹å‰çš„çŠ¶æ€ã€‚è¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨useReducerï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¼šæ ¹æ®ä¹‹å‰çš„çŠ¶æ€æ¥è®¡ç®—ä¸€ä¸ªæ–°çš„stateã€‚å…¶è¯­æ³•å¦‚ä¸‹ï¼š\nconst [state, dispatch] &#x3D; useReducer(reducer, initialArg, init);\nå¤åˆ¶ä»£ç \n\næ¥çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š\nconst reducer &#x3D; (state, action) &#x3D;&gt; &#123;\n  switch (action.type) &#123;\n    case &#39;increment&#39;:\n      return &#123;count: state.count + 1&#125;;\n    case &#39;decrement&#39;:\n      return &#123;count: state.count - 1&#125;;\n    default:\n      throw new Error();\n  &#125;\n&#125;\n\nconst Counter &#x3D; () &#x3D;&gt; &#123;\n  const initialState &#x3D; &#123;count: 0&#125;\n  const [state, dispatch] &#x3D; useReducer(reducer, initialState);\n  \n  return (\n    &lt;&gt;\n      Count: &#123;state.count&#125;\n      &lt;button onClick&#x3D;&#123;() &#x3D;&gt; dispatch(&#123;type: &#39;increment&#39;&#125;)&#125;&gt;+&lt;&#x2F;button&gt;\n      &lt;button onClick&#x3D;&#123;() &#x3D;&gt; dispatch(&#123;type: &#39;decrement&#39;&#125;)&#125;&gt;-&lt;&#x2F;button&gt;\n    &lt;&#x2F;&gt;\n  );\n&#125;\nå¤åˆ¶ä»£ç \n\nå½“å‰çš„çŠ¶æ€æ˜¯æ— æ³•æ¨æ–­å‡ºæ¥çš„ï¼Œå¯ä»¥ç»™reducerå‡½æ•°æ·»åŠ ç±»å‹ï¼Œé€šè¿‡ç»™reducerå‡½æ•°å®šä¹‰stateå’Œactionæ¥æ¨æ–­ useReducer çš„ç±»å‹ï¼Œä¸‹é¢æ¥ä¿®æ”¹ä¸Šé¢çš„ä¾‹å­ï¼š\ntype ActionType &#x3D; &#123;\n  type: &#39;increment&#39; | &#39;decrement&#39;;\n&#125;;\n\ntype State &#x3D; &#123; count: number &#125;;\n\nconst initialState: State &#x3D; &#123;count: 0&#125;\nconst reducer &#x3D; (state: State, action: ActionType) &#x3D;&gt; &#123;\n  &#x2F;&#x2F; ...\n&#125;\nå¤åˆ¶ä»£ç \n\nè¿™æ ·ï¼Œåœ¨Counterå‡½æ•°ä¸­å°±å¯ä»¥æ¨æ–­å‡ºç±»å‹ã€‚å½“æˆ‘ä»¬è§†å›¾ä½¿ç”¨ä¸€ä¸ªä¸å­˜åœ¨çš„ç±»å‹æ—¶ï¼Œå°±ä¼šæŠ¥é”™ï¼š\ndispatch(&#123;type: &#39;reset&#39;&#125;);\n&#x2F;&#x2F; Error! type &#39;&quot;reset&quot;&#39; is not assignable to type &#39;&quot;increment&quot; | &quot;decrement&quot;&#39;\nå¤åˆ¶ä»£ç \n\né™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨æ³›å‹çš„å½¢å¼æ¥å®ç°reducerå‡½æ•°çš„ç±»å‹å®šä¹‰ï¼š\ntype ActionType &#x3D; &#123;\n  type: &#39;increment&#39; | &#39;decrement&#39;;\n&#125;;\n\ntype State &#x3D; &#123; count: number &#125;;\n\nconst reducer: React.Reducer&lt;State, ActionType&gt; &#x3D; (state, action) &#x3D;&gt; &#123;\n  &#x2F;&#x2F; ...\n&#125;\nå¤åˆ¶ä»£ç \n\nå…¶å®dispatchæ–¹æ³•ä¹Ÿæ˜¯æœ‰ç±»å‹çš„ï¼š\n\nå¯ä»¥çœ‹åˆ°ï¼Œdispatchçš„ç±»å‹æ˜¯ï¼šReact.Dispatchï¼Œä¸Šé¢ç¤ºä¾‹çš„å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š\nimport React, &#123; useReducer &#125; from &quot;react&quot;;\n\ntype ActionType &#x3D; &#123;\n  type: &quot;increment&quot; | &quot;decrement&quot;;\n&#125;;\n\ntype State &#x3D; &#123; count: number &#125;;\n\nconst Counter: React.FC &#x3D; () &#x3D;&gt; &#123;\n  const reducer: React.Reducer&lt;State, ActionType&gt; &#x3D; (state, action) &#x3D;&gt; &#123;\n    switch (action.type) &#123;\n      case &quot;increment&quot;:\n        return &#123; count: state.count + 1 &#125;;\n      case &quot;decrement&quot;:\n        return &#123; count: state.count - 1 &#125;;\n      default:\n        throw new Error();\n    &#125;\n  &#125;;\n\n  const initialState: State &#x3D; &#123;count: 0&#125;\n  const [state, dispatch] &#x3D; useReducer(reducer, initialState);\n\n  return (\n    &lt;&gt;\n      Count: &#123;state.count&#125;\n      &lt;button onClick&#x3D;&#123;() &#x3D;&gt; dispatch(&#123; type: &quot;increment&quot; &#125;)&#125;&gt;+&lt;&#x2F;button&gt;\n      &lt;button onClick&#x3D;&#123;() &#x3D;&gt; dispatch(&#123; type: &quot;decrement&quot; &#125;)&#125;&gt;-&lt;&#x2F;button&gt;\n    &lt;&#x2F;&gt;\n  );\n&#125;;\n\nexport default Counter;\n\nå¤åˆ¶ä»£ç \n\nå››ã€äº‹ä»¶å¤„ç†1. Event äº‹ä»¶ç±»å‹åœ¨å¼€å‘ä¸­æˆ‘ä»¬ä¼šç»å¸¸åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ä½¿ç”¨eventäº‹ä»¶å¯¹è±¡ï¼Œæ¯”å¦‚åœ¨inputæ¡†è¾“å…¥æ—¶å®æ—¶è·å–è¾“å…¥çš„å€¼ï¼›ä½¿ç”¨é¼ æ ‡äº‹ä»¶æ—¶ï¼Œé€šè¿‡ clientXã€clientY è·å–å½“å‰æŒ‡é’ˆçš„åæ ‡ç­‰ç­‰ã€‚ â€‹\næˆ‘ä»¬çŸ¥é“ï¼ŒEventæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”æœ‰å¾ˆå¤šå±æ€§ï¼Œè¿™æ—¶å¾ˆå¤šäººå°±ä¼šæŠŠ event ç±»å‹å®šä¹‰ä¸ºanyï¼Œè¿™æ ·çš„è¯TypeScriptå°±å¤±å»äº†å®ƒçš„æ„ä¹‰ï¼Œå¹¶ä¸ä¼šå¯¹eventäº‹ä»¶è¿›è¡Œé™æ€æ£€æŸ¥ï¼Œå¦‚æœä¸€ä¸ªé”®ç›˜äº‹ä»¶è§¦å‘äº†ä¸‹é¢çš„æ–¹æ³•ï¼Œä¹Ÿä¸ä¼šæŠ¥é”™ï¼š\nconst handleEvent &#x3D; (e: any) &#x3D;&gt; &#123;\n    console.log(e.clientX, e.clientY)\n&#125;\nå¤åˆ¶ä»£ç \n\nç”±äºEventäº‹ä»¶å¯¹è±¡ä¸­æœ‰å¾ˆå¤šçš„å±æ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿä¸æ–¹ä¾¿æŠŠæ‰€æœ‰å±æ€§åŠå…¶ç±»å‹å®šä¹‰åœ¨ä¸€ä¸ªinterfaceä¸­ï¼Œæ‰€ä»¥Reactåœ¨å£°æ˜æ–‡ä»¶ä¸­ç»™æˆ‘ä»¬æä¾›äº†Eventäº‹ä»¶å¯¹è±¡çš„ç±»å‹å£°æ˜ã€‚\nå¸¸è§çš„Event äº‹ä»¶å¯¹è±¡å¦‚ä¸‹ï¼š\n\nå‰ªåˆ‡æ¿äº‹ä»¶å¯¹è±¡ï¼šClipboardEvent&lt;T &#x3D; Element&gt;\næ‹–æ‹½äº‹ä»¶å¯¹è±¡ï¼šDragEvent&lt;T &#x3D; Element&gt;\nç„¦ç‚¹äº‹ä»¶å¯¹è±¡ï¼šFocusEvent&lt;T &#x3D; Element&gt;\nè¡¨å•äº‹ä»¶å¯¹è±¡ï¼šFormEvent&lt;T &#x3D; Element&gt;\nChangeäº‹ä»¶å¯¹è±¡ï¼šChangeEvent&lt;T &#x3D; Element&gt;\né”®ç›˜äº‹ä»¶å¯¹è±¡ï¼šKeyboardEvent&lt;T &#x3D; Element&gt;\né¼ æ ‡äº‹ä»¶å¯¹è±¡ï¼šMouseEvent&lt;T &#x3D; Element, E &#x3D; NativeMouseEvent&gt;\nè§¦æ‘¸äº‹ä»¶å¯¹è±¡ï¼šTouchEvent&lt;T &#x3D; Element&gt;\næ»šè½®äº‹ä»¶å¯¹è±¡ï¼šWheelEvent&lt;T &#x3D; Element&gt;\nåŠ¨ç”»äº‹ä»¶å¯¹è±¡ï¼šAnimationEvent&lt;T &#x3D; Element&gt;\nè¿‡æ¸¡äº‹ä»¶å¯¹è±¡ï¼šTransitionEvent&lt;T &#x3D; Element&gt;\n\nå¯ä»¥çœ‹åˆ°ï¼Œè¿™äº›Eventäº‹ä»¶å¯¹è±¡çš„æ³›å‹ä¸­éƒ½ä¼šæ¥æ”¶ä¸€ä¸ªElementå…ƒç´ çš„ç±»å‹ï¼Œè¿™ä¸ªç±»å‹å°±æ˜¯æˆ‘ä»¬ç»‘å®šè¿™ä¸ªäº‹ä»¶çš„æ ‡ç­¾å…ƒç´ çš„ç±»å‹ï¼Œæ ‡ç­¾å…ƒç´ ç±»å‹å°†åœ¨ä¸‹é¢çš„ç¬¬äº”éƒ¨åˆ†ä»‹ç»ã€‚\næ¥çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š\ntype State &#x3D; &#123;\n  text: string;\n&#125;;\n\nconst App: React.FC &#x3D; () &#x3D;&gt; &#123;  \n  const [text, setText] &#x3D; useState&lt;string&gt;(&quot;&quot;)\n\n  const onChange &#x3D; (e: React.FormEvent&lt;HTMLInputElement&gt;): void &#x3D;&gt; &#123;\n    setText(e.currentTarget.value);\n  &#125;;\n  \n  return (\n    &lt;div&gt;\n      &lt;input type&#x3D;&quot;text&quot; value&#x3D;&#123;text&#125; onChange&#x3D;&#123;onChange&#125; &#x2F;&gt;\n    &lt;&#x2F;div&gt;\n  );\n&#125;\n\nå¤åˆ¶ä»£ç \n\nè¿™é‡Œå°±ç»™onChangeæ–¹æ³•çš„äº‹ä»¶å¯¹è±¡å®šä¹‰ä¸ºäº†FormEventç±»å‹ï¼Œå¹¶ä¸”ä½œç”¨çš„å¯¹è±¡æ—¶ä¸€ä¸ªHTMLInputElementç±»å‹çš„æ ‡ç­¾ï¼ˆinputæ ‡ç­¾ï¼‰ â€‹\nå¯ä»¥æ¥çœ‹ä¸‹MouseEventäº‹ä»¶å¯¹è±¡å’ŒChangeEventäº‹ä»¶å¯¹è±¡çš„ç±»å‹å£°æ˜ï¼Œå…¶ä»–äº‹ä»¶å¯¹è±¡çš„å£°æ˜å½¢ä¼¼ä¹Ÿç±»ä¼¼ï¼š\ninterface MouseEvent&lt;T &#x3D; Element, E &#x3D; NativeMouseEvent&gt; extends UIEvent&lt;T, E&gt; &#123;\n  altKey: boolean;\n  button: number;\n  buttons: number;\n  clientX: number;\n  clientY: number;\n  ctrlKey: boolean;\n  &#x2F;**\n    * See [DOM Level 3 Events spec](https:&#x2F;&#x2F;www.w3.org&#x2F;TR&#x2F;uievents-key&#x2F;#keys-modifier). for a list of valid (case-sensitive) arguments to this method.\n    *&#x2F;\n  getModifierState(key: string): boolean;\n  metaKey: boolean;\n  movementX: number;\n  movementY: number;\n  pageX: number;\n  pageY: number;\n  relatedTarget: EventTarget | null;\n  screenX: number;\n  screenY: number;\n  shiftKey: boolean;\n&#125;\n\ninterface ChangeEvent&lt;T &#x3D; Element&gt; extends SyntheticEvent&lt;T&gt; &#123;\n  target: EventTarget &amp; T;\n&#125;\nå¤åˆ¶ä»£ç \n\nåœ¨å¾ˆå¤šäº‹ä»¶å¯¹è±¡çš„å£°æ˜æ–‡ä»¶ä¸­éƒ½å¯ä»¥çœ‹åˆ° EventTarget çš„èº«å½±ã€‚è¿™æ˜¯å› ä¸ºï¼ŒDOMçš„äº‹ä»¶æ“ä½œï¼ˆç›‘å¬å’Œè§¦å‘ï¼‰ï¼Œéƒ½å®šä¹‰åœ¨EventTargetæ¥å£ä¸Šã€‚EventTarget çš„ç±»å‹å£°æ˜å¦‚ä¸‹ï¼š\n\ninterface EventTarget &#123;\n    addEventListener(type: string, listener: EventListenerOrEventListenerObject | null, options?: boolean | AddEventListenerOptions): void;\n    dispatchEvent(evt: Event): boolean;\n    removeEventListener(type: string, listener?: EventListenerOrEventListenerObject | null, options?: EventListenerOptions | boolean): void;\n&#125;\nå¤åˆ¶ä»£ç \n\næ¯”å¦‚åœ¨changeäº‹ä»¶ä¸­ï¼Œä¼šä½¿ç”¨çš„e.targetæ¥è·å–å½“å‰çš„å€¼ï¼Œå®ƒçš„çš„ç±»å‹å°±æ˜¯EventTargetã€‚æ¥çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š\n&lt;input\n\tonChange&#x3D;&#123;e &#x3D;&gt; onSourceChange(e)&#125;\n\tplaceholder&#x3D;&quot;æœ€å¤š30ä¸ªå­—&quot;\n&#x2F;&gt;\n\nconst onSourceChange &#x3D; (e: React.ChangeEvent&lt;HTMLInputElement&gt;) &#x3D;&gt; &#123;\n    if (e.target.value.length &gt; 30) &#123;\n      message.error(&#39;è¯·é•¿åº¦ä¸èƒ½è¶…è¿‡30ä¸ªå­—ï¼Œè¯·é‡æ–°è¾“å…¥&#39;);\n      return;\n    &#125;\n    setSourceInput(e.target.value);\n&#125;;\nå¤åˆ¶ä»£ç \n\nè¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªinputè¾“å…¥æ¡†ï¼Œå½“è§¦å‘onChangeäº‹ä»¶æ—¶ï¼Œä¼šè°ƒç”¨onSourceChangeæ–¹æ³•ï¼Œè¯¥æ–¹æ³•çš„å‚æ•°eçš„ç±»å‹å°±æ˜¯ï¼šReact.ChangeEventï¼Œè€Œe.targetçš„ç±»å‹å°±æ˜¯EventTargetï¼š\n\nåœ¨æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š\nquestionList.map(item &#x3D;&gt; (\n    &lt;div\n    \tkey&#x3D;&#123;item.id&#125;\n  \trole&#x3D;&quot;button&quot;\n  \tonClick&#x3D;&#123;e &#x3D;&gt; handleChangeCurrent(item, e)&#125;\n    &gt;\n    &#x2F;&#x2F; ç»„ä»¶å†…å®¹...\n    &lt;&#x2F;div&gt;\n)\n\nconst handleChangeCurrent &#x3D; (item: IData, e: React.MouseEvent&lt;HTMLDivElement&gt;) &#x3D;&gt; &#123;\n    e.stopPropagation();\n    setCurrent(item);\n&#125;;\nå¤åˆ¶ä»£ç \n\nè¿™ç‚¹ä»£ç ä¸­ï¼Œç‚¹å‡»æŸä¸ªç›’å­ï¼Œå°±å°†å®ƒè®¾ç½®ä¸ºå½“å‰çš„ç›’å­ï¼Œæ–¹ä¾¿æ‰§è¡Œå…¶ä»–æ“ä½œã€‚å½“é¼ æ ‡ç‚¹å‡»ç›’å­æ—¶ï¼Œä¼šè§¦å‘handleChangeCurrenæ–¹æ³•ï¼Œè¯¥æ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯eventå¯¹è±¡ï¼Œåœ¨æ–¹æ³•ä¸­æ‰§è¡Œäº†e.stopPropagation();æ˜¯ä¸ºäº†é˜»æ­¢å†’æ³¡äº‹ä»¶ï¼Œè¿™é‡Œçš„stopPropagation()å®é™…ä¸Šå¹¶ä¸æ˜¯é¼ æ ‡äº‹ä»¶MouseEventçš„å±æ€§ï¼Œå®ƒæ˜¯åˆæˆäº‹ä»¶ä¸Šçš„å±æ€§ï¼Œæ¥çœ‹çœ‹å£°æ˜æ–‡ä»¶ä¸­çš„å®šä¹‰ï¼š\ninterface MouseEvent&lt;T &#x3D; Element, E &#x3D; NativeMouseEvent&gt; extends UIEvent&lt;T, E&gt; &#123;\n  &#x2F;&#x2F;...     \n&#125;\n\ninterface UIEvent&lt;T &#x3D; Element, E &#x3D; NativeUIEvent&gt; extends SyntheticEvent&lt;T, E&gt; &#123;\n  &#x2F;&#x2F;...\n&#125;\n\ninterface SyntheticEvent&lt;T &#x3D; Element, E &#x3D; Event&gt; extends BaseSyntheticEvent&lt;E, EventTarget &amp; T, EventTarget&gt; &#123;&#125;\n\ninterface BaseSyntheticEvent&lt;E &#x3D; object, C &#x3D; any, T &#x3D; any&gt; &#123;\n  nativeEvent: E;\n  currentTarget: C;\n  target: T;\n  bubbles: boolean;\n  cancelable: boolean;\n  defaultPrevented: boolean;\n  eventPhase: number;\n  isTrusted: boolean;\n  preventDefault(): void;\n  isDefaultPrevented(): boolean;\n  stopPropagation(): void;\n  isPropagationStopped(): boolean;\n  persist(): void;\n  timeStamp: number;\n  type: string;\n&#125;\nå¤åˆ¶ä»£ç \n\nå¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œçš„stopPropagation()æ˜¯ä¸€å±‚å±‚çš„ç»§æ‰¿æ¥çš„ï¼Œæœ€ç»ˆæ¥è‡ªäºBaseSyntheticEventåˆæˆäº‹ä»¶ç±»å‹ã€‚åŸç”Ÿçš„äº‹ä»¶é›†åˆSyntheticEventå°±æ˜¯ç»§æ‰¿è‡ªåˆæˆæ—¶é—´ç±»å‹ã€‚SyntheticEvent&lt;T &#x3D; Element, E &#x3D; Event&gt;æ³›å‹æ¥å£æ¥æ”¶å½“å‰çš„å…ƒç´ ç±»å‹å’Œäº‹ä»¶ç±»å‹ï¼Œå¦‚æœä¸ä»‹æ„è¿™ä¸¤ä¸ªå‚æ•°çš„ç±»å‹ï¼Œå®Œå…¨å¯ä»¥è¿™æ ·å†™ï¼š\n&lt;input \n  onChange&#x3D;&#123;(e: SyntheticEvent&lt;Element, Event&gt;)&#x3D;&gt;&#123;\n    &#x2F;&#x2F;... \n  &#125;&#125;\n&#x2F;&gt;\nå¤åˆ¶ä»£ç \n\n2. äº‹ä»¶å¤„ç†å‡½æ•°ç±»å‹è¯´å®Œäº‹ä»¶å¯¹è±¡ç±»å‹ï¼Œå†æ¥çœ‹çœ‹äº‹ä»¶å¤„ç†å‡½æ•°çš„ç±»å‹ã€‚Reactä¹Ÿä¸ºæˆ‘ä»¬æä¾›äº†è´´å¿ƒçš„æä¾›äº†äº‹ä»¶å¤„ç†å‡½æ•°çš„ç±»å‹å£°æ˜ï¼Œæ¥çœ‹çœ‹æ‰€æœ‰çš„äº‹ä»¶å¤„ç†å‡½æ•°çš„ç±»å‹å£°æ˜ï¼š\ntype EventHandler&lt;E extends SyntheticEvent&lt;any&gt;&gt; &#x3D; &#123; bivarianceHack(event: E): void &#125;[&quot;bivarianceHack&quot;];\n\ntype ReactEventHandler&lt;T &#x3D; Element&gt; &#x3D; EventHandler&lt;SyntheticEvent&lt;T&gt;&gt;;\n&#x2F;&#x2F; å‰ªåˆ‡æ¿äº‹ä»¶å¤„ç†å‡½æ•°\ntype ClipboardEventHandler&lt;T &#x3D; Element&gt; &#x3D; EventHandler&lt;ClipboardEvent&lt;T&gt;&gt;;\n&#x2F;&#x2F; å¤åˆäº‹ä»¶å¤„ç†å‡½æ•°\ntype CompositionEventHandler&lt;T &#x3D; Element&gt; &#x3D; EventHandler&lt;CompositionEvent&lt;T&gt;&gt;;\n&#x2F;&#x2F; æ‹–æ‹½äº‹ä»¶å¤„ç†å‡½æ•°\ntype DragEventHandler&lt;T &#x3D; Element&gt; &#x3D; EventHandler&lt;DragEvent&lt;T&gt;&gt;;\n&#x2F;&#x2F; ç„¦ç‚¹äº‹ä»¶å¤„ç†å‡½æ•°\ntype FocusEventHandler&lt;T &#x3D; Element&gt; &#x3D; EventHandler&lt;FocusEvent&lt;T&gt;&gt;;\n&#x2F;&#x2F; è¡¨å•äº‹ä»¶å¤„ç†å‡½æ•°\ntype FormEventHandler&lt;T &#x3D; Element&gt; &#x3D; EventHandler&lt;FormEvent&lt;T&gt;&gt;;\n&#x2F;&#x2F; Changeäº‹ä»¶å¤„ç†å‡½æ•°\ntype ChangeEventHandler&lt;T &#x3D; Element&gt; &#x3D; EventHandler&lt;ChangeEvent&lt;T&gt;&gt;;\n&#x2F;&#x2F; é”®ç›˜äº‹ä»¶å¤„ç†å‡½æ•°\ntype KeyboardEventHandler&lt;T &#x3D; Element&gt; &#x3D; EventHandler&lt;KeyboardEvent&lt;T&gt;&gt;;\n&#x2F;&#x2F; é¼ æ ‡äº‹ä»¶å¤„ç†å‡½æ•°\ntype MouseEventHandler&lt;T &#x3D; Element&gt; &#x3D; EventHandler&lt;MouseEvent&lt;T&gt;&gt;;\n&#x2F;&#x2F; è§¦å±äº‹ä»¶å¤„ç†å‡½æ•°\ntype TouchEventHandler&lt;T &#x3D; Element&gt; &#x3D; EventHandler&lt;TouchEvent&lt;T&gt;&gt;;\n&#x2F;&#x2F; æŒ‡é’ˆäº‹ä»¶å¤„ç†å‡½æ•°\ntype PointerEventHandler&lt;T &#x3D; Element&gt; &#x3D; EventHandler&lt;PointerEvent&lt;T&gt;&gt;;\n&#x2F;&#x2F; ç•Œé¢äº‹ä»¶å¤„ç†å‡½æ•°\ntype UIEventHandler&lt;T &#x3D; Element&gt; &#x3D; EventHandler&lt;UIEvent&lt;T&gt;&gt;;\n&#x2F;&#x2F; æ»šè½®äº‹ä»¶å¤„ç†å‡½æ•°\ntype WheelEventHandler&lt;T &#x3D; Element&gt; &#x3D; EventHandler&lt;WheelEvent&lt;T&gt;&gt;;\n&#x2F;&#x2F; åŠ¨ç”»äº‹ä»¶å¤„ç†å‡½æ•°\ntype AnimationEventHandler&lt;T &#x3D; Element&gt; &#x3D; EventHandler&lt;AnimationEvent&lt;T&gt;&gt;;\n&#x2F;&#x2F; è¿‡æ¸¡äº‹ä»¶å¤„ç†å‡½æ•°\ntype TransitionEventHandler&lt;T &#x3D; Element&gt; &#x3D; EventHandler&lt;TransitionEvent&lt;T&gt;&gt;;\nå¤åˆ¶ä»£ç \n\nè¿™é‡Œé¢çš„Tçš„ç±»å‹ä¹Ÿéƒ½æ˜¯Elementï¼ŒæŒ‡çš„æ˜¯è§¦å‘è¯¥äº‹ä»¶çš„HTMLæ ‡ç­¾å…ƒç´ çš„ç±»å‹ï¼Œä¸‹é¢ç¬¬äº”éƒ¨åˆ†ä¼šä»‹ç»ã€‚ â€‹\nEventHandlerä¼šæ¥æ”¶ä¸€ä¸ªEï¼Œå®ƒè¡¨ç¤ºäº‹ä»¶å¤„ç†å‡½æ•°ä¸­ Event å¯¹è±¡çš„ç±»å‹ã€‚bivarianceHack æ˜¯äº‹ä»¶å¤„ç†å‡½æ•°çš„ç±»å‹å®šä¹‰ï¼Œå‡½æ•°æ¥æ”¶ä¸€ä¸ª Event å¯¹è±¡ï¼Œå¹¶ä¸”å…¶ç±»å‹ä¸ºæ¥æ”¶åˆ°çš„æ³›å‹å˜é‡ E çš„ç±»å‹, è¿”å›å€¼ä¸º voidã€‚ â€‹\nè¿˜çœ‹ä¸Šé¢çš„é‚£ä¸ªä¾‹å­ï¼š\ntype State &#x3D; &#123;\n  text: string;\n&#125;;\n\nconst App: React.FC &#x3D; () &#x3D;&gt; &#123;  \n  const [text, setText] &#x3D; useState&lt;string&gt;(&quot;&quot;)\n\n  const onChange: React.ChangeEventHandler&lt;HTMLInputElement&gt; &#x3D; (e) &#x3D;&gt; &#123;\n    setText(e.currentTarget.value);\n  &#125;;\n  \n  return (\n    &lt;div&gt;\n      &lt;input type&#x3D;&quot;text&quot; value&#x3D;&#123;text&#125; onChange&#x3D;&#123;onChange&#125; &#x2F;&gt;\n    &lt;&#x2F;div&gt;\n  );\n&#125;\n\nå¤åˆ¶ä»£ç \n\nè¿™é‡Œç»™onChangeæ–¹æ³•å®šä¹‰äº†æ–¹æ³•çš„ç±»å‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªChangeEventHandlerçš„ç±»å‹ï¼Œå¹¶ä¸”ä½œç”¨çš„å¯¹è±¡æ—¶ä¸€ä¸ªHTMLImnputElementç±»å‹çš„æ ‡ç­¾ï¼ˆinputæ ‡ç­¾ï¼‰ã€‚\näº”ã€HTMLæ ‡ç­¾ç±»å‹1. å¸¸è§æ ‡ç­¾ç±»å‹åœ¨é¡¹ç›®çš„ä¾èµ–æ–‡ä»¶ä¸­å¯ä»¥æ‰¾åˆ°HTMLæ ‡ç­¾ç›¸å…³çš„ç±»å‹å£°æ˜æ–‡ä»¶ï¼š\n\næ‰€æœ‰çš„HTMLæ ‡ç­¾çš„ç±»å‹éƒ½è¢«å®šä¹‰åœ¨ intrinsicElements æ¥å£ä¸­ï¼Œå¸¸è§çš„æ ‡ç­¾åŠå…¶ç±»å‹å¦‚ä¸‹ï¼š\na: HTMLAnchorElement;\nbody: HTMLBodyElement;\nbr: HTMLBRElement;\nbutton: HTMLButtonElement;\ndiv: HTMLDivElement;\nh1: HTMLHeadingElement;\nh2: HTMLHeadingElement;\nh3: HTMLHeadingElement;\nhtml: HTMLHtmlElement;\nimg: HTMLImageElement;\ninput: HTMLInputElement;\nul: HTMLUListElement;\nli: HTMLLIElement;\nlink: HTMLLinkElement;\np: HTMLParagraphElement;\nspan: HTMLSpanElement;\nstyle: HTMLStyleElement;\ntable: HTMLTableElement;\ntbody: HTMLTableSectionElement;\nvideo: HTMLVideoElement;\naudio: HTMLAudioElement;\nmeta: HTMLMetaElement;\nform: HTMLFormElement; \nå¤åˆ¶ä»£ç \n\né‚£ä»€ä¹ˆæ—¶å€™ä¼šä½¿ç”¨åˆ°æ ‡ç­¾ç±»å‹å‘¢ï¼Œä¸Šé¢ç¬¬å››éƒ¨åˆ†çš„Eventäº‹ä»¶ç±»å‹å’Œäº‹ä»¶å¤„ç†å‡½æ•°ç±»å‹ä¸­éƒ½ä½¿ç”¨åˆ°äº†æ ‡ç­¾çš„ç±»å‹ã€‚ä¸Šé¢çš„å¾ˆå¤šçš„ç±»å‹éƒ½éœ€è¦ä¼ å…¥ä¸€ä¸ªELementç±»å‹çš„æ³›å‹å‚æ•°ï¼Œè¿™ä¸ªæ³›å‹å‚æ•°å°±æ˜¯å¯¹åº”çš„æ ‡ç­¾ç±»å‹å€¼ï¼Œå¯ä»¥æ ¹æ®æ ‡ç­¾æ¥é€‰æ‹©å¯¹åº”çš„æ ‡ç­¾ç±»å‹ã€‚è¿™äº›ç±»å‹éƒ½ç»§æ‰¿è‡ªHTMLElementç±»å‹ï¼Œå¦‚æœä½¿ç”¨æ—¶å¯¹ç±»å‹ç±»å‹è¦æ±‚ä¸é«˜ï¼Œå¯ä»¥ç›´æ¥å†™HTMLELementã€‚æ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼š\n&lt;Button\n\ttype&#x3D;&quot;text&quot;\n\tonClick&#x3D;&#123;(e: React.MouseEvent&lt;HTMLElement&gt;) &#x3D;&gt; &#123;\n  handleOperate();\n  e.stopPropagation();\n&#125;&#125;\n  &gt;\n    &lt;img\n\tsrc&#x3D;&#123;cancelChangeIcon&#125;\n\talt&#x3D;&quot;&quot;\n    &#x2F;&gt;\n    å–æ¶ˆä¿®æ”¹\n&lt;&#x2F;Button&gt;\nå¤åˆ¶ä»£ç \n\nå…¶å®ï¼Œåœ¨ç›´æ¥æ“ä½œDOMæ—¶ä¹Ÿä¼šç”¨åˆ°æ ‡ç­¾ç±»å‹ï¼Œè™½ç„¶æˆ‘ä»¬ç°åœ¨é€šå¸¸ä¼šä½¿ç”¨æ¡†æ¶æ¥å¼€å‘ï¼Œä½†æ˜¯æœ‰æ—¶å€™ä¹Ÿé¿å…ä¸äº†ç›´æ¥æ“ä½œDOMã€‚æ¯”å¦‚æˆ‘åœ¨å·¥ä½œä¸­ï¼Œé¡¹ç›®ä¸­çš„æŸä¸€éƒ¨åˆ†ç»„ä»¶æ˜¯é€šè¿‡npmæ¥å¼•å…¥çš„å…¶ä»–ç»„çš„ç»„ä»¶ï¼Œè€Œåœ¨å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘æœ‰éœ€è¦åŠ¨æ€çš„å»ä¸ªæ€§åŒ–è¿™ä¸ªç»„ä»¶çš„æ ·å¼ï¼Œæœ€ç›´æ¥çš„åŠæ³•å°±æ˜¯é€šè¿‡åŸç”ŸJavaScriptè·å–åˆ°DOMå…ƒç´ ï¼Œæ¥è¿›è¡Œæ ·å¼çš„ä¿®æ”¹ï¼Œè¿™æ—¶å€™å°±ä¼šç”¨åˆ°æ ‡ç­¾ç±»å‹ã€‚ â€‹\næ¥çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š\ndocument.querySelectorAll(&#39;.paper&#39;).forEach(item &#x3D;&gt; &#123;\n  const firstPageHasAddEle &#x3D; (item.firstChild as HTMLDivElement).classList.contains(&#39;add-ele&#39;);\n  \n  if (firstPageHasAddEle) &#123;\n    item.removeChild(item.firstChild as ChildNode);\n  &#125;\n&#125;)\nå¤åˆ¶ä»£ç \n\nè¿™æ˜¯æˆ‘æœ€è¿‘å†™çš„ä¸€æ®µä»£ç ï¼ˆç•¥å¾®åˆ æ”¹ï¼‰ï¼Œåœ¨ç¬¬ä¸€é¡µæœ‰ä¸ªadd-eleå…ƒç´ çš„æ—¶å€™å°±åˆ é™¤å®ƒã€‚è¿™é‡Œæˆ‘ä»¬å°†item.firstChildæ–­è¨€æˆäº†HTMLDivElementç±»å‹ï¼Œå¦‚æœä¸æ–­è¨€ï¼Œitem.firstChildçš„ç±»å‹å°±æ˜¯ChildNodeï¼Œè€ŒChildNodeç±»å‹ä¸­æ˜¯ä¸å­˜åœ¨classListå±æ€§çš„ï¼Œæ‰€ä»¥å°±å°±ä¼šæŠ¥é”™ï¼Œå½“æˆ‘ä»¬æŠŠä»–æ–­è¨€æˆHTMLDivElementç±»å‹æ—¶ï¼Œå°±ä¸ä¼šæŠ¥é”™äº†ã€‚å¾ˆå¤šæ—¶å€™ï¼Œæ ‡ç­¾ç±»å‹å¯ä»¥å’Œæ–­è¨€ï¼ˆasï¼‰ä¸€èµ·ä½¿ç”¨ã€‚ â€‹\nåé¢åœ¨removeChildæ—¶åˆä½¿ç”¨äº†asæ–­è¨€ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿitem.firstChildä¸æ˜¯å·²ç»è‡ªåŠ¨è¯†åˆ«ä¸ºChildNodeç±»å‹äº†å—ï¼Ÿå› ä¸ºTSä¼šè®¤ä¸ºï¼Œæˆ‘ä»¬å¯èƒ½ä¸èƒ½è·å–åˆ°ç±»åä¸ºpaperçš„å…ƒç´ ï¼Œæ‰€ä»¥item.firstChildçš„ç±»å‹å°±è¢«æ¨æ–­ä¸ºChildNode | nullï¼Œæˆ‘ä»¬æœ‰æ—¶å€™æ¯”TSæ›´æ‡‚æˆ‘ä»¬å®šä¹‰çš„å…ƒç´ ï¼ŒçŸ¥é“é¡µé¢ä¸€å®šå­˜åœ¨paper å…ƒç´ ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥å°†item.firstChildæ–­è¨€æˆChildNodeç±»å‹ã€‚\n2. æ ‡ç­¾å±æ€§ç±»å‹ä¼—æ‰€å‘¨çŸ¥ï¼Œæ¯ä¸ªHTMLæ ‡ç­¾éƒ½æœ‰è‡ªå·±çš„å±æ€§ï¼Œæ¯”å¦‚Inputæ¡†å°±æœ‰valueã€widthã€placeholderã€max-lengthç­‰å±æ€§ï¼Œä¸‹é¢æ˜¯Inputæ¡†çš„å±æ€§ç±»å‹å®šä¹‰ï¼š\ninterface InputHTMLAttributes&lt;T&gt; extends HTMLAttributes&lt;T&gt; &#123;\n  accept?: string | undefined;\n  alt?: string | undefined;\n  autoComplete?: string | undefined;\n  autoFocus?: boolean | undefined;\n  capture?: boolean | string | undefined;\n  checked?: boolean | undefined;\n  crossOrigin?: string | undefined;\n  disabled?: boolean | undefined;\n  enterKeyHint?: &#39;enter&#39; | &#39;done&#39; | &#39;go&#39; | &#39;next&#39; | &#39;previous&#39; | &#39;search&#39; | &#39;send&#39; | undefined;\n  form?: string | undefined;\n  formAction?: string | undefined;\n  formEncType?: string | undefined;\n  formMethod?: string | undefined;\n  formNoValidate?: boolean | undefined;\n  formTarget?: string | undefined;\n  height?: number | string | undefined;\n  list?: string | undefined;\n  max?: number | string | undefined;\n  maxLength?: number | undefined;\n  min?: number | string | undefined;\n  minLength?: number | undefined;\n  multiple?: boolean | undefined;\n  name?: string | undefined;\n  pattern?: string | undefined;\n  placeholder?: string | undefined;\n  readOnly?: boolean | undefined;\n  required?: boolean | undefined;\n  size?: number | undefined;\n  src?: string | undefined;\n  step?: number | string | undefined;\n  type?: string | undefined;\n  value?: string | ReadonlyArray&lt;string&gt; | number | undefined;\n  width?: number | string | undefined;\n\n  onChange?: ChangeEventHandler&lt;T&gt; | undefined;\n&#125;\nå¤åˆ¶ä»£ç \n\nå¦‚æœæˆ‘ä»¬éœ€è¦ç›´æ¥æ“ä½œDOMï¼Œå°±å¯èƒ½ä¼šç”¨åˆ°å…ƒç´ å±æ€§ç±»å‹ï¼Œå¸¸è§çš„å…ƒç´ å±æ€§ç±»å‹å¦‚ä¸‹ï¼š\n\nHTMLå±æ€§ç±»å‹ï¼šHTMLAttributes\næŒ‰é’®å±æ€§ç±»å‹ï¼šButtonHTMLAttributes\nè¡¨å•å±æ€§ç±»å‹ï¼šFormHTMLAttributes\nå›¾ç‰‡å±æ€§ç±»å‹ï¼šImgHTMLAttributes\nè¾“å…¥æ¡†å±æ€§ç±»å‹ï¼šInputHTMLAttributes\né“¾æ¥å±æ€§ç±»å‹ï¼šLinkHTMLAttributes\nmetaå±æ€§ç±»å‹ï¼šMetaHTMLAttributes\né€‰æ‹©æ¡†å±æ€§ç±»å‹ï¼šSelectHTMLAttributes\nè¡¨æ ¼å±æ€§ç±»å‹ï¼šTableHTMLAttributes\nè¾“å…¥åŒºå±æ€§ç±»å‹ï¼šTextareaHTMLAttributes\nè§†é¢‘å±æ€§ç±»å‹ï¼šVideoHTMLAttributes\nSVGå±æ€§ç±»å‹ï¼šSVGAttributes\nWebViewå±æ€§ç±»å‹ï¼šWebViewHTMLAttributes\n\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ˜¯å¾ˆå°‘éœ€è¦åœ¨é¡¹ç›®ä¸­æ˜¾å¼çš„å»å®šä¹‰æ ‡ç­¾å±æ€§çš„ç±»å‹ã€‚å¦‚æœå­çº§å»å°è£…ç»„ä»¶åº“çš„è¯ï¼Œè¿™äº›å±æ€§å°±èƒ½å‘æŒ¥å®ƒä»¬çš„ä½œç”¨äº†ã€‚æ¥çœ‹ä¾‹å­ï¼ˆæ¥æºäºç½‘ç»œï¼Œä»…ä¾›å­¦ä¹ ï¼‰ï¼š\nimportÂ ReactÂ fromÂ &#39;react&#39;;\nimportÂ classNamesÂ fromÂ &#39;classnames&#39;\n\nexportÂ enumÂ ButtonSizeÂ &#123;\nÂ Â Â Â LargeÂ &#x3D;Â &#39;lg&#39;,\nÂ Â Â Â SmallÂ &#x3D;Â &#39;sm&#39;\n&#125;\n\nexportÂ enumÂ ButtonTypeÂ &#123;\nÂ Â Â Â PrimaryÂ &#x3D;Â &#39;primary&#39;,\nÂ Â Â Â DefaultÂ &#x3D;Â &#39;default&#39;,\nÂ Â Â Â DangerÂ &#x3D;Â &#39;danger&#39;,\nÂ Â Â Â LinkÂ &#x3D;Â &#39;link&#39;\n&#125;\n\ninterfaceÂ BaseButtonPropsÂ &#123;\nÂ Â Â Â className?:Â string;\nÂ Â Â Â disabled?:Â boolean;\nÂ Â Â Â size?:Â ButtonSize;\nÂ Â Â Â btnType?:Â ButtonType;\nÂ Â Â Â children:Â React.ReactNode;\nÂ Â Â Â href?:Â string;Â Â Â Â \n&#125;\n\ntypeÂ NativeButtonPropsÂ &#x3D;Â BaseButtonPropsÂ &amp;Â React.ButtonHTMLAttributes&lt;HTMLButtonElement&gt;Â &#x2F;&#x2F;Â ä½¿ç”¨Â äº¤å‰ç±»å‹ï¼ˆ&amp;ï¼‰Â è·å¾—æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„å±æ€§å’ŒåŸç”ŸÂ buttonÂ çš„å±æ€§\ntypeÂ AnchorButtonPropsÂ &#x3D;Â BaseButtonPropsÂ &amp;Â React.AnchorHTMLAttributes&lt;HTMLAnchorElement&gt;Â &#x2F;&#x2F;Â ä½¿ç”¨Â äº¤å‰ç±»å‹ï¼ˆ&amp;ï¼‰Â è·å¾—æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„å±æ€§å’ŒåŸç”ŸÂ aæ ‡ç­¾Â çš„å±æ€§\n\nexportÂ typeÂ ButtonPropsÂ &#x3D;Â Partial&lt;NativeButtonPropsÂ &amp;Â AnchorButtonProps&gt;Â &#x2F;&#x2F;ä½¿ç”¨Â Partial&lt;&gt;Â ä½¿ä¸¤ç§å±æ€§å¯é€‰\n\nconstÂ Button:Â React.FC&lt;ButtonProps&gt;Â &#x3D;Â (props)Â &#x3D;&gt;Â &#123;\nÂ Â Â Â constÂ &#123;Â \nÂ Â Â Â Â Â Â Â disabled,\nÂ Â Â Â Â Â Â Â className,Â \nÂ Â Â Â Â Â Â Â size,\nÂ Â Â Â Â Â Â Â btnType,\nÂ Â Â Â Â Â Â Â children,\nÂ Â Â Â Â Â Â Â href,\nÂ Â Â Â Â Â Â Â ...restPropsÂ Â \nÂ Â Â Â &#125;Â &#x3D;Â props;\n\nÂ Â Â Â constÂ classesÂ &#x3D;Â classNames(&#39;btn&#39;,Â className,Â &#123;\nÂ Â Â Â Â Â Â Â [&#96;btn-$&#123;btnType&#125;&#96;]:Â btnType,\nÂ Â Â Â Â Â Â Â [&#96;btn-$&#123;size&#125;&#96;]:Â size,\nÂ Â Â Â Â Â Â Â &#39;disabled&#39;:Â (btnTypeÂ &#x3D;&#x3D;&#x3D;Â ButtonType.Link)Â &amp;&amp;Â disabledÂ Â &#x2F;&#x2F;Â åªæœ‰Â aÂ æ ‡ç­¾æ‰æœ‰Â disabledÂ ç±»åï¼Œbuttonæ²¡æœ‰\nÂ Â Â Â &#125;)\n\nÂ Â Â Â if(btnTypeÂ &#x3D;&#x3D;&#x3D;Â ButtonType.LinkÂ &amp;&amp;Â href)Â &#123;\nÂ Â Â Â Â Â Â Â returnÂ (\nÂ Â Â Â Â Â Â Â Â Â Â Â &lt;aÂ \nÂ Â Â Â Â Â Â Â Â Â Â Â \tclassName&#x3D;&#123;classes&#125;\nÂ Â Â Â Â Â Â Â Â Â Â Â \thref&#x3D;&#123;href&#125;\nÂ Â Â Â Â Â Â Â Â Â Â Â \t&#123;...restProps&#125;\nÂ Â Â Â Â Â Â Â Â Â Â Â &gt;\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &#123;children&#125;\nÂ Â Â Â Â Â Â Â Â Â Â Â &lt;&#x2F;a&gt;\nÂ Â Â Â Â Â Â Â )\n\nÂ Â Â Â &#125;Â elseÂ &#123;\nÂ Â Â Â Â Â Â Â returnÂ (\nÂ Â Â Â Â Â Â Â Â Â Â Â &lt;buttonÂ \nÂ Â Â Â Â Â Â Â Â Â Â Â \tclassName&#x3D;&#123;classes&#125;\nÂ Â Â Â Â Â Â Â Â Â Â Â \tdisabled&#x3D;&#123;disabled&#125;Â &#x2F;&#x2F;Â buttonå…ƒç´ é»˜è®¤æœ‰disabledå±æ€§ï¼Œæ‰€ä»¥å³ä¾¿æ²¡ç»™ä»–è®¾ç½®æ ·å¼ä¹Ÿä¼šå’Œæ™®é€šbuttonæœ‰ä¸€å®šåŒºåˆ«\n\nÂ Â Â Â Â Â Â Â Â Â Â Â \t&#123;...restProps&#125;\nÂ Â Â Â Â Â Â Â Â Â Â Â &gt;\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &#123;children&#125;\nÂ Â Â Â Â Â Â Â Â Â Â Â &lt;&#x2F;button&gt;\nÂ Â Â Â Â Â Â Â )\nÂ Â Â Â &#125;\n&#125;\n\nButton.defaultPropsÂ &#x3D;Â &#123;\nÂ Â Â Â disabled:Â false,\nÂ Â Â Â btnType:Â ButtonType.Default\n&#125;\n\nexportÂ defaultÂ Button;\nå¤åˆ¶ä»£ç \n\nè¿™æ®µä»£ç å°±æ˜¯ç”¨æ¥å°è£…ä¸€ä¸ªbuttomæŒ‰é’®ï¼Œåœ¨buttonçš„åŸºç¡€ä¸Šæ·»åŠ äº†ä¸€äº›è‡ªå®šä¹‰å±æ€§ï¼Œæ¯”å¦‚ä¸Šé¢å°†buttonçš„ç±»å‹ä½¿ç”¨äº¤å‰ç±»å‹ï¼ˆ&amp;ï¼‰è·å¾—è‡ªå®šä¹‰å±æ€§å’ŒåŸç”ŸÂ buttonÂ å±æ€§ ï¼š\ntypeÂ NativeButtonPropsÂ &#x3D;Â BaseButtonPropsÂ &amp;Â React.ButtonHTMLAttributes&lt;HTMLButtonElement&gt;Â \nå¤åˆ¶ä»£ç \n\nå¯ä»¥çœ‹åˆ°ï¼Œæ ‡ç­¾å±æ€§ç±»å‹åœ¨å°è£…ç»„ä»¶åº“æ—¶è¿˜æ˜¯å¾ˆæœ‰ç”¨çš„ï¼Œæ›´å¤šç”¨é€”å¯ä»¥è‡ªå·±æ¢ç´¢~\nå…­ã€å·¥å…·æ³›å‹åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ä¸€äº›å·¥å…·æ³›å‹å¯ä»¥æé«˜æˆ‘ä»¬çš„å¼€å‘æ•ˆç‡ï¼Œå°‘å†™å¾ˆå¤šç±»å‹å®šä¹‰ã€‚ä¸‹é¢æ¥çœ‹çœ‹æœ‰å“ªäº›å¸¸è§çš„å·¥å…·æ³›å‹ï¼Œä»¥åŠå…¶ä½¿ç”¨æ–¹å¼ã€‚\n1. PartialPartial ä½œç”¨æ˜¯å°†ä¼ å…¥çš„å±æ€§å˜ä¸ºå¯é€‰é¡¹ã€‚é€‚ç”¨äºå¯¹ç±»å‹ç»“æ„ä¸æ˜ç¡®çš„æƒ…å†µã€‚å®ƒä½¿ç”¨äº†ä¸¤ä¸ªå…³é”®å­—ï¼škeyofå’Œinï¼Œå…ˆæ¥çœ‹çœ‹ä»–ä»¬éƒ½æ˜¯ä»€ä¹ˆå«ä¹‰ã€‚keyof å¯ä»¥ç”¨æ¥å–å¾—æ¥å£çš„æ‰€æœ‰ key å€¼ï¼š\ninterface IPerson &#123;\n  name: string;\n  age: number;\n  height: number;\n&#125;\ntype T &#x3D; keyof IPerson \n&#x2F;&#x2F; T ç±»å‹ä¸ºï¼š &quot;name&quot; | &quot;age&quot; | &quot;number&quot;\nå¤åˆ¶ä»£ç \n\ninå…³é”®å­—å¯ä»¥éå†æšä¸¾ç±»å‹,ï¼š\ntype Person &#x3D; &quot;name&quot; | &quot;age&quot; | &quot;number&quot;\ntype Obj &#x3D;  &#123;\n  [p in Keys]: any\n&#125; \n&#x2F;&#x2F; Objç±»å‹ä¸ºï¼š &#123; name: any, age: any, number: any &#125;\nå¤åˆ¶ä»£ç \n\nkeyof å¯ä»¥äº§ç”Ÿè”åˆç±»å‹, in å¯ä»¥éå†æšä¸¾ç±»å‹, æ‰€ä»¥ç»å¸¸ä¸€èµ·ä½¿ç”¨, ä¸‹é¢æ˜¯Partialå·¥å…·æ³›å‹çš„å®šä¹‰ï¼š\n&#x2F;**\n * Make all properties in T optional\n * å°†Tä¸­çš„æ‰€æœ‰å±æ€§è®¾ç½®ä¸ºå¯é€‰\n *&#x2F;\ntype Partial&lt;T&gt; &#x3D; &#123;\n    [P in keyof T]?: T[P];\n&#125;;\nå¤åˆ¶ä»£ç \n\nè¿™é‡Œï¼Œkeyof T è·å– T æ‰€æœ‰å±æ€§å, ç„¶åä½¿ç”¨ in è¿›è¡Œéå†, å°†å€¼èµ‹ç»™ P, æœ€å T[P] å–å¾—ç›¸åº”å±æ€§çš„å€¼ã€‚ä¸­é—´çš„?å°±ç”¨æ¥å°†å±æ€§è®¾ç½®ä¸ºå¯é€‰ã€‚\nä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š\ninterface IPerson &#123;\n  name: string;\n  age: number;\n  height: number;\n&#125;\n\nconst person: Partial&lt;IPerson&gt; &#x3D; &#123;\n  name: &quot;zhangsan&quot;;\n&#125;\nå¤åˆ¶ä»£ç \n\n2. RequiredRequired çš„ä½œç”¨æ˜¯å°†ä¼ å…¥çš„å±æ€§å˜ä¸ºå¿…é€‰é¡¹ï¼Œå’Œä¸Šé¢çš„å·¥å…·æ³›å‹æ°å¥½ç›¸åï¼Œå…¶å£°æ˜å¦‚ä¸‹ï¼š\n&#x2F;**\n * Make all properties in T required\n * å°†Tä¸­çš„æ‰€æœ‰å±æ€§è®¾ç½®ä¸ºå¿…é€‰\n *&#x2F;\ntype Required&lt;T&gt; &#x3D; &#123;\n    [P in keyof T]-?: T[P];\n&#125;;\nå¤åˆ¶ä»£ç \n\nå¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œä½¿ç”¨-?å°†å±æ€§è®¾ç½®ä¸ºå¿…é€‰ï¼Œå¯ä»¥ç†è§£ä¸ºå‡å»é—®å·ã€‚é€‚ç”¨å½¢å¼å’Œä¸Šé¢çš„Partialå·®ä¸å¤šï¼š\ninterface IPerson &#123;\n  name?: string;\n  age?: number;\n  height?: number;\n&#125;\n\nconst person: Required&lt;IPerson&gt; &#x3D; &#123;\n  name: &quot;zhangsan&quot;;\n  age: 18;\n  height: 180;\n&#125;\nå¤åˆ¶ä»£ç \n\n3. Readonlyå°†Tç±»å‹çš„æ‰€æœ‰å±æ€§è®¾ç½®ä¸ºåªè¯»ï¼ˆreadonlyï¼‰ï¼Œæ„é€ å‡ºæ¥ç±»å‹çš„å±æ€§ä¸èƒ½è¢«å†æ¬¡èµ‹å€¼ã€‚Readonlyçš„å£°æ˜å½¢å¼å¦‚ä¸‹ï¼š\n&#x2F;**\n * Make all properties in T readonly\n *&#x2F;\ntype Readonly&lt;T&gt; &#x3D; &#123;\n    readonly [P in keyof T]: T[P];\n&#125;;\nå¤åˆ¶ä»£ç \n\nä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š\ninterface IPerson &#123;\n  name: string;\n  age: number;\n&#125;\n\nconst person: Readonly&lt;IPerson&gt; &#x3D; &#123;\n  name: &quot;zhangsan&quot;,\n  age: 18\n&#125;\n\nperson.age &#x3D; 20;  &#x2F;&#x2F;  Error: cannot reassign a readonly property\nå¤åˆ¶ä»£ç \n\nå¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡ Readonly å°†IPersonçš„å±æ€§è½¬åŒ–æˆäº†åªè¯»ï¼Œä¸èƒ½å†è¿›è¡Œèµ‹å€¼æ“ä½œã€‚\n4. Pick&lt;T, K extends keyof T&gt;ä»Tç±»å‹ä¸­æŒ‘é€‰éƒ¨åˆ†å±æ€§Kæ¥æ„é€ æ–°çš„ç±»å‹ã€‚å®ƒçš„å£°æ˜å½¢å¼å¦‚ä¸‹ï¼š\n&#x2F;**\n * From T, pick a set of properties whose keys are in the union K\n *&#x2F;\ntype Pick&lt;T, K extends keyof T&gt; &#x3D; &#123;\n    [P in K]: T[P];\n&#125;;\nå¤åˆ¶ä»£ç \n\nä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š\ninterface IPerson &#123;\n  name: string;\n  age: number;\n  height: number;\n&#125;\n\nconst person: Pick&lt;IPerson, &quot;name&quot; | &quot;age&quot;&gt; &#x3D; &#123;\n  name: &quot;zhangsan&quot;,\n  age: 18\n&#125;\nå¤åˆ¶ä»£ç \n\n5. Record&lt;K extends keyof any, T&gt;Record ç”¨æ¥æ„é€ ä¸€ä¸ªç±»å‹ï¼Œå…¶å±æ€§åçš„ç±»å‹ä¸ºKï¼Œå±æ€§å€¼çš„ç±»å‹ä¸ºTã€‚è¿™ä¸ªå·¥å…·æ³›å‹å¯ç”¨æ¥å°†æŸä¸ªç±»å‹çš„å±æ€§æ˜ å°„åˆ°å¦ä¸€ä¸ªç±»å‹ä¸Šï¼Œä¸‹é¢æ˜¯å…¶å£°æ˜å½¢å¼ï¼š\n&#x2F;**\n * Construct a type with a set of properties K of type T\n *&#x2F;\ntype Record&lt;K extends keyof any, T&gt; &#x3D; &#123;\n    [P in K]: T;\n&#125;;\nå¤åˆ¶ä»£ç \n\nä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š\ninterface IPageinfo &#123;\n    title: string;\n&#125;\n\ntype IPage &#x3D; &#39;home&#39; | &#39;about&#39; | &#39;contact&#39;;\n\nconst page: Record&lt;IPage, IPageinfo&gt; &#x3D; &#123;\n    about: &#123;title: &#39;about&#39;&#125;,\n    contact: &#123;title: &#39;contact&#39;&#125;,\n    home: &#123;title: &#39;home&#39;&#125;,\n&#125;\nå¤åˆ¶ä»£ç \n\n6. Exclude&lt;T, U&gt;Exclude å°±æ˜¯ä»ä¸€ä¸ªè”åˆç±»å‹ä¸­æ’é™¤æ‰å±äºå¦ä¸€ä¸ªè”åˆç±»å‹çš„å­é›†ï¼Œä¸‹é¢æ˜¯å…¶å£°æ˜çš„å½¢å¼ï¼š\n&#x2F;**\n * Exclude from T those types that are assignable to U\n *&#x2F;\ntype Exclude&lt;T, U&gt; &#x3D; T extends U ? never : T;\nå¤åˆ¶ä»£ç \n\nä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š\ninterface IPerson &#123;\n  name: string;\n  age: number;\n  height: number;\n&#125;\n\nconst person: Exclude&lt;IPerson, &quot;age&quot; | &quot;sex&quot;&gt; &#x3D; &#123;\n  name: &quot;zhangsan&quot;;\n  height: 180;\n&#125;\nå¤åˆ¶ä»£ç \n\n7. Omit&lt;T, K extends keyof any&gt;ä¸Šé¢çš„Pick å’Œ Exclude éƒ½æ˜¯æœ€åŸºç¡€åŸºç¡€çš„å·¥å…·æ³›å‹ï¼Œå¾ˆå¤šæ—¶å€™ç”¨ Pick æˆ–è€… Exclude è¿˜ä¸å¦‚ç›´æ¥å†™ç±»å‹æ›´ç›´æ¥ã€‚è€Œ Omit å°±åŸºäºè¿™ä¸¤ä¸ªæ¥åšçš„ä¸€ä¸ªæ›´æŠ½è±¡çš„å°è£…ï¼Œå®ƒå…è®¸ä»ä¸€ä¸ªå¯¹è±¡ä¸­å‰”é™¤è‹¥å¹²ä¸ªå±æ€§ï¼Œå‰©ä¸‹çš„å°±æ˜¯éœ€è¦çš„æ–°ç±»å‹ã€‚ä¸‹é¢æ˜¯å®ƒçš„å£°æ˜å½¢å¼ï¼š\n&#x2F;**\n * Construct a type with the properties of T except for those in type K.\n *&#x2F;\ntype Omit&lt;T, K extends keyof any&gt; &#x3D; Pick&lt;T, Exclude&lt;keyof T, K&gt;&gt;;\nå¤åˆ¶ä»£ç \n\nä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š\ninterface IPerson &#123;\n  name: string;\n  age: number;\n  height: number;\n&#125;\n\nconst person: Omit&lt;IPerson, &quot;age&quot; | &quot;height&quot;&gt; &#x3D; &#123;\n  name: &quot;zhangsan&quot;;\n&#125;\nå¤åˆ¶ä»£ç \n\n8. ReturnTypeReturnTypeä¼šè¿”å›å‡½æ•°è¿”å›å€¼çš„ç±»å‹ï¼Œå…¶å£°æ˜å½¢å¼å¦‚ä¸‹ï¼š\n&#x2F;**\n * Obtain the return type of a function type\n *&#x2F;\ntype ReturnType&lt;T extends (...args: any) &#x3D;&gt; any&gt; &#x3D; T extends (...args: any) &#x3D;&gt; infer R ? R : any;\nå¤åˆ¶ä»£ç \n\nä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š\nfunction foo(type): boolean &#123;\n  return type &#x3D;&#x3D;&#x3D; 0\n&#125;\n\ntype FooType &#x3D; ReturnType&lt;typeof foo&gt;\nå¤åˆ¶ä»£ç \n\nè¿™é‡Œä½¿ç”¨ typeof æ˜¯ä¸ºäº†è·å– foo çš„å‡½æ•°ç­¾åï¼Œç­‰ä»·äº (type: any) &#x3D;&gt; booleanã€‚\nä¸ƒã€Axios å°è£…åœ¨Reacté¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä½¿ç”¨Axiosåº“è¿›è¡Œæ•°æ®è¯·æ±‚ï¼ŒAxios æ˜¯åŸºäº Promise çš„ HTTP åº“ï¼Œå¯ä»¥åœ¨æµè§ˆå™¨å’Œ node.js ä¸­ä½¿ç”¨ã€‚Axios å…·å¤‡ä»¥ä¸‹ç‰¹æ€§ï¼š\n\nä»æµè§ˆå™¨ä¸­åˆ›å»º XMLHttpRequestsï¼›\nä» node.js åˆ›å»º HTTP è¯·æ±‚ï¼›\næ”¯æŒ Promise APIï¼›\næ‹¦æˆªè¯·æ±‚å’Œå“åº”ï¼›\nè½¬æ¢è¯·æ±‚æ•°æ®å’Œå“åº”æ•°æ®ï¼›\nå–æ¶ˆè¯·æ±‚ï¼›\nè‡ªåŠ¨è½¬æ¢ JSON æ•°æ®ï¼›\nå®¢æˆ·ç«¯æ”¯æŒé˜²å¾¡ XSRFã€‚\n\nAxiosçš„åŸºæœ¬ä½¿ç”¨å°±ä¸å†å¤šä»‹ç»äº†ã€‚ä¸ºäº†æ›´å¥½åœ°è°ƒç”¨ï¼Œåšä¸€äº›å…¨å±€çš„æ‹¦æˆªï¼Œé€šå¸¸ä¼šå¯¹Axiosè¿›è¡Œå°è£…ï¼Œä¸‹é¢å°±ä½¿ç”¨TypeScriptå¯¹Axiosè¿›è¡Œç®€å•å°è£…ï¼Œä½¿å…¶åŒæ—¶èƒ½å¤Ÿæœ‰å¾ˆå¥½çš„ç±»å‹æ”¯æŒã€‚Axiosæ˜¯è‡ªå¸¦å£°æ˜æ–‡ä»¶çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æ— éœ€é¢å¤–çš„æ“ä½œã€‚ â€‹\nä¸‹é¢æ¥çœ‹åŸºæœ¬çš„å°è£…ï¼š\nimport axios, &#123; AxiosInstance, AxiosRequestConfig, AxiosPromise,AxiosResponse &#125; from &#39;axios&#39;; &#x2F;&#x2F; å¼•å…¥axioså’Œå®šä¹‰åœ¨node_modules&#x2F;axios&#x2F;index.tsæ–‡ä»¶é‡Œçš„ç±»å‹å£°æ˜\n\n &#x2F;&#x2F; å®šä¹‰æ¥å£è¯·æ±‚ç±»ï¼Œç”¨äºåˆ›å»ºaxiosè¯·æ±‚å®ä¾‹\nclass HttpRequest &#123;\n  &#x2F;&#x2F; æ¥æ”¶æ¥å£è¯·æ±‚çš„åŸºæœ¬è·¯å¾„\n  constructor(public baseUrl: string) &#123; \n    this.baseUrl &#x3D; baseUrl;\n  &#125;\n  \n  &#x2F;&#x2F; è°ƒç”¨æ¥å£æ—¶è°ƒç”¨å®ä¾‹çš„è¿™ä¸ªæ–¹æ³•ï¼Œè¿”å›AxiosPromise\n  public request(options: AxiosRequestConfig): AxiosPromise &#123; \n    &#x2F;&#x2F; åˆ›å»ºaxioså®ä¾‹ï¼Œå®ƒæ˜¯å‡½æ•°ï¼ŒåŒæ—¶è¿™ä¸ªå‡½æ•°åŒ…å«å¤šä¸ªå±æ€§\n    const instance: AxiosInstance &#x3D; axios.create() \n    &#x2F;&#x2F; åˆå¹¶åŸºç¡€è·¯å¾„å’Œæ¯ä¸ªæ¥å£å•ç‹¬ä¼ å…¥çš„é…ç½®ï¼Œæ¯”å¦‚urlã€å‚æ•°ç­‰\n    options &#x3D; this.mergeConfig(options) \n    &#x2F;&#x2F; è°ƒç”¨interceptorsæ–¹æ³•ä½¿æ‹¦æˆªå™¨ç”Ÿæ•ˆ\n    this.interceptors(instance, options.url) \n    &#x2F;&#x2F; è¿”å›AxiosPromise\n    return instance(options) \n  &#125;\n  \n  &#x2F;&#x2F; ç”¨äºæ·»åŠ å…¨å±€è¯·æ±‚å’Œå“åº”æ‹¦æˆª\n  private interceptors(instance: AxiosInstance, url?: string) &#123; \n    &#x2F;&#x2F; è¯·æ±‚å’Œå“åº”æ‹¦æˆª\n  &#125;\n  \n  &#x2F;&#x2F; ç”¨äºåˆå¹¶åŸºç¡€è·¯å¾„é…ç½®å’Œæ¥å£å•ç‹¬é…ç½®\n  private mergeConfig(options: AxiosRequestConfig): AxiosRequestConfig &#123; \n    return Object.assign(&#123; baseURL: this.baseUrl &#125;, options);\n  &#125;\n&#125;\nexport default HttpRequest;\nå¤åˆ¶ä»£ç \n\né€šå¸¸baseUrlåœ¨å¼€å‘ç¯å¢ƒçš„å’Œç”Ÿäº§ç¯å¢ƒçš„è·¯å¾„æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ‰€ä»¥å¯ä»¥æ ¹æ®å½“å‰æ˜¯å¼€å‘ç¯å¢ƒè¿˜æ˜¯ç”Ÿäº§ç¯å¢ƒåšåˆ¤æ–­ï¼Œåº”ç”¨ä¸åŒçš„åŸºç¡€è·¯å¾„ã€‚è¿™é‡Œè¦å†™åœ¨ä¸€ä¸ªé…ç½®æ–‡ä»¶é‡Œï¼š\nexport default &#123;\n    api: &#123;\n        devApiBaseUrl: &#39;&#x2F;test&#x2F;api&#x2F;xxx&#39;,\n        proApiBaseUrl: &#39;&#x2F;api&#x2F;xxx&#39;,\n    &#125;,\n&#125;;\nå¤åˆ¶ä»£ç \n\nåœ¨ä¸Šé¢çš„æ–‡ä»¶ä¸­å¼•å…¥è¿™ä¸ªé…ç½®ï¼š\nimport &#123; api: &#123; devApiBaseUrl, proApiBaseUrl &#125; &#125; from &#39;@&#x2F;config&#39;;\nconst apiBaseUrl &#x3D; env.NODE_ENV &#x3D;&#x3D;&#x3D; &#39;production&#39; ? proApiBaseUrl : devApiBaseUrl;\nå¤åˆ¶ä»£ç \n\nä¹‹åå°±å¯ä»¥å°†apiBaseUrlä½œä¸ºé»˜è®¤å€¼ä¼ å…¥HttpRequestçš„å‚æ•°ï¼š\nclass HttpRequest &#123; \n  constructor(public baseUrl: string &#x3D; apiBaseUrl) &#123; \n    this.baseUrl &#x3D; baseUrl;\n  &#125;\nå¤åˆ¶ä»£ç \n\næ¥ä¸‹æ¥å¯ä»¥å®Œå–„ä¸€ä¸‹æ‹¦æˆªå™¨ç±»ï¼Œåœ¨ç±»ä¸­interceptorsæ–¹æ³•å†…æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨å’Œå“åº”æ‹¦æˆªå™¨ï¼Œå®ç°å¯¹æ‰€æœ‰æ¥å£è¯·æ±‚çš„ç»Ÿä¸€å¤„ç†ï¼š\nprivate interceptors(instance: AxiosInstance, url?: string) &#123;\n  \t&#x2F;&#x2F; è¯·æ±‚æ‹¦æˆª\n    instance.interceptors.request.use((config: AxiosRequestConfig) &#x3D;&gt; &#123;\n      &#x2F;&#x2F; æ¥å£è¯·æ±‚çš„æ‰€æœ‰é…ç½®ï¼Œå¯ä»¥åœ¨axios.defaultsä¿®æ”¹é…ç½®\n      return config\n    &#125;,\n    (error) &#x3D;&gt; &#123;\n      return Promise.reject(error)\n    &#125;)\n \t\n  \t&#x2F;&#x2F; å“åº”æ‹¦æˆª\n    instance.interceptors.response.use((res: AxiosResponse) &#x3D;&gt; &#123;\n      const &#123; data &#125; &#x3D; res \n      const &#123; code, msg &#125; &#x3D; data\n      if (code !&#x3D;&#x3D; 0) &#123;\n        console.error(msg) \n      &#125;\n      return res\n    &#125;,\n    (error) &#x3D;&gt; &#123; \n      return Promise.reject(error)\n    &#125;)\n  &#125;\nå¤åˆ¶ä»£ç \n\nåˆ°è¿™é‡Œå°è£…çš„å°±å·®ä¸å¤šäº†ï¼Œä¸€èˆ¬æœåŠ¡ç«¯ä¼šå°†çŠ¶æ€ç ã€æç¤ºä¿¡æ¯å’Œæ•°æ®å°è£…åœ¨ä¸€èµ·ï¼Œç„¶åä½œä¸ºæ•°æ®è¿”å›ï¼Œæ‰€ä»¥æ‰€æœ‰è¯·æ±‚è¿”å›çš„æ•°æ®æ ¼å¼éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥å°±å¯ä»¥å®šä¹‰ä¸€ä¸ªæ¥å£æ¥æŒ‡å®šè¿”å›çš„æ•°æ®ç»“æ„ï¼Œå¯ä»¥å®šä¹‰ä¸€ä¸ªæ¥å£ï¼š\nexport interface ResponseData &#123;\n  code: number\n  data?: any\n  msg: string\n&#125;\nå¤åˆ¶ä»£ç \n\næ¥ä¸‹æ¥çœ‹çœ‹ä½¿ç”¨TypeScriptå°è£…çš„Axiosè¯¥å¦‚ä½•ä½¿ç”¨ã€‚å¯ä»¥å…ˆå®šä¹‰ä¸€ä¸ªè¯·æ±‚å®ä¾‹ï¼š\nimport HttpRequest from &#39;@&#x2F;utils&#x2F;axios&#39;\nexport * from &#39;@&#x2F;utils&#x2F;axios&#39;\nexport default new HttpRequest()\nå¤åˆ¶ä»£ç \n\nè¿™é‡ŒæŠŠè¯·æ±‚ç±»å¯¼å…¥è¿›æ¥ï¼Œé»˜è®¤å¯¼å‡ºè¿™ä¸ªç±»çš„å®ä¾‹ã€‚ä¹‹ååˆ›å»ºä¸€ä¸ªç™»é™†æ¥å£è¯·æ±‚æ–¹æ³•ï¼š\nimport axios, &#123; ResponseData &#125; from &#39;.&#x2F;index&#39;\nimport &#123; AxiosPromise &#125; from &#39;axios&#39;\n\ninterface ILogin &#123;\n  user: string;\n  password: number | string\n&#125;\n\nexport const loginReq &#x3D; (data: ILogin): AxiosPromise&lt;ResponseData&gt; &#x3D;&gt; &#123;\n  return axios.request(&#123;\n    url: &#39;&#x2F;api&#x2F;user&#x2F;login&#39;,\n    data,\n    method: &#39;POST&#39;\n  &#125;)\n&#125;\nå¤åˆ¶ä»£ç \n\nè¿™é‡Œå°è£…ç™»å½•è¯·æ±‚æ–¹æ³•loginReqï¼Œä»–çš„å‚æ•°å¿…é¡»æ˜¯æˆ‘ä»¬å®šä¹‰çš„ILoginæ¥å£çš„ç±»å‹ã€‚è¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªç±»å‹ä¸ºAxiosPromiseçš„Promiseï¼ŒAxiosPromiseæ˜¯axioså£°æ˜æ–‡ä»¶å†…ç½®çš„ç±»å‹ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ªæ³›å‹å˜é‡å‚æ•°ï¼Œç”¨äºæŒ‡å®šè¿”å›çš„ç»“æœä¸­dataå­—æ®µçš„ç±»å‹ã€‚ â€‹\næ¥ä¸‹æ¥å¯ä»¥è°ƒç”¨ä¸€ä¸‹è¿™ä¸ªç™»å½•çš„æ¥å£ï¼š\nimport &#123; loginReq &#125; from &#39;@&#x2F;api&#x2F;user&#39;\n\nconst Home: FC &#x3D; () &#x3D;&gt; &#123;\n  const login &#x3D; (params) &#x3D;&gt; &#123;\n  \tloginReq(params).then((res) &#x3D;&gt; &#123;\n    \tconsole.log(res.data.code)\n  \t&#125;)\t\n  &#125;  \n&#125;\nå¤åˆ¶ä»£ç \n\né€šè¿‡è¿™ç§æ–¹å¼ï¼Œå½“æˆ‘ä»¬è°ƒç”¨loginReqæ¥å£æ—¶ï¼Œå°±ä¼šæç¤ºæˆ‘ä»¬ï¼Œå‚æ•°çš„ç±»å‹æ˜¯ILoginï¼Œéœ€è¦ä¼ å…¥å‡ ä¸ªå‚æ•°ã€‚è¿™æ ·ç¼–å†™ä»£ç çš„ä½“éªŒå°±ä¼šå¥½å¾ˆå¤šã€‚\nå…«. å…¶ä»–1. import Reactåœ¨Reacté¡¹ç›®ä¸­ä½¿ç”¨TypeScriptæ—¶ï¼Œæ™®é€šç»„ä»¶æ–‡ä»¶åç¼€ä¸º.tsxï¼Œå…¬å…±æ–¹æ³•æ–‡ä»¶åç¼€ä¸º.tsã€‚åœ¨. tsx æ–‡ä»¶ä¸­å¯¼å…¥ React çš„æ–¹å¼å¦‚ä¸‹ï¼š\nimport * as React from &#39;react&#39;\nimport * as ReactDOM from &#39;react-dom&#39;\nå¤åˆ¶ä»£ç \n\nè¿™æ˜¯ä¸€ç§é¢å‘æœªæ¥çš„å¯¼å…¥æ–¹å¼ï¼Œå¦‚æœæƒ³åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ä»¥ä¸‹å¯¼å…¥æ–¹å¼ï¼š\nimport React from &quot;react&quot;;\nimport ReactDOM from &quot;react-dom&quot;;\nå¤åˆ¶ä»£ç \n\nå°±éœ€è¦åœ¨tsconfig.jsoné…ç½®æ–‡ä»¶ä¸­è¿›è¡Œå¦‚ä¸‹é…ç½®ï¼š\n&quot;compilerOptions&quot;: &#123;\n    &#x2F;&#x2F; å…è®¸é»˜è®¤ä»æ²¡æœ‰é»˜è®¤å¯¼å‡ºçš„æ¨¡å—å¯¼å…¥ã€‚\n    &quot;allowSyntheticDefaultImports&quot;: true,\n&#125;\nå¤åˆ¶ä»£ç \n\n2. Types or Interfacesï¼Ÿæˆ‘ä»¬å¯ä»¥ä½¿ç”¨typesæˆ–è€…Interfacesæ¥å®šä¹‰ç±»å‹å—ï¼Œé‚£ä¹ˆè¯¥å¦‚ä½•é€‰æ‹©ä»–ä¿©å‘¢ï¼Ÿå»ºè®®å¦‚ä¸‹ï¼š\n\nåœ¨å®šä¹‰å…¬å…± API æ—¶(æ¯”å¦‚ç¼–è¾‘ä¸€ä¸ªåº“ï¼‰ä½¿ç”¨ interfaceï¼Œè¿™æ ·å¯ä»¥æ–¹ä¾¿ä½¿ç”¨è€…ç»§æ‰¿æ¥å£ï¼Œè¿™æ ·å…è®¸ä½¿ç”¨æœ€é€šè¿‡å£°æ˜åˆå¹¶æ¥æ‰©å±•å®ƒä»¬ï¼›\nåœ¨å®šä¹‰ç»„ä»¶å±æ€§ï¼ˆPropsï¼‰å’ŒçŠ¶æ€ï¼ˆStateï¼‰æ—¶ï¼Œå»ºè®®ä½¿ç”¨ typeï¼Œå› ä¸º type çš„çº¦æŸæ€§æ›´å¼ºã€‚\n\ninterface å’Œ type åœ¨ ts ä¸­æ˜¯ä¸¤ä¸ªä¸åŒçš„æ¦‚å¿µï¼Œä½†åœ¨ React å¤§éƒ¨åˆ†ä½¿ç”¨çš„ case ä¸­ï¼Œinterface å’Œ type å¯ä»¥è¾¾åˆ°ç›¸åŒçš„åŠŸèƒ½æ•ˆæœï¼Œtype å’Œ interface æœ€å¤§çš„åŒºåˆ«æ˜¯ï¼štype ç±»å‹ä¸èƒ½äºŒæ¬¡ç¼–è¾‘ï¼Œè€Œ interface å¯ä»¥éšæ—¶æ‰©å±•ï¼š\ninterface Animal &#123;\n  name: string\n&#125;\n\n&#x2F;&#x2F; å¯ä»¥ç»§ç»­åœ¨åŸå±æ€§åŸºç¡€ä¸Šï¼Œæ·»åŠ æ–°å±æ€§ï¼šcolor\ninterface Animal &#123;\n  color: string\n&#125;\n\ntype Animal &#x3D; &#123;\n  name: string\n&#125;\n&#x2F;&#x2F; typeç±»å‹ä¸æ”¯æŒå±æ€§æ‰©å±•\n&#x2F;&#x2F; Error: Duplicate identifier &#39;Animal&#39;\ntype Animal &#x3D; &#123;\n  color: string\n&#125;\nå¤åˆ¶ä»£ç \n\ntypeå¯¹äºè”åˆç±»å‹æ˜¯å¾ˆæœ‰ç”¨çš„ï¼Œæ¯”å¦‚ï¼štype Type &#x3D; TypeA | TypeBã€‚è€Œinterfaceæ›´é€‚åˆå£°æ˜å­—å…¸ç±»è¡Œï¼Œç„¶åå®šä¹‰æˆ–è€…æ‰©å±•å®ƒã€‚\n3. æ‡’åŠ è½½ç±»å‹å¦‚æœæˆ‘ä»¬æƒ³åœ¨React routerä¸­ä½¿ç”¨æ‡’åŠ è½½ï¼ŒReactä¹Ÿä¸ºæˆ‘ä»¬æä¾›äº†æ‡’åŠ è½½æ–¹æ³•çš„ç±»å‹ï¼Œæ¥çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š\nexport interface RouteType &#123;\n    pathname: string;\n    component: LazyExoticComponent&lt;any&gt;;\n    exact: boolean;\n    title?: string;\n    icon?: string;\n    children?: RouteType[];\n&#125;\nexport const AppRoutes: RouteType[] &#x3D; [\n    &#123;\n        pathname: &#39;&#x2F;login&#39;,\n        component: lazy(() &#x3D;&gt; import(&#39;..&#x2F;views&#x2F;Login&#x2F;Login&#39;)),\n        exact: true\n    &#125;,\n    &#123;\n        pathname: &#39;&#x2F;404&#39;,\n        component: lazy(() &#x3D;&gt; import(&#39;..&#x2F;views&#x2F;404&#x2F;404&#39;)),\n        exact: true,\n    &#125;,\n    &#123;\n        pathname: &#39;&#x2F;&#39;,\n        exact: false,\n        component: lazy(() &#x3D;&gt; import(&#39;..&#x2F;views&#x2F;Admin&#x2F;Admin&#39;))\n    &#125;\n]\n\nå¤åˆ¶ä»£ç \n\nä¸‹é¢æ˜¯æ‡’åŠ è½½ç±»å‹å’Œlazyæ–¹æ³•åœ¨å£°æ˜æ–‡ä»¶ä¸­çš„å®šä¹‰ï¼š\ntype LazyExoticComponent&lt;T extends ComponentType&lt;any&gt;&gt; &#x3D; ExoticComponent&lt;ComponentPropsWithRef&lt;T&gt;&gt; &amp; &#123;\n  readonly _result: T;\n&#125;;\n\nfunction lazy&lt;T extends ComponentType&lt;any&gt;&gt;(\nfactory: () &#x3D;&gt; Promise&lt;&#123; default: T &#125;&gt;\n): LazyExoticComponent&lt;T&gt;;\nå¤åˆ¶ä»£ç \n\n4. ç±»å‹æ–­è¨€ç±»å‹æ–­è¨€ï¼ˆType Assertionï¼‰å¯ä»¥ç”¨æ¥æ‰‹åŠ¨æŒ‡å®šä¸€ä¸ªå€¼çš„ç±»å‹ã€‚åœ¨Reacté¡¹ç›®ä¸­ï¼Œæ–­è¨€è¿˜æ˜¯å¾ˆæœ‰ç”¨çš„ï¼Œã€‚æœ‰æ—¶å€™æ¨æ–­å‡ºæ¥çš„ç±»å‹å¹¶ä¸æ˜¯çœŸæ­£çš„ç±»å‹ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬å¯èƒ½ä¼šæ¯”TSæ›´æ‡‚æˆ‘ä»¬çš„ä»£ç ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨æ–­è¨€ï¼ˆä½¿ç”¨aså…³é”®å­—ï¼‰æ¥å®šä¹‰ä¸€ä¸ªå€¼å¾—ç±»å‹ã€‚ â€‹\næ¥çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š\nconst getLength &#x3D; (target: string | number): number &#x3D;&gt; &#123;\n  if (target.length) &#123; &#x2F;&#x2F; error ç±»å‹&quot;string | number&quot;ä¸Šä¸å­˜åœ¨å±æ€§&quot;length&quot;\n    return target.length; &#x2F;&#x2F; error  ç±»å‹&quot;number&quot;ä¸Šä¸å­˜åœ¨å±æ€§&quot;length&quot;\n  &#125; else &#123;\n    return target.toString().length;\n  &#125;\n&#125;;\nå¤åˆ¶ä»£ç \n\nå½“TypeScriptä¸ç¡®å®šä¸€ä¸ªè”åˆç±»å‹çš„å˜é‡åˆ°åº•æ˜¯å“ªä¸ªç±»å‹æ—¶ï¼Œå°±åªèƒ½è®¿é—®æ­¤è”åˆç±»å‹çš„æ‰€æœ‰ç±»å‹é‡Œå…±æœ‰çš„å±æ€§æˆ–æ–¹æ³•ï¼Œæ‰€ä»¥ç°åœ¨åŠ äº†å¯¹å‚æ•°targetå’Œè¿”å›å€¼çš„ç±»å‹å®šä¹‰ä¹‹åå°±ä¼šæŠ¥é”™ã€‚è¿™æ—¶å°±å¯ä»¥ä½¿ç”¨æ–­è¨€ï¼Œå°†targetçš„ç±»å‹æ–­è¨€æˆstringç±»å‹ï¼š\nconst getStrLength &#x3D; (target: string | number): number &#x3D;&gt; &#123;\n  if ((target as string).length) &#123;      \n    return (target as string).length; \n  &#125; else &#123;\n    return target.toString().length;\n  &#125;\n&#125;;\nå¤åˆ¶ä»£ç \n\néœ€è¦æ³¨æ„ï¼Œç±»å‹æ–­è¨€å¹¶ä¸æ˜¯ç±»å‹è½¬æ¢ï¼Œæ–­è¨€æˆä¸€ä¸ªè”åˆç±»å‹ä¸­ä¸å­˜åœ¨çš„ç±»å‹æ˜¯ä¸å…è®¸çš„ã€‚ â€‹\nå†æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼Œåœ¨è°ƒç”¨ä¸€ä¸ªæ–¹æ³•æ—¶ä¼ å…¥å‚æ•°ï¼š  è¿™é‡Œå°±æç¤ºæˆ‘ä»¬è¿™ä¸ªå‚æ•°å¯èƒ½æ˜¯undefinedï¼Œè€Œé€šè¿‡ä¸šåŠ¡çŸ¥é“è¿™ä¸ªå€¼æ˜¯ä¸€å®šå­˜åœ¨çš„ï¼Œæ‰€ä»¥å°±å¯ä»¥å°†å®ƒæ–­è¨€æˆæ•°å­—ï¼šdata?.subjectId as number â€‹\né™¤æ­¤ä¹‹å¤–ï¼Œä¸Šé¢æ‰€è¯´çš„æ ‡ç­¾ç±»å‹ã€ç»„ä»¶ç±»å‹ã€æ—¶é—´ç±»å‹éƒ½å¯ä»¥ä½¿ç”¨æ–­è¨€æ¥æŒ‡å®šç»™ä¸€äº›æ•°æ®ï¼Œè¿˜æ˜¯è¦æ ¹æ®å®é™…çš„ä¸šåŠ¡åœºæ™¯æ¥ä½¿ç”¨ã€‚ â€‹\næ„Ÿæ‚Ÿï¼šä½¿ç”¨ç±»å‹æ–­è¨€çœŸçš„èƒ½è§£å†³é¡¹ç›®ä¸­çš„å¾ˆå¤šæŠ¥é”™~\n5. æšä¸¾ç±»å‹æšä¸¾ç±»å‹åœ¨é¡¹ç›®ä¸­çš„ä½œç”¨ä¹Ÿæ˜¯ä¸å¯å¿½è§†çš„ï¼Œä½¿ç”¨æšä¸¾ç±»å‹å¯ä»¥è®©ä»£ç çš„æ‰©å±•æ€§æ›´å¥½ï¼Œå½“æˆ‘æƒ³æ›´æ”¹æŸå±æ€§å€¼æ—¶ï¼Œæ— éœ€å»å…¨å±€æ›´æ”¹è¿™ä¸ªå±æ€§ï¼Œåªè¦æ›´æ”¹æšä¸¾ä¸­çš„å€¼å³å¯ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæœ€å¥½æ–°å»ºä¸€ä¸ªæ–‡ä»¶ä¸“é—¨æ¥å®šä¹‰æšä¸¾å€¼ï¼Œä¾¿äºå¼•ç”¨ã€‚\n","slug":"å¦‚ä½•ä¼˜é›…åœ°åœ¨ React ä¸­ä½¿ç”¨TypeScript","date":"2021-12-18T13:48:34.000Z","categories_index":"","tags_index":"","author_index":"Beastrong"},{"id":"882b2e906d6e98c8bb89a8ff1e500dbe","title":"ä»£ç è¢«revert,ä½ pulläº†master,ä»£ç æ²¡äº†,å’‹æ‰¾å›æ¥?","content":"é—®é¢˜åœºæ™¯å®é™…å·¥ä½œä¸­ï¼Œåœ¨ä¸Šçº¿æ—¶ï¼Œä½ çš„æ–°åŠŸèƒ½ä»£ç éƒ½æ˜¯åœ¨gitlabä¸Šæäº¤merge to masterçš„è¯·æ±‚ï¼Œæ‹¥æœ‰mergeæƒé™çš„é¢†å¯¼é€šè¿‡åï¼Œä½ çš„ä»£ç æ‰åˆåˆ°masterã€‚å¥½ï¼ŒQAå¼€å§‹ä¸Šçº¿äº†ä½ çš„ä»£ç ï¼Œè¿™æ—¶ å•ªï¼Œå•ªï¼ŒæŠ¥è­¦äº†ï¼Œä»£ç æœ‰é—®é¢˜ã€‚é¢†å¯¼revertäº†ä½ çš„ä»£ç ä»¥ä¿è¯masteråˆ†æ”¯çš„æ­£ç¡®ã€‚è¿™æ—¶ï¼Œä½ çš„åˆ†æ”¯pulläº†masteråï¼Œä½ å‘ç°ä½ åˆ†æ”¯ä¸Šçš„æ–°åŠŸèƒ½ä»£ç éƒ½æ²¡æœ‰äº†ï¼ï¼å’‹æ‰¾å›æ¥\næœ¬æ–‡ä»å®æˆ˜è§’åº¦æ¥è§£å†³è¿™ä¸ªé—®é¢˜\næ¡ä»¶\nå‡è®¾ä½ å·²ç»æœ‰äº†ä¸€ä¸ªgité¡¹ç›®: test-gitï¼Œå¹¶ä¸”æœ‰ä¸¤ä¸ªåˆ†æ”¯: masterï¼Œtest\n\nå®æˆ˜åœ¨teståˆ†æ”¯ï¼Œä½ åˆ›å»ºäº†ä¸€ä¸ªæ–‡ä»¶welcomeï¼Œæ–‡æœ¬:hi gitã€‚å¹¶git commit -m &#39;æµ‹è¯•git revert&#39;æäº¤\nå½“å‰ï¼Œmasterï¼Œteståˆ†æ”¯çš„å†…å®¹åˆ†åˆ«å¦‚ä¸‹\n~&#x2F;tt&#x2F;test-git&gt;&gt;master $ ll\ndrwxr-xr-x  3 tt  staff    96B  5  8 20:54 test\n-rw-r--r--  1 tt  staff    16B  8  1 19:55 test3.log\nå¤åˆ¶ä»£ç \n\n~&#x2F;tt&#x2F;test-git&gt;&gt;test $ ll\ndrwxr-xr-x  3 tt  staff    96B  5  8 20:54 test\n-rw-r--r--  1 tt  staff    16B  8  1 19:55 test3.log\n-rw-r--r--  1 tt  staff     7B  8  1 20:19 welcome\n\n~&#x2F;tt&#x2F;test-git&gt;&gt;test $ cat welcome\nhi git\nå¤åˆ¶ä»£ç \n\nç°åœ¨ï¼Œå‘masteræäº¤merge to masterè¯·æ±‚ï¼Œå¦‚ä¸‹å›¾ \né¢†å¯¼mergeåå¼€å§‹ä¸Šçº¿ï¼Œå‡è®¾çº¿ä¸Šå‡ºç°é—®é¢˜ï¼Œé¢†å¯¼revertäº†è¿™æ¬¡æäº¤çš„ä»£ç ã€‚å¦‚ä¸‹å›¾ \næ¥ç€ä½ è¦æŸ¥çœ‹é—®é¢˜ï¼Œæ‰€ä»¥ä½ ä¼šæœ¬åœ°æ“ä½œï¼Œå›åˆ°ä½ çš„ä»£ç åˆ†æ”¯ï¼Œæ‰§è¡Œgit merge origin/master\n~&#x2F;tt&#x2F;test-git&gt;&gt;test $ git merge origin&#x2F;master\nUpdating 670adc2..d3961f7\nFast-forward\n welcome | 1 -\n 1 file changed, 1 deletion(-)\n delete mode 100644 welcome\n~&#x2F;tt&#x2F;test-git&gt;&gt;test $ ll\ntotal 8\ndrwxr-xr-x  3 tt  staff    96B  5  8 20:54 test\n-rw-r--r--  1 tt  staff    16B  8  1 19:55 test3.log\nå¤åˆ¶ä»£ç \n\næ­¤æ—¶ï¼Œä½ å‘ç°ä½ æäº¤çš„ä»£ç æ²¡æœ‰äº†ã€‚welcomeæ–‡ä»¶ä¸è§äº†ï¼Œå’‹åŠ\nå’‹æ‰¾å›æ¥è¿™äº›ä»£ç å‘¢ï¼Ÿä¸‹é¢å¼€å§‹æ‰¾å›æ“ä½œ\n\ngit logæ‰¾åˆ°é¢†å¯¼revertä½ ä»£ç çš„é‚£ä¸ªcommit idï¼Œè¿™é‡Œcommit idæ˜¯50a06845da879ab76e6fdd55dce923826742dcb2ã€‚å¦‚ä¸‹å›¾ä¸‰ä¸ªcommitçš„è¯´æ˜ \ngit revert --no-commit 50a06845da879ab76e6fdd55dce923826742dcb2\n\n ä½ çš„ä»£ç å·²ç»å›æ¥äº†ï¼Œç„¶åå°±æ²¡æœ‰ç„¶åäº†ï¼Œç®€å•å§\næ€»ç»“æ‰¾åˆ°é¢†å¯¼revertä½ ä»£ç çš„commit idï¼Œç„¶ågit revert --no-commit commit id\nä¸€å¥è¯æ€»ç»“ï¼šæŠŠä¹‹å‰revertçš„é‚£æ¡commitå†revertä¸€ä¸‹\n","slug":"ä»£ç è¢«revert","date":"2021-11-21T13:36:54.000Z","categories_index":"","tags_index":"","author_index":"Beastrong"},{"id":"22a53fdfd136fdbe0a4b16b8cca4b9ec","title":"åˆ†ç‰‡åŠ è½½è¶…é•¿åˆ—è¡¨æ¸²æŸ“","content":"å¾ˆæ—©ä»¥å‰å°±æœ‰é¢è¯•é—®è¶…é•¿åˆ—è¡¨å¦‚ä½•ä¼˜åŒ–ï¼Œé‚£æ—¶å€™è§‰å¾—ä¸€èˆ¬å‰ç«¯ä¸ä¼šæœ‰è¿™ç§åŠŸèƒ½ï¼Œæœ‰ä¹Ÿæ˜¯åˆ†é¡µï¼Œä¹Ÿå°±æ²¡æœ‰å»å…³æ³¨ã€‚ä»Šå¤©åˆ†äº«ä¸€ä¸ªè¶…é•¿åˆ—è¡¨æ¸²æŸ“çš„ä¼˜åŒ–æ–¹æ³•ï¼Œåˆ†ç‰‡åŠ è½½ï¼Œç°åœ¨å‡ ä¹ä¹Ÿéƒ½ä¸ä¼šç”¨äº†ï¼Œä½†æ˜¯è¿˜æ˜¯è¦çŸ¥é“è¿™ä¸ªä¸œè¥¿ã€‚\nå…ˆæ˜ç¡®eventloopçš„æœºåˆ¶ï¼Œjsæ˜¯å•çº¿ç¨‹çš„ï¼Œå½“ä½ ç¬¬ä¸€ä¸ªä¸»çº¿ç¨‹æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œé‡åˆ°å®ä»»åŠ¡å°±æ”¾åˆ°å®ä»»åŠ¡é˜Ÿåˆ—ï¼Œé‡åˆ°å¾®ä»»åŠ¡å°±æ”¾åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œè¿™ä¸€æ¬¡ä¸»çº¿ç¨‹æ‰§è¡Œå®Œäº†ä¹‹åï¼Œä¼šæŠŠå¾®ä»»åŠ¡é˜Ÿåˆ—æ¸…ç©ºï¼Œæ¥ç€GUIæ¸²æŸ“é¡µé¢ï¼Œç„¶åå†å»å®ä»»åŠ¡é˜Ÿåˆ—é‡Œé¢æŠŠåˆ°æ—¶çš„å®ä»»åŠ¡æå–å‡ºæ¥ä»ä¸»çº¿ç¨‹æ‰§è¡Œï¼Œä¸€ç›´å¾ªç¯ã€‚\nå…ˆæ˜ç¡®ï¼Œé¡µé¢æ¸²æŸ“æ˜¯åœ¨æ¸…ç©ºå¾®ä»»åŠ¡ä¹‹åï¼š\n&lt;ul id&#x3D;&quot;wrap&quot;&gt;&lt;&#x2F;ul&gt;\n\n&lt;script&gt;\n\n    let time;\n\nPromise.resolve().then(res &#x3D;&gt; &#123;\n\n    for (let i &#x3D; 0; i &lt; 10000000000; i++) &#123;&#125;\n\n    console.log(&#39;å¾®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•&#39;, new Date() - time);&#x2F;&#x2F;å¾®ä»»åŠ¡æ‰§è¡Œå®Œæ¯• 11124\n\n&#125;)\n\ndocument.getElementById(&#39;wrap&#39;).innerHTML &#x3D; &#39;é¡µé¢æ¸²æŸ“äº†&#39;;\n\ntime &#x3D; new Date();\n\nconsole.log(&#39;é¡µé¢æ¸²æŸ“è¯­å¥æ‰§è¡Œ&#39;);\n\n&lt;&#x2F;script&gt;\nå¤åˆ¶ä»£ç \n\næ¥ç€çœ‹çœ‹æ¸²æŸ“åä¸‡æ¡æ•°æ®é¡µé¢ä½¿ç”¨çš„æ—¶é—´å’Œjsæ‰§è¡Œçš„æ—¶é—´ï¼š\n&lt;ul id&#x3D;&quot;wrap&quot;&gt;&lt;&#x2F;ul&gt;\n\n&lt;script&gt;\n\n    let total &#x3D; 100000;\n\n    let time &#x3D; new Date();\n\n    for (let i &#x3D; 0; i &lt; total; i++) &#123;\n\n        let li &#x3D; document.createElement(&#39;li&#39;);\n\n        li.innerHTML &#x3D; i;\n\n        document.getElementById(&#39;wrap&#39;).appendChild(li);\n\n    &#125;\n\n    console.log(&#39;jsæ‰§è¡Œæ—¶é—´&#39;, new Date() - time);&#x2F;&#x2F;jsæ‰§è¡Œæ—¶é—´ 710\n\n    setTimeout(function () &#123;\n\n        console.log(&#39;é¡µé¢æ¸²æŸ“æ—¶é—´&#39;, new Date() - time);&#x2F;&#x2F;é¡µé¢æ¸²æŸ“æ—¶é—´ 4771\n\n    &#125;)\n\n&lt;&#x2F;script&gt;\nå¤åˆ¶ä»£ç \n\nJsæ‰§è¡Œå¾ˆå¿«ï¼Œä½†æ˜¯é¡µé¢æ¸²æŸ“è¦å°†è¿‘5ç§’ï¼Œå¦‚æœæ˜¯ä¸€ç™¾ä¸‡æ¡æ•°æ®æµ‹è¯•äº†ä¸€ä¸‹å°†è¿‘ä¸€åˆ†é’Ÿã€‚æ‰€ä»¥æˆ‘ä»¬è¦åˆ†ç‰‡æ¸²æŸ“ã€‚\nåˆ†ç‰‡æ¸²æŸ“ï¼š\n&lt;ul id&#x3D;&quot;wrap&quot;&gt;&lt;&#x2F;ul&gt;\n\n&lt;script&gt;\n\n    let total &#x3D; 100000;\n\n    let time &#x3D; new Date();\n\n    let index &#x3D; 0;\n\n    let id &#x3D; 0;\n\n    function loadList() &#123;\n\n        index +&#x3D; 50;\n\n        if(index &lt; total)&#123;\n\n           setTimeout(function () &#123;\n\n               for (let i &#x3D; 0; i &lt; 50; i++) &#123;\n\n                   let li &#x3D; document.createElement(&#39;li&#39;);\n\n                   li.innerHTML &#x3D; id++;\n\n                   document.getElementById(&#39;wrap&#39;).appendChild(li);\n\n               &#125;\n\n               loadList();\n\n           &#125;)\n\n        &#125;\n\n    &#125;\n\n    loadList()\n\n&lt;&#x2F;script&gt;\nå¤åˆ¶ä»£ç \n\nåˆ†ç‰‡æ¸²æŸ“ç”¨çš„æ—¶é—´ä¼šæ¯”æ²¡åˆ†ç‰‡é•¿ï¼Œå¥½å¤„å°±æ˜¯ä¸éœ€è¦ç­‰æ‰€æœ‰æ¸²æŸ“å‡ºæ¥ï¼Œå¯ä»¥ç›´æ¥çœ‹åˆ°æ•°æ®ï¼Œä½ æ‹–åŠ¨æ»šåŠ¨æ¡ï¼Œè¿˜èƒ½çœ‹è§é¡µé¢è¿˜åœ¨åŠ è½½ã€‚\nè¿™è¾¹è¦æ³¨æ„ä¸€ç‚¹ï¼Œæ–°ç‰ˆæœ¬æµè§ˆå™¨å¯¹é¡µé¢æ¸²æŸ“åšäº†ä¼˜åŒ–ï¼Œä¼šç­‰jsæ‰§è¡Œå®Œæ¯•ä¸€æ¬¡æ€§æ›´æ–°é¡µé¢ï¼Œä¸ä¼šåœ¨forå¾ªç¯çš„æ—¶å€™æ‰§è¡Œä¸€æ¡æ’å…¥ä¸€æ¡ï¼Œå¦‚æœä¸ºäº†å…¼å®¹ieï¼Œè¦ç”¨æ–‡æ¡£ç¢ç‰‡è¿›è¡Œæ¸²æŸ“ã€‚ä¹Ÿå¯ä»¥ç”¨requestAnimationFrameè¿™ä¸ªå®ä»»åŠ¡æ›¿ä»£å®šæ—¶å™¨ï¼Œæ€§èƒ½ä¼šç¨å¾®å¥½ä¸€äº›ã€‚\nè™½ç„¶åˆ†ç‰‡æ¸²æŸ“å¯ä»¥ä¼˜åŒ–ï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•ï¼Œé¡µé¢çš„domè¿˜æ˜¯è¿‡å¤šäº†ï¼Œæ‰€ä»¥è¿™ç§æ–¹æ³•ç°åœ¨ä¹Ÿå‡ ä¹ä¸ä¼šç”¨äº†ï¼Œä¸€èˆ¬ä¼šä½¿ç”¨è™šæ‹Ÿåˆ—è¡¨æ–¹æ³•å»ä¼˜åŒ–ã€‚\n","slug":"åˆ†ç‰‡åŠ è½½è¶…é•¿åˆ—è¡¨æ¸²æŸ“","date":"2021-11-03T13:50:32.000Z","categories_index":"","tags_index":"","author_index":"Beastrong"},{"id":"41fa294c894ff0de66f9b80c0c4a5c37","title":"Antv X6 ç»˜åˆ¶æ‹–æ‹½æµç¨‹å›¾","content":"ä½¿ç”¨antv x6 ç»˜åˆ¶æ‹–æ‹½æµç¨‹å›¾å®‰è£…# npm\n$ npm install @antv&#x2F;x6 --save\n\n# yarn\n$ yarn add @antv&#x2F;x6\nå¤åˆ¶ä»£ç \n\nä½¿ç”¨åˆ›å»ºå®¹å™¨\n&lt;!-- ç”»å¸ƒ --&gt;\n&lt;div class&#x3D;&quot;graph&quot; ref&#x3D;&quot;graph&quot;&gt;&lt;&#x2F;div&gt;\n&lt;!-- å·¥å…·æ  --&gt;\n&lt;div class&#x3D;&quot;stencil&quot; ref&#x3D;&quot;stencil&quot;&gt;&lt;&#x2F;div&gt;\nå¤åˆ¶ä»£ç \n\nåˆ›å»ºå®ä¾‹ç”»å¸ƒ\n&#x2F;&#x2F; å¼•å…¥\nimport &#123; Graph, Addon, Shape &#125; from &#39;@antv&#x2F;x6&#39;;\n&#x2F;&#x2F; åˆ›å»ºå®ä¾‹\nconst graph &#x3D; new Graph(&#123;\n    container: this.$refs.graph, &#x2F;&#x2F; ç”»å¸ƒçš„å®¹å™¨\n    &#x2F;&#x2F; grid: true, &#x2F;&#x2F; ç½‘æ ¼\n    width: 770, \n    height: 590,\n    mousewheel: &#123;\n       enabled: true,\n       zoomAtMousePosition: true,\n       modifiers: &#39;ctrl&#39;,\n       minScale: 0.5,\n       maxScale: 3,\n    &#125;, &#x2F;&#x2F; é¼ æ ‡æ»šè½®ç¼©æ”¾\n    resizing: true, &#x2F;&#x2F; ç¼©æ”¾èŠ‚ç‚¹\n    selecting: &#123;\n        enabled: true,\n        rubberband: true,\n        showNodeSelectionBox: true,\n    &#125;, &#x2F;&#x2F; ç‚¹é€‰&#x2F;æ¡†é€‰\n    connecting: &#123;\n        router: &#123;\n            name: &#39;manhattan&#39;,\n            args: &#123;\n                padding: 1,\n            &#125;,\n        &#125;,\n        connector: &#123;\n            name: &#39;rounded&#39;,\n            args: &#123;\n                radius: 8,\n            &#125;,\n        &#125;,\n        anchor: &#39;center&#39;,\n        connectionPoint: &#39;anchor&#39;,\n        allowBlank: false,\n        snap: &#123;\n            radius: 20,\n        &#125;,\n        createEdge() &#123;\n            return new Shape.Edge(&#123;\n                attrs: &#123;\n                    line: &#123;\n                        stroke: &#39;#9ED4FF&#39;,\n                        strokeWidth: 2,\n                        targetMarker: &#123;\n                            name: &#39;block&#39;,\n                            width: 12,\n                            height: 8,\n                        &#125;,\n                    &#125;,\n                &#125;,\n                zIndex: 0,\n            &#125;);\n        &#125;,\n        validateConnection(&#123; targetMagnet &#125;) &#123;\n            return !!targetMagnet;\n        &#125;,\n    &#125;, &#x2F;&#x2F; è¿çº¿é€‰é¡¹\n    highlighting: &#123;\n        magnetAdsorbed: &#123;\n            name: &#39;stroke&#39;,\n            args: &#123;\n                attrs: &#123;\n                    fill: &#39;#5F95FF&#39;,\n                    stroke: &#39;#5F95FF&#39;,\n                &#125;,\n            &#125;,\n        &#125;,\n    &#125;, &#x2F;&#x2F; é«˜äº®é€‰é¡¹ã€‚\n    snapline: true, &#x2F;&#x2F; å¯¹é½çº¿\n    keyboard: true, &#x2F;&#x2F; é”®ç›˜å¿«æ·é”®\n    clipboard: true, &#x2F;&#x2F; å‰ªåˆ‡æ¿\n&#125;);\nå¤åˆ¶ä»£ç \n\nåˆ›å»ºå·¥å…·æ å®ä¾‹\n&#x2F;&#x2F; å·¥å…·æ \nconst stencil &#x3D; new Addon.Stencil(&#123;\n    title: &#39;æµç¨‹å›¾&#39;, &#x2F;&#x2F; æ ‡é¢˜\n    target: graph, &#x2F;&#x2F; ç›®æ ‡ç”»å¸ƒ\n    stencilGraphWidth: 600,\n    stencilGraphHeight: 500,\n    collapsable: false, &#x2F;&#x2F; åˆ†ç»„æ˜¯å¦å¯æŠ˜å \n    groups: [\n        &#123;\n        title: &#39;åŸºç¡€æµç¨‹å›¾&#39;,\n        name: &#39;group1&#39;,\n        &#125;,\n    ], &#x2F;&#x2F; æä¾›çš„åˆ†ç»„\n    layoutOptions: &#123; \n        columns: 1,\n        columnWidth: 80,\n        rowHeight: 50,\n    &#125;, &#x2F;&#x2F; æ¥å¯¹èŠ‚ç‚¹è¿›è¡Œè‡ªåŠ¨å¸ƒå±€\n&#125;);\n&#x2F;&#x2F; å°†     this.$refs.stencil.appendChild(stencil.container);\nå¤åˆ¶ä»£ç \n\nè¿æ¥ç‚¹é…ç½®\n\n&#x2F;&#x2F; è¿æ¥ç‚¹ ä¸Šä¸‹å·¦å³å››ä¸ªè¿æ¥ç‚¹\nconst ports &#x3D; &#123;\n    groups: &#123;\n        top: &#123;\n            position: &#39;top&#39;,\n            attrs: &#123;\n                circle: &#123;\n                    r: 4,\n                    magnet: true,\n                    stroke: &#39;#5F95FF&#39;,\n                    strokeWidth: 1,\n                    fill: &#39;#fff&#39;,\n                    style: &#123;\n                        visibility: &#39;hidden&#39;,\n                    &#125;,\n                &#125;,\n            &#125;,\n        &#125;,\n        right: &#123;\n            position: &#39;right&#39;,\n            attrs: &#123;\n                circle: &#123;\n                    r: 4,\n                    magnet: true,\n                    stroke: &#39;#5F95FF&#39;,\n                    strokeWidth: 1,\n                    fill: &#39;#fff&#39;,\n                    style: &#123;\n                        visibility: &#39;hidden&#39;,\n                    &#125;,\n                &#125;,\n            &#125;,\n        &#125;,\n        bottom: &#123;\n            position: &#39;bottom&#39;,\n            attrs: &#123;\n                circle: &#123;\n                    r: 4,\n                    magnet: true,\n                    stroke: &#39;#5F95FF&#39;,\n                    strokeWidth: 1,\n                    fill: &#39;#fff&#39;,\n                    style: &#123;\n                        visibility: &#39;hidden&#39;,\n                    &#125;,\n                &#125;,\n            &#125;,\n        &#125;,\n        left: &#123;\n            position: &#39;left&#39;,\n            attrs: &#123;\n                circle: &#123;\n                    r: 4,\n                    magnet: true,\n                    stroke: &#39;#5F95FF&#39;,\n                    strokeWidth: 1,\n                    fill: &#39;#fff&#39;,\n                    style: &#123;\n                        visibility: &#39;hidden&#39;,\n                    &#125;,\n                &#125;,\n            &#125;,\n        &#125;,\n    &#125;,\n    items: [\n        &#123;\n            group: &#39;top&#39;,\n        &#125;,\n        &#123;\n            group: &#39;right&#39;,\n        &#125;,\n        &#123;\n            group: &#39;bottom&#39;,\n        &#125;,\n        &#123;\n            group: &#39;left&#39;,\n        &#125;,\n    ],\n&#125;;\nå¤åˆ¶ä»£ç \n\nè‡ªå®šä¹‰èŠ‚ç‚¹\n&#x2F;&#x2F; è‡ªå®šä¹‰èŠ‚ç‚¹\nGraph.registerNode(\n    &#39;custom-rect&#39;,\n    &#123;\n        inherit: &#39;rect&#39;,\n        width: 66,\n        height: 36,\n        attrs: &#123;\n            body: &#123;\n                strokeWidth: 1,\n                stroke: &#39;#5F95FF&#39;,\n                fill: &#39;#EFF4FF&#39;,\n            &#125;,\n            text: &#123;\n                fontSize: 12,\n                fill: &#39;#262626&#39;,\n            &#125;,\n        &#125;,\n        ports: &#123; ...ports &#125;,\n    &#125;,\n    true\n);\n\nGraph.registerNode(\n    &#39;custom-polygon&#39;,\n    &#123;\n        inherit: &#39;polygon&#39;,\n        width: 66,\n        height: 36,\n        attrs: &#123;\n            body: &#123;\n                strokeWidth: 1,\n                stroke: &#39;#5F95FF&#39;,\n                fill: &#39;#EFF4FF&#39;,\n            &#125;,\n            text: &#123;\n                fontSize: 12,\n                fill: &#39;#262626&#39;,\n            &#125;,\n        &#125;,\n        ports: &#123;\n            ...ports,\n            items: [\n                &#123;\n                    group: &#39;top&#39;,\n                &#125;,\n                &#123;\n                    group: &#39;bottom&#39;,\n                &#125;,\n            ],\n        &#125;,\n    &#125;,\n    true\n);\n\nGraph.registerNode(\n    &#39;custom-circle&#39;,\n    &#123;\n        inherit: &#39;circle&#39;,\n        width: 45,\n        height: 45,\n        attrs: &#123;\n            body: &#123;\n                strokeWidth: 1,\n                stroke: &#39;#5F95FF&#39;,\n                fill: &#39;#EFF4FF&#39;,\n            &#125;,\n            text: &#123;\n                fontSize: 12,\n                fill: &#39;#262626&#39;,\n            &#125;,\n        &#125;,\n        ports: &#123; ...ports &#125;,\n    &#125;,\n    true\n);\n\nconst r1 &#x3D; graph.createNode(&#123;\n    shape: &#39;custom-rect&#39;,\n    attrs: &#123;\n        text: &#123;\n            fontSize: 18,\n        &#125;,\n        body: &#123;\n            rx: 40,\n            ry: 26,\n        &#125;,\n    &#125;,\n&#125;);\nconst r2 &#x3D; graph.createNode(&#123;\n    shape: &#39;custom-rect&#39;,\n    attrs: &#123;\n        text: &#123;\n            fontSize: 18,\n        &#125;,\n    &#125;,\n&#125;);\nconst r3 &#x3D; graph.createNode(&#123;\n    shape: &#39;custom-rect&#39;,\n    attrs: &#123;\n        text: &#123;\n            fontSize: 18,\n        &#125;,\n        body: &#123;\n            rx: 6,\n            ry: 6,\n        &#125;,\n    &#125;,\n&#125;);\nconst r4 &#x3D; graph.createNode(&#123;\n    shape: &#39;custom-polygon&#39;,\n    attrs: &#123;\n        body: &#123;\n            refPoints: &#39;0,10 10,0 20,10 10,20&#39;,\n        &#125;,\n        text: &#123;\n            fontSize: 18,\n        &#125;,\n    &#125;,\n&#125;);\nstencil.load([r1, r2, r3, r4], &#39;group1&#39;);\nå¤åˆ¶ä»£ç \n\nå¿«æ·é”®å’Œäº‹ä»¶è§¦å‘\n&#x2F;&#x2F; å¿«æ·é”®ä¸äº‹ä»¶\n&#x2F;&#x2F; å¤åˆ¶ç²˜è´´\ngraph.bindKey([&#39;meta+c&#39;, &#39;ctrl+c&#39;], () &#x3D;&gt; &#123;\n    const cells &#x3D; graph.getSelectedCells();\n    if (cells.length) &#123;\n    \tgraph.copy(cells);\n    &#125;\n\treturn false;\n&#125;);\ngraph.bindKey([&#39;meta+x&#39;, &#39;ctrl+x&#39;], () &#x3D;&gt; &#123;\n    const cells &#x3D; graph.getSelectedCells();\n    if (cells.length) &#123;\n    \tgraph.cut(cells);\n\t&#125;\n\treturn false;\n&#125;);\ngraph.bindKey([&#39;meta+v&#39;, &#39;ctrl+v&#39;], () &#x3D;&gt; &#123;\n    if (!graph.isClipboardEmpty()) &#123;\n        const cells &#x3D; graph.paste(&#123; offset: 32 &#125;);\n        graph.cleanSelection();\n        graph.select(cells);\n    &#125;\n    return false;\n&#125;);\n&#x2F;&#x2F; æ§åˆ¶è¿æ¥æ¡©æ˜¾ç¤º&#x2F;éšè—\nvar showPorts &#x3D; function (ports, show) &#123;\n    for (var i &#x3D; 0, len &#x3D; ports.length; i &lt; len; i &#x3D; i + 1) &#123;\n    \tports[i].style.visibility &#x3D; show ? &#39;visible&#39; : &#39;hidden&#39;;\n    &#125;\n&#125;;\n&#x2F;&#x2F; è§¦æ‘¸\ngraph.on(&#39;node:mouseenter&#39;, (&#123; node &#125;) &#x3D;&gt; &#123;\n    &#x2F;&#x2F; æ˜¾ç¤ºèŠ‚ç‚¹åˆ é™¤æŒ‰é’®\n    node.addTools(&#123;\n        name: &#39;button-remove&#39;,\n        args: &#123;\n            x: &#39;100%&#39;,\n            y: 0,\n            offset: &#123; x: -10, y: 10 &#125;,\n        &#125;,\n\t&#125;);\n    var container &#x3D; this.$refs.graph;\n    var ports &#x3D; container.querySelectorAll(&#39;.x6-port-body&#39;);\n    showPorts(ports, true);\n&#125;);\ngraph.on(&#39;node:mouseleave&#39;, (&#123; node &#125;) &#x3D;&gt; &#123;\n    &#x2F;&#x2F; ç§»é™¤èŠ‚ç‚¹åˆ é™¤æŒ‰é’®\n    node.removeTools();\n    var container &#x3D; this.$refs.graph;\n    var ports &#x3D; container.querySelectorAll(&#39;.x6-port-body&#39;);\n    showPorts(ports, false);\n&#125;);\n&#x2F;&#x2F; æ–‡å­—è¾“å…¥\ngraph.on(&#39;cell:dblclick&#39;, (&#123; cell, e &#125;) &#x3D;&gt; &#123;\n    const isNode &#x3D; cell.isNode();\n    const name &#x3D; cell.isNode() ? &#39;node-editor&#39; : &#39;edge-editor&#39;;\n    cell.removeTool(name);\n    cell.addTools(&#123;\n        name,\n        args: &#123;\n            event: e,\n            attrs: &#123;\n                backgroundColor: isNode ? &#39;#EFF4FF&#39; : &#39;#FFF&#39;,\n                fontSize: 18,\n            &#125;,\n        &#125;,\n    &#125;);\n&#125;);   \nå¤åˆ¶ä»£ç \n\n\n","slug":"Antv X6 ç»˜åˆ¶æ‹–æ‹½æµç¨‹å›¾","date":"2021-10-20T09:21:06.000Z","categories_index":"","tags_index":"","author_index":"Beastrong"},{"id":"15b860383ab68e267beb31ba2d0c1dea","title":"React Hooksçš„å­¦ä¹ ç¬”è®°","content":"Hooksçš„èµ·æ­¥ä½¿ç”¨å…¶å®Hooksä¸»è¦å¸¸ç”¨çš„å¯ä»¥æœ‰ä»¥ä¸‹å‡ ä¸ªï¼š\n\nuseState\nuseEffect\nuseContext\nuseMemo\nuseRef\nuseReducer\nuseCallback\n\nåˆ—ä¸¾çš„ä»¥ä¸Šè¿™å‡ ä¸ªï¼Œå…¶å®å·²ç»ç®—æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„ï¼Œå°¤å…¶æ˜¯å‰ä¸¤ä¸ªï¼Œæ¥ä¸‹æ¥å°±ä¼šä»‹ç»å®ƒä»¬éƒ¨åˆ†å‡ ä¸ªçš„ä½¿ç”¨ã€‚\nuseStateuseStateè¿™ä¸ªé’©å­å…¶å®å¯¹åº”çš„æ˜¯æˆ‘ä»¬ä¹‹å‰class Componenté‡Œçš„this.setStateã€‚\n\nuseStateä¼ å‚ä»£è¡¨é»˜è®¤å€¼ï¼Œå¯ä»¥æ˜¯åŸå§‹å€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯å¯¹è±¡ã€æ•°ç»„ï¼Œæ‰€ä»¥å…¶å®è¡¨è¾¾èƒ½åŠ›å¾ˆä¸°å¯Œã€‚\nuseStateè°ƒç”¨åè¿”å›æ˜¯ä¸€å¯¹å€¼ï¼Œå¯¹åº”å½“å‰çš„å€¼å’Œæ›´æ–°è¿™ä¸ªå€¼çš„å‡½æ•°ï¼Œç”¨æ•°ç»„è§£æ„çš„æ–¹å¼è·å–å¾ˆç®€æ´ã€‚\nuseStateåœ¨ä¸€ä¸ªå‡½æ•°ç»„ä»¶é‡Œå¯ä»¥å¤šæ¬¡ä½¿ç”¨ã€‚\nuseStateå’Œthis.setStateåŒºåˆ«ä¹‹å¤„åœ¨äºï¼Œå‰è€…æ¯æ¬¡æ›´æ–°åstateéƒ½æ˜¯æ–°å€¼ï¼Œæ¢è€Œè¨€ä¹‹å…¶å®æ˜¯ä¸å¯å˜æ•°æ®çš„æ¦‚å¿µã€‚è€Œåè€…ä½¿ç”¨åï¼Œå…¶å®æ›´æ–°stateéƒ¨åˆ†çš„å€¼ï¼Œå¼•ç”¨æœ¬èº«å¹¶æ— æ”¹å˜ã€‚\n\nç®€å•ä½¿ç”¨å¦‚ä¸‹ç¤ºä¾‹ã€‚\nimport React, &#123; useState &#125; from &#39;react&#39;;\n\nexport default function StateHook() &#123;\n  const [count, useCount] &#x3D; useState(0);\n  return (\n    &lt;&gt;\n      &lt;p&gt;You clicked &#123;count&#125; times&lt;&#x2F;p&gt;\n      &lt;button onClick&#x3D;&#123;() &#x3D;&gt; useCount(count + 1)&#125;&gt;Click me&lt;&#x2F;button&gt;\n    &lt;&#x2F;&gt;\n  );\n&#125;\nå¤åˆ¶ä»£ç \n\nuseEffectuseEffectè¿™ä¸ªé’©å­åŠ¿å¿…æ˜¯æˆ‘ä»¬å¸¸ç”¨çš„ã€‚\n\nå®ƒåŸºæœ¬å¯ä»¥ç­‰ä»·äºcomponentDidMountå’ŒcomponentDidUpdateçš„è¿™ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­ç»„åˆçš„æ•ˆæœã€‚é‚£ä¹ˆå®ƒçš„è°ƒç”¨æ—¶æœºå¤§æ¦‚æ˜¯æ¯æ¬¡æ¸²æŸ“ç»“æŸåï¼Œæ‰€ä»¥ä¸ä¼šé˜»å¡ç»„ä»¶æ¸²æŸ“ã€‚\nuseEffectä¸€èˆ¬ç”¨äºå®ç°è®¾ç½®æ•°æ®è¯·æ±‚ã€ç›‘å¬å™¨ç­‰æœ‰å‰¯ä½œç”¨çš„åŠŸèƒ½ï¼Œä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°å‡½æ•°A1ç”¨äºè®¾ç½®å‰¯ä½œç”¨ï¼Œè€Œæ˜¯ä¼ å…¥çš„è¿™ä¸ªå‡½æ•°å¯ä»¥è¿”å›ä¸€ä¸ªå‡½æ•°A2ç”¨äºå–æ¶ˆå‡½æ•°A1çš„å‰¯ä½œç”¨ã€‚è¿™ä¸¤ä¸ªå‡½æ•°çš„Reactè°ƒç”¨å®ƒä»¬æ—¶æœºåˆ†åˆ«åœ¨äºï¼Œæ³¨å†Œå‰¯ä½œç”¨çš„å‡½æ•°A1åœ¨å½“æ¬¡æ¸²æŸ“ç»“æŸåç«‹å³æ‰§è¡Œï¼Œå–æ¶ˆå‰¯ä½œç”¨çš„å‡½æ•°A2åœ¨ä¸‹æ¬¡æ¸²æŸ“å¼€å§‹ä¹‹å‰ç«‹å³æ‰§è¡Œã€‚å†æ¬¡å¼ºè°ƒï¼Œè¿™ä¹ˆè®¾è®¡çš„ç†ç”±è¿˜æ˜¯ä¸ºäº†ä¸é˜»å¡ç»„ä»¶æ¸²æŸ“ã€‚\nuseEffectç¬¬äºŒä¸ªå‚æ•°ç”¨äºè®¾ç½®å‰¯ä½œç”¨çš„ä¾èµ–æ•°ç»„ã€‚ä»€ä¹ˆæ„æ€ï¼Ÿæ€ç»´çµæ´»çš„åŒå­¦å·²ç»æƒ³åˆ°äº†ï¼Œå¦‚æœæ¯æ¬¡æ¸²æŸ“éƒ½æ‰§è¡Œå‰¯ä½œç”¨ï¼Œæœ‰å¯èƒ½é€ æˆæ€§èƒ½æµªè´¹ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡å‘Šè¯‰Reactï¼Œè¿™ä¸ªé’©å­ä¾èµ–æŸäº›propsæˆ–è€…statesï¼Œåœ¨è¿™äº›ä¾èµ–ä¸å‘ç”Ÿæ”¹å˜æ—¶ï¼Œè¿™ä¸ªå‰¯ä½œç”¨ä¸ä¼šå†é‡å¤æ‰§è¡Œã€‚åœ¨ä»¥ä¸‹çš„ä¾‹å­ä¸­ï¼Œå¯ä»¥ä¼ ç©ºæ•°ç»„ï¼Œå‘Šè¯‰Reactè¯¥å‰¯ä½œç”¨ä»€ä¹ˆä¹Ÿä¸ä¾èµ–ï¼Œé‚£ä¹ˆå®ƒåªä¼šåœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶æ‰§è¡Œä¸€æ¬¡ï¼ˆä½†æ˜¯ä¸€èˆ¬ä¸æ¨èè¿™ä¹ˆåšï¼‰ã€‚å¦‚æœä¸ä¼ ç¬¬äºŒä¸ªå‚æ•°ï¼Œåˆ™æ„å‘³ç€æ¯æ¬¡æ¸²æŸ“éƒ½å¿…ç„¶æ‰§è¡Œä¸€æ¬¡ï¼Œæ­¤æ—¶åº”å½“æ³¨æ„å†…å­˜æ³„éœ²ã€‚\nåŒå­¦ä»¬æœ‰æ²¡æœ‰å‘ç°ï¼Œä½¿ç”¨useEffectåï¼Œä¸€ä¸ªå‰¯ä½œç”¨çš„æ³¨å†Œç›‘å¬ä¸å¯¹åº”çš„å–æ¶ˆæ³¨å†Œé€»è¾‘å…¨éƒ¨æ”¾åœ¨äº†ä¸€èµ·ï¼Œå¯¹æ¯”ä¸ä»¥å¾€çš„åˆ†åˆ«åœ¨componentDidMountã€componentDidUpdateã€componentWillUnmounté‡Œåˆ†æ•£åŒä¸€å‰¯ä½œç”¨çš„é€»è¾‘ã€‚useEffectçš„ä½¿ç”¨æ›´æœ‰å¸å¼•åŠ›å’Œè¯´æœåŠ›äº†ã€‚\n\nimport React, &#123; useState, useEffect &#125; from &#39;react&#39;;\n\nexport default function EffectHook(&#123; dep &#125;) &#123;\n  const [width, setWidth] &#x3D; useState(window.innerWidth);\n  \n  function handleWindowResize() &#123;\n    const w &#x3D; window.innerWidth;\n    setWidth(w);\n  &#125;\n  \n  useEffect(() &#x3D;&gt; &#123;\n    window.addEventListener(&#39;resize&#39;, handleWindowResize);\n    return () &#x3D;&gt; &#123;\n      window.removeEventListener(&#39;resize&#39;, handleWindowResize);\n    &#125;;\n  &#125;, \n    &#x2F;&#x2F; deps\n    []\n  );\n\n  return (\n    &lt;&gt;\n      &lt;p&gt;window.innerWidth: &#123;width&#125;&lt;&#x2F;p&gt;\n    &lt;&#x2F;&gt;\n  );\n&#125;\nå¤åˆ¶ä»£ç \n\nuseContextè¿™ä¸ªé’©å­è¿˜æ˜¯å’ŒåŸæœ‰çš„Context.Providerã€Context.Consumerä¸€æ ·çš„ç†è§£å³å¯ã€‚ç”¨æ³•ç¤ºä¾‹å¦‚ä¸‹ï¼Œç†è§£æ–¹ä¾¿ï¼Œä¸å†èµ˜è¿°ã€‚\nimport React, &#123; useContext &#125; from &#39;react&#39;;\n\nexport const souliz &#x3D; &#123;\n  name: &#39;souliz&#39;,\n  description: &#39;A normal human named by his cat.&#39;\n&#125;;\n\nexport const UserContext &#x3D; React.createContext(souliz);\n\nexport default function ContextHook() &#123;\n  const context &#x3D; useContext(UserContext);\n\n  return (\n    &lt;&gt;\n      &lt;p&gt;UserContext name: &#123;context.name&#125;&lt;&#x2F;p&gt;\n      &lt;p&gt;UserContext description: &#123;context.description&#125;&lt;&#x2F;p&gt;\n    &lt;&#x2F;&gt;\n  );\n&#125;\nå¤åˆ¶ä»£ç \n\nuseMemoæœ‰æ—¶å€™æˆ‘ä»¬ä¼šé‡åˆ°ä¸€ä¸ªæè€—æ€§èƒ½çš„å‡½æ•°æ–¹æ³•ï¼Œä½†ç”±äºä¾èµ–äº†å‡½æ•°ç»„ä»¶é‡Œä¸€äº›çŠ¶æ€å€¼ï¼Œåˆä¸å¾—ä¸æ”¾åœ¨å…¶ä¸­ã€‚é‚£ä¹ˆå¦‚æœæˆ‘ä»¬æ¯æ¬¡æ¸²æŸ“éƒ½å»é‡å¤è°ƒç”¨çš„å‘ï¼Œç»„ä»¶çš„æ¸²æŸ“å¿…ç„¶ä¼šååˆ†å¡é¡¿ã€‚\nå› æ­¤å†™äº†ä»¥ä¸‹ç¤ºä¾‹éªŒè¯ï¼Œä¸€ä¸ªè®¡ç®—æ–æ³¢é‚£å¥‘çš„å‡½æ•°ï¼ˆä¼—æ‰€å‘¨çŸ¥çš„æ…¢ï¼‰ï¼Œè¯»è€…å¯ä»¥æ‹·è´è¿™æ®µä»£ç ï¼Œæ³¨é‡ŠuseMemoé‚£ä¸€è¡Œï¼Œä½¿ç”¨ç›´æ¥è®¡ç®—æ¥çœ‹ï¼Œç‚¹å‡»æŒ‰é’®è§¦å‘ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œä¼šå‘ç°å¾ˆå¡é¡¿ï¼ˆå½“ç„¶äº†ï¼‰ï¼Œé‚£ä¹ˆæ­¤æ—¶useMemoä½œç”¨å°±å‘æŒ¥å‡ºæ¥äº†ï¼Œå…¶å®ç†è§£ä¸Šè¿˜æ˜¯å’ŒåŸæœ‰çš„React.memoä¸€æ ·ï¼Œå¯ç”¨äºç¼“å­˜ä¸€ä¸‹è®¡ç®—ç¼“æ…¢çš„å‡½æ•°ï¼Œå¦‚æœä¾èµ–æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œåˆ™é‡å¤ä½¿ç”¨æ—§å€¼ã€‚å‰æå¿…ç„¶æ˜¯è¿™ä¸ªå‡½æ•°æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œå¦åˆ™å¿…ç„¶ä¼šå¼•å‘é—®é¢˜ã€‚\nï¼ˆuseCallbackå…¶å®ä¹Ÿå’ŒuseMemoé“ç†ç±»ä¼¼ï¼Œä¸è¿‡å®ƒè§£å†³çš„é—®é¢˜å…¶å®å¦‚æœä¾èµ–ä¸æ”¹å˜ï¼Œä½¿ç”¨æ—§çš„å‡½æ•°å¼•ç”¨ï¼Œåœ¨useEffectçš„ä¾èµ–æ˜¯å‡½æ•°æ—¶ï¼Œå¯ä»¥ä½¿ç”¨useCallbackçš„ç‰¹æ€§æ¥é¿å…é‡å¤è§¦å‘å‰¯ä½œç”¨çš„å‘ç”Ÿï¼Œå› æ­¤ä¸å†èµ˜è¿°useCallbackï¼‰\nimport React, &#123; useState, useMemo &#125; from &#39;react&#39;;\n\nlet fib &#x3D; n &#x3D;&gt; (n &gt; 1 ? fib(n - 1) + fib(n - 2) : n);\nlet renders &#x3D; 0;\n\nexport default function MemoHook() &#123;\n  const defaultInput &#x3D; 37;\n  const [input, setInput] &#x3D; useState(defaultInput);\n  const [time, setTime] &#x3D; useState(0);\n  const value &#x3D; useMemo(() &#x3D;&gt; fib(input), [input]);\n  &#x2F;&#x2F; æ¥æ¥æ¥ï¼Œçœ‹çœ‹ä¸ä½¿ç”¨Memoçš„åæœå°±æ˜¯å¡é¡¿\n  &#x2F;&#x2F; const value &#x3D; fib(input);\n\n  return (\n    &lt;&gt;\n      &lt;p&gt;fib value is &#123;value&#125;&lt;&#x2F;p&gt;\n      &lt;input\n        type&#x3D;&quot;number&quot;\n        value&#x3D;&#123;input&#125;\n        onChange&#x3D;&#123;e &#x3D;&gt; setInput(e.target.value)&#125;\n      &#x2F;&gt;\n      &lt;button onClick&#x3D;&#123;() &#x3D;&gt; setTime(time + 1)&#125;&gt;Trigger render &#123;time&#125;&lt;&#x2F;button&gt;\n      &lt;footer&gt;render times: &#123;renders++&#125;&lt;&#x2F;footer&gt;\n    &lt;&#x2F;&gt;\n  );\n&#125;\nå¤åˆ¶ä»£ç \n\nuseRefuseRefè¿™ä¸ªé’©å­éœ€è¦æ›´é€šç”¨çš„ç†è§£æ–¹å¼ï¼Œä¸åŒäºæˆ‘ä»¬ä¹‹å‰ä½¿ç”¨çš„React.createRef()ï¼Œè¿™ä¸ªé’©å­ç”¨äºåˆ›å»ºçš„æ˜¯ä¸€ä¸ªå¼•ç”¨å¯¹è±¡ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨äºçªç ´useStateæ‰€å¸¦æ¥çš„å±€é™ã€‚ä»€ä¹ˆæ„æ€å‘¢ï¼ŸuseStateæ¯æ¬¡æ¸²æŸ“éƒ½æ˜¯æ–°çš„å€¼ï¼Œä¹Ÿå°±æ˜¯ä¸‹é¢ç¤ºä¾‹ä¸­ï¼Œå¦‚æœæˆ‘ç‚¹å‡»3æ¬¡æŒ‰é’®ï¼Œåˆ†åˆ«æ›´æ–°äº†å€¼è§¦å‘5æ¬¡ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œé‚£ä¹ˆé€šè¿‡å»¶æ—¶5ç§’åè·å–currentå€¼å¦‚ç¤ºä¾‹äºŒï¼Œå¦‚æœéœ€è¦åœ¨æŸäº›æ“ä½œä¸­è·å–ç»„ä»¶æœ€æ–°çš„æŸäº›stateæ˜¯æœ€æ–°çš„å€¼çš„æ—¶å€™ï¼ŒuseRefå¯ä»¥æ´¾ä¸Šå¤§ç”¨åœºã€‚\nimport React, &#123; useRef, useEffect, useState &#125; from &#39;react&#39;;\n\nexport default function RefHook() &#123;\n  const [count, setCount] &#x3D; useState(0);\n  const latestCount &#x3D; useRef(count);\n\n  latestCount.current &#x3D; count;\n  useEffect(() &#x3D;&gt; &#123;\n    setTimeout(() &#x3D;&gt; &#123;\n      console.log(&#96;Ref: You clicked $&#123;latestCount.current&#125; times&#96;);\n      console.log(&#96;state: You clicked $&#123;count&#125; times&#96;);\n    &#125;, 5000);\n  &#125;);\n\n  return (\n    &lt;&gt;\n      &lt;p&gt;You clicked &#123;count&#125; times&lt;&#x2F;p&gt;\n      &lt;button onClick&#x3D;&#123;() &#x3D;&gt; setCount(count + 1)&#125;&gt;Click me&lt;&#x2F;button&gt;\n    &lt;&#x2F;&gt;\n  );\n&#125;\nå¤åˆ¶ä»£ç \n\nRef: You clicked 3 times\nstate: You clicked 1 times\nRef: You clicked 3 times\nstate: You clicked 2 times\nRef: You clicked 3 times\nstate: You clicked 3 times\nå¤åˆ¶ä»£ç \n\nuseReducerç›¸ä¿¡åŒå­¦ä»¬éƒ½ä½¿ç”¨è¿‡reduxï¼ŒReact Teamè€ƒè™‘åˆ°è¿™ç§ä½¿ç”¨æ–¹å¼å¸¸è§ï¼Œäºæ˜¯è®¾è®¡å‡ºæ¥äº†è¿™ä¹ˆä¸€ä¸ªé’©å­ã€‚è¿™æ ·çš„è¯å…¶å®è§£å†³äº†æˆ‘ä»¬å¸¸è§å†™reduxçš„å¤šæ–‡ä»¶è·³è·ƒç¼–å†™çš„çƒ¦æ¼ï¼Œè€Œä¸”ååˆ†æ˜“äºç†è§£ã€‚ï¼ˆå½“ç„¶è¿˜æœ‰æ¯”è¾ƒé«˜çº§çš„ç”¨æ³•ï¼‰ã€‚ä»¥ä¸‹ä»£ç ç¤ºä¾‹ã€‚\nimport React, &#123; useState, useReducer &#125; from &#39;react&#39;;\n\nconst defaultTodos &#x3D; [\n  &#123;\n    id: 1,\n    text: &#39;Todo 1&#39;,\n    completed: false\n  &#125;,\n  &#123;\n    id: 2,\n    text: &#39;Todo 2&#39;,\n    completed: false\n  &#125;\n];\n\nfunction todosReducer(state, action) &#123;\n  switch (action.type) &#123;\n    case &#39;add&#39;:\n      return [\n        ...state,\n        &#123;\n          id:  Date.now(),\n          text: action.text,\n          completed: false\n        &#125;\n      ];\n    case &#39;complete&#39;:\n      return state.map(todo &#x3D;&gt; &#123;\n        if (todo.id &#x3D;&#x3D;&#x3D; action.id) &#123;\n          todo.completed &#x3D; true;\n        &#125;\n        return todo;\n      &#125;);\n    default:\n      return state;\n  &#125;\n&#125;\n\nexport default function ReducerHook() &#123;\n  const [todos, dispatch] &#x3D; useReducer(todosReducer, defaultTodos);\n  const [value, setValue] &#x3D; useState(&#39;&#39;);\n\n  function handleTextChange(e) &#123;\n    setValue(e.target.value);\n  &#125;\n\n  function handleAddTodo() &#123;\n    if (value &#x3D;&#x3D;&#x3D; &#39;&#39;) &#123;\n      return;\n    &#125;\n    dispatch(&#123;\n      type: &#39;add&#39;,\n      text: value\n    &#125;);\n    setValue(&#39;&#39;);\n  &#125;\n\n  function handleCompleteTodo(id) &#123;\n    dispatch(&#123;\n      type: &#39;complete&#39;,\n      id\n    &#125;);\n  &#125;\n\n  return (\n    &lt;&gt;\n      &lt;section&gt;\n        &lt;input\n          type&#x3D;&quot;text&quot;\n          onChange&#x3D;&#123;handleTextChange&#125;\n          value&#x3D;&#123;value&#125;\n        &#x2F;&gt;\n        &lt;button onClick&#x3D;&#123;handleAddTodo&#125;&gt;Add Todo&lt;&#x2F;button&gt;\n      &lt;&#x2F;section&gt;\n      &lt;ul className&#x3D;&quot;todos&quot;&gt;\n        &#123;todos.map(todo &#x3D;&gt; (\n          &lt;ol id&#x3D;&#123;todo.id&#125; key&#x3D;&#123;todo.id&#125;&gt;\n            &lt;span\n              style&#x3D;&#123;&#123;\n                textDecoration: todo.completed ? &#39;line-through&#39; : &#39;none&#39;\n              &#125;&#125;\n            &gt;\n              &#123;todo.text&#125;\n            &lt;&#x2F;span&gt;\n            &lt;input\n              type&#x3D;&quot;checkbox&quot;\n              disabled&#x3D;&#123;todo.completed&#125;\n              onClick&#x3D;&#123;() &#x3D;&gt; handleCompleteTodo(todo.id)&#125;\n            &#x2F;&gt;\n          &lt;&#x2F;ol&gt;\n        ))&#125;\n      &lt;&#x2F;ul&gt;\n    &lt;&#x2F;&gt;\n  );\n&#125;\nå¤åˆ¶ä»£ç \n\nå…¶å®useReducerçš„åŸç†å¤§æ¦‚ä¹Ÿå¯ä»¥è¿™ä¹ˆæ¥å®ç°ã€‚\nfunction useReducer(reducer, initialState) &#123;\n  const [state, setState] &#x3D; useState(initialState);\n\n  function dispatch(action) &#123;\n    const nextState &#x3D; reducer(state, action);\n    setState(nextState);\n  &#125;\n\n  return [state, dispatch];\n&#125;\nå¤åˆ¶ä»£ç \n\nç›¸ä¿¡å­¦å®Œè¿™äº›Hooksçš„ä½¿ç”¨åï¼Œè®¸å¤šåŒå­¦éƒ½æ˜¯å†…å¿ƒå……æ»¡äº†å¾ˆå¤šç–‘æƒ‘çš„åŒæ—¶ä¹Ÿæƒ³è¦å°è¯•çœ‹çœ‹æ€ä¹ˆä½¿ç”¨åˆ°å®é™…é¡¹ç›®äº†ã€‚\nå½“ç„¶ç°åœ¨Reactå®˜æ–¹çš„å»ºè®®æ˜¯ï¼š\n\nå¯ä»¥å°è§„æ¨¡çš„ä½¿ç”¨äº†ï¼Œä½†æ˜¯æ— éœ€é‡å†™ä»¥å‰çš„ç»„ä»¶å®ç°ã€‚Reactæ˜¯ä¸ä¼šç§»é™¤class Componentè¿™äº›åŸæœ‰APIçš„ã€‚\nå¦‚æœå†³å®šä½¿ç”¨Hooksçš„è¯ï¼Œå¯ä»¥åŠ ä¸ŠReactæä¾›çš„eslint-plugin-react-hooksï¼Œç”¨äºæ£€æµ‹å¯¹äºHooksçš„ä¸æ­£å½“ä½¿ç”¨ã€‚ï¼ˆå¬è¯´create-react-appå¾ˆå¿«å°†ä¼šåŠ ä¸Šè¿™ä¸ªé…ç½®ï¼‰\nå­¦ä¹ ä¸ä½¿ç”¨React Hookså…¶å®æ›´éœ€è¦çš„æ˜¯æ¢ä¸€ç§å¿ƒæ™ºæ¨¡å‹å»ç†è§£ï¼ŒHooksæ›´å¤šçš„åƒæ˜¯ä¸€ä¸ªåŒæ­¥å¤„ç†æ•°æ®çš„è¿‡ç¨‹ã€‚\n\nHookså­˜åœ¨çš„æ„ä¹‰ä»¥åŠåŸå› ï¼Ÿä¼ ç»Ÿç»„ä»¶çš„å¼€å‘æœ‰ä»¥ä¸‹å‡ ä¸ªå±€é™ï¼š\n\néš¾ä»¥å¤ç”¨å«æœ‰stateï¼ˆçŠ¶æ€ï¼‰çš„ç»„ä»¶é€»è¾‘ã€‚HOCã€render propsè¿™ä¸¤ç§åšæ³•è™½ç„¶å¯ä»¥è§£å†³ï¼Œä½†æ˜¯ä¸€æ˜¯éœ€è¦é‡æ–°æ¶æ„ç»„ä»¶ï¼Œå¯èƒ½ä¼šä½¿ä»£ç æ›´å¤æ‚ã€‚äºŒæ˜¯å¯èƒ½ä¼šé€ æˆwrapper hellã€‚\nå¤æ‚ç»„ä»¶éš¾ä»¥ç†è§£æ¶ˆåŒ–ã€‚å› ä¸ºçŠ¶æ€é€»è¾‘ã€æ¶ˆæ¯è®¢é˜…ã€è¯·æ±‚ã€ä»¥åŠå‰¯ä½œç”¨åœ¨ä¸åŒçš„ç”Ÿå‘½é’©å­æ··ä¹±ç©¿æ’ï¼Œå½¼æ­¤è€¦åˆï¼Œä½¿å¾—ä¸€ä¸ªç»„ä»¶éš¾ä»¥å†ç»†åŒ–æ‹†åˆ†ã€‚å³ä½¿ä½¿ç”¨äº†Reduxè¿™ç§çŠ¶æ€ç®¡ç†çš„åº“åï¼Œä¹Ÿå¼•è¿›äº†æ›´é«˜å±‚çš„æŠ½è±¡ï¼ŒåŒæ—¶éœ€è¦åœ¨ä¸åŒçš„æ–‡ä»¶ä¹‹é—´ç©¿æ’è·³è·ƒï¼Œå¤ç”¨ç»„ä»¶ä¹Ÿä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹ã€‚\nclassè®©äººå›°æƒ‘ã€‚ï¼ˆå…ˆåˆ«æ€¥ç€åå¯¹ï¼‰ä¸€ä¸ªæ˜¯thisè®©äººå›°æƒ‘ï¼Œå¸¸å¸¸éœ€è¦ç»‘å®šã€ç¬¬äºŒæ˜¯classè½¬è¯‘å’Œå‹ç¼©å‡ºæ¥çš„ä»£ç å…¶å®ç›¸å½“å†—é•¿ã€‚\n\nHooksçš„æ³¨æ„äº‹é¡¹\nåªèƒ½åœ¨å‡½æ•°çš„é¡¶å±‚ä½¿ç”¨ï¼Œä¸èƒ½åµŒå¥—äºå¾ªç¯ä½“ã€åˆ¤æ–­æ¡ä»¶ç­‰é‡Œé¢ã€‚åŸå› æ˜¯å› ä¸ºéœ€è¦ç¡®ä¿Hooksæ¯æ¬¡åœ¨ç»„ä»¶æ¸²æŸ“ä¸­éƒ½æ˜¯æŒ‰ç…§åŒæ ·çš„é¡ºåºï¼Œè¿™ä¸ªååˆ†é‡è¦ï¼Œå…·ä½“åŸå› å°†ä¼šæ˜¯ä¸€ä¸ªå¾ˆå¤§çš„ç¯‡å¹…\nåªèƒ½åœ¨Reactå‡½æ•°ç»„ä»¶é‡Œï¼Œæˆ–è€…è‡ªå®šä¹‰é’©å­(custom Hooks)é‡Œä½¿ç”¨ã€‚\n\n","slug":"React Hooksçš„å­¦ä¹ ç¬”è®°","date":"2021-09-15T12:50:54.000Z","categories_index":"","tags_index":"","author_index":"Beastrong"},{"id":"d7aff688f09321eb25c6942e9ba97bfe","title":"æ•°ç»„è½¬æ ‘","content":"å‰ç«¯ä½¿ç”¨æ ‘æ’ä»¶æ˜¯ä¸€ä¸ªéå¸¸å¸¸è§çš„ä½¿ç”¨åœºæ™¯ã€‚æ ‘æ’ä»¶çš„æ•°æ®æ ¼å¼åœ¨æˆ‘ä½¿ç”¨è¿‡çš„æ’ä»¶éƒ½æ˜¯ä¸€æ ·çš„ã€‚ è€Œè¿™ä¸ªæ•°æ®æ ¼å¼æ˜¯ç”±åç«¯ç»„è£…å¥½è¿”å›ç»™å‰ç«¯è¿˜æ˜¯å‰ç«¯è‡ªå·±ç»„è£…ï¼Œè¿™ä¸ªé—®é¢˜åœ¨å‰ç«¯å’Œåç«¯ä¹Ÿç»å¸¸æ‹¿æ¥æ’•é€¼ã€‚\nå¤§å¤šæ•°æƒ…å†µä¸‹åç«¯ä¼šç»„è£…å¥½ï¼Œä¹Ÿæœ‰ä¸€éƒ¨åˆ†å‰ç«¯è‡ªå·±å¤„ç†ï¼Œæ—©ä¹‹å‰æˆ‘åˆä½œè¿‡çš„ä¸€ä¸ªåç«¯æå‡ºäº†ä¸€ä¸ªè§‚ç‚¹ï¼Œ æµè§ˆå™¨æ˜¯æ¯ä¸€ä¸ªç”¨æˆ·éƒ½æœ‰çš„ï¼ŒæœåŠ¡å™¨æ˜¯æ‰€æœ‰ç”¨æˆ·å…±åŒè®¿é—®çš„ï¼Œåç«¯é€’å½’éå†ç»„è£…æ ‘æ•°æ®æ¯”å‰ç«¯å¤„ç†æ›´è€—è´¹æ€§èƒ½ã€‚\né‚£æ—¶å€™æˆ‘å±…ç„¶æ— è¨€ä»¥å¯¹ï¼Œå‡ åæ¡æ•°æ®ç»„è£…æˆæ ‘ç»“æ„çš„æ•°æ®å±…ç„¶èƒ½ç‰µæ‰¯åˆ°æœåŠ¡å™¨æ€§èƒ½é—®é¢˜ï¼Œé‚£è¿™ä¸ªæœåŠ¡å™¨è¿˜èƒ½åšä»€ä¹ˆï¼Ÿ\nä¹Ÿä¸æ˜¯æƒ³è®¨è®ºç”±å‰ç«¯è¿˜æ˜¯åç«¯å¤„ç†çš„é—®é¢˜ï¼Œè¿™ç§ç®€å•çš„ä¸œè¥¿ï¼Œåªè¦å•†é‡ä¸€ä¸‹ï¼Œçº¦å®šå¥½äº†ï¼Œå“ªä¸€è¾¹å¤„ç†éƒ½æ˜¯å¯ä»¥çš„ã€‚\nç°åœ¨ç½‘ä¸Šæ•°ç»„è½¬æ ‘ç»“æ„çš„æ–¹æ³•å¾ˆå¤šï¼Œéƒ½èƒ½å¤Ÿå¾—åˆ°æƒ³è¦çš„ç»“æœï¼Œä»Šå¤©åˆ†äº«è¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘è®¤ä¸ºåº”è¯¥æ˜¯æ€§èƒ½æœ€ä¼˜çš„ï¼š\nlet arr &#x3D; [\n  &#123;id: 1, name: &#39;éƒ¨é—¨1&#39;, pid: 0&#125;,\n  &#123;id: 2, name: &#39;éƒ¨é—¨2&#39;, pid: 3&#125;,\n  &#123;id: 3, name: &#39;éƒ¨é—¨3&#39;, pid: 1&#125;,\n  &#123;id: 4, name: &#39;éƒ¨é—¨3&#39;, pid: 0&#125;,\n  &#123;id: 5, name: &#39;éƒ¨é—¨4&#39;, pid: 4&#125;,\n  &#123;id: 6, name: &#39;éƒ¨é—¨5&#39;, pid: 0&#125;,\n  &#123;id: 7, name: &#39;éƒ¨é—¨5&#39;, pid: 6&#125;,\n  &#123;id: 8, name: &#39;éƒ¨é—¨5&#39;, pid: 7&#125;,\n]\n\nfunction arrayToTree(data) &#123;\n  let result &#x3D; [];\n  let itemMap &#x3D; &#123;&#125;;\n  for (let i &#x3D; 0; i &lt; data.length; i++) &#123;\n    let item &#x3D; data[i];\n    let id &#x3D; item.id;\n    let pid &#x3D; item.parentResourceId;\n    if(!itemMap[id])&#123;\n      itemMap[id] &#x3D; &#123;\n        children: []\n      &#125;\n    &#125;\n    itemMap[id] &#x3D; &#123;\n      ...item,\n      children: itemMap[id][&#39;children&#39;]\n    &#125;\n    let treeItem &#x3D; itemMap[id];\n    if(pid &#x3D;&#x3D;&#x3D; 0)&#123;\n      result.push(treeItem);\n    &#125;else&#123;\n      if(!itemMap[pid])&#123;\n        itemMap[pid] &#x3D; &#123;\n          children: []\n        &#125;\n      &#125;\n      itemMap[pid][&#39;children&#39;].push(treeItem);\n    &#125;\n  &#125;\n  return result;\n&#125;\nconsole.log(arrayToTree(arr));\n\nå¾—åˆ°çš„ç»“æœï¼š\n[    &#123;        &quot;id&quot;: 1,        &quot;name&quot;: &quot;éƒ¨é—¨1&quot;,        &quot;pid&quot;: 0,        &quot;children&quot;: [            &#123;                &quot;id&quot;: 2,                &quot;name&quot;: &quot;éƒ¨é—¨2&quot;,                &quot;pid&quot;: 1,                &quot;children&quot;: []\n            &#125;,\n            &#123;\n                &quot;id&quot;: 3,\n                &quot;name&quot;: &quot;éƒ¨é—¨3&quot;,\n                &quot;pid&quot;: 1,\n                &quot;children&quot;: []\n            &#125;\n        ]\n    &#125;,\n    &#123;\n        &quot;id&quot;: 4,\n        &quot;name&quot;: &quot;éƒ¨é—¨3&quot;,\n        &quot;pid&quot;: 0,\n        &quot;children&quot;: [\n            &#123;\n                &quot;id&quot;: 5,\n                &quot;name&quot;: &quot;éƒ¨é—¨4&quot;,\n                &quot;pid&quot;: 4,\n                &quot;children&quot;: []\n            &#125;\n        ]\n    &#125;,\n    &#123;\n        &quot;id&quot;: 6,\n        &quot;name&quot;: &quot;éƒ¨é—¨5&quot;,\n        &quot;pid&quot;: 0,\n        &quot;children&quot;: [\n            &#123;\n                &quot;id&quot;: 7,\n                &quot;name&quot;: &quot;éƒ¨é—¨5&quot;,\n                &quot;pid&quot;: 6,\n                &quot;children&quot;: [\n                    &#123;\n                        &quot;id&quot;: 8,\n                        &quot;name&quot;: &quot;éƒ¨é—¨5&quot;,\n                        &quot;pid&quot;: 7,\n                        &quot;children&quot;: []\n                    &#125;\n                ]\n            &#125;\n        ]\n    &#125;\n]\n\næ€è·¯å¾ˆç®€å•ï¼Œç»´æŠ¤ä¸€ä¸ªjsonçš„mapï¼Œæ¯ä¸€ä¸ªidéƒ½æœ‰è‡ªå·±çš„childrenå’Œæœ¬èº«çš„æ•°æ®ï¼Œ æŠŠå±äºè¿™ä¸ªidçš„pidé¡¹éƒ½å­˜å…¥childrenæ•°ç»„ï¼Œå› ä¸ºjsonçš„mapéƒ½æ˜¯å¯¹è±¡ï¼Œæµ…æ‹·è´ä¸‹ï¼Œ åªè¦æ˜¯å±äºè¿™ä¸ªå¯¹è±¡çš„childrenæ•°ç»„éƒ½ä¼šæ˜¯åŒä¸€ä¸ªã€‚å¯ä»¥æ‰“å°itemMapçœ‹çœ‹æ¯ä¸€ä¸ªidå¯¹åº”çš„æ•°æ®ã€‚\n","slug":"æ•°ç»„è½¬æ ‘","date":"2021-09-02T13:54:10.000Z","categories_index":"","tags_index":"","author_index":"Beastrong"},{"id":"6bbcc54b583d8f9e999b08536b9ffec3","title":"å¯èƒ½æ˜¯ä½ éœ€è¦çš„ React + TypeScript 50 æ¡è§„èŒƒå’Œç»éªŒ","content":"1. æ³¨é‡Š(1) æ–‡ä»¶é¡¶éƒ¨çš„æ³¨é‡Šï¼ŒåŒ…æ‹¬æè¿°ã€ä½œè€…ã€æ—¥æœŸ&#x2F;**\n * @description xxxxxx\n * @author chengfeng\n * @since 19&#x2F;05&#x2F;21\n *&#x2F;\nå¤åˆ¶ä»£ç \n\n(2) æ¨¡å—çš„æ³¨é‡Š&#x2F;**\n * æ‹·è´æ•°æ®\n * @param  &#123;*&#125;  data   è¦æ‹·è´çš„æºæ•°æ®\n * @param  &#123;boolean&#125; [isDeep&#x3D;false] æ˜¯å¦æ·±æ‹·è´ï¼Œé»˜è®¤æµ…æ‹·è´\n * @return &#123;*&#125;         è¿”å›æ‹·è´åçš„æ•°æ®\n *&#x2F;\nå¤åˆ¶ä»£ç \n\n(3) ä¸šåŠ¡ä»£ç æ³¨é‡Š&#x2F;*ä¸šåŠ¡ä»£ç æ³¨é‡Š*&#x2F;\nå¤åˆ¶ä»£ç \n\n(4) å˜é‡æ³¨é‡Šinterface IState &#123;\n  &#x2F;&#x2F; åå­—\n  name: string;\n  &#x2F;&#x2F; ç”µè¯\n  phone: number;\n  &#x2F;&#x2F; åœ°å€\n  address: string;\n&#125;\nå¤åˆ¶ä»£ç \n\n2. å¼•ç”¨ç»„ä»¶é¡ºåº\nå…ˆå¼•ç”¨å¤–éƒ¨ç»„ä»¶åº“,,å†å¼•ç”¨å½“å‰ç»„ä»¶å—çº§ç»„ä»¶, ç„¶åæ˜¯ common é‡Œçš„å…¬å…±å‡½æ•°åº“æœ€åæ˜¯ css æ ·å¼\n\nimport * as React from &#39;react&#39;;\nimport &#123; Dropdown, Menu, Icon &#125; from &#39;antd&#39;;\nimport Header from &#39;.&#x2F;Header&#39;;\nimport toast from &#39;common&#x2F;toast&#39;;\nimport &#39;.&#x2F;index.less&#39;;\nå¤åˆ¶ä»£ç \n\n3. å¼•å·\nä½¿ç”¨å•å¼•å·,æˆ–è€… es6 çš„åå¼•å·\n\n4. ç¼©è¿›\nä½¿ç”¨ä¸¤ä¸ªç©ºæ ¼\n\nconst handleCheck &#x3D; () &#x3D;&gt; &#123;\n  onCancel &amp;&amp; onCancel();\n  onClose &amp;&amp; onClose();\n&#125;;\nå¤åˆ¶ä»£ç \n\n5. åˆ†å·\né™¤äº†ä»£ç å—çš„ä»¥å¤–çš„æ¯ä¸ªè¡¨è¾¾å¼åå¿…é¡»åŠ åˆ†å·ã€‚\n\n6. æ‹¬å·ä¸‹åˆ—å…³é”®å­—åå¿…é¡»æœ‰å¤§æ‹¬å·ï¼ˆå³ä½¿ä»£ç å—çš„å†…å®¹åªæœ‰ä¸€è¡Œï¼‰ï¼šif, else, for, while, do, switch, try, catch, finally, withã€‚\n&#x2F;&#x2F; not good\nif (condition) doSomething();\n\n&#x2F;&#x2F; good\nif (condition) &#123;\n  doSomething();\n&#125;\nå¤åˆ¶ä»£ç \n\n7. ç©ºæ ¼\näºŒå…ƒå’Œä¸‰å…ƒè¿ç®—ç¬¦ä¸¤ä¾§å¿…é¡»æœ‰ä¸€ä¸ªç©ºæ ¼ï¼Œä¸€å…ƒè¿ç®—ç¬¦ä¸æ“ä½œå¯¹è±¡ä¹‹é—´ä¸å…è®¸æœ‰ç©ºæ ¼ã€‚\n\n&#x2F;&#x2F; bad\n++ x;\ny ++;\nz &#x3D; x?1:2;\n\n&#x2F;&#x2F; good\n++x;\ny++;\nz &#x3D; x ? 1 : 2;\nå¤åˆ¶ä»£ç \n\n\nç”¨ä½œä»£ç å—èµ·å§‹çš„å·¦èŠ±æ‹¬å· { å‰å¿…é¡»æœ‰ä¸€ä¸ªç©ºæ ¼ã€‚\n\n&#x2F;&#x2F; bad\nif (condition)&#123;\n&#125;\n\nwhile (condition)&#123;\n&#125;\n\nfunction funcName()&#123;\n&#125;\n\n&#x2F;&#x2F; good\nif (condition) &#123;\n&#125;\n\nwhile (condition) &#123;\n&#125;\n\nfunction funcName() &#123;\n&#125;\n\nå¤åˆ¶ä»£ç \n\n\nif &#x2F; else &#x2F; for &#x2F; while &#x2F; function &#x2F; switch &#x2F; do &#x2F; try &#x2F; catch &#x2F; finally å…³é”®å­—åï¼Œå¿…é¡»æœ‰ä¸€ä¸ªç©ºæ ¼ã€‚\n\n&#x2F;&#x2F; bad\nif(condition) &#123;\n&#125;\n\nwhile(condition) &#123;\n&#125;\n\n(function() &#123;\n&#125;)();\n\n&#x2F;&#x2F; good\nif (condition) &#123;\n&#125;\n\nwhile (condition) &#123;\n&#125;\n\n(function () &#123;\n&#125;)();\nå¤åˆ¶ä»£ç \n\n\nåœ¨å¯¹è±¡åˆ›å»ºæ—¶ï¼Œå±æ€§ä¸­çš„ : ä¹‹åå¿…é¡»æœ‰ç©ºæ ¼ï¼Œ: ä¹‹å‰ä¸å…è®¸æœ‰ç©ºæ ¼ã€‚\n\n&#x2F;&#x2F; bad\nvar obj &#x3D; &#123;\n    a : 1,\n    b:2,\n    c :3\n&#125;;\n\n&#x2F;&#x2F; good\nvar obj &#x3D; &#123;\n    a: 1,\n    b: 2,\n    c: 3\n&#125;;\nå¤åˆ¶ä»£ç \n\n8. æ¢è¡Œ\næ¯ä¸ªç‹¬ç«‹è¯­å¥ç»“æŸåå¿…é¡»æ¢è¡Œã€‚\nåœ¨å‡½æ•°å£°æ˜ã€å‡½æ•°è¡¨è¾¾å¼ã€å‡½æ•°è°ƒç”¨ã€å¯¹è±¡åˆ›å»ºã€æ•°ç»„åˆ›å»ºã€for è¯­å¥ç­‰åœºæ™¯ä¸­ï¼Œä¸å…è®¸åœ¨ , æˆ– ; å‰æ¢è¡Œ\n\n&#x2F;&#x2F; bad\nvar obj &#x3D; &#123;\n    a: 1\n    , b: 2\n    , c: 3,\n&#125;;\n\nfunction test()\n&#123;\n    ...\n&#125;\nfor (const key in object)\n &#123;\n  if (object.hasOwnProperty(key)) &#123;\n    const element &#x3D; object[key];\n\n  &#125;\n&#125;\n&#x2F;&#x2F; good\nvar obj &#x3D; &#123;\n    a: 1,\n    b: 2,\n    c: 3,\n&#125;;\n\nfunction test() &#123;\n    ...\n&#125;\n\nfor (const key in object) &#123;\n  if (object.hasOwnProperty(key)) &#123;\n    const element &#x3D; object[key];\n\n  &#125;\n&#125;\nå¤åˆ¶ä»£ç \n\n\nä¸‹åˆ—å…³é”®å­—åï¼šelse, catch, finally ä¸éœ€è¦æ¢è¡Œ\n\n&#x2F;&#x2F; bad\nif (condition) &#123;\n    ...\n&#125;\nelse &#123;\n    ...\n&#125;\n\ntry &#123;\n    ...\n&#125;\ncatch (e) &#123;\n    ...\n&#125;\nfinally &#123;\n    ...\n&#125;\n\n\n&#x2F;&#x2F; good\nif (condition) &#123;\n    ...\n&#125; else &#123;\n    ...\n&#125;\n\ntry &#123;\n    ...\n&#125; catch (e) &#123;\n    ...\n&#125; finally &#123;\n    ...\n&#125;\nå¤åˆ¶ä»£ç \n\n9. æ•°ç»„ã€å¯¹è±¡\nå¯¹è±¡å±æ€§åä¸éœ€è¦åŠ å¼•å·ï¼›\nå¯¹è±¡ä»¥ç¼©è¿›çš„å½¢å¼ä¹¦å†™ï¼Œä¸è¦å†™åœ¨ä¸€è¡Œï¼›\næ•°ç»„æœ€åä¸è¦æœ‰é€—å·ã€‚\nå¯¹è±¡æœ€åè¦æœ‰é€—å·ã€‚\n\n\n&#x2F;&#x2F; bad\nconst a &#x3D; &#123;\n    &#39;b&#39;: 1\n&#125;;\n\nconst a &#x3D; &#123;b: 1&#125;;\n\nconst a &#x3D; &#123;\n    b: 1,\n    c: 2\n&#125;;\nconst arr &#x3D; [1, 2, 3, 4,];\n\n&#x2F;&#x2F; good\nconst a &#x3D; &#123;\n    b: 1,\n    c: 2,\n&#125;;\n\nconst arr &#x3D; [1, 2, 3, 4];\nå¤åˆ¶ä»£ç \n\n10. å‘½å\nç±»å: å¤§é©¼å³°å¼é£æ ¼ï¼Œå­—æ¯å’Œæ•°å­—ï¼Œä¾‹å¦‚ï¼šAbcTestã€‚ç¦æ­¢æ±‰å­—ã€ç‰¹æ®Šç¬¦å·ï¼Œç¦æ­¢éå¤§é©¼å³°å¼é£æ ¼ã€‚\nå‡½æ•°å: å°é©¼å³°å¼é£æ ¼ï¼Œå­—æ¯å’Œæ•°å­—ï¼Œä¾‹å¦‚ï¼šabcTestã€‚ç¦æ­¢æ±‰å­—ã€ç‰¹æ®Šç¬¦å·ï¼Œç¦æ­¢éå°é©¼å³°å¼é£æ ¼ï¼Œä¾‹å¦‚snake_caseç­‰ã€‚\nå˜é‡å: åŒå‡½æ•°åã€‚\nå¸¸é‡: å…¨å¤§å†™é£æ ¼ï¼Œå¤§å†™å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ï¼Œå•è¯ä¹‹é—´ä»¥ä¸‹åˆ’çº¿åˆ†éš”ï¼Œä¾‹å¦‚ï¼šABC_TESTã€‚ç¦æ­¢æ±‰å­—ã€ç‰¹æ®Šç¬¦å·ã€å°å†™å­—æ¯ã€‚\nä½¿ç”¨ onXxx å½¢å¼ä½œä¸º props ä¸­ç”¨äºå›è°ƒçš„å±æ€§åç§°ã€‚\n\ninterface IProps &#123;\n  onClose?: () &#x3D;&gt; void;\n  onOk?: (item: Record&lt;string, any&gt;) &#x3D;&gt; void;\n&#125;\nå¤åˆ¶ä»£ç \n\n\nç»„ä»¶å†…çš„äº‹ä»¶å‡½æ•°ä½¿ç”¨ handle å¼€å¤´å°¾,handleCheckBtnã€‚\nä½¿ç”¨ withXxx å½¢å¼çš„è¯ä½œä¸ºé«˜é˜¶ç»„ä»¶çš„åç§°ã€‚\næ¥å£å‘½åå‰é¢å¸¦ä¸Š I è¡¨ç¤º interface\n\ninterface IProps &#123;&#125;\ninterface IState &#123;&#125;\nå¤åˆ¶ä»£ç \n\n11. ç±»å‹æ–­è¨€&#x2F;&#x2F; bad\nfunction getLength(something: string | number): number &#123;\n    return something.length;\n&#125;\n\n&#x2F;&#x2F; index.ts(2,22): error TS2339: Property &#39;length&#39; does not exist on type &#39;string | number&#39;.\n&#x2F;&#x2F;   Property &#39;length&#39; does not exist on type &#39;number&#39;.\n\n&#x2F;&#x2F; bad \nfunction getLength(something: string | number): number &#123;\n    if ((&lt;string&gt;something).length) &#123;\n        return (&lt;string&gt;something).length;\n    &#125; else &#123;\n        return something.toString().length;\n    &#125;\n&#125;\n\n&#x2F;&#x2F; good\nfunction getLength(something: string | number): number &#123;\n  if (typeof something &#x3D;&#x3D;&#x3D; &#39;string&#39;) &#123;\n    return something.length;\n  &#125; else &#123;\n    return something.toString().length;\n  &#125;\n&#125;\n\nå¤åˆ¶ä»£ç \n\n12. interfaceå£°æ˜é¡ºåºæ—¥å¸¸ç”¨åˆ°æ¯”è¾ƒå¤šçš„æ˜¯å››ç§ï¼Œåªè¯»å‚æ•°æ”¾ç¬¬ä¸€ä½ï¼Œå¿…é€‰å‚æ•°ç¬¬äºŒä½ï¼Œå¯é€‰å‚æ•°æ¬¡ä¹‹ï¼Œä¸ç¡®å®šå‚æ•°æ”¾æœ€å\ninterface iProps &#123;\n  readonly x: number;\n  readonly y: number;\n  name: string;\n  age: number;\n  height?: number;\n  [propName: string]: any;\n&#125;\nå¤åˆ¶ä»£ç \n\n13. tså¥½ç”¨çš„ç›¸å…³å·¥å…·æ³›å‹\nRecord&lt;string,any&gt; ç”¨è¿™ä¸ªæ¥å£°æ˜å¯¹è±¡ç»“æ„çš„ç±»å‹\n\nç”¨äºå®šä¹‰ä¸€ä¸ªjavascriptçš„å¯¹è±¡ï¼Œkeyæ˜¯å­—ç¬¦ä¸²ï¼Œvalueæ˜¯ä»»æ„ç±»å‹\nconst people:Record&lt;string,any&gt; &#x3D; &#123;\n    name: &#39;chengfeng&#39;,\n    age: 10\n&#125;\nå¤åˆ¶ä»£ç \n\n\nPartial ä½œç”¨æ˜¯å°†ä¼ å…¥çš„å±æ€§å˜ä¸ºå¯é€‰é¡¹.\n\ninterface iPeople &#123;\n    title: string;\n    name: string;\n&#125;\n\nconst people: Partial&lt;iPeople&gt; &#x3D; &#123;\n    title: &#39;Delete inactive users&#39;,\n&#125;;\nå®šä¹‰çš„ç»“æ„å¯ä»¥æ˜¯æ¥å£iPeopleçš„ä»»æ„key\nå¤åˆ¶ä»£ç \n\n\nReadonly ä½œç”¨æ˜¯å°†ä¼ å…¥çš„å±æ€§å˜ä¸ºå˜æˆåªè¯»\n\ninterface iPeople &#123;\n    title: string;\n    name: string;\n&#125;\n\nconst people: Readonly&lt;Todo&gt; &#x3D; &#123;\n    title: &#39;todo list&#39;,\n    name: chenfeng;\n&#125;;\ntitle nameå±æ€§å°±æ˜¯åªè¯»çš„äº†\nå¤åˆ¶ä»£ç \n\n\nRequired çš„ä½œç”¨æ˜¯å°†ä¼ å…¥çš„å±æ€§å˜ä¸ºå¿…é€‰é¡¹\n\ninterface iPeople &#123;\n    title?: string;\n    name?: string;\n&#125;\n\nconst people1: Props &#x3D; &#123; title: &#39;ts&#39; &#125;; &#x2F;&#x2F; OK\n\nconst people22: Required&lt;iPeople&gt; &#x3D; &#123; title: &#39;ts&#39; &#125;; &#x2F;&#x2F; Error: property &#39;name&#39; missing\nå¤åˆ¶ä»£ç \n\næŸ¥çœ‹æ›´å¤š\n14. tsä¸€äº›å¥½ç”¨çš„å°tips\nkeyof\n\ninterface iPeople &#123;\n  name: string;\n  age: number\n&#125;\n\ntype T &#x3D; keyof iPeople &#x2F;&#x2F; -&gt; &quot;name&quot; | &quot;age&quot;\nå¤åˆ¶ä»£ç \n\n\nin\n\ntype Keys &#x3D; &quot;a&quot; | &quot;b&quot;\ntype Obj &#x3D;  &#123;\n  [p in Keys]: any\n&#125; &#x2F;&#x2F; -&gt; &#123; a: any, b: any &#125;\nå¤åˆ¶ä»£ç \n\n15. è§„èŒƒå…¶ä»–\nä¸è¦ä½¿ç”¨ var å£°æ˜å˜é‡\nä¸ä¼šè¢«ä¿®æ”¹çš„å˜é‡ä½¿ç”¨ const å£°æ˜\nå»é™¤å£°æ˜ä½†æœªè¢«å¼•ç”¨çš„ä»£ç \nç¦æ­¢åœ¨ä»£ç é‡Œä½¿ç”¨ debug\nä¸å…è®¸æœ‰ç©ºçš„ä»£ç å—\n\n16. ä»…å½“åˆå§‹ state éœ€è¦ä» props è®¡ç®—å¾—åˆ°çš„æ—¶å€™ï¼Œæ‰å°† state çš„å£°æ˜æ”¾åœ¨æ„é€ å‡½æ•°ä¸­ï¼Œå…¶å®ƒæƒ…å†µä¸‹ä½¿ç”¨é™æ€å±æ€§å£°æ˜ state,å¹¶ä¸”ä¸€èˆ¬æƒ…å†µä¸‹ä¸è¦å°† prop ä¼ ç»™ state&#x2F;&#x2F; bad\nconstructor ()&#123;\n  this.setState(&#123; people: this.props.people &#125;)\n&#125;\n\n&#x2F;&#x2F; good\nstate: IState &#x3D; &#123;\n  people: &#123;&#125;,\n&#125;;\nå¤åˆ¶ä»£ç \n\n17. æ¸²æŸ“é»˜è®¤å€¼\næ·»åŠ éç©ºåˆ¤æ–­å¯ä»¥æé«˜ä»£ç çš„ç¨³å¥æ€§,ä¾‹å¦‚åç«¯è¿”å›çš„ä¸€äº›å€¼,å¯èƒ½ä¼šå‡ºç°ä¸å­˜åœ¨çš„æƒ…å†µï¼Œåº”è¯¥è¦ç»™é»˜è®¤å€¼.\n\n&#x2F;&#x2F; bad\nrender()&#123;\n  &#123;name&#125;\n&#125;\n\n&#x2F;&#x2F; good\nrender()&#123;\n  &#123;!!name || &#39;--&#39;&#125;\n&#125;\n\n\nå¤åˆ¶ä»£ç \n\n\nè¿˜æœ‰ä¸€ç§æƒ…å†µï¼Œå°±æ˜¯æœ¬æ¥åç«¯åº”è¯¥è¿”å›ä¸€ä¸ªæ•°ç»„ç»™ä½ ï¼Œä½†æ˜¯æ•°æ®åº“å–ä¸åˆ°æ•°æ®ï¼Œå¯èƒ½åç«¯ç»™ä½ è¿”å›äº†null,ç„¶åå‰ç«¯null.lengthã€‚è¿™æ ·å°±ggäº†\n\n&#x2F;&#x2F; bad\nconst &#123; list, totalCount &#125; &#x3D; await getPeopleList(keyword, page, pageSize);\nlist å¯èƒ½æ˜¯nullæˆ–è€…undefined\nlist.lengthå°†ç›´æ¥å¯¼è‡´å‰ç«¯æŠ¥é”™\n\nthis.setState(&#123;\n  status: STATUS.READY,\n  apps: list,\n  total: totalCount,\n  page: page,\n&#125;);\n\n\n&#x2F;&#x2F; good \nconst &#123; list, totalCount &#125; &#x3D; await getPeopleList(keyword, page, pageSize);\nthis.setState(&#123;\n  status: STATUS.READY,\n  apps: list || [],\n  total: totalCount || 0,\n  page: page,\n&#125;);\n\nå¤åˆ¶ä»£ç \n\n18. ä¸ç¡®å®šçš„å±æ€§ï¼Œæœ€åå´ç–¯ç‹‚çš„ç”¨â€¦è®¿é—®ä¸å­˜åœ¨çš„å±æ€§ä¾‹å¦‚ä¸€äº›åœ°æ–¹ï¼Œä¸ç¡®å®šè¿™ä¸ªå˜é‡é‡Œé¢åˆ°åº•æœ‰ä»€ä¹ˆï¼Œä½†è‡ªå·±è§‰å¾—æœ‰ï¼Œå°±ç–¯ç‹‚çš„â€¦,æœ€æ˜æ˜¾çš„å°±æ˜¯åç«¯è¿”å›äº†ä¸€ä¸ªå¯¹è±¡ç»™ä½ ï¼Œå‰ç«¯æ‹¿åˆ°ä¹‹ååˆ¤æ–­éƒ½ä¸åˆ¤æ–­ç›´æ¥data.dataList.forEach()\n&#x2F;&#x2F; bad\nconst data &#x3D; await getPeopleList(keyword, page, pageSize);\ndata.dataList.forEach() &#x2F;&#x2F; ç›´æ¥æŒ‚äº†\n\n&#x2F;&#x2F; good\nconst data &#x3D; await getPeopleList(keyword, page, pageSize);\nif (data &amp;&amp; data.dataList &amp;&amp; Array.isArray(data.dataList) &#123;\n    data.dataList.forEach() \n&#125;\nå¤åˆ¶ä»£ç \n\n19. æ•°æ®æ ¼å¼è½¬æ¢\næŠŠå­—ç¬¦ä¸²è½¬æ•´å‹å¯ä»¥ä½¿ç”¨+å·\n\nlet maxPrice &#x3D; +form.maxPrice.value;\nlet maxPrice &#x3D; Number(form.maxPrice.value);\nå¤åˆ¶ä»£ç \n\n\nè½¬æˆ boolean å€¼ç”¨!!\n\nlet mobile &#x3D; !!ua.match(&#x2F;iPhone|iPad|Android|iPod|Windows Phone&#x2F;);\nå¤åˆ¶ä»£ç \n\n20. åˆ¤æ–­æ¡ä»¶çœŸå‡js ä¸­ä»¥ä¸‹ä¸ºå‡,å…¶ä»–æƒ…å†µä¸ºçœŸ\n\nfalse\nnull\nundefined\n0\nâ€˜â€™ (ç©ºå­—ç¬¦ä¸²)\nNaN\n\n21. ç®€å•ç»„ä»¶å¯ä»¥ä½¿ç”¨å‡½æ•°ä»£æ›¿&#x2F;&#x2F; bad\nclass Listing extends React.Component &#123;\n  render() &#123;\n    return &lt;div&gt;&#123;this.props.hello&#125;&lt;&#x2F;div&gt;;\n  &#125;\n&#125;\n\n&#x2F;&#x2F; good\nfunction Listing(&#123; hello &#125;) &#123;\n  return &lt;div&gt;&#123;hello&#125;&lt;&#x2F;div&gt;;\n&#125;\nå¤åˆ¶ä»£ç \n\n22. å¯¹äºå¸¸ç”¨çš„å±æ€§è¿›è¡Œç¼“å­˜&#x2F;&#x2F; bad\nthis.props.app.openid;\nthis.state.time\n\n&#x2F;&#x2F; good\nconst &#123; app &#125; &#x3D; this.props;\nconst &#123; time &#125; &#x3D; this.state;\nconsole.log(app.openid)\nå¤åˆ¶ä»£ç \n\n23. input è¾“å…¥æ¡†ä½¿ç”¨ trim()&#x2F;&#x2F; bad\nlet searchContent &#x3D; form.search.value;\n\n&#x2F;&#x2F; good\nlet searchContent &#x3D; form.search.value.trim();\nå¤åˆ¶ä»£ç \n\n24. ä½¿ç”¨ location è·³è½¬å‰éœ€è¦å…ˆè½¬ä¹‰&#x2F;&#x2F; bad\nwindow.location.href &#x3D; redirectUrl + &#39;?a&#x3D;10&amp;b&#x3D;20&#39;;\n\n&#x2F;&#x2F; good\nwindow.location.href &#x3D; redirectUrl + encodeURIComponent(&#39;?a&#x3D;10&amp;b&#x3D;20&#39;);\nå¤åˆ¶ä»£ç \n\n25. ä½¿ç”¨ react-router\n&#x2F;&#x2F; bad\nimport &#123; withRouter, RouteComponentProps &#125; from &#39;react-router-dom&#39;;\n\nexport interface IProps extends RouteComponentProps&lt;any&gt; &#123;&#125;\nclass App extends React.Component&lt;IProps, AppStates&gt; &#123;&#125;\nexport default withRouter(App);\n\n\n&#x2F;&#x2F; good\nimport &#123; withRouter, RouteComponentProps &#125; from &#39;react-router-dom&#39;;\n\nclass App extends React.Component&lt;IProps &amp; RouteComponentProps&lt;&#123;&#125;&gt;, AppStates&gt; &#123;&#125;\nexport default withRouter(App);\n\nå¤åˆ¶ä»£ç \n\n26. åŒæ—¶å¼€å‘ï¼Œæ•°æ®è¯·æ±‚ api ç›®å½• git å†²çªç›®å½•æ–¹æ¡ˆ\nåœ¨ api ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªç›®å½•ï¼Œç›®å½•å¯¹åº”ä¸€çº§ tab,è¿™ä¸ªç›®å½•å†…æ”¾ç½®ä¸€ä¸ª index.js ï¼Œæœ€åæŠŠäºŒçº§ tab ç»„ä»¶æ‰€ä½¿ç”¨çš„ api è¯·æ±‚éƒ½åœ¨è¿™ä¸ª index.js å†…å¼•å…¥ã€‚\n\n&#x2F;&#x2F; ç›®å‰\n\n|- api\n  |- pageA.ts\n  |- pageB.ts\n\n&#x2F;&#x2F; å»ºè®®\n\n|- api\n  |- pageA\n    |- index.js\n    |- aaa.js\n    |- bbb.js\n  |- pageB\n    |- index.js\n    |- aaa.js\n    |- bbb.js\n    |- ccc.js\nå¤åˆ¶ä»£ç \n\n27. ç»„ä»¶åµŒå¥—è¿‡æ·±\nç»„ä»¶ä¸€èˆ¬ä¸è¦è¶…è¿‡ä¸‰å±‚,æœ€å¤šå››å±‚,å±‚çº§è¿‡æ·±å¯èƒ½ä¼šå¯¼è‡´æ•°æ®ä¼ é€’è¿‡æ·±ï¼Œåœ¨åšä¸€äº›é¢—ç²’åº¦æ¯”è¾ƒç»†çš„æ“ä½œçš„æ—¶å€™ï¼Œå¤„ç†èµ·æ¥è¾ƒä¸ºç¹çï¼Œå¯ä»¥ä½¿ç”¨ redux ç­‰çŠ¶æ€ç®¡ç†å·¥å…·æ›¿ä»£ã€‚\n\n28. ä»£ç è¿‡æ»¤æ‰ä½ æ²¡è€ƒè™‘åˆ°çš„æƒ…å†µ\nä¾‹å¦‚ä¸€ä¸ªå‡½æ•°ï¼Œä½ åªæƒ³æ“ä½œå­—ç¬¦ä¸²ï¼Œé‚£ä½ å¿…é¡»åœ¨å‡½æ•°å¼€å¤´å°±åªå…è®¸å‚æ•°æ˜¯å­—ç¬¦ä¸²\n\nfunction parse (str:string)&#123;\n  if (typeof(str) &#x3D;&#x3D;&#x3D; &#39;string&#39; ) &#123;\n\n  &#125;\n&#125;\nå¤åˆ¶ä»£ç \n\n29. ä¸šåŠ¡ä»£ç é‡Œé¢çš„å¼‚æ­¥è¯·æ±‚éœ€è¦ try catch\najax è¯·æ±‚ï¼Œä½¿ç”¨ try catchï¼Œé”™è¯¯æç¤ºåç«¯è¿”å›,å¹¶ä¸”åšä¸€äº›å¤±è´¥åçš„çŠ¶æ€æ“ä½œä¾‹å¦‚è¿›å…¥åˆ—è¡¨é¡µï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ª loading çŠ¶æ€ï¼Œç„¶åå»è¯·æ±‚æ•°æ®,å¯æ˜¯å¤±è´¥ä¹‹åï¼Œä¹Ÿéœ€è¦æŠŠ loading çŠ¶æ€å»æ‰,æŠŠ loading éšè—çš„ä»£ç å°±å†™åœ¨ finally é‡Œé¢ã€‚\n\ngetStudentList &#x3D; async () &#x3D;&gt; &#123;\n  try &#123;\n    this.setState(&#123;\n      loading: true,\n      isEmpty: false\n    &#125;);\n    await getStudentList(&#123;&#125;);\n  &#125; catch (e) &#123;\n    &#x2F;&#x2F; TODO\n    console.log(e)\n  &#125; finally &#123;\n    &#x2F;&#x2F;  å¤±è´¥ä¹‹åçš„ä¸€äº›å…œåº•æ“ä½œ\n    this.setState(&#123;\n      loading: false,\n      isEmpty: true\n    &#125;);\n  &#125;\n&#125;;\nå¤åˆ¶ä»£ç \n\n30. setStateæœ‰ä¸‰ç§ç”¨æ³•&#x2F;&#x2F; å¯¹è±¡\nthis.setState(&#123;\n\n&#125;)\n\n&#x2F;&#x2F; å‡½æ•°ï¼Œä¸€èˆ¬æ˜¯ç”¨äºåœ¨setStateä¹‹å‰åšä¸€äº›æ“ä½œ\nthis.setState(\n  () &#x3D;&gt; &#123;\n    &#x2F;&#x2F; TODO\n    console.log(&#39;&#39;)\n    return &#123;\n      a:300\n    &#125;\n  &#125;\n)\n\n&#x2F;&#x2F; ç¬¬äºŒä¸ªå‚æ•°ï¼Œä¸€èˆ¬æ˜¯ç”¨äºåœ¨setStateä¹‹ååšä¸€äº›æ“ä½œ\nthis.setState(&#123;\n  a:300\n&#125;, () &#x3D;&gt; &#123;\n  &#x2F;&#x2F; TODO\n&#125;)\nå¤åˆ¶ä»£ç \n\n31. setStateå¯èƒ½æ˜¯åŒæ­¥çš„\nsetState åœ¨reacté‡Œçš„åˆæˆäº‹ä»¶å’Œé’©å­å‡½æ•°ä¸­æ˜¯â€œå¼‚æ­¥â€çš„ã€‚\nsetState åœ¨åŸç”Ÿäº‹ä»¶å’Œ setTimeout ä¸­æ˜¯åŒæ­¥çš„ã€‚\n\n32. ä¸è¦åœ¨ setState å‰é¢åŠ  await\nsetState å‰é¢ä¹Ÿæ˜¯å¯ä»¥å¸¦ await çš„ï¼Œä¼šå˜æˆåŒæ­¥è®¾ç½®çŠ¶æ€,ä½†è¿™æ˜¯ä¸€ç§å·§åˆï¼Œä¸ç¡®å®šæœªæ¥å“ªä¸ªç‰ˆæœ¬å°±ä¸æ”¯æŒäº†ï¼Œä¸ºäº†éµå¾ª react æ¡†æ¶çš„è®¾è®¡åŸåˆ™ï¼Œæˆ‘ä»¬ä½¿ç”¨å›æ‰å‡½æ•°çš„å½¢å¼ã€‚\n\n&#x2F;&#x2F; bad\nfunc &#x3D; async (name, value, status) &#x3D;&gt; &#123;\n  await this.setState(&#123;\n    name\n  &#125;);\n  &#x2F;&#x2F; TODO\n&#125;;\n\n&#x2F;&#x2F; good\nfunc &#x3D; (name, value, status) &#x3D;&gt; &#123;\n  this.setState(\n    &#123;\n      name\n    &#125;,\n    () &#x3D;&gt; &#123;\n      &#x2F;&#x2F; TODO\n    &#125;\n  );\n&#125;;\nå¤åˆ¶ä»£ç \n\n33. é˜»æ­¢äº‹ä»¶é»˜è®¤è¡Œä¸º\nåœ¨ React ä¸­ä½ ä¸èƒ½é€šè¿‡è¿”å› false æ¥é˜»æ­¢é»˜è®¤è¡Œä¸ºã€‚å¿…é¡»æ˜ç¡®è°ƒç”¨ preventDefault ã€‚\n\n34. åœ¨ componentWillUnmount é‡Œé¢å»é™¤å‰¯ä½œç”¨çš„å‡½æ•°\næ¸…é™¤ EventListener\nä¸­æ­¢æ•°æ®è¯·æ±‚\næ¸…é™¤å®šæ—¶å™¨\n\n35. key\nå¯¹äºç»„ä»¶ä¸­çš„ key ä¼˜åŒ–ï¼Œèµ·åˆ°æœ€å¤§åŒ–é‡ç”¨ dom\n\n&#x2F;&#x2F;bad\nthis.state.dataAry.map((item, index) &#x3D;&gt; &#123;\n  return &lt;span key&#x3D;&#123;index&#125; &#x2F;&gt;;\n&#125;);\n\n&#x2F;&#x2F;good\nthis.state.dataAry.map(item &#x3D;&gt; &lt;span key&#x3D;&#123;item.id&#125; &#x2F;&gt;);\nå¤åˆ¶ä»£ç \n\n36. for-in ä¸­ä¸€å®šè¦æœ‰ hasOwnProperty çš„åˆ¤æ–­ï¼ˆå³ç¦æ­¢ç›´æ¥è¯»å–åŸå‹å¯¹è±¡çš„å±æ€§ï¼‰&#x2F;&#x2F;bad\nconst arr &#x3D; [];\nconst key &#x3D; &#39;&#39;;\n\nfor (key in obj) &#123;\n  arr.push(obj[key]);\n&#125;\n\n&#x2F;&#x2F;good\nconst arr &#x3D; [];\nconst key &#x3D; &#39;&#39;;\n\nfor (key in obj) &#123;\n  if (obj.hasOwnProperty(key)) &#123;\n    arr.push(obj[key]);\n  &#125;\n&#125;\n\nå¤åˆ¶ä»£ç \n\n37. ç¬¬ä¸‰æ–¹åº“å‡½æ•°çš„ä½¿ç”¨\nç”¨ try catch åŒ…è£¹ï¼Œé˜²æ­¢ç¬¬ä¸‰æ–¹åº“çš„å‡ºç°é”™è¯¯ï¼Œå¯¼è‡´æ•´ä¸ªç¨‹åºå´©æºƒ\n\n&#x2F;*\n * Echart ç”¨äºä»£ç»˜åˆ¶å›¾è¡¨ï¼Œä½†å½“å…¶è‡ªèº«å‘ç”Ÿé”™è¯¯æ—¶ï¼Œå¯èƒ½å½±å“åˆ°ä¸šåŠ¡ä»£ç çš„æ‰§è¡Œ\n *&#x2F;\n&#x2F;&#x2F; bad\nconst iniDom &#x3D; document.getElementById(&#39;init-container&#39;);\nconst echartObj &#x3D; echarts.init(iniDom);\nthis.setState(\n  &#123;\n    echartObj\n  &#125;,\n  () &#x3D;&gt; &#123;\n    const &#123; echartObj &#125; &#x3D; this.state;\n    &#x2F;&#x2F; æ›´æ–°å›¾è¡¨\n    echartObj.setOption(CHART_CONFIG, true);\n  &#125;\n);\n\n&#x2F;&#x2F; good\ntry &#123;\n  const iniDom &#x3D; document.getElementById(&#39;init-container&#39;);\n  const echartObj &#x3D; echarts.init(iniDom);\n  this.setState(\n    &#123;\n      echartObj\n    &#125;,\n    () &#x3D;&gt; &#123;\n      const &#123; echartObj &#125; &#x3D; this.state;\n      &#x2F;&#x2F; æ›´æ–°å›¾è¡¨\n      echartObj.setOption(CHART_CONFIG, true);\n    &#125;\n  );\n&#125; catch (error) &#123;\n  &#x2F;&#x2F; TODO\n&#125;\nå¤åˆ¶ä»£ç \n\n38. é˜²æ­¢ xss æ”»å‡»\ninputï¼Œtextarea ç­‰æ ‡ç­¾ï¼Œä¸è¦ç›´æ¥æŠŠ html æ–‡æœ¬ç›´æ¥æ¸²æŸ“åœ¨é¡µé¢ä¸Š,ä½¿ç”¨ xssb ç­‰è¿‡æ»¤ä¹‹åå†è¾“å‡ºåˆ°æ ‡ç­¾ä¸Š;\n\nimport &#123; html2text &#125; from &#39;xss&#39;;\nrender()&#123;\n  &lt;div\n  dangerouslySetInnerHTML&#x3D;&#123;&#123;\n    __html: html2text(htmlContent)\n  &#125;&#125;\n&#x2F;&gt;\n&#125;\nå¤åˆ¶ä»£ç \n\n39. åœ¨ç»„ä»¶ä¸­è·å–çœŸå® dom\nä½¿ç”¨ 16 ç‰ˆæœ¬åçš„ createRef()å‡½æ•°\n\nclass MyComponent extends React.Component&lt;iProps, iState&gt; &#123;\n  constructor(props) &#123;\n    super(props);\n    this.inputRef &#x3D; React.createRef();\n  &#125;\n\n  render() &#123;\n    return &lt;input type&#x3D;&quot;text&quot; ref&#x3D;&#123;this.inputRef&#125; &#x2F;&gt;;\n  &#125;\n\n  componentDidMount() &#123;\n    this.inputRef.current.focus();\n  &#125;\n&#125;\nå¤åˆ¶ä»£ç \n\n40. å‡å°‘é­”æ³•æ•°å­—\nå†™ä»£ç çš„æ—¶å€™å°½é‡å‡å°‘ä¸€äº›æœªçŸ¥å«ä¹‰çš„æ•°å­—ï¼Œå°½é‡ç”¨è‹±æ–‡å•è¯ã€‚ä¾‹å¦‚type &#x3D;&#x3D;&#x3D; 0çš„æ—¶å€™åšäº†ä¸€äº›æ“ä½œï¼Œè®©äººä¸çŸ¥æ‰€ä»¥ç„¶ã€‚\n\n&#x2F;&#x2F; bad\nif (type !&#x3D;&#x3D; 0) &#123;\n  &#x2F;&#x2F; TODO\n&#125;\n\n&#x2F;&#x2F; good\nconst STATUS: Record&lt;string, any&gt; &#x3D; &#123;\n  READY: 0,\n  FETCHING: 1,\n  FAILED: 2\n&#125;;\n\nif (type &#x3D;&#x3D;&#x3D; STATUS.READY) &#123;\n  &#x2F;&#x2F; TODO\n&#125;\n\n&#x2F;&#x2F; best\nenum STATUS &#123;\n  &#x2F;&#x2F; å°±ç»ª\n  READY &#x3D; 0,\n  &#x2F;&#x2F; è¯·æ±‚ä¸­\n  FETCHING &#x3D; 1,\n  &#x2F;&#x2F; è¯·æ±‚å¤±è´¥\n  FAILED &#x3D; 2,\n&#125;\n\nå¤åˆ¶ä»£ç \n\n41. å¦‚æœéœ€è¦ä¼˜åŒ– react æ€§èƒ½ï¼ˆä¸€èˆ¬ç”¨ä¸åˆ°ï¼‰\nå¦‚æœç»„ä»¶çš„ state å’Œ props éƒ½æ˜¯ç®€å•ç±»å‹ï¼Œå¯ä»¥ç»§æ‰¿ PureComponent è€Œä¸æ˜¯ Component\n\nimport &#123; Component, PureComponent &#125; from &#39;react&#39;;\n&#x2F;&#x2F; bad\nclass Message extends Component &#123;\n  render() &#123;\n    return &lt;span&gt;&#123;this.state.message&#125;&lt;&#x2F;span&gt;;\n  &#125;\n&#125;\n\n&#x2F;&#x2F; good\nclass Message extends PureComponent &#123;\n  render() &#123;\n    return &lt;span&gt;&#123;this.state.message&#125;&lt;&#x2F;span&gt;;\n  &#125;\n&#125;\nå¤åˆ¶ä»£ç \n\n\né‡å†™ shouldComponentUpdate æ–¹æ³•,åœ¨ shouldComponentUpdate é‡Œé¢æ ¹æ® state,props æ˜¯å¦æœ‰æ”¹å˜æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦é‡æ–°æ¸²æŸ“.å¦‚æœç»„ä»¶ç»§æ‰¿äº† PureComponent å°±æ²¡å¿…è¦å†é‡å†™ shouldComponentUpdate æ–¹æ³•\n\nimport &#123; isReactPropsEqual, isReactStateEqual &#125; from &#39;@fe&#x2F;common&#x2F;lib&#x2F;equal&#39;;\nshouldComponentUpdate(nextProps:IProps, nextState:IState) &#123;\n    if (isReactStateEqual(nextState,this.state) &amp;&amp; isReactPropsEqual(nextProps,this.props)) &#123;\n        return false;\n    &#125;\n    return true;\n&#125;\nå¤åˆ¶ä»£ç \n\n42. Event äº‹ä»¶å¯¹è±¡ç±»å‹å¾ˆå¤šå°ä¼™ä¼´ç”¨äº†å¾ˆä¹…çš„ts,éƒ½ä¸çŸ¥é“å¸¸ç”¨ Event äº‹ä»¶å¯¹è±¡ç±»å‹ï¼š\nClipboardEvent&lt;T &#x3D; Element&gt; å‰ªè´´æ¿äº‹ä»¶å¯¹è±¡\nDragEvent&lt;T &#x3D; Element&gt; æ‹–æ‹½äº‹ä»¶å¯¹è±¡\nChangeEvent&lt;T &#x3D; Element&gt; Change äº‹ä»¶å¯¹è±¡\nKeyboardEvent&lt;T &#x3D; Element&gt; é”®ç›˜äº‹ä»¶å¯¹è±¡\nMouseEvent&lt;T &#x3D; Element&gt; é¼ æ ‡äº‹ä»¶å¯¹è±¡\nTouchEvent&lt;T &#x3D; Element&gt; è§¦æ‘¸äº‹ä»¶å¯¹è±¡\nWheelEvent&lt;T &#x3D; Element&gt; æ»šè½®äº‹ä»¶å¯¹è±¡\nAnimationEvent&lt;T &#x3D; Element&gt; åŠ¨ç”»äº‹ä»¶å¯¹è±¡\nTransitionEvent&lt;T &#x3D; Element&gt; è¿‡æ¸¡äº‹ä»¶å¯¹è±¡\nimport &#123; MouseEvent &#125; from &#39;react&#39;;\n\ninterface IProps &#123;\n  onClick(event: MouseEvent&lt;HTMLDivElement&gt;): void;\n&#125;\nå¤åˆ¶ä»£ç \n\n43. ä½¿ç”¨ç§æœ‰å±æ€§å–ä»£stateçŠ¶æ€å¯¹äºä¸€äº›ä¸éœ€è¦æ§åˆ¶uiçš„çŠ¶æ€å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ç»‘åˆ°thisä¸Šï¼Œ å³ç§æœ‰å±æ€§ï¼Œæ²¡æœ‰å¿…è¦å¼„åˆ°this.stateä¸Šï¼Œä¸ç„¶ä¼šè§¦å‘æ¸²æŸ“æœºåˆ¶ï¼Œé€ æˆæ€§èƒ½æµªè´¹ ä¾‹å¦‚è¯·æ±‚ç¿»é¡µæ•°æ®çš„æ—¶å€™,æˆ‘ä»¬éƒ½ä¼šæœ‰ä¸ªå˜é‡ã€‚\n&#x2F;&#x2F; bad\nstate: IState &#x3D; &#123;\n  pageNo:1,\n  pageSize:10\n&#125;;\n\n&#x2F;&#x2F; good \nqueryParams:Record&lt;string,any&gt; &#x3D; &#123;\n  pageNo:1,\n  pageSize:10\n&#125;\nå¤åˆ¶ä»£ç \n\n44. ä»£ç ç»†ç²’åº¦çš„æ€è€ƒæ€»ç»“å››å¥è¯ã€‚æˆ‘ä»¬åœ¨å†™ç»„ä»¶æˆ–è€…å‡½æ•°çš„çš„æ—¶å€™ï¼Œå·¥å…·å‡½æ•°å’Œä¸šåŠ¡é€»è¾‘æŠ½ç¦»ï¼Œè¡¨å•æ ¡éªŒå’Œä¸šåŠ¡æŠ½ç¦»ã€äº‹ä»¶å‡½æ•°å’Œä¸šåŠ¡æŠ½ç¦»ï¼Œajaxå’Œä¸šåŠ¡æŠ½ç¦»ã€‚ ä¾‹å¦‚æœ‰äº›é¡µé¢æ˜¯é€šè¿‡location.hrefè·³è½¬çš„ï¼Œæˆ‘ä»¬æœ‰äº›ä¸šåŠ¡é€»è¾‘ç­‰éƒ½æ˜¯æ”¾åˆ°didmountMount,ä½†æ˜¯åæœŸæ”¹éœ€æ±‚ï¼Œå¯èƒ½è¦ç”¨react-routerè¿›è¡Œè·³è½¬ï¼Œå¯èƒ½è¦æ”¹çš„é€»è¾‘å°±ä¼šå¾ˆå¤šäº†ï¼Œæ‰€ä»¥å‡½æ•°æŠ½ç¦»å‡ºæ¥ï¼Œéœ€æ±‚æ›´æ–°å°±å°‘æ”¹ä¸€ç‚¹ä»£ç ã€‚ å¦‚æœè¿˜ä¸ç¡®å®šå¦‚ä½•åˆ’åˆ†å‡½æ•°çš„ç»†ç²’åº¦ï¼Œæˆ‘æœ‰ä¸ªå»ºè®®ã€‚ä½¿ç”¨è¿‡ä¸¤æ¬¡ä»¥ä¸Šçš„ä»£ç ï¼Œè¦æŠ½ç¦»ç»„ä»¶æˆ–è€…å‡½æ•°ï¼Œä¸¤æ¬¡çš„å¯ä»¥ä¸ç”¨\n45. if else ç­‰åˆ¤æ–­å¤ªå¤šäº†ï¼ŒåæœŸéš¾ä»¥ç»´æŠ¤ã€‚ä¸ªäººè§‰å¾—if else åµŒå¥—æ·±çœ‹èµ·æ¥ä¹Ÿä¸ä¼šå¤ªéš¾å—ï¼Œéš¾å—çš„æ˜¯ï¼Œé¡¹ç›®è¿­ä»£ä¹…ä¹‹åï¼Œè‡ªå·±éƒ½å¿˜è®°æ›¾ç»å†™è¿‡è¿™äº›ä»£ç ï¼Œè€Œä¸”ç±»å‹å¤šæˆ–è€…ä¸ç¡®å®šæœ‰ä»€ä¹ˆç±»å‹ï¼Œæ˜¯å¦åæœŸè¿˜ä¼šåŠ çš„æƒ…å†µä¸‹ï¼Œæ”¹èµ·æ¥å°±éå¸¸å¤æ‚äº†ï¼Œè€Œä¸”å¾ˆå®¹æ˜“è¸©å‘å’ŒèƒŒé”…ã€‚ ç”¨é…ç½®å–ä»£ifåµŒå¥—ï¼Œå¤§æ¦‚å°±æ˜¯æŠ½ç¦»ä¸€ä¸ªconfig.tså‡ºæ¥ï¼Œé‡Œé¢æ”¾ä¸€äº›é…ç½®ã€‚\nä¾‹å¦‚ä½ çš„ä¸šåŠ¡ä»£ç é‡Œé¢ï¼Œä¼šæ ¹æ®ä¸åŒurlå‚æ•°ï¼Œä»£ç ä¼šæ‰§è¡Œä¸åŒçš„é€»è¾‘.\n&#x2F;info?type&#x3D;wechat&amp;uid&#x3D;123456&amp;\nconst qsObj &#x3D; qs(window.location.url)\nconst urlType &#x3D; qsObj.type\n&#x2F;&#x2F; bad \nif (urlType &#x3D;&#x3D;&#x3D; &#39;wechat&#39;) &#123;\n    doSomeThing()\n&#125; else if () &#123;\n    doSomeThing()\n&#125; else if () &#123;\n    doSomeThing()\n&#125; else if () &#123;\n    doSomeThing()\n&#125;\n\n&#x2F;&#x2F; good \nconfig.t\nconst urlTypeConfig: Record&lt;string, typeItem&gt; &#x3D; &#123;\n  &#39;wechat&#39;: &#123; &#x2F;&#x2F; key å°±æ˜¯å¯¹åº”çš„type\n    name: &#39;wechat&#39;, \n    show: [&#39;header&#39;, &#39;footer&#39;, &#39;wechat&#39;] &#x2F;&#x2F; å±•ç¤ºä»€ä¹ˆï¼Œå¯èƒ½æ˜¯å¼‚æ­¥çš„\n    pession: [&#39;admin&#39;], &#x2F;&#x2F; æƒé™æ˜¯ä»€ä¹ˆï¼Œå¯èƒ½æ˜¯å¼‚æ­¥çš„\n  &#125;,\n  &#39;zhifubao&#39;: &#123; &#x2F;&#x2F; key å°±æ˜¯å¯¹åº”çš„type\n    name: &#39;zhifubao&#39;, \n    show: [&#39;header&#39;, &#39;footer&#39;, &#39;zhifubao&#39;] &#x2F;&#x2F; å±•ç¤ºä»€ä¹ˆï¼Œå¯èƒ½æ˜¯å¼‚æ­¥çš„\n    pession: [&#39;admin&#39;], &#x2F;&#x2F; æƒé™æ˜¯ä»€ä¹ˆï¼Œå¯èƒ½æ˜¯å¼‚æ­¥çš„\n  &#125;,\n&#125;\n\n&#x2F;&#x2F; ä¸šåŠ¡é€»è¾‘\nconst qsObj &#x3D; qs(window.location.url)\nconst urlType &#x3D; qsObj.type\nObject.keys(urlTypeConfig).forEach(item &#x3D;&gt; &#123;\n  if(urlType &#x3D;&#x3D;&#x3D; item.type) &#123;\n    doSomeThing(item.show)\n  &#125;\n&#125;)\n\nå¤åˆ¶ä»£ç \n\n46. ä¸è¦ä½¿ç”¨renderXXX,è¦ä½¿ç”¨å‡½æ•°å¼ç»„ä»¶å‘ç°å›¢é˜Ÿä¸€äº›å°ä¼™ä¼´ä¸ºäº†å‡å°‘renderå‡½æ•°é‡Œé¢çš„ä»£ç é‡ï¼Œä¼šæŠŠä¸€äº›å…ƒç´ æ‹†åˆ†åˆ°å‡½æ•°é‡Œé¢ã€‚\n&#x2F;&#x2F; bad\n  renderHeader &#x3D; () &#x3D;&gt; &#123;\n    return (&lt;div &#x2F;&gt;)\n  &#125;\n  renderBody &#x3D; () &#x3D;&gt; &#123;\n    return (&lt;div &#x2F;&gt;)\n  &#125;\n  renderFooter &#x3D; () &#x3D;&gt; &#123;\n    return (&lt;div &#x2F;&gt;)\n  &#125;\n  render()&#123;\n    return(\n      &lt;div&gt;\n        renderHeader()\n        renderBody()\n        renderFooter()\n      &lt;&#x2F;div&gt;\n    )\n  &#125;\nå¤åˆ¶ä»£ç \n\næ›´å¥½çš„åŠæ³•ï¼Œæ˜¯ç”¨å‡½æ•°å¼ç»„ä»¶å–ä»£åœ¨å½“å‰ç»„ä»¶é‡Œé¢å†™æ–¹æ³•\n&#x2F;&#x2F; good\n function RenderHeader(props) &#x3D;  &#123;\n    return (&lt;div &#x2F;&gt;)\n  &#125;\n function RenderBody(props) &#x3D;  &#123;\n    return (&lt;div &#x2F;&gt;)\n  &#125;\n function RenderFooter(props) &#x3D;  &#123;\n    return (&lt;div &#x2F;&gt;)\n  &#125;\nclass Component extends React.Component&lt;iProps, iState&gt;&#123;  \n  render () &#123;\n    return(\n      &lt;div&gt;\n        &lt;RenderHeader &#x2F;&gt;\n        &lt;RenderBody &#x2F;&gt;\n        &lt;RenderFooter &#x2F;&gt;\n      &lt;&#x2F;div&gt;\n    )\n  &#125;\n&#125;\nå¤åˆ¶ä»£ç \n\n47. aæ ‡ç­¾å®‰å…¨é—®é¢˜ä½¿ç”¨aæ ‡ç­¾æ‰“å¼€ä¸€ä¸ªæ–°çª—å£è¿‡ç¨‹ä¸­çš„å®‰å…¨é—®é¢˜ã€‚æ–°é¡µé¢ä¸­å¯ä»¥ä½¿ç”¨window.openeræ¥æ§åˆ¶åŸå§‹é¡µé¢ã€‚å¦‚æœæ–°è€é¡µé¢åŒåŸŸï¼Œé‚£ä¹ˆåœ¨æ–°é¡µé¢ä¸­å¯ä»¥ä»»æ„æ“ä½œåŸå§‹é¡µé¢ã€‚å¦‚æœæ˜¯ä¸åŒåŸŸï¼Œæ–°é¡µé¢ä¸­ä¾ç„¶å¯ä»¥é€šè¿‡window.opener.locationï¼Œè®¿é—®åˆ°åŸå§‹é¡µé¢çš„locationå¯¹è±¡\nåœ¨å¸¦æœ‰target&#x3D;â€_blankâ€çš„aæ ‡ç­¾ä¸­ï¼ŒåŠ ä¸Šrel&#x3D;â€noopenerâ€å±æ€§ã€‚å¦‚æœä½¿ç”¨window.opençš„æ–¹å¼æ‰“å¼€é¡µé¢ï¼Œå°†openerå¯¹è±¡ç½®ä¸ºç©ºã€‚\nvar newWindow &#x3D; window.open();\nnewWindow.opener &#x3D; null;\nå¤åˆ¶ä»£ç \n\n48. void 0 æ›¿ä»£undefinedclearSessioin &#x3D; () &#x3D;&gt; &#123;\n\t\n  req.session.userName &#x3D; undefined;\n  \n  req.session.userName &#x3D; void 0\n&#125;\nå¤åˆ¶ä»£ç \n\n49. å‰ç«¯ä¸è¦æ“ä½œcookieåœ¨åšä¸€äº›å‰åç«¯é‰´æƒçš„æ—¶å€™ï¼Œåç«¯åº”è¯¥å¼€å¯domain,secure,httponlyä¸¥æ ¼æ¨¡å¼ï¼Œç¦æ­¢å‰ç«¯æ“ä½œcookieï¼Œé˜²æ­¢csrfæ”»å‡»ã€‚\n50. ä»£ç æ£€æŸ¥æ’ä»¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ„å»ºå·¥å…·ç»§æ‰¿ husky eslint tslint lint-stage prettieræ¥è§„èŒƒä»£ç ã€‚\n\neslint-config-prettier\neslint-plugin-prettier\neslint-plugin-react\ntslint-react\ntslint-plugin-prettier\ntslint-config-prettier\nå›¢é˜Ÿå¼€å‘å·¥ä½œæµ\n\nä½œè€…ï¼šä¹˜é£ggé“¾æ¥ï¼šhttps://juejin.cn/post/6844903849166110728æ¥æºï¼šç¨€åœŸæ˜é‡‘è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚\n","slug":"å¯èƒ½æ˜¯ä½ éœ€è¦çš„ React + TypeScript 50 æ¡è§„èŒƒå’Œç»éªŒ","date":"2021-08-08T05:24:16.000Z","categories_index":"","tags_index":"","author_index":"Beastrong"},{"id":"1dcd3b31893419d8e8f3a54468e3f5d8","title":"TypeScriptï¼Œåˆæ¬¡è§é¢","content":"ä¸ºä»€ä¹ˆç”¨ TS ?è¯´å®è¯ï¼Œæœ€å¼€å§‹å¹¶æ²¡æœ‰æƒ³æŠŠ TS ç”¨åˆ°å®é™…é¡¹ç›®ä¸­æ¥ï¼Œä¸€æ¥æ˜¯æ„Ÿè§‰â€œç±»å‹â€ä¼šé™åˆ¶ JS çš„ä¼˜åŠ¿ï¼ˆå¥½å§ï¼Œå°±æ˜¯æµªå†™æµªæƒ¯äº†ï¼‰ï¼›äºŒæ¥å¬é—» TS + Redux çš„é…¸çˆ½æ»‹å‘³ï¼Œæœ‰ç‚¹æœ›è€Œå´æ­¥ï¼›ä¸‰æ¥ TS ç¯å¢ƒä½¿ç”¨çš„åº“éœ€è¦åŠ ç±»å‹çš„å£°æ˜ï¼Œå¾ˆå¤šåº“å¹¶ä¸æ”¯æŒï¼Œæœ‰ç‚¹æ‹…å¿ƒæ¨è¿›çš„æµç•…åº¦ â€¦\nè¿™ä¸ªæ—¶å€™ï¼Œå°±éœ€è¦æœ‰ä¸€è‚¡æ— å½¢çš„åŠ›é‡æ¨ä½ ä¸€æŠŠã€‚æ¨æˆ‘çš„æ˜¯å›¢é˜Ÿæ­£åœ¨æ—¥ç›Šæ™®åŠ TS, æˆ‘å¸Œæœ›æ¨åŠ¨ä½ çš„å¯ä»¥æ˜¯è¿™ç¯‡æ–‡ç«  ~\næ¥ä¸‹æ¥ï¼Œä¼šæœ‰ React + TS çš„é¡¹ç›®ä¸ºèƒŒæ™¯ï¼Œä»‹ç»æˆ‘åœ¨åˆå­¦ TS å¼€å‘é¡¹ç›®ä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜ï¼Œå¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚\nåˆå­¦è€…çš„å›°æƒ‘ä¸€. å¦‚ä½•ä¼˜é›…çš„å£°æ˜ç±»å‹\n\nåŸºç¡€\n\nä¸å°±æ˜¯æ¯” JS å¤šäº†ä¸€ä¸ªç±»å‹å£°æ˜å—ï¼Ÿè€å¤«æ’¸èµ·è¢–å­æ‹èµ·é”®ç›˜å°±æ˜¯ä¸€æ¢­å­ï¼š\ninterface Basic &#123;\n  num: number;\n  str: string | null;\n  bol?: boolean;\n&#125;\n\nè½»è½»æ¾æ¾ï¼Œäº”ç§ JS å€¼ç±»å‹å°±å£°æ˜å¥½äº†ã€‚é‚£æ•°ç»„ã€å‡½æ•°å‘¢ï¼Ÿå†æ¥ï¼š\ninterface Func &#123;\n  func(str: string): void;\n&#125;\n\ninterface Arr &#123;\n  str: string[];\n  mixed: Array&lt;string | number&gt;;\n  fixedStructure: [string, number];\n  basics: Basic[];\n&#125;\n\né™¤æ­¤ä¹‹å¤–ï¼Œç«Ÿç„¶è¿˜å¯ä»¥å®šä¹‰è‡ªå·±çš„ç±»å‹å‘¢ï¼Œæ¯”å¦‚å¸¸ç”¨çš„å›è°ƒå‡½æ•°ï¼Œåœ¨å£°æ˜å¤„éœ€è¦æŒ‡å®šå›è°ƒå‡½æ•°çš„ç±»å‹ï¼š\nevent.on(&#39;change&#39;, function() &#123;&#125;);\n\né‚£è¿™ä¸ªÂ onÂ æ–¹æ³•éœ€è¦å¦‚ä½•å£°æ˜å‘¢ï¼Ÿè¯•è¯•çœ‹Â Functionå½“ cb å‡½æ•°çš„ç±»å‹å‘¢\non(type: string, cb: Function): &#123;&#125;\n\nç„¶åå°±æ­å–œäº†ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ª tslint error :\n\nåº†å¹¸çš„æ˜¯ï¼Œåœ¨è¿™ä¸ª error é‡Œé¢å®ƒå‘Šè¯‰äº†ä½ åº”è¯¥æ€ä¹ˆåšï¼šå£°æ˜ä¸€ä¸ªä¸“ç”¨çš„å‡½æ•°ç±»å‹å°±å¯ä»¥äº†ï¼š\ntype Cb &#x3D; () &#x3D;&gt; void;\n\non(type: string, cb: Cb);\n\nè‡³æ­¤ï¼Œæˆ‘ä»¬çš„ TS äººç”Ÿç®—æ˜¯èµ·æ­¥äº†\nå¦å¤–ï¼Œæšä¸¾ç±»å‹ä¹Ÿæ˜¯å¾ˆå¸¸ç”¨çš„ï¼Œæ¯”å¦‚å£°æ˜ä¸€ä¸ªçŠ¶æ€æœºçš„å„ä¸ªçŠ¶æ€ï¼š\nenum Status &#123;\n  Draft,\n  Published\n&#125;\n\n&#x2F;&#x2F; ä¹Ÿå¯æŒ‡å®šå€¼\nenum Status &#123;\n  Draft &#x3D; &#39;Draft&#39;,\n  Published &#x3D; &#39;Published&#39;\n&#125;\n\nåœ¨ä½¿ç”¨æšä¸¾çš„æ—¶å€™ï¼Œå¸¸ä¼šé‡åˆ°å¦‚ä½•å°†æšä¸¾å’ŒåŸå§‹æ•°æ®ç±»å‹ç›¸äº’è½¬æ¢çš„éœ€æ±‚ï¼Œæ¯”å¦‚æ¥å£è¯·æ±‚åˆ°çš„ status æ˜¯Â DraftÂ å­—ç¬¦ä¸²ï¼Œä½†æ˜¯ä»£ç ä¸­å£°æ˜çš„ status æ˜¯ Enum ç±»å‹ï¼Œå¦‚ä½•è½¬æ¢å‘¢ï¼Ÿ\n&#x2F;&#x2F; string to enum\nconst str &#x3D; &#39;Draft&#39;;\nconst status: Status &#x3D; Status[str];\n\n&#x2F;&#x2F; enum to string\nStatus[Status.Published] &#x3D;&#x3D;&#x3D; &#39;Published&#39;\n\n2. ç³…åˆ\nç‹¬ç«‹çš„ç±»å‹æˆ–æ¥å£å£°æ˜çœ‹èµ·æ¥ä¼¼ä¹å¹¶æ²¡æœ‰é‚£ä¹ˆéš¾ï¼Œåˆ°é¡¹ç›®ä¸­ç³…åˆä¸€ä¸‹å‘¢ï¼Ÿ\n\nå¯èƒ½ä¼šæœ‰å‡ åä¸ªç±»å‹å£°æ˜ï¼›\nç±»å‹å£°æ˜å¯èƒ½å‡ºç°åœ¨æ¥å£å…¥å‚å‡ºå‚ä¸­ã€React ç»„ä»¶çš„ Props å’Œ State ä¸­ã€å‡½æ•°æ–¹æ³•ä¸­ï¼›\nå½“é¡¹ç›®åˆ°è¾¾ä¸€å®šè§„æ¨¡ï¼Œå¯ä»¥æŠ½è±¡å‡ºç‹¬ç«‹çš„åº“çš„æ—¶å€™ï¼Œç±»å‹ä¹Ÿéœ€è¦æŠ½è±¡ï¼›\nâ€¦\n\nä½ å¯èƒ½é‡åˆ°å„ç§æƒ…å†µï¼Œä¼šæ‰“ç ´ä½ å¯¹ TS çš„æŒæ§ã€‚å¦‚ä½•æ˜¯å¥½ï¼Ÿ\nå…ˆè¯´æˆ‘ä»¬å®è·µä¸‹æ¥çš„ç»“è®ºï¼šç‹¬ç«‹å£°æ˜ã€å°±è¿‘å£°æ˜ã€æŒ‰èŒè´£åˆ†ç»„ã€æœç»â€œç¡¬å‡‘â€å…³è”ã€æœ‰é™æŠ½è±¡ã€‚\n- ç‹¬ç«‹å£°æ˜\nä¸€ä¸ª ts æ–‡ä»¶åªå£°æ˜ä¸€ä¸ªç±»å‹æˆ–è€…æ¥å£ï¼Œæ–‡ä»¶åä¸ºéœ€è¦æš´éœ²çš„ç±»å‹åç§°ï¼Œæ–¹ä¾¿æ£€ç´¢å’Œç®¡ç†ã€‚\n- å°±è¿‘å£°æ˜\nå½“ä¸€ä¸ªå£°æ˜æ²¡æœ‰è¢«å¤–éƒ¨å¼•ç”¨æˆ–è€…ä¾èµ–æ—¶ï¼Œå¯ä»¥è€ƒè™‘å°±è¿‘æ”¾åœ¨ä½¿ç”¨çš„åœ°æ–¹ï¼Œå…¸å‹çš„åœºæ™¯æ˜¯ React ç»„ä»¶çš„ Props å’Œ State çš„ç±»å‹å£°æ˜ã€‚\n- æŒ‰èŒè´£åˆ†ç»„\nåœ¨é¡¹ç›®ä¸­ï¼Œéœ€è¦å£°æ˜ç±»å‹çš„å¯å¤§è‡´åˆ†ä¸ºä¸¤ç±»ï¼šä¸€ç±»æ˜¯ modelï¼Œä¹Ÿå°±æ˜¯æ¥å£è¯·æ±‚ç›¸å…³çš„ï¼ŒåŒ…æ‹¬å…¥å‚å’Œå‡ºå‚ï¼›å¦ä¸€ç±»æ˜¯ viewï¼Œç•Œé¢æ¸²æŸ“ç›¸å…³çš„ã€‚å› æ­¤ï¼Œæˆ‘åœ¨Â ç‹¬ç«‹å£°æ˜Â çš„åŸºç¡€ä¸Šï¼Œå¯ä»¥ç±»å‹æŒ‰ç…§model å’Œ view çš„ç»´åº¦è¿›è¡Œåˆ†ç»„ï¼Œç›¸äº’ç‹¬ç«‹ã€‚\né‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå¦‚æœæ˜¯ç‹¬ç«‹çš„ç±»å‹å£°æ˜çš„è¯ï¼Œæ€ä¹ˆæŠŠ model çš„æ•°æ®åº”ç”¨åˆ° view å‘¢ï¼Ÿ å¯èƒ½ä½ éœ€è¦ä¸€ä¸ª adapter æ¥åšç±»å‹çš„çš„è½¬æ¢ï¼šDTOTypes -&gt; adapter -&gt; ViewTypes, å®Œæˆç±»ä¼¼äºå°†æ¥å£ä¸­çš„å­—ç¬¦ä¸²æ˜ å°„æˆæšä¸¾ç±»å‹è¿™ä¹‹ç±»çš„è½¬æ¢ã€‚\n- æœç»â€œç¡¬å‡‘â€å…³è”\nä¸è¦ç¡¬å‡‘ä¸¤ä¸ªæ¥å£æˆ–è€…ç±»å‹çš„å…³ç³»ï¼Œæ¯”å¦‚ä¸€ä¸ªæ¥å£çš„åˆ›å»ºå’Œæ›´æ–°ï¼Œå¯èƒ½å­—æ®µéƒ½æ˜¯ä¸€æ ·ï¼ŒåŒºåˆ«æ˜¯ä¸€ä¸ªæœ‰ id å¦ä¸€ä¸ªæ²¡æœ‰ï¼Œäºæ˜¯æˆ‘ä»¬å¯èƒ½å°±æƒ³ç€å†™ä¸€ä¸ªç±»å‹ç„¶å id å¯é€‰å°±å¥½äº†ã€‚è¿™æ ·æ˜¯å°‘å†™äº†ä¸€ä¸ªç±»å‹ï¼Œä½†æ˜¯å¯èƒ½ä¼šå¸¦æ¥å¦å¤–ä¸€äº›éº»çƒ¦ï¼Œæ¯”å¦‚å¸¦ id çš„æ•°æ®ä¼ ç»™äº†æ–°å»ºçš„æ¥å£ï¼Œä½†æ˜¯ ts æ£€æŸ¥ä¸å‡ºæ¥ã€‚æ‰€ä»¥ï¼Œå»ºè®®ä¸è¦æ€•éº»çƒ¦ï¼Œç›´æ¥æ‹†åˆ†æˆÂ CreateInputDTOÂ å’ŒÂ UpdateInputDTO.\n- æœ‰é™æŠ½è±¡\nåœ¨æœç»â€œç¡¬å‡‘â€å…³è”çš„åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥æŠ½è±¡å‡ºé€šç”¨çš„å£°æ˜ã€‚\nåŸºäºä¸Šè¿°åŸåˆ™ï¼Œè§£å†³äº†æˆ‘ä½œä¸ºä¸€ä¸ªåˆå­¦è€…åœ¨ç±»å‹å£°æ˜ä¸Šçš„å›°æ‰°ï¼Œå¦‚æœ‰ä¸å¯¹çš„æˆ–è€…æ›´å¥½çš„å»ºè®®ï¼Œæ¬¢è¿æŒ‡æ­£~\n3. ä¸‡èƒ½è¯è† any\nä¸æ˜¯æ‰€æœ‰çš„ç±»å‹å£°æ˜éƒ½èƒ½ä¸€é©¬å¹³å·çš„ï¼Œå½“é‡åˆ°ç¡®å®è§£å†³ä¸äº†çš„ç±»å‹æŠ¥é”™çš„æ—¶å€™ï¼Œas anyÂ èƒ½å¸¦ç»™ä½ ä¸ä¸€æ ·çš„å¿«æ„Ÿï¼Œä½†æ˜¯ä¸å»ºè®®ä½¿ç”¨å•Šâ€¦\näºŒ. å¦‚ä½•å¼•ç”¨å¤–éƒ¨åº“\næ¥ä¸‹æ¥èŠèŠç¬¬ä¸‰æ–¹åº“åœ¨ TS ç¯å¢ƒä¸‹çš„ä½¿ç”¨ã€‚\nåœ¨ JS ä¸­ï¼Œnpm ä¸Šæœ‰ä¸°å¯Œçš„æµ·é‡çš„åº“å¸®æˆ‘ä»¬å®Œæˆæ—¥å¸¸çš„ç¼–ç ï¼Œå¯èƒ½å¹¶ä¸æ˜¯æ‰€æœ‰çš„åº“éƒ½èƒ½å®Œå…¨è¢«åº”ç”¨åˆ° TS ä¸­ï¼Œå› ä¸ºæœ‰äº›ç¼ºå°‘ç±»å‹å£°æ˜ã€‚\næ¯”å¦‚ï¼Œåœ¨ TS ä¸­ä½¿ç”¨Â reactÂ , ä½ ä¼šå¾—åˆ°è¿™æ ·çš„ä¸€ä¸ªç±»å‹æ£€æŸ¥é”™è¯¯ï¼š\n\nå› ä¸º react çš„åº“ä¸­å¹¶æ²¡æœ‰ç±»å‹å£°æ˜ã€‚\nç°åœ¨æ¯”è¾ƒé€šç”¨çš„åšæ³•æ˜¯ï¼Œèƒ½åŠ›å®ç°å’Œç±»å‹å®ç°ç‹¬ç«‹æˆä¸¤ä¸ªåº“ï¼Œä¹Ÿå°±æ˜¯ä½ éœ€è¦å†å®‰è£…ç±»å‹å£°æ˜çš„åº“:Â @types/react.\nå½“é‡åˆ°ä¸Šè¿°é—®é¢˜çš„æ—¶å€™ï¼Œå°è¯•å®‰è£…ä¸€ä¸‹Â @types/[package].\nç„¶è€Œï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„åº“éƒ½æœ‰ç±»å‹å£°æ˜çš„å®ç°ï¼Œä¹Ÿä¼šæœ‰å¾ˆå¤šä¸æ”¯æŒ TS çš„å­˜åœ¨ï¼Œç„¶è€Œåˆå¿…é¡»å¾—ä½¿ç”¨è¿™ä¸ªåº“çš„æ—¶å€™è¯¥æ€ä¹ˆåŠï¼Ÿ\nè‡ªå·±å†™å£°æ˜ï¼\nä»¥Â progressbar.jsä¸ºä¾‹ï¼ŒåŸºæœ¬ä½¿ç”¨æ–¹æ³•æ˜¯ï¼š\nimport * as ProgressBar from &#39;progressbar.js&#39;;\n\nnew ProgressBar.Circle(this.$progress, &#123;\n  strokeWidth: 8,\n  trailColor: &#39;#e5e4e5&#39;,\n  trailWidth: 8,\n  easing: &#39;easeInOut&#39;\n&#125;);\n\næˆ‘ä»¬éœ€è¦å¯¹åº“ä¸­æš´éœ²å‡ºçš„ api å»åšå£°æ˜ï¼Œå¯¹ä¸Šè¿°ä¾‹å­åšä¸ªåˆ†è§£ï¼šæš´éœ²äº† Circle ç±»ï¼ŒCircle æ„é€ å‡½æ•°åŒ…å«ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ª HTMLElementï¼Œä¸€ä¸ª options. OK, come on~\n&#x2F;&#x2F; é¦–å…ˆå£°æ˜ä¸€ä¸‹æ¨¡å—ï¼š\ndeclare module &#39;progressbar.js&#39; &#123;\n  &#x2F;&#x2F; æ¨¡å—ä¸­æš´éœ²äº† Circle ç±»\n  export class Circle &#123;\n    constructor(container: HTMLElement, options: Options);\n  &#125;\n\n  &#x2F;&#x2F; æ„é€ å‡½æ•°çš„ Options éœ€è¦å•ç‹¬å£°æ˜ \n  interface Options &#123;\n    easing?: string;\n    strokeWidth?: number;\n    trailColor?: string;\n    trailWidth?: number;\n  &#125;\n&#125;\n\nå¦‚æ­¤æˆ‘ä»¬ä¾¿å®Œæˆäº†ä¸€ä¸ªç®€å•çš„å£°æ˜ï¼Œå½“ç„¶å®é™…ä½¿ç”¨ä¸­çš„ API è‚¯å®šæ¯”ä¸Šè¿°æƒ…å†µå¤æ‚ï¼Œæ ¹æ®ä½¿ç”¨æƒ…å†µï¼Œç”¨äº†å“ªäº› API æˆ–è€…å‚æ•°ï¼Œå°±è¡¥å……é‚£äº›çš„å£°æ˜å³å¯ã€‚\nä¸‰. å¦‚ä½•ç»„ç»‡ä¸€ä¸ª TS é¡¹ç›®\nTS é¡¹ç›®çš„ç›®å½•ç»„ç»‡ä¸Šï¼Œè·Ÿ JS é¡¹ç›®ä¸€æ ·ï¼Œè¡¥å……å¥½ types çš„å£°æ˜å°±å¯ä»¥äº†ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå°†ä½ å¸Œæœ›å¯¹å¤–æš´éœ²çš„èƒ½åŠ›ç›¸å…³çš„ç±»å‹å£°æ˜éƒ½æš´éœ²å‡ºå»ï¼Œä¸å‹å¥½çš„å£°æ˜ä¼šè®©æ¥å…¥ä½ é¡¹ç›®çš„äººéå¸¸çš„ç—›è‹¦ï¼ŒåŒæ—¶ï¼Œåœ¨ package.json ä¸­éœ€è¦æŒ‡å®š type çš„ path, æ¯”å¦‚ï¼š&quot;types&quot;: &quot;dist/types/index.d.ts&quot;\nå¦å¤–ï¼ŒåŠ¡å¿…åŠ ä¸ŠÂ tslint, æ›´è§„èŒƒçš„å»ç”¨ TS å®ç°åŠŸèƒ½ï¼Œå¯¹äºå…¥é—¨è€Œè¨€å°¤ä¸ºé‡è¦ã€‚\nTS å¸¦æ¥çš„æ”¹å˜æ¥è§¦ TS ä¸€ä¸ªæœˆçš„æ„Ÿå—ä¸Šæ¥è¯´ï¼Œè¿‡äº†ç£¨åˆæœŸçš„ç—›è‹¦ï¼Œå°±èƒ½æ…¢æ…¢æ„Ÿå—åˆ° TS å¸¦æ¥çš„ä¾¿åˆ©ã€‚\næ¯”å¦‚ï¼Œæœ‰ä¸€ä¸ªç±»å‹ä½ è®°å¾—åå­—æ˜¯ ABCï¼Œä½ åœ¨ VSCode ä¸­è¾“å…¥ Aï¼Œç„¶åå‘ç°ï¼Œç«Ÿç„¶èƒ½æ‰¾åˆ°æˆ‘çš„å£°æ˜ï¼ŒæŒ‰ä¸€ä¸‹å›è½¦ï¼Œå§æ§½ï¼Œè‡ªåŠ¨ç»™ä½  import è¿›æ¥äº†ï¼Œä¸ç”¨åœ¨ä¸€ä¸ªä¸ªå­—çš„è¾“å…¥ ..&#x2F;..&#x2F;..&#x2F;..&#x2F;ï¼Œä¸ç”¨ç®—ç›®å½•å±‚çº§æ˜¯å¦æ­£ç¡®äº†ï¼Œæ˜¯ä¸æ˜¯å¾ˆçˆ½ã€‚\nå¦å¤–ï¼Œå¼ºç±»å‹å¹¶ä¸æ˜¯æ²¡æœ‰å¥½å¤„å•Šï¼Œæµªå†™æƒ¯äº†å¯èƒ½è¿˜æ˜¯ä¼šç•™éšæ‚£çš„ï¼Œæœ‰ç‚¹çº¦æŸä¹Ÿå¥½ â€¦\nè™½ç„¶ä½ æ¯å¤©è¦å¤šæ•²å¾ˆå¤šÂ import * as xx from &#39;xx&#39;, ä½†æ˜¯ä½ çš„ä»£ç ä¹Ÿæ›´ä¸ºå¯é äº†ä¸æ˜¯ã€‚\nä¸å›å…±å‹‰ï¼Œæå‰æ„Ÿå—ä¸‹ä¸€ä»£ ES æ ‡å‡†ï¼ŒTS ç”¨èµ·æ¥å§~\n","slug":"TypeScriptï¼Œåˆæ¬¡è§é¢","date":"2021-08-03T11:45:38.000Z","categories_index":"","tags_index":"","author_index":"Beastrong"},{"id":"679a9e76b771c60b95232fe737f13603","title":"Antd Form.Listå®ç°è‡ªå®šä¹‰å¯ç¼–è¾‘è¡¨æ ¼","content":"\nä¸€ã€å‰è¨€å®šåˆ¶åŒ–è¾ƒæ·±çš„éœ€æ±‚ï¼Œå¾€å¾€éœ€è¦å¯ç¼–è¾‘è¡¨æ ¼æ¥æ”¯æŒè¡¨æ ¼å†…çš„ç¼–è¾‘ï¼Œä½†æ˜¯é’ˆå¯¹å¿…å¡«é¡¹æ ¡éªŒä»¥åŠè‡ªå®šä¹‰actionåŠ¨ä½œï¼Œå¸¸è§„çš„EditableTableéš¾ä»¥æ»¡è¶³éœ€è¦ï¼Œè€ŒEditableProTableåˆ™å› ä¸ºå®šåˆ¶åŒ–å¤ªæ·±è€Œä¸å¤Ÿçµæ´»ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ›´åŠ çµæ´»çš„æ–¹æ¡ˆæ¥å®ç°æˆ‘ä»¬éœ€è¦çš„æ•ˆæœï¼Œç»è¯•éªŒï¼ŒForm.Listæ˜¯ä¸ªä¸é”™çš„å®ç°æ€è·¯ã€‚\näºŒã€é’ˆå¯¹éœ€æ±‚\nè¡¨æ ¼å†…ç¼–è¾‘\nåŠ¨æ€æ–°å¢è¡Œï¼ˆè‡ªå®šä¹‰actionæŒ‰é’®åŠ¨ä½œï¼‰\næœ€å°ç»´åº¦ä¸ºè¡Œçš„å¿…å¡«é¡¹æ ¡éªŒ\nçµæ´»å¯æ‰©å±•\n\nä¸‰ã€å®ç°æ–¹æ³•\nå°è¯• åœ¨é¡¹ç›®ä¸­ï¼Œæˆ‘ç¢°åˆ°è¿™æ ·çš„éœ€æ±‚ï¼Œéœ€è¦è¡¨æ ¼å¯ç¼–è¾‘ï¼Œä¸”åˆå§‹é»˜è®¤ä¸€è¡Œå¯ç¼–è¾‘çŠ¶æ€æ•°æ®ï¼Œç‚¹å‡»è¡Œæœ€åä¸€åˆ—çš„addè¿›è¡Œå¿…å¡«é¡¹æ ¡éªŒï¼Œæ ¡éªŒå®Œæˆæ–°å¢ä¸€è¡Œä¸”æŠŠå·²ç¼–è¾‘å®Œçš„æ•°æ®ç½®ä¸ºä¸å¯ç¼–è¾‘çŠ¶æ€ï¼Œèµ·åˆè€ƒè™‘çš„å®ç°æ–¹å¼å¾ˆç®€å•ï¼Œåœ¨å¤–å±‚åŒ…ä¸€ä¸ªFormï¼Œcolumnsé‡Œé¢çš„é¡¹å†åŒ…è£¹Form.Itemï¼Œè‡³äºæ˜¯å¦å¯ç¼–è¾‘çŠ¶æ€ï¼Œç»™è¡¨æ ¼çš„æ•°æ®æºåŠ å…¥ä¸€ä¸ªeditableå­—æ®µç”¨äºåˆ¤æ–­æ˜¯å¦ç¼–è¾‘å°±è¡Œäº†ï¼Œæœ¬ä»¥ä¸ºè¿™ä¸ªæ–¹æ¡ˆå¯è¡Œï¼Œä½†å®é™…ä¸Šé—®é¢˜å¾ˆå¤šï¼Œå¦‚æœè¦é’ˆå¯¹è¡Œè¿›è¡Œæ ¡éªŒï¼Œé‚£æ˜¾ç„¶æ¯ä¸€ä¸ªè¡Œéƒ½è¦å’ŒFormåˆ©ç”¨Form.Itemçš„nameå±æ€§è¿›è¡Œç»‘å®šï¼Œè¿™æ—¶å€™nameæ˜¯å•¥å‘¢ï¼Œæ²¡æœ‰å±‚çº§åˆ’åˆ†ï¼Œå¦‚æœä½ ç»™nameçš„å€¼å•å•ä¸ºæ•°æ®çš„å­—æ®µåï¼Œé‚£æ·»åŠ ä¸€è¡Œåä¸‹ä¸€è¡Œå²‚ä¸æ˜¯å’Œç¬¬ä¸€è¡Œçš„nameé‡å¤äº†ï¼Ÿè¿™ä¼šå¯¼è‡´æ–°å¢ä¸€è¡Œæœ‰åˆå§‹æ•°æ®ï¼Œä¸”åˆå§‹æ•°æ®æ˜¯ä¸Šä¸€è¡Œå·²ä¿å­˜çš„æ•°æ®ï¼Œè‡³äºæ ¡éªŒï¼Œæ¯æ¬¡æ–°å¢è¡Œè°ƒç”¨form.submitå¯ä»¥å®ç°è¡Œçš„æ ¡éªŒï¼Œä½†æ˜¾ç„¶è¿™ç§æ–¹æ¡ˆæ˜¯ä¸å¯è¡Œçš„ã€‚\n\næ„è¯†åˆ°è¦è®©è¡Œæ•°æ®å¯¹åº”Formçš„æ ‡å¿—å”¯ä¸€ï¼Œé‚£ä¹ˆå°±è€ƒè™‘ä½¿ç”¨Form.Listå®ç°ã€‚\n\n\nForm.List\n\n\nForm.Listçš„åŸºæœ¬ç”¨æ³•å‚è€ƒantdå®˜æ–¹æ–‡æ¡£ï¼Œå¯è§è¿™ä¸ªå…ƒç´ å°±æ˜¯ä¸ºäº†è§£å†³æ ‡å¿—é‡å¤çš„é—®é¢˜è€Œç”Ÿçš„ï¼Œå®ƒå¯¹åˆå§‹çš„æ•°ç»„æ•°æ®åˆåšå¤šäº†ä¸€å±‚æ˜ å°„ï¼Œè¿™å±‚æ˜ å°„å¯¹åº”ä¸€ä¸ªæ•°ç»„ï¼Œè€Œæ•°ç»„å†…çš„å…ƒç´ åˆ™æ˜¯å­˜æœ‰åŸæ•°æ®æ•°ç»„ä¸‹æ ‡çš„å¯¹è±¡ã€‚å¤šè¯´æ— ç›Šï¼Œçœ‹å›¾ã€‚\n\næœ‰äº†è¿™å±‚æ˜ å°„ï¼Œæˆ‘ä»¬Form.Itemçš„nameä¾¿æœ‰äº†æ¯è¡Œå”¯ä¸€çš„ä¸Šçº§ï¼Œäºæ˜¯æˆ‘ä»¬å°±å¯ä»¥å°†è¡¨å¤´é…ç½®çš„columnså†™æˆå¦‚ä¸‹çš„å½¢å¼ã€‚\nrender: (text, record) &#x3D;&gt; &#123;\n        paidDetails[record.name])\n        return paidDetails[record.name]?.editable ?\n          &lt;Form.Item\n            rules&#x3D;&#123;[&#123; required: true, message: undefined &#125;]&#125;\n            name&#x3D;&#123;[record.name, &#39;paymentTerm&#39;]&#125;\n            fieldKey&#x3D;&#123;[record.fieldKey, &#39;paymentTerm&#39;]&#125;\n            style&#x3D;&#123;&#123; marginBottom: &#39;0px&#39; &#125;&#125;\n          &gt;\n            &lt;Select placeholder&#x3D;&#123;&#39;Please enter&#39;&#125; style&#x3D;&#123;&#123; width: 200 &#125;&#125; &gt;\n              &#123;\n                paymentTremOptions &amp;&amp; paymentTremOptions.map((item) &#x3D;&gt; &#123;\n                  return &lt;Option value&#x3D;&#123;item.value&#125; key&#x3D;&#123;item.value&#125;&gt;&#123;item.label&#125;&lt;&#x2F;Option&gt;\n                &#125;)\n              &#125;\n            &lt;&#x2F;Select&gt;\n          &lt;&#x2F;Form.Item&gt;\n          :                     (paymentTremOptions[paidDetails[record.name]?.paymentTerm - 1]?.label || &#39;-&#39;)\n          &#125;\nå¤åˆ¶ä»£ç \n\nåˆ°äº†è¿™ä¸€æ­¥ï¼Œæœ¬ä»¥ä¸ºåŸºæœ¬ä¸Šé¡ºåˆ©å®Œæˆäº†ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰äº›æ„æƒ³ä¸åˆ°çš„é—®é¢˜ï¼Œè¦å®ç°æ ¡éªŒåæ·»åŠ ä¸€è¡Œï¼Œåˆ©ç”¨Form.Listæœ¬èº«çš„addæ ¹æœ¬ä¸ç°å®ï¼Œå› ä¸ºæˆ‘ä»¬è¿˜éœ€è¦æ–°æ·»åŠ çš„è¡Œå¯ç¼–è¾‘è€Œå·²æ ¡éªŒçš„è¡Œä¸å¯ç¼–è¾‘ï¼Œä¹Ÿå°±æ˜¯è¯´è¦æ›´æ”¹æ¯è¡Œæ•°æ®çš„editableå­—æ®µï¼Œæ‰€ä»¥è‡ªç„¶è€Œç„¶æƒ³åˆ°è¿™é‡Œæˆ‘ä»¬å¿…é¡»è‡ªå®šä¹‰æ–°å¢è¡Œäº†ã€‚\nç„¶è€Œä¸€æ³¢æœªå¹³ä¸€æ³¢åˆèµ·ï¼Œé—®é¢˜è¿˜æ˜¯ä¸æ–­å‡ºç°ï¼Œä»¥ä¸‹æ˜¯æˆ‘æ•´ç†çš„ä¼šé‡åˆ°çš„ç»†èŠ‚é—®é¢˜ï¼š\n\ncolumnså†…addåŠ¨ä½œè°ƒç”¨form.submitè¿›è¡Œæ ¡éªŒï¼Œå¤–å±‚åœ¨Formçš„onFinishå¯¹çŠ¶æ€æ•°æ®è¿›è¡Œå¤„ç†ï¼ˆä¸å¯è¡Œï¼Œæ›´æ–°çŠ¶æ€æ•°æ®æˆåŠŸäº†ï¼Œè€Œfieldsè¿˜æ˜¯ä¸å˜ï¼Œå¯¼è‡´æ–°å¢è¡Œå¤±è´¥ï¼‰\næ—¢ç„¶fieldsä¸å˜ï¼Œé‚£æ¯æ¬¡è¿›è¡Œåˆ¤æ–­fieldsé•¿åº¦ä¸çŠ¶æ€æ•°æ®æ˜¯å¦ä¸åŒ¹é…ï¼Œç„¶åå†å¢åŠ æˆ–å‡å°‘ä¸€ä¸ªæ•°æ®ï¼ˆä»æ—§ä¸å¯è¡Œï¼Œæ–°å¢ç¡®å®æˆåŠŸäº†ï¼Œä½†æ˜¯åˆ é™¤çš„æ—¶å€™ä¼šç¢°åˆ°ç‰¹æ®Šæƒ…å†µï¼Œæ¯”å¦‚åˆ é™¤æœ€åä¸€ä¸ªç›´æ¥æŠ¥é”™ï¼Œåº”è¯¥æ˜¯æ‰‹åŠ¨å¤„ç†fieldsä¸å®Œå–„å¯¼è‡´çš„ï¼Œæ²¡æœ‰ç»§ç»­æ·±ç©¶åŸå› ï¼Œä½†æ˜¾ç„¶è¿™æ¡è·¯èµ°ä¸é€šï¼Œfieldsæ—¢ç„¶æ˜¯Form.Itemå†…éƒ¨ç»´æŠ¤çš„æ•°æ®ï¼Œé‚£å°±ä¸è¯¥ç”±å¼€å‘è€…æ‰‹åŠ¨å»æ“ä½œï¼Œå¦åˆ™ä¼šå‡ºç°å„ç§å„æ ·çš„é—®é¢˜ï¼‰\n\n\næœ€ç»ˆå®ç°\n\næœ€ç»ˆé—®é¢˜åœ¨è‡ªå®šä¹‰addä¸Šï¼Œfieldsä¸èƒ½æ‰‹åŠ¨æ›´æ”¹ï¼Œä½†è‚¯å®šæœ‰æ›´æ”¹çš„æ–¹æ³•ï¼Œå”¯ä¸€èƒ½æƒ³åˆ°çš„é€”ç»å°±æ˜¯é€šè¿‡formäº†ï¼Œæƒ³æƒ³ä¹Ÿæ˜¯ï¼Œæˆ‘ä»¬ç»™formæ·»åŠ åˆå§‹å€¼ä¹Ÿä¸èƒ½ç›´æ¥æ›´æ–°çŠ¶æ€æ•°æ®å°±å®ç°å•Šï¼Œéƒ½æ˜¯åˆ©ç”¨setFieldsValueçš„ï¼Œæ‰€ä»¥æ”¹ç”¨setFieldsValueåæœç„¶å®ç°äº†ã€‚ è¿˜æœ‰ä¸€ç‚¹ï¼Œæ¯æ¬¡è¡¨æ ¼å†…è¡Œç¼–è¾‘å®Œçš„æ•°æ®å¦‚ä½•ä¿å­˜ï¼Œé€šè¿‡setFieldsValueåªèƒ½æ–°å¢è¡Œï¼Œä½†æ˜¯è¡Œå†…çš„æ•°æ®ä¼šä¸¢å¤±ï¼Œä¸¢å¤±çš„åŸå› å¾ˆç®€å•ï¼Œæˆ‘ä»¬åœ¨ç¼–è¾‘çš„æ—¶å€™è™½ç„¶Formä¸´æ—¶ä¿å­˜äº†æ•°æ®ï¼Œä½†æ˜¯æ·»åŠ è¡Œåï¼Œå› ä¸ºæ‰€æœ‰è¡Œçš„ç¼–è¾‘çŠ¶æ€ä¼šé‡æ–°åˆ¤æ–­ï¼Œæ‰€ä»¥è¡¨æ ¼ä¼šé‡æ–°renderï¼Œæˆ‘ä»¬åœ¨ç¼–è¾‘æ—¶åˆæ²¡æœ‰å®æ—¶å°†å˜åŒ–æ›´æ–°åˆ°çŠ¶æ€æ•°æ®ï¼Œè€ŒFormåˆæ‹¿çŠ¶æ€æ•°æ®ä½œä¸ºåˆå§‹å€¼ï¼Œè‡ªç„¶å¯¼è‡´é‡æ–°renderåè¡Œæ•°å’Œç¼–è¾‘çŠ¶æ€éƒ½å¯¹äº†ä½†æ˜¯æ¯è¡Œçš„å­—æ®µæ•°æ®å´ä¸¢å¤±äº†ï¼ŒçŸ¥é“é—®é¢˜ï¼Œè§£å†³èµ·æ¥å°±å¾ˆç®€å•äº†ï¼Œåœ¨setFieldsValueçš„åŒæ—¶ä¹Ÿå°†æ•°æ®æ›´æ–°åˆ°çŠ¶æ€å°±å¯ä»¥äº†ã€‚\nè¿™äº›å¤„ç†å®Œåï¼Œæ¥ä¸‹æ¥çš„é—®é¢˜å°±æ˜¯ä½•æ—¶è¿›è¡Œæ ¡éªŒä½•æ—¶è¿›è¡Œæ–°å¢ï¼Œå¦‚æœè¦åœ¨æ ¡éªŒä¹‹åè¿›è¡Œæ–°å¢ï¼Œé‚£å¦‚ä½•åšåˆ°å‘¢ï¼Ÿæ–¹æ³•ä¸æ­¢ä¸€ä¸ªï¼Œæˆ‘ä»¬ç‚¹å‡»addçš„æ—¶å€™è§¦å‘form.submitï¼Œå°±èƒ½åœ¨è§¦å‘Formçš„onFinishä¹‹å‰è¿›è¡Œæ ¡éªŒï¼Œç„¶ååœ¨onFinishå†…æ›´æ–°çŠ¶æ€æ•°æ®åŒæ—¶è°ƒç”¨setFieldsValueæ›´æ–°è¡¨å•æ•°æ®å°±è¡Œäº†ã€‚ å¦ä¸€ç§æ–¹æ³•ä¹Ÿç±»ä¼¼ï¼Œæ— éæ˜¯ æŠŠåŠ¨ä½œå†åšæ‹†åˆ†ï¼Œå…ˆåˆ©ç”¨ form.validateFieldsåšæ ¡éªŒï¼Œç„¶ååœ¨å…¶é“¾å¼è°ƒç”¨thenä¸­è¿›è¡Œæ›´æ–°çŠ¶æ€æ•°æ®åŒæ—¶è°ƒç”¨setFieldsValueæ›´æ–°è¡¨å•æ•°æ®å°±å¯ä»¥äº†ã€‚\næ·»åŠ å®ç°äº†æ¥ä¸‹æ¥å°±æ˜¯åˆ é™¤ï¼Œåˆ é™¤ä¹Ÿå¾ˆç®€å•ï¼Œä¸ç”¨è¿›è¡Œæ ¡éªŒï¼Œæ ¹æ®å”¯ä¸€æ ‡è¯†è¿‡æ»¤å³å¯ã€‚\nå››ã€å®ç°ä»£ç \né¡µé¢\n\n &lt;Form form&#x3D;&#123;form&#125; initialValues&#x3D;&#123;&#123; table: paidDetails &#125;&#125; onFinish&#x3D;&#123;(data) &#x3D;&gt; &#123;\n            setPaidDetails(data.table)\n          &#125;&#125;&gt;\n            &lt;Form.List name&#x3D;&quot;table&quot;&gt;\n              &#123;(fields) &#x3D;&gt; &#123;\n                console.log(fields,&#39;fields&#39;)\n                return (\n                  &lt;div&gt;\n                    &lt;Table\n                      className&#x3D;&#123;&#96;xp-table x-table-large $&#123;styles.paidDetailTable&#125;&#96;&#125;\n                      scroll&#x3D;&#123;&#123; scrollToFirstRowOnChange: true, x: &#39;max-content&#39; &#125;&#125;\n                      dataSource&#x3D;&#123;fields&#125;\n                      rowKey&#x3D;&#123;&#39;id&#39;&#125;\n                      pagination&#x3D;&#123;false&#125;\n                      columns&#x3D;&#123;PaidDetailColumns(paidDetails, setPaidDetails, form, formatMessage)&#125;\n                    &#x2F;&gt;\n                  &lt;&#x2F;div&gt;\n                );\n              &#125;\n              &#125;\n            &lt;&#x2F;Form.List&gt;\n          &lt;&#x2F;Form&gt;\nå¤åˆ¶ä»£ç \n\n\ncolumns\n\nexport const PaidDetailColumns &#x3D; (\n  paidDetails,\n  setPaidDetails,\n  form,\n  formatMessage\n) &#x3D;&gt; &#123;\n  const columnsList &#x3D; [    &#123;      title: formatMessage(&#123; id: &#39;app.No&#39; &#125;),      render: (_, record, index) &#x3D;&gt; &#123;        return index + 1      &#125;    &#125;,    &#123;      title: formatMessage(&#123; id: &#39;repairSettlement.paymentTerm&#39; &#125;),      dataIndex: &#39;paymentTerm&#39;,      render: (text, record) &#x3D;&gt; &#123;        console.log(record, paymentTremOptions, paidDetails[record.name])\n        return paidDetails[record.name]?.editable ?\n          &lt;Form.Item\n            rules&#x3D;&#123;[&#123; required: true, message: undefined &#125;]&#125;\n            name&#x3D;&#123;[record.name, &#39;paymentTerm&#39;]&#125;\n            fieldKey&#x3D;&#123;[record.fieldKey, &#39;paymentTerm&#39;]&#125;\n            style&#x3D;&#123;&#123; marginBottom: &#39;0px&#39; &#125;&#125;\n          &gt;\n            &lt;Select placeholder&#x3D;&#123;&#39;Please enter&#39;&#125; style&#x3D;&#123;&#123; width: 200 &#125;&#125; &gt;\n              &#123;\n                paymentTremOptions &amp;&amp; paymentTremOptions.map((item) &#x3D;&gt; &#123;\n                  return &lt;Option value&#x3D;&#123;item.value&#125; key&#x3D;&#123;item.value&#125;&gt;&#123;item.label&#125;&lt;&#x2F;Option&gt;\n                &#125;)\n              &#125;\n            &lt;&#x2F;Select&gt;\n          &lt;&#x2F;Form.Item&gt;\n          : (paymentTremOptions[paidDetails[record.name]?.paymentTerm - 1]?.label || &#39;-&#39;)\n      &#125;\n    &#125;,\n    &#123;\n      title: formatMessage(&#123; id: &#39;repairSettlement.paymentReceivedAmount&#39; &#125;),\n      dataIndex: &#39;receivableAmount&#39;,\n      render: (text, record) &#x3D;&gt; &#123;\n        return paidDetails[record.name]?.editable ?\n          &lt;Form.Item\n            rules&#x3D;&#123;[&#123; required: true, message: undefined &#125;]&#125;\n            name&#x3D;&#123;[record.name, &#39;receivableAmount&#39;]&#125;\n            fieldKey&#x3D;&#123;[record.fieldKey, &#39;receivableAmount&#39;]&#125;\n            style&#x3D;&#123;&#123; marginBottom: &#39;0px&#39; &#125;&#125;\n          &gt;\n            &lt;InputNumber placeholder&#x3D;&#123;&#39;Please enter&#39;&#125; style&#x3D;&#123;&#123; width: 200 &#125;&#125; &#x2F;&gt;\n          &lt;&#x2F;Form.Item&gt;\n          : (paidDetails[record.name]?.receivableAmount || &#39;-&#39;)\n      &#125;\n    &#125;,\n    &#123;\n      title: formatMessage(&#123; id: &#39;repairSettlement.remark&#39; &#125;),\n      dataIndex: &#39;remark&#39;,\n      render: (text, record) &#x3D;&gt; &#123;\n        return paidDetails[record.name]?.editable ?\n          &lt;Form.Item\n            name&#x3D;&#123;[record.name, &#39;remark&#39;]&#125;\n            fieldKey&#x3D;&#123;[record.fieldKey, &#39;remark&#39;]&#125;\n            style&#x3D;&#123;&#123; marginBottom: &#39;0px&#39; &#125;&#125;\n          &gt;\n            &lt;Input placeholder&#x3D;&#123;&#39;Please enter&#39;&#125; style&#x3D;&#123;&#123; width: 200 &#125;&#125; &#x2F;&gt;\n          &lt;&#x2F;Form.Item&gt;\n          : (paidDetails[record.name]?.remark || &#39;-&#39;)\n      &#125;\n    &#125;,\n    &#123;\n      title: formatMessage(&#123; id: &#39;app.action&#39; &#125;),\n      fixed: &#39;right&#39;,\n      render: (text, record, _) &#x3D;&gt; &#123;\n        return paidDetails[record.name]?.editable ?\n          &lt;a\n            key&#x3D;&quot;editable&quot;\n            onClick&#x3D;&#123;() &#x3D;&gt; &#123;\n              form.validateFields().then(() &#x3D;&gt; &#123;\n                const list &#x3D; form.getFieldValue(&#39;table&#39;);\n                list.forEach((element: any, index: number) &#x3D;&gt; &#123;\n                  list[index].editable &#x3D; false\n                &#125;);\n                const nextList &#x3D; list.concat([&#123;                  editable: true,                  id: (Math.random() * 1000000).toFixed(0)                &#125;]);\n                console.log(nextList)\n                form.submit()\n                form.setFieldsValue(&#123;\n                  table: nextList,\n                &#125;);\n              &#125;)\n            &#125;&#125;\n          &gt;\n            &#123;formatMessage(&#123; id: &#39;app.add&#39; &#125;)&#125;\n          &lt;&#x2F;a&gt;\n          :\n          &lt;a\n            key&#x3D;&quot;editable&quot;\n            onClick&#x3D;&#123;() &#x3D;&gt; &#123;\n              const list &#x3D; form.getFieldValue(&#39;table&#39;).filter((element: any, index: number) &#x3D;&gt; &#123;\n                return index !&#x3D;&#x3D; record.name\n              &#125;);\n              const nextList &#x3D; list.concat([]);\n              setPaidDetails(nextList)\n              form.setFieldsValue(&#123;\n                table: nextList,\n              &#125;);\n            &#125;&#125;\n          &gt;\n            &#123;formatMessage(&#123; id: &#39;app.remove&#39; &#125;)&#125;\n          &lt;&#x2F;a&gt;\n      &#125;\n\n    &#125;\n  ]\n  return columnsList\n&#125;\nå¤åˆ¶ä»£ç \n\näº”ã€æ³¨æ„äº‹é¡¹1ã€ æ³¨æ„å›æ˜¾form.setFieldsValue({table: çŠ¶æ€æ•°æ®}) è¿™é‡Œtableå¯¹åº”Form.Listçš„æ ‡è¯†, éœ€è¦å›æ˜¾çš„æ—¶å€™Formçš„initialValueå°±ä¸éœ€è¦äº†\n","slug":"Antd Form.Listå®ç°è‡ªå®šä¹‰å¯ç¼–è¾‘è¡¨æ ¼","date":"2021-07-25T13:39:19.000Z","categories_index":"","tags_index":"","author_index":"Beastrong"},{"id":"eb0bae97b5766c0795d8d777051a13ca","title":"é¢è¯•é¢˜ç¬”è®°â€”â€”VUEç¯‡(ä¸‹)","content":"å››ã€è·¯ç”±\n\nVue-Router çš„æ‡’åŠ è½½å¦‚ä½•å®ç°éæ‡’åŠ è½½ï¼šimport List from â€˜@&#x2F;components&#x2F;list.vueâ€™const router &#x3D; new VueRouter({  routes: [ { path: â€˜&#x2F;listâ€™, component: List }  ]})å¤åˆ¶ä»£ç ï¼ˆ1ï¼‰æ–¹æ¡ˆä¸€(å¸¸ç”¨)ï¼šä½¿ç”¨ç®­å¤´å‡½æ•°+importåŠ¨æ€åŠ è½½const List &#x3D; () &#x3D;&gt; import(â€˜@&#x2F;components&#x2F;list.vueâ€™)const router &#x3D; new VueRouter({  routes: [ { path: â€˜&#x2F;listâ€™, component: List }  ]})å¤åˆ¶ä»£ç ï¼ˆ2ï¼‰æ–¹æ¡ˆäºŒï¼šä½¿ç”¨ç®­å¤´å‡½æ•°+requireåŠ¨æ€åŠ è½½const router &#x3D; new Router({  routes: [{  path: â€˜&#x2F;listâ€™,  component: resolve &#x3D;&gt; require([â€˜@&#x2F;components&#x2F;listâ€™], resolve)}  ]})å¤åˆ¶ä»£ç ï¼ˆ3ï¼‰æ–¹æ¡ˆä¸‰ï¼šä½¿ç”¨webpackçš„require.ensureæŠ€æœ¯ï¼Œä¹Ÿå¯ä»¥å®ç°æŒ‰éœ€åŠ è½½ã€‚ è¿™ç§æƒ…å†µä¸‹ï¼Œå¤šä¸ªè·¯ç”±æŒ‡å®šç›¸åŒçš„chunkNameï¼Œä¼šåˆå¹¶æ‰“åŒ…æˆä¸€ä¸ªjsæ–‡ä»¶ã€‚&#x2F;&#x2F; rå°±æ˜¯resolveconst List &#x3D; r &#x3D;&gt; require.ensure([], () &#x3D;&gt; r(require(â€˜@&#x2F;components&#x2F;listâ€™)), â€˜listâ€™);&#x2F;&#x2F; è·¯ç”±ä¹Ÿæ˜¯æ­£å¸¸çš„å†™æ³•  è¿™ç§æ˜¯å®˜æ–¹æ¨èçš„å†™çš„ æŒ‰æ¨¡å—åˆ’åˆ†æ‡’åŠ è½½const router &#x3D; new Router({  routes: [  { path: â€˜&#x2F;listâ€™, component: List, name: â€˜listâ€™  } ]}))å¤åˆ¶ä»£ç \nè·¯ç”±çš„hashå’Œhistoryæ¨¡å¼çš„åŒºåˆ«Vue-Routeræœ‰ä¸¤ç§æ¨¡å¼ï¼šhashæ¨¡å¼å’Œhistoryæ¨¡å¼ã€‚é»˜è®¤çš„è·¯ç”±æ¨¡å¼æ˜¯hashæ¨¡å¼ã€‚\nhashæ¨¡å¼ç®€ä»‹ï¼š hashæ¨¡å¼æ˜¯å¼€å‘ä¸­é»˜è®¤çš„æ¨¡å¼ï¼Œå®ƒçš„URLå¸¦ç€ä¸€ä¸ª#ï¼Œä¾‹å¦‚ï¼šwww.abc.com/#/vueï¼Œå®ƒçš„hashå€¼å°±æ˜¯#/vueã€‚ç‰¹ç‚¹ï¼šhashå€¼ä¼šå‡ºç°åœ¨URLé‡Œé¢ï¼Œä½†æ˜¯ä¸ä¼šå‡ºç°åœ¨HTTPè¯·æ±‚ä¸­ï¼Œå¯¹åç«¯å®Œå…¨æ²¡æœ‰å½±å“ã€‚æ‰€ä»¥æ”¹å˜hashå€¼ï¼Œä¸ä¼šé‡æ–°åŠ è½½é¡µé¢ã€‚è¿™ç§æ¨¡å¼çš„æµè§ˆå™¨æ”¯æŒåº¦å¾ˆå¥½ï¼Œä½ç‰ˆæœ¬çš„IEæµè§ˆå™¨ä¹Ÿæ”¯æŒè¿™ç§æ¨¡å¼ã€‚hashè·¯ç”±è¢«ç§°ä¸ºæ˜¯å‰ç«¯è·¯ç”±ï¼Œå·²ç»æˆä¸ºSPAï¼ˆå•é¡µé¢åº”ç”¨ï¼‰çš„æ ‡é…ã€‚åŸç†ï¼š hashæ¨¡å¼çš„ä¸»è¦åŸç†å°±æ˜¯onhashchange()äº‹ä»¶ï¼šwindow.onhashchange &#x3D; function(event){ console.log(event.oldURL, event.newURL); let hash &#x3D; location.hash.slice(1);}å¤åˆ¶ä»£ç ä½¿ç”¨onhashchange()äº‹ä»¶çš„å¥½å¤„å°±æ˜¯ï¼Œåœ¨é¡µé¢çš„hashå€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ— éœ€å‘åç«¯å‘èµ·è¯·æ±‚ï¼Œwindowå°±å¯ä»¥ç›‘å¬äº‹ä»¶çš„æ”¹å˜ï¼Œå¹¶æŒ‰è§„åˆ™åŠ è½½ç›¸åº”çš„ä»£ç ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œhashå€¼å˜åŒ–å¯¹åº”çš„URLéƒ½ä¼šè¢«æµè§ˆå™¨è®°å½•ä¸‹æ¥ï¼Œè¿™æ ·æµè§ˆå™¨å°±èƒ½å®ç°é¡µé¢çš„å‰è¿›å’Œåé€€ã€‚è™½ç„¶æ˜¯æ²¡æœ‰è¯·æ±‚åç«¯æœåŠ¡å™¨ï¼Œä½†æ˜¯é¡µé¢çš„hashå€¼å’Œå¯¹åº”çš„URLå…³è”èµ·æ¥äº†ã€‚\nhistoryæ¨¡å¼ç®€ä»‹ï¼š historyæ¨¡å¼çš„URLä¸­æ²¡æœ‰#ï¼Œå®ƒä½¿ç”¨çš„æ˜¯ä¼ ç»Ÿçš„è·¯ç”±åˆ†å‘æ¨¡å¼ï¼Œå³ç”¨æˆ·åœ¨è¾“å…¥ä¸€ä¸ªURLæ—¶ï¼ŒæœåŠ¡å™¨ä¼šæ¥æ”¶è¿™ä¸ªè¯·æ±‚ï¼Œå¹¶è§£æè¿™ä¸ªURLï¼Œç„¶ååšå‡ºç›¸åº”çš„é€»è¾‘å¤„ç†ã€‚ç‰¹ç‚¹ï¼š å½“ä½¿ç”¨historyæ¨¡å¼æ—¶ï¼ŒURLå°±åƒè¿™æ ·ï¼šabc.com&#x2F;user&#x2F;idã€‚ç›¸æ¯”hashæ¨¡å¼æ›´åŠ å¥½çœ‹ã€‚ä½†æ˜¯ï¼Œhistoryæ¨¡å¼éœ€è¦åå°é…ç½®æ”¯æŒã€‚å¦‚æœåå°æ²¡æœ‰æ­£ç¡®é…ç½®ï¼Œè®¿é—®æ—¶ä¼šè¿”å›404ã€‚APIï¼š history apiå¯ä»¥åˆ†ä¸ºä¸¤å¤§éƒ¨åˆ†ï¼Œåˆ‡æ¢å†å²çŠ¶æ€å’Œä¿®æ”¹å†å²çŠ¶æ€ï¼š\n\nä¿®æ”¹å†å²çŠ¶æ€ï¼šåŒ…æ‹¬äº† HTML5 History Interface ä¸­æ–°å¢çš„ pushState() å’Œ replaceState() æ–¹æ³•ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•åº”ç”¨äºæµè§ˆå™¨çš„å†å²è®°å½•æ ˆï¼Œæä¾›äº†å¯¹å†å²è®°å½•è¿›è¡Œä¿®æ”¹çš„åŠŸèƒ½ã€‚åªæ˜¯å½“ä»–ä»¬è¿›è¡Œä¿®æ”¹æ—¶ï¼Œè™½ç„¶ä¿®æ”¹äº†urlï¼Œä½†æµè§ˆå™¨ä¸ä¼šç«‹å³å‘åç«¯å‘é€è¯·æ±‚ã€‚å¦‚æœè¦åšåˆ°æ”¹å˜urlä½†åˆä¸åˆ·æ–°é¡µé¢çš„æ•ˆæœï¼Œå°±éœ€è¦å‰ç«¯ç”¨ä¸Šè¿™ä¸¤ä¸ªAPIã€‚åˆ‡æ¢å†å²çŠ¶æ€ï¼š åŒ…æ‹¬forward()ã€back()ã€go()ä¸‰ä¸ªæ–¹æ³•ï¼Œå¯¹åº”æµè§ˆå™¨çš„å‰è¿›ï¼Œåé€€ï¼Œè·³è½¬æ“ä½œã€‚\nè™½ç„¶historyæ¨¡å¼ä¸¢å¼ƒäº†ä¸‘é™‹çš„#ã€‚ä½†æ˜¯ï¼Œå®ƒä¹Ÿæœ‰è‡ªå·±çš„ç¼ºç‚¹ï¼Œå°±æ˜¯åœ¨åˆ·æ–°é¡µé¢çš„æ—¶å€™ï¼Œå¦‚æœæ²¡æœ‰ç›¸åº”çš„è·¯ç”±æˆ–èµ„æºï¼Œå°±ä¼šåˆ·å‡º404æ¥ã€‚å¦‚æœæƒ³è¦åˆ‡æ¢åˆ°historyæ¨¡å¼ï¼Œå°±è¦è¿›è¡Œä»¥ä¸‹é…ç½®ï¼ˆåç«¯ä¹Ÿè¦è¿›è¡Œé…ç½®ï¼‰ï¼šconst router &#x3D; new VueRouter({  mode: â€˜historyâ€™,  routes: [â€¦]})å¤åˆ¶ä»£ç 3. ä¸¤ç§æ¨¡å¼å¯¹æ¯”è°ƒç”¨ history.pushState() ç›¸æ¯”äºç›´æ¥ä¿®æ”¹ hashï¼Œå­˜åœ¨ä»¥ä¸‹ä¼˜åŠ¿:\npushState() è®¾ç½®çš„æ–° URL å¯ä»¥æ˜¯ä¸å½“å‰ URL åŒæºçš„ä»»æ„ URLï¼›è€Œ hash åªå¯ä¿®æ”¹ # åé¢çš„éƒ¨åˆ†ï¼Œå› æ­¤åªèƒ½è®¾ç½®ä¸å½“å‰ URL åŒæ–‡æ¡£çš„ URLï¼›pushState() è®¾ç½®çš„æ–° URL å¯ä»¥ä¸å½“å‰ URL ä¸€æ¨¡ä¸€æ ·ï¼Œè¿™æ ·ä¹Ÿä¼šæŠŠè®°å½•æ·»åŠ åˆ°æ ˆä¸­ï¼›è€Œ hash è®¾ç½®çš„æ–°å€¼å¿…é¡»ä¸åŸæ¥ä¸ä¸€æ ·æ‰ä¼šè§¦å‘åŠ¨ä½œå°†è®°å½•æ·»åŠ åˆ°æ ˆä¸­ï¼›pushState() é€šè¿‡ stateObject å‚æ•°å¯ä»¥æ·»åŠ ä»»æ„ç±»å‹çš„æ•°æ®åˆ°è®°å½•ä¸­ï¼›è€Œ hash åªå¯æ·»åŠ çŸ­å­—ç¬¦ä¸²ï¼›pushState() å¯é¢å¤–è®¾ç½® title å±æ€§ä¾›åç»­ä½¿ç”¨ã€‚hashæ¨¡å¼ä¸‹ï¼Œä»…hashç¬¦å·ä¹‹å‰çš„urlä¼šè¢«åŒ…å«åœ¨è¯·æ±‚ä¸­ï¼Œåç«¯å¦‚æœæ²¡æœ‰åšåˆ°å¯¹è·¯ç”±çš„å…¨è¦†ç›–ï¼Œä¹Ÿä¸ä¼šè¿”å›404é”™è¯¯ï¼›historyæ¨¡å¼ä¸‹ï¼Œå‰ç«¯çš„urlå¿…é¡»å’Œå®é™…å‘åç«¯å‘èµ·è¯·æ±‚çš„urlä¸€è‡´ï¼Œå¦‚æœæ²¡æœ‰å¯¹ç”¨çš„è·¯ç”±å¤„ç†ï¼Œå°†è¿”å›404é”™è¯¯ã€‚\nhashæ¨¡å¼å’Œhistoryæ¨¡å¼éƒ½æœ‰å„è‡ªçš„ä¼˜åŠ¿å’Œç¼ºé™·ï¼Œè¿˜æ˜¯è¦æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©æ€§çš„ä½¿ç”¨ã€‚3. å¦‚ä½•è·å–é¡µé¢çš„hashå˜åŒ–ï¼ˆ1ï¼‰ç›‘å¬$routeçš„å˜åŒ–&#x2F;&#x2F; ç›‘å¬,å½“è·¯ç”±å‘ç”Ÿå˜åŒ–çš„æ—¶å€™æ‰§è¡Œwatch: {  $route: {    handler: function(val, oldVal){      console.log(val);    },    &#x2F;&#x2F; æ·±åº¦è§‚å¯Ÿç›‘å¬    deep: true  }},å¤åˆ¶ä»£ç ï¼ˆ2ï¼‰window.location.hashè¯»å–#å€¼window.location.hash çš„å€¼å¯è¯»å¯å†™ï¼Œè¯»å–æ¥åˆ¤æ–­çŠ¶æ€æ˜¯å¦æ”¹å˜ï¼Œå†™å…¥æ—¶å¯ä»¥åœ¨ä¸é‡è½½ç½‘é¡µçš„å‰æä¸‹ï¼Œæ·»åŠ ä¸€æ¡å†å²è®¿é—®è®°å½•ã€‚4. $route å’Œ$router çš„åŒºåˆ«\n$route æ˜¯â€œè·¯ç”±ä¿¡æ¯å¯¹è±¡â€ï¼ŒåŒ…æ‹¬ pathï¼Œparamsï¼Œhashï¼Œqueryï¼ŒfullPathï¼Œmatchedï¼Œname ç­‰è·¯ç”±ä¿¡æ¯å‚æ•°$router æ˜¯â€œè·¯ç”±å®ä¾‹â€å¯¹è±¡åŒ…æ‹¬äº†è·¯ç”±çš„è·³è½¬æ–¹æ³•ï¼Œé’©å­å‡½æ•°ç­‰ã€‚\n\nå¦‚ä½•å®šä¹‰åŠ¨æ€è·¯ç”±ï¼Ÿå¦‚ä½•è·å–ä¼ è¿‡æ¥çš„åŠ¨æ€å‚æ•°ï¼Ÿï¼ˆ1ï¼‰paramæ–¹å¼\n\né…ç½®è·¯ç”±æ ¼å¼ï¼š&#x2F;router&#x2F;:idä¼ é€’çš„æ–¹å¼ï¼šåœ¨pathåé¢è·Ÿä¸Šå¯¹åº”çš„å€¼ä¼ é€’åå½¢æˆçš„è·¯å¾„ï¼š&#x2F;router&#x2F;123\n1ï¼‰è·¯ç”±å®šä¹‰&#x2F;&#x2F;åœ¨APP.vueä¸­ç”¨æˆ·    \n&#x2F;&#x2F;åœ¨index.js{Â  Â path: â€˜&#x2F;user&#x2F;:useridâ€™,Â  Â component: User,},å¤åˆ¶ä»£ç 2ï¼‰è·¯ç”±è·³è½¬&#x2F;&#x2F; æ–¹æ³•1ï¼šæŒ‰é’®&lt;&#x2F;router-link\n&#x2F;&#x2F; æ–¹æ³•2ï¼šthis.$router.push({name:â€™usersâ€™,params:{uname:wade}})\n&#x2F;&#x2F; æ–¹æ³•3ï¼šthis.$router.push(â€˜&#x2F;user&#x2F;â€˜ + wade)å¤åˆ¶ä»£ç 3ï¼‰å‚æ•°è·å–é€šè¿‡ $route.params.userid è·å–ä¼ é€’çš„å€¼ï¼ˆ2ï¼‰queryæ–¹å¼\né…ç½®è·¯ç”±æ ¼å¼ï¼š&#x2F;routerï¼Œä¹Ÿå°±æ˜¯æ™®é€šé…ç½®ä¼ é€’çš„æ–¹å¼ï¼šå¯¹è±¡ä¸­ä½¿ç”¨queryçš„keyä½œä¸ºä¼ é€’æ–¹å¼ä¼ é€’åå½¢æˆçš„è·¯å¾„ï¼š&#x2F;route?id&#x3D;123\n1ï¼‰è·¯ç”±å®šä¹‰&#x2F;&#x2F;æ–¹å¼1ï¼šç›´æ¥åœ¨router-link æ ‡ç­¾ä¸Šä»¥å¯¹è±¡çš„å½¢å¼æ¡£æ¡ˆ\n&#x2F;&#x2F; æ–¹å¼2ï¼šå†™æˆæŒ‰é’®ä»¥ç‚¹å‡»äº‹ä»¶å½¢å¼&lt;button @click&#x3D;â€™profileClickâ€™&gt;æˆ‘çš„    \nprofileClick(){  this.$router.push({    path: â€œ&#x2F;profileâ€,    query: {        name: â€œkobiâ€,        age: â€œ28â€,        height: 198    }  });}å¤åˆ¶ä»£ç 2ï¼‰è·³è½¬æ–¹æ³•&#x2F;&#x2F; æ–¹æ³•1ï¼šæŒ‰é’®\n&#x2F;&#x2F; æ–¹æ³•2ï¼šthis.$router.push({ name: â€˜usersâ€™, query:{ uname:james }})\n&#x2F;&#x2F; æ–¹æ³•3ï¼šæŒ‰é’®\n&#x2F;&#x2F; æ–¹æ³•4ï¼šthis.$router.push({ path: â€˜&#x2F;userâ€™, query:{ uname:james }})\n&#x2F;&#x2F; æ–¹æ³•5ï¼šthis.$router.push(â€˜&#x2F;user?uname&#x3D;â€™ + jsmes)å¤åˆ¶ä»£ç 3ï¼‰è·å–å‚æ•°é€šè¿‡$route.query è·å–ä¼ é€’çš„å€¼å¤åˆ¶ä»£ç 6. Vue-router è·¯ç”±é’©å­åœ¨ç”Ÿå‘½å‘¨æœŸçš„ä½“ç°ä¸€ã€Vue-Routerå¯¼èˆªå®ˆå«æœ‰çš„æ—¶å€™ï¼Œéœ€è¦é€šè¿‡è·¯ç”±æ¥è¿›è¡Œä¸€äº›æ“ä½œï¼Œæ¯”å¦‚æœ€å¸¸è§çš„ç™»å½•æƒé™éªŒè¯ï¼Œå½“ç”¨æˆ·æ»¡è¶³æ¡ä»¶æ—¶ï¼Œæ‰è®©å…¶è¿›å…¥å¯¼èˆªï¼Œå¦åˆ™å°±å–æ¶ˆè·³è½¬ï¼Œå¹¶è·³åˆ°ç™»å½•é¡µé¢è®©å…¶ç™»å½•ã€‚ä¸ºæ­¤æœ‰å¾ˆå¤šç§æ–¹æ³•å¯ä»¥æ¤å…¥è·¯ç”±çš„å¯¼èˆªè¿‡ç¨‹ï¼šå…¨å±€çš„ï¼Œå•ä¸ªè·¯ç”±ç‹¬äº«çš„ï¼Œæˆ–è€…ç»„ä»¶çº§çš„\nå…¨å±€è·¯ç”±é’©å­\nvue-routerå…¨å±€æœ‰ä¸‰ä¸ªè·¯ç”±é’©å­;\nrouter.beforeEach å…¨å±€å‰ç½®å®ˆå« è¿›å…¥è·¯ç”±ä¹‹å‰router.beforeResolve å…¨å±€è§£æå®ˆå«ï¼ˆ2.5.0+ï¼‰åœ¨ beforeRouteEnter è°ƒç”¨ä¹‹åè°ƒç”¨router.afterEach å…¨å±€åç½®é’©å­ è¿›å…¥è·¯ç”±ä¹‹å\nå…·ä½“ä½¿ç”¨âˆ¶\nbeforeEachï¼ˆåˆ¤æ–­æ˜¯å¦ç™»å½•äº†ï¼Œæ²¡ç™»å½•å°±è·³è½¬åˆ°ç™»å½•é¡µï¼‰\nrouter.beforeEach((to, from, next) &#x3D;&gt; {    let ifInfo &#x3D; Vue.prototype.$common.getSession(â€˜userDataâ€™);  &#x2F;&#x2F; åˆ¤æ–­æ˜¯å¦ç™»å½•çš„å­˜å‚¨ä¿¡æ¯    if (!ifInfo) {        &#x2F;&#x2F; sessionStorageé‡Œæ²¡æœ‰å‚¨å­˜userä¿¡æ¯        if (to.path &#x3D;&#x3D; â€˜&#x2F;â€˜) {            &#x2F;&#x2F;å¦‚æœæ˜¯ç™»å½•é¡µé¢è·¯å¾„ï¼Œå°±ç›´æ¥next()            next();        } else {            &#x2F;&#x2F;ä¸ç„¶å°±è·³è½¬åˆ°ç™»å½•            Message.warning(â€œè¯·é‡æ–°ç™»å½•ï¼â€);            window.location.href &#x3D; Vue.prototype.$loginUrl;        }    } else {        return next();    }})å¤åˆ¶ä»£ç \nafterEach ï¼ˆè·³è½¬ä¹‹åæ»šåŠ¨æ¡å›åˆ°é¡¶éƒ¨ï¼‰\nrouter.afterEach((to, from) &#x3D;&gt; {    &#x2F;&#x2F; è·³è½¬ä¹‹åæ»šåŠ¨æ¡å›åˆ°é¡¶éƒ¨    window.scrollTo(0,0);});å¤åˆ¶ä»£ç \nå•ä¸ªè·¯ç”±ç‹¬äº«é’©å­\nbeforeEnterå¦‚æœä¸æƒ³å…¨å±€é…ç½®å®ˆå«çš„è¯ï¼Œå¯ä»¥ä¸ºæŸäº›è·¯ç”±å•ç‹¬é…ç½®å®ˆå«ï¼Œæœ‰ä¸‰ä¸ªå‚æ•°âˆ¶ toã€fromã€nextexport default [    {        path: â€˜&#x2F;â€˜,        name: â€˜loginâ€™,        component: login,        beforeEnter: (to, from, next) &#x3D;&gt; {            console.log(â€˜å³å°†è¿›å…¥ç™»å½•é¡µé¢â€™)            next()        }    }]å¤åˆ¶ä»£ç \nç»„ä»¶å†…é’©å­\nbeforeRouteUpdateã€beforeRouteEnterã€beforeRouteLeaveè¿™ä¸‰ä¸ªé’©å­éƒ½æœ‰ä¸‰ä¸ªå‚æ•°âˆ¶toã€fromã€next\nbeforeRouteEnterâˆ¶ è¿›å…¥ç»„ä»¶å‰è§¦å‘beforeRouteUpdateâˆ¶ å½“å‰åœ°å€æ”¹å˜å¹¶ä¸”æ”¹ç»„ä»¶è¢«å¤ç”¨æ—¶è§¦å‘ï¼Œä¸¾ä¾‹æ¥è¯´ï¼Œå¸¦æœ‰åŠ¨æ€å‚æ•°çš„è·¯å¾„foo&#x2F;âˆ¶idï¼Œåœ¨ &#x2F;foo&#x2F;1 å’Œ &#x2F;foo&#x2F;2 ä¹‹é—´è·³è½¬çš„æ—¶å€™ï¼Œç”±äºä¼šæ¸²æŸ“åŒæ ·çš„foaç»„ä»¶ï¼Œè¿™ä¸ªé’©å­åœ¨è¿™ç§æƒ…å†µä¸‹å°±ä¼šè¢«è°ƒç”¨beforeRouteLeaveâˆ¶ ç¦»å¼€ç»„ä»¶è¢«è°ƒç”¨\næ³¨æ„ç‚¹ï¼ŒbeforeRouteEnterç»„ä»¶å†…è¿˜è®¿é—®ä¸åˆ°thisï¼Œå› ä¸ºè¯¥å®ˆå«æ‰§è¡Œå‰ç»„ä»¶å®ä¾‹è¿˜æ²¡æœ‰è¢«åˆ›å»ºï¼Œéœ€è¦ä¼ ä¸€ä¸ªå›è°ƒç»™ nextæ¥è®¿é—®ï¼Œä¾‹å¦‚ï¼šbeforeRouteEnter(to, from, next) {    next(target &#x3D;&gt; {        if (from.path &#x3D;&#x3D; â€˜&#x2F;classProcessâ€™) {            target.isFromProcess &#x3D; true        }    })}å¤åˆ¶ä»£ç äºŒã€Vueè·¯ç”±é’©å­åœ¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°çš„ä½“ç°\nå®Œæ•´çš„è·¯ç”±å¯¼èˆªè§£ææµç¨‹ï¼ˆä¸åŒ…æ‹¬å…¶ä»–ç”Ÿå‘½å‘¨æœŸï¼‰\nè§¦å‘è¿›å…¥å…¶ä»–è·¯ç”±ã€‚è°ƒç”¨è¦ç¦»å¼€è·¯ç”±çš„ç»„ä»¶å®ˆå«beforeRouteLeaveè°ƒç”¨å±€å‰ç½®å®ˆå«âˆ¶ beforeEachåœ¨é‡ç”¨çš„ç»„ä»¶é‡Œè°ƒç”¨ beforeRouteUpdateè°ƒç”¨è·¯ç”±ç‹¬äº«å®ˆå« beforeEnterã€‚è§£æå¼‚æ­¥è·¯ç”±ç»„ä»¶ã€‚åœ¨å°†è¦è¿›å…¥çš„è·¯ç”±ç»„ä»¶ä¸­è°ƒç”¨ beforeRouteEnterè°ƒç”¨å…¨å±€è§£æå®ˆå« beforeResolveå¯¼èˆªè¢«ç¡®è®¤ã€‚è°ƒç”¨å…¨å±€åç½®é’©å­çš„ afterEach é’©å­ã€‚è§¦å‘DOMæ›´æ–°ï¼ˆmountedï¼‰ã€‚æ‰§è¡ŒbeforeRouteEnter å®ˆå«ä¸­ä¼ ç»™ next çš„å›è°ƒå‡½æ•°\nè§¦å‘é’©å­çš„å®Œæ•´é¡ºåº\nè·¯ç”±å¯¼èˆªã€keep-aliveã€å’Œç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­ç»“åˆèµ·æ¥çš„ï¼Œè§¦å‘é¡ºåºï¼Œå‡è®¾æ˜¯ä»aç»„ä»¶ç¦»å¼€ï¼Œç¬¬ä¸€æ¬¡è¿›å…¥bç»„ä»¶âˆ¶\nbeforeRouteLeaveï¼šè·¯ç”±ç»„ä»¶çš„ç»„ä»¶ç¦»å¼€è·¯ç”±å‰é’©å­ï¼Œå¯å–æ¶ˆè·¯ç”±ç¦»å¼€ã€‚beforeEachï¼šè·¯ç”±å…¨å±€å‰ç½®å®ˆå«ï¼Œå¯ç”¨äºç™»å½•éªŒè¯ã€å…¨å±€è·¯ç”±loadingç­‰ã€‚beforeEnterï¼šè·¯ç”±ç‹¬äº«å®ˆå«beforeRouteEnterï¼šè·¯ç”±ç»„ä»¶çš„ç»„ä»¶è¿›å…¥è·¯ç”±å‰é’©å­ã€‚beforeResolveï¼šè·¯ç”±å…¨å±€è§£æå®ˆå«afterEachï¼šè·¯ç”±å…¨å±€åç½®é’©å­beforeCreateï¼šç»„ä»¶ç”Ÿå‘½å‘¨æœŸï¼Œä¸èƒ½è®¿é—®tAisã€‚created;ç»„ä»¶ç”Ÿå‘½å‘¨æœŸï¼Œå¯ä»¥è®¿é—®tAisï¼Œä¸èƒ½è®¿é—®domã€‚beforeMountï¼šç»„ä»¶ç”Ÿå‘½å‘¨æœŸdeactivatedï¼šç¦»å¼€ç¼“å­˜ç»„ä»¶aï¼Œæˆ–è€…è§¦å‘açš„beforeDestroyå’Œdestroyedç»„ä»¶é”€æ¯é’©å­ã€‚mountedï¼šè®¿é—®&#x2F;æ“ä½œdomã€‚activatedï¼šè¿›å…¥ç¼“å­˜ç»„ä»¶ï¼Œè¿›å…¥açš„åµŒå¥—å­ç»„ä»¶ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ã€‚æ‰§è¡ŒbeforeRouteEnterå›è°ƒå‡½æ•°nextã€‚\nå¯¼èˆªè¡Œä¸ºè¢«è§¦å‘åˆ°å¯¼èˆªå®Œæˆçš„æ•´ä¸ªè¿‡ç¨‹\nå¯¼èˆªè¡Œä¸ºè¢«è§¦å‘ï¼Œæ­¤æ—¶å¯¼èˆªæœªè¢«ç¡®è®¤ã€‚åœ¨å¤±æ´»çš„ç»„ä»¶é‡Œè°ƒç”¨ç¦»å¼€å®ˆå« beforeRouteLeaveã€‚è°ƒç”¨å…¨å±€çš„ beforeEachå®ˆå«ã€‚åœ¨é‡ç”¨çš„ç»„ä»¶é‡Œè°ƒç”¨ beforeRouteUpdate å®ˆå«(2.2+)ã€‚åœ¨è·¯ç”±é…ç½®é‡Œè°ƒç”¨ beforeEnteYã€‚è§£æå¼‚æ­¥è·¯ç”±ç»„ä»¶ï¼ˆå¦‚æœæœ‰ï¼‰ã€‚åœ¨è¢«æ¿€æ´»çš„ç»„ä»¶é‡Œè°ƒç”¨ beforeRouteEnterã€‚è°ƒç”¨å…¨å±€çš„ beforeResolve å®ˆå«ï¼ˆ2.5+ï¼‰ï¼Œæ ‡ç¤ºè§£æé˜¶æ®µå®Œæˆã€‚å¯¼èˆªè¢«ç¡®è®¤ã€‚è°ƒç”¨å…¨å±€çš„ afterEach é’©å­ã€‚éé‡ç”¨ç»„ä»¶ï¼Œå¼€å§‹ç»„ä»¶å®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸï¼šbeforeCreate&amp;createdã€beforeMount&amp;mountedè§¦å‘ DOM æ›´æ–°ã€‚ç”¨åˆ›å»ºå¥½çš„å®ä¾‹è°ƒç”¨ beforeRouteEnterå®ˆå«ä¸­ä¼ ç»™ next çš„å›è°ƒå‡½æ•°ã€‚å¯¼èˆªå®Œæˆ\n\nVue-routerè·³è½¬å’Œlocation.hrefæœ‰ä»€ä¹ˆåŒºåˆ«\n\nä½¿ç”¨ location.href&#x3D; &#x2F;urlÂ æ¥è·³è½¬ï¼Œç®€å•æ–¹ä¾¿ï¼Œä½†æ˜¯åˆ·æ–°äº†é¡µé¢ï¼›ä½¿ç”¨ history.pushState( &#x2F;url ) ï¼Œæ— åˆ·æ–°é¡µé¢ï¼Œé™æ€è·³è½¬ï¼›å¼•è¿› router ï¼Œç„¶åä½¿ç”¨ router.push( &#x2F;url ) æ¥è·³è½¬ï¼Œä½¿ç”¨äº† diff ç®—æ³•ï¼Œå®ç°äº†æŒ‰éœ€åŠ è½½ï¼Œå‡å°‘äº† dom çš„æ¶ˆè€—ã€‚å…¶å®ä½¿ç”¨ router è·³è½¬å’Œä½¿ç”¨ history.pushState() æ²¡ä»€ä¹ˆå·®åˆ«çš„ï¼Œå› ä¸ºvue-routerå°±æ˜¯ç”¨äº† history.pushState() ï¼Œå°¤å…¶æ˜¯åœ¨historyæ¨¡å¼ä¸‹ã€‚\n\nparamså’Œqueryçš„åŒºåˆ«ç”¨æ³•ï¼šqueryè¦ç”¨pathæ¥å¼•å…¥ï¼Œparamsè¦ç”¨nameæ¥å¼•å…¥ï¼Œæ¥æ”¶å‚æ•°éƒ½æ˜¯ç±»ä¼¼çš„ï¼Œåˆ†åˆ«æ˜¯ this.$route.query.name å’Œ this.$route.params.name ã€‚urlåœ°å€æ˜¾ç¤ºï¼šqueryæ›´åŠ ç±»ä¼¼äºajaxä¸­getä¼ å‚ï¼Œparamsåˆ™ç±»ä¼¼äºpostï¼Œè¯´çš„å†ç®€å•ä¸€ç‚¹ï¼Œå‰è€…åœ¨æµè§ˆå™¨åœ°å€æ ä¸­æ˜¾ç¤ºå‚æ•°ï¼Œåè€…åˆ™ä¸æ˜¾ç¤ºæ³¨æ„ï¼šqueryåˆ·æ–°ä¸ä¼šä¸¢å¤±queryé‡Œé¢çš„æ•°æ® paramsåˆ·æ–°ä¼šä¸¢å¤± paramsé‡Œé¢çš„æ•°æ®ã€‚\nVue-router å¯¼èˆªå®ˆå«æœ‰å“ªäº›\n\nå…¨å±€å‰ç½®&#x2F;é’©å­ï¼šbeforeEachã€beforeResolveã€afterEachè·¯ç”±ç‹¬äº«çš„å®ˆå«ï¼šbeforeEnterç»„ä»¶å†…çš„å®ˆå«ï¼šbeforeRouteEnterã€beforeRouteUpdateã€beforeRouteLeave\n\nå¯¹å‰ç«¯è·¯ç”±çš„ç†è§£åœ¨å‰ç«¯æŠ€æœ¯æ—©æœŸï¼Œä¸€ä¸ª url å¯¹åº”ä¸€ä¸ªé¡µé¢ï¼Œå¦‚æœè¦ä» A é¡µé¢åˆ‡æ¢åˆ° B é¡µé¢ï¼Œé‚£ä¹ˆå¿…ç„¶ä¼´éšç€é¡µé¢çš„åˆ·æ–°ã€‚è¿™ä¸ªä½“éªŒå¹¶ä¸å¥½ï¼Œä¸è¿‡åœ¨æœ€åˆä¹Ÿæ˜¯æ— å¥ˆä¹‹ä¸¾â€”â€”ç”¨æˆ·åªæœ‰åœ¨åˆ·æ–°é¡µé¢çš„æƒ…å†µä¸‹ï¼Œæ‰å¯ä»¥é‡æ–°å»è¯·æ±‚æ•°æ®ã€‚åæ¥ï¼Œæ”¹å˜å‘ç”Ÿäº†â€”â€”Ajax å‡ºç°äº†ï¼Œå®ƒå…è®¸äººä»¬åœ¨ä¸åˆ·æ–°é¡µé¢çš„æƒ…å†µä¸‹å‘èµ·è¯·æ±‚ï¼›ä¸ä¹‹å…±ç”Ÿçš„ï¼Œè¿˜æœ‰â€œä¸åˆ·æ–°é¡µé¢å³å¯æ›´æ–°é¡µé¢å†…å®¹â€è¿™ç§éœ€æ±‚ã€‚åœ¨è¿™æ ·çš„èƒŒæ™¯ä¸‹ï¼Œå‡ºç°äº† SPAï¼ˆå•é¡µé¢åº”ç”¨ï¼‰ã€‚SPAæå¤§åœ°æå‡äº†ç”¨æˆ·ä½“éªŒï¼Œå®ƒå…è®¸é¡µé¢åœ¨ä¸åˆ·æ–°çš„æƒ…å†µä¸‹æ›´æ–°é¡µé¢å†…å®¹ï¼Œä½¿å†…å®¹çš„åˆ‡æ¢æ›´åŠ æµç•…ã€‚ä½†æ˜¯åœ¨ SPA è¯ç”Ÿä¹‹åˆï¼Œäººä»¬å¹¶æ²¡æœ‰è€ƒè™‘åˆ°â€œå®šä½â€è¿™ä¸ªé—®é¢˜â€”â€”åœ¨å†…å®¹åˆ‡æ¢å‰åï¼Œé¡µé¢çš„ URL éƒ½æ˜¯ä¸€æ ·çš„ï¼Œè¿™å°±å¸¦æ¥äº†ä¸¤ä¸ªé—®é¢˜ï¼š\n\nSPA å…¶å®å¹¶ä¸çŸ¥é“å½“å‰çš„é¡µé¢â€œè¿›å±•åˆ°äº†å“ªä¸€æ­¥â€ã€‚å¯èƒ½åœ¨ä¸€ä¸ªç«™ç‚¹ä¸‹ç»è¿‡äº†åå¤çš„â€œå‰è¿›â€æ‰ç»ˆäºå”¤å‡ºäº†æŸä¸€å—å†…å®¹ï¼Œä½†æ˜¯æ­¤æ—¶åªè¦åˆ·æ–°ä¸€ä¸‹é¡µé¢ï¼Œä¸€åˆ‡å°±ä¼šè¢«æ¸…é›¶ï¼Œå¿…é¡»é‡å¤ä¹‹å‰çš„æ“ä½œã€æ‰å¯ä»¥é‡æ–°å¯¹å†…å®¹è¿›è¡Œå®šä½â€”â€”SPA å¹¶ä¸ä¼šâ€œè®°ä½â€ä½ çš„æ“ä½œã€‚ç”±äºæœ‰ä¸”ä»…æœ‰ä¸€ä¸ª URL ç»™é¡µé¢åšæ˜ å°„ï¼Œè¿™å¯¹ SEO ä¹Ÿä¸å¤Ÿå‹å¥½ï¼Œæœç´¢å¼•æ“æ— æ³•æ”¶é›†å…¨é¢çš„ä¿¡æ¯\nä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå‰ç«¯è·¯ç”±å‡ºç°äº†ã€‚å‰ç«¯è·¯ç”±å¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨ä»…æœ‰ä¸€ä¸ªé¡µé¢çš„æƒ…å†µä¸‹ï¼Œâ€œè®°ä½â€ç”¨æˆ·å½“å‰èµ°åˆ°äº†å“ªä¸€æ­¥â€”â€”ä¸º SPA ä¸­çš„å„ä¸ªè§†å›¾åŒ¹é…ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ã€‚è¿™æ„å‘³ç€ç”¨æˆ·å‰è¿›ã€åé€€è§¦å‘çš„æ–°å†…å®¹ï¼Œéƒ½ä¼šæ˜ å°„åˆ°ä¸åŒçš„ URL ä¸Šå»ã€‚æ­¤æ—¶å³ä¾¿ä»–åˆ·æ–°é¡µé¢ï¼Œå› ä¸ºå½“å‰çš„ URL å¯ä»¥æ ‡è¯†å‡ºä»–æ‰€å¤„çš„ä½ç½®ï¼Œå› æ­¤å†…å®¹ä¹Ÿä¸ä¼šä¸¢å¤±ã€‚é‚£ä¹ˆå¦‚ä½•å®ç°è¿™ä¸ªç›®çš„å‘¢ï¼Ÿé¦–å…ˆè¦è§£å†³ä¸¤ä¸ªé—®é¢˜ï¼š\nå½“ç”¨æˆ·åˆ·æ–°é¡µé¢æ—¶ï¼Œæµè§ˆå™¨ä¼šé»˜è®¤æ ¹æ®å½“å‰ URL å¯¹èµ„æºè¿›è¡Œé‡æ–°å®šä½ï¼ˆå‘é€è¯·æ±‚ï¼‰ã€‚è¿™ä¸ªåŠ¨ä½œå¯¹ SPA æ˜¯ä¸å¿…è¦çš„ï¼Œå› ä¸ºæˆ‘ä»¬çš„ SPA ä½œä¸ºå•é¡µé¢ï¼Œæ— è®ºå¦‚ä½•ä¹Ÿåªä¼šæœ‰ä¸€ä¸ªèµ„æºä¸ä¹‹å¯¹åº”ã€‚æ­¤æ—¶è‹¥èµ°æ­£å¸¸çš„è¯·æ±‚-åˆ·æ–°æµç¨‹ï¼Œåè€Œä¼šä½¿ç”¨æˆ·çš„å‰è¿›åé€€æ“ä½œæ— æ³•è¢«è®°å½•ã€‚å•é¡µé¢åº”ç”¨å¯¹æœåŠ¡ç«¯æ¥è¯´ï¼Œå°±æ˜¯ä¸€ä¸ªURLã€ä¸€å¥—èµ„æºï¼Œé‚£ä¹ˆå¦‚ä½•åšåˆ°ç”¨â€œä¸åŒçš„URLâ€æ¥æ˜ å°„ä¸åŒçš„è§†å›¾å†…å®¹å‘¢ï¼Ÿ\nä»è¿™ä¸¤ä¸ªé—®é¢˜æ¥çœ‹ï¼ŒæœåŠ¡ç«¯å·²ç»å®Œå…¨æ•‘ä¸äº†è¿™ä¸ªåœºæ™¯äº†ã€‚æ‰€ä»¥è¦é å’±ä»¬å‰ç«¯è‡ªåŠ›æ›´ç”Ÿï¼Œä¸ç„¶æ€ä¹ˆå«â€œå‰ç«¯è·¯ç”±â€å‘¢ï¼Ÿä½œä¸ºå‰ç«¯ï¼Œå¯ä»¥æä¾›è¿™æ ·çš„è§£å†³æ€è·¯ï¼š\næ‹¦æˆªç”¨æˆ·çš„åˆ·æ–°æ“ä½œï¼Œé¿å…æœåŠ¡ç«¯ç›²ç›®å“åº”ã€è¿”å›ä¸ç¬¦åˆé¢„æœŸçš„èµ„æºå†…å®¹ã€‚æŠŠåˆ·æ–°è¿™ä¸ªåŠ¨ä½œå®Œå…¨æ”¾åˆ°å‰ç«¯é€»è¾‘é‡Œæ¶ˆåŒ–æ‰ã€‚æ„ŸçŸ¥ URL çš„å˜åŒ–ã€‚è¿™é‡Œä¸æ˜¯è¯´è¦æ”¹é€  URLã€å‡­ç©ºåˆ¶é€ å‡º N ä¸ª URL æ¥ã€‚è€Œæ˜¯è¯´ URL è¿˜æ˜¯é‚£ä¸ª URLï¼Œåªä¸è¿‡æˆ‘ä»¬å¯ä»¥ç»™å®ƒåšä¸€äº›å¾®å°çš„å¤„ç†â€”â€”è¿™äº›å¤„ç†å¹¶ä¸ä¼šå½±å“ URL æœ¬èº«çš„æ€§è´¨ï¼Œä¸ä¼šå½±å“æœåŠ¡å™¨å¯¹å®ƒçš„è¯†åˆ«ï¼Œåªæœ‰æˆ‘ä»¬å‰ç«¯æ„ŸçŸ¥çš„åˆ°ã€‚ä¸€æ—¦æˆ‘ä»¬æ„ŸçŸ¥åˆ°äº†ï¼Œæˆ‘ä»¬å°±æ ¹æ®è¿™äº›å˜åŒ–ã€ç”¨ JS å»ç»™å®ƒç”Ÿæˆä¸åŒçš„å†…å®¹ã€‚\näº”ã€Vuex\n\nVuex çš„åŸç†Vuex æ˜¯ä¸€ä¸ªä¸“ä¸º Vue.js åº”ç”¨ç¨‹åºå¼€å‘çš„çŠ¶æ€ç®¡ç†æ¨¡å¼ã€‚æ¯ä¸€ä¸ª Vuex åº”ç”¨çš„æ ¸å¿ƒå°±æ˜¯ storeï¼ˆä»“åº“ï¼‰ã€‚â€œstoreâ€ åŸºæœ¬ä¸Šå°±æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œå®ƒåŒ…å«ç€ä½ çš„åº”ç”¨ä¸­å¤§éƒ¨åˆ†çš„çŠ¶æ€ ( state )ã€‚\n\nVuex çš„çŠ¶æ€å­˜å‚¨æ˜¯å“åº”å¼çš„ã€‚å½“ Vue ç»„ä»¶ä» store ä¸­è¯»å–çŠ¶æ€çš„æ—¶å€™ï¼Œè‹¥ store ä¸­çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆç›¸åº”çš„ç»„ä»¶ä¹Ÿä¼šç›¸åº”åœ°å¾—åˆ°é«˜æ•ˆæ›´æ–°ã€‚æ”¹å˜ store ä¸­çš„çŠ¶æ€çš„å”¯ä¸€é€”å¾„å°±æ˜¯æ˜¾å¼åœ°æäº¤ (commit) mutationã€‚è¿™æ ·å¯ä»¥æ–¹ä¾¿åœ°è·Ÿè¸ªæ¯ä¸€ä¸ªçŠ¶æ€çš„å˜åŒ–ã€‚\nVuexä¸ºVue Componentså»ºç«‹èµ·äº†ä¸€ä¸ªå®Œæ•´çš„ç”Ÿæ€åœˆï¼ŒåŒ…æ‹¬å¼€å‘ä¸­çš„APIè°ƒç”¨ä¸€ç¯ã€‚ï¼ˆ1ï¼‰æ ¸å¿ƒæµç¨‹ä¸­çš„ä¸»è¦åŠŸèƒ½ï¼š\nVue Components æ˜¯ vue ç»„ä»¶ï¼Œç»„ä»¶ä¼šè§¦å‘ï¼ˆdispatchï¼‰ä¸€äº›äº‹ä»¶æˆ–åŠ¨ä½œï¼Œä¹Ÿå°±æ˜¯å›¾ä¸­çš„ Actions;åœ¨ç»„ä»¶ä¸­å‘å‡ºçš„åŠ¨ä½œï¼Œè‚¯å®šæ˜¯æƒ³è·å–æˆ–è€…æ”¹å˜æ•°æ®çš„ï¼Œä½†æ˜¯åœ¨ vuex ä¸­ï¼Œæ•°æ®æ˜¯é›†ä¸­ç®¡ç†çš„ï¼Œä¸èƒ½ç›´æ¥å»æ›´æ”¹æ•°æ®ï¼Œæ‰€ä»¥ä¼šæŠŠè¿™ä¸ªåŠ¨ä½œæäº¤ï¼ˆCommitï¼‰åˆ° Mutations ä¸­;ç„¶å Mutations å°±å»æ”¹å˜ï¼ˆMutateï¼‰State ä¸­çš„æ•°æ®;å½“ State ä¸­çš„æ•°æ®è¢«æ”¹å˜ä¹‹åï¼Œå°±ä¼šé‡æ–°æ¸²æŸ“ï¼ˆRenderï¼‰åˆ° Vue Components ä¸­å»ï¼Œç»„ä»¶å±•ç¤ºæ›´æ–°åçš„æ•°æ®ï¼Œå®Œæˆä¸€ä¸ªæµç¨‹ã€‚\nï¼ˆ2ï¼‰å„æ¨¡å—åœ¨æ ¸å¿ƒæµç¨‹ä¸­çš„ä¸»è¦åŠŸèƒ½ï¼š\nVue Componentsâˆ¶ Vueç»„ä»¶ã€‚HTMLé¡µé¢ä¸Šï¼Œè´Ÿè´£æ¥æ”¶ç”¨æˆ·æ“ä½œç­‰äº¤äº’è¡Œä¸ºï¼Œæ‰§è¡Œdispatchæ–¹æ³•è§¦å‘å¯¹åº”actionè¿›è¡Œå›åº”ã€‚dispatchâˆ¶æ“ä½œè¡Œä¸ºè§¦å‘æ–¹æ³•ï¼Œæ˜¯å”¯ä¸€èƒ½æ‰§è¡Œactionçš„æ–¹æ³•ã€‚actionsâˆ¶ æ“ä½œè¡Œä¸ºå¤„ç†æ¨¡å—ã€‚è´Ÿè´£å¤„ç†Vue Componentsæ¥æ”¶åˆ°çš„æ‰€æœ‰äº¤äº’è¡Œä¸ºã€‚åŒ…å«åŒæ­¥&#x2F;å¼‚æ­¥æ“ä½œï¼Œæ”¯æŒå¤šä¸ªåŒåæ–¹æ³•ï¼ŒæŒ‰ç…§æ³¨å†Œçš„é¡ºåºä¾æ¬¡è§¦å‘ã€‚å‘åå°APIè¯·æ±‚çš„æ“ä½œå°±åœ¨è¿™ä¸ªæ¨¡å—ä¸­è¿›è¡Œï¼ŒåŒ…æ‹¬è§¦å‘å…¶ä»–actionä»¥åŠæäº¤mutationçš„æ“ä½œã€‚è¯¥æ¨¡å—æä¾›äº†Promiseçš„å°è£…ï¼Œä»¥æ”¯æŒactionçš„é“¾å¼è§¦å‘ã€‚commitâˆ¶çŠ¶æ€æ”¹å˜æäº¤æ“ä½œæ–¹æ³•ã€‚å¯¹mutationè¿›è¡Œæäº¤ï¼Œæ˜¯å”¯ä¸€èƒ½æ‰§è¡Œmutationçš„æ–¹æ³•ã€‚mutationsâˆ¶çŠ¶æ€æ”¹å˜æ“ä½œæ–¹æ³•ã€‚æ˜¯Vuexä¿®æ”¹stateçš„å”¯ä¸€æ¨èæ–¹æ³•ï¼Œå…¶ä»–ä¿®æ”¹æ–¹å¼åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹å°†ä¼šæŠ¥é”™ã€‚è¯¥æ–¹æ³•åªèƒ½è¿›è¡ŒåŒæ­¥æ“ä½œï¼Œä¸”æ–¹æ³•ååªèƒ½å…¨å±€å”¯ä¸€ã€‚æ“ä½œä¹‹ä¸­ä¼šæœ‰ä¸€äº›hookæš´éœ²å‡ºæ¥ï¼Œä»¥è¿›è¡Œstateçš„ç›‘æ§ç­‰ã€‚stateâˆ¶ é¡µé¢çŠ¶æ€ç®¡ç†å®¹å™¨å¯¹è±¡ã€‚é›†ä¸­å­˜å‚¨Vuecomponentsä¸­dataå¯¹è±¡çš„é›¶æ•£æ•°æ®ï¼Œå…¨å±€å”¯ä¸€ï¼Œä»¥è¿›è¡Œç»Ÿä¸€çš„çŠ¶æ€ç®¡ç†ã€‚é¡µé¢æ˜¾ç¤ºæ‰€éœ€çš„æ•°æ®ä»è¯¥å¯¹è±¡ä¸­è¿›è¡Œè¯»å–ï¼Œåˆ©ç”¨Vueçš„ç»†ç²’åº¦æ•°æ®å“åº”æœºåˆ¶æ¥è¿›è¡Œé«˜æ•ˆçš„çŠ¶æ€æ›´æ–°ã€‚gettersâˆ¶ stateå¯¹è±¡è¯»å–æ–¹æ³•ã€‚å›¾ä¸­æ²¡æœ‰å•ç‹¬åˆ—å‡ºè¯¥æ¨¡å—ï¼Œåº”è¯¥è¢«åŒ…å«åœ¨äº†renderä¸­ï¼ŒVue Componentsé€šè¿‡è¯¥æ–¹æ³•è¯»å–å…¨å±€stateå¯¹è±¡ã€‚\n\nVuexä¸­actionå’Œmutationçš„åŒºåˆ«mutationä¸­çš„æ“ä½œæ˜¯ä¸€ç³»åˆ—çš„åŒæ­¥å‡½æ•°ï¼Œç”¨äºä¿®æ”¹stateä¸­çš„å˜é‡çš„çš„çŠ¶æ€ã€‚å½“ä½¿ç”¨vuexæ—¶éœ€è¦é€šè¿‡commitæ¥æäº¤éœ€è¦æ“ä½œçš„å†…å®¹ã€‚mutation éå¸¸ç±»ä¼¼äºäº‹ä»¶ï¼šæ¯ä¸ª mutation éƒ½æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²çš„ äº‹ä»¶ç±»å‹ (type) å’Œ ä¸€ä¸ª å›è°ƒå‡½æ•° (handler)ã€‚è¿™ä¸ªå›è°ƒå‡½æ•°å°±æ˜¯å®é™…è¿›è¡ŒçŠ¶æ€æ›´æ”¹çš„åœ°æ–¹ï¼Œå¹¶ä¸”å®ƒä¼šæ¥å— state ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼šconst store &#x3D; new Vuex.Store({  state: { count: 1  },  mutations: { increment (state) {   state.count++      &#x2F;&#x2F; å˜æ›´çŠ¶æ€ }  }})å¤åˆ¶ä»£ç å½“è§¦å‘ä¸€ä¸ªç±»å‹ä¸º increment çš„ mutation æ—¶ï¼Œéœ€è¦è°ƒç”¨æ­¤å‡½æ•°ï¼šstore.commit(â€˜incrementâ€™)å¤åˆ¶ä»£ç è€ŒActionç±»ä¼¼äºmutationï¼Œä¸åŒç‚¹åœ¨äºï¼š\n\nAction å¯ä»¥åŒ…å«ä»»æ„å¼‚æ­¥æ“ä½œã€‚Action æäº¤çš„æ˜¯ mutationï¼Œè€Œä¸æ˜¯ç›´æ¥å˜æ›´çŠ¶æ€ã€‚\nconst store &#x3D; new Vuex.Store({  state: {    count: 0  },  mutations: {    increment (state) {      state.count++    }  },  actions: {    increment (context) {      context.commit(â€˜incrementâ€™)    }  }})å¤åˆ¶ä»£ç Action å‡½æ•°æ¥å—ä¸€ä¸ªä¸ store å®ä¾‹å…·æœ‰ç›¸åŒæ–¹æ³•å’Œå±æ€§çš„ context å¯¹è±¡ï¼Œå› æ­¤ä½ å¯ä»¥è°ƒç”¨ context.commit æäº¤ä¸€ä¸ª mutationï¼Œæˆ–è€…é€šè¿‡ context.state å’Œ context.getters æ¥è·å– state å’Œ gettersã€‚æ‰€ä»¥ï¼Œä¸¤è€…çš„ä¸åŒç‚¹å¦‚ä¸‹ï¼š\nMutationä¸“æ³¨äºä¿®æ”¹Stateï¼Œç†è®ºä¸Šæ˜¯ä¿®æ”¹Stateçš„å”¯ä¸€é€”å¾„ï¼›Actionä¸šåŠ¡ä»£ç ã€å¼‚æ­¥è¯·æ±‚ã€‚Mutationï¼šå¿…é¡»åŒæ­¥æ‰§è¡Œï¼›Actionï¼šå¯ä»¥å¼‚æ­¥ï¼Œä½†ä¸èƒ½ç›´æ¥æ“ä½œStateã€‚åœ¨è§†å›¾æ›´æ–°æ—¶ï¼Œå…ˆè§¦å‘actionsï¼Œactionså†è§¦å‘mutationmutationçš„å‚æ•°æ˜¯stateï¼Œå®ƒåŒ…å«storeä¸­çš„æ•°æ®ï¼›storeçš„å‚æ•°æ˜¯contextï¼Œå®ƒæ˜¯ state çš„çˆ¶çº§ï¼ŒåŒ…å« stateã€getters\n\nVuex å’Œ localStorage çš„åŒºåˆ«ï¼ˆ1ï¼‰æœ€é‡è¦çš„åŒºåˆ«\n\nvuexå­˜å‚¨åœ¨å†…å­˜ä¸­localstorage åˆ™ä»¥æ–‡ä»¶çš„æ–¹å¼å­˜å‚¨åœ¨æœ¬åœ°ï¼Œåªèƒ½å­˜å‚¨å­—ç¬¦ä¸²ç±»å‹çš„æ•°æ®ï¼Œå­˜å‚¨å¯¹è±¡éœ€è¦ JSONçš„stringifyå’Œparseæ–¹æ³•è¿›è¡Œå¤„ç†ã€‚ è¯»å–å†…å­˜æ¯”è¯»å–ç¡¬ç›˜é€Ÿåº¦è¦å¿«\nï¼ˆ2ï¼‰åº”ç”¨åœºæ™¯\nVuex æ˜¯ä¸€ä¸ªä¸“ä¸º Vue.js åº”ç”¨ç¨‹åºå¼€å‘çš„çŠ¶æ€ç®¡ç†æ¨¡å¼ã€‚å®ƒé‡‡ç”¨é›†ä¸­å¼å­˜å‚¨ç®¡ç†åº”ç”¨çš„æ‰€æœ‰ç»„ä»¶çš„çŠ¶æ€ï¼Œå¹¶ä»¥ç›¸åº”çš„è§„åˆ™ä¿è¯çŠ¶æ€ä»¥ä¸€ç§å¯é¢„æµ‹çš„æ–¹å¼å‘ç”Ÿå˜åŒ–ã€‚vuexç”¨äºç»„ä»¶ä¹‹é—´çš„ä¼ å€¼ã€‚localstorageæ˜¯æœ¬åœ°å­˜å‚¨ï¼Œæ˜¯å°†æ•°æ®å­˜å‚¨åˆ°æµè§ˆå™¨çš„æ–¹æ³•ï¼Œä¸€èˆ¬æ˜¯åœ¨è·¨é¡µé¢ä¼ é€’æ•°æ®æ—¶ä½¿ç”¨ ã€‚Vuexèƒ½åšåˆ°æ•°æ®çš„å“åº”å¼ï¼Œlocalstorageä¸èƒ½\nï¼ˆ3ï¼‰æ°¸ä¹…æ€§åˆ·æ–°é¡µé¢æ—¶vuexå­˜å‚¨çš„å€¼ä¼šä¸¢å¤±ï¼Œlocalstorageä¸ä¼šã€‚æ³¨æ„ï¼š å¯¹äºä¸å˜çš„æ•°æ®ç¡®å®å¯ä»¥ç”¨localstorageå¯ä»¥ä»£æ›¿vuexï¼Œä½†æ˜¯å½“ä¸¤ä¸ªç»„ä»¶å…±ç”¨ä¸€ä¸ªæ•°æ®æºï¼ˆå¯¹è±¡æˆ–æ•°ç»„ï¼‰æ—¶ï¼Œå¦‚æœå…¶ä¸­ä¸€ä¸ªç»„ä»¶æ”¹å˜äº†è¯¥æ•°æ®æºï¼Œå¸Œæœ›å¦ä¸€ä¸ªç»„ä»¶å“åº”è¯¥å˜åŒ–æ—¶ï¼Œlocalstorageæ— æ³•åšåˆ°ï¼ŒåŸå› å°±æ˜¯åŒºåˆ«1ã€‚4. Redux å’Œ Vuex æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œå®ƒä»¬çš„å…±åŒæ€æƒ³ï¼ˆ1ï¼‰Redux å’Œ VuexåŒºåˆ«\nVuexæ”¹è¿›äº†Reduxä¸­çš„Actionå’ŒReducerå‡½æ•°ï¼Œä»¥mutationså˜åŒ–å‡½æ•°å–ä»£Reducerï¼Œæ— éœ€switchï¼Œåªéœ€åœ¨å¯¹åº”çš„mutationå‡½æ•°é‡Œæ”¹å˜stateå€¼å³å¯Vuexç”±äºVueè‡ªåŠ¨é‡æ–°æ¸²æŸ“çš„ç‰¹æ€§ï¼Œæ— éœ€è®¢é˜…é‡æ–°æ¸²æŸ“å‡½æ•°ï¼Œåªè¦ç”Ÿæˆæ–°çš„Stateå³å¯Vuexæ•°æ®æµçš„é¡ºåºæ˜¯âˆ¶Viewè°ƒç”¨store.commitæäº¤å¯¹åº”çš„è¯·æ±‚åˆ°Storeä¸­å¯¹åº”çš„mutationå‡½æ•°-&gt;storeæ”¹å˜ï¼ˆvueæ£€æµ‹åˆ°æ•°æ®å˜åŒ–è‡ªåŠ¨æ¸²æŸ“ï¼‰\né€šä¿—ç‚¹ç†è§£å°±æ˜¯ï¼Œvuex å¼±åŒ– dispatchï¼Œé€šè¿‡commitè¿›è¡Œ storeçŠ¶æ€çš„ä¸€æ¬¡æ›´å˜;å–æ¶ˆäº†actionæ¦‚å¿µï¼Œä¸å¿…ä¼ å…¥ç‰¹å®šçš„ actionå½¢å¼è¿›è¡ŒæŒ‡å®šå˜æ›´;å¼±åŒ–reducerï¼ŒåŸºäºcommitå‚æ•°ç›´æ¥å¯¹æ•°æ®è¿›è¡Œè½¬å˜ï¼Œä½¿å¾—æ¡†æ¶æ›´åŠ ç®€æ˜“;ï¼ˆ2ï¼‰å…±åŒæ€æƒ³\nå•â€”çš„æ•°æ®æºå˜åŒ–å¯ä»¥é¢„æµ‹\næœ¬è´¨ä¸Šï¼šreduxä¸vuexéƒ½æ˜¯å¯¹mvvmæ€æƒ³çš„æœåŠ¡ï¼Œå°†æ•°æ®ä»è§†å›¾ä¸­æŠ½ç¦»çš„ä¸€ç§æ–¹æ¡ˆ;å½¢å¼ä¸Šï¼švuexå€Ÿé‰´äº†reduxï¼Œå°†storeä½œä¸ºå…¨å±€çš„æ•°æ®ä¸­å¿ƒï¼Œè¿›è¡Œmodeç®¡ç†;5. ä¸ºä»€ä¹ˆè¦ç”¨ Vuex æˆ–è€… Reduxç”±äºä¼ å‚çš„æ–¹æ³•å¯¹äºå¤šå±‚åµŒå¥—çš„ç»„ä»¶å°†ä¼šéå¸¸ç¹çï¼Œå¹¶ä¸”å¯¹äºå…„å¼Ÿç»„ä»¶é—´çš„çŠ¶æ€ä¼ é€’æ— èƒ½ä¸ºåŠ›ã€‚æˆ‘ä»¬ç»å¸¸ä¼šé‡‡ç”¨çˆ¶å­ç»„ä»¶ç›´æ¥å¼•ç”¨æˆ–è€…é€šè¿‡äº‹ä»¶æ¥å˜æ›´å’ŒåŒæ­¥çŠ¶æ€çš„å¤šä»½æ‹·è´ã€‚ä»¥ä¸Šçš„è¿™äº›æ¨¡å¼éå¸¸è„†å¼±ï¼Œé€šå¸¸ä¼šå¯¼è‡´ä»£ç æ— æ³•ç»´æŠ¤ã€‚æ‰€ä»¥éœ€è¦æŠŠç»„ä»¶çš„å…±äº«çŠ¶æ€æŠ½å–å‡ºæ¥ï¼Œä»¥ä¸€ä¸ªå…¨å±€å•ä¾‹æ¨¡å¼ç®¡ç†ã€‚åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œç»„ä»¶æ ‘æ„æˆäº†ä¸€ä¸ªå·¨å¤§çš„â€è§†å›¾â€ï¼Œä¸ç®¡åœ¨æ ‘çš„å“ªä¸ªä½ç½®ï¼Œä»»ä½•ç»„ä»¶éƒ½èƒ½è·å–çŠ¶æ€æˆ–è€…è§¦å‘è¡Œä¸ºã€‚å¦å¤–ï¼Œé€šè¿‡å®šä¹‰å’Œéš”ç¦»çŠ¶æ€ç®¡ç†ä¸­çš„å„ç§æ¦‚å¿µå¹¶å¼ºåˆ¶éµå®ˆä¸€å®šçš„è§„åˆ™ï¼Œä»£ç å°†ä¼šå˜å¾—æ›´ç»“æ„åŒ–ä¸”æ˜“ç»´æŠ¤ã€‚6. Vuexæœ‰å“ªå‡ ç§å±æ€§ï¼Ÿæœ‰äº”ç§ï¼Œåˆ†åˆ«æ˜¯ Stateã€ Getterã€Mutation ã€Actionã€ Module\nstate &#x3D;&gt; åŸºæœ¬æ•°æ®(æ•°æ®æºå­˜æ”¾åœ°)getters &#x3D;&gt; ä»åŸºæœ¬æ•°æ®æ´¾ç”Ÿå‡ºæ¥çš„æ•°æ®mutations &#x3D;&gt; æäº¤æ›´æ”¹æ•°æ®çš„æ–¹æ³•ï¼ŒåŒæ­¥actions &#x3D;&gt; åƒä¸€ä¸ªè£…é¥°å™¨ï¼ŒåŒ…è£¹mutationsï¼Œä½¿ä¹‹å¯ä»¥å¼‚æ­¥ã€‚modules &#x3D;&gt; æ¨¡å—åŒ–Vuex\n\nVuexå’Œå•çº¯çš„å…¨å±€å¯¹è±¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\n\nVuex çš„çŠ¶æ€å­˜å‚¨æ˜¯å“åº”å¼çš„ã€‚å½“ Vue ç»„ä»¶ä» store ä¸­è¯»å–çŠ¶æ€çš„æ—¶å€™ï¼Œè‹¥ store ä¸­çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆç›¸åº”çš„ç»„ä»¶ä¹Ÿä¼šç›¸åº”åœ°å¾—åˆ°é«˜æ•ˆæ›´æ–°ã€‚ä¸èƒ½ç›´æ¥æ”¹å˜ store ä¸­çš„çŠ¶æ€ã€‚æ”¹å˜ store ä¸­çš„çŠ¶æ€çš„å”¯ä¸€é€”å¾„å°±æ˜¯æ˜¾å¼åœ°æäº¤ (commit) mutationã€‚è¿™æ ·å¯ä»¥æ–¹ä¾¿åœ°è·Ÿè¸ªæ¯ä¸€ä¸ªçŠ¶æ€çš„å˜åŒ–ï¼Œä»è€Œèƒ½å¤Ÿå®ç°ä¸€äº›å·¥å…·å¸®åŠ©æ›´å¥½åœ°äº†è§£æˆ‘ä»¬çš„åº”ç”¨ã€‚\n\nä¸ºä»€ä¹ˆ Vuex çš„ mutation ä¸­ä¸èƒ½åšå¼‚æ­¥æ“ä½œï¼Ÿ\n\nVuexä¸­æ‰€æœ‰çš„çŠ¶æ€æ›´æ–°çš„å”¯ä¸€é€”å¾„éƒ½æ˜¯mutationï¼Œå¼‚æ­¥æ“ä½œé€šè¿‡ Action æ¥æäº¤ mutationå®ç°ï¼Œè¿™æ ·å¯ä»¥æ–¹ä¾¿åœ°è·Ÿè¸ªæ¯ä¸€ä¸ªçŠ¶æ€çš„å˜åŒ–ï¼Œä»è€Œèƒ½å¤Ÿå®ç°ä¸€äº›å·¥å…·å¸®åŠ©æ›´å¥½åœ°äº†è§£æˆ‘ä»¬çš„åº”ç”¨ã€‚æ¯ä¸ªmutationæ‰§è¡Œå®Œæˆåéƒ½ä¼šå¯¹åº”åˆ°ä¸€ä¸ªæ–°çš„çŠ¶æ€å˜æ›´ï¼Œè¿™æ ·devtoolså°±å¯ä»¥æ‰“ä¸ªå¿«ç…§å­˜ä¸‹æ¥ï¼Œç„¶åå°±å¯ä»¥å®ç° time-travel äº†ã€‚å¦‚æœmutationæ”¯æŒå¼‚æ­¥æ“ä½œï¼Œå°±æ²¡æœ‰åŠæ³•çŸ¥é“çŠ¶æ€æ˜¯ä½•æ—¶æ›´æ–°çš„ï¼Œæ— æ³•å¾ˆå¥½çš„è¿›è¡ŒçŠ¶æ€çš„è¿½è¸ªï¼Œç»™è°ƒè¯•å¸¦æ¥å›°éš¾ã€‚\n\nVuexçš„ä¸¥æ ¼æ¨¡å¼æ˜¯ä»€ä¹ˆ,æœ‰ä»€ä¹ˆä½œç”¨ï¼Œå¦‚ä½•å¼€å¯ï¼Ÿåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œæ— è®ºä½•æ—¶å‘ç”Ÿäº†çŠ¶æ€å˜æ›´ä¸”ä¸æ˜¯ç”±mutationå‡½æ•°å¼•èµ·çš„ï¼Œå°†ä¼šæŠ›å‡ºé”™è¯¯ã€‚è¿™èƒ½ä¿è¯æ‰€æœ‰çš„çŠ¶æ€å˜æ›´éƒ½èƒ½è¢«è°ƒè¯•å·¥å…·è·Ÿè¸ªåˆ°ã€‚åœ¨Vuex.Store æ„é€ å™¨é€‰é¡¹ä¸­å¼€å¯,å¦‚ä¸‹const store &#x3D; new Vuex.Store({ strict:true,})å¤åˆ¶ä»£ç \nå¦‚ä½•åœ¨ç»„ä»¶ä¸­æ‰¹é‡ä½¿ç”¨Vuexçš„getterå±æ€§ä½¿ç”¨mapGettersè¾…åŠ©å‡½æ•°, åˆ©ç”¨å¯¹è±¡å±•å¼€è¿ç®—ç¬¦å°†getteræ··å…¥computed å¯¹è±¡ä¸­import {mapGetters} from â€˜vuexâ€™export default{computed:{â€¦mapGetters([â€˜totalâ€™,â€™discountTotalâ€™])}}å¤åˆ¶ä»£ç \nå¦‚ä½•åœ¨ç»„ä»¶ä¸­é‡å¤ä½¿ç”¨Vuexçš„mutationä½¿ç”¨mapMutationsè¾…åŠ©å‡½æ•°,åœ¨ç»„ä»¶ä¸­è¿™ä¹ˆä½¿ç”¨import { mapMutations } from â€˜vuexâ€™methods:{â€¦mapMutations({setNumber:â€™SET_NUMBERâ€™,})}å¤åˆ¶ä»£ç ç„¶åè°ƒç”¨this.setNumber(10)ç›¸å½“è°ƒç”¨this.$store.commit(â€˜SET_NUMBERâ€™,10)å…­ã€Vue 3.0\nVue3.0æœ‰ä»€ä¹ˆæ›´æ–°ï¼ˆ1ï¼‰ç›‘æµ‹æœºåˆ¶çš„æ”¹å˜\n\n3.0 å°†å¸¦æ¥åŸºäºä»£ç† Proxyçš„ observer å®ç°ï¼Œæä¾›å…¨è¯­è¨€è¦†ç›–çš„ååº”æ€§è·Ÿè¸ªã€‚æ¶ˆé™¤äº† Vue 2 å½“ä¸­åŸºäº Object.defineProperty çš„å®ç°æ‰€å­˜åœ¨çš„å¾ˆå¤šé™åˆ¶ï¼š\nï¼ˆ2ï¼‰åªèƒ½ç›‘æµ‹å±æ€§ï¼Œä¸èƒ½ç›‘æµ‹å¯¹è±¡\næ£€æµ‹å±æ€§çš„æ·»åŠ å’Œåˆ é™¤ï¼›æ£€æµ‹æ•°ç»„ç´¢å¼•å’Œé•¿åº¦çš„å˜æ›´ï¼›æ”¯æŒ Mapã€Setã€WeakMap å’Œ WeakSetã€‚\nï¼ˆ3ï¼‰æ¨¡æ¿\nä½œç”¨åŸŸæ’æ§½ï¼Œ2.x çš„æœºåˆ¶å¯¼è‡´ä½œç”¨åŸŸæ’æ§½å˜äº†ï¼Œçˆ¶ç»„ä»¶ä¼šé‡æ–°æ¸²æŸ“ï¼Œè€Œ 3.0 æŠŠä½œç”¨åŸŸæ’æ§½æ”¹æˆäº†å‡½æ•°çš„æ–¹å¼ï¼Œè¿™æ ·åªä¼šå½±å“å­ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ï¼Œæå‡äº†æ¸²æŸ“çš„æ€§èƒ½ã€‚åŒæ—¶ï¼Œå¯¹äº render å‡½æ•°çš„æ–¹é¢ï¼Œvue3.0 ä¹Ÿä¼šè¿›è¡Œä¸€ç³»åˆ—æ›´æ”¹æ¥æ–¹ä¾¿ä¹ æƒ¯ç›´æ¥ä½¿ç”¨ api æ¥ç”Ÿæˆ vdom ã€‚\nï¼ˆ4ï¼‰å¯¹è±¡å¼çš„ç»„ä»¶å£°æ˜æ–¹å¼\nvue2.x ä¸­çš„ç»„ä»¶æ˜¯é€šè¿‡å£°æ˜çš„æ–¹å¼ä¼ å…¥ä¸€ç³»åˆ— optionï¼Œå’Œ TypeScript çš„ç»“åˆéœ€è¦é€šè¿‡ä¸€äº›è£…é¥°å™¨çš„æ–¹å¼æ¥åšï¼Œè™½ç„¶èƒ½å®ç°åŠŸèƒ½ï¼Œä½†æ˜¯æ¯”è¾ƒéº»çƒ¦ã€‚3.0 ä¿®æ”¹äº†ç»„ä»¶çš„å£°æ˜æ–¹å¼ï¼Œæ”¹æˆäº†ç±»å¼çš„å†™æ³•ï¼Œè¿™æ ·ä½¿å¾—å’Œ TypeScript çš„ç»“åˆå˜å¾—å¾ˆå®¹æ˜“\nï¼ˆ5ï¼‰å…¶å®ƒæ–¹é¢çš„æ›´æ”¹\næ”¯æŒè‡ªå®šä¹‰æ¸²æŸ“å™¨ï¼Œä»è€Œä½¿å¾— weex å¯ä»¥é€šè¿‡è‡ªå®šä¹‰æ¸²æŸ“å™¨çš„æ–¹å¼æ¥æ‰©å±•ï¼Œè€Œä¸æ˜¯ç›´æ¥ fork æºç æ¥æ”¹çš„æ–¹å¼ã€‚æ”¯æŒ Fragmentï¼ˆå¤šä¸ªæ ¹èŠ‚ç‚¹ï¼‰å’Œ Protalï¼ˆåœ¨ dom å…¶ä»–éƒ¨åˆ†æ¸²æŸ“ç»„å»ºå†…å®¹ï¼‰ç»„ä»¶ï¼Œé’ˆå¯¹ä¸€äº›ç‰¹æ®Šçš„åœºæ™¯åšäº†å¤„ç†ã€‚åŸºäº tree shaking ä¼˜åŒ–ï¼Œæä¾›äº†æ›´å¤šçš„å†…ç½®åŠŸèƒ½ã€‚\n\ndefinePropertyå’Œproxyçš„åŒºåˆ«Vue åœ¨å®ä¾‹åˆå§‹åŒ–æ—¶éå† data ä¸­çš„æ‰€æœ‰å±æ€§ï¼Œå¹¶ä½¿ç”¨ Object.defineProperty æŠŠè¿™äº›å±æ€§å…¨éƒ¨è½¬ä¸º getter&#x2F;setterã€‚è¿™æ ·å½“è¿½è¸ªæ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œsetter ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ã€‚Object.defineProperty æ˜¯ ES5 ä¸­ä¸€ä¸ªæ— æ³• shim çš„ç‰¹æ€§ï¼Œè¿™ä¹Ÿå°±æ˜¯ Vue ä¸æ”¯æŒ IE8 ä»¥åŠæ›´ä½ç‰ˆæœ¬æµè§ˆå™¨çš„åŸå› ã€‚ä½†æ˜¯è¿™æ ·åšæœ‰ä»¥ä¸‹é—®é¢˜ï¼š\n\næ·»åŠ æˆ–åˆ é™¤å¯¹è±¡çš„å±æ€§æ—¶ï¼ŒVue æ£€æµ‹ä¸åˆ°ã€‚å› ä¸ºæ·»åŠ æˆ–åˆ é™¤çš„å¯¹è±¡æ²¡æœ‰åœ¨åˆå§‹åŒ–è¿›è¡Œå“åº”å¼å¤„ç†ï¼Œåªèƒ½é€šè¿‡$set æ¥è°ƒç”¨Object.defineProperty()å¤„ç†ã€‚æ— æ³•ç›‘æ§åˆ°æ•°ç»„ä¸‹æ ‡å’Œé•¿åº¦çš„å˜åŒ–ã€‚\nVue3 ä½¿ç”¨ Proxy æ¥ç›‘æ§æ•°æ®çš„å˜åŒ–ã€‚Proxy æ˜¯ ES6 ä¸­æä¾›çš„åŠŸèƒ½ï¼Œå…¶ä½œç”¨ä¸ºï¼šç”¨äºå®šä¹‰åŸºæœ¬æ“ä½œçš„è‡ªå®šä¹‰è¡Œä¸ºï¼ˆå¦‚å±æ€§æŸ¥æ‰¾ï¼Œèµ‹å€¼ï¼Œæšä¸¾ï¼Œå‡½æ•°è°ƒç”¨ç­‰ï¼‰ã€‚ç›¸å¯¹äºObject.defineProperty()ï¼Œå…¶æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š\nProxy ç›´æ¥ä»£ç†æ•´ä¸ªå¯¹è±¡è€Œéå¯¹è±¡å±æ€§ï¼Œè¿™æ ·åªéœ€åšä¸€å±‚ä»£ç†å°±å¯ä»¥ç›‘å¬åŒçº§ç»“æ„ä¸‹çš„æ‰€æœ‰å±æ€§å˜åŒ–ï¼ŒåŒ…æ‹¬æ–°å¢å±æ€§å’Œåˆ é™¤å±æ€§ã€‚Proxy å¯ä»¥ç›‘å¬æ•°ç»„çš„å˜åŒ–ã€‚\n\nVue3.0 ä¸ºä»€ä¹ˆè¦ç”¨ proxyï¼Ÿåœ¨ Vue2 ä¸­ï¼Œ 0bject.defineProperty ä¼šæ”¹å˜åŸå§‹æ•°æ®ï¼Œè€Œ Proxy æ˜¯åˆ›å»ºå¯¹è±¡çš„è™šæ‹Ÿè¡¨ç¤ºï¼Œå¹¶æä¾› set ã€get å’Œ deleteProperty ç­‰å¤„ç†å™¨ï¼Œè¿™äº›å¤„ç†å™¨å¯åœ¨è®¿é—®æˆ–ä¿®æ”¹åŸå§‹å¯¹è±¡ä¸Šçš„å±æ€§æ—¶è¿›è¡Œæ‹¦æˆªï¼Œæœ‰ä»¥ä¸‹ç‰¹ç‚¹âˆ¶\n\nä¸éœ€ç”¨ä½¿ç”¨ Vue.$set æˆ– Vue.$delete è§¦å‘å“åº”å¼ã€‚å…¨æ–¹ä½çš„æ•°ç»„å˜åŒ–æ£€æµ‹ï¼Œæ¶ˆé™¤äº†Vue2 æ— æ•ˆçš„è¾¹ç•Œæƒ…å†µã€‚æ”¯æŒ Mapï¼ŒSetï¼ŒWeakMap å’Œ WeakSetã€‚\nProxy å®ç°çš„å“åº”å¼åŸç†ä¸ Vue2çš„å®ç°åŸç†ç›¸åŒï¼Œå®ç°æ–¹å¼å¤§åŒå°å¼‚âˆ¶\nget æ”¶é›†ä¾èµ–Setã€delete ç­‰è§¦å‘ä¾èµ–å¯¹äºé›†åˆç±»å‹ï¼Œå°±æ˜¯å¯¹é›†åˆå¯¹è±¡çš„æ–¹æ³•åšä¸€å±‚åŒ…è£…ï¼šåŸæ–¹æ³•æ‰§è¡Œåæ‰§è¡Œä¾èµ–ç›¸å…³çš„æ”¶é›†æˆ–è§¦å‘é€»è¾‘ã€‚\n\nVue 3.0 ä¸­çš„ Vue Composition APIï¼Ÿåœ¨ Vue2 ä¸­ï¼Œä»£ç æ˜¯ Options API é£æ ¼çš„ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡å¡«å…… (option) dataã€methodsã€computed ç­‰å±æ€§æ¥å®Œæˆä¸€ä¸ª Vue ç»„ä»¶ã€‚è¿™ç§é£æ ¼ä½¿å¾— Vue ç›¸å¯¹äº Reactæä¸ºå®¹æ˜“ä¸Šæ‰‹ï¼ŒåŒæ—¶ä¹Ÿé€ æˆäº†å‡ ä¸ªé—®é¢˜ï¼š\n\nç”±äº Options API ä¸å¤Ÿçµæ´»çš„å¼€å‘æ–¹å¼ï¼Œä½¿å¾—Vueå¼€å‘ç¼ºä¹ä¼˜é›…çš„æ–¹æ³•æ¥åœ¨ç»„ä»¶é—´å…±ç”¨ä»£ç ã€‚Vue ç»„ä»¶è¿‡äºä¾èµ–thisä¸Šä¸‹æ–‡ï¼ŒVue èƒŒåçš„ä¸€äº›å°æŠ€å·§ä½¿å¾— Vue ç»„ä»¶çš„å¼€å‘çœ‹èµ·æ¥ä¸ JavaScript çš„å¼€å‘åŸåˆ™ç›¸æ‚–ï¼Œæ¯”å¦‚åœ¨methods ä¸­çš„thisç«Ÿç„¶æŒ‡å‘ç»„ä»¶å®ä¾‹æ¥ä¸æŒ‡å‘methodsæ‰€åœ¨çš„å¯¹è±¡ã€‚è¿™ä¹Ÿä½¿å¾— TypeScript åœ¨Vue2 ä¸­å¾ˆä¸å¥½ç”¨ã€‚\näºæ˜¯åœ¨ Vue3 ä¸­ï¼Œèˆå¼ƒäº† Options APIï¼Œè½¬è€ŒæŠ•å‘ Composition APIã€‚Composition APIæœ¬è´¨ä¸Šæ˜¯å°† Options API èƒŒåçš„æœºåˆ¶æš´éœ²ç»™ç”¨æˆ·ç›´æ¥ä½¿ç”¨ï¼Œè¿™æ ·ç”¨æˆ·å°±æ‹¥æœ‰äº†æ›´å¤šçš„çµæ´»æ€§ï¼Œä¹Ÿä½¿å¾— Vue3 æ›´é€‚åˆäº TypeScript ç»“åˆã€‚å¦‚ä¸‹ï¼Œæ˜¯ä¸€ä¸ªä½¿ç”¨äº† Vue Composition API çš„ Vue3 ç»„ä»¶ï¼š  &lt;button @click&#x3D;â€incrementâ€&gt;    Count:   \n\n// Composition API å°†ç»„ä»¶å±æ€§æš´éœ²ä¸ºå‡½æ•°ï¼Œå› æ­¤ç¬¬ä¸€æ­¥æ˜¯å¯¼å…¥æ‰€éœ€çš„å‡½æ•°\nimport { ref, computed, onMounted } from 'vue'\n \nexport default {\n  setup() {\n// ä½¿ç”¨ ref å‡½æ•°å£°æ˜äº†ç§°ä¸º count çš„å“åº”å±æ€§ï¼Œå¯¹åº”äºVue2ä¸­çš„dataå‡½æ•°\n    const count = ref(0)\n \n// Vue2ä¸­éœ€è¦åœ¨methods optionä¸­å£°æ˜çš„å‡½æ•°ï¼Œç°åœ¨ç›´æ¥å£°æ˜\n    function increment() {\n      count.value++\n    }\n // å¯¹åº”äºVue2ä¸­çš„mountedå£°æ˜å‘¨æœŸ\n    onMounted(() => console.log('component mounted!'))\n \n    return {\n      count,\n      increment\n    }\n  }\n}\n\nå¤åˆ¶ä»£ç æ˜¾è€Œæ˜“è§ï¼ŒVue Composition API ä½¿å¾— Vue3 çš„å¼€å‘é£æ ¼æ›´æ¥è¿‘äºåŸç”Ÿ JavaScriptï¼Œå¸¦ç»™å¼€å‘è€…æ›´å¤šåœ°çµæ´»æ€§5. Composition APIä¸React Hookå¾ˆåƒï¼ŒåŒºåˆ«æ˜¯ä»€ä¹ˆä»React Hookçš„å®ç°è§’åº¦çœ‹ï¼ŒReact Hookæ˜¯æ ¹æ®useStateè°ƒç”¨çš„é¡ºåºæ¥ç¡®å®šä¸‹ä¸€æ¬¡é‡æ¸²æŸ“æ—¶çš„stateæ˜¯æ¥æºäºå“ªä¸ªuseStateï¼Œæ‰€ä»¥å‡ºç°äº†ä»¥ä¸‹é™åˆ¶\nä¸èƒ½åœ¨å¾ªç¯ã€æ¡ä»¶ã€åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨Hookå¿…é¡»ç¡®ä¿æ€»æ˜¯åœ¨ä½ çš„Reactå‡½æ•°çš„é¡¶å±‚è°ƒç”¨HookuseEffectã€useMemoç­‰å‡½æ•°å¿…é¡»æ‰‹åŠ¨ç¡®å®šä¾èµ–å…³ç³»\nè€ŒComposition APIæ˜¯åŸºäºVueçš„å“åº”å¼ç³»ç»Ÿå®ç°çš„ï¼Œä¸React Hookçš„ç›¸æ¯”\nå£°æ˜åœ¨setupå‡½æ•°å†…ï¼Œä¸€æ¬¡ç»„ä»¶å®ä¾‹åŒ–åªè°ƒç”¨ä¸€æ¬¡setupï¼Œè€ŒReact Hookæ¯æ¬¡é‡æ¸²æŸ“éƒ½éœ€è¦è°ƒç”¨Hookï¼Œä½¿å¾—Reactçš„GCæ¯”Vueæ›´æœ‰å‹åŠ›ï¼Œæ€§èƒ½ä¹Ÿç›¸å¯¹äºVueæ¥è¯´ä¹Ÿè¾ƒæ…¢Compositon APIçš„è°ƒç”¨ä¸éœ€è¦é¡¾è™‘è°ƒç”¨é¡ºåºï¼Œä¹Ÿå¯ä»¥åœ¨å¾ªç¯ã€æ¡ä»¶ã€åµŒå¥—å‡½æ•°ä¸­ä½¿ç”¨å“åº”å¼ç³»ç»Ÿè‡ªåŠ¨å®ç°äº†ä¾èµ–æ”¶é›†ï¼Œè¿›è€Œç»„ä»¶çš„éƒ¨åˆ†çš„æ€§èƒ½ä¼˜åŒ–ç”±Vueå†…éƒ¨è‡ªå·±å®Œæˆï¼Œè€ŒReact Hookéœ€è¦æ‰‹åŠ¨ä¼ å…¥ä¾èµ–ï¼Œè€Œä¸”å¿…é¡»å¿…é¡»ä¿è¯ä¾èµ–çš„é¡ºåºï¼Œè®©useEffectã€useMemoç­‰å‡½æ•°æ­£ç¡®çš„æ•è·ä¾èµ–å˜é‡ï¼Œå¦åˆ™ä¼šç”±äºä¾èµ–ä¸æ­£ç¡®ä½¿å¾—ç»„ä»¶æ€§èƒ½ä¸‹é™ã€‚\nè™½ç„¶Compositon APIçœ‹èµ·æ¥æ¯”React Hookå¥½ç”¨ï¼Œä½†æ˜¯å…¶è®¾è®¡æ€æƒ³ä¹Ÿæ˜¯å€Ÿé‰´React Hookçš„ã€‚ä¸ƒã€è™šæ‹ŸDOM\n\nå¯¹è™šæ‹ŸDOMçš„ç†è§£ï¼Ÿä»æœ¬è´¨ä¸Šæ¥è¯´ï¼ŒVirtual Domæ˜¯ä¸€ä¸ªJavaScriptå¯¹è±¡ï¼Œé€šè¿‡å¯¹è±¡çš„æ–¹å¼æ¥è¡¨ç¤ºDOMç»“æ„ã€‚å°†é¡µé¢çš„çŠ¶æ€æŠ½è±¡ä¸ºJSå¯¹è±¡çš„å½¢å¼ï¼Œé…åˆä¸åŒçš„æ¸²æŸ“å·¥å…·ï¼Œä½¿è·¨å¹³å°æ¸²æŸ“æˆä¸ºå¯èƒ½ã€‚é€šè¿‡äº‹åŠ¡å¤„ç†æœºåˆ¶ï¼Œå°†å¤šæ¬¡DOMä¿®æ”¹çš„ç»“æœä¸€æ¬¡æ€§çš„æ›´æ–°åˆ°é¡µé¢ä¸Šï¼Œä»è€Œæœ‰æ•ˆçš„å‡å°‘é¡µé¢æ¸²æŸ“çš„æ¬¡æ•°ï¼Œå‡å°‘ä¿®æ”¹DOMçš„é‡ç»˜é‡æ’æ¬¡æ•°ï¼Œæé«˜æ¸²æŸ“æ€§èƒ½ã€‚è™šæ‹ŸDOMæ˜¯å¯¹DOMçš„æŠ½è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æ˜¯æ›´åŠ è½»é‡çº§çš„å¯¹ DOMçš„æè¿°ã€‚å®ƒè®¾è®¡çš„æœ€åˆç›®çš„ï¼Œå°±æ˜¯æ›´å¥½çš„è·¨å¹³å°ï¼Œæ¯”å¦‚Node.jså°±æ²¡æœ‰DOMï¼Œå¦‚æœæƒ³å®ç°SSRï¼Œé‚£ä¹ˆä¸€ä¸ªæ–¹å¼å°±æ˜¯å€ŸåŠ©è™šæ‹ŸDOMï¼Œå› ä¸ºè™šæ‹ŸDOMæœ¬èº«æ˜¯jså¯¹è±¡ã€‚ åœ¨ä»£ç æ¸²æŸ“åˆ°é¡µé¢ä¹‹å‰ï¼Œvueä¼šæŠŠä»£ç è½¬æ¢æˆä¸€ä¸ªå¯¹è±¡ï¼ˆè™šæ‹Ÿ DOMï¼‰ã€‚ä»¥å¯¹è±¡çš„å½¢å¼æ¥æè¿°çœŸå®DOMç»“æ„ï¼Œæœ€ç»ˆæ¸²æŸ“åˆ°é¡µé¢ã€‚åœ¨æ¯æ¬¡æ•°æ®å‘ç”Ÿå˜åŒ–å‰ï¼Œè™šæ‹ŸDOMéƒ½ä¼šç¼“å­˜ä¸€ä»½ï¼Œå˜åŒ–ä¹‹æ—¶ï¼Œç°åœ¨çš„è™šæ‹ŸDOMä¼šä¸ç¼“å­˜çš„è™šæ‹ŸDOMè¿›è¡Œæ¯”è¾ƒã€‚åœ¨vueå†…éƒ¨å°è£…äº†diffç®—æ³•ï¼Œé€šè¿‡è¿™ä¸ªç®—æ³•æ¥è¿›è¡Œæ¯”è¾ƒï¼Œæ¸²æŸ“æ—¶ä¿®æ”¹æ”¹å˜çš„å˜åŒ–ï¼ŒåŸå…ˆæ²¡æœ‰å‘ç”Ÿæ”¹å˜çš„é€šè¿‡åŸå…ˆçš„æ•°æ®è¿›è¡Œæ¸²æŸ“ã€‚å¦å¤–ç°ä»£å‰ç«¯æ¡†æ¶çš„ä¸€ä¸ªåŸºæœ¬è¦æ±‚å°±æ˜¯æ— é¡»æ‰‹åŠ¨æ“ä½œDOMï¼Œä¸€æ–¹é¢æ˜¯å› ä¸ºæ‰‹åŠ¨æ“ä½œDOMæ— æ³•ä¿è¯ç¨‹åºæ€§èƒ½ï¼Œå¤šäººåä½œçš„é¡¹ç›®ä¸­å¦‚æœreviewä¸ä¸¥æ ¼ï¼Œå¯èƒ½ä¼šæœ‰å¼€å‘è€…å†™å‡ºæ€§èƒ½è¾ƒä½çš„ä»£ç ï¼Œå¦ä¸€æ–¹é¢æ›´é‡è¦çš„æ˜¯çœç•¥æ‰‹åŠ¨DOMæ“ä½œå¯ä»¥å¤§å¤§æé«˜å¼€å‘æ•ˆç‡ã€‚\nè™šæ‹ŸDOMçš„è§£æè¿‡ç¨‹è™šæ‹ŸDOMçš„è§£æè¿‡ç¨‹ï¼š\n\né¦–å…ˆå¯¹å°†è¦æ’å…¥åˆ°æ–‡æ¡£ä¸­çš„ DOM æ ‘ç»“æ„è¿›è¡Œåˆ†æï¼Œä½¿ç”¨ js å¯¹è±¡å°†å…¶è¡¨ç¤ºå‡ºæ¥ï¼Œæ¯”å¦‚ä¸€ä¸ªå…ƒç´ å¯¹è±¡ï¼ŒåŒ…å« TagNameã€props å’Œ Children è¿™äº›å±æ€§ã€‚ç„¶åå°†è¿™ä¸ª js å¯¹è±¡æ ‘ç»™ä¿å­˜ä¸‹æ¥ï¼Œæœ€åå†å°† DOM ç‰‡æ®µæ’å…¥åˆ°æ–‡æ¡£ä¸­ã€‚å½“é¡µé¢çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼Œéœ€è¦å¯¹é¡µé¢çš„ DOM çš„ç»“æ„è¿›è¡Œè°ƒæ•´çš„æ—¶å€™ï¼Œé¦–å…ˆæ ¹æ®å˜æ›´çš„çŠ¶æ€ï¼Œé‡æ–°æ„å»ºèµ·ä¸€æ£µå¯¹è±¡æ ‘ï¼Œç„¶åå°†è¿™æ£µæ–°çš„å¯¹è±¡æ ‘å’Œæ—§çš„å¯¹è±¡æ ‘è¿›è¡Œæ¯”è¾ƒï¼Œè®°å½•ä¸‹ä¸¤æ£µæ ‘çš„çš„å·®å¼‚ã€‚æœ€åå°†è®°å½•çš„æœ‰å·®å¼‚çš„åœ°æ–¹åº”ç”¨åˆ°çœŸæ­£çš„ DOM æ ‘ä¸­å»ï¼Œè¿™æ ·è§†å›¾å°±æ›´æ–°äº†ã€‚\n\nä¸ºä»€ä¹ˆè¦ç”¨è™šæ‹ŸDOMï¼ˆ1ï¼‰ä¿è¯æ€§èƒ½ä¸‹é™ï¼Œåœ¨ä¸è¿›è¡Œæ‰‹åŠ¨ä¼˜åŒ–çš„æƒ…å†µä¸‹ï¼Œæä¾›è¿‡å¾—å»çš„æ€§èƒ½çœ‹ä¸€ä¸‹é¡µé¢æ¸²æŸ“çš„æµç¨‹ï¼šè§£æHTML -&gt; ç”ŸæˆDOM -&gt; ç”Ÿæˆ CSSOM -&gt; Layout -&gt; Paint -&gt; Compilerä¸‹é¢å¯¹æ¯”ä¸€ä¸‹ä¿®æ”¹DOMæ—¶çœŸå®DOMæ“ä½œå’ŒVirtual DOMçš„è¿‡ç¨‹ï¼Œæ¥çœ‹ä¸€ä¸‹å®ƒä»¬é‡æ’é‡ç»˜çš„æ€§èƒ½æ¶ˆè€—âˆ¶\n\nçœŸå®DOMâˆ¶ ç”ŸæˆHTMLå­—ç¬¦ä¸²ï¼‹é‡å»ºæ‰€æœ‰çš„DOMå…ƒç´ è™šæ‹ŸDOMâˆ¶ ç”ŸæˆvNode+ DOMDiffï¼‹å¿…è¦çš„domæ›´æ–°\nVirtual DOMçš„æ›´æ–°DOMçš„å‡†å¤‡å·¥ä½œè€—è´¹æ›´å¤šçš„æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯JSå±‚é¢ï¼Œç›¸æ¯”äºæ›´å¤šçš„DOMæ“ä½œå®ƒçš„æ¶ˆè´¹æ˜¯æå…¶ä¾¿å®œçš„ã€‚å°¤é›¨æºªåœ¨ç¤¾åŒºè®ºå›ä¸­è¯´é“âˆ¶ æ¡†æ¶ç»™ä½ çš„ä¿è¯æ˜¯ï¼Œä½ ä¸éœ€è¦æ‰‹åŠ¨ä¼˜åŒ–çš„æƒ…å†µä¸‹ï¼Œä¾ç„¶å¯ä»¥ç»™ä½ æä¾›è¿‡å¾—å»çš„æ€§èƒ½ã€‚ï¼ˆ2ï¼‰è·¨å¹³å°Virtual DOMæœ¬è´¨ä¸Šæ˜¯JavaScriptçš„å¯¹è±¡ï¼Œå®ƒå¯ä»¥å¾ˆæ–¹ä¾¿çš„è·¨å¹³å°æ“ä½œï¼Œæ¯”å¦‚æœåŠ¡ç«¯æ¸²æŸ“ã€uniappç­‰ã€‚4. è™šæ‹ŸDOMçœŸçš„æ¯”çœŸå®DOMæ€§èƒ½å¥½å—\né¦–æ¬¡æ¸²æŸ“å¤§é‡DOMæ—¶ï¼Œç”±äºå¤šäº†ä¸€å±‚è™šæ‹ŸDOMçš„è®¡ç®—ï¼Œä¼šæ¯”innerHTMLæ’å…¥æ…¢ã€‚æ­£å¦‚å®ƒèƒ½ä¿è¯æ€§èƒ½ä¸‹é™ï¼Œåœ¨çœŸå®DOMæ“ä½œçš„æ—¶å€™è¿›è¡Œé’ˆå¯¹æ€§çš„ä¼˜åŒ–æ—¶ï¼Œè¿˜æ˜¯æ›´å¿«çš„ã€‚\n\nDIFFç®—æ³•çš„åŸç†åœ¨æ–°è€è™šæ‹ŸDOMå¯¹æ¯”æ—¶ï¼š\n\né¦–å…ˆï¼Œå¯¹æ¯”èŠ‚ç‚¹æœ¬èº«ï¼Œåˆ¤æ–­æ˜¯å¦ä¸ºåŒä¸€èŠ‚ç‚¹ï¼Œå¦‚æœä¸ä¸ºç›¸åŒèŠ‚ç‚¹ï¼Œåˆ™åˆ é™¤è¯¥èŠ‚ç‚¹é‡æ–°åˆ›å»ºèŠ‚ç‚¹è¿›è¡Œæ›¿æ¢å¦‚æœä¸ºç›¸åŒèŠ‚ç‚¹ï¼Œè¿›è¡ŒpatchVnodeï¼Œåˆ¤æ–­å¦‚ä½•å¯¹è¯¥èŠ‚ç‚¹çš„å­èŠ‚ç‚¹è¿›è¡Œå¤„ç†ï¼Œå…ˆåˆ¤æ–­ä¸€æ–¹æœ‰å­èŠ‚ç‚¹ä¸€æ–¹æ²¡æœ‰å­èŠ‚ç‚¹çš„æƒ…å†µ(å¦‚æœæ–°çš„childrenæ²¡æœ‰å­èŠ‚ç‚¹ï¼Œå°†æ—§çš„å­èŠ‚ç‚¹ç§»é™¤)æ¯”è¾ƒå¦‚æœéƒ½æœ‰å­èŠ‚ç‚¹ï¼Œåˆ™è¿›è¡ŒupdateChildrenï¼Œåˆ¤æ–­å¦‚ä½•å¯¹è¿™äº›æ–°è€èŠ‚ç‚¹çš„å­èŠ‚ç‚¹è¿›è¡Œæ“ä½œï¼ˆdiffæ ¸å¿ƒï¼‰ã€‚åŒ¹é…æ—¶ï¼Œæ‰¾åˆ°ç›¸åŒçš„å­èŠ‚ç‚¹ï¼Œé€’å½’æ¯”è¾ƒå­èŠ‚ç‚¹\nåœ¨diffä¸­ï¼Œåªå¯¹åŒå±‚çš„å­èŠ‚ç‚¹è¿›è¡Œæ¯”è¾ƒï¼Œæ”¾å¼ƒè·¨çº§çš„èŠ‚ç‚¹æ¯”è¾ƒï¼Œä½¿å¾—æ—¶é—´å¤æ‚ä»O(n3)é™ä½å€¼O(n)ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰å½“æ–°æ—§childrenéƒ½ä¸ºå¤šä¸ªå­èŠ‚ç‚¹æ—¶æ‰éœ€è¦ç”¨æ ¸å¿ƒçš„Diffç®—æ³•è¿›è¡ŒåŒå±‚çº§æ¯”è¾ƒã€‚6. Vueä¸­keyçš„ä½œç”¨vue ä¸­ key å€¼çš„ä½œç”¨å¯ä»¥åˆ†ä¸ºä¸¤ç§æƒ…å†µæ¥è€ƒè™‘ï¼š\nç¬¬ä¸€ç§æƒ…å†µæ˜¯ v-if ä¸­ä½¿ç”¨ keyã€‚ç”±äº Vue ä¼šå°½å¯èƒ½é«˜æ•ˆåœ°æ¸²æŸ“å…ƒç´ ï¼Œé€šå¸¸ä¼šå¤ç”¨å·²æœ‰å…ƒç´ è€Œä¸æ˜¯ä»å¤´å¼€å§‹æ¸²æŸ“ã€‚å› æ­¤å½“ä½¿ç”¨ v-if æ¥å®ç°å…ƒç´ åˆ‡æ¢çš„æ—¶å€™ï¼Œå¦‚æœåˆ‡æ¢å‰åå«æœ‰ç›¸åŒç±»å‹çš„å…ƒç´ ï¼Œé‚£ä¹ˆè¿™ä¸ªå…ƒç´ å°±ä¼šè¢«å¤ç”¨ã€‚å¦‚æœæ˜¯ç›¸åŒçš„ input å…ƒç´ ï¼Œé‚£ä¹ˆåˆ‡æ¢å‰åç”¨æˆ·çš„è¾“å…¥ä¸ä¼šè¢«æ¸…é™¤æ‰ï¼Œè¿™æ ·æ˜¯ä¸ç¬¦åˆéœ€æ±‚çš„ã€‚å› æ­¤å¯ä»¥é€šè¿‡ä½¿ç”¨ key æ¥å”¯ä¸€çš„æ ‡è¯†ä¸€ä¸ªå…ƒç´ ï¼Œè¿™ä¸ªæƒ…å†µä¸‹ï¼Œä½¿ç”¨ key çš„å…ƒç´ ä¸ä¼šè¢«å¤ç”¨ã€‚è¿™ä¸ªæ—¶å€™ key çš„ä½œç”¨æ˜¯ç”¨æ¥æ ‡è¯†ä¸€ä¸ªç‹¬ç«‹çš„å…ƒç´ ã€‚ç¬¬äºŒç§æƒ…å†µæ˜¯ v-for ä¸­ä½¿ç”¨ keyã€‚ç”¨ v-for æ›´æ–°å·²æ¸²æŸ“è¿‡çš„å…ƒç´ åˆ—è¡¨æ—¶ï¼Œå®ƒé»˜è®¤ä½¿ç”¨â€œå°±åœ°å¤ç”¨â€çš„ç­–ç•¥ã€‚å¦‚æœæ•°æ®é¡¹çš„é¡ºåºå‘ç”Ÿäº†æ”¹å˜ï¼ŒVue ä¸ä¼šç§»åŠ¨ DOM å…ƒç´ æ¥åŒ¹é…æ•°æ®é¡¹çš„é¡ºåºï¼Œè€Œæ˜¯ç®€å•å¤ç”¨æ­¤å¤„çš„æ¯ä¸ªå…ƒç´ ã€‚å› æ­¤é€šè¿‡ä¸ºæ¯ä¸ªåˆ—è¡¨é¡¹æä¾›ä¸€ä¸ª key å€¼ï¼Œæ¥ä»¥ä¾¿ Vue è·Ÿè¸ªå…ƒç´ çš„èº«ä»½ï¼Œä»è€Œé«˜æ•ˆçš„å®ç°å¤ç”¨ã€‚è¿™ä¸ªæ—¶å€™ key çš„ä½œç”¨æ˜¯ä¸ºäº†é«˜æ•ˆçš„æ›´æ–°æ¸²æŸ“è™šæ‹Ÿ DOMã€‚\nkey æ˜¯ä¸º Vue ä¸­ vnode çš„å”¯ä¸€æ ‡è®°ï¼Œé€šè¿‡è¿™ä¸ª keyï¼Œdiff æ“ä½œå¯ä»¥æ›´å‡†ç¡®ã€æ›´å¿«é€Ÿ\næ›´å‡†ç¡®ï¼šå› ä¸ºå¸¦ key å°±ä¸æ˜¯å°±åœ°å¤ç”¨äº†ï¼Œåœ¨ sameNode å‡½æ•°a.key &#x3D;&#x3D;&#x3D; b.keyå¯¹æ¯”ä¸­å¯ä»¥é¿å…å°±åœ°å¤ç”¨çš„æƒ…å†µã€‚æ‰€ä»¥ä¼šæ›´åŠ å‡†ç¡®ã€‚æ›´å¿«é€Ÿï¼šåˆ©ç”¨ key çš„å”¯ä¸€æ€§ç”Ÿæˆ map å¯¹è±¡æ¥è·å–å¯¹åº”èŠ‚ç‚¹ï¼Œæ¯”éå†æ–¹å¼æ›´å¿«\n\nä¸ºä»€ä¹ˆä¸å»ºè®®ç”¨indexä½œä¸ºkey?ä½¿ç”¨index ä½œä¸º keyå’Œæ²¡å†™åŸºæœ¬ä¸Šæ²¡åŒºåˆ«ï¼Œå› ä¸ºä¸ç®¡æ•°ç»„çš„é¡ºåºæ€ä¹ˆé¢ å€’ï¼Œindex éƒ½æ˜¯ 0, 1, 2â€¦è¿™æ ·æ’åˆ—ï¼Œå¯¼è‡´ Vue ä¼šå¤ç”¨é”™è¯¯çš„æ—§å­èŠ‚ç‚¹ï¼Œåšå¾ˆå¤šé¢å¤–çš„å·¥ä½œã€‚\n\n","slug":"é¢è¯•é¢˜ç¬”è®°â€”â€”VUEç¯‡(ä¸‹)","date":"2021-06-24T12:41:13.000Z","categories_index":"","tags_index":"","author_index":"Beastrong"},{"id":"be5afecc963f0a7007cee0b82bb652a1","title":"é¢è¯•é¢˜ç¬”è®°â€”â€”VUEç¯‡(ä¸Š)","content":"ä¸€ã€Vue åŸºç¡€1. Vueçš„åŸºæœ¬åŸç†å½“ä¸€ä¸ªVueå®ä¾‹åˆ›å»ºæ—¶ï¼ŒVueä¼šéå†dataä¸­çš„å±æ€§ï¼Œç”¨ Object.definePropertyï¼ˆvue3.0ä½¿ç”¨proxy ï¼‰å°†å®ƒä»¬è½¬ä¸º getter&#x2F;setterï¼Œå¹¶ä¸”åœ¨å†…éƒ¨è¿½è¸ªç›¸å…³ä¾èµ–ï¼Œåœ¨å±æ€§è¢«è®¿é—®å’Œä¿®æ”¹æ—¶é€šçŸ¥å˜åŒ–ã€‚ æ¯ä¸ªç»„ä»¶å®ä¾‹éƒ½æœ‰ç›¸åº”çš„ watcher ç¨‹åºå®ä¾‹ï¼Œå®ƒä¼šåœ¨ç»„ä»¶æ¸²æŸ“çš„è¿‡ç¨‹ä¸­æŠŠå±æ€§è®°å½•ä¸ºä¾èµ–ï¼Œä¹‹åå½“ä¾èµ–é¡¹çš„setterè¢«è°ƒç”¨æ—¶ï¼Œä¼šé€šçŸ¥watcheré‡æ–°è®¡ç®—ï¼Œä»è€Œè‡´ä½¿å®ƒå…³è”çš„ç»„ä»¶å¾—ä»¥æ›´æ–°ã€‚ \n2. åŒå‘æ•°æ®ç»‘å®šçš„åŸç†Vue.js æ˜¯é‡‡ç”¨æ•°æ®åŠ«æŒç»“åˆå‘å¸ƒè€…-è®¢é˜…è€…æ¨¡å¼çš„æ–¹å¼ï¼Œé€šè¿‡Object.defineProperty()æ¥åŠ«æŒå„ä¸ªå±æ€§çš„setterï¼Œgetterï¼Œåœ¨æ•°æ®å˜åŠ¨æ—¶å‘å¸ƒæ¶ˆæ¯ç»™è®¢é˜…è€…ï¼Œè§¦å‘ç›¸åº”çš„ç›‘å¬å›è°ƒã€‚ä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š\n\néœ€è¦observeçš„æ•°æ®å¯¹è±¡è¿›è¡Œé€’å½’éå†ï¼ŒåŒ…æ‹¬å­å±æ€§å¯¹è±¡çš„å±æ€§ï¼Œéƒ½åŠ ä¸Šsetterå’Œgetterè¿™æ ·çš„è¯ï¼Œç»™è¿™ä¸ªå¯¹è±¡çš„æŸä¸ªå€¼èµ‹å€¼ï¼Œå°±ä¼šè§¦å‘setterï¼Œé‚£ä¹ˆå°±èƒ½ç›‘å¬åˆ°äº†æ•°æ®å˜åŒ–\ncompileè§£ææ¨¡æ¿æŒ‡ä»¤ï¼Œå°†æ¨¡æ¿ä¸­çš„å˜é‡æ›¿æ¢æˆæ•°æ®ï¼Œç„¶ååˆå§‹åŒ–æ¸²æŸ“é¡µé¢è§†å›¾ï¼Œå¹¶å°†æ¯ä¸ªæŒ‡ä»¤å¯¹åº”çš„èŠ‚ç‚¹ç»‘å®šæ›´æ–°å‡½æ•°ï¼Œæ·»åŠ ç›‘å¬æ•°æ®çš„è®¢é˜…è€…ï¼Œä¸€æ—¦æ•°æ®æœ‰å˜åŠ¨ï¼Œæ”¶åˆ°é€šçŸ¥ï¼Œæ›´æ–°è§†å›¾\nWatcherè®¢é˜…è€…æ˜¯Observerå’ŒCompileä¹‹é—´é€šä¿¡çš„æ¡¥æ¢ï¼Œä¸»è¦åšçš„äº‹æƒ…æ˜¯: â‘ åœ¨è‡ªèº«å®ä¾‹åŒ–æ—¶å¾€å±æ€§è®¢é˜…å™¨(dep)é‡Œé¢æ·»åŠ è‡ªå·± â‘¡è‡ªèº«å¿…é¡»æœ‰ä¸€ä¸ªupdate()æ–¹æ³• â‘¢å¾…å±æ€§å˜åŠ¨dep.notice()é€šçŸ¥æ—¶ï¼Œèƒ½è°ƒç”¨è‡ªèº«çš„update()æ–¹æ³•ï¼Œå¹¶è§¦å‘Compileä¸­ç»‘å®šçš„å›è°ƒï¼Œåˆ™åŠŸæˆèº«é€€ã€‚\nMVVMä½œä¸ºæ•°æ®ç»‘å®šçš„å…¥å£ï¼Œæ•´åˆObserverã€Compileå’ŒWatcherä¸‰è€…ï¼Œé€šè¿‡Observeræ¥ç›‘å¬è‡ªå·±çš„modelæ•°æ®å˜åŒ–ï¼Œé€šè¿‡Compileæ¥è§£æç¼–è¯‘æ¨¡æ¿æŒ‡ä»¤ï¼Œæœ€ç»ˆåˆ©ç”¨Watcheræ­èµ·Observerå’ŒCompileä¹‹é—´çš„é€šä¿¡æ¡¥æ¢ï¼Œè¾¾åˆ°æ•°æ®å˜åŒ– -&gt; è§†å›¾æ›´æ–°ï¼›è§†å›¾äº¤äº’å˜åŒ–(input) -&gt; æ•°æ®modelå˜æ›´çš„åŒå‘ç»‘å®šæ•ˆæœã€‚\n\n\n3. ä½¿ç”¨ Object.defineProperty() æ¥è¿›è¡Œæ•°æ®åŠ«æŒæœ‰ä»€ä¹ˆç¼ºç‚¹ï¼Ÿåœ¨å¯¹ä¸€äº›å±æ€§è¿›è¡Œæ“ä½œæ—¶ï¼Œä½¿ç”¨è¿™ç§æ–¹æ³•æ— æ³•æ‹¦æˆªï¼Œæ¯”å¦‚é€šè¿‡ä¸‹æ ‡æ–¹å¼ä¿®æ”¹æ•°ç»„æ•°æ®æˆ–è€…ç»™å¯¹è±¡æ–°å¢å±æ€§ï¼Œè¿™éƒ½ä¸èƒ½è§¦å‘ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ï¼Œå› ä¸ºÂ Object.definePropertyÂ ä¸èƒ½æ‹¦æˆªåˆ°è¿™äº›æ“ä½œã€‚æ›´ç²¾ç¡®çš„æ¥è¯´ï¼Œå¯¹äºæ•°ç»„è€Œè¨€ï¼Œå¤§éƒ¨åˆ†æ“ä½œéƒ½æ˜¯æ‹¦æˆªä¸åˆ°çš„ï¼Œåªæ˜¯ Vue å†…éƒ¨é€šè¿‡é‡å†™å‡½æ•°çš„æ–¹å¼è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚\nåœ¨ Vue3.0 ä¸­å·²ç»ä¸ä½¿ç”¨è¿™ç§æ–¹å¼äº†ï¼Œè€Œæ˜¯é€šè¿‡ä½¿ç”¨ Proxy å¯¹å¯¹è±¡è¿›è¡Œä»£ç†ï¼Œä»è€Œå®ç°æ•°æ®åŠ«æŒã€‚ä½¿ç”¨Proxy çš„å¥½å¤„æ˜¯å®ƒå¯ä»¥å®Œç¾çš„ç›‘å¬åˆ°ä»»ä½•æ–¹å¼çš„æ•°æ®æ”¹å˜ï¼Œå”¯ä¸€çš„ç¼ºç‚¹æ˜¯å…¼å®¹æ€§çš„é—®é¢˜ï¼Œå› ä¸º Proxy æ˜¯ ES6 çš„è¯­æ³•ã€‚\n4. MVVMã€MVCã€MVPçš„åŒºåˆ«MVCã€MVP å’Œ MVVM æ˜¯ä¸‰ç§å¸¸è§çš„è½¯ä»¶æ¶æ„è®¾è®¡æ¨¡å¼ï¼Œä¸»è¦é€šè¿‡åˆ†ç¦»å…³æ³¨ç‚¹çš„æ–¹å¼æ¥ç»„ç»‡ä»£ç ç»“æ„ï¼Œä¼˜åŒ–å¼€å‘æ•ˆç‡ã€‚\nåœ¨å¼€å‘å•é¡µé¢åº”ç”¨æ—¶ï¼Œå¾€å¾€ä¸€ä¸ªè·¯ç”±é¡µé¢å¯¹åº”äº†ä¸€ä¸ªè„šæœ¬æ–‡ä»¶ï¼Œæ‰€æœ‰çš„é¡µé¢é€»è¾‘éƒ½åœ¨ä¸€ä¸ªè„šæœ¬æ–‡ä»¶é‡Œã€‚é¡µé¢çš„æ¸²æŸ“ã€æ•°æ®çš„è·å–ï¼Œå¯¹ç”¨æˆ·äº‹ä»¶çš„å“åº”æ‰€æœ‰çš„åº”ç”¨é€»è¾‘éƒ½æ··åˆåœ¨ä¸€èµ·ï¼Œè¿™æ ·åœ¨å¼€å‘ç®€å•é¡¹ç›®æ—¶ï¼Œå¯èƒ½çœ‹ä¸å‡ºä»€ä¹ˆé—®é¢˜ï¼Œå¦‚æœé¡¹ç›®å˜å¾—å¤æ‚ï¼Œé‚£ä¹ˆæ•´ä¸ªæ–‡ä»¶å°±ä¼šå˜å¾—å†—é•¿ã€æ··ä¹±ï¼Œè¿™æ ·å¯¹é¡¹ç›®å¼€å‘å’ŒåæœŸçš„é¡¹ç›®ç»´æŠ¤æ˜¯éå¸¸ä¸åˆ©çš„ã€‚\nï¼ˆ1ï¼‰MVC\nMVC é€šè¿‡åˆ†ç¦» Modelã€View å’Œ Controller çš„æ–¹å¼æ¥ç»„ç»‡ä»£ç ç»“æ„ã€‚å…¶ä¸­ View è´Ÿè´£é¡µé¢çš„æ˜¾ç¤ºé€»è¾‘ï¼ŒModel è´Ÿè´£å­˜å‚¨é¡µé¢çš„ä¸šåŠ¡æ•°æ®ï¼Œä»¥åŠå¯¹ç›¸åº”æ•°æ®çš„æ“ä½œã€‚å¹¶ä¸” View å’Œ Model åº”ç”¨äº†è§‚å¯Ÿè€…æ¨¡å¼ï¼Œå½“ Model å±‚å‘ç”Ÿæ”¹å˜çš„æ—¶å€™å®ƒä¼šé€šçŸ¥æœ‰å…³ View å±‚æ›´æ–°é¡µé¢ã€‚Controller å±‚æ˜¯ View å±‚å’Œ Model å±‚çš„çº½å¸¦ï¼Œå®ƒä¸»è¦è´Ÿè´£ç”¨æˆ·ä¸åº”ç”¨çš„å“åº”æ“ä½œï¼Œå½“ç”¨æˆ·ä¸é¡µé¢äº§ç”Ÿäº¤äº’çš„æ—¶å€™ï¼ŒController ä¸­çš„äº‹ä»¶è§¦å‘å™¨å°±å¼€å§‹å·¥ä½œäº†ï¼Œé€šè¿‡è°ƒç”¨ Model å±‚ï¼Œæ¥å®Œæˆå¯¹ Model çš„ä¿®æ”¹ï¼Œç„¶å Model å±‚å†å»é€šçŸ¥ View å±‚æ›´æ–°ã€‚ \nï¼ˆ2ï¼‰MVVM\nMVVM åˆ†ä¸º Modelã€Viewã€ViewModelï¼š\n\nModelä»£è¡¨æ•°æ®æ¨¡å‹ï¼Œæ•°æ®å’Œä¸šåŠ¡é€»è¾‘éƒ½åœ¨Modelå±‚ä¸­å®šä¹‰ï¼›\nViewä»£è¡¨UIè§†å›¾ï¼Œè´Ÿè´£æ•°æ®çš„å±•ç¤ºï¼›\nViewModelè´Ÿè´£ç›‘å¬Modelä¸­æ•°æ®çš„æ”¹å˜å¹¶ä¸”æ§åˆ¶è§†å›¾çš„æ›´æ–°ï¼Œå¤„ç†ç”¨æˆ·äº¤äº’æ“ä½œï¼›\n\nModelå’ŒViewå¹¶æ— ç›´æ¥å…³è”ï¼Œè€Œæ˜¯é€šè¿‡ViewModelæ¥è¿›è¡Œè”ç³»çš„ï¼ŒModelå’ŒViewModelä¹‹é—´æœ‰ç€åŒå‘æ•°æ®ç»‘å®šçš„è”ç³»ã€‚å› æ­¤å½“Modelä¸­çš„æ•°æ®æ”¹å˜æ—¶ä¼šè§¦å‘Viewå±‚çš„åˆ·æ–°ï¼ŒViewä¸­ç”±äºç”¨æˆ·äº¤äº’æ“ä½œè€Œæ”¹å˜çš„æ•°æ®ä¹Ÿä¼šåœ¨Modelä¸­åŒæ­¥ã€‚\nè¿™ç§æ¨¡å¼å®ç°äº† Modelå’ŒViewçš„æ•°æ®è‡ªåŠ¨åŒæ­¥ï¼Œå› æ­¤å¼€å‘è€…åªéœ€è¦ä¸“æ³¨äºæ•°æ®çš„ç»´æŠ¤æ“ä½œå³å¯ï¼Œè€Œä¸éœ€è¦è‡ªå·±æ“ä½œDOMã€‚ \nï¼ˆ3ï¼‰MVP\nMVP æ¨¡å¼ä¸ MVC å”¯ä¸€ä¸åŒçš„åœ¨äº Presenter å’Œ Controllerã€‚åœ¨ MVC æ¨¡å¼ä¸­ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼ï¼Œæ¥å®ç°å½“ Model å±‚æ•°æ®å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œé€šçŸ¥ View å±‚çš„æ›´æ–°ã€‚è¿™æ · View å±‚å’Œ Model å±‚è€¦åˆåœ¨ä¸€èµ·ï¼Œå½“é¡¹ç›®é€»è¾‘å˜å¾—å¤æ‚çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šé€ æˆä»£ç çš„æ··ä¹±ï¼Œå¹¶ä¸”å¯èƒ½ä¼šå¯¹ä»£ç çš„å¤ç”¨æ€§é€ æˆä¸€äº›é—®é¢˜ã€‚MVP çš„æ¨¡å¼é€šè¿‡ä½¿ç”¨ Presenter æ¥å®ç°å¯¹ View å±‚å’Œ Model å±‚çš„è§£è€¦ã€‚MVC ä¸­çš„Controller åªçŸ¥é“ Model çš„æ¥å£ï¼Œå› æ­¤å®ƒæ²¡æœ‰åŠæ³•æ§åˆ¶ View å±‚çš„æ›´æ–°ï¼ŒMVP æ¨¡å¼ä¸­ï¼ŒView å±‚çš„æ¥å£æš´éœ²ç»™äº† Presenter å› æ­¤å¯ä»¥åœ¨ Presenter ä¸­å°† Model çš„å˜åŒ–å’Œ View çš„å˜åŒ–ç»‘å®šåœ¨ä¸€èµ·ï¼Œä»¥æ­¤æ¥å®ç° View å’Œ Model çš„åŒæ­¥æ›´æ–°ã€‚è¿™æ ·å°±å®ç°äº†å¯¹ View å’Œ Model çš„è§£è€¦ï¼ŒPresenter è¿˜åŒ…å«äº†å…¶ä»–çš„å“åº”é€»è¾‘ã€‚\n5. Computed å’Œ Watch çš„åŒºåˆ«å¯¹äºComputedï¼š\n\nå®ƒæ”¯æŒç¼“å­˜ï¼Œåªæœ‰ä¾èµ–çš„æ•°æ®å‘ç”Ÿäº†å˜åŒ–ï¼Œæ‰ä¼šé‡æ–°è®¡ç®—\nä¸æ”¯æŒå¼‚æ­¥ï¼Œå½“Computedä¸­æœ‰å¼‚æ­¥æ“ä½œæ—¶ï¼Œæ— æ³•ç›‘å¬æ•°æ®çš„å˜åŒ–\ncomputedçš„å€¼ä¼šé»˜è®¤èµ°ç¼“å­˜ï¼Œè®¡ç®—å±æ€§æ˜¯åŸºäºå®ƒä»¬çš„å“åº”å¼ä¾èµ–è¿›è¡Œç¼“å­˜çš„ï¼Œä¹Ÿå°±æ˜¯åŸºäºdataå£°æ˜è¿‡ï¼Œæˆ–è€…çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„propsä¸­çš„æ•°æ®è¿›è¡Œè®¡ç®—çš„ã€‚\nå¦‚æœä¸€ä¸ªå±æ€§æ˜¯ç”±å…¶ä»–å±æ€§è®¡ç®—è€Œæ¥çš„ï¼Œè¿™ä¸ªå±æ€§ä¾èµ–å…¶ä»–çš„å±æ€§ï¼Œä¸€èˆ¬ä¼šä½¿ç”¨computed\nå¦‚æœcomputedå±æ€§çš„å±æ€§å€¼æ˜¯å‡½æ•°ï¼Œé‚£ä¹ˆé»˜è®¤ä½¿ç”¨getæ–¹æ³•ï¼Œå‡½æ•°çš„è¿”å›å€¼å°±æ˜¯å±æ€§çš„å±æ€§å€¼ï¼›åœ¨computedä¸­ï¼Œå±æ€§æœ‰ä¸€ä¸ªgetæ–¹æ³•å’Œä¸€ä¸ªsetæ–¹æ³•ï¼Œå½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šè°ƒç”¨setæ–¹æ³•ã€‚\n\nå¯¹äºWatchï¼š\n\nå®ƒä¸æ”¯æŒç¼“å­˜ï¼Œæ•°æ®å˜åŒ–æ—¶ï¼Œå®ƒå°±ä¼šè§¦å‘ç›¸åº”çš„æ“ä½œ\n\næ”¯æŒå¼‚æ­¥ç›‘å¬\n\nç›‘å¬çš„å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æœ€æ–°çš„å€¼ï¼Œç¬¬äºŒä¸ªæ˜¯å˜åŒ–ä¹‹å‰çš„å€¼\n\nå½“ä¸€ä¸ªå±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°±éœ€è¦æ‰§è¡Œç›¸åº”çš„æ“ä½œ\n\nç›‘å¬æ•°æ®å¿…é¡»æ˜¯dataä¸­å£°æ˜çš„æˆ–è€…çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„propsä¸­çš„æ•°æ®ï¼Œå½“å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šè§¦å‘å…¶ä»–æ“ä½œï¼Œå‡½æ•°æœ‰ä¸¤ä¸ªçš„å‚æ•°ï¼š\n\nimmediateï¼šç»„ä»¶åŠ è½½ç«‹å³è§¦å‘å›è°ƒå‡½æ•°\ndeepï¼šæ·±åº¦ç›‘å¬ï¼Œå‘ç°æ•°æ®å†…éƒ¨çš„å˜åŒ–ï¼Œåœ¨å¤æ‚æ•°æ®ç±»å‹ä¸­ä½¿ç”¨ï¼Œä¾‹å¦‚æ•°ç»„ä¸­çš„å¯¹è±¡å‘ç”Ÿå˜åŒ–ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œdeepæ— æ³•ç›‘å¬åˆ°æ•°ç»„å’Œå¯¹è±¡å†…éƒ¨çš„å˜åŒ–ã€‚\n\n\n\nå½“æƒ³è¦æ‰§è¡Œå¼‚æ­¥æˆ–è€…æ˜‚è´µçš„æ“ä½œä»¥å“åº”ä¸æ–­çš„å˜åŒ–æ—¶ï¼Œå°±éœ€è¦ä½¿ç”¨watchã€‚\næ€»ç»“ï¼š\n\ncomputed è®¡ç®—å±æ€§ : ä¾èµ–å…¶å®ƒå±æ€§å€¼ï¼Œå¹¶ä¸” computed çš„å€¼æœ‰ç¼“å­˜ï¼Œåªæœ‰å®ƒä¾èµ–çš„å±æ€§å€¼å‘ç”Ÿæ”¹å˜ï¼Œä¸‹ä¸€æ¬¡è·å– computed çš„å€¼æ—¶æ‰ä¼šé‡æ–°è®¡ç®— computed çš„å€¼ã€‚\nwatch ä¾¦å¬å™¨ : æ›´å¤šçš„æ˜¯è§‚å¯Ÿçš„ä½œç”¨ï¼Œæ— ç¼“å­˜æ€§ï¼Œç±»ä¼¼äºæŸäº›æ•°æ®çš„ç›‘å¬å›è°ƒï¼Œæ¯å½“ç›‘å¬çš„æ•°æ®å˜åŒ–æ—¶éƒ½ä¼šæ‰§è¡Œå›è°ƒè¿›è¡Œåç»­æ“ä½œã€‚\n\nè¿ç”¨åœºæ™¯ï¼š\n\nå½“éœ€è¦è¿›è¡Œæ•°å€¼è®¡ç®—,å¹¶ä¸”ä¾èµ–äºå…¶å®ƒæ•°æ®æ—¶ï¼Œåº”è¯¥ä½¿ç”¨ computedï¼Œå› ä¸ºå¯ä»¥åˆ©ç”¨ computed çš„ç¼“å­˜ç‰¹æ€§ï¼Œé¿å…æ¯æ¬¡è·å–å€¼æ—¶éƒ½è¦é‡æ–°è®¡ç®—ã€‚\nå½“éœ€è¦åœ¨æ•°æ®å˜åŒ–æ—¶æ‰§è¡Œå¼‚æ­¥æˆ–å¼€é”€è¾ƒå¤§çš„æ“ä½œæ—¶ï¼Œåº”è¯¥ä½¿ç”¨ watchï¼Œä½¿ç”¨ watch é€‰é¡¹å…è®¸æ‰§è¡Œå¼‚æ­¥æ“ä½œ ( è®¿é—®ä¸€ä¸ª API )ï¼Œé™åˆ¶æ‰§è¡Œè¯¥æ“ä½œçš„é¢‘ç‡ï¼Œå¹¶åœ¨å¾—åˆ°æœ€ç»ˆç»“æœå‰ï¼Œè®¾ç½®ä¸­é—´çŠ¶æ€ã€‚è¿™äº›éƒ½æ˜¯è®¡ç®—å±æ€§æ— æ³•åšåˆ°çš„ã€‚\n\n6. Computed å’Œ Methods çš„åŒºåˆ«å¯ä»¥å°†åŒä¸€å‡½æ•°å®šä¹‰ä¸ºä¸€ä¸ª method æˆ–è€…ä¸€ä¸ªè®¡ç®—å±æ€§ã€‚å¯¹äºæœ€ç»ˆçš„ç»“æœï¼Œä¸¤ç§æ–¹å¼æ˜¯ç›¸åŒçš„\nä¸åŒç‚¹ï¼š\n\ncomputed: è®¡ç®—å±æ€§æ˜¯åŸºäºå®ƒä»¬çš„ä¾èµ–è¿›è¡Œç¼“å­˜çš„ï¼Œåªæœ‰åœ¨å®ƒçš„ç›¸å…³ä¾èµ–å‘ç”Ÿæ”¹å˜æ—¶æ‰ä¼šé‡æ–°æ±‚å€¼ï¼›\nmethod è°ƒç”¨æ€»ä¼šæ‰§è¡Œè¯¥å‡½æ•°ã€‚\n\n7. slotæ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆä½œç”¨ï¼ŸåŸç†æ˜¯ä»€ä¹ˆï¼Ÿslotåˆåæ’æ§½ï¼Œæ˜¯Vueçš„å†…å®¹åˆ†å‘æœºåˆ¶ï¼Œç»„ä»¶å†…éƒ¨çš„æ¨¡æ¿å¼•æ“ä½¿ç”¨slotå…ƒç´ ä½œä¸ºæ‰¿è½½åˆ†å‘å†…å®¹çš„å‡ºå£ã€‚æ’æ§½slotæ˜¯å­ç»„ä»¶çš„ä¸€ä¸ªæ¨¡æ¿æ ‡ç­¾å…ƒç´ ï¼Œè€Œè¿™ä¸€ä¸ªæ ‡ç­¾å…ƒç´ æ˜¯å¦æ˜¾ç¤ºï¼Œä»¥åŠæ€ä¹ˆæ˜¾ç¤ºæ˜¯ç”±çˆ¶ç»„ä»¶å†³å®šçš„ã€‚slotåˆåˆ†ä¸‰ç±»ï¼Œé»˜è®¤æ’æ§½ï¼Œå…·åæ’æ§½å’Œä½œç”¨åŸŸæ’æ§½ã€‚\n\né»˜è®¤æ’æ§½ï¼šåˆååŒ¿åæŸ¥æŠ„ï¼Œå½“slotæ²¡æœ‰æŒ‡å®šnameå±æ€§å€¼çš„æ—¶å€™ä¸€ä¸ªé»˜è®¤æ˜¾ç¤ºæ’æ§½ï¼Œä¸€ä¸ªç»„ä»¶å†…åªæœ‰æœ‰ä¸€ä¸ªåŒ¿åæ’æ§½ã€‚\nå…·åæ’æ§½ï¼šå¸¦æœ‰å…·ä½“åå­—çš„æ’æ§½ï¼Œä¹Ÿå°±æ˜¯å¸¦æœ‰nameå±æ€§çš„slotï¼Œä¸€ä¸ªç»„ä»¶å¯ä»¥å‡ºç°å¤šä¸ªå…·åæ’æ§½ã€‚\nä½œç”¨åŸŸæ’æ§½ï¼šé»˜è®¤æ’æ§½ã€å…·åæ’æ§½çš„ä¸€ä¸ªå˜ä½“ï¼Œå¯ä»¥æ˜¯åŒ¿åæ’æ§½ï¼Œä¹Ÿå¯ä»¥æ˜¯å…·åæ’æ§½ï¼Œè¯¥æ’æ§½çš„ä¸åŒç‚¹æ˜¯åœ¨å­ç»„ä»¶æ¸²æŸ“ä½œç”¨åŸŸæ’æ§½æ—¶ï¼Œå¯ä»¥å°†å­ç»„ä»¶å†…éƒ¨çš„æ•°æ®ä¼ é€’ç»™çˆ¶ç»„ä»¶ï¼Œè®©çˆ¶ç»„ä»¶æ ¹æ®å­ç»„ä»¶çš„ä¼ é€’è¿‡æ¥çš„æ•°æ®å†³å®šå¦‚ä½•æ¸²æŸ“è¯¥æ’æ§½ã€‚\n\nå®ç°åŸç†ï¼šå½“å­ç»„ä»¶vmå®ä¾‹åŒ–æ—¶ï¼Œè·å–åˆ°çˆ¶ç»„ä»¶ä¼ å…¥çš„slotæ ‡ç­¾çš„å†…å®¹ï¼Œå­˜æ”¾åœ¨vm.$slotä¸­ï¼Œé»˜è®¤æ’æ§½ä¸ºvm.$slot.defaultï¼Œå…·åæ’æ§½ä¸ºvm.$slot.xxxï¼Œxxx ä¸ºæ’æ§½åï¼Œå½“ç»„ä»¶æ‰§è¡Œæ¸²æŸ“å‡½æ•°æ—¶å€™ï¼Œé‡åˆ°slotæ ‡ç­¾ï¼Œä½¿ç”¨$slotä¸­çš„å†…å®¹è¿›è¡Œæ›¿æ¢ï¼Œæ­¤æ—¶å¯ä»¥ä¸ºæ’æ§½ä¼ é€’æ•°æ®ï¼Œè‹¥å­˜åœ¨æ•°æ®ï¼Œåˆ™å¯ç§°è¯¥æ’æ§½ä¸ºä½œç”¨åŸŸæ’æ§½ã€‚\n8. è¿‡æ»¤å™¨çš„ä½œç”¨ï¼Œå¦‚ä½•å®ç°ä¸€ä¸ªè¿‡æ»¤å™¨æ ¹æ®è¿‡æ»¤å™¨çš„åç§°ï¼Œè¿‡æ»¤å™¨æ˜¯ç”¨æ¥è¿‡æ»¤æ•°æ®çš„ï¼Œåœ¨Vueä¸­ä½¿ç”¨filtersæ¥è¿‡æ»¤æ•°æ®ï¼Œfiltersä¸ä¼šä¿®æ”¹æ•°æ®ï¼Œè€Œæ˜¯è¿‡æ»¤æ•°æ®ï¼Œæ”¹å˜ç”¨æˆ·çœ‹åˆ°çš„è¾“å‡ºï¼ˆè®¡ç®—å±æ€§ computed ï¼Œæ–¹æ³• methods éƒ½æ˜¯é€šè¿‡ä¿®æ”¹æ•°æ®æ¥å¤„ç†æ•°æ®æ ¼å¼çš„è¾“å‡ºæ˜¾ç¤ºï¼‰ã€‚\nä½¿ç”¨åœºæ™¯ï¼š\n\néœ€è¦æ ¼å¼åŒ–æ•°æ®çš„æƒ…å†µï¼Œæ¯”å¦‚éœ€è¦å¤„ç†æ—¶é—´ã€ä»·æ ¼ç­‰æ•°æ®æ ¼å¼çš„è¾“å‡º &#x2F; æ˜¾ç¤ºã€‚\næ¯”å¦‚åç«¯è¿”å›ä¸€ä¸ª å¹´æœˆæ—¥çš„æ—¥æœŸå­—ç¬¦ä¸²ï¼Œå‰ç«¯éœ€è¦å±•ç¤ºä¸º å¤šå°‘å¤©å‰ çš„æ•°æ®æ ¼å¼ï¼Œæ­¤æ—¶å°±å¯ä»¥ç”¨flitersè¿‡æ»¤å™¨æ¥å¤„ç†æ•°æ®ã€‚\n\nè¿‡æ»¤å™¨æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒä¼šæŠŠè¡¨è¾¾å¼ä¸­çš„å€¼å§‹ç»ˆå½“ä½œå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚è¿‡æ»¤å™¨ç”¨åœ¨æ’å€¼è¡¨è¾¾å¼ &#123;&#123; &#125;&#125; å’Œ v-bind è¡¨è¾¾å¼ ä¸­ï¼Œç„¶åæ”¾åœ¨æ“ä½œç¬¦â€œ | â€åé¢è¿›è¡ŒæŒ‡ç¤ºã€‚\nä¾‹å¦‚ï¼Œåœ¨æ˜¾ç¤ºé‡‘é¢ï¼Œç»™å•†å“ä»·æ ¼æ·»åŠ å•ä½ï¼š\n&lt;li&gt;å•†å“ä»·æ ¼ï¼š&#123;&#123;item.price | filterPrice&#125;&#125;&lt;&#x2F;li&gt;\n\n filters: &#123;\n    filterPrice (price) &#123;\n      return price ? (&#39;ï¿¥&#39; + price) : &#39;--&#39;\n    &#125;\n  &#125;\nå¤åˆ¶ä»£ç \n\n9. å¦‚ä½•ä¿å­˜é¡µé¢çš„å½“å‰çš„çŠ¶æ€æ—¢ç„¶æ˜¯è¦ä¿æŒé¡µé¢çš„çŠ¶æ€ï¼ˆå…¶å®ä¹Ÿå°±æ˜¯ç»„ä»¶çš„çŠ¶æ€ï¼‰ï¼Œé‚£ä¹ˆä¼šå‡ºç°ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š\n\nå‰ç»„ä»¶ä¼šè¢«å¸è½½\nå‰ç»„ä»¶ä¸ä¼šè¢«å¸è½½\n\né‚£ä¹ˆå¯ä»¥æŒ‰ç…§è¿™ä¸¤ç§æƒ…å†µåˆ†åˆ«å¾—åˆ°ä»¥ä¸‹æ–¹æ³•ï¼š\nç»„ä»¶ä¼šè¢«å¸è½½ï¼š\nï¼ˆ1ï¼‰å°†çŠ¶æ€å­˜å‚¨åœ¨LocalStorage &#x2F; SessionStorage\nåªéœ€è¦åœ¨ç»„ä»¶å³å°†è¢«é”€æ¯çš„ç”Ÿå‘½å‘¨æœŸ componentWillUnmount ï¼ˆreactï¼‰ä¸­åœ¨ LocalStorage &#x2F; SessionStorage ä¸­æŠŠå½“å‰ç»„ä»¶çš„ state é€šè¿‡ JSON.stringify() å‚¨å­˜ä¸‹æ¥å°±å¯ä»¥äº†ã€‚åœ¨è¿™é‡Œé¢éœ€è¦æ³¨æ„çš„æ˜¯ç»„ä»¶æ›´æ–°çŠ¶æ€çš„æ—¶æœºã€‚\næ¯”å¦‚ä» B ç»„ä»¶è·³è½¬åˆ° A ç»„ä»¶çš„æ—¶å€™ï¼ŒA ç»„ä»¶éœ€è¦æ›´æ–°è‡ªèº«çš„çŠ¶æ€ã€‚ä½†æ˜¯å¦‚æœä»åˆ«çš„ç»„ä»¶è·³è½¬åˆ° B ç»„ä»¶çš„æ—¶å€™ï¼Œå®é™…ä¸Šæ˜¯å¸Œæœ› B ç»„ä»¶é‡æ–°æ¸²æŸ“çš„ï¼Œä¹Ÿå°±æ˜¯ä¸è¦ä» Storage ä¸­è¯»å–ä¿¡æ¯ã€‚æ‰€ä»¥éœ€è¦åœ¨ Storage ä¸­çš„çŠ¶æ€åŠ å…¥ä¸€ä¸ª flag å±æ€§ï¼Œç”¨æ¥æ§åˆ¶ A ç»„ä»¶æ˜¯å¦è¯»å– Storage ä¸­çš„çŠ¶æ€ã€‚\nä¼˜ç‚¹ï¼š\n\nå…¼å®¹æ€§å¥½ï¼Œä¸éœ€è¦é¢å¤–åº“æˆ–å·¥å…·ã€‚\nç®€å•å¿«æ·ï¼ŒåŸºæœ¬å¯ä»¥æ»¡è¶³å¤§éƒ¨åˆ†éœ€æ±‚ã€‚\n\nç¼ºç‚¹ï¼š\n\nçŠ¶æ€é€šè¿‡ JSON æ–¹æ³•å‚¨å­˜ï¼ˆç›¸å½“äºæ·±æ‹·è´ï¼‰ï¼Œå¦‚æœçŠ¶æ€ä¸­æœ‰ç‰¹æ®Šæƒ…å†µï¼ˆæ¯”å¦‚ Date å¯¹è±¡ã€Regexp å¯¹è±¡ç­‰ï¼‰çš„æ—¶å€™ä¼šå¾—åˆ°å­—ç¬¦ä¸²è€Œä¸æ˜¯åŸæ¥çš„å€¼ã€‚ï¼ˆå…·ä½“å‚è€ƒç”¨ JSON æ·±æ‹·è´çš„ç¼ºç‚¹ï¼‰\nå¦‚æœ B ç»„ä»¶åé€€æˆ–è€…ä¸‹ä¸€é¡µè·³è½¬å¹¶ä¸æ˜¯å‰ç»„ä»¶ï¼Œé‚£ä¹ˆ flag åˆ¤æ–­ä¼šå¤±æ•ˆï¼Œå¯¼è‡´ä»å…¶ä»–é¡µé¢è¿›å…¥ A ç»„ä»¶é¡µé¢æ—¶ A ç»„ä»¶ä¼šé‡æ–°è¯»å– Storageï¼Œä¼šé€ æˆå¾ˆå¥‡æ€ªçš„ç°è±¡\n\nï¼ˆ2ï¼‰è·¯ç”±ä¼ å€¼\né€šè¿‡ react-router çš„ Link ç»„ä»¶çš„ prop â€”â€” to å¯ä»¥å®ç°è·¯ç”±é—´ä¼ é€’å‚æ•°çš„æ•ˆæœã€‚\nåœ¨è¿™é‡Œéœ€è¦ç”¨åˆ° state å‚æ•°ï¼Œåœ¨ B ç»„ä»¶ä¸­é€šè¿‡ history.location.state å°±å¯ä»¥æ‹¿åˆ° state å€¼ï¼Œä¿å­˜å®ƒã€‚è¿”å› A ç»„ä»¶æ—¶å†æ¬¡æºå¸¦ state è¾¾åˆ°è·¯ç”±çŠ¶æ€ä¿æŒçš„æ•ˆæœã€‚\nä¼˜ç‚¹ï¼š\n\nç®€å•å¿«æ·ï¼Œä¸ä¼šæ±¡æŸ“ LocalStorage &#x2F; SessionStorageã€‚\nå¯ä»¥ä¼ é€’ Dateã€RegExp ç­‰ç‰¹æ®Šå¯¹è±¡ï¼ˆä¸ç”¨æ‹…å¿ƒ JSON.stringify &#x2F; parse çš„ä¸è¶³ï¼‰\n\nç¼ºç‚¹ï¼š\n\nå¦‚æœ A ç»„ä»¶å¯ä»¥è·³è½¬è‡³å¤šä¸ªç»„ä»¶ï¼Œé‚£ä¹ˆåœ¨æ¯ä¸€ä¸ªè·³è½¬ç»„ä»¶å†…éƒ½è¦å†™ç›¸åŒçš„é€»è¾‘ã€‚\n\nç»„ä»¶ä¸ä¼šè¢«å¸è½½ï¼š\nï¼ˆ1ï¼‰å•é¡µé¢æ¸²æŸ“\nè¦åˆ‡æ¢çš„ç»„ä»¶ä½œä¸ºå­ç»„ä»¶å…¨å±æ¸²æŸ“ï¼Œçˆ¶ç»„ä»¶ä¸­æ­£å¸¸å‚¨å­˜é¡µé¢çŠ¶æ€ã€‚\nä¼˜ç‚¹ï¼š\n\nä»£ç é‡å°‘\nä¸éœ€è¦è€ƒè™‘çŠ¶æ€ä¼ é€’è¿‡ç¨‹ä¸­çš„é”™è¯¯\n\nç¼ºç‚¹ï¼š\n\nå¢åŠ  A ç»„ä»¶ç»´æŠ¤æˆæœ¬\néœ€è¦ä¼ å…¥é¢å¤–çš„ prop åˆ° B ç»„ä»¶\næ— æ³•åˆ©ç”¨è·¯ç”±å®šä½é¡µé¢\n\né™¤æ­¤ä¹‹å¤–ï¼Œåœ¨Vueä¸­ï¼Œè¿˜å¯ä»¥æ˜¯ç”¨keep-aliveæ¥ç¼“å­˜é¡µé¢ï¼Œå½“ç»„ä»¶åœ¨keep-aliveå†…è¢«åˆ‡æ¢æ—¶ç»„ä»¶çš„activatedã€deactivatedè¿™ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ä¼šè¢«æ‰§è¡Œ è¢«åŒ…è£¹åœ¨keep-aliveä¸­çš„ç»„ä»¶çš„çŠ¶æ€å°†ä¼šè¢«ä¿ç•™ï¼š\n&lt;keep-alive&gt;\n\t&lt;router-view v-if&#x3D;&quot;$route.meta.keepAlive&quot;&gt;&lt;&#x2F;router-view&gt;\n&lt;&#x2F;kepp-alive&gt;\nå¤åˆ¶ä»£ç \n\nrouter.js\n&#123;\n  path: &#39;&#x2F;&#39;,\n  name: &#39;xxx&#39;,\n  component: ()&#x3D;&gt;import(&#39;..&#x2F;src&#x2F;views&#x2F;xxx.vue&#39;),\n  meta:&#123;\n    keepAlive: true &#x2F;&#x2F; éœ€è¦è¢«ç¼“å­˜\n  &#125;\n&#125;,\nå¤åˆ¶ä»£ç \n\n10. å¸¸è§çš„äº‹ä»¶ä¿®é¥°ç¬¦åŠå…¶ä½œç”¨\n.stopï¼šç­‰åŒäº JavaScript ä¸­çš„ event.stopPropagation() ï¼Œé˜²æ­¢äº‹ä»¶å†’æ³¡ï¼›\n.prevent ï¼šç­‰åŒäº JavaScript ä¸­çš„ event.preventDefault() ï¼Œé˜²æ­¢æ‰§è¡Œé¢„è®¾çš„è¡Œä¸ºï¼ˆå¦‚æœäº‹ä»¶å¯å–æ¶ˆï¼Œåˆ™å–æ¶ˆè¯¥äº‹ä»¶ï¼Œè€Œä¸åœæ­¢äº‹ä»¶çš„è¿›ä¸€æ­¥ä¼ æ’­ï¼‰ï¼›\n.capture ï¼šä¸äº‹ä»¶å†’æ³¡çš„æ–¹å‘ç›¸åï¼Œäº‹ä»¶æ•è·ç”±å¤–åˆ°å†…ï¼›\n.self ï¼šåªä¼šè§¦å‘è‡ªå·±èŒƒå›´å†…çš„äº‹ä»¶ï¼Œä¸åŒ…å«å­å…ƒç´ ï¼›\n.once ï¼šåªä¼šè§¦å‘ä¸€æ¬¡ã€‚\n\n11. v-ifã€v-showã€v-html çš„åŸç†\nv-ifä¼šè°ƒç”¨addIfConditionæ–¹æ³•ï¼Œç”Ÿæˆvnodeçš„æ—¶å€™ä¼šå¿½ç•¥å¯¹åº”èŠ‚ç‚¹ï¼Œrenderçš„æ—¶å€™å°±ä¸ä¼šæ¸²æŸ“ï¼›\nv-showä¼šç”Ÿæˆvnodeï¼Œrenderçš„æ—¶å€™ä¹Ÿä¼šæ¸²æŸ“æˆçœŸå®èŠ‚ç‚¹ï¼Œåªæ˜¯åœ¨renderè¿‡ç¨‹ä¸­ä¼šåœ¨èŠ‚ç‚¹çš„å±æ€§ä¸­ä¿®æ”¹showå±æ€§å€¼ï¼Œä¹Ÿå°±æ˜¯å¸¸è¯´çš„displayï¼›\nv-htmlä¼šå…ˆç§»é™¤èŠ‚ç‚¹ä¸‹çš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œè°ƒç”¨htmlæ–¹æ³•ï¼Œé€šè¿‡addPropæ·»åŠ innerHTMLå±æ€§ï¼Œå½’æ ¹ç»“åº•è¿˜æ˜¯è®¾ç½®innerHTMLä¸ºv-htmlçš„å€¼ã€‚\n\n13. v-ifå’Œv-showçš„åŒºåˆ«\næ‰‹æ®µï¼šv-ifæ˜¯åŠ¨æ€çš„å‘DOMæ ‘å†…æ·»åŠ æˆ–è€…åˆ é™¤DOMå…ƒç´ ï¼›v-showæ˜¯é€šè¿‡è®¾ç½®DOMå…ƒç´ çš„displayæ ·å¼å±æ€§æ§åˆ¶æ˜¾éšï¼›\nç¼–è¯‘è¿‡ç¨‹ï¼šv-ifåˆ‡æ¢æœ‰ä¸€ä¸ªå±€éƒ¨ç¼–è¯‘&#x2F;å¸è½½çš„è¿‡ç¨‹ï¼Œåˆ‡æ¢è¿‡ç¨‹ä¸­åˆé€‚åœ°é”€æ¯å’Œé‡å»ºå†…éƒ¨çš„äº‹ä»¶ç›‘å¬å’Œå­ç»„ä»¶ï¼›v-showåªæ˜¯ç®€å•çš„åŸºäºcssåˆ‡æ¢ï¼›\nç¼–è¯‘æ¡ä»¶ï¼šv-ifæ˜¯æƒ°æ€§çš„ï¼Œå¦‚æœåˆå§‹æ¡ä»¶ä¸ºå‡ï¼Œåˆ™ä»€ä¹ˆä¹Ÿä¸åšï¼›åªæœ‰åœ¨æ¡ä»¶ç¬¬ä¸€æ¬¡å˜ä¸ºçœŸæ—¶æ‰å¼€å§‹å±€éƒ¨ç¼–è¯‘; v-showæ˜¯åœ¨ä»»ä½•æ¡ä»¶ä¸‹ï¼Œæ— è®ºé¦–æ¬¡æ¡ä»¶æ˜¯å¦ä¸ºçœŸï¼Œéƒ½è¢«ç¼–è¯‘ï¼Œç„¶åè¢«ç¼“å­˜ï¼Œè€Œä¸”DOMå…ƒç´ ä¿ç•™ï¼›\næ€§èƒ½æ¶ˆè€—ï¼šv-ifæœ‰æ›´é«˜çš„åˆ‡æ¢æ¶ˆè€—ï¼›v-showæœ‰æ›´é«˜çš„åˆå§‹æ¸²æŸ“æ¶ˆè€—ï¼›\nä½¿ç”¨åœºæ™¯ï¼šv-ifé€‚åˆè¿è¥æ¡ä»¶ä¸å¤§å¯èƒ½æ”¹å˜ï¼›v-showé€‚åˆé¢‘ç¹åˆ‡æ¢ã€‚\n\n14. v-model æ˜¯å¦‚ä½•å®ç°çš„ï¼Œè¯­æ³•ç³–å®é™…æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆ1ï¼‰ä½œç”¨åœ¨è¡¨å•å…ƒç´ ä¸Š åŠ¨æ€ç»‘å®šäº† input çš„ value æŒ‡å‘äº† messgae å˜é‡ï¼Œå¹¶ä¸”åœ¨è§¦å‘ input äº‹ä»¶çš„æ—¶å€™å»åŠ¨æ€æŠŠ messageè®¾ç½®ä¸ºç›®æ ‡å€¼ï¼š\n&lt;input v-model&#x3D;&quot;sth&quot; &#x2F;&gt;\n&#x2F;&#x2F;  ç­‰åŒäº\n&lt;input \n    v-bind:value&#x3D;&quot;message&quot; \n    v-on:input&#x3D;&quot;message&#x3D;$event.target.value&quot;\n&gt;\n&#x2F;&#x2F;$event æŒ‡ä»£å½“å‰è§¦å‘çš„äº‹ä»¶å¯¹è±¡;\n&#x2F;&#x2F;$event.target æŒ‡ä»£å½“å‰è§¦å‘çš„äº‹ä»¶å¯¹è±¡çš„dom;\n&#x2F;&#x2F;$event.target.value å°±æ˜¯å½“å‰domçš„valueå€¼;\n&#x2F;&#x2F;åœ¨@inputæ–¹æ³•ä¸­ï¼Œvalue &#x3D;&gt; sth;\n&#x2F;&#x2F;åœ¨:valueä¸­,sth &#x3D;&gt; value;\nå¤åˆ¶ä»£ç \n\nï¼ˆ2ï¼‰ä½œç”¨åœ¨ç»„ä»¶ä¸Š åœ¨è‡ªå®šä¹‰ç»„ä»¶ä¸­ï¼Œv-model é»˜è®¤ä¼šåˆ©ç”¨åä¸º value çš„ propå’Œåä¸º input çš„äº‹ä»¶\næœ¬è´¨æ˜¯ä¸€ä¸ªçˆ¶å­ç»„ä»¶é€šä¿¡çš„è¯­æ³•ç³–ï¼Œé€šè¿‡propå’Œ$.emitå®ç°ã€‚ å› æ­¤çˆ¶ç»„ä»¶ v-model è¯­æ³•ç³–æœ¬è´¨ä¸Šå¯ä»¥ä¿®æ”¹ä¸ºï¼š\n&lt;child :value&#x3D;&quot;message&quot;  @input&#x3D;&quot;function(e)&#123;message &#x3D; e&#125;&quot;&gt;&lt;&#x2F;child&gt;\nå¤åˆ¶ä»£ç \n\nåœ¨ç»„ä»¶çš„å®ç°ä¸­ï¼Œå¯ä»¥é€šè¿‡ v-modelå±æ€§æ¥é…ç½®å­ç»„ä»¶æ¥æ”¶çš„propåç§°ï¼Œä»¥åŠæ´¾å‘çš„äº‹ä»¶åç§°ã€‚ ä¾‹å­ï¼š\n&#x2F;&#x2F; çˆ¶ç»„ä»¶\n&lt;aa-input v-model&#x3D;&quot;aa&quot;&gt;&lt;&#x2F;aa-input&gt;\n&#x2F;&#x2F; ç­‰ä»·äº\n&lt;aa-input v-bind:value&#x3D;&quot;aa&quot; v-on:input&#x3D;&quot;aa&#x3D;$event.target.value&quot;&gt;&lt;&#x2F;aa-input&gt;\n\n&#x2F;&#x2F; å­ç»„ä»¶ï¼š\n&lt;input v-bind:value&#x3D;&quot;aa&quot; v-on:input&#x3D;&quot;onmessage&quot;&gt;&lt;&#x2F;aa-input&gt;\n\nprops:&#123;value:aa,&#125;\nmethods:&#123;\n    onmessage(e)&#123;\n        $emit(&#39;input&#39;,e.target.value)\n    &#125;\n&#125;\nå¤åˆ¶ä»£ç \n\né»˜è®¤æƒ…å†µä¸‹ï¼Œä¸€ä¸ªç»„ä»¶ä¸Šçš„v-model ä¼šæŠŠ value ç”¨ä½œ propä¸”æŠŠ input ç”¨ä½œ eventã€‚ä½†æ˜¯ä¸€äº›è¾“å…¥ç±»å‹æ¯”å¦‚å•é€‰æ¡†å’Œå¤é€‰æ¡†æŒ‰é’®å¯èƒ½æƒ³ä½¿ç”¨ value prop æ¥è¾¾åˆ°ä¸åŒçš„ç›®çš„ã€‚ä½¿ç”¨ model é€‰é¡¹å¯ä»¥å›é¿è¿™äº›æƒ…å†µäº§ç”Ÿçš„å†²çªã€‚js ç›‘å¬input è¾“å…¥æ¡†è¾“å…¥æ•°æ®æ”¹å˜ï¼Œç”¨oninputï¼Œæ•°æ®æ”¹å˜ä»¥åå°±ä¼šç«‹åˆ»å‡ºå‘è¿™ä¸ªäº‹ä»¶ã€‚é€šè¿‡inputäº‹ä»¶æŠŠæ•°æ®$emit å‡ºå»ï¼Œåœ¨çˆ¶ç»„ä»¶æ¥å—ã€‚çˆ¶ç»„ä»¶è®¾ç½®v-modelçš„å€¼ä¸ºinput $emitè¿‡æ¥çš„å€¼ã€‚\n15. v-model å¯ä»¥è¢«ç”¨åœ¨è‡ªå®šä¹‰ç»„ä»¶ä¸Šå—ï¼Ÿå¦‚æœå¯ä»¥ï¼Œå¦‚ä½•ä½¿ç”¨ï¼Ÿå¯ä»¥ã€‚v-model å®é™…ä¸Šæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œå¦‚ï¼š\n&lt;input v-model&#x3D;&quot;searchText&quot;&gt;\nå¤åˆ¶ä»£ç \n\nå®é™…ä¸Šç›¸å½“äºï¼š\n&lt;input\n  v-bind:value&#x3D;&quot;searchText&quot;\n  v-on:input&#x3D;&quot;searchText &#x3D; $event.target.value&quot;\n&gt;\nå¤åˆ¶ä»£ç \n\nç”¨åœ¨è‡ªå®šä¹‰ç»„ä»¶ä¸Šä¹Ÿæ˜¯åŒç†ï¼š\n&lt;custom-input v-model&#x3D;&quot;searchText&quot;&gt;\nå¤åˆ¶ä»£ç \n\nç›¸å½“äºï¼š\n&lt;custom-input\n  v-bind:value&#x3D;&quot;searchText&quot;\n  v-on:input&#x3D;&quot;searchText &#x3D; $event&quot;\n&gt;&lt;&#x2F;custom-input&gt;\nå¤åˆ¶ä»£ç \n\næ˜¾ç„¶ï¼Œcustom-input ä¸çˆ¶ç»„ä»¶çš„äº¤äº’å¦‚ä¸‹ï¼š\n\nçˆ¶ç»„ä»¶å°†searchTextå˜é‡ä¼ å…¥custom-input ç»„ä»¶ï¼Œä½¿ç”¨çš„ prop åä¸ºvalueï¼›\ncustom-input ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ å‡ºåä¸ºinputçš„äº‹ä»¶ï¼Œçˆ¶ç»„ä»¶å°†æ¥æ”¶åˆ°çš„å€¼èµ‹å€¼ç»™searchTextï¼›\n\næ‰€ä»¥ï¼Œcustom-input ç»„ä»¶çš„å®ç°åº”è¯¥ç±»ä¼¼äºè¿™æ ·ï¼š\nVue.component(&#39;custom-input&#39;, &#123;\n  props: [&#39;value&#39;],\n  template: &#96;\n    &lt;input\n      v-bind:value&#x3D;&quot;value&quot;\n      v-on:input&#x3D;&quot;$emit(&#39;input&#39;, $event.target.value)&quot;\n    &gt;\n  &#96;\n&#125;)\nå¤åˆ¶ä»£ç \n\n16. dataä¸ºä»€ä¹ˆæ˜¯ä¸€ä¸ªå‡½æ•°è€Œä¸æ˜¯å¯¹è±¡JavaScriptä¸­çš„å¯¹è±¡æ˜¯å¼•ç”¨ç±»å‹çš„æ•°æ®ï¼Œå½“å¤šä¸ªå®ä¾‹å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œåªè¦ä¸€ä¸ªå®ä¾‹å¯¹è¿™ä¸ªå¯¹è±¡è¿›è¡Œæ“ä½œï¼Œå…¶ä»–å®ä¾‹ä¸­çš„æ•°æ®ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ã€‚\nè€Œåœ¨Vueä¸­ï¼Œæ›´å¤šçš„æ˜¯æƒ³è¦å¤ç”¨ç»„ä»¶ï¼Œé‚£å°±éœ€è¦æ¯ä¸ªç»„ä»¶éƒ½æœ‰è‡ªå·±çš„æ•°æ®ï¼Œè¿™æ ·ç»„ä»¶ä¹‹é—´æ‰ä¸ä¼šç›¸äº’å¹²æ‰°ã€‚\næ‰€ä»¥ç»„ä»¶çš„æ•°æ®ä¸èƒ½å†™æˆå¯¹è±¡çš„å½¢å¼ï¼Œè€Œæ˜¯è¦å†™æˆå‡½æ•°çš„å½¢å¼ã€‚æ•°æ®ä»¥å‡½æ•°è¿”å›å€¼çš„å½¢å¼å®šä¹‰ï¼Œè¿™æ ·å½“æ¯æ¬¡å¤ç”¨ç»„ä»¶çš„æ—¶å€™ï¼Œå°±ä¼šè¿”å›ä¸€ä¸ªæ–°çš„dataï¼Œä¹Ÿå°±æ˜¯è¯´æ¯ä¸ªç»„ä»¶éƒ½æœ‰è‡ªå·±çš„ç§æœ‰æ•°æ®ç©ºé—´ï¼Œå®ƒä»¬å„è‡ªç»´æŠ¤è‡ªå·±çš„æ•°æ®ï¼Œä¸ä¼šå¹²æ‰°å…¶ä»–ç»„ä»¶çš„æ­£å¸¸è¿è¡Œã€‚\n17. å¯¹keep-aliveçš„ç†è§£ï¼Œå®ƒæ˜¯å¦‚ä½•å®ç°çš„ï¼Œå…·ä½“ç¼“å­˜çš„æ˜¯ä»€ä¹ˆï¼Ÿå¦‚æœéœ€è¦åœ¨ç»„ä»¶åˆ‡æ¢çš„æ—¶å€™ï¼Œä¿å­˜ä¸€äº›ç»„ä»¶çš„çŠ¶æ€é˜²æ­¢å¤šæ¬¡æ¸²æŸ“ï¼Œå°±å¯ä»¥ä½¿ç”¨ keep-alive ç»„ä»¶åŒ…è£¹éœ€è¦ä¿å­˜çš„ç»„ä»¶ã€‚\nï¼ˆ1ï¼‰keep-alive\nkeep-aliveæœ‰ä»¥ä¸‹ä¸‰ä¸ªå±æ€§ï¼š\n\ninclude å­—ç¬¦ä¸²æˆ–æ­£åˆ™è¡¨è¾¾å¼ï¼Œåªæœ‰åç§°åŒ¹é…çš„ç»„ä»¶ä¼šè¢«åŒ¹é…ï¼›\nexclude å­—ç¬¦ä¸²æˆ–æ­£åˆ™è¡¨è¾¾å¼ï¼Œä»»ä½•åç§°åŒ¹é…çš„ç»„ä»¶éƒ½ä¸ä¼šè¢«ç¼“å­˜ï¼›\nmax æ•°å­—ï¼Œæœ€å¤šå¯ä»¥ç¼“å­˜å¤šå°‘ç»„ä»¶å®ä¾‹ã€‚\n\næ³¨æ„ï¼škeep-alive åŒ…è£¹åŠ¨æ€ç»„ä»¶æ—¶ï¼Œä¼šç¼“å­˜ä¸æ´»åŠ¨çš„ç»„ä»¶å®ä¾‹ã€‚\nä¸»è¦æµç¨‹\n\nåˆ¤æ–­ç»„ä»¶ name ï¼Œä¸åœ¨ include æˆ–è€…åœ¨ exclude ä¸­ï¼Œç›´æ¥è¿”å› vnodeï¼Œè¯´æ˜è¯¥ç»„ä»¶ä¸è¢«ç¼“å­˜ã€‚\nè·å–ç»„ä»¶å®ä¾‹ key ï¼Œå¦‚æœæœ‰è·å–å®ä¾‹çš„ keyï¼Œå¦åˆ™é‡æ–°ç”Ÿæˆã€‚\nkeyç”Ÿæˆè§„åˆ™ï¼Œcid +â€âˆ¶âˆ¶â€+ tag ï¼Œä»…é cidæ˜¯ä¸å¤Ÿçš„ï¼Œå› ä¸ºç›¸åŒçš„æ„é€ å‡½æ•°å¯ä»¥æ³¨å†Œä¸ºä¸åŒçš„æœ¬åœ°ç»„ä»¶ã€‚\nå¦‚æœç¼“å­˜å¯¹è±¡å†…å­˜åœ¨ï¼Œåˆ™ç›´æ¥ä»ç¼“å­˜å¯¹è±¡ä¸­è·å–ç»„ä»¶å®ä¾‹ç»™ vnode ï¼Œä¸å­˜åœ¨åˆ™æ·»åŠ åˆ°ç¼“å­˜å¯¹è±¡ä¸­ã€‚ 5.æœ€å¤§ç¼“å­˜æ•°é‡ï¼Œå½“ç¼“å­˜ç»„ä»¶æ•°é‡è¶…è¿‡ max å€¼æ—¶ï¼Œæ¸…é™¤ keys æ•°ç»„å†…ç¬¬ä¸€ä¸ªç»„ä»¶ã€‚\n\nï¼ˆ2ï¼‰keep-alive çš„å®ç°\nconst patternTypes: Array&lt;Function&gt; &#x3D; [String, RegExp, Array] &#x2F;&#x2F; æ¥æ”¶ï¼šå­—ç¬¦ä¸²ï¼Œæ­£åˆ™ï¼Œæ•°ç»„\n\nexport default &#123;\n  name: &#39;keep-alive&#39;,\n  abstract: true, &#x2F;&#x2F; æŠ½è±¡ç»„ä»¶ï¼Œæ˜¯ä¸€ä¸ªæŠ½è±¡ç»„ä»¶ï¼šå®ƒè‡ªèº«ä¸ä¼šæ¸²æŸ“ä¸€ä¸ª DOM å…ƒç´ ï¼Œä¹Ÿä¸ä¼šå‡ºç°åœ¨çˆ¶ç»„ä»¶é“¾ä¸­ã€‚\n\n  props: &#123;\n    include: patternTypes, &#x2F;&#x2F; åŒ¹é…çš„ç»„ä»¶ï¼Œç¼“å­˜\n    exclude: patternTypes, &#x2F;&#x2F; ä¸å»åŒ¹é…çš„ç»„ä»¶ï¼Œä¸ç¼“å­˜\n    max: [String, Number], &#x2F;&#x2F; ç¼“å­˜ç»„ä»¶çš„æœ€å¤§å®ä¾‹æ•°é‡, ç”±äºç¼“å­˜çš„æ˜¯ç»„ä»¶å®ä¾‹ï¼ˆvnodeï¼‰ï¼Œæ•°é‡è¿‡å¤šçš„æ—¶å€™ï¼Œä¼šå ç”¨è¿‡å¤šçš„å†…å­˜ï¼Œå¯ä»¥ç”¨maxæŒ‡å®šä¸Šé™\n  &#125;,\n\n  created() &#123;\n    &#x2F;&#x2F; ç”¨äºåˆå§‹åŒ–ç¼“å­˜è™šæ‹ŸDOMæ•°ç»„å’Œvnodeçš„key\n    this.cache &#x3D; Object.create(null)\n    this.keys &#x3D; []\n  &#125;,\n\n  destroyed() &#123;\n    &#x2F;&#x2F; é”€æ¯ç¼“å­˜cacheçš„ç»„ä»¶å®ä¾‹\n    for (const key in this.cache) &#123;\n      pruneCacheEntry(this.cache, key, this.keys)\n    &#125;\n  &#125;,\n\n  mounted() &#123;\n    &#x2F;&#x2F; prune å‰Šå‡ç²¾ç®€[v.]\n    &#x2F;&#x2F; å»ç›‘æ§includeå’Œexcludeçš„æ”¹å˜ï¼Œæ ¹æ®æœ€æ–°çš„includeå’Œexcludeçš„å†…å®¹ï¼Œæ¥å®æ—¶å‰Šå‡ç¼“å­˜çš„ç»„ä»¶çš„å†…å®¹\n    this.$watch(&#39;include&#39;, (val) &#x3D;&gt; &#123;\n      pruneCache(this, (name) &#x3D;&gt; matches(val, name))\n    &#125;)\n    this.$watch(&#39;exclude&#39;, (val) &#x3D;&gt; &#123;\n      pruneCache(this, (name) &#x3D;&gt; !matches(val, name))\n    &#125;)\n  &#125;,\n&#125;\nå¤åˆ¶ä»£ç \n\nrenderå‡½æ•°ï¼š\n\nä¼šåœ¨ keep-alive ç»„ä»¶å†…éƒ¨å»å†™è‡ªå·±çš„å†…å®¹ï¼Œæ‰€ä»¥å¯ä»¥å»è·å–é»˜è®¤ slot çš„å†…å®¹ï¼Œç„¶åæ ¹æ®è¿™ä¸ªå»è·å–ç»„ä»¶\nkeep-alive åªå¯¹ç¬¬ä¸€ä¸ªç»„ä»¶æœ‰æ•ˆï¼Œæ‰€ä»¥è·å–ç¬¬ä¸€ä¸ªå­ç»„ä»¶ã€‚\nå’Œ keep-alive æ­é…ä½¿ç”¨çš„ä¸€èˆ¬æœ‰ï¼šåŠ¨æ€ç»„ä»¶ å’Œrouter-view\n\nrender () &#123;\n  &#x2F;&#x2F;\n  function getFirstComponentChild (children: ?Array&lt;VNode&gt;): ?VNode &#123;\n    if (Array.isArray(children)) &#123;\n  for (let i &#x3D; 0; i &lt; children.length; i++) &#123;\n    const c &#x3D; children[i]\n    if (isDef(c) &amp;&amp; (isDef(c.componentOptions) || isAsyncPlaceholder(c))) &#123;\n      return c\n    &#125;\n  &#125;\n  &#125;\n  &#125;\n  const slot &#x3D; this.$slots.default &#x2F;&#x2F; è·å–é»˜è®¤æ’æ§½\n  const vnode: VNode &#x3D; getFirstComponentChild(slot)&#x2F;&#x2F; è·å–ç¬¬ä¸€ä¸ªå­ç»„ä»¶\n  const componentOptions: ?VNodeComponentOptions &#x3D; vnode &amp;&amp; vnode.componentOptions &#x2F;&#x2F; ç»„ä»¶å‚æ•°\n  if (componentOptions) &#123; &#x2F;&#x2F; æ˜¯å¦æœ‰ç»„ä»¶å‚æ•°\n    &#x2F;&#x2F; check pattern\n    const name: ?string &#x3D; getComponentName(componentOptions) &#x2F;&#x2F; è·å–ç»„ä»¶å\n    const &#123; include, exclude &#125; &#x3D; this\n    if (\n      &#x2F;&#x2F; not included\n      (include &amp;&amp; (!name || !matches(include, name))) ||\n      &#x2F;&#x2F; excluded\n      (exclude &amp;&amp; name &amp;&amp; matches(exclude, name))\n    ) &#123;\n      &#x2F;&#x2F; å¦‚æœä¸åŒ¹é…å½“å‰ç»„ä»¶çš„åå­—å’Œincludeä»¥åŠexclude\n      &#x2F;&#x2F; é‚£ä¹ˆç›´æ¥è¿”å›ç»„ä»¶çš„å®ä¾‹\n      return vnode\n    &#125;\n\n    const &#123; cache, keys &#125; &#x3D; this\n\n    &#x2F;&#x2F; è·å–è¿™ä¸ªç»„ä»¶çš„key\n    const key: ?string &#x3D; vnode.key &#x3D;&#x3D; null\n      &#x2F;&#x2F; same constructor may get registered as different local components\n      &#x2F;&#x2F; so cid alone is not enough (#3269)\n      ? componentOptions.Ctor.cid + (componentOptions.tag ? &#96;::$&#123;componentOptions.tag&#125;&#96; : &#39;&#39;)\n      : vnode.key\n\n    if (cache[key]) &#123;\n      &#x2F;&#x2F; LRUç¼“å­˜ç­–ç•¥æ‰§è¡Œ\n      vnode.componentInstance &#x3D; cache[key].componentInstance &#x2F;&#x2F; ç»„ä»¶åˆæ¬¡æ¸²æŸ“çš„æ—¶å€™componentInstanceä¸ºundefined\n\n      &#x2F;&#x2F; make current key freshest\n      remove(keys, key)\n      keys.push(key)\n      &#x2F;&#x2F; æ ¹æ®LRUç¼“å­˜ç­–ç•¥æ‰§è¡Œï¼Œå°†keyä»åŸæ¥çš„ä½ç½®ç§»é™¤ï¼Œç„¶åå°†è¿™ä¸ªkeyå€¼æ”¾åˆ°æœ€åé¢\n    &#125; else &#123;\n      &#x2F;&#x2F; åœ¨ç¼“å­˜åˆ—è¡¨é‡Œé¢æ²¡æœ‰çš„è¯ï¼Œåˆ™åŠ å…¥ï¼ŒåŒæ—¶åˆ¤æ–­å½“å‰åŠ å…¥ä¹‹åï¼Œæ˜¯å¦è¶…è¿‡äº†maxæ‰€è®¾å®šçš„èŒƒå›´ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™å»é™¤\n      &#x2F;&#x2F; ä½¿ç”¨æ—¶é—´é—´éš”æœ€é•¿çš„ä¸€ä¸ª\n      cache[key] &#x3D; vnode\n      keys.push(key)\n      &#x2F;&#x2F; prune oldest entry\n      if (this.max &amp;&amp; keys.length &gt; parseInt(this.max)) &#123;\n        pruneCacheEntry(cache, keys[0], keys, this._vnode)\n      &#125;\n    &#125;\n    &#x2F;&#x2F; å°†ç»„ä»¶çš„keepAliveå±æ€§è®¾ç½®ä¸ºtrue\n    vnode.data.keepAlive &#x3D; true &#x2F;&#x2F; ä½œç”¨ï¼šåˆ¤æ–­æ˜¯å¦è¦æ‰§è¡Œç»„ä»¶çš„createdã€mountedç”Ÿå‘½å‘¨æœŸå‡½æ•°\n  &#125;\n  return vnode || (slot &amp;&amp; slot[0])\n&#125;\nå¤åˆ¶ä»£ç \n\nkeep-alive å…·ä½“æ˜¯é€šè¿‡ cache æ•°ç»„ç¼“å­˜æ‰€æœ‰ç»„ä»¶çš„ vnode å®ä¾‹ã€‚å½“ cache å†…åŸæœ‰ç»„ä»¶è¢«ä½¿ç”¨æ—¶ä¼šå°†è¯¥ç»„ä»¶ key ä» keys æ•°ç»„ä¸­åˆ é™¤ï¼Œç„¶å push åˆ° keysæ•°ç»„æœ€åï¼Œä»¥ä¾¿æ¸…é™¤æœ€ä¸å¸¸ç”¨ç»„ä»¶ã€‚\nå®ç°æ­¥éª¤ï¼š\n\nè·å– keep-alive ä¸‹ç¬¬ä¸€ä¸ªå­ç»„ä»¶çš„å®ä¾‹å¯¹è±¡ï¼Œé€šè¿‡ä»–å»è·å–è¿™ä¸ªç»„ä»¶çš„ç»„ä»¶å\né€šè¿‡å½“å‰ç»„ä»¶åå»åŒ¹é…åŸæ¥ include å’Œ excludeï¼Œåˆ¤æ–­å½“å‰ç»„ä»¶æ˜¯å¦éœ€è¦ç¼“å­˜ï¼Œä¸éœ€è¦ç¼“å­˜ï¼Œç›´æ¥è¿”å›å½“å‰ç»„ä»¶çš„å®ä¾‹vNode\néœ€è¦ç¼“å­˜ï¼Œåˆ¤æ–­ä»–å½“å‰æ˜¯å¦åœ¨ç¼“å­˜æ•°ç»„é‡Œé¢ï¼š\n\n\nå­˜åœ¨ï¼Œåˆ™å°†ä»–åŸæ¥ä½ç½®ä¸Šçš„ key ç»™ç§»é™¤ï¼ŒåŒæ—¶å°†è¿™ä¸ªç»„ä»¶çš„ key æ”¾åˆ°æ•°ç»„æœ€åé¢ï¼ˆLRUï¼‰\nä¸å­˜åœ¨ï¼Œå°†ç»„ä»¶ key æ”¾å…¥æ•°ç»„ï¼Œç„¶ååˆ¤æ–­å½“å‰ keyæ•°ç»„æ˜¯å¦è¶…è¿‡ max æ‰€è®¾ç½®çš„èŒƒå›´ï¼Œè¶…è¿‡ï¼Œé‚£ä¹ˆå‰Šå‡æœªä½¿ç”¨æ—¶é—´æœ€é•¿çš„ä¸€ä¸ªç»„ä»¶çš„ key\n\n\næœ€åå°†è¿™ä¸ªç»„ä»¶çš„ keepAlive è®¾ç½®ä¸º true\n\nï¼ˆ3ï¼‰keep-alive æœ¬èº«çš„åˆ›å»ºè¿‡ç¨‹å’Œ patch è¿‡ç¨‹\nç¼“å­˜æ¸²æŸ“çš„æ—¶å€™ï¼Œä¼šæ ¹æ® vnode.componentInstanceï¼ˆé¦–æ¬¡æ¸²æŸ“ vnode.componentInstance ä¸º undefinedï¼‰ å’Œ keepAlive å±æ€§åˆ¤æ–­ä¸ä¼šæ‰§è¡Œç»„ä»¶çš„ createdã€mounted ç­‰é’©å­å‡½æ•°ï¼Œè€Œæ˜¯å¯¹ç¼“å­˜çš„ç»„ä»¶æ‰§è¡Œ patch è¿‡ç¨‹âˆ¶ ç›´æ¥æŠŠç¼“å­˜çš„ DOM å¯¹è±¡ç›´æ¥æ’å…¥åˆ°ç›®æ ‡å…ƒç´ ä¸­ï¼Œå®Œæˆäº†æ•°æ®æ›´æ–°çš„æƒ…å†µä¸‹çš„æ¸²æŸ“è¿‡ç¨‹ã€‚\né¦–æ¬¡æ¸²æŸ“\n\nç»„ä»¶çš„é¦–æ¬¡æ¸²æŸ“âˆ¶åˆ¤æ–­ç»„ä»¶çš„ abstract å±æ€§ï¼Œæ‰å¾€çˆ¶ç»„ä»¶é‡Œé¢æŒ‚è½½ DOM\n\n&#x2F;&#x2F; core&#x2F;instance&#x2F;lifecycle\nfunction initLifecycle (vm: Component) &#123;\n  const options &#x3D; vm.$options\n\n  &#x2F;&#x2F; locate first non-abstract parent\n  let parent &#x3D; options.parent\n  if (parent &amp;&amp; !options.abstract) &#123; &#x2F;&#x2F; åˆ¤æ–­ç»„ä»¶çš„abstractå±æ€§ï¼Œæ‰å¾€çˆ¶ç»„ä»¶é‡Œé¢æŒ‚è½½DOM\n    while (parent.$options.abstract &amp;&amp; parent.$parent) &#123;\n      parent &#x3D; parent.$parent\n    &#125;\n    parent.$children.push(vm)\n  &#125;\n\n  vm.$parent &#x3D; parent\n  vm.$root &#x3D; parent ? parent.$root : vm\n\n  vm.$children &#x3D; []\n  vm.$refs &#x3D; &#123;&#125;\n\n  vm._watcher &#x3D; null\n  vm._inactive &#x3D; null\n  vm._directInactive &#x3D; false\n  vm._isMounted &#x3D; false\n  vm._isDestroyed &#x3D; false\n  vm._isBeingDestroyed &#x3D; false\n&#125;\nå¤åˆ¶ä»£ç \n\n\nåˆ¤æ–­å½“å‰ keepAlive å’Œ componentInstance æ˜¯å¦å­˜åœ¨æ¥åˆ¤æ–­æ˜¯å¦è¦æ‰§è¡Œç»„ä»¶ prepatch è¿˜æ˜¯æ‰§è¡Œåˆ›å»º componentlnstance\n\n&#x2F;&#x2F; core&#x2F;vdom&#x2F;create-component\ninit (vnode: VNodeWithData, hydrating: boolean): ?boolean &#123;\n    if (\n      vnode.componentInstance &amp;&amp;\n      !vnode.componentInstance._isDestroyed &amp;&amp;\n      vnode.data.keepAlive\n    ) &#123; &#x2F;&#x2F; componentInstanceåœ¨åˆæ¬¡æ˜¯undefined!!!\n      &#x2F;&#x2F; kept-alive components, treat as a patch\n      const mountedNode: any &#x3D; vnode &#x2F;&#x2F; work around flow\n      componentVNodeHooks.prepatch(mountedNode, mountedNode) &#x2F;&#x2F; prepatchå‡½æ•°æ‰§è¡Œçš„æ˜¯ç»„ä»¶æ›´æ–°çš„è¿‡ç¨‹\n    &#125; else &#123;\n      const child &#x3D; vnode.componentInstance &#x3D; createComponentInstanceForVnode(\n        vnode,\n        activeInstance\n      )\n      child.$mount(hydrating ? vnode.elm : undefined, hydrating)\n    &#125;\n  &#125;,\nå¤åˆ¶ä»£ç \n\nprepatch æ“ä½œå°±ä¸ä¼šåœ¨æ‰§è¡Œç»„ä»¶çš„ mounted å’Œ created ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œè€Œæ˜¯ç›´æ¥å°† DOM æ’å…¥\nï¼ˆ4ï¼‰LRU ï¼ˆleast recently usedï¼‰ç¼“å­˜ç­–ç•¥\nLRU ç¼“å­˜ç­–ç•¥âˆ¶ ä»å†…å­˜ä¸­æ‰¾å‡ºæœ€ä¹…æœªä½¿ç”¨çš„æ•°æ®å¹¶ç½®æ¢æ–°çš„æ•°æ®ã€‚ LRUï¼ˆLeast rencently usedï¼‰ç®—æ³•æ ¹æ®æ•°æ®çš„å†å²è®¿é—®è®°å½•æ¥è¿›è¡Œæ·˜æ±°æ•°æ®ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯ â€œå¦‚æœæ•°æ®æœ€è¿‘è¢«è®¿é—®è¿‡ï¼Œé‚£ä¹ˆå°†æ¥è¢«è®¿é—®çš„å‡ ç‡ä¹Ÿæ›´é«˜â€ ã€‚ æœ€å¸¸è§çš„å®ç°æ˜¯ä½¿ç”¨ä¸€ä¸ªé“¾è¡¨ä¿å­˜ç¼“å­˜æ•°æ®ï¼Œè¯¦ç»†ç®—æ³•å®ç°å¦‚ä¸‹âˆ¶\n\næ–°æ•°æ®æ’å…¥åˆ°é“¾è¡¨å¤´éƒ¨\næ¯å½“ç¼“å­˜å‘½ä¸­ï¼ˆå³ç¼“å­˜æ•°æ®è¢«è®¿é—®ï¼‰ï¼Œåˆ™å°†æ•°æ®ç§»åˆ°é“¾è¡¨å¤´éƒ¨\né“¾è¡¨æ»¡çš„æ—¶å€™ï¼Œå°†é“¾è¡¨å°¾éƒ¨çš„æ•°æ®ä¸¢å¼ƒã€‚\n\n18. $nextTick åŸç†åŠä½œç”¨Vue çš„ nextTick å…¶æœ¬è´¨æ˜¯å¯¹ JavaScript æ‰§è¡ŒåŸç† EventLoop çš„ä¸€ç§åº”ç”¨ã€‚\nnextTick çš„æ ¸å¿ƒæ˜¯åˆ©ç”¨äº†å¦‚ Promise ã€MutationObserverã€setImmediateã€setTimeoutçš„åŸç”Ÿ JavaScript æ–¹æ³•æ¥æ¨¡æ‹Ÿå¯¹åº”çš„å¾®&#x2F;å®ä»»åŠ¡çš„å®ç°ï¼Œæœ¬è´¨æ˜¯ä¸ºäº†åˆ©ç”¨ JavaScript çš„è¿™äº›å¼‚æ­¥å›è°ƒä»»åŠ¡é˜Ÿåˆ—æ¥å®ç° Vue æ¡†æ¶ä¸­è‡ªå·±çš„å¼‚æ­¥å›è°ƒé˜Ÿåˆ—ã€‚\nnextTick ä¸ä»…æ˜¯ Vue å†…éƒ¨çš„å¼‚æ­¥é˜Ÿåˆ—çš„è°ƒç”¨æ–¹æ³•ï¼ŒåŒæ—¶ä¹Ÿå…è®¸å¼€å‘è€…åœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨è¿™ä¸ªæ–¹æ³•æ¥æ»¡è¶³å®é™…åº”ç”¨ä¸­å¯¹ DOM æ›´æ–°æ•°æ®æ—¶æœºçš„åç»­é€»è¾‘å¤„ç†\nnextTick æ˜¯å…¸å‹çš„å°†åº•å±‚ JavaScript æ‰§è¡ŒåŸç†åº”ç”¨åˆ°å…·ä½“æ¡ˆä¾‹ä¸­çš„ç¤ºä¾‹ï¼Œå¼•å…¥å¼‚æ­¥æ›´æ–°é˜Ÿåˆ—æœºåˆ¶çš„åŸå› âˆ¶\n\nå¦‚æœæ˜¯åŒæ­¥æ›´æ–°ï¼Œåˆ™å¤šæ¬¡å¯¹ä¸€ä¸ªæˆ–å¤šä¸ªå±æ€§èµ‹å€¼ï¼Œä¼šé¢‘ç¹è§¦å‘ UI&#x2F;DOM çš„æ¸²æŸ“ï¼Œå¯ä»¥å‡å°‘ä¸€äº›æ— ç”¨æ¸²æŸ“\nåŒæ—¶ç”±äº VirtualDOM çš„å¼•å…¥ï¼Œæ¯ä¸€æ¬¡çŠ¶æ€å‘ç”Ÿå˜åŒ–åï¼ŒçŠ¶æ€å˜åŒ–çš„ä¿¡å·ä¼šå‘é€ç»™ç»„ä»¶ï¼Œç»„ä»¶å†…éƒ¨ä½¿ç”¨ VirtualDOM è¿›è¡Œè®¡ç®—å¾—å‡ºéœ€è¦æ›´æ–°çš„å…·ä½“çš„ DOM èŠ‚ç‚¹ï¼Œç„¶åå¯¹ DOM è¿›è¡Œæ›´æ–°æ“ä½œï¼Œæ¯æ¬¡æ›´æ–°çŠ¶æ€åçš„æ¸²æŸ“è¿‡ç¨‹éœ€è¦æ›´å¤šçš„è®¡ç®—ï¼Œè€Œè¿™ç§æ— ç”¨åŠŸä¹Ÿå°†æµªè´¹æ›´å¤šçš„æ€§èƒ½ï¼Œæ‰€ä»¥å¼‚æ­¥æ¸²æŸ“å˜å¾—æ›´åŠ è‡³å…³é‡è¦\n\nVueé‡‡ç”¨äº†æ•°æ®é©±åŠ¨è§†å›¾çš„æ€æƒ³ï¼Œä½†æ˜¯åœ¨ä¸€äº›æƒ…å†µä¸‹ï¼Œä»ç„¶éœ€è¦æ“ä½œDOMã€‚æœ‰æ—¶å€™ï¼Œå¯èƒ½é‡åˆ°è¿™æ ·çš„æƒ…å†µï¼ŒDOM1çš„æ•°æ®å‘ç”Ÿäº†å˜åŒ–ï¼Œè€ŒDOM2éœ€è¦ä»DOM1ä¸­è·å–æ•°æ®ï¼Œé‚£è¿™æ—¶å°±ä¼šå‘ç°DOM2çš„è§†å›¾å¹¶æ²¡æœ‰æ›´æ–°ï¼Œè¿™æ—¶å°±éœ€è¦ç”¨åˆ°äº†nextTickäº†ã€‚\nç”±äºVueçš„DOMæ“ä½œæ˜¯å¼‚æ­¥çš„ï¼Œæ‰€ä»¥ï¼Œåœ¨ä¸Šé¢çš„æƒ…å†µä¸­ï¼Œå°±è¦å°†DOM2è·å–æ•°æ®çš„æ“ä½œå†™åœ¨$nextTickä¸­ã€‚\nthis.$nextTick(() &#x3D;&gt; &#123;    &#x2F;&#x2F; è·å–æ•°æ®çš„æ“ä½œ...&#125;)\nå¤åˆ¶ä»£ç \n\næ‰€ä»¥ï¼Œåœ¨ä»¥ä¸‹æƒ…å†µä¸‹ï¼Œä¼šç”¨åˆ°nextTickï¼š\n\nåœ¨æ•°æ®å˜åŒ–åæ‰§è¡Œçš„æŸä¸ªæ“ä½œï¼Œè€Œè¿™ä¸ªæ“ä½œéœ€è¦ä½¿ç”¨éšæ•°æ®å˜åŒ–è€Œå˜åŒ–çš„DOMç»“æ„çš„æ—¶å€™ï¼Œè¿™ä¸ªæ“ä½œå°±éœ€è¦æ–¹æ³•åœ¨nextTick()çš„å›è°ƒå‡½æ•°ä¸­ã€‚\nåœ¨vueç”Ÿå‘½å‘¨æœŸä¸­ï¼Œå¦‚æœåœ¨created()é’©å­è¿›è¡ŒDOMæ“ä½œï¼Œä¹Ÿä¸€å®šè¦æ”¾åœ¨nextTick()çš„å›è°ƒå‡½æ•°ä¸­ã€‚\n\nå› ä¸ºåœ¨created()é’©å­å‡½æ•°ä¸­ï¼Œé¡µé¢çš„DOMè¿˜æœªæ¸²æŸ“ï¼Œè¿™æ—¶å€™ä¹Ÿæ²¡åŠæ³•æ“ä½œDOMï¼Œæ‰€ä»¥ï¼Œæ­¤æ—¶å¦‚æœæƒ³è¦æ“ä½œDOMï¼Œå¿…é¡»å°†æ“ä½œçš„ä»£ç æ”¾åœ¨nextTick()çš„å›è°ƒå‡½æ•°ä¸­ã€‚\n19. Vue ä¸­ç»™ data ä¸­çš„å¯¹è±¡å±æ€§æ·»åŠ ä¸€ä¸ªæ–°çš„å±æ€§æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿ&lt;template&gt; \n   &lt;div&gt;\n      &lt;ul&gt;\n         &lt;li v-for&#x3D;&quot;value in obj&quot; :key&#x3D;&quot;value&quot;&gt; &#123;&#123;value&#125;&#125; &lt;&#x2F;li&gt; \n      &lt;&#x2F;ul&gt; \n      &lt;button @click&#x3D;&quot;addObjB&quot;&gt;æ·»åŠ  obj.b&lt;&#x2F;button&gt; \n   &lt;&#x2F;div&gt;\n&lt;&#x2F;template&gt;\n\n&lt;script&gt;\n    export default &#123; \n       data () &#123; \n          return &#123; \n              obj: &#123; \n                  a: &#39;obj.a&#39; \n              &#125; \n          &#125; \n       &#125;,\n       methods: &#123; \n          addObjB () &#123; \n              this.obj.b &#x3D; &#39;obj.b&#39; \n              console.log(this.obj) \n          &#125; \n      &#125;\n   &#125;\n&lt;&#x2F;script&gt;\nå¤åˆ¶ä»£ç \n\nç‚¹å‡» button ä¼šå‘ç°ï¼Œobj.b å·²ç»æˆåŠŸæ·»åŠ ï¼Œä½†æ˜¯è§†å›¾å¹¶æœªåˆ·æ–°ã€‚è¿™æ˜¯å› ä¸ºåœ¨Vueå®ä¾‹åˆ›å»ºæ—¶ï¼Œobj.bå¹¶æœªå£°æ˜ï¼Œå› æ­¤å°±æ²¡æœ‰è¢«Vueè½¬æ¢ä¸ºå“åº”å¼çš„å±æ€§ï¼Œè‡ªç„¶å°±ä¸ä¼šè§¦å‘è§†å›¾çš„æ›´æ–°ï¼Œè¿™æ—¶å°±éœ€è¦ä½¿ç”¨Vueçš„å…¨å±€ api $set()ï¼š\naddObjB () (\n   this.$set(this.obj, &#39;b&#39;, &#39;obj.b&#39;)\n   console.log(this.obj)\n&#125;\nå¤åˆ¶ä»£ç \n\n$set()æ–¹æ³•ç›¸å½“äºæ‰‹åŠ¨çš„å»æŠŠobj.bå¤„ç†æˆä¸€ä¸ªå“åº”å¼çš„å±æ€§ï¼Œæ­¤æ—¶è§†å›¾ä¹Ÿä¼šè·Ÿç€æ”¹å˜äº†ã€‚\n20. Vueä¸­å°è£…çš„æ•°ç»„æ–¹æ³•æœ‰å“ªäº›ï¼Œå…¶å¦‚ä½•å®ç°é¡µé¢æ›´æ–°åœ¨Vueä¸­ï¼Œå¯¹å“åº”å¼å¤„ç†åˆ©ç”¨çš„æ˜¯Object.definePropertyå¯¹æ•°æ®è¿›è¡Œæ‹¦æˆªï¼Œè€Œè¿™ä¸ªæ–¹æ³•å¹¶ä¸èƒ½ç›‘å¬åˆ°æ•°ç»„å†…éƒ¨å˜åŒ–ï¼Œæ•°ç»„é•¿åº¦å˜åŒ–ï¼Œæ•°ç»„çš„æˆªå–å˜åŒ–ç­‰ï¼Œæ‰€ä»¥éœ€è¦å¯¹è¿™äº›æ“ä½œè¿›è¡Œhackï¼Œè®©Vueèƒ½ç›‘å¬åˆ°å…¶ä¸­çš„å˜åŒ–ã€‚  é‚£Vueæ˜¯å¦‚ä½•å®ç°è®©è¿™äº›æ•°ç»„æ–¹æ³•å®ç°å…ƒç´ çš„å®æ—¶æ›´æ–°çš„å‘¢ï¼Œä¸‹é¢æ˜¯Vueä¸­å¯¹è¿™äº›æ–¹æ³•çš„å°è£…ï¼š\n&#x2F;&#x2F; ç¼“å­˜æ•°ç»„åŸå‹\nconst arrayProto &#x3D; Array.prototype;\n&#x2F;&#x2F; å®ç° arrayMethods.__proto__ &#x3D;&#x3D;&#x3D; Array.prototype\nexport const arrayMethods &#x3D; Object.create(arrayProto);\n&#x2F;&#x2F; éœ€è¦è¿›è¡ŒåŠŸèƒ½æ‹“å±•çš„æ–¹æ³•\nconst methodsToPatch &#x3D; [\n  &quot;push&quot;,\n  &quot;pop&quot;,\n  &quot;shift&quot;,\n  &quot;unshift&quot;,\n  &quot;splice&quot;,\n  &quot;sort&quot;,\n  &quot;reverse&quot;\n];\n\n&#x2F;**\n * Intercept mutating methods and emit events\n *&#x2F;\nmethodsToPatch.forEach(function(method) &#123;\n  &#x2F;&#x2F; ç¼“å­˜åŸç”Ÿæ•°ç»„æ–¹æ³•\n  const original &#x3D; arrayProto[method];\n  def(arrayMethods, method, function mutator(...args) &#123;\n    &#x2F;&#x2F; æ‰§è¡Œå¹¶ç¼“å­˜åŸç”Ÿæ•°ç»„åŠŸèƒ½\n    const result &#x3D; original.apply(this, args);\n    &#x2F;&#x2F; å“åº”å¼å¤„ç†\n    const ob &#x3D; this.__ob__;\n    let inserted;\n    switch (method) &#123;\n    &#x2F;&#x2F; pushã€unshiftä¼šæ–°å¢ç´¢å¼•ï¼Œæ‰€ä»¥è¦æ‰‹åŠ¨observer\n      case &quot;push&quot;:\n      case &quot;unshift&quot;:\n        inserted &#x3D; args;\n        break;\n      &#x2F;&#x2F; spliceæ–¹æ³•ï¼Œå¦‚æœä¼ å…¥äº†ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œä¹Ÿä¼šæœ‰ç´¢å¼•åŠ å…¥ï¼Œä¹Ÿè¦æ‰‹åŠ¨observerã€‚\n      case &quot;splice&quot;:\n        inserted &#x3D; args.slice(2);\n        break;\n    &#125;\n    &#x2F;&#x2F; \n    if (inserted) ob.observeArray(inserted);&#x2F;&#x2F; è·å–æ’å…¥çš„å€¼ï¼Œå¹¶è®¾ç½®å“åº”å¼ç›‘å¬\n    &#x2F;&#x2F; notify change\n    ob.dep.notify();&#x2F;&#x2F; é€šçŸ¥ä¾èµ–æ›´æ–°\n    &#x2F;&#x2F; è¿”å›åŸç”Ÿæ•°ç»„æ–¹æ³•çš„æ‰§è¡Œç»“æœ\n    return result;\n  &#125;);\n&#125;);\nå¤åˆ¶ä»£ç \n\nç®€å•æ¥è¯´å°±æ˜¯ï¼Œé‡å†™äº†æ•°ç»„ä¸­çš„é‚£äº›åŸç”Ÿæ–¹æ³•ï¼Œé¦–å…ˆè·å–åˆ°è¿™ä¸ªæ•°ç»„çš„__ob__ï¼Œä¹Ÿå°±æ˜¯å®ƒçš„Observerå¯¹è±¡ï¼Œå¦‚æœæœ‰æ–°çš„å€¼ï¼Œå°±è°ƒç”¨observeArrayç»§ç»­å¯¹æ–°çš„å€¼è§‚å¯Ÿå˜åŒ–ï¼ˆä¹Ÿå°±æ˜¯é€šè¿‡target__proto__ == arrayMethodsæ¥æ”¹å˜äº†æ•°ç»„å®ä¾‹çš„å‹ï¼‰ï¼Œç„¶åæ‰‹åŠ¨è°ƒç”¨notifyï¼Œé€šçŸ¥æ¸²æŸ“watcherï¼Œæ‰§è¡Œupdateã€‚\n21. Vue å•é¡µåº”ç”¨ä¸å¤šé¡µåº”ç”¨çš„åŒºåˆ«æ¦‚å¿µï¼š\n\nSPAå•é¡µé¢åº”ç”¨ï¼ˆSinglePage Web Applicationï¼‰ï¼ŒæŒ‡åªæœ‰ä¸€ä¸ªä¸»é¡µé¢çš„åº”ç”¨ï¼Œä¸€å¼€å§‹åªéœ€è¦åŠ è½½ä¸€æ¬¡jsã€cssç­‰ç›¸å…³èµ„æºã€‚æ‰€æœ‰å†…å®¹éƒ½åŒ…å«åœ¨ä¸»é¡µé¢ï¼Œå¯¹æ¯ä¸€ä¸ªåŠŸèƒ½æ¨¡å—ç»„ä»¶åŒ–ã€‚å•é¡µåº”ç”¨è·³è½¬ï¼Œå°±æ˜¯åˆ‡æ¢ç›¸å…³ç»„ä»¶ï¼Œä»…ä»…åˆ·æ–°å±€éƒ¨èµ„æºã€‚\nMPAå¤šé¡µé¢åº”ç”¨ ï¼ˆMultiPage Applicationï¼‰ï¼ŒæŒ‡æœ‰å¤šä¸ªç‹¬ç«‹é¡µé¢çš„åº”ç”¨ï¼Œæ¯ä¸ªé¡µé¢å¿…é¡»é‡å¤åŠ è½½jsã€cssç­‰ç›¸å…³èµ„æºã€‚å¤šé¡µåº”ç”¨è·³è½¬ï¼Œéœ€è¦æ•´é¡µèµ„æºåˆ·æ–°ã€‚\n\nåŒºåˆ«ï¼š \n22. Vue template åˆ° render çš„è¿‡ç¨‹vueçš„æ¨¡ç‰ˆç¼–è¯‘è¿‡ç¨‹ä¸»è¦å¦‚ä¸‹ï¼štemplate -&gt; ast -&gt; renderå‡½æ•°\nvue åœ¨æ¨¡ç‰ˆç¼–è¯‘ç‰ˆæœ¬çš„ç ä¸­ä¼šæ‰§è¡Œ compileToFunctions å°†templateè½¬åŒ–ä¸ºrenderå‡½æ•°ï¼š\n&#x2F;&#x2F; å°†æ¨¡æ¿ç¼–è¯‘ä¸ºrenderå‡½æ•°const &#123; render, staticRenderFns &#125; &#x3D; compileToFunctions(template,options&#x2F;&#x2F;çœç•¥&#125;, this)\nå¤åˆ¶ä»£ç \n\nCompileToFunctionsä¸­çš„ä¸»è¦é€»è¾‘å¦‚ä¸‹âˆ¶ ï¼ˆ1ï¼‰è°ƒç”¨parseæ–¹æ³•å°†templateè½¬åŒ–ä¸ºastï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰\nconstast &#x3D; parse(template.trim(), options)\nå¤åˆ¶ä»£ç \n\n\nparseçš„ç›®æ ‡ï¼šæŠŠtamplateè½¬æ¢ä¸ºASTæ ‘ï¼Œå®ƒæ˜¯ä¸€ç§ç”¨ JavaScriptå¯¹è±¡çš„å½¢å¼æ¥æè¿°æ•´ä¸ªæ¨¡æ¿ã€‚\nè§£æè¿‡ç¨‹ï¼šåˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼é¡ºåºè§£ææ¨¡æ¿ï¼Œå½“è§£æåˆ°å¼€å§‹æ ‡ç­¾ã€é—­åˆæ ‡ç­¾ã€æ–‡æœ¬çš„æ—¶å€™éƒ½ä¼šåˆ†åˆ«æ‰§è¡Œå¯¹åº”çš„ å›è°ƒå‡½æ•°ï¼Œæ¥è¾¾åˆ°æ„é€ ASTæ ‘çš„ç›®çš„ã€‚\n\nASTå…ƒç´ èŠ‚ç‚¹æ€»å…±ä¸‰ç§ç±»å‹ï¼štypeä¸º1è¡¨ç¤ºæ™®é€šå…ƒç´ ã€2ä¸ºè¡¨è¾¾å¼ã€3ä¸ºçº¯æ–‡æœ¬\nï¼ˆ2ï¼‰å¯¹é™æ€èŠ‚ç‚¹åšä¼˜åŒ–\noptimize(ast,options)\nå¤åˆ¶ä»£ç \n\nè¿™ä¸ªè¿‡ç¨‹ä¸»è¦åˆ†æå‡ºå“ªäº›æ˜¯é™æ€èŠ‚ç‚¹ï¼Œç»™å…¶æ‰“ä¸€ä¸ªæ ‡è®°ï¼Œä¸ºåç»­æ›´æ–°æ¸²æŸ“å¯ä»¥ç›´æ¥è·³è¿‡é™æ€èŠ‚ç‚¹åšä¼˜åŒ–\næ·±åº¦éå†ASTï¼ŒæŸ¥çœ‹æ¯ä¸ªå­æ ‘çš„èŠ‚ç‚¹å…ƒç´ æ˜¯å¦ä¸ºé™æ€èŠ‚ç‚¹æˆ–è€…é™æ€èŠ‚ç‚¹æ ¹ã€‚å¦‚æœä¸ºé™æ€èŠ‚ç‚¹ï¼Œä»–ä»¬ç”Ÿæˆçš„DOMæ°¸è¿œä¸ä¼šæ”¹å˜ï¼Œè¿™å¯¹è¿è¡Œæ—¶æ¨¡æ¿æ›´æ–°èµ·åˆ°äº†æå¤§çš„ä¼˜åŒ–ä½œç”¨ã€‚\nï¼ˆ3ï¼‰ç”Ÿæˆä»£ç \nconst code &#x3D; generate(ast, options)\nå¤åˆ¶ä»£ç \n\ngenerateå°†astæŠ½è±¡è¯­æ³•æ ‘ç¼–è¯‘æˆ renderå­—ç¬¦ä¸²å¹¶å°†é™æ€éƒ¨åˆ†æ”¾åˆ° staticRenderFns ä¸­ï¼Œæœ€åé€šè¿‡ new Function(`` render``) ç”Ÿæˆrenderå‡½æ•°ã€‚\n23. Vue data ä¸­æŸä¸€ä¸ªå±æ€§çš„å€¼å‘ç”Ÿæ”¹å˜åï¼Œè§†å›¾ä¼šç«‹å³åŒæ­¥æ‰§è¡Œé‡æ–°æ¸²æŸ“å—ï¼Ÿä¸ä¼šç«‹å³åŒæ­¥æ‰§è¡Œé‡æ–°æ¸²æŸ“ã€‚Vue å®ç°å“åº”å¼å¹¶ä¸æ˜¯æ•°æ®å‘ç”Ÿå˜åŒ–ä¹‹å DOM ç«‹å³å˜åŒ–ï¼Œè€Œæ˜¯æŒ‰ä¸€å®šçš„ç­–ç•¥è¿›è¡Œ DOM çš„æ›´æ–°ã€‚Vue åœ¨æ›´æ–° DOM æ—¶æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ã€‚åªè¦ä¾¦å¬åˆ°æ•°æ®å˜åŒ–ï¼Œ Vue å°†å¼€å¯ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå¹¶ç¼“å†²åœ¨åŒä¸€äº‹ä»¶å¾ªç¯ä¸­å‘ç”Ÿçš„æ‰€æœ‰æ•°æ®å˜æ›´ã€‚\nå¦‚æœåŒä¸€ä¸ªwatcherè¢«å¤šæ¬¡è§¦å‘ï¼Œåªä¼šè¢«æ¨å…¥åˆ°é˜Ÿåˆ—ä¸­ä¸€æ¬¡ã€‚è¿™ç§åœ¨ç¼“å†²æ—¶å»é™¤é‡å¤æ•°æ®å¯¹äºé¿å…ä¸å¿…è¦çš„è®¡ç®—å’Œ DOM æ“ä½œæ˜¯éå¸¸é‡è¦çš„ã€‚ç„¶åï¼Œåœ¨ä¸‹ä¸€ä¸ªçš„äº‹ä»¶å¾ªç¯tickä¸­ï¼ŒVue åˆ·æ–°é˜Ÿåˆ—å¹¶æ‰§è¡Œå®é™…ï¼ˆå·²å»é‡çš„ï¼‰å·¥ä½œã€‚\n24. ç®€è¿° mixinã€extends çš„è¦†ç›–é€»è¾‘ï¼ˆ1ï¼‰mixin å’Œ extends mixin å’Œ extendså‡æ˜¯ç”¨äºåˆå¹¶ã€æ‹“å±•ç»„ä»¶çš„ï¼Œä¸¤è€…å‡é€šè¿‡ mergeOptions æ–¹æ³•å®ç°åˆå¹¶ã€‚\n\nmixins æ¥æ”¶ä¸€ä¸ªæ··å…¥å¯¹è±¡çš„æ•°ç»„ï¼Œå…¶ä¸­æ··å…¥å¯¹è±¡å¯ä»¥åƒæ­£å¸¸çš„å®ä¾‹å¯¹è±¡ä¸€æ ·åŒ…å«å®ä¾‹é€‰é¡¹ï¼Œè¿™äº›é€‰é¡¹ä¼šè¢«åˆå¹¶åˆ°æœ€ç»ˆçš„é€‰é¡¹ä¸­ã€‚Mixin é’©å­æŒ‰ç…§ä¼ å…¥é¡ºåºä¾æ¬¡è°ƒç”¨ï¼Œå¹¶åœ¨è°ƒç”¨ç»„ä»¶è‡ªèº«çš„é’©å­ä¹‹å‰è¢«è°ƒç”¨ã€‚\nextends ä¸»è¦æ˜¯ä¸ºäº†ä¾¿äºæ‰©å±•å•æ–‡ä»¶ç»„ä»¶ï¼Œæ¥æ”¶ä¸€ä¸ªå¯¹è±¡æˆ–æ„é€ å‡½æ•°ã€‚\n\n ï¼ˆ2ï¼‰mergeOptions çš„æ‰§è¡Œè¿‡ç¨‹\n\nè§„èŒƒåŒ–é€‰é¡¹ï¼ˆnormalizePropsã€normalizelnjectã€normalizeDirectives)\nå¯¹æœªåˆå¹¶çš„é€‰é¡¹ï¼Œè¿›è¡Œåˆ¤æ–­\n\nif(!child._base) &#123;    if(child.extends) &#123;        parent &#x3D; mergeOptions(parent, child.extends, vm)    &#125;    if(child.mixins) &#123;        for(let i &#x3D; 0, l &#x3D; child.mixins.length; i &lt; l; i++)&#123;            parent &#x3D; mergeOptions(parent, child.mixins[i], vm)        &#125;    &#125;&#125;\nå¤åˆ¶ä»£ç \n\n\nåˆå¹¶å¤„ç†ã€‚æ ¹æ®ä¸€ä¸ªé€šç”¨ Vue å®ä¾‹æ‰€åŒ…å«çš„é€‰é¡¹è¿›è¡Œåˆ†ç±»é€ä¸€åˆ¤æ–­åˆå¹¶ï¼Œå¦‚ propsã€dataã€ methodsã€watchã€computedã€ç”Ÿå‘½å‘¨æœŸç­‰ï¼Œå°†åˆå¹¶ç»“æœå­˜å‚¨åœ¨æ–°å®šä¹‰çš„ options å¯¹è±¡é‡Œã€‚\nè¿”å›åˆå¹¶ç»“æœ optionsã€‚\n\n25. æè¿°ä¸‹Vueè‡ªå®šä¹‰æŒ‡ä»¤åœ¨ Vue2.0 ä¸­ï¼Œä»£ç å¤ç”¨å’ŒæŠ½è±¡çš„ä¸»è¦å½¢å¼æ˜¯ç»„ä»¶ã€‚ç„¶è€Œï¼Œæœ‰çš„æƒ…å†µä¸‹ï¼Œä½ ä»ç„¶éœ€è¦å¯¹æ™®é€š DOM å…ƒç´ è¿›è¡Œåº•å±‚æ“ä½œï¼Œè¿™æ—¶å€™å°±ä¼šç”¨åˆ°è‡ªå®šä¹‰æŒ‡ä»¤ã€‚ ä¸€èˆ¬éœ€è¦å¯¹DOMå…ƒç´ è¿›è¡Œåº•å±‚æ“ä½œæ—¶ä½¿ç”¨ï¼Œå°½é‡åªç”¨æ¥æ“ä½œ DOMå±•ç¤ºï¼Œä¸ä¿®æ”¹å†…éƒ¨çš„å€¼ã€‚å½“ä½¿ç”¨è‡ªå®šä¹‰æŒ‡ä»¤ç›´æ¥ä¿®æ”¹ value å€¼æ—¶ç»‘å®šv-modelçš„å€¼ä¹Ÿä¸ä¼šåŒæ­¥æ›´æ–°ï¼›å¦‚å¿…é¡»ä¿®æ”¹å¯ä»¥åœ¨è‡ªå®šä¹‰æŒ‡ä»¤ä¸­ä½¿ç”¨keydownäº‹ä»¶ï¼Œåœ¨vueç»„ä»¶ä¸­ä½¿ç”¨ changeäº‹ä»¶ï¼Œå›è°ƒä¸­ä¿®æ”¹vueæ•°æ®;\nï¼ˆ1ï¼‰è‡ªå®šä¹‰æŒ‡ä»¤åŸºæœ¬å†…å®¹\n\nå…¨å±€å®šä¹‰ï¼šVue.directive(&quot;focus&quot;,&#123;&#125;)\n\nå±€éƒ¨å®šä¹‰ï¼šdirectives:&#123;focus:&#123;&#125;&#125;\n\né’©å­å‡½æ•°ï¼šæŒ‡ä»¤å®šä¹‰å¯¹è±¡æä¾›é’©å­å‡½æ•°\no bindï¼šåªè°ƒç”¨ä¸€æ¬¡ï¼ŒæŒ‡ä»¤ç¬¬ä¸€æ¬¡ç»‘å®šåˆ°å…ƒç´ æ—¶è°ƒç”¨ã€‚åœ¨è¿™é‡Œå¯ä»¥è¿›è¡Œä¸€æ¬¡æ€§çš„åˆå§‹åŒ–è®¾ç½®ã€‚\no inSertedï¼šè¢«ç»‘å®šå…ƒç´ æ’å…¥çˆ¶èŠ‚ç‚¹æ—¶è°ƒç”¨ï¼ˆä»…ä¿è¯çˆ¶èŠ‚ç‚¹å­˜åœ¨ï¼Œä½†ä¸ä¸€å®šå·²è¢«æ’å…¥æ–‡æ¡£ä¸­ï¼‰ã€‚\no updateï¼šæ‰€åœ¨ç»„ä»¶çš„VNodeæ›´æ–°æ—¶è°ƒç”¨ï¼Œä½†æ˜¯å¯èƒ½å‘ç”Ÿåœ¨å…¶å­VNodeæ›´æ–°ä¹‹å‰è°ƒç”¨ã€‚æŒ‡ä»¤çš„å€¼å¯èƒ½å‘ç”Ÿäº†æ”¹å˜ï¼Œä¹Ÿå¯èƒ½æ²¡æœ‰ã€‚ä½†æ˜¯å¯ä»¥é€šè¿‡æ¯”è¾ƒæ›´æ–°å‰åçš„å€¼æ¥å¿½ç•¥ä¸å¿…è¦çš„æ¨¡æ¿æ›´æ–°ã€‚\no ComponentUpdateï¼šæŒ‡ä»¤æ‰€åœ¨ç»„ä»¶çš„ VNodeåŠå…¶å­VNodeå…¨éƒ¨æ›´æ–°åè°ƒç”¨ã€‚\no unbindï¼šåªè°ƒç”¨ä¸€æ¬¡ï¼ŒæŒ‡ä»¤ä¸å…ƒç´ è§£ç»‘æ—¶è°ƒç”¨ã€‚\n\né’©å­å‡½æ•°å‚æ•° o elï¼šç»‘å®šå…ƒç´ \no bingï¼š æŒ‡ä»¤æ ¸å¿ƒå¯¹è±¡ï¼Œæè¿°æŒ‡ä»¤å…¨éƒ¨ä¿¡æ¯å±æ€§\no name\no value\no oldValue\no expression\no arg\no modifers\no vnode è™šæ‹ŸèŠ‚ç‚¹\no oldVnodeï¼šä¸Šä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼ˆæ›´æ–°é’©å­å‡½æ•°ä¸­æ‰æœ‰ç”¨ï¼‰\n\n\nï¼ˆ2ï¼‰ä½¿ç”¨åœºæ™¯\n\næ™®é€šDOMå…ƒç´ è¿›è¡Œåº•å±‚æ“ä½œçš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰æŒ‡ä»¤\nè‡ªå®šä¹‰æŒ‡ä»¤æ˜¯ç”¨æ¥æ“ä½œDOMçš„ã€‚å°½ç®¡Vueæ¨å´‡æ•°æ®é©±åŠ¨è§†å›¾çš„ç†å¿µï¼Œä½†å¹¶éæ‰€æœ‰æƒ…å†µéƒ½é€‚åˆæ•°æ®é©±åŠ¨ã€‚è‡ªå®šä¹‰æŒ‡ä»¤å°±æ˜¯ä¸€ç§æœ‰æ•ˆçš„è¡¥å……å’Œæ‰©å±•ï¼Œä¸ä»…å¯ç”¨äºå®šä¹‰ä»»ä½•çš„DOMæ“ä½œï¼Œå¹¶ä¸”æ˜¯å¯å¤ç”¨çš„ã€‚\n\nï¼ˆ3ï¼‰ä½¿ç”¨æ¡ˆä¾‹\nåˆçº§åº”ç”¨ï¼š\n\né¼ æ ‡èšç„¦\nä¸‹æ‹‰èœå•\nç›¸å¯¹æ—¶é—´è½¬æ¢\næ»šåŠ¨åŠ¨ç”»\n\né«˜çº§åº”ç”¨ï¼š\n\nè‡ªå®šä¹‰æŒ‡ä»¤å®ç°å›¾ç‰‡æ‡’åŠ è½½\nè‡ªå®šä¹‰æŒ‡ä»¤é›†æˆç¬¬ä¸‰æ–¹æ’ä»¶\n\n26. å­ç»„ä»¶å¯ä»¥ç›´æ¥æ”¹å˜çˆ¶ç»„ä»¶çš„æ•°æ®å—ï¼Ÿå­ç»„ä»¶ä¸å¯ä»¥ç›´æ¥æ”¹å˜çˆ¶ç»„ä»¶çš„æ•°æ®ã€‚è¿™æ ·åšä¸»è¦æ˜¯ä¸ºäº†ç»´æŠ¤çˆ¶å­ç»„ä»¶çš„å•å‘æ•°æ®æµã€‚æ¯æ¬¡çˆ¶çº§ç»„ä»¶å‘ç”Ÿæ›´æ–°æ—¶ï¼Œå­ç»„ä»¶ä¸­æ‰€æœ‰çš„ prop éƒ½å°†ä¼šåˆ·æ–°ä¸ºæœ€æ–°çš„å€¼ã€‚å¦‚æœè¿™æ ·åšäº†ï¼ŒVue ä¼šåœ¨æµè§ˆå™¨çš„æ§åˆ¶å°ä¸­å‘å‡ºè­¦å‘Šã€‚\nVueæå€¡å•å‘æ•°æ®æµï¼Œå³çˆ¶çº§ props çš„æ›´æ–°ä¼šæµå‘å­ç»„ä»¶ï¼Œä½†æ˜¯åè¿‡æ¥åˆ™ä¸è¡Œã€‚è¿™æ˜¯ä¸ºäº†é˜²æ­¢æ„å¤–çš„æ”¹å˜çˆ¶ç»„ä»¶çŠ¶æ€ï¼Œä½¿å¾—åº”ç”¨çš„æ•°æ®æµå˜å¾—éš¾ä»¥ç†è§£ï¼Œå¯¼è‡´æ•°æ®æµæ··ä¹±ã€‚å¦‚æœç ´åäº†å•å‘æ•°æ®æµï¼Œå½“åº”ç”¨å¤æ‚æ—¶ï¼Œdebug çš„æˆæœ¬ä¼šéå¸¸é«˜ã€‚\nåªèƒ½é€šè¿‡ $emit æ´¾å‘ä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶ï¼Œçˆ¶ç»„ä»¶æ¥æ”¶åˆ°åï¼Œç”±çˆ¶ç»„ä»¶ä¿®æ”¹ã€‚\n27. Vueæ˜¯å¦‚ä½•æ”¶é›†ä¾èµ–çš„ï¼Ÿåœ¨åˆå§‹åŒ– Vue çš„æ¯ä¸ªç»„ä»¶æ—¶ï¼Œä¼šå¯¹ç»„ä»¶çš„ data è¿›è¡Œåˆå§‹åŒ–ï¼Œå°±ä¼šå°†ç”±æ™®é€šå¯¹è±¡å˜æˆå“åº”å¼å¯¹è±¡ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¾¿ä¼šè¿›è¡Œä¾èµ–æ”¶é›†çš„ç›¸å…³é€»è¾‘ï¼Œå¦‚ä¸‹æ‰€ç¤ºâˆ¶\nfunction defieneReactive (obj, key, val)&#123;\n  const dep &#x3D; new Dep();\n  ...\n  Object.defineProperty(obj, key, &#123;\n    ...\n    get: function reactiveGetter () &#123;\n      if(Dep.target)&#123;\n        dep.depend();\n        ...\n      &#125;\n      return val\n    &#125;\n    ...\n  &#125;)\n&#125;\nå¤åˆ¶ä»£ç \n\nä»¥ä¸Šåªä¿ç•™äº†å…³é”®ä»£ç ï¼Œä¸»è¦å°±æ˜¯ const dep = new Dep()å®ä¾‹åŒ–ä¸€ä¸ª Dep çš„å®ä¾‹ï¼Œç„¶ååœ¨ get å‡½æ•°ä¸­é€šè¿‡ dep.depend() è¿›è¡Œä¾èµ–æ”¶é›†ã€‚ ï¼ˆ1ï¼‰Dep Depæ˜¯æ•´ä¸ªä¾èµ–æ”¶é›†çš„æ ¸å¿ƒï¼Œå…¶å…³é”®ä»£ç å¦‚ä¸‹ï¼š\nclass Dep &#123;\n  static target;\n  subs;\n\n  constructor () &#123;\n    ...\n    this.subs &#x3D; [];\n  &#125;\n  addSub (sub) &#123;\n    this.subs.push(sub)\n  &#125;\n  removeSub (sub) &#123;\n    remove(this.sub, sub)\n  &#125;\n  depend () &#123;\n    if(Dep.target)&#123;\n      Dep.target.addDep(this)\n    &#125;\n  &#125;\n  notify () &#123;\n    const subs &#x3D; this.subds.slice();\n    for(let i &#x3D; 0;i &lt; subs.length; i++)&#123;\n      subs[i].update()\n    &#125;\n  &#125;\n&#125;\nå¤åˆ¶ä»£ç \n\nDep æ˜¯ä¸€ä¸ª class ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªå…³ é”®çš„é™æ€å±æ€§ staticï¼Œå®ƒæŒ‡å‘äº†ä¸€ä¸ªå…¨å±€å”¯ä¸€ Watcherï¼Œä¿è¯äº†åŒä¸€æ—¶é—´å…¨å±€åªæœ‰ä¸€ä¸ª watcher è¢«è®¡ç®—ï¼Œå¦ä¸€ä¸ªå±æ€§ subs åˆ™æ˜¯ä¸€ä¸ª Watcher çš„æ•°ç»„ï¼Œæ‰€ä»¥ Dep å®é™…ä¸Šå°±æ˜¯å¯¹ Watcher çš„ç®¡ç†ï¼Œå†çœ‹çœ‹ Watcher çš„ç›¸å…³ä»£ç âˆ¶\nï¼ˆ2ï¼‰Watcher\nclass Watcher &#123;\n  getter;\n  ...\n  constructor (vm, expression)&#123;\n    ...\n    this.getter &#x3D; expression;\n    this.get();\n  &#125;\n  get () &#123;\n    pushTarget(this);\n    value &#x3D; this.getter.call(vm, vm)\n    ...\n    return value\n  &#125;\n  addDep (dep)&#123;\n        ...\n    dep.addSub(this)\n  &#125;\n  ...\n&#125;\nfunction pushTarget (_target) &#123;\n  Dep.target &#x3D; _target\n&#125;\nå¤åˆ¶ä»£ç \n\nWatcher æ˜¯ä¸€ä¸ª classï¼Œå®ƒå®šä¹‰äº†ä¸€äº›æ–¹æ³•ï¼Œå…¶ä¸­å’Œä¾èµ–æ”¶é›†ç›¸å…³çš„ä¸»è¦æœ‰ getã€addDep ç­‰ã€‚\nï¼ˆ3ï¼‰è¿‡ç¨‹\nåœ¨å®ä¾‹åŒ– Vue æ—¶ï¼Œä¾èµ–æ”¶é›†çš„ç›¸å…³è¿‡ç¨‹å¦‚ä¸‹âˆ¶ åˆ å§‹ åŒ– çŠ¶ æ€ initState ï¼Œ è¿™ ä¸­ é—´ ä¾¿ ä¼š é€š è¿‡ defineReactive å°†æ•°æ®å˜æˆå“åº”å¼å¯¹è±¡ï¼Œå…¶ä¸­çš„ getter éƒ¨åˆ†ä¾¿æ˜¯ç”¨æ¥ä¾èµ–æ”¶é›†çš„ã€‚ åˆå§‹åŒ–æœ€ç»ˆä¼šèµ° mount è¿‡ç¨‹ï¼Œå…¶ä¸­ä¼šå®ä¾‹åŒ– Watcher ï¼Œè¿›å…¥ Watcher ä¸­ï¼Œä¾¿ä¼šæ‰§è¡Œ this.get() æ–¹æ³•ï¼Œ\nupdateComponent &#x3D; () &#x3D;&gt; &#123;\n  vm._update(vm._render())\n&#125;\nnew Watcher(vm, updateComponent)\nå¤åˆ¶ä»£ç \n\nget æ–¹æ³•ä¸­çš„ pushTarget å®é™…ä¸Šå°±æ˜¯æŠŠ Dep.target èµ‹å€¼ä¸ºå½“å‰çš„ watcherã€‚\nthis.getter.callï¼ˆvmï¼Œvmï¼‰ï¼Œè¿™é‡Œçš„ getter ä¼šæ‰§è¡Œ vm._render() æ–¹æ³•ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¾¿ä¼šè§¦å‘æ•°æ®å¯¹è±¡çš„ getterã€‚é‚£ä¹ˆæ¯ä¸ªå¯¹è±¡å€¼çš„ getter éƒ½æŒæœ‰ä¸€ä¸ª depï¼Œåœ¨è§¦å‘ getter çš„æ—¶å€™ä¼šè°ƒç”¨ dep.depend() æ–¹æ³•ï¼Œä¹Ÿå°±ä¼šæ‰§è¡Œ Dep.target.addDep(this)ã€‚åˆšæ‰ Dep.target å·²ç»è¢«èµ‹å€¼ä¸º watcherï¼Œäºæ˜¯ä¾¿ä¼šæ‰§è¡Œ addDep æ–¹æ³•ï¼Œç„¶åèµ°åˆ° dep.addSub() æ–¹æ³•ï¼Œä¾¿å°†å½“å‰çš„ watcher è®¢é˜…åˆ°è¿™ä¸ªæ•°æ®æŒæœ‰çš„ dep çš„ subs ä¸­ï¼Œè¿™ä¸ªç›®çš„æ˜¯ä¸ºåç»­æ•°æ®å˜åŒ–æ—¶å€™èƒ½é€šçŸ¥åˆ°å“ªäº› subs åšå‡†å¤‡ã€‚æ‰€ä»¥åœ¨ vm._render() è¿‡ç¨‹ä¸­ï¼Œä¼šè§¦å‘æ‰€æœ‰æ•°æ®çš„ getterï¼Œè¿™æ ·ä¾¿å·²ç»å®Œæˆäº†ä¸€ä¸ªä¾èµ–æ”¶é›†çš„è¿‡ç¨‹ã€‚\n28. å¯¹ React å’Œ Vue çš„ç†è§£ï¼Œå®ƒä»¬çš„å¼‚åŒç›¸ä¼¼ä¹‹å¤„ï¼š\n\néƒ½å°†æ³¨æ„åŠ›é›†ä¸­ä¿æŒåœ¨æ ¸å¿ƒåº“ï¼Œè€Œå°†å…¶ä»–åŠŸèƒ½å¦‚è·¯ç”±å’Œå…¨å±€çŠ¶æ€ç®¡ç†äº¤ç»™ç›¸å…³çš„åº“ï¼›\néƒ½æœ‰è‡ªå·±çš„æ„å»ºå·¥å…·ï¼Œèƒ½è®©ä½ å¾—åˆ°ä¸€ä¸ªæ ¹æ®æœ€ä½³å®è·µè®¾ç½®çš„é¡¹ç›®æ¨¡æ¿ï¼›\néƒ½ä½¿ç”¨äº†Virtual DOMï¼ˆè™šæ‹ŸDOMï¼‰æé«˜é‡ç»˜æ€§èƒ½ï¼›\néƒ½æœ‰propsçš„æ¦‚å¿µï¼Œå…è®¸ç»„ä»¶é—´çš„æ•°æ®ä¼ é€’ï¼›\néƒ½é¼“åŠ±ç»„ä»¶åŒ–åº”ç”¨ï¼Œå°†åº”ç”¨åˆ†æ‹†æˆä¸€ä¸ªä¸ªåŠŸèƒ½æ˜ç¡®çš„æ¨¡å—ï¼Œæé«˜å¤ç”¨æ€§ã€‚\n\nä¸åŒä¹‹å¤„ ï¼š\n1ï¼‰æ•°æ®æµ\nVueé»˜è®¤æ”¯æŒæ•°æ®åŒå‘ç»‘å®šï¼Œè€ŒReactä¸€ç›´æå€¡å•å‘æ•°æ®æµ\n2ï¼‰è™šæ‹ŸDOM\nVue2.xå¼€å§‹å¼•å…¥â€Virtual DOMâ€ï¼Œæ¶ˆé™¤äº†å’ŒReactåœ¨è¿™æ–¹é¢çš„å·®å¼‚ï¼Œä½†æ˜¯åœ¨å…·ä½“çš„ç»†èŠ‚è¿˜æ˜¯æœ‰å„è‡ªçš„ç‰¹ç‚¹ã€‚\n\nVueå®£ç§°å¯ä»¥æ›´å¿«åœ°è®¡ç®—å‡ºVirtual DOMçš„å·®å¼‚ï¼Œè¿™æ˜¯ç”±äºå®ƒåœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­ï¼Œä¼šè·Ÿè¸ªæ¯ä¸€ä¸ªç»„ä»¶çš„ä¾èµ–å…³ç³»ï¼Œä¸éœ€è¦é‡æ–°æ¸²æŸ“æ•´ä¸ªç»„ä»¶æ ‘ã€‚\nå¯¹äºReactè€Œè¨€ï¼Œæ¯å½“åº”ç”¨çš„çŠ¶æ€è¢«æ”¹å˜æ—¶ï¼Œå…¨éƒ¨å­ç»„ä»¶éƒ½ä¼šé‡æ–°æ¸²æŸ“ã€‚å½“ç„¶ï¼Œè¿™å¯ä»¥é€šè¿‡ PureComponent&#x2F;shouldComponentUpdateè¿™ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•æ¥è¿›è¡Œæ§åˆ¶ï¼Œä½†Vueå°†æ­¤è§†ä¸ºé»˜è®¤çš„ä¼˜åŒ–ã€‚\n\n3ï¼‰ç»„ä»¶åŒ–\nReactä¸Vueæœ€å¤§çš„ä¸åŒæ˜¯æ¨¡æ¿çš„ç¼–å†™ã€‚\n\nVueé¼“åŠ±å†™è¿‘ä¼¼å¸¸è§„HTMLçš„æ¨¡æ¿ã€‚å†™èµ·æ¥å¾ˆæ¥è¿‘æ ‡å‡† HTMLå…ƒç´ ï¼Œåªæ˜¯å¤šäº†ä¸€äº›å±æ€§ã€‚\nReactæ¨èä½ æ‰€æœ‰çš„æ¨¡æ¿é€šç”¨JavaScriptçš„è¯­æ³•æ‰©å±•â€”â€”JSXä¹¦å†™ã€‚\n\nå…·ä½“æ¥è®²ï¼šReactä¸­renderå‡½æ•°æ˜¯æ”¯æŒé—­åŒ…ç‰¹æ€§çš„ï¼Œæ‰€ä»¥importçš„ç»„ä»¶åœ¨renderä¸­å¯ä»¥ç›´æ¥è°ƒç”¨ã€‚ä½†æ˜¯åœ¨Vueä¸­ï¼Œç”±äºæ¨¡æ¿ä¸­ä½¿ç”¨çš„æ•°æ®éƒ½å¿…é¡»æŒ‚åœ¨ this ä¸Šè¿›è¡Œä¸€æ¬¡ä¸­è½¬ï¼Œæ‰€ä»¥ import ä¸€ä¸ªç»„ä»¶å®Œäº†ä¹‹åï¼Œè¿˜éœ€è¦åœ¨ components ä¸­å†å£°æ˜ä¸‹ã€‚ 4ï¼‰ç›‘å¬æ•°æ®å˜åŒ–çš„å®ç°åŸç†ä¸åŒ\n\nVue é€šè¿‡ getter&#x2F;setter ä»¥åŠä¸€äº›å‡½æ•°çš„åŠ«æŒï¼Œèƒ½ç²¾ç¡®çŸ¥é“æ•°æ®å˜åŒ–ï¼Œä¸éœ€è¦ç‰¹åˆ«çš„ä¼˜åŒ–å°±èƒ½è¾¾åˆ°å¾ˆå¥½çš„æ€§èƒ½\nReact é»˜è®¤æ˜¯é€šè¿‡æ¯”è¾ƒå¼•ç”¨çš„æ–¹å¼è¿›è¡Œçš„ï¼Œå¦‚æœä¸ä¼˜åŒ–ï¼ˆPureComponent&#x2F;shouldComponentUpdateï¼‰å¯èƒ½å¯¼è‡´å¤§é‡ä¸å¿…è¦çš„vDOMçš„é‡æ–°æ¸²æŸ“ã€‚è¿™æ˜¯å› ä¸º Vue ä½¿ç”¨çš„æ˜¯å¯å˜æ•°æ®ï¼Œè€ŒReactæ›´å¼ºè°ƒæ•°æ®çš„ä¸å¯å˜ã€‚\n\n5ï¼‰é«˜é˜¶ç»„ä»¶\nreactå¯ä»¥é€šè¿‡é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰æ¥æ‰©å±•ï¼Œè€ŒVueéœ€è¦é€šè¿‡mixinsæ¥æ‰©å±•ã€‚\né«˜é˜¶ç»„ä»¶å°±æ˜¯é«˜é˜¶å‡½æ•°ï¼Œè€ŒReactçš„ç»„ä»¶æœ¬èº«å°±æ˜¯çº¯ç²¹çš„å‡½æ•°ï¼Œæ‰€ä»¥é«˜é˜¶å‡½æ•°å¯¹Reactæ¥è¯´æ˜“å¦‚åæŒã€‚ç›¸åVue.jsä½¿ç”¨HTMLæ¨¡æ¿åˆ›å»ºè§†å›¾ç»„ä»¶ï¼Œè¿™æ—¶æ¨¡æ¿æ— æ³•æœ‰æ•ˆçš„ç¼–è¯‘ï¼Œå› æ­¤Vueä¸èƒ½é‡‡ç”¨HOCæ¥å®ç°ã€‚\n6ï¼‰æ„å»ºå·¥å…·\nä¸¤è€…éƒ½æœ‰è‡ªå·±çš„æ„å»ºå·¥å…·ï¼š\n\nReact &#x3D;&#x3D;&gt; Create React APP\nVue &#x3D;&#x3D;&gt; vue-cli\n\n7ï¼‰è·¨å¹³å°\n\nReact &#x3D;&#x3D;&gt; React Native\nVue &#x3D;&#x3D;&gt; Weex\n\n29. Vueçš„ä¼˜ç‚¹\nè½»é‡çº§æ¡†æ¶ï¼šåªå…³æ³¨è§†å›¾å±‚ï¼Œæ˜¯ä¸€ä¸ªæ„å»ºæ•°æ®çš„è§†å›¾é›†åˆï¼Œå¤§å°åªæœ‰å‡ å kb ï¼›\nç®€å•æ˜“å­¦ï¼šå›½äººå¼€å‘ï¼Œä¸­æ–‡æ–‡æ¡£ï¼Œä¸å­˜åœ¨è¯­è¨€éšœç¢ ï¼Œæ˜“äºç†è§£å’Œå­¦ä¹ ï¼›\nåŒå‘æ•°æ®ç»‘å®šï¼šä¿ç•™äº† angular çš„ç‰¹ç‚¹ï¼Œåœ¨æ•°æ®æ“ä½œæ–¹é¢æ›´ä¸ºç®€å•ï¼›\nç»„ä»¶åŒ–ï¼šä¿ç•™äº† react çš„ä¼˜ç‚¹ï¼Œå®ç°äº† html çš„å°è£…å’Œé‡ç”¨ï¼Œåœ¨æ„å»ºå•é¡µé¢åº”ç”¨æ–¹é¢æœ‰ç€ç‹¬ç‰¹çš„ä¼˜åŠ¿ï¼›\nè§†å›¾ï¼Œæ•°æ®ï¼Œç»“æ„åˆ†ç¦»ï¼šä½¿æ•°æ®çš„æ›´æ”¹æ›´ä¸ºç®€å•ï¼Œä¸éœ€è¦è¿›è¡Œé€»è¾‘ä»£ç çš„ä¿®æ”¹ï¼Œåªéœ€è¦æ“ä½œæ•°æ®å°±èƒ½å®Œæˆç›¸å…³æ“ä½œï¼›\nè™šæ‹ŸDOMï¼šdom æ“ä½œæ˜¯éå¸¸è€—è´¹æ€§èƒ½çš„ï¼Œä¸å†ä½¿ç”¨åŸç”Ÿçš„ dom æ“ä½œèŠ‚ç‚¹ï¼Œæå¤§è§£æ”¾ dom æ“ä½œï¼Œä½†å…·ä½“æ“ä½œçš„è¿˜æ˜¯ dom ä¸è¿‡æ˜¯æ¢äº†å¦ä¸€ç§æ–¹å¼ï¼›\nè¿è¡Œé€Ÿåº¦æ›´å¿«ï¼šç›¸æ¯”è¾ƒäº react è€Œè¨€ï¼ŒåŒæ ·æ˜¯æ“ä½œè™šæ‹Ÿ domï¼Œå°±æ€§èƒ½è€Œè¨€ï¼Œ vue å­˜åœ¨å¾ˆå¤§çš„ä¼˜åŠ¿ã€‚\n\n30. assetså’Œstaticçš„åŒºåˆ«ç›¸åŒç‚¹ï¼š assets å’Œ static ä¸¤ä¸ªéƒ½æ˜¯å­˜æ”¾é™æ€èµ„æºæ–‡ä»¶ã€‚é¡¹ç›®ä¸­æ‰€éœ€è¦çš„èµ„æºæ–‡ä»¶å›¾ç‰‡ï¼Œå­—ä½“å›¾æ ‡ï¼Œæ ·å¼æ–‡ä»¶ç­‰éƒ½å¯ä»¥æ”¾åœ¨è¿™ä¸¤ä¸ªæ–‡ä»¶ä¸‹ï¼Œè¿™æ˜¯ç›¸åŒç‚¹\nä¸ç›¸åŒç‚¹ï¼š assets ä¸­å­˜æ”¾çš„é™æ€èµ„æºæ–‡ä»¶åœ¨é¡¹ç›®æ‰“åŒ…æ—¶ï¼Œä¹Ÿå°±æ˜¯è¿è¡Œ npm run build æ—¶ä¼šå°† assets ä¸­æ”¾ç½®çš„é™æ€èµ„æºæ–‡ä»¶è¿›è¡Œæ‰“åŒ…ä¸Šä¼ ï¼Œæ‰€è°“æ‰“åŒ…ç®€å•ç‚¹å¯ä»¥ç†è§£ä¸ºå‹ç¼©ä½“ç§¯ï¼Œä»£ç æ ¼å¼åŒ–ã€‚è€Œå‹ç¼©åçš„é™æ€èµ„æºæ–‡ä»¶æœ€ç»ˆä¹Ÿéƒ½ä¼šæ”¾ç½®åœ¨ static æ–‡ä»¶ä¸­è·Ÿç€ index.html ä¸€åŒä¸Šä¼ è‡³æœåŠ¡å™¨ã€‚static ä¸­æ”¾ç½®çš„é™æ€èµ„æºæ–‡ä»¶å°±ä¸ä¼šè¦èµ°æ‰“åŒ…å‹ç¼©æ ¼å¼åŒ–ç­‰æµç¨‹ï¼Œè€Œæ˜¯ç›´æ¥è¿›å…¥æ‰“åŒ…å¥½çš„ç›®å½•ï¼Œç›´æ¥ä¸Šä¼ è‡³æœåŠ¡å™¨ã€‚å› ä¸ºé¿å…äº†å‹ç¼©ç›´æ¥è¿›è¡Œä¸Šä¼ ï¼Œåœ¨æ‰“åŒ…æ—¶ä¼šæé«˜ä¸€å®šçš„æ•ˆç‡ï¼Œä½†æ˜¯ static ä¸­çš„èµ„æºæ–‡ä»¶ç”±äºæ²¡æœ‰è¿›è¡Œå‹ç¼©ç­‰æ“ä½œï¼Œæ‰€ä»¥æ–‡ä»¶çš„ä½“ç§¯ä¹Ÿå°±ç›¸å¯¹äº assets ä¸­æ‰“åŒ…åçš„æ–‡ä»¶æäº¤è¾ƒå¤§ç‚¹ã€‚åœ¨æœåŠ¡å™¨ä¸­å°±ä¼šå æ®æ›´å¤§çš„ç©ºé—´ã€‚\nå»ºè®®ï¼š å°†é¡¹ç›®ä¸­ templateéœ€è¦çš„æ ·å¼æ–‡ä»¶jsæ–‡ä»¶ç­‰éƒ½å¯ä»¥æ”¾ç½®åœ¨ assets ä¸­ï¼Œèµ°æ‰“åŒ…è¿™ä¸€æµç¨‹ã€‚å‡å°‘ä½“ç§¯ã€‚è€Œé¡¹ç›®ä¸­å¼•å…¥çš„ç¬¬ä¸‰æ–¹çš„èµ„æºæ–‡ä»¶å¦‚iconfoont.css ç­‰æ–‡ä»¶å¯ä»¥æ”¾ç½®åœ¨ static ä¸­ï¼Œå› ä¸ºè¿™äº›å¼•å…¥çš„ç¬¬ä¸‰æ–¹æ–‡ä»¶å·²ç»ç»è¿‡å¤„ç†ï¼Œä¸å†éœ€è¦å¤„ç†ï¼Œç›´æ¥ä¸Šä¼ ã€‚\n31. deleteå’ŒVue.deleteåˆ é™¤æ•°ç»„çš„åŒºåˆ«\ndelete åªæ˜¯è¢«åˆ é™¤çš„å…ƒç´ å˜æˆäº† empty/undefined å…¶ä»–çš„å…ƒç´ çš„é”®å€¼è¿˜æ˜¯ä¸å˜ã€‚\nVue.delete ç›´æ¥åˆ é™¤äº†æ•°ç»„ æ”¹å˜äº†æ•°ç»„çš„é”®å€¼ã€‚\n\n32. vueå¦‚ä½•ç›‘å¬å¯¹è±¡æˆ–è€…æ•°ç»„æŸä¸ªå±æ€§çš„å˜åŒ–å½“åœ¨é¡¹ç›®ä¸­ç›´æ¥è®¾ç½®æ•°ç»„çš„æŸä¸€é¡¹çš„å€¼ï¼Œæˆ–è€…ç›´æ¥è®¾ç½®å¯¹è±¡çš„æŸä¸ªå±æ€§å€¼ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œä½ ä¼šå‘ç°é¡µé¢å¹¶æ²¡æœ‰æ›´æ–°ã€‚è¿™æ˜¯å› ä¸ºObject.defineProperty()é™åˆ¶ï¼Œç›‘å¬ä¸åˆ°å˜åŒ–ã€‚\nè§£å†³æ–¹å¼ï¼š\n\nthis.$set(ä½ è¦æ”¹å˜çš„æ•°ç»„&#x2F;å¯¹è±¡ï¼Œä½ è¦æ”¹å˜çš„ä½ç½®&#x2F;keyï¼Œä½ è¦æ”¹æˆä»€ä¹ˆvalue)\n\nthis.$set(this.arr, 0, &quot;OBKoro1&quot;); &#x2F;&#x2F; æ”¹å˜æ•°ç»„this.$set(this.obj, &quot;c&quot;, &quot;OBKoro1&quot;); &#x2F;&#x2F; æ”¹å˜å¯¹è±¡\nå¤åˆ¶ä»£ç \n\n\nè°ƒç”¨ä»¥ä¸‹å‡ ä¸ªæ•°ç»„çš„æ–¹æ³•\n\nsplice()ã€ push()ã€pop()ã€shift()ã€unshift()ã€sort()ã€reverse()\nå¤åˆ¶ä»£ç \n\nvueæºç é‡Œç¼“å­˜äº†arrayçš„åŸå‹é“¾ï¼Œç„¶åé‡å†™äº†è¿™å‡ ä¸ªæ–¹æ³•ï¼Œè§¦å‘è¿™å‡ ä¸ªæ–¹æ³•çš„æ—¶å€™ä¼šobserveræ•°æ®ï¼Œæ„æ€æ˜¯ä½¿ç”¨è¿™äº›æ–¹æ³•ä¸ç”¨å†è¿›è¡Œé¢å¤–çš„æ“ä½œï¼Œè§†å›¾è‡ªåŠ¨è¿›è¡Œæ›´æ–°ã€‚ æ¨èä½¿ç”¨spliceæ–¹æ³•ä¼šæ¯”è¾ƒå¥½è‡ªå®šä¹‰,å› ä¸ºspliceå¯ä»¥åœ¨æ•°ç»„çš„ä»»ä½•ä½ç½®è¿›è¡Œåˆ é™¤&#x2F;æ·»åŠ æ“ä½œ\nvm.$set çš„å®ç°åŸç†æ˜¯ï¼š\n\nå¦‚æœç›®æ ‡æ˜¯æ•°ç»„ï¼Œç›´æ¥ä½¿ç”¨æ•°ç»„çš„ splice æ–¹æ³•è§¦å‘ç›¸åº”å¼ï¼›\nå¦‚æœç›®æ ‡æ˜¯å¯¹è±¡ï¼Œä¼šå…ˆåˆ¤è¯»å±æ€§æ˜¯å¦å­˜åœ¨ã€å¯¹è±¡æ˜¯å¦æ˜¯å“åº”å¼ï¼Œæœ€ç»ˆå¦‚æœè¦å¯¹å±æ€§è¿›è¡Œå“åº”å¼å¤„ç†ï¼Œåˆ™æ˜¯é€šè¿‡è°ƒç”¨ defineReactive æ–¹æ³•è¿›è¡Œå“åº”å¼å¤„ç†ï¼ˆ defineReactive æ–¹æ³•å°±æ˜¯ Vue åœ¨åˆå§‹åŒ–å¯¹è±¡æ—¶ï¼Œç»™å¯¹è±¡å±æ€§é‡‡ç”¨ Object.defineProperty åŠ¨æ€æ·»åŠ  getter å’Œ setter çš„åŠŸèƒ½æ‰€è°ƒç”¨çš„æ–¹æ³•ï¼‰\n\n33. ä»€ä¹ˆæ˜¯ mixin ï¼Ÿ\nMixin ä½¿æˆ‘ä»¬èƒ½å¤Ÿä¸º Vue ç»„ä»¶ç¼–å†™å¯æ’æ‹”å’Œå¯é‡ç”¨çš„åŠŸèƒ½ã€‚\nå¦‚æœå¸Œæœ›åœ¨å¤šä¸ªç»„ä»¶ä¹‹é—´é‡ç”¨ä¸€ç»„ç»„ä»¶é€‰é¡¹ï¼Œä¾‹å¦‚ç”Ÿå‘½å‘¨æœŸ hookã€ æ–¹æ³•ç­‰ï¼Œåˆ™å¯ä»¥å°†å…¶ç¼–å†™ä¸º mixinï¼Œå¹¶åœ¨ç»„ä»¶ä¸­ç®€å•çš„å¼•ç”¨å®ƒã€‚\nç„¶åå°† mixin çš„å†…å®¹åˆå¹¶åˆ°ç»„ä»¶ä¸­ã€‚å¦‚æœä½ è¦åœ¨ mixin ä¸­å®šä¹‰ç”Ÿå‘½å‘¨æœŸ hookï¼Œé‚£ä¹ˆå®ƒåœ¨æ‰§è¡Œæ—¶å°†ä¼˜åŒ–äºç»„ä»¶è‡ªå·²çš„ hookã€‚\n\n34. Vueæ¨¡ç‰ˆç¼–è¯‘åŸç†vueä¸­çš„æ¨¡æ¿templateæ— æ³•è¢«æµè§ˆå™¨è§£æå¹¶æ¸²æŸ“ï¼Œå› ä¸ºè¿™ä¸å±äºæµè§ˆå™¨çš„æ ‡å‡†ï¼Œä¸æ˜¯æ­£ç¡®çš„HTMLè¯­æ³•ï¼Œæ‰€æœ‰éœ€è¦å°†templateè½¬åŒ–æˆä¸€ä¸ªJavaScriptå‡½æ•°ï¼Œè¿™æ ·æµè§ˆå™¨å°±å¯ä»¥æ‰§è¡Œè¿™ä¸€ä¸ªå‡½æ•°å¹¶æ¸²æŸ“å‡ºå¯¹åº”çš„HTMLå…ƒç´ ï¼Œå°±å¯ä»¥è®©è§†å›¾è·‘èµ·æ¥äº†ï¼Œè¿™ä¸€ä¸ªè½¬åŒ–çš„è¿‡ç¨‹ï¼Œå°±æˆä¸ºæ¨¡æ¿ç¼–è¯‘ã€‚æ¨¡æ¿ç¼–è¯‘åˆåˆ†ä¸‰ä¸ªé˜¶æ®µï¼Œè§£æparseï¼Œä¼˜åŒ–optimizeï¼Œç”Ÿæˆgenerateï¼Œæœ€ç»ˆç”Ÿæˆå¯æ‰§è¡Œå‡½æ•°renderã€‚\n\nè§£æé˜¶æ®µï¼šä½¿ç”¨å¤§é‡çš„æ­£åˆ™è¡¨è¾¾å¼å¯¹templateå­—ç¬¦ä¸²è¿›è¡Œè§£æï¼Œå°†æ ‡ç­¾ã€æŒ‡ä»¤ã€å±æ€§ç­‰è½¬åŒ–ä¸ºæŠ½è±¡è¯­æ³•æ ‘ASTã€‚\nä¼˜åŒ–é˜¶æ®µï¼šéå†ASTï¼Œæ‰¾åˆ°å…¶ä¸­çš„ä¸€äº›é™æ€èŠ‚ç‚¹å¹¶è¿›è¡Œæ ‡è®°ï¼Œæ–¹ä¾¿åœ¨é¡µé¢é‡æ¸²æŸ“çš„æ—¶å€™è¿›è¡Œdiffæ¯”è¾ƒæ—¶ï¼Œç›´æ¥è·³è¿‡è¿™ä¸€äº›é™æ€èŠ‚ç‚¹ï¼Œä¼˜åŒ–runtimeçš„æ€§èƒ½ã€‚\nç”Ÿæˆé˜¶æ®µï¼šå°†æœ€ç»ˆçš„ASTè½¬åŒ–ä¸ºrenderå‡½æ•°å­—ç¬¦ä¸²ã€‚\n\n35. å¯¹SSRçš„ç†è§£SSRä¹Ÿå°±æ˜¯æœåŠ¡ç«¯æ¸²æŸ“ï¼Œä¹Ÿå°±æ˜¯å°†Vueåœ¨å®¢æˆ·ç«¯æŠŠæ ‡ç­¾æ¸²æŸ“æˆHTMLçš„å·¥ä½œæ”¾åœ¨æœåŠ¡ç«¯å®Œæˆï¼Œç„¶åå†æŠŠhtmlç›´æ¥è¿”å›ç»™å®¢æˆ·ç«¯\nSSRçš„ä¼˜åŠ¿ï¼š\n\næ›´å¥½çš„SEO\né¦–å±åŠ è½½é€Ÿåº¦æ›´å¿«\n\nSSRçš„ç¼ºç‚¹ï¼š\n\nå¼€å‘æ¡ä»¶ä¼šå—åˆ°é™åˆ¶ï¼ŒæœåŠ¡å™¨ç«¯æ¸²æŸ“åªæ”¯æŒbeforeCreateå’Œcreatedä¸¤ä¸ªé’©å­ï¼›\nå½“éœ€è¦ä¸€äº›å¤–éƒ¨æ‰©å±•åº“æ—¶éœ€è¦ç‰¹æ®Šå¤„ç†ï¼ŒæœåŠ¡ç«¯æ¸²æŸ“åº”ç”¨ç¨‹åºä¹Ÿéœ€è¦å¤„äºNode.jsçš„è¿è¡Œç¯å¢ƒï¼›\næ›´å¤šçš„æœåŠ¡ç«¯è´Ÿè½½ã€‚\n\n36. Vueçš„æ€§èƒ½ä¼˜åŒ–æœ‰å“ªäº›ï¼ˆ1ï¼‰ç¼–ç é˜¶æ®µ\n\nå°½é‡å‡å°‘dataä¸­çš„æ•°æ®ï¼Œdataä¸­çš„æ•°æ®éƒ½ä¼šå¢åŠ getterå’Œsetterï¼Œä¼šæ”¶é›†å¯¹åº”çš„watcher\nv-ifå’Œv-forä¸èƒ½è¿ç”¨\nå¦‚æœéœ€è¦ä½¿ç”¨v-forç»™æ¯é¡¹å…ƒç´ ç»‘å®šäº‹ä»¶æ—¶ä½¿ç”¨äº‹ä»¶ä»£ç†\nSPA é¡µé¢é‡‡ç”¨keep-aliveç¼“å­˜ç»„ä»¶\nåœ¨æ›´å¤šçš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨v-ifæ›¿ä»£v-show\nkeyä¿è¯å”¯ä¸€\nä½¿ç”¨è·¯ç”±æ‡’åŠ è½½ã€å¼‚æ­¥ç»„ä»¶\né˜²æŠ–ã€èŠ‚æµ\nç¬¬ä¸‰æ–¹æ¨¡å—æŒ‰éœ€å¯¼å…¥\né•¿åˆ—è¡¨æ»šåŠ¨åˆ°å¯è§†åŒºåŸŸåŠ¨æ€åŠ è½½\nå›¾ç‰‡æ‡’åŠ è½½\n\nï¼ˆ2ï¼‰SEOä¼˜åŒ–\n\né¢„æ¸²æŸ“\næœåŠ¡ç«¯æ¸²æŸ“SSR\n\nï¼ˆ3ï¼‰æ‰“åŒ…ä¼˜åŒ–\n\nå‹ç¼©ä»£ç \nTree Shaking&#x2F;Scope Hoisting\nä½¿ç”¨cdnåŠ è½½ç¬¬ä¸‰æ–¹æ¨¡å—\nå¤šçº¿ç¨‹æ‰“åŒ…happypack\nsplitChunksæŠ½ç¦»å…¬å…±æ–‡ä»¶\nsourceMapä¼˜åŒ–\n\nï¼ˆ4ï¼‰ç”¨æˆ·ä½“éªŒ\n\néª¨æ¶å±\nPWA\nè¿˜å¯ä»¥ä½¿ç”¨ç¼“å­˜(å®¢æˆ·ç«¯ç¼“å­˜ã€æœåŠ¡ç«¯ç¼“å­˜)ä¼˜åŒ–ã€æœåŠ¡ç«¯å¼€å¯gzipå‹ç¼©ç­‰ã€‚\n\n37. å¯¹ SPA å•é¡µé¢çš„ç†è§£ï¼Œå®ƒçš„ä¼˜ç¼ºç‚¹åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼ŸSPAï¼ˆ single-page application ï¼‰ä»…åœ¨ Web é¡µé¢åˆå§‹åŒ–æ—¶åŠ è½½ç›¸åº”çš„ HTMLã€JavaScript å’Œ CSSã€‚ä¸€æ—¦é¡µé¢åŠ è½½å®Œæˆï¼ŒSPA ä¸ä¼šå› ä¸ºç”¨æˆ·çš„æ“ä½œè€Œè¿›è¡Œé¡µé¢çš„é‡æ–°åŠ è½½æˆ–è·³è½¬ï¼›å–è€Œä»£ä¹‹çš„æ˜¯åˆ©ç”¨è·¯ç”±æœºåˆ¶å®ç° HTML å†…å®¹çš„å˜æ¢ï¼ŒUI ä¸ç”¨æˆ·çš„äº¤äº’ï¼Œé¿å…é¡µé¢çš„é‡æ–°åŠ è½½ã€‚\nä¼˜ç‚¹ï¼š\n\nç”¨æˆ·ä½“éªŒå¥½ã€å¿«ï¼Œå†…å®¹çš„æ”¹å˜ä¸éœ€è¦é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢ï¼Œé¿å…äº†ä¸å¿…è¦çš„è·³è½¬å’Œé‡å¤æ¸²æŸ“ï¼›\nåŸºäºä¸Šé¢ä¸€ç‚¹ï¼ŒSPA ç›¸å¯¹å¯¹æœåŠ¡å™¨å‹åŠ›å°ï¼›\nå‰åç«¯èŒè´£åˆ†ç¦»ï¼Œæ¶æ„æ¸…æ™°ï¼Œå‰ç«¯è¿›è¡Œäº¤äº’é€»è¾‘ï¼Œåç«¯è´Ÿè´£æ•°æ®å¤„ç†ï¼›\n\nç¼ºç‚¹ï¼š\n\nåˆæ¬¡åŠ è½½è€—æ—¶å¤šï¼šä¸ºå®ç°å•é¡µ Web åº”ç”¨åŠŸèƒ½åŠæ˜¾ç¤ºæ•ˆæœï¼Œéœ€è¦åœ¨åŠ è½½é¡µé¢çš„æ—¶å€™å°† JavaScriptã€CSS ç»Ÿä¸€åŠ è½½ï¼Œéƒ¨åˆ†é¡µé¢æŒ‰éœ€åŠ è½½ï¼›\nå‰è¿›åé€€è·¯ç”±ç®¡ç†ï¼šç”±äºå•é¡µåº”ç”¨åœ¨ä¸€ä¸ªé¡µé¢ä¸­æ˜¾ç¤ºæ‰€æœ‰çš„å†…å®¹ï¼Œæ‰€ä»¥ä¸èƒ½ä½¿ç”¨æµè§ˆå™¨çš„å‰è¿›åé€€åŠŸèƒ½ï¼Œæ‰€æœ‰çš„é¡µé¢åˆ‡æ¢éœ€è¦è‡ªå·±å»ºç«‹å †æ ˆç®¡ç†ï¼›\nSEO éš¾åº¦è¾ƒå¤§ï¼šç”±äºæ‰€æœ‰çš„å†…å®¹éƒ½åœ¨ä¸€ä¸ªé¡µé¢ä¸­åŠ¨æ€æ›¿æ¢æ˜¾ç¤ºï¼Œæ‰€ä»¥åœ¨ SEO ä¸Šå…¶æœ‰ç€å¤©ç„¶çš„å¼±åŠ¿ã€‚\n\n38. templateå’Œjsxçš„æœ‰ä»€ä¹ˆåˆ†åˆ«ï¼Ÿå¯¹äº runtime æ¥è¯´ï¼Œåªéœ€è¦ä¿è¯ç»„ä»¶å­˜åœ¨ render å‡½æ•°å³å¯ï¼Œè€Œæœ‰äº†é¢„ç¼–è¯‘ä¹‹åï¼Œåªéœ€è¦ä¿è¯æ„å»ºè¿‡ç¨‹ä¸­ç”Ÿæˆ render å‡½æ•°å°±å¯ä»¥ã€‚åœ¨ webpack ä¸­ï¼Œä½¿ç”¨vue-loaderç¼–è¯‘.vueæ–‡ä»¶ï¼Œå†…éƒ¨ä¾èµ–çš„vue-template-compileræ¨¡å—ï¼Œåœ¨ webpack æ„å»ºè¿‡ç¨‹ä¸­ï¼Œå°†templateé¢„ç¼–è¯‘æˆ render å‡½æ•°ã€‚ä¸ react ç±»ä¼¼ï¼Œåœ¨æ·»åŠ äº†jsxçš„è¯­æ³•ç³–è§£æå™¨babel-plugin-transform-vue-jsxä¹‹åï¼Œå°±å¯ä»¥ç›´æ¥æ‰‹å†™renderå‡½æ•°ã€‚\næ‰€ä»¥ï¼Œtemplateå’Œjsxçš„éƒ½æ˜¯renderçš„ä¸€ç§è¡¨ç°å½¢å¼ï¼Œä¸åŒçš„æ˜¯ï¼šJSXç›¸å¯¹äºtemplateè€Œè¨€ï¼Œå…·æœ‰æ›´é«˜çš„çµæ´»æ€§ï¼Œåœ¨å¤æ‚çš„ç»„ä»¶ä¸­ï¼Œæ›´å…·æœ‰ä¼˜åŠ¿ï¼Œè€Œ template è™½ç„¶æ˜¾å¾—æœ‰äº›å‘†æ»ã€‚ä½†æ˜¯ template åœ¨ä»£ç ç»“æ„ä¸Šæ›´ç¬¦åˆè§†å›¾ä¸é€»è¾‘åˆ†ç¦»çš„ä¹ æƒ¯ï¼Œæ›´ç®€å•ã€æ›´ç›´è§‚ã€æ›´å¥½ç»´æŠ¤ã€‚\n39. vueåˆå§‹åŒ–é¡µé¢é—ªåŠ¨é—®é¢˜ä½¿ç”¨vueå¼€å‘æ—¶ï¼Œåœ¨vueåˆå§‹åŒ–ä¹‹å‰ï¼Œç”±äºdivæ˜¯ä¸å½’vueç®¡çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å†™çš„ä»£ç åœ¨è¿˜æ²¡æœ‰è§£æçš„æƒ…å†µä¸‹ä¼šå®¹æ˜“å‡ºç°èŠ±å±ç°è±¡ï¼Œçœ‹åˆ°ç±»ä¼¼äºçš„å­—æ ·ï¼Œè™½ç„¶ä¸€èˆ¬æƒ…å†µä¸‹è¿™ä¸ªæ—¶é—´å¾ˆçŸ­æš‚ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰å¿…è¦è®©è§£å†³è¿™ä¸ªé—®é¢˜çš„ã€‚\né¦–å…ˆï¼šåœ¨cssé‡ŒåŠ ä¸Šä»¥ä¸‹ä»£ç ï¼š\n[v-cloak] &#123;    display: none;&#125;\nå¤åˆ¶ä»£ç \n\nå¦‚æœæ²¡æœ‰å½»åº•è§£å†³é—®é¢˜ï¼Œåˆ™åœ¨æ ¹å…ƒç´ åŠ ä¸Šstyle=&quot;display: none;&quot; :style=&quot;&#123;display: &#39;block&#39;&#125;&quot;\n40. extend æœ‰ä»€ä¹ˆä½œç”¨è¿™ä¸ª API å¾ˆå°‘ç”¨åˆ°ï¼Œä½œç”¨æ˜¯æ‰©å±•ç»„ä»¶ç”Ÿæˆä¸€ä¸ªæ„é€ å™¨ï¼Œé€šå¸¸ä¼šä¸ $mount ä¸€èµ·ä½¿ç”¨ã€‚\n&#x2F;&#x2F; åˆ›å»ºç»„ä»¶æ„é€ å™¨let Component &#x3D; Vue.extend(&#123;  template: &#39;&lt;div&gt;test&lt;&#x2F;div&gt;&#39;&#125;)&#x2F;&#x2F; æŒ‚è½½åˆ° #app ä¸Šnew Component().$mount(&#39;#app&#39;)&#x2F;&#x2F; é™¤äº†ä¸Šé¢çš„æ–¹å¼ï¼Œè¿˜å¯ä»¥ç”¨æ¥æ‰©å±•å·²æœ‰çš„ç»„ä»¶let SuperComponent &#x3D; Vue.extend(Component)new SuperComponent(&#123;    created() &#123;        console.log(1)    &#125;&#125;)new SuperComponent().$mount(&#39;#app&#39;)\nå¤åˆ¶ä»£ç \n\n42. MVVMçš„ä¼˜ç¼ºç‚¹?ä¼˜ç‚¹:\n\nåˆ†ç¦»è§†å›¾ï¼ˆViewï¼‰å’Œæ¨¡å‹ï¼ˆModelï¼‰ï¼Œé™ä½ä»£ç è€¦åˆï¼Œæâ¾¼è§†å›¾æˆ–è€…é€»è¾‘çš„é‡â½¤æ€§: â½å¦‚è§†å›¾ï¼ˆViewï¼‰å¯ä»¥ç‹¬â½´äºModelå˜åŒ–å’Œä¿®æ”¹ï¼Œâ¼€ä¸ªViewModelå¯ä»¥ç»‘å®šä¸åŒçš„â€Viewâ€ä¸Šï¼Œå½“Viewå˜åŒ–çš„æ—¶å€™Modelä¸å¯ä»¥ä¸å˜ï¼Œå½“Modelå˜åŒ–çš„æ—¶å€™Viewä¹Ÿå¯ä»¥ä¸å˜ã€‚ä½ å¯ä»¥æŠŠâ¼€äº›è§†å›¾é€»è¾‘æ”¾åœ¨â¼€ä¸ªViewModelâ¾¥â¾¯ï¼Œè®©å¾ˆå¤šviewé‡â½¤è¿™æ®µè§†å›¾é€»è¾‘\næâ¾¼å¯æµ‹è¯•æ€§: ViewModelçš„å­˜åœ¨å¯ä»¥å¸®åŠ©å¼€å‘è€…æ›´å¥½åœ°ç¼–å†™æµ‹è¯•ä»£ç \nâ¾ƒåŠ¨æ›´æ–°dom: åˆ©â½¤åŒå‘ç»‘å®š,æ•°æ®æ›´æ–°åè§†å›¾â¾ƒåŠ¨æ›´æ–°,è®©å¼€å‘è€…ä»ç¹ççš„â¼¿åŠ¨domä¸­è§£æ”¾\n\nç¼ºç‚¹:\n\nBugå¾ˆéš¾è¢«è°ƒè¯•: å› ä¸ºä½¿â½¤åŒå‘ç»‘å®šçš„æ¨¡å¼ï¼Œå½“ä½ çœ‹åˆ°ç•Œâ¾¯å¼‚å¸¸äº†ï¼Œæœ‰å¯èƒ½æ˜¯ä½ Viewçš„ä»£ç æœ‰Bugï¼Œä¹Ÿå¯èƒ½æ˜¯Modelçš„ä»£ç æœ‰é—®é¢˜ã€‚æ•°æ®ç»‘å®šä½¿å¾—â¼€ä¸ªä½ç½®çš„Bugè¢«å¿«é€Ÿä¼ é€’åˆ°åˆ«çš„ä½ç½®ï¼Œè¦å®šä½åŸå§‹å‡ºé—®é¢˜çš„åœ°â½…å°±å˜å¾—ä¸é‚£ä¹ˆå®¹æ˜“äº†ã€‚å¦å¤–ï¼Œæ•°æ®ç»‘å®šçš„å£°æ˜æ˜¯æŒ‡ä»¤å¼åœ°å†™åœ¨Viewçš„æ¨¡ç‰ˆå½“ä¸­çš„ï¼Œè¿™äº›å†…å®¹æ˜¯æ²¡åŠæ³•å»æ‰“æ–­ç‚¹debugçš„\nâ¼€ä¸ªâ¼¤çš„æ¨¡å—ä¸­modelä¹Ÿä¼šå¾ˆâ¼¤ï¼Œè™½ç„¶ä½¿â½¤â½…ä¾¿äº†ä¹Ÿå¾ˆå®¹æ˜“ä¿è¯äº†æ•°æ®çš„â¼€è‡´æ€§ï¼Œå½“æ—¶â»“æœŸæŒæœ‰ï¼Œä¸é‡Šæ”¾å†…å­˜å°±é€ æˆäº†èŠ±è´¹æ›´å¤šçš„å†…å­˜\nå¯¹äºâ¼¤å‹çš„å›¾å½¢åº”â½¤ç¨‹åºï¼Œè§†å›¾çŠ¶æ€è¾ƒå¤šï¼ŒViewModelçš„æ„å»ºå’Œç»´æŠ¤çš„æˆæœ¬éƒ½ä¼šâ½è¾ƒâ¾¼ã€‚\n\näºŒã€ç”Ÿå‘½å‘¨æœŸ1. è¯´ä¸€ä¸‹Vueçš„ç”Ÿå‘½å‘¨æœŸVue å®ä¾‹æœ‰â¼€ä¸ªå®Œæ•´çš„â½£å‘½å‘¨æœŸï¼Œä¹Ÿå°±æ˜¯ä»å¼€å§‹åˆ›å»ºã€åˆå§‹åŒ–æ•°æ®ã€ç¼–è¯‘æ¨¡ç‰ˆã€æŒ‚è½½Dom -&gt; æ¸²æŸ“ã€æ›´æ–° -&gt; æ¸²æŸ“ã€å¸è½½ ç­‰â¼€ç³»åˆ—è¿‡ç¨‹ï¼Œç§°è¿™æ˜¯Vueçš„â½£å‘½å‘¨æœŸã€‚\n\nbeforeCreateï¼ˆåˆ›å»ºå‰ï¼‰ ï¼šæ•°æ®è§‚æµ‹å’Œåˆå§‹åŒ–äº‹ä»¶è¿˜æœªå¼€å§‹ï¼Œæ­¤æ—¶ data çš„å“åº”å¼è¿½è¸ªã€event&#x2F;watcher éƒ½è¿˜æ²¡æœ‰è¢«è®¾ç½®ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸èƒ½è®¿é—®åˆ°dataã€computedã€watchã€methodsä¸Šçš„æ–¹æ³•å’Œæ•°æ®ã€‚\ncreatedï¼ˆåˆ›å»ºåï¼‰ ï¼šå®ä¾‹åˆ›å»ºå®Œæˆï¼Œå®ä¾‹ä¸Šé…ç½®çš„ options åŒ…æ‹¬ dataã€computedã€watchã€methods ç­‰éƒ½é…ç½®å®Œæˆï¼Œä½†æ˜¯æ­¤æ—¶æ¸²æŸ“å¾—èŠ‚ç‚¹è¿˜æœªæŒ‚è½½åˆ° DOMï¼Œæ‰€ä»¥ä¸èƒ½è®¿é—®åˆ° $el å±æ€§ã€‚\nbeforeMountï¼ˆæŒ‚è½½å‰ï¼‰ ï¼šåœ¨æŒ‚è½½å¼€å§‹ä¹‹å‰è¢«è°ƒç”¨ï¼Œç›¸å…³çš„renderå‡½æ•°é¦–æ¬¡è¢«è°ƒç”¨ã€‚å®ä¾‹å·²å®Œæˆä»¥ä¸‹çš„é…ç½®ï¼šç¼–è¯‘æ¨¡æ¿ï¼ŒæŠŠdataé‡Œé¢çš„æ•°æ®å’Œæ¨¡æ¿ç”Ÿæˆhtmlã€‚æ­¤æ—¶è¿˜æ²¡æœ‰æŒ‚è½½htmlåˆ°é¡µé¢ä¸Šã€‚\nmountedï¼ˆæŒ‚è½½åï¼‰ ï¼šåœ¨elè¢«æ–°åˆ›å»ºçš„ vm.$el æ›¿æ¢ï¼Œå¹¶æŒ‚è½½åˆ°å®ä¾‹ä¸Šå»ä¹‹åè°ƒç”¨ã€‚å®ä¾‹å·²å®Œæˆä»¥ä¸‹çš„é…ç½®ï¼šç”¨ä¸Šé¢ç¼–è¯‘å¥½çš„htmlå†…å®¹æ›¿æ¢elå±æ€§æŒ‡å‘çš„DOMå¯¹è±¡ã€‚å®Œæˆæ¨¡æ¿ä¸­çš„htmlæ¸²æŸ“åˆ°html é¡µé¢ä¸­ã€‚æ­¤è¿‡ç¨‹ä¸­è¿›è¡Œajaxäº¤äº’ã€‚\nbeforeUpdateï¼ˆæ›´æ–°å‰ï¼‰ ï¼šå“åº”å¼æ•°æ®æ›´æ–°æ—¶è°ƒç”¨ï¼Œæ­¤æ—¶è™½ç„¶å“åº”å¼æ•°æ®æ›´æ–°äº†ï¼Œä½†æ˜¯å¯¹åº”çš„çœŸå® DOM è¿˜æ²¡æœ‰è¢«æ¸²æŸ“ã€‚\nupdatedï¼ˆæ›´æ–°åï¼‰ ï¼šåœ¨ç”±äºæ•°æ®æ›´æ”¹å¯¼è‡´çš„è™šæ‹ŸDOMé‡æ–°æ¸²æŸ“å’Œæ‰“è¡¥ä¸ä¹‹åè°ƒç”¨ã€‚æ­¤æ—¶ DOM å·²ç»æ ¹æ®å“åº”å¼æ•°æ®çš„å˜åŒ–æ›´æ–°äº†ã€‚è°ƒç”¨æ—¶ï¼Œç»„ä»¶ DOMå·²ç»æ›´æ–°ï¼Œæ‰€ä»¥å¯ä»¥æ‰§è¡Œä¾èµ–äºDOMçš„æ“ä½œã€‚ç„¶è€Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåº”è¯¥é¿å…åœ¨æ­¤æœŸé—´æ›´æ”¹çŠ¶æ€ï¼Œå› ä¸ºè¿™å¯èƒ½ä¼šå¯¼è‡´æ›´æ–°æ— é™å¾ªç¯ã€‚è¯¥é’©å­åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“æœŸé—´ä¸è¢«è°ƒç”¨ã€‚\nbeforeDestroyï¼ˆé”€æ¯å‰ï¼‰ ï¼šå®ä¾‹é”€æ¯ä¹‹å‰è°ƒç”¨ã€‚è¿™ä¸€æ­¥ï¼Œå®ä¾‹ä»ç„¶å®Œå…¨å¯ç”¨ï¼Œthis ä»èƒ½è·å–åˆ°å®ä¾‹ã€‚\ndestroyedï¼ˆé”€æ¯åï¼‰ ï¼šå®ä¾‹é”€æ¯åè°ƒç”¨ï¼Œè°ƒç”¨åï¼ŒVue å®ä¾‹æŒ‡ç¤ºçš„æ‰€æœ‰ä¸œè¥¿éƒ½ä¼šè§£ç»‘å®šï¼Œæ‰€æœ‰çš„äº‹ä»¶ç›‘å¬å™¨ä¼šè¢«ç§»é™¤ï¼Œæ‰€æœ‰çš„å­å®ä¾‹ä¹Ÿä¼šè¢«é”€æ¯ã€‚è¯¥é’©å­åœ¨æœåŠ¡ç«¯æ¸²æŸ“æœŸé—´ä¸è¢«è°ƒç”¨ã€‚\n\nå¦å¤–è¿˜æœ‰Â keep-aliveÂ ç‹¬æœ‰çš„ç”Ÿå‘½å‘¨æœŸï¼Œåˆ†åˆ«ä¸ºÂ activatedÂ å’ŒÂ deactivatedÂ ã€‚ç”¨Â keep-aliveÂ åŒ…è£¹çš„ç»„ä»¶åœ¨åˆ‡æ¢æ—¶ä¸ä¼šè¿›è¡Œé”€æ¯ï¼Œè€Œæ˜¯ç¼“å­˜åˆ°å†…å­˜ä¸­å¹¶æ‰§è¡ŒÂ deactivatedÂ é’©å­å‡½æ•°ï¼Œå‘½ä¸­ç¼“å­˜æ¸²æŸ“åä¼šæ‰§è¡ŒÂ activatedÂ é’©å­å‡½æ•°ã€‚\n2. Vue å­ç»„ä»¶å’Œçˆ¶ç»„ä»¶æ‰§è¡Œé¡ºåºåŠ è½½æ¸²æŸ“è¿‡ç¨‹ï¼š\n\nçˆ¶ç»„ä»¶ beforeCreate\nçˆ¶ç»„ä»¶ created\nçˆ¶ç»„ä»¶ beforeMount\nå­ç»„ä»¶ beforeCreate\nå­ç»„ä»¶ created\nå­ç»„ä»¶ beforeMount\nå­ç»„ä»¶ mounted\nçˆ¶ç»„ä»¶ mounted\n\næ›´æ–°è¿‡ç¨‹ï¼š\n\nçˆ¶ç»„ä»¶ beforeUpdate\nå­ç»„ä»¶ beforeUpdate\nå­ç»„ä»¶ updated\nçˆ¶ç»„ä»¶ updated\n\né”€æ¯è¿‡ç¨‹ï¼š\n\nçˆ¶ç»„ä»¶ beforeDestroy\nå­ç»„ä»¶ beforeDestroy\nå­ç»„ä»¶ destroyed\nçˆ¶ç»„ä»¶ destoryed\n\n3. createdå’Œmountedçš„åŒºåˆ«\ncreated:åœ¨æ¨¡æ¿æ¸²æŸ“æˆhtmlå‰è°ƒç”¨ï¼Œå³é€šå¸¸åˆå§‹åŒ–æŸäº›å±æ€§å€¼ï¼Œç„¶åå†æ¸²æŸ“æˆè§†å›¾ã€‚\nmounted:åœ¨æ¨¡æ¿æ¸²æŸ“æˆhtmlåè°ƒç”¨ï¼Œé€šå¸¸æ˜¯åˆå§‹åŒ–é¡µé¢å®Œæˆåï¼Œå†å¯¹htmlçš„domèŠ‚ç‚¹è¿›è¡Œä¸€äº›éœ€è¦çš„æ“ä½œã€‚\n\n4. ä¸€èˆ¬åœ¨å“ªä¸ªç”Ÿå‘½å‘¨æœŸè¯·æ±‚å¼‚æ­¥æ•°æ®æˆ‘ä»¬å¯ä»¥åœ¨é’©å­å‡½æ•° createdã€beforeMountã€mounted ä¸­è¿›è¡Œè°ƒç”¨ï¼Œå› ä¸ºåœ¨è¿™ä¸‰ä¸ªé’©å­å‡½æ•°ä¸­ï¼Œdata å·²ç»åˆ›å»ºï¼Œå¯ä»¥å°†æœåŠ¡ç«¯ç«¯è¿”å›çš„æ•°æ®è¿›è¡Œèµ‹å€¼ã€‚ â€‹\næ¨èåœ¨ created é’©å­å‡½æ•°ä¸­è°ƒç”¨å¼‚æ­¥è¯·æ±‚ï¼Œå› ä¸ºåœ¨ created é’©å­å‡½æ•°ä¸­è°ƒç”¨å¼‚æ­¥è¯·æ±‚æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š\n\nèƒ½æ›´å¿«è·å–åˆ°æœåŠ¡ç«¯æ•°æ®ï¼Œå‡å°‘é¡µé¢åŠ è½½æ—¶é—´ï¼Œç”¨æˆ·ä½“éªŒæ›´å¥½ï¼›\nSSRä¸æ”¯æŒ beforeMount ã€mounted é’©å­å‡½æ•°ï¼Œæ”¾åœ¨ created ä¸­æœ‰åŠ©äºä¸€è‡´æ€§ã€‚\n\n5. keep-alive ä¸­çš„ç”Ÿå‘½å‘¨æœŸå“ªäº›keep-aliveæ˜¯ Vue æä¾›çš„ä¸€ä¸ªå†…ç½®ç»„ä»¶ï¼Œç”¨æ¥å¯¹ç»„ä»¶è¿›è¡Œç¼“å­˜â€”â€”åœ¨ç»„ä»¶åˆ‡æ¢è¿‡ç¨‹ä¸­å°†çŠ¶æ€ä¿ç•™åœ¨å†…å­˜ä¸­ï¼Œé˜²æ­¢é‡å¤æ¸²æŸ“DOMã€‚\nå¦‚æœä¸ºä¸€ä¸ªç»„ä»¶åŒ…è£¹äº† keep-aliveï¼Œé‚£ä¹ˆå®ƒä¼šå¤šå‡ºä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸï¼šdeactivatedã€activatedã€‚åŒæ—¶ï¼ŒbeforeDestroy å’Œ destroyed å°±ä¸ä¼šå†è¢«è§¦å‘äº†ï¼Œå› ä¸ºç»„ä»¶ä¸ä¼šè¢«çœŸæ­£é”€æ¯ã€‚\nå½“ç»„ä»¶è¢«æ¢æ‰æ—¶ï¼Œä¼šè¢«ç¼“å­˜åˆ°å†…å­˜ä¸­ã€è§¦å‘ deactivated ç”Ÿå‘½å‘¨æœŸï¼›å½“ç»„ä»¶è¢«åˆ‡å›æ¥æ—¶ï¼Œå†å»ç¼“å­˜é‡Œæ‰¾è¿™ä¸ªç»„ä»¶ã€è§¦å‘ activatedé’©å­å‡½æ•°ã€‚\nä¸‰ã€ç»„ä»¶é€šä¿¡ç»„ä»¶é€šä¿¡çš„æ–¹å¼å¦‚ä¸‹ï¼š\nï¼ˆ1ï¼‰ props Â &#x2F; Â  $emitçˆ¶ç»„ä»¶é€šè¿‡propså‘å­ç»„ä»¶ä¼ é€’æ•°æ®ï¼Œå­ç»„ä»¶é€šè¿‡$emitå’Œçˆ¶ç»„ä»¶é€šä¿¡\n1. çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ å€¼\npropsåªèƒ½æ˜¯çˆ¶ç»„ä»¶å‘å­ç»„ä»¶è¿›è¡Œä¼ å€¼ï¼Œpropsä½¿å¾—çˆ¶å­ç»„ä»¶ä¹‹é—´å½¢æˆäº†ä¸€ä¸ªå•å‘ä¸‹è¡Œç»‘å®šã€‚å­ç»„ä»¶çš„æ•°æ®ä¼šéšç€çˆ¶ç»„ä»¶ä¸æ–­æ›´æ–°ã€‚\nprops å¯ä»¥æ˜¾ç¤ºå®šä¹‰ä¸€ä¸ªæˆ–ä¸€ä¸ªä»¥ä¸Šçš„æ•°æ®ï¼Œå¯¹äºæ¥æ”¶çš„æ•°æ®ï¼Œå¯ä»¥æ˜¯å„ç§æ•°æ®ç±»å‹ï¼ŒåŒæ ·ä¹Ÿå¯ä»¥ä¼ é€’ä¸€ä¸ªå‡½æ•°ã€‚\npropså±æ€§åè§„åˆ™ï¼šè‹¥åœ¨propsä¸­ä½¿ç”¨é©¼å³°å½¢å¼ï¼Œæ¨¡æ¿ä¸­éœ€è¦ä½¿ç”¨çŸ­æ¨ªçº¿çš„å½¢å¼\n\n&#x2F;&#x2F; çˆ¶ç»„ä»¶\n&lt;template&gt;\n    &lt;div id&#x3D;&quot;father&quot;&gt;\n        &lt;son :msg&#x3D;&quot;msgData&quot; :fn&#x3D;&quot;myFunction&quot;&gt;&lt;&#x2F;son&gt;\n    &lt;&#x2F;div&gt;\n&lt;&#x2F;template&gt;\n\n&lt;script&gt;\nimport son from &quot;.&#x2F;son.vue&quot;;\nexport default &#123;\n    name: father,\n    data() &#123;\n        msgData: &quot;çˆ¶ç»„ä»¶æ•°æ®&quot;;\n    &#125;,\n    methods: &#123;\n        myFunction() &#123;\n            console.log(&quot;vue&quot;);\n        &#125;\n    &#125;,\n    components: &#123;\n        son\n    &#125;\n&#125;;\n&lt;&#x2F;script&gt;\nå¤åˆ¶ä»£ç \n\n&#x2F;&#x2F; å­ç»„ä»¶\n&lt;template&gt;\n    &lt;div id&#x3D;&quot;son&quot;&gt;\n        &lt;p&gt;&#123;&#123;msg&#125;&#125;&lt;&#x2F;p&gt;\n        &lt;button @click&#x3D;&quot;fn&quot;&gt;æŒ‰é’®&lt;&#x2F;button&gt;\n    &lt;&#x2F;div&gt;\n&lt;&#x2F;template&gt;\n&lt;script&gt;\nexport default &#123;\n    name: &quot;son&quot;,\n    props: [&quot;msg&quot;, &quot;fn&quot;]\n&#125;;\n&lt;&#x2F;script&gt;\nå¤åˆ¶ä»£ç \n\n2. å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ å€¼\n$emitç»‘å®šä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶ï¼Œå½“è¿™ä¸ªäº‹ä»¶è¢«æ‰§è¡Œçš„æ—¶å°±ä¼šå°†å‚æ•°ä¼ é€’ç»™çˆ¶ç»„ä»¶ï¼Œè€Œçˆ¶ç»„ä»¶é€šè¿‡v-onç›‘å¬å¹¶æ¥æ”¶å‚æ•°ã€‚\n\n&#x2F;&#x2F; çˆ¶ç»„ä»¶\n&lt;template&gt;\n  &lt;div class&#x3D;&quot;section&quot;&gt;\n    &lt;com-article :articles&#x3D;&quot;articleList&quot; @onEmitIndex&#x3D;&quot;onEmitIndex&quot;&gt;&lt;&#x2F;com-article&gt;\n    &lt;p&gt;&#123;&#123;currentIndex&#125;&#125;&lt;&#x2F;p&gt;\n  &lt;&#x2F;div&gt;\n&lt;&#x2F;template&gt;\n\n&lt;script&gt;\nimport comArticle from &#39;.&#x2F;test&#x2F;article.vue&#39;\nexport default &#123;\n  name: &#39;comArticle&#39;,\n  components: &#123; comArticle &#125;,\n  data() &#123;\n    return &#123;\n      currentIndex: -1,\n      articleList: [&#39;çº¢æ¥¼æ¢¦&#39;, &#39;è¥¿æ¸¸è®°&#39;, &#39;ä¸‰å›½æ¼”ä¹‰&#39;]\n    &#125;\n  &#125;,\n  methods: &#123;\n    onEmitIndex(idx) &#123;\n      this.currentIndex &#x3D; idx\n    &#125;\n  &#125;\n&#125;\n&lt;&#x2F;script&gt;\nå¤åˆ¶ä»£ç \n\n&#x2F;&#x2F;å­ç»„ä»¶\n&lt;template&gt;\n  &lt;div&gt;\n    &lt;div v-for&#x3D;&quot;(item, index) in articles&quot; :key&#x3D;&quot;index&quot; @click&#x3D;&quot;emitIndex(index)&quot;&gt;&#123;&#123;item&#125;&#125;&lt;&#x2F;div&gt;\n  &lt;&#x2F;div&gt;\n&lt;&#x2F;template&gt;\n\n&lt;script&gt;\nexport default &#123;\n  props: [&#39;articles&#39;],\n  methods: &#123;\n    emitIndex(index) &#123;\n      this.$emit(&#39;onEmitIndex&#39;, index) &#x2F;&#x2F; è§¦å‘çˆ¶ç»„ä»¶çš„æ–¹æ³•ï¼Œå¹¶ä¼ é€’å‚æ•°index\n    &#125;\n  &#125;\n&#125;\n&lt;&#x2F;script&gt;\nå¤åˆ¶ä»£ç \n\nï¼ˆ2ï¼‰eventBusäº‹ä»¶æ€»çº¿ï¼ˆ$emit / $onï¼‰eventBusäº‹ä»¶æ€»çº¿é€‚ç”¨äºçˆ¶å­ç»„ä»¶ã€éçˆ¶å­ç»„ä»¶ç­‰ä¹‹é—´çš„é€šä¿¡ï¼Œä½¿ç”¨æ­¥éª¤å¦‚ä¸‹ï¼š ï¼ˆ1ï¼‰åˆ›å»ºäº‹ä»¶ä¸­å¿ƒç®¡ç†ç»„ä»¶ä¹‹é—´çš„é€šä¿¡\n&#x2F;&#x2F; event-bus.js\n\nimport Vue from &#39;vue&#39;\nexport const EventBus &#x3D; new Vue()\nå¤åˆ¶ä»£ç \n\nï¼ˆ2ï¼‰å‘é€äº‹ä»¶ å‡è®¾æœ‰ä¸¤ä¸ªå…„å¼Ÿç»„ä»¶firstComå’ŒsecondComï¼š\n&lt;template&gt;\n  &lt;div&gt;\n    &lt;first-com&gt;&lt;&#x2F;first-com&gt;\n    &lt;second-com&gt;&lt;&#x2F;second-com&gt;\n  &lt;&#x2F;div&gt;\n&lt;&#x2F;template&gt;\n\n&lt;script&gt;\nimport firstCom from &#39;.&#x2F;firstCom.vue&#39;\nimport secondCom from &#39;.&#x2F;secondCom.vue&#39;\nexport default &#123;\n  components: &#123; firstCom, secondCom &#125;\n&#125;\n&lt;&#x2F;script&gt;\nå¤åˆ¶ä»£ç \n\nåœ¨firstComç»„ä»¶ä¸­å‘é€äº‹ä»¶ï¼š\n&lt;template&gt;\n  &lt;div&gt;\n    &lt;button @click&#x3D;&quot;add&quot;&gt;åŠ æ³•&lt;&#x2F;button&gt;    \n  &lt;&#x2F;div&gt;\n&lt;&#x2F;template&gt;\n\n&lt;script&gt;\nimport &#123;EventBus&#125; from &#39;.&#x2F;event-bus.js&#39; &#x2F;&#x2F; å¼•å…¥äº‹ä»¶ä¸­å¿ƒ\n\nexport default &#123;\n  data()&#123;\n    return&#123;\n      num:0\n    &#125;\n  &#125;,\n  methods:&#123;\n    add()&#123;\n      EventBus.$emit(&#39;addition&#39;, &#123;\n        num:this.num++\n      &#125;)\n    &#125;\n  &#125;\n&#125;\n&lt;&#x2F;script&gt;\nå¤åˆ¶ä»£ç \n\nï¼ˆ3ï¼‰æ¥æ”¶äº‹ä»¶ åœ¨secondComç»„ä»¶ä¸­å‘é€äº‹ä»¶ï¼š\n&lt;template&gt;\n  &lt;div&gt;æ±‚å’Œ: &#123;&#123;count&#125;&#125;&lt;&#x2F;div&gt;\n&lt;&#x2F;template&gt;\n\n&lt;script&gt;\nimport &#123; EventBus &#125; from &#39;.&#x2F;event-bus.js&#39;\nexport default &#123;\n  data() &#123;\n    return &#123;\n      count: 0\n    &#125;\n  &#125;,\n  mounted() &#123;\n    EventBus.$on(&#39;addition&#39;, param &#x3D;&gt; &#123;\n      this.count &#x3D; this.count + param.num;\n    &#125;)\n  &#125;\n&#125;\n&lt;&#x2F;script&gt;\nå¤åˆ¶ä»£ç \n\nåœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œè¿™å°±ç›¸å½“äºå°†numå€¼å­˜è´®åœ¨äº†äº‹ä»¶æ€»çº¿ä¸­ï¼Œåœ¨å…¶ä»–ç»„ä»¶ä¸­å¯ä»¥ç›´æ¥è®¿é—®ã€‚äº‹ä»¶æ€»çº¿å°±ç›¸å½“äºä¸€ä¸ªæ¡¥æ¢ï¼Œä¸ç”¨ç»„ä»¶é€šè¿‡å®ƒæ¥é€šä¿¡ã€‚\nè™½ç„¶çœ‹èµ·æ¥æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•ä¹Ÿæœ‰ä¸å˜ä¹‹å¤„ï¼Œå¦‚æœé¡¹ç›®è¿‡å¤§ï¼Œä½¿ç”¨è¿™ç§æ–¹å¼è¿›è¡Œé€šä¿¡ï¼ŒåæœŸç»´æŠ¤èµ·æ¥ä¼šå¾ˆå›°éš¾ã€‚\nï¼ˆ3ï¼‰ä¾èµ–æ³¨å…¥ï¼ˆprovide &#x2F; injectï¼‰è¿™ç§æ–¹å¼å°±æ˜¯Vueä¸­çš„ä¾èµ–æ³¨å…¥ï¼Œè¯¥æ–¹æ³•ç”¨äºçˆ¶å­ç»„ä»¶ä¹‹é—´çš„é€šä¿¡ã€‚å½“ç„¶è¿™é‡Œæ‰€è¯´çš„çˆ¶å­ä¸ä¸€å®šæ˜¯çœŸæ­£çš„çˆ¶å­ï¼Œä¹Ÿå¯ä»¥æ˜¯ç¥–å­™ç»„ä»¶ï¼Œåœ¨å±‚æ•°å¾ˆæ·±çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨è¿™ç§æ–¹æ³•æ¥è¿›è¡Œä¼ å€¼ã€‚å°±ä¸ç”¨ä¸€å±‚ä¸€å±‚çš„ä¼ é€’äº†ã€‚\nprovide / injectæ˜¯Vueæä¾›çš„ä¸¤ä¸ªé’©å­ï¼Œå’Œdataã€methodsæ˜¯åŒçº§çš„ã€‚å¹¶ä¸”provideçš„ä¹¦å†™å½¢å¼å’Œdataä¸€æ ·ã€‚\n\nprovide é’©å­ç”¨æ¥å‘é€æ•°æ®æˆ–æ–¹æ³•\ninjecté’©å­ç”¨æ¥æ¥æ”¶æ•°æ®æˆ–æ–¹æ³•\n\nåœ¨çˆ¶ç»„ä»¶ä¸­ï¼š\nprovide() &#123; \n    return &#123;     \n        num: this.num  \n    &#125;;\n&#125;\nå¤åˆ¶ä»£ç \n\nåœ¨å­ç»„ä»¶ä¸­ï¼š\ninject: [&#39;num&#39;]\nå¤åˆ¶ä»£ç \n\nè¿˜å¯ä»¥è¿™æ ·å†™ï¼Œè¿™æ ·å†™å°±å¯ä»¥è®¿é—®çˆ¶ç»„ä»¶ä¸­çš„æ‰€æœ‰å±æ€§ï¼š\nprovide() &#123;\n return &#123;\n    app: this\n  &#125;;\n&#125;\ndata() &#123;\n return &#123;\n    num: 1\n  &#125;;\n&#125;\n\ninject: [&#39;app&#39;]\nconsole.log(this.app.num)\nå¤åˆ¶ä»£ç \n\næ³¨æ„ï¼š ä¾èµ–æ³¨å…¥æ‰€æä¾›çš„å±æ€§æ˜¯éå“åº”å¼çš„ã€‚\nï¼ˆ3ï¼‰ref &#x2F; $refsè¿™ç§æ–¹å¼ä¹Ÿæ˜¯å®ç°çˆ¶å­ç»„ä»¶ä¹‹é—´çš„é€šä¿¡ã€‚\nrefï¼š è¿™ä¸ªå±æ€§ç”¨åœ¨å­ç»„ä»¶ä¸Šï¼Œå®ƒçš„å¼•ç”¨å°±æŒ‡å‘äº†å­ç»„ä»¶çš„å®ä¾‹ã€‚å¯ä»¥é€šè¿‡å®ä¾‹æ¥è®¿é—®ç»„ä»¶çš„æ•°æ®å’Œæ–¹æ³•ã€‚\nåœ¨å­ç»„ä»¶ä¸­ï¼š\nexport default &#123;\n  data () &#123;\n    return &#123;\n      name: &#39;JavaScript&#39;\n    &#125;\n  &#125;,\n  methods: &#123;\n    sayHello () &#123;\n      console.log(&#39;hello&#39;)\n    &#125;\n  &#125;\n&#125;\nå¤åˆ¶ä»£ç \n\nåœ¨çˆ¶ç»„ä»¶ä¸­ï¼š\n&lt;template&gt;\n  &lt;child ref&#x3D;&quot;child&quot;&gt;&lt;&#x2F;component-a&gt;\n&lt;&#x2F;template&gt;\n&lt;script&gt;\n  import child from &#39;.&#x2F;child.vue&#39;\n  export default &#123;\n    components: &#123; child &#125;,\n    mounted () &#123;\n      console.log(this.$refs.child.name);  &#x2F;&#x2F; JavaScript\n      this.$refs.child.sayHello();  &#x2F;&#x2F; hello\n    &#125;\n  &#125;\n&lt;&#x2F;script&gt;\nå¤åˆ¶ä»£ç \n\nï¼ˆ4ï¼‰$parent / $children\nä½¿ç”¨$parentå¯ä»¥è®©ç»„ä»¶è®¿é—®çˆ¶ç»„ä»¶çš„å®ä¾‹ï¼ˆè®¿é—®çš„æ˜¯ä¸Šä¸€çº§çˆ¶ç»„ä»¶çš„å±æ€§å’Œæ–¹æ³•ï¼‰\nä½¿ç”¨$childrenå¯ä»¥è®©ç»„ä»¶è®¿é—®å­ç»„ä»¶çš„å®ä¾‹ï¼Œä½†æ˜¯ï¼Œ$childrenå¹¶ä¸èƒ½ä¿è¯é¡ºåºï¼Œå¹¶ä¸”è®¿é—®çš„æ•°æ®ä¹Ÿä¸æ˜¯å“åº”å¼çš„ã€‚\n\nåœ¨å­ç»„ä»¶ä¸­ï¼š\n&lt;template&gt;\n  &lt;div&gt;\n    &lt;span&gt;&#123;&#123;message&#125;&#125;&lt;&#x2F;span&gt;\n    &lt;p&gt;è·å–çˆ¶ç»„ä»¶çš„å€¼ä¸º:  &#123;&#123;parentVal&#125;&#125;&lt;&#x2F;p&gt;\n  &lt;&#x2F;div&gt;\n&lt;&#x2F;template&gt;\n\n&lt;script&gt;\nexport default &#123;\n  data() &#123;\n    return &#123;\n      message: &#39;Vue&#39;\n    &#125;\n  &#125;,\n  computed:&#123;\n    parentVal()&#123;\n      return this.$parent.msg;\n    &#125;\n  &#125;\n&#125;\n&lt;&#x2F;script&gt;\nå¤åˆ¶ä»£ç \n\nåœ¨çˆ¶ç»„ä»¶ä¸­ï¼š\n&#x2F;&#x2F; çˆ¶ç»„ä»¶ä¸­\n&lt;template&gt;\n  &lt;div class&#x3D;&quot;hello_world&quot;&gt;\n    &lt;div&gt;&#123;&#123;msg&#125;&#125;&lt;&#x2F;div&gt;\n    &lt;child&gt;&lt;&#x2F;child&gt;\n    &lt;button @click&#x3D;&quot;change&quot;&gt;ç‚¹å‡»æ”¹å˜å­ç»„ä»¶å€¼&lt;&#x2F;button&gt;\n  &lt;&#x2F;div&gt;\n&lt;&#x2F;template&gt;\n\n&lt;script&gt;\nimport child from &#39;.&#x2F;child.vue&#39;\nexport default &#123;\n  components: &#123; child &#125;,\n  data() &#123;\n    return &#123;\n      msg: &#39;Welcome&#39;\n    &#125;\n  &#125;,\n  methods: &#123;\n    change() &#123;\n      &#x2F;&#x2F; è·å–åˆ°å­ç»„ä»¶\n      this.$children[0].message &#x3D; &#39;JavaScript&#39;\n    &#125;\n  &#125;\n&#125;\n&lt;&#x2F;script&gt;\nå¤åˆ¶ä»£ç \n\nåœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œå­ç»„ä»¶è·å–åˆ°äº†çˆ¶ç»„ä»¶çš„parentValå€¼ï¼Œçˆ¶ç»„ä»¶æ”¹å˜äº†å­ç»„ä»¶ä¸­messageçš„å€¼ã€‚ éœ€è¦æ³¨æ„ï¼š\n\né€šè¿‡$parentè®¿é—®åˆ°çš„æ˜¯ä¸Šä¸€çº§çˆ¶ç»„ä»¶çš„å®ä¾‹ï¼Œå¯ä»¥ä½¿ç”¨$rootæ¥è®¿é—®æ ¹ç»„ä»¶çš„å®ä¾‹\nåœ¨ç»„ä»¶ä¸­ä½¿ç”¨$childrenæ‹¿åˆ°çš„æ˜¯æ‰€æœ‰çš„å­ç»„ä»¶çš„å®ä¾‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå¹¶ä¸”æ˜¯æ— åºçš„\nåœ¨æ ¹ç»„ä»¶#appä¸Šæ‹¿$parentå¾—åˆ°çš„æ˜¯new Vue()çš„å®ä¾‹ï¼Œåœ¨è¿™å®ä¾‹ä¸Šå†æ‹¿$parentå¾—åˆ°çš„æ˜¯undefinedï¼Œè€Œåœ¨æœ€åº•å±‚çš„å­ç»„ä»¶æ‹¿$childrenæ˜¯ä¸ªç©ºæ•°ç»„\n$children çš„å€¼æ˜¯æ•°ç»„ï¼Œè€Œ$parentæ˜¯ä¸ªå¯¹è±¡\n\nï¼ˆ5ï¼‰$attrs / $listenersè€ƒè™‘ä¸€ç§åœºæ™¯ï¼Œå¦‚æœAæ˜¯Bç»„ä»¶çš„çˆ¶ç»„ä»¶ï¼ŒBæ˜¯Cç»„ä»¶çš„çˆ¶ç»„ä»¶ã€‚å¦‚æœæƒ³è¦ç»„ä»¶Aç»™ç»„ä»¶Cä¼ é€’æ•°æ®ï¼Œè¿™ç§éš”ä»£çš„æ•°æ®ï¼Œè¯¥ä½¿ç”¨å“ªç§æ–¹å¼å‘¢ï¼Ÿ\nå¦‚æœæ˜¯ç”¨props/$emitæ¥ä¸€çº§ä¸€çº§çš„ä¼ é€’ï¼Œç¡®å®å¯ä»¥å®Œæˆï¼Œä½†æ˜¯æ¯”è¾ƒå¤æ‚ï¼›å¦‚æœä½¿ç”¨äº‹ä»¶æ€»çº¿ï¼Œåœ¨å¤šäººå¼€å‘æˆ–è€…é¡¹ç›®è¾ƒå¤§çš„æ—¶å€™ï¼Œç»´æŠ¤èµ·æ¥å¾ˆéº»çƒ¦ï¼›å¦‚æœä½¿ç”¨Vuexï¼Œçš„ç¡®ä¹Ÿå¯ä»¥ï¼Œä½†æ˜¯å¦‚æœä»…ä»…æ˜¯ä¼ é€’æ•°æ®ï¼Œé‚£å¯èƒ½å°±æœ‰ç‚¹æµªè´¹äº†ã€‚\né’ˆå¯¹ä¸Šè¿°æƒ…å†µï¼ŒVueå¼•å…¥äº†$attrs / $listenersï¼Œå®ç°ç»„ä»¶ä¹‹é—´çš„è·¨ä»£é€šä¿¡ã€‚\nå…ˆæ¥çœ‹ä¸€ä¸‹inheritAttrsï¼Œå®ƒçš„é»˜è®¤å€¼trueï¼Œç»§æ‰¿æ‰€æœ‰çš„çˆ¶ç»„ä»¶å±æ€§é™¤propsä¹‹å¤–çš„æ‰€æœ‰å±æ€§ï¼›inheritAttrsï¼šfalse åªç»§æ‰¿classå±æ€§ ã€‚\n\n$attrsï¼šç»§æ‰¿æ‰€æœ‰çš„çˆ¶ç»„ä»¶å±æ€§ï¼ˆé™¤äº†propä¼ é€’çš„å±æ€§ã€class å’Œ style ï¼‰ï¼Œä¸€èˆ¬ç”¨åœ¨å­ç»„ä»¶çš„å­å…ƒç´ ä¸Š\n$listenersï¼šè¯¥å±æ€§æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‡Œé¢åŒ…å«äº†ä½œç”¨åœ¨è¿™ä¸ªç»„ä»¶ä¸Šçš„æ‰€æœ‰ç›‘å¬å™¨ï¼Œå¯ä»¥é…åˆ v-on=&quot;$listeners&quot; å°†æ‰€æœ‰çš„äº‹ä»¶ç›‘å¬å™¨æŒ‡å‘è¿™ä¸ªç»„ä»¶çš„æŸä¸ªç‰¹å®šçš„å­å…ƒç´ ã€‚ï¼ˆç›¸å½“äºå­ç»„ä»¶ç»§æ‰¿çˆ¶ç»„ä»¶çš„äº‹ä»¶ï¼‰\n\nAç»„ä»¶ï¼ˆAPP.vueï¼‰ï¼š\n&lt;template&gt;\n    &lt;div id&#x3D;&quot;app&quot;&gt;\n        &#x2F;&#x2F;æ­¤å¤„ç›‘å¬äº†ä¸¤ä¸ªäº‹ä»¶ï¼Œå¯ä»¥åœ¨Bç»„ä»¶æˆ–è€…Cç»„ä»¶ä¸­ç›´æ¥è§¦å‘ \n        &lt;child1 :p-child1&#x3D;&quot;child1&quot; :p-child2&#x3D;&quot;child2&quot; @test1&#x3D;&quot;onTest1&quot; @test2&#x3D;&quot;onTest2&quot;&gt;&lt;&#x2F;child1&gt;\n    &lt;&#x2F;div&gt;\n&lt;&#x2F;template&gt;\n&lt;script&gt;\nimport Child1 from &#39;.&#x2F;Child1.vue&#39;;\nexport default &#123;\n    components: &#123; Child1 &#125;,\n    methods: &#123;\n        onTest1() &#123;\n            console.log(&#39;test1 running&#39;);\n        &#125;,\n        onTest2() &#123;\n            console.log(&#39;test2 running&#39;);\n        &#125;\n    &#125;\n&#125;;\n&lt;&#x2F;script&gt;\nå¤åˆ¶ä»£ç \n\nBç»„ä»¶ï¼ˆChild1.vueï¼‰ï¼š\n&lt;template&gt;\n    &lt;div class&#x3D;&quot;child-1&quot;&gt;\n        &lt;p&gt;props: &#123;&#123;pChild1&#125;&#125;&lt;&#x2F;p&gt;\n        &lt;p&gt;$attrs: &#123;&#123;$attrs&#125;&#125;&lt;&#x2F;p&gt;\n        &lt;child2 v-bind&#x3D;&quot;$attrs&quot; v-on&#x3D;&quot;$listeners&quot;&gt;&lt;&#x2F;child2&gt;\n    &lt;&#x2F;div&gt;\n&lt;&#x2F;template&gt;\n&lt;script&gt;\nimport Child2 from &#39;.&#x2F;Child2.vue&#39;;\nexport default &#123;\n    props: [&#39;pChild1&#39;],\n    components: &#123; Child2 &#125;,\n    inheritAttrs: false,\n    mounted() &#123;\n        this.$emit(&#39;test1&#39;); &#x2F;&#x2F; è§¦å‘APP.vueä¸­çš„test1æ–¹æ³•\n    &#125;\n&#125;;\n&lt;&#x2F;script&gt;\nå¤åˆ¶ä»£ç \n\nC ç»„ä»¶ (Child2.vue)ï¼š\n&lt;template&gt;\n    &lt;div class&#x3D;&quot;child-2&quot;&gt;\n        &lt;p&gt;props: &#123;&#123;pChild2&#125;&#125;&lt;&#x2F;p&gt;\n        &lt;p&gt;$attrs: &#123;&#123;$attrs&#125;&#125;&lt;&#x2F;p&gt;\n    &lt;&#x2F;div&gt;\n&lt;&#x2F;template&gt;\n&lt;script&gt;\nexport default &#123;\n    props: [&#39;pChild2&#39;],\n    inheritAttrs: false,\n    mounted() &#123;\n        this.$emit(&#39;test2&#39;);&#x2F;&#x2F; è§¦å‘APP.vueä¸­çš„test2æ–¹æ³•\n    &#125;\n&#125;;\n&lt;&#x2F;script&gt;\nå¤åˆ¶ä»£ç \n\nåœ¨ä¸Šè¿°ä»£ç ä¸­ï¼š\n\nCç»„ä»¶ä¸­èƒ½ç›´æ¥è§¦å‘testçš„åŸå› åœ¨äº Bç»„ä»¶è°ƒç”¨Cç»„ä»¶æ—¶ ä½¿ç”¨ v-on ç»‘å®šäº†$listeners å±æ€§\nåœ¨Bç»„ä»¶ä¸­é€šè¿‡v-bind ç»‘å®š$attrså±æ€§ï¼ŒCç»„ä»¶å¯ä»¥ç›´æ¥è·å–åˆ°Aç»„ä»¶ä¸­ä¼ é€’ä¸‹æ¥çš„propsï¼ˆé™¤äº†Bç»„ä»¶ä¸­propså£°æ˜çš„ï¼‰\n\nï¼ˆ6ï¼‰æ€»ç»“ï¼ˆ1ï¼‰çˆ¶å­ç»„ä»¶é—´é€šä¿¡\n\nå­ç»„ä»¶é€šè¿‡ props å±æ€§æ¥æ¥å—çˆ¶ç»„ä»¶çš„æ•°æ®ï¼Œç„¶åçˆ¶ç»„ä»¶åœ¨å­ç»„ä»¶ä¸Šæ³¨å†Œç›‘å¬äº‹ä»¶ï¼Œå­ç»„ä»¶é€šè¿‡ emit è§¦å‘äº‹ä»¶æ¥å‘çˆ¶ç»„ä»¶å‘é€æ•°æ®ã€‚\né€šè¿‡ ref å±æ€§ç»™å­ç»„ä»¶è®¾ç½®ä¸€ä¸ªåå­—ã€‚çˆ¶ç»„ä»¶é€šè¿‡ $refs ç»„ä»¶åæ¥è·å¾—å­ç»„ä»¶ï¼Œå­ç»„ä»¶é€šè¿‡ $parent è·å¾—çˆ¶ç»„ä»¶ï¼Œè¿™æ ·ä¹Ÿå¯ä»¥å®ç°é€šä¿¡ã€‚\nä½¿ç”¨ provide&#x2F;injectï¼Œåœ¨çˆ¶ç»„ä»¶ä¸­é€šè¿‡ provideæä¾›å˜é‡ï¼Œåœ¨å­ç»„ä»¶ä¸­é€šè¿‡ inject æ¥å°†å˜é‡æ³¨å…¥åˆ°ç»„ä»¶ä¸­ã€‚ä¸è®ºå­ç»„ä»¶æœ‰å¤šæ·±ï¼Œåªè¦è°ƒç”¨äº† inject é‚£ä¹ˆå°±å¯ä»¥æ³¨å…¥ provideä¸­çš„æ•°æ®ã€‚\n\nï¼ˆ2ï¼‰å…„å¼Ÿç»„ä»¶é—´é€šä¿¡\n\nä½¿ç”¨ eventBus çš„æ–¹æ³•ï¼Œå®ƒçš„æœ¬è´¨æ˜¯é€šè¿‡åˆ›å»ºä¸€ä¸ªç©ºçš„ Vue å®ä¾‹æ¥ä½œä¸ºæ¶ˆæ¯ä¼ é€’çš„å¯¹è±¡ï¼Œé€šä¿¡çš„ç»„ä»¶å¼•å…¥è¿™ä¸ªå®ä¾‹ï¼Œé€šä¿¡çš„ç»„ä»¶é€šè¿‡åœ¨è¿™ä¸ªå®ä¾‹ä¸Šç›‘å¬å’Œè§¦å‘äº‹ä»¶ï¼Œæ¥å®ç°æ¶ˆæ¯çš„ä¼ é€’ã€‚\né€šè¿‡ $parent/$refs æ¥è·å–åˆ°å…„å¼Ÿç»„ä»¶ï¼Œä¹Ÿå¯ä»¥è¿›è¡Œé€šä¿¡ã€‚\n\nï¼ˆ3ï¼‰ä»»æ„ç»„ä»¶ä¹‹é—´\n\nä½¿ç”¨ eventBus ï¼Œå…¶å®å°±æ˜¯åˆ›å»ºä¸€ä¸ªäº‹ä»¶ä¸­å¿ƒï¼Œç›¸å½“äºä¸­è½¬ç«™ï¼Œå¯ä»¥ç”¨å®ƒæ¥ä¼ é€’äº‹ä»¶å’Œæ¥æ”¶äº‹ä»¶ã€‚\n\nå¦‚æœä¸šåŠ¡é€»è¾‘å¤æ‚ï¼Œå¾ˆå¤šç»„ä»¶ä¹‹é—´éœ€è¦åŒæ—¶å¤„ç†ä¸€äº›å…¬å…±çš„æ•°æ®ï¼Œè¿™ä¸ªæ—¶å€™é‡‡ç”¨ä¸Šé¢è¿™ä¸€äº›æ–¹æ³•å¯èƒ½ä¸åˆ©äºé¡¹ç›®çš„ç»´æŠ¤ã€‚è¿™ä¸ªæ—¶å€™å¯ä»¥ä½¿ç”¨ vuex ï¼Œvuex çš„æ€æƒ³å°±æ˜¯å°†è¿™ä¸€äº›å…¬å…±çš„æ•°æ®æŠ½ç¦»å‡ºæ¥ï¼Œå°†å®ƒä½œä¸ºä¸€ä¸ªå…¨å±€çš„å˜é‡æ¥ç®¡ç†ï¼Œç„¶åå…¶ä»–ç»„ä»¶å°±å¯ä»¥å¯¹è¿™ä¸ªå…¬å…±æ•°æ®è¿›è¡Œè¯»å†™æ“ä½œï¼Œè¿™æ ·è¾¾åˆ°äº†è§£è€¦çš„ç›®çš„ã€‚\n","slug":"é¢è¯•é¢˜ç¬”è®°â€”â€”VUEç¯‡(ä¸Š)","date":"2021-06-23T02:33:53.000Z","categories_index":"","tags_index":"","author_index":"Beastrong"},{"id":"2fdea5cb1f84778b4d76cd27c9ba53f7","title":"é¢è¯•é¢˜ç¬”è®°â€”â€”JSç¯‡(ä¸‹)","content":"å…­ã€this&#x2F;call&#x2F;apply&#x2F;bind1. å¯¹thiså¯¹è±¡çš„ç†è§£this æ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„ä¸€ä¸ªå±æ€§ï¼Œå®ƒæŒ‡å‘æœ€åä¸€æ¬¡è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„å¯¹è±¡ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œthis çš„æŒ‡å‘å¯ä»¥é€šè¿‡å››ç§è°ƒç”¨æ¨¡å¼æ¥åˆ¤æ–­ã€‚\n\nç¬¬ä¸€ç§æ˜¯å‡½æ•°è°ƒç”¨æ¨¡å¼ï¼Œå½“ä¸€ä¸ªå‡½æ•°ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼Œç›´æ¥ä½œä¸ºå‡½æ•°æ¥è°ƒç”¨æ—¶ï¼Œthis æŒ‡å‘å…¨å±€å¯¹è±¡ã€‚\nç¬¬äºŒç§æ˜¯æ–¹æ³•è°ƒç”¨æ¨¡å¼ï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°ä½œä¸ºä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•æ¥è°ƒç”¨æ—¶ï¼Œthis æŒ‡å‘è¿™ä¸ªå¯¹è±¡ã€‚\nç¬¬ä¸‰ç§æ˜¯æ„é€ å™¨è°ƒç”¨æ¨¡å¼ï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°ç”¨ new è°ƒç”¨æ—¶ï¼Œå‡½æ•°æ‰§è¡Œå‰ä¼šæ–°åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œthis æŒ‡å‘è¿™ä¸ªæ–°åˆ›å»ºçš„å¯¹è±¡ã€‚\nç¬¬å››ç§æ˜¯ apply ã€ call å’Œ bind è°ƒç”¨æ¨¡å¼ï¼Œè¿™ä¸‰ä¸ªæ–¹æ³•éƒ½å¯ä»¥æ˜¾ç¤ºçš„æŒ‡å®šè°ƒç”¨å‡½æ•°çš„ this æŒ‡å‘ã€‚å…¶ä¸­ apply æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šä¸€ä¸ªæ˜¯ this ç»‘å®šçš„å¯¹è±¡ï¼Œä¸€ä¸ªæ˜¯å‚æ•°æ•°ç»„ã€‚call æ–¹æ³•æ¥æ”¶çš„å‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯ this ç»‘å®šçš„å¯¹è±¡ï¼Œåé¢çš„å…¶ä½™å‚æ•°æ˜¯ä¼ å…¥å‡½æ•°æ‰§è¡Œçš„å‚æ•°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä½¿ç”¨ call() æ–¹æ³•æ—¶ï¼Œä¼ é€’ç»™å‡½æ•°çš„å‚æ•°å¿…é¡»é€ä¸ªåˆ—ä¸¾å‡ºæ¥ã€‚bind æ–¹æ³•é€šè¿‡ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼Œè¿”å›ä¸€ä¸ª this ç»‘å®šäº†ä¼ å…¥å¯¹è±¡çš„æ–°å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°çš„ this æŒ‡å‘é™¤äº†ä½¿ç”¨ new æ—¶ä¼šè¢«æ”¹å˜ï¼Œå…¶ä»–æƒ…å†µä¸‹éƒ½ä¸ä¼šæ”¹å˜ã€‚\n\nè¿™å››ç§æ–¹å¼ï¼Œä½¿ç”¨æ„é€ å™¨è°ƒç”¨æ¨¡å¼çš„ä¼˜å…ˆçº§æœ€é«˜ï¼Œç„¶åæ˜¯ applyã€call å’Œ bind è°ƒç”¨æ¨¡å¼ï¼Œç„¶åæ˜¯æ–¹æ³•è°ƒç”¨æ¨¡å¼ï¼Œç„¶åæ˜¯å‡½æ•°è°ƒç”¨æ¨¡å¼ã€‚\n2. call() å’Œ apply() çš„åŒºåˆ«ï¼Ÿå®ƒä»¬çš„ä½œç”¨ä¸€æ¨¡ä¸€æ ·ï¼ŒåŒºåˆ«ä»…åœ¨äºä¼ å…¥å‚æ•°çš„å½¢å¼çš„ä¸åŒã€‚\n\napply æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šäº†å‡½æ•°ä½“å†… this å¯¹è±¡çš„æŒ‡å‘ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºä¸€ä¸ªå¸¦ä¸‹æ ‡çš„é›†åˆï¼Œè¿™ä¸ªé›†åˆå¯ä»¥ä¸ºæ•°ç»„ï¼Œä¹Ÿå¯ä»¥ä¸ºç±»æ•°ç»„ï¼Œapply æ–¹æ³•æŠŠè¿™ä¸ªé›†åˆä¸­çš„å…ƒç´ ä½œä¸ºå‚æ•°ä¼ é€’ç»™è¢«è°ƒç”¨çš„å‡½æ•°ã€‚\ncall ä¼ å…¥çš„å‚æ•°æ•°é‡ä¸å›ºå®šï¼Œè·Ÿ apply ç›¸åŒçš„æ˜¯ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¹Ÿæ˜¯ä»£è¡¨å‡½æ•°ä½“å†…çš„ this æŒ‡å‘ï¼Œä»ç¬¬äºŒä¸ªå‚æ•°å¼€å§‹å¾€åï¼Œæ¯ä¸ªå‚æ•°è¢«ä¾æ¬¡ä¼ å…¥å‡½æ•°ã€‚\n\n3. å®ç°callã€apply åŠ bind å‡½æ•°ï¼ˆ1ï¼‰call å‡½æ•°çš„å®ç°æ­¥éª¤ï¼š\n\nåˆ¤æ–­è°ƒç”¨å¯¹è±¡æ˜¯å¦ä¸ºå‡½æ•°ï¼Œå³ä½¿æ˜¯å®šä¹‰åœ¨å‡½æ•°çš„åŸå‹ä¸Šçš„ï¼Œä½†æ˜¯å¯èƒ½å‡ºç°ä½¿ç”¨ call ç­‰æ–¹å¼è°ƒç”¨çš„æƒ…å†µã€‚\nåˆ¤æ–­ä¼ å…¥ä¸Šä¸‹æ–‡å¯¹è±¡æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è®¾ç½®ä¸º window ã€‚\nå¤„ç†ä¼ å…¥çš„å‚æ•°ï¼Œæˆªå–ç¬¬ä¸€ä¸ªå‚æ•°åçš„æ‰€æœ‰å‚æ•°ã€‚\nå°†å‡½æ•°ä½œä¸ºä¸Šä¸‹æ–‡å¯¹è±¡çš„ä¸€ä¸ªå±æ€§ã€‚\nä½¿ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡æ¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå¹¶ä¿å­˜è¿”å›ç»“æœã€‚\nåˆ é™¤åˆšæ‰æ–°å¢çš„å±æ€§ã€‚\nè¿”å›ç»“æœã€‚\n\nFunction.prototype.myCall &#x3D; function(context) &#123;\n  &#x2F;&#x2F; åˆ¤æ–­è°ƒç”¨å¯¹è±¡\n  if (typeof this !&#x3D;&#x3D; &quot;function&quot;) &#123;\n    console.error(&quot;type error&quot;);\n  &#125;\n  &#x2F;&#x2F; è·å–å‚æ•°\n  let args &#x3D; [...arguments].slice(1),\n    result &#x3D; null;\n  &#x2F;&#x2F; åˆ¤æ–­ context æ˜¯å¦ä¼ å…¥ï¼Œå¦‚æœæœªä¼ å…¥åˆ™è®¾ç½®ä¸º window\n  context &#x3D; context || window;\n  &#x2F;&#x2F; å°†è°ƒç”¨å‡½æ•°è®¾ä¸ºå¯¹è±¡çš„æ–¹æ³•\n  context.fn &#x3D; this;\n  &#x2F;&#x2F; è°ƒç”¨å‡½æ•°\n  result &#x3D; context.fn(...args);\n  &#x2F;&#x2F; å°†å±æ€§åˆ é™¤\n  delete context.fn;\n  return result;\n&#125;;\nå¤åˆ¶ä»£ç \n\nï¼ˆ2ï¼‰apply å‡½æ•°çš„å®ç°æ­¥éª¤ï¼š\n\nåˆ¤æ–­è°ƒç”¨å¯¹è±¡æ˜¯å¦ä¸ºå‡½æ•°ï¼Œå³ä½¿æ˜¯å®šä¹‰åœ¨å‡½æ•°çš„åŸå‹ä¸Šçš„ï¼Œä½†æ˜¯å¯èƒ½å‡ºç°ä½¿ç”¨ call ç­‰æ–¹å¼è°ƒç”¨çš„æƒ…å†µã€‚\nåˆ¤æ–­ä¼ å…¥ä¸Šä¸‹æ–‡å¯¹è±¡æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è®¾ç½®ä¸º window ã€‚\nå°†å‡½æ•°ä½œä¸ºä¸Šä¸‹æ–‡å¯¹è±¡çš„ä¸€ä¸ªå±æ€§ã€‚\nåˆ¤æ–­å‚æ•°å€¼æ˜¯å¦ä¼ å…¥\nä½¿ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡æ¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå¹¶ä¿å­˜è¿”å›ç»“æœã€‚\nåˆ é™¤åˆšæ‰æ–°å¢çš„å±æ€§\nè¿”å›ç»“æœ\n\nFunction.prototype.myApply &#x3D; function(context) &#123;\n  &#x2F;&#x2F; åˆ¤æ–­è°ƒç”¨å¯¹è±¡æ˜¯å¦ä¸ºå‡½æ•°\n  if (typeof this !&#x3D;&#x3D; &quot;function&quot;) &#123;\n    throw new TypeError(&quot;Error&quot;);\n  &#125;\n  let result &#x3D; null;\n  &#x2F;&#x2F; åˆ¤æ–­ context æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœæœªä¼ å…¥åˆ™ä¸º window\n  context &#x3D; context || window;\n  &#x2F;&#x2F; å°†å‡½æ•°è®¾ä¸ºå¯¹è±¡çš„æ–¹æ³•\n  context.fn &#x3D; this;\n  &#x2F;&#x2F; è°ƒç”¨æ–¹æ³•\n  if (arguments[1]) &#123;\n    result &#x3D; context.fn(...arguments[1]);\n  &#125; else &#123;\n    result &#x3D; context.fn();\n  &#125;\n  &#x2F;&#x2F; å°†å±æ€§åˆ é™¤\n  delete context.fn;\n  return result;\n&#125;;\nå¤åˆ¶ä»£ç \n\nï¼ˆ3ï¼‰bind å‡½æ•°çš„å®ç°æ­¥éª¤ï¼š\n\nåˆ¤æ–­è°ƒç”¨å¯¹è±¡æ˜¯å¦ä¸ºå‡½æ•°ï¼Œå³ä½¿æ˜¯å®šä¹‰åœ¨å‡½æ•°çš„åŸå‹ä¸Šçš„ï¼Œä½†æ˜¯å¯èƒ½å‡ºç°ä½¿ç”¨ call ç­‰æ–¹å¼è°ƒç”¨çš„æƒ…å†µã€‚\nä¿å­˜å½“å‰å‡½æ•°çš„å¼•ç”¨ï¼Œè·å–å…¶ä½™ä¼ å…¥å‚æ•°å€¼ã€‚\nåˆ›å»ºä¸€ä¸ªå‡½æ•°è¿”å›\nå‡½æ•°å†…éƒ¨ä½¿ç”¨ apply æ¥ç»‘å®šå‡½æ•°è°ƒç”¨ï¼Œéœ€è¦åˆ¤æ–­å‡½æ•°ä½œä¸ºæ„é€ å‡½æ•°çš„æƒ…å†µï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦ä¼ å…¥å½“å‰å‡½æ•°çš„ this ç»™ apply è°ƒç”¨ï¼Œå…¶ä½™æƒ…å†µéƒ½ä¼ å…¥æŒ‡å®šçš„ä¸Šä¸‹æ–‡å¯¹è±¡ã€‚\n\nFunction.prototype.myBind &#x3D; function(context) &#123;\n  &#x2F;&#x2F; åˆ¤æ–­è°ƒç”¨å¯¹è±¡æ˜¯å¦ä¸ºå‡½æ•°\n  if (typeof this !&#x3D;&#x3D; &quot;function&quot;) &#123;\n    throw new TypeError(&quot;Error&quot;);\n  &#125;\n  &#x2F;&#x2F; è·å–å‚æ•°\n  var args &#x3D; [...arguments].slice(1),\n    fn &#x3D; this;\n  return function Fn() &#123;\n    &#x2F;&#x2F; æ ¹æ®è°ƒç”¨æ–¹å¼ï¼Œä¼ å…¥ä¸åŒç»‘å®šå€¼\n    return fn.apply(\n      this instanceof Fn ? this : context,\n      args.concat(...arguments)\n    );\n  &#125;;\n&#125;;\nå¤åˆ¶ä»£ç \n\nä¸ƒã€å¼‚æ­¥ç¼–ç¨‹1. å¼‚æ­¥ç¼–ç¨‹çš„å®ç°æ–¹å¼ï¼ŸJavaScriptä¸­çš„å¼‚æ­¥æœºåˆ¶å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç§ï¼š\n\nå›è°ƒå‡½æ•° çš„æ–¹å¼ï¼Œä½¿ç”¨å›è°ƒå‡½æ•°çš„æ–¹å¼æœ‰ä¸€ä¸ªç¼ºç‚¹æ˜¯ï¼Œå¤šä¸ªå›è°ƒå‡½æ•°åµŒå¥—çš„æ—¶å€™ä¼šé€ æˆå›è°ƒå‡½æ•°åœ°ç‹±ï¼Œä¸Šä¸‹ä¸¤å±‚çš„å›è°ƒå‡½æ•°é—´çš„ä»£ç è€¦åˆåº¦å¤ªé«˜ï¼Œä¸åˆ©äºä»£ç çš„å¯ç»´æŠ¤ã€‚\nPromise çš„æ–¹å¼ï¼Œä½¿ç”¨ Promise çš„æ–¹å¼å¯ä»¥å°†åµŒå¥—çš„å›è°ƒå‡½æ•°ä½œä¸ºé“¾å¼è°ƒç”¨ã€‚ä½†æ˜¯ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œæœ‰æ—¶ä¼šé€ æˆå¤šä¸ª then çš„é“¾å¼è°ƒç”¨ï¼Œå¯èƒ½ä¼šé€ æˆä»£ç çš„è¯­ä¹‰ä¸å¤Ÿæ˜ç¡®ã€‚\ngenerator çš„æ–¹å¼ï¼Œå®ƒå¯ä»¥åœ¨å‡½æ•°çš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå°†å‡½æ•°çš„æ‰§è¡Œæƒè½¬ç§»å‡ºå»ï¼Œåœ¨å‡½æ•°å¤–éƒ¨è¿˜å¯ä»¥å°†æ‰§è¡Œæƒè½¬ç§»å›æ¥ã€‚å½“é‡åˆ°å¼‚æ­¥å‡½æ•°æ‰§è¡Œçš„æ—¶å€™ï¼Œå°†å‡½æ•°æ‰§è¡Œæƒè½¬ç§»å‡ºå»ï¼Œå½“å¼‚æ­¥å‡½æ•°æ‰§è¡Œå®Œæ¯•æ—¶å†å°†æ‰§è¡Œæƒç»™è½¬ç§»å›æ¥ã€‚å› æ­¤åœ¨ generator å†…éƒ¨å¯¹äºå¼‚æ­¥æ“ä½œçš„æ–¹å¼ï¼Œå¯ä»¥ä»¥åŒæ­¥çš„é¡ºåºæ¥ä¹¦å†™ã€‚ä½¿ç”¨è¿™ç§æ–¹å¼éœ€è¦è€ƒè™‘çš„é—®é¢˜æ˜¯ä½•æ—¶å°†å‡½æ•°çš„æ§åˆ¶æƒè½¬ç§»å›æ¥ï¼Œå› æ­¤éœ€è¦æœ‰ä¸€ä¸ªè‡ªåŠ¨æ‰§è¡Œ generator çš„æœºåˆ¶ï¼Œæ¯”å¦‚è¯´ co æ¨¡å—ç­‰æ–¹å¼æ¥å®ç° generator çš„è‡ªåŠ¨æ‰§è¡Œã€‚\nasync å‡½æ•° çš„æ–¹å¼ï¼Œasync å‡½æ•°æ˜¯ generator å’Œ promise å®ç°çš„ä¸€ä¸ªè‡ªåŠ¨æ‰§è¡Œçš„è¯­æ³•ç³–ï¼Œå®ƒå†…éƒ¨è‡ªå¸¦æ‰§è¡Œå™¨ï¼Œå½“å‡½æ•°å†…éƒ¨æ‰§è¡Œåˆ°ä¸€ä¸ª await è¯­å¥çš„æ—¶å€™ï¼Œå¦‚æœè¯­å¥è¿”å›ä¸€ä¸ª promise å¯¹è±¡ï¼Œé‚£ä¹ˆå‡½æ•°å°†ä¼šç­‰å¾… promise å¯¹è±¡çš„çŠ¶æ€å˜ä¸º resolve åå†ç»§ç»­å‘ä¸‹æ‰§è¡Œã€‚å› æ­¤å¯ä»¥å°†å¼‚æ­¥é€»è¾‘ï¼Œè½¬åŒ–ä¸ºåŒæ­¥çš„é¡ºåºæ¥ä¹¦å†™ï¼Œå¹¶ä¸”è¿™ä¸ªå‡½æ•°å¯ä»¥è‡ªåŠ¨æ‰§è¡Œã€‚\n\n2. setTimeoutã€Promiseã€Async&#x2F;Await çš„åŒºåˆ«ï¼ˆ1ï¼‰setTimeoutconsole.log(&#39;script start&#39;)\t&#x2F;&#x2F;1. æ‰“å° script start\nsetTimeout(function()&#123;\n    console.log(&#39;settimeout&#39;)\t&#x2F;&#x2F; 4. æ‰“å° settimeout\n&#125;)\t&#x2F;&#x2F; 2. è°ƒç”¨ setTimeout å‡½æ•°ï¼Œå¹¶å®šä¹‰å…¶å®Œæˆåæ‰§è¡Œçš„å›è°ƒå‡½æ•°\nconsole.log(&#39;script end&#39;)\t&#x2F;&#x2F;3. æ‰“å° script start\n&#x2F;&#x2F; è¾“å‡ºé¡ºåºï¼šscript start-&gt;script end-&gt;settimeout\nå¤åˆ¶ä»£ç \n\nï¼ˆ2ï¼‰PromisePromiseæœ¬èº«æ˜¯åŒæ­¥çš„ç«‹å³æ‰§è¡Œå‡½æ•°ï¼Œ å½“åœ¨executorä¸­æ‰§è¡Œresolveæˆ–è€…rejectçš„æ—¶å€™, æ­¤æ—¶æ˜¯å¼‚æ­¥æ“ä½œï¼Œ ä¼šå…ˆæ‰§è¡Œthen&#x2F;catchç­‰ï¼Œå½“ä¸»æ ˆå®Œæˆåï¼Œæ‰ä¼šå»è°ƒç”¨resolve&#x2F;rejectä¸­å­˜æ”¾çš„æ–¹æ³•æ‰§è¡Œï¼Œæ‰“å°pçš„æ—¶å€™ï¼Œæ˜¯æ‰“å°çš„è¿”å›ç»“æœï¼Œä¸€ä¸ªPromiseå®ä¾‹ã€‚\nconsole.log(&#39;script start&#39;)\nlet promise1 &#x3D; new Promise(function (resolve) &#123;\n    console.log(&#39;promise1&#39;)\n    resolve()\n    console.log(&#39;promise1 end&#39;)\n&#125;).then(function () &#123;\n    console.log(&#39;promise2&#39;)\n&#125;)\nsetTimeout(function()&#123;\n    console.log(&#39;settimeout&#39;)\n&#125;)\nconsole.log(&#39;script end&#39;)\n&#x2F;&#x2F; è¾“å‡ºé¡ºåº: script start-&gt;promise1-&gt;promise1 end-&gt;script end-&gt;promise2-&gt;settimeout\nå¤åˆ¶ä»£ç \n\nå½“JSä¸»çº¿ç¨‹æ‰§è¡Œåˆ°Promiseå¯¹è±¡æ—¶ï¼š\n\npromise1.then() çš„å›è°ƒå°±æ˜¯ä¸€ä¸ª task\npromise1 æ˜¯ resolvedæˆ–rejected: é‚£è¿™ä¸ª task å°±ä¼šæ”¾å…¥å½“å‰äº‹ä»¶å¾ªç¯å›åˆçš„ microtask queue\npromise1 æ˜¯ pending: è¿™ä¸ª task å°±ä¼šæ”¾å…¥ äº‹ä»¶å¾ªç¯çš„æœªæ¥çš„æŸä¸ª(å¯èƒ½ä¸‹ä¸€ä¸ª)å›åˆçš„ microtask queue ä¸­\nsetTimeout çš„å›è°ƒä¹Ÿæ˜¯ä¸ª task ï¼Œå®ƒä¼šè¢«æ”¾å…¥ macrotask queue å³ä½¿æ˜¯ 0ms çš„æƒ…å†µ\n\nï¼ˆ3ï¼‰async&#x2F;awaitasync function async1()&#123;\n   console.log(&#39;async1 start&#39;);\n    await async2();\n    console.log(&#39;async1 end&#39;)\n&#125;\nasync function async2()&#123;\n    console.log(&#39;async2&#39;)\n&#125;\nconsole.log(&#39;script start&#39;);\nasync1();\nconsole.log(&#39;script end&#39;)\n&#x2F;&#x2F; è¾“å‡ºé¡ºåºï¼šscript start-&gt;async1 start-&gt;async2-&gt;script end-&gt;async1 end\nå¤åˆ¶ä»£ç \n\nasync å‡½æ•°è¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå½“å‡½æ•°æ‰§è¡Œçš„æ—¶å€™ï¼Œä¸€æ—¦é‡åˆ° await å°±ä¼šå…ˆè¿”å›ï¼Œç­‰åˆ°è§¦å‘çš„å¼‚æ­¥æ“ä½œå®Œæˆï¼Œå†æ‰§è¡Œå‡½æ•°ä½“å†…åé¢çš„è¯­å¥ã€‚å¯ä»¥ç†è§£ä¸ºï¼Œæ˜¯è®©å‡ºäº†çº¿ç¨‹ï¼Œè·³å‡ºäº† async å‡½æ•°ä½“ã€‚\nä¾‹å¦‚ï¼š\nasync function func1() &#123;\n    return 1\n&#125;\nconsole.log(func1())\nå¤åˆ¶ä»£ç \n\n func1çš„è¿è¡Œç»“æœå…¶å®å°±æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡ã€‚å› æ­¤ä¹Ÿå¯ä»¥ä½¿ç”¨thenæ¥å¤„ç†åç»­é€»è¾‘ã€‚\nfunc1().then(res &#x3D;&gt; &#123;\n    console.log(res);  &#x2F;&#x2F; 30\n&#125;)\nå¤åˆ¶ä»£ç \n\nawaitçš„å«ä¹‰ä¸ºç­‰å¾…ï¼Œä¹Ÿå°±æ˜¯ async å‡½æ•°éœ€è¦ç­‰å¾…awaitåçš„å‡½æ•°æ‰§è¡Œå®Œæˆå¹¶ä¸”æœ‰äº†è¿”å›ç»“æœï¼ˆPromiseå¯¹è±¡ï¼‰ä¹‹åï¼Œæ‰èƒ½ç»§ç»­æ‰§è¡Œä¸‹é¢çš„ä»£ç ã€‚awaité€šè¿‡è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡æ¥å®ç°åŒæ­¥çš„æ•ˆæœã€‚\n3. å¯¹Promiseçš„ç†è§£Promiseæ˜¯å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥è·å–å¼‚æ­¥æ“ä½œçš„æ¶ˆæ¯ï¼Œä»–çš„å‡ºç°å¤§å¤§æ”¹å–„äº†å¼‚æ­¥ç¼–ç¨‹çš„å›°å¢ƒï¼Œé¿å…äº†åœ°ç‹±å›è°ƒï¼Œå®ƒæ¯”ä¼ ç»Ÿçš„è§£å†³æ–¹æ¡ˆå›è°ƒå‡½æ•°å’Œäº‹ä»¶æ›´åˆç†å’Œæ›´å¼ºå¤§ã€‚\næ‰€è°“Promiseï¼Œç®€å•è¯´å°±æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œé‡Œé¢ä¿å­˜ç€æŸä¸ªæœªæ¥æ‰ä¼šç»“æŸçš„äº‹ä»¶ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼‰çš„ç»“æœã€‚ä»è¯­æ³•ä¸Šè¯´ï¼ŒPromise æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä»å®ƒå¯ä»¥è·å–å¼‚æ­¥æ“ä½œçš„æ¶ˆæ¯ã€‚Promise æä¾›ç»Ÿä¸€çš„ APIï¼Œå„ç§å¼‚æ­¥æ“ä½œéƒ½å¯ä»¥ç”¨åŒæ ·çš„æ–¹æ³•è¿›è¡Œå¤„ç†ã€‚\nï¼ˆ1ï¼‰Promiseçš„å®ä¾‹æœ‰ä¸‰ä¸ªçŠ¶æ€:\n\nPendingï¼ˆè¿›è¡Œä¸­ï¼‰\nResolvedï¼ˆå·²å®Œæˆï¼‰\nRejectedï¼ˆå·²æ‹’ç»ï¼‰\n\nå½“æŠŠä¸€ä»¶äº‹æƒ…äº¤ç»™promiseæ—¶ï¼Œå®ƒçš„çŠ¶æ€å°±æ˜¯Pendingï¼Œä»»åŠ¡å®Œæˆäº†çŠ¶æ€å°±å˜æˆäº†Resolvedã€æ²¡æœ‰å®Œæˆå¤±è´¥äº†å°±å˜æˆäº†Rejectedã€‚\nï¼ˆ2ï¼‰Promiseçš„å®ä¾‹æœ‰ä¸¤ä¸ªè¿‡ç¨‹ï¼š\n\npending -&gt; fulfilled : Resolvedï¼ˆå·²å®Œæˆï¼‰\npending -&gt; rejectedï¼šRejectedï¼ˆå·²æ‹’ç»ï¼‰\n\næ³¨æ„ï¼šä¸€æ—¦ä»è¿›è¡ŒçŠ¶æ€å˜æˆä¸ºå…¶ä»–çŠ¶æ€å°±æ°¸è¿œä¸èƒ½æ›´æ”¹çŠ¶æ€äº†ã€‚\nPromiseçš„ç‰¹ç‚¹ï¼š\n\nå¯¹è±¡çš„çŠ¶æ€ä¸å—å¤–ç•Œå½±å“ã€‚promiseå¯¹è±¡ä»£è¡¨ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œæœ‰ä¸‰ç§çŠ¶æ€ï¼Œpendingï¼ˆè¿›è¡Œä¸­ï¼‰ã€fulfilledï¼ˆå·²æˆåŠŸï¼‰ã€rejectedï¼ˆå·²å¤±è´¥ï¼‰ã€‚åªæœ‰å¼‚æ­¥æ“ä½œçš„ç»“æœï¼Œå¯ä»¥å†³å®šå½“å‰æ˜¯å“ªä¸€ç§çŠ¶æ€ï¼Œä»»ä½•å…¶ä»–æ“ä½œéƒ½æ— æ³•æ”¹å˜è¿™ä¸ªçŠ¶æ€ï¼Œè¿™ä¹Ÿæ˜¯promiseè¿™ä¸ªåå­—çš„ç”±æ¥â€”â€”â€œæ‰¿è¯ºâ€ï¼›\nä¸€æ—¦çŠ¶æ€æ”¹å˜å°±ä¸ä¼šå†å˜ï¼Œä»»ä½•æ—¶å€™éƒ½å¯ä»¥å¾—åˆ°è¿™ä¸ªç»“æœã€‚promiseå¯¹è±¡çš„çŠ¶æ€æ”¹å˜ï¼Œåªæœ‰ä¸¤ç§å¯èƒ½ï¼šä»pendingå˜ä¸ºfulfilledï¼Œä»pendingå˜ä¸ºrejectedã€‚è¿™æ—¶å°±ç§°ä¸ºresolvedï¼ˆå·²å®šå‹ï¼‰ã€‚å¦‚æœæ”¹å˜å·²ç»å‘ç”Ÿäº†ï¼Œä½ å†å¯¹promiseå¯¹è±¡æ·»åŠ å›è°ƒå‡½æ•°ï¼Œä¹Ÿä¼šç«‹å³å¾—åˆ°è¿™ä¸ªç»“æœã€‚è¿™ä¸äº‹ä»¶ï¼ˆeventï¼‰å®Œå…¨ä¸åŒï¼Œäº‹ä»¶çš„ç‰¹ç‚¹æ˜¯ï¼šå¦‚æœä½ é”™è¿‡äº†å®ƒï¼Œå†å»ç›‘å¬æ˜¯å¾—ä¸åˆ°ç»“æœçš„ã€‚\n\nPromiseçš„ç¼ºç‚¹ï¼š\n\næ— æ³•å–æ¶ˆPromiseï¼Œä¸€æ—¦æ–°å»ºå®ƒå°±ä¼šç«‹å³æ‰§è¡Œï¼Œæ— æ³•ä¸­é€”å–æ¶ˆã€‚\nå¦‚æœä¸è®¾ç½®å›è°ƒå‡½æ•°ï¼ŒPromiseå†…éƒ¨æŠ›å‡ºçš„é”™è¯¯ï¼Œä¸ä¼šååº”åˆ°å¤–éƒ¨ã€‚\nå½“å¤„äºpendingçŠ¶æ€æ—¶ï¼Œæ— æ³•å¾—çŸ¥ç›®å‰è¿›å±•åˆ°å“ªä¸€ä¸ªé˜¶æ®µï¼ˆåˆšåˆšå¼€å§‹è¿˜æ˜¯å³å°†å®Œæˆï¼‰ã€‚\n\næ€»ç»“ï¼š Promise å¯¹è±¡æ˜¯å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œæœ€æ—©ç”±ç¤¾åŒºæå‡ºã€‚Promise æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œæ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ª Promise å®ä¾‹ã€‚ä¸€ä¸ª Promise å®ä¾‹æœ‰ä¸‰ç§çŠ¶æ€ï¼Œåˆ†åˆ«æ˜¯pendingã€resolved å’Œ rejectedï¼Œåˆ†åˆ«ä»£è¡¨äº†è¿›è¡Œä¸­ã€å·²æˆåŠŸå’Œå·²å¤±è´¥ã€‚å®ä¾‹çš„çŠ¶æ€åªèƒ½ç”± pending è½¬å˜ resolved æˆ–è€…rejected çŠ¶æ€ï¼Œå¹¶ä¸”çŠ¶æ€ä¸€ç»æ”¹å˜ï¼Œå°±å‡å›ºäº†ï¼Œæ— æ³•å†è¢«æ”¹å˜äº†ã€‚\nçŠ¶æ€çš„æ”¹å˜æ˜¯é€šè¿‡ resolve() å’Œ reject() å‡½æ•°æ¥å®ç°çš„ï¼Œå¯ä»¥åœ¨å¼‚æ­¥æ“ä½œç»“æŸåè°ƒç”¨è¿™ä¸¤ä¸ªå‡½æ•°æ”¹å˜ Promise å®ä¾‹çš„çŠ¶æ€ï¼Œå®ƒçš„åŸå‹ä¸Šå®šä¹‰äº†ä¸€ä¸ª then æ–¹æ³•ï¼Œä½¿ç”¨è¿™ä¸ª then æ–¹æ³•å¯ä»¥ä¸ºä¸¤ä¸ªçŠ¶æ€çš„æ”¹å˜æ³¨å†Œå›è°ƒå‡½æ•°ã€‚è¿™ä¸ªå›è°ƒå‡½æ•°å±äºå¾®ä»»åŠ¡ï¼Œä¼šåœ¨æœ¬è½®äº‹ä»¶å¾ªç¯çš„æœ«å°¾æ‰§è¡Œã€‚\næ³¨æ„ï¼š åœ¨æ„é€  Promise çš„æ—¶å€™ï¼Œæ„é€ å‡½æ•°å†…éƒ¨çš„ä»£ç æ˜¯ç«‹å³æ‰§è¡Œçš„\n4. Promiseçš„åŸºæœ¬ç”¨æ³•ï¼ˆ1ï¼‰åˆ›å»ºPromiseå¯¹è±¡Promiseå¯¹è±¡ä»£è¡¨ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œæœ‰ä¸‰ç§çŠ¶æ€ï¼špendingï¼ˆè¿›è¡Œä¸­ï¼‰ã€fulfilledï¼ˆå·²æˆåŠŸï¼‰å’Œrejectedï¼ˆå·²å¤±è´¥ï¼‰ã€‚\nPromiseæ„é€ å‡½æ•°æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°çš„ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯resolveå’Œrejectã€‚\nconst promise &#x3D; new Promise(function(resolve, reject) &#123;\n  &#x2F;&#x2F; ... some code\n  if (&#x2F;* å¼‚æ­¥æ“ä½œæˆåŠŸ *&#x2F;)&#123;\n    resolve(value);\n  &#125; else &#123;\n    reject(error);\n  &#125;\n&#125;);\nå¤åˆ¶ä»£ç \n\nä¸€èˆ¬æƒ…å†µä¸‹éƒ½ä¼šä½¿ç”¨new Promise()æ¥åˆ›å»ºpromiseå¯¹è±¡ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥ä½¿ç”¨promise.resolveå’Œpromise.rejectè¿™ä¸¤ä¸ªæ–¹æ³•ï¼š\n\nPromise.resolve\n\nPromise.resolve(value)çš„è¿”å›å€¼ä¹Ÿæ˜¯ä¸€ä¸ªpromiseå¯¹è±¡ï¼Œå¯ä»¥å¯¹è¿”å›å€¼è¿›è¡Œ.thenè°ƒç”¨ï¼Œä»£ç å¦‚ä¸‹ï¼š\nPromise.resolve(11).then(function(value)&#123;\n  console.log(value); &#x2F;&#x2F; æ‰“å°å‡º11\n&#125;);\nå¤åˆ¶ä»£ç \n\nresolve(11)ä»£ç ä¸­ï¼Œä¼šè®©promiseå¯¹è±¡è¿›å…¥ç¡®å®š(resolveçŠ¶æ€)ï¼Œå¹¶å°†å‚æ•°11ä¼ é€’ç»™åé¢çš„thenæ‰€æŒ‡å®šçš„onFulfilled å‡½æ•°ï¼›\nåˆ›å»ºpromiseå¯¹è±¡å¯ä»¥ä½¿ç”¨new Promiseçš„å½¢å¼åˆ›å»ºå¯¹è±¡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨Promise.resolve(value)çš„å½¢å¼åˆ›å»ºpromiseå¯¹è±¡ï¼›\n\nPromise.reject\n\nPromise.reject ä¹Ÿæ˜¯new Promiseçš„å¿«æ·å½¢å¼ï¼Œä¹Ÿåˆ›å»ºä¸€ä¸ªpromiseå¯¹è±¡ã€‚ä»£ç å¦‚ä¸‹ï¼š\nPromise.reject(new Error(â€œæˆ‘é”™äº†ï¼Œè¯·åŸè°…ä¿ºï¼ï¼â€));\nå¤åˆ¶ä»£ç \n\nå°±æ˜¯ä¸‹é¢çš„ä»£ç new Promiseçš„ç®€å•å½¢å¼ï¼š\nnew Promise(function(resolve,reject)&#123;\n   reject(new Error(&quot;æˆ‘é”™äº†ï¼&quot;));\n&#125;);\nå¤åˆ¶ä»£ç \n\nä¸‹é¢æ˜¯ä½¿ç”¨resolveæ–¹æ³•å’Œrejectæ–¹æ³•ï¼š\nfunction testPromise(ready) &#123;\n  return new Promise(function(resolve,reject)&#123;\n    if(ready) &#123;\n      resolve(&quot;hello world&quot;);\n    &#125;else &#123;\n      reject(&quot;No thanks&quot;);\n    &#125;\n  &#125;);\n&#125;;\n&#x2F;&#x2F; æ–¹æ³•è°ƒç”¨\ntestPromise(true).then(function(msg)&#123;\n  console.log(msg);\n&#125;,function(error)&#123;\n  console.log(error);\n&#125;);\nå¤åˆ¶ä»£ç \n\nä¸Šé¢çš„ä»£ç çš„å«ä¹‰æ˜¯ç»™testPromiseæ–¹æ³•ä¼ é€’ä¸€ä¸ªå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªpromiseå¯¹è±¡ï¼Œå¦‚æœä¸ºtrueçš„è¯ï¼Œé‚£ä¹ˆè°ƒç”¨promiseå¯¹è±¡ä¸­çš„resolve()æ–¹æ³•ï¼Œå¹¶ä¸”æŠŠå…¶ä¸­çš„å‚æ•°ä¼ é€’ç»™åé¢çš„thenç¬¬ä¸€ä¸ªå‡½æ•°å†…ï¼Œå› æ­¤æ‰“å°å‡º â€œhello worldâ€, å¦‚æœä¸ºfalseçš„è¯ï¼Œä¼šè°ƒç”¨promiseå¯¹è±¡ä¸­çš„reject()æ–¹æ³•ï¼Œåˆ™ä¼šè¿›å…¥thençš„ç¬¬äºŒä¸ªå‡½æ•°å†…ï¼Œä¼šæ‰“å°No thanksï¼›\nï¼ˆ2ï¼‰Promiseæ–¹æ³•Promiseæœ‰äº”ä¸ªå¸¸ç”¨çš„æ–¹æ³•ï¼šthen()ã€catch()ã€all()ã€race()ã€finallyã€‚ä¸‹é¢å°±æ¥çœ‹ä¸€ä¸‹è¿™äº›æ–¹æ³•ã€‚\n\nthen()\n\nå½“Promiseæ‰§è¡Œçš„å†…å®¹ç¬¦åˆæˆåŠŸæ¡ä»¶æ—¶ï¼Œè°ƒç”¨resolveå‡½æ•°ï¼Œå¤±è´¥å°±è°ƒç”¨rejectå‡½æ•°ã€‚Promiseåˆ›å»ºå®Œäº†ï¼Œé‚£è¯¥å¦‚ä½•è°ƒç”¨å‘¢ï¼Ÿ\npromise.then(function(value) &#123;\n  &#x2F;&#x2F; success\n&#125;, function(error) &#123;\n  &#x2F;&#x2F; failure\n&#125;);\nå¤åˆ¶ä»£ç \n\nthenæ–¹æ³•å¯ä»¥æ¥å—ä¸¤ä¸ªå›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå›è°ƒå‡½æ•°æ˜¯Promiseå¯¹è±¡çš„çŠ¶æ€å˜ä¸ºresolvedæ—¶è°ƒç”¨ï¼Œç¬¬äºŒä¸ªå›è°ƒå‡½æ•°æ˜¯Promiseå¯¹è±¡çš„çŠ¶æ€å˜ä¸ºrejectedæ—¶è°ƒç”¨ã€‚å…¶ä¸­ç¬¬äºŒä¸ªå‚æ•°å¯ä»¥çœç•¥ã€‚ thenæ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„Promiseå®ä¾‹ï¼ˆä¸æ˜¯åŸæ¥é‚£ä¸ªPromiseå®ä¾‹ï¼‰ã€‚å› æ­¤å¯ä»¥é‡‡ç”¨é“¾å¼å†™æ³•ï¼Œå³thenæ–¹æ³•åé¢å†è°ƒç”¨å¦ä¸€ä¸ªthenæ–¹æ³•ã€‚\nå½“è¦å†™æœ‰é¡ºåºçš„å¼‚æ­¥äº‹ä»¶æ—¶ï¼Œéœ€è¦ä¸²è¡Œæ—¶ï¼Œå¯ä»¥è¿™æ ·å†™ï¼š\nlet promise &#x3D; new Promise((resolve,reject)&#x3D;&gt;&#123;\n    ajax(&#39;first&#39;).success(function(res)&#123;\n        resolve(res);\n    &#125;)\n&#125;)\npromise.then(res&#x3D;&gt;&#123;\n    return new Promise((resovle,reject)&#x3D;&gt;&#123;\n        ajax(&#39;second&#39;).success(function(res)&#123;\n            resolve(res)\n        &#125;)\n    &#125;)\n&#125;).then(res&#x3D;&gt;&#123;\n    return new Promise((resovle,reject)&#x3D;&gt;&#123;\n        ajax(&#39;second&#39;).success(function(res)&#123;\n            resolve(res)\n        &#125;)\n    &#125;)\n&#125;).then(res&#x3D;&gt;&#123;\n    \n&#125;)\nå¤åˆ¶ä»£ç \n\né‚£å½“è¦å†™çš„äº‹ä»¶æ²¡æœ‰é¡ºåºæˆ–è€…å…³ç³»æ—¶ï¼Œè¿˜å¦‚ä½•å†™å‘¢ï¼Ÿå¯ä»¥ä½¿ç”¨all æ–¹æ³•æ¥è§£å†³ã€‚\n2. catch()\nPromiseå¯¹è±¡é™¤äº†æœ‰thenæ–¹æ³•ï¼Œè¿˜æœ‰ä¸€ä¸ªcatchæ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç›¸å½“äºthenæ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°ï¼ŒæŒ‡å‘rejectçš„å›è°ƒå‡½æ•°ã€‚ä¸è¿‡catchæ–¹æ³•è¿˜æœ‰ä¸€ä¸ªä½œç”¨ï¼Œå°±æ˜¯åœ¨æ‰§è¡Œresolveå›è°ƒå‡½æ•°æ—¶ï¼Œå¦‚æœå‡ºç°é”™è¯¯ï¼ŒæŠ›å‡ºå¼‚å¸¸ï¼Œä¸ä¼šåœæ­¢è¿è¡Œï¼Œè€Œæ˜¯è¿›å…¥catchæ–¹æ³•ä¸­ã€‚\np.then((data) &#x3D;&gt; &#123;\n     console.log(&#39;resolved&#39;,data);\n&#125;,(err) &#x3D;&gt; &#123;\n     console.log(&#39;rejected&#39;,err);\n     &#125;\n); \np.then((data) &#x3D;&gt; &#123;\n    console.log(&#39;resolved&#39;,data);\n&#125;).catch((err) &#x3D;&gt; &#123;\n    console.log(&#39;rejected&#39;,err);\n&#125;);\nå¤åˆ¶ä»£ç \n\n3. all()\nallæ–¹æ³•å¯ä»¥å®Œæˆå¹¶è¡Œä»»åŠ¡ï¼Œ å®ƒæ¥æ”¶ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„çš„æ¯ä¸€é¡¹éƒ½æ˜¯ä¸€ä¸ªpromiseå¯¹è±¡ã€‚å½“æ•°ç»„ä¸­æ‰€æœ‰çš„promiseçš„çŠ¶æ€éƒ½è¾¾åˆ°resolvedçš„æ—¶å€™ï¼Œallæ–¹æ³•çš„çŠ¶æ€å°±ä¼šå˜æˆresolvedï¼Œå¦‚æœæœ‰ä¸€ä¸ªçŠ¶æ€å˜æˆäº†rejectedï¼Œé‚£ä¹ˆallæ–¹æ³•çš„çŠ¶æ€å°±ä¼šå˜æˆrejectedã€‚\njavascript\nlet promise1 &#x3D; new Promise((resolve,reject)&#x3D;&gt;&#123;\n\tsetTimeout(()&#x3D;&gt;&#123;\n       resolve(1);\n\t&#125;,2000)\n&#125;);\nlet promise2 &#x3D; new Promise((resolve,reject)&#x3D;&gt;&#123;\n\tsetTimeout(()&#x3D;&gt;&#123;\n       resolve(2);\n\t&#125;,1000)\n&#125;);\nlet promise3 &#x3D; new Promise((resolve,reject)&#x3D;&gt;&#123;\n\tsetTimeout(()&#x3D;&gt;&#123;\n       resolve(3);\n\t&#125;,3000)\n&#125;);\nPromise.all([promise1,promise2,promise3]).then(res&#x3D;&gt;&#123;\n    console.log(res);\n    &#x2F;&#x2F;ç»“æœä¸ºï¼š[1,2,3] \n&#125;)\nå¤åˆ¶ä»£ç \n\nè°ƒç”¨allæ–¹æ³•æ—¶çš„ç»“æœæˆåŠŸçš„æ—¶å€™æ˜¯å›è°ƒå‡½æ•°çš„å‚æ•°ä¹Ÿæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„æŒ‰é¡ºåºä¿å­˜ç€æ¯ä¸€ä¸ªpromiseå¯¹è±¡resolveæ‰§è¡Œæ—¶çš„å€¼ã€‚\nï¼ˆ4ï¼‰race()\nraceæ–¹æ³•å’Œallä¸€æ ·ï¼Œæ¥å—çš„å‚æ•°æ˜¯ä¸€ä¸ªæ¯é¡¹éƒ½æ˜¯promiseçš„æ•°ç»„ï¼Œä½†æ˜¯ä¸allä¸åŒçš„æ˜¯ï¼Œå½“æœ€å…ˆæ‰§è¡Œå®Œçš„äº‹ä»¶æ‰§è¡Œå®Œä¹‹åï¼Œå°±ç›´æ¥è¿”å›è¯¥promiseå¯¹è±¡çš„å€¼ã€‚å¦‚æœç¬¬ä¸€ä¸ªpromiseå¯¹è±¡çŠ¶æ€å˜æˆresolvedï¼Œé‚£è‡ªèº«çš„çŠ¶æ€å˜æˆäº†resolvedï¼›åä¹‹ç¬¬ä¸€ä¸ªpromiseå˜æˆrejectedï¼Œé‚£è‡ªèº«çŠ¶æ€å°±ä¼šå˜æˆrejectedã€‚\nlet promise1 &#x3D; new Promise((resolve,reject)&#x3D;&gt;&#123;\n\tsetTimeout(()&#x3D;&gt;&#123;\n       reject(1);\n\t&#125;,2000)\n&#125;);\nlet promise2 &#x3D; new Promise((resolve,reject)&#x3D;&gt;&#123;\n\tsetTimeout(()&#x3D;&gt;&#123;\n       resolve(2);\n\t&#125;,1000)\n&#125;);\nlet promise3 &#x3D; new Promise((resolve,reject)&#x3D;&gt;&#123;\n\tsetTimeout(()&#x3D;&gt;&#123;\n       resolve(3);\n\t&#125;,3000)\n&#125;);\nPromise.race([promise1,promise2,promise3]).then(res&#x3D;&gt;&#123;\n\tconsole.log(res);\n\t&#x2F;&#x2F;ç»“æœï¼š2\n&#125;,rej&#x3D;&gt;&#123;\n    console.log(rej)&#125;;\n)\nå¤åˆ¶ä»£ç \n\né‚£ä¹ˆraceæ–¹æ³•æœ‰ä»€ä¹ˆå®é™…ä½œç”¨å‘¢ï¼Ÿå½“è¦åšä¸€ä»¶äº‹ï¼Œè¶…è¿‡å¤šé•¿æ—¶é—´å°±ä¸åšäº†ï¼Œå¯ä»¥ç”¨è¿™ä¸ªæ–¹æ³•æ¥è§£å†³ï¼š\nPromise.race([promise1,timeOutPromise(5000)]).then(res&#x3D;&gt;&#123;&#125;)\nå¤åˆ¶ä»£ç \n\n5. finally()\nfinallyæ–¹æ³•ç”¨äºæŒ‡å®šä¸ç®¡ Promise å¯¹è±¡æœ€åçŠ¶æ€å¦‚ä½•ï¼Œéƒ½ä¼šæ‰§è¡Œçš„æ“ä½œã€‚è¯¥æ–¹æ³•æ˜¯ ES2018 å¼•å…¥æ ‡å‡†çš„ã€‚\npromise\n.then(result &#x3D;&gt; &#123;Â·Â·Â·&#125;)\n.catch(error &#x3D;&gt; &#123;Â·Â·Â·&#125;)\n.finally(() &#x3D;&gt; &#123;Â·Â·Â·&#125;);\nå¤åˆ¶ä»£ç \n\nä¸Šé¢ä»£ç ä¸­ï¼Œä¸ç®¡promiseæœ€åçš„çŠ¶æ€ï¼Œåœ¨æ‰§è¡Œå®Œthenæˆ–catchæŒ‡å®šçš„å›è°ƒå‡½æ•°ä»¥åï¼Œéƒ½ä¼šæ‰§è¡Œfinallyæ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼ŒæœåŠ¡å™¨ä½¿ç”¨ Promise å¤„ç†è¯·æ±‚ï¼Œç„¶åä½¿ç”¨finallyæ–¹æ³•å…³æ‰æœåŠ¡å™¨ã€‚\nserver.listen(port)\n  .then(function () &#123;\n    &#x2F;&#x2F; ...\n  &#125;)\n  .finally(server.stop);\nå¤åˆ¶ä»£ç \n\nfinallyæ–¹æ³•çš„å›è°ƒå‡½æ•°ä¸æ¥å—ä»»ä½•å‚æ•°ï¼Œè¿™æ„å‘³ç€æ²¡æœ‰åŠæ³•çŸ¥é“ï¼Œå‰é¢çš„ Promise çŠ¶æ€åˆ°åº•æ˜¯fulfilledè¿˜æ˜¯rejectedã€‚è¿™è¡¨æ˜ï¼Œfinallyæ–¹æ³•é‡Œé¢çš„æ“ä½œï¼Œåº”è¯¥æ˜¯ä¸çŠ¶æ€æ— å…³çš„ï¼Œä¸ä¾èµ–äº Promise çš„æ‰§è¡Œç»“æœã€‚finallyæœ¬è´¨ä¸Šæ˜¯thenæ–¹æ³•çš„ç‰¹ä¾‹ï¼š\npromise\n.finally(() &#x3D;&gt; &#123;\n  &#x2F;&#x2F; è¯­å¥\n&#125;);\n&#x2F;&#x2F; ç­‰åŒäº\npromise\n.then(\n  result &#x3D;&gt; &#123;\n    &#x2F;&#x2F; è¯­å¥\n    return result;\n  &#125;,\n  error &#x3D;&gt; &#123;\n    &#x2F;&#x2F; è¯­å¥\n    throw error;\n  &#125;\n);\nå¤åˆ¶ä»£ç \n\nä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœä¸ä½¿ç”¨finallyæ–¹æ³•ï¼ŒåŒæ ·çš„è¯­å¥éœ€è¦ä¸ºæˆåŠŸå’Œå¤±è´¥ä¸¤ç§æƒ…å†µå„å†™ä¸€æ¬¡ã€‚æœ‰äº†finallyæ–¹æ³•ï¼Œåˆ™åªéœ€è¦å†™ä¸€æ¬¡ã€‚\n5. Promiseè§£å†³äº†ä»€ä¹ˆé—®é¢˜åœ¨å·¥ä½œä¸­ç»å¸¸ä¼šç¢°åˆ°è¿™æ ·ä¸€ä¸ªéœ€æ±‚ï¼Œæ¯”å¦‚æˆ‘ä½¿ç”¨ajaxå‘ä¸€ä¸ªAè¯·æ±‚åï¼ŒæˆåŠŸåæ‹¿åˆ°æ•°æ®ï¼Œéœ€è¦æŠŠæ•°æ®ä¼ ç»™Bè¯·æ±‚ï¼›é‚£ä¹ˆéœ€è¦å¦‚ä¸‹ç¼–å†™ä»£ç ï¼š\nlet fs &#x3D; require(&#39;fs&#39;)\nfs.readFile(&#39;.&#x2F;a.txt&#39;,&#39;utf8&#39;,function(err,data)&#123;\n  fs.readFile(data,&#39;utf8&#39;,function(err,data)&#123;\n    fs.readFile(data,&#39;utf8&#39;,function(err,data)&#123;\n      console.log(data)\n    &#125;)\n  &#125;)\n&#125;)\nå¤åˆ¶ä»£ç \n\nä¸Šé¢çš„ä»£ç æœ‰å¦‚ä¸‹ç¼ºç‚¹ï¼š\n\nåä¸€ä¸ªè¯·æ±‚éœ€è¦ä¾èµ–äºå‰ä¸€ä¸ªè¯·æ±‚æˆåŠŸåï¼Œå°†æ•°æ®å¾€ä¸‹ä¼ é€’ï¼Œä¼šå¯¼è‡´å¤šä¸ªajaxè¯·æ±‚åµŒå¥—çš„æƒ…å†µï¼Œä»£ç ä¸å¤Ÿç›´è§‚ã€‚\nå¦‚æœå‰åä¸¤ä¸ªè¯·æ±‚ä¸éœ€è¦ä¼ é€’å‚æ•°çš„æƒ…å†µä¸‹ï¼Œé‚£ä¹ˆåä¸€ä¸ªè¯·æ±‚ä¹Ÿéœ€è¦å‰ä¸€ä¸ªè¯·æ±‚æˆåŠŸåå†æ‰§è¡Œä¸‹ä¸€æ­¥æ“ä½œï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œé‚£ä¹ˆä¹Ÿéœ€è¦å¦‚ä¸Šç¼–å†™ä»£ç ï¼Œå¯¼è‡´ä»£ç ä¸å¤Ÿç›´è§‚ã€‚\n\nPromiseå‡ºç°ä¹‹åï¼Œä»£ç å˜æˆè¿™æ ·ï¼š\nlet fs &#x3D; require(&#39;fs&#39;)\nfunction read(url)&#123;\n  return new Promise((resolve,reject)&#x3D;&gt;&#123;\n    fs.readFile(url,&#39;utf8&#39;,function(error,data)&#123;\n      error &amp;&amp; reject(error)\n      resolve(data)\n    &#125;)\n  &#125;)\n&#125;\nread(&#39;.&#x2F;a.txt&#39;).then(data&#x3D;&gt;&#123;\n  return read(data) \n&#125;).then(data&#x3D;&gt;&#123;\n  return read(data)  \n&#125;).then(data&#x3D;&gt;&#123;\n  console.log(data)\n&#125;)\nå¤åˆ¶ä»£ç \n\nè¿™æ ·ä»£ç çœ‹èµ·äº†å°±ç®€æ´äº†å¾ˆå¤šï¼Œè§£å†³äº†åœ°ç‹±å›è°ƒçš„é—®é¢˜ã€‚\n6. Promise.allå’ŒPromise.raceçš„åŒºåˆ«çš„ä½¿ç”¨åœºæ™¯ï¼ˆ1ï¼‰Promise.all Promise.allå¯ä»¥å°†å¤šä¸ªPromiseå®ä¾‹åŒ…è£…æˆä¸€ä¸ªæ–°çš„Promiseå®ä¾‹ã€‚åŒæ—¶ï¼ŒæˆåŠŸå’Œå¤±è´¥çš„è¿”å›å€¼æ˜¯ä¸åŒçš„ï¼ŒæˆåŠŸçš„æ—¶å€™è¿”å›çš„æ˜¯ä¸€ä¸ªç»“æœæ•°ç»„ï¼Œè€Œå¤±è´¥çš„æ—¶å€™åˆ™è¿”å›æœ€å…ˆè¢«rejectå¤±è´¥çŠ¶æ€çš„å€¼ã€‚\nPromise.allä¸­ä¼ å…¥çš„æ˜¯æ•°ç»„ï¼Œè¿”å›çš„ä¹Ÿæ˜¯æ˜¯æ•°ç»„ï¼Œå¹¶ä¸”ä¼šå°†è¿›è¡Œæ˜ å°„ï¼Œä¼ å…¥çš„promiseå¯¹è±¡è¿”å›çš„å€¼æ˜¯æŒ‰ç…§é¡ºåºåœ¨æ•°ç»„ä¸­æ’åˆ—çš„ï¼Œä½†æ˜¯æ³¨æ„çš„æ˜¯ä»–ä»¬æ‰§è¡Œçš„é¡ºåºå¹¶ä¸æ˜¯æŒ‰ç…§é¡ºåºçš„ï¼Œé™¤éå¯è¿­ä»£å¯¹è±¡ä¸ºç©ºã€‚\néœ€è¦æ³¨æ„ï¼ŒPromise.allè·å¾—çš„æˆåŠŸç»“æœçš„æ•°ç»„é‡Œé¢çš„æ•°æ®é¡ºåºå’ŒPromise.allæ¥æ”¶åˆ°çš„æ•°ç»„é¡ºåºæ˜¯ä¸€è‡´çš„ï¼Œè¿™æ ·å½“é‡åˆ°å‘é€å¤šä¸ªè¯·æ±‚å¹¶æ ¹æ®è¯·æ±‚é¡ºåºè·å–å’Œä½¿ç”¨æ•°æ®çš„åœºæ™¯ï¼Œå°±å¯ä»¥ä½¿ç”¨Promise.allæ¥è§£å†³ã€‚\nï¼ˆ2ï¼‰Promise.race\né¡¾åæ€ä¹‰ï¼ŒPromse.raceå°±æ˜¯èµ›è·‘çš„æ„æ€ï¼Œæ„æ€å°±æ˜¯è¯´ï¼ŒPromise.race([p1, p2, p3])é‡Œé¢å“ªä¸ªç»“æœè·å¾—çš„å¿«ï¼Œå°±è¿”å›é‚£ä¸ªç»“æœï¼Œä¸ç®¡ç»“æœæœ¬èº«æ˜¯æˆåŠŸçŠ¶æ€è¿˜æ˜¯å¤±è´¥çŠ¶æ€ã€‚å½“è¦åšä¸€ä»¶äº‹ï¼Œè¶…è¿‡å¤šé•¿æ—¶é—´å°±ä¸åšäº†ï¼Œå¯ä»¥ç”¨è¿™ä¸ªæ–¹æ³•æ¥è§£å†³ï¼š\nPromise.race([promise1,timeOutPromise(5000)]).then(res&#x3D;&gt;&#123;&#125;)\nå¤åˆ¶ä»£ç \n\n7. å¯¹async&#x2F;await çš„ç†è§£async&#x2F;awaitå…¶å®æ˜¯Generator çš„è¯­æ³•ç³–ï¼Œå®ƒèƒ½å®ç°çš„æ•ˆæœéƒ½èƒ½ç”¨thené“¾æ¥å®ç°ï¼Œå®ƒæ˜¯ä¸ºä¼˜åŒ–thené“¾è€Œå¼€å‘å‡ºæ¥çš„ã€‚ä»å­—é¢ä¸Šæ¥çœ‹ï¼Œasyncæ˜¯â€œå¼‚æ­¥â€çš„ç®€å†™ï¼Œawaitåˆ™ä¸ºç­‰å¾…ï¼Œæ‰€ä»¥å¾ˆå¥½ç†è§£async ç”¨äºç”³æ˜ä¸€ä¸ª function æ˜¯å¼‚æ­¥çš„ï¼Œè€Œ await ç”¨äºç­‰å¾…ä¸€ä¸ªå¼‚æ­¥æ–¹æ³•æ‰§è¡Œå®Œæˆã€‚å½“ç„¶è¯­æ³•ä¸Šå¼ºåˆ¶è§„å®šawaitåªèƒ½å‡ºç°åœ¨asnycå‡½æ•°ä¸­ï¼Œå…ˆæ¥çœ‹çœ‹asyncå‡½æ•°è¿”å›äº†ä»€ä¹ˆï¼š\nasync function testAsy()&#123;\n   return &#39;hello world&#39;;\n&#125;\nlet result &#x3D; testAsy(); \nconsole.log(result)\nå¤åˆ¶ä»£ç \n\n\næ‰€ä»¥ï¼Œasync å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ã€‚async å‡½æ•°ï¼ˆåŒ…å«å‡½æ•°è¯­å¥ã€å‡½æ•°è¡¨è¾¾å¼ã€Lambdaè¡¨è¾¾å¼ï¼‰ä¼šè¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå¦‚æœåœ¨å‡½æ•°ä¸­ return ä¸€ä¸ªç›´æ¥é‡ï¼Œasync ä¼šæŠŠè¿™ä¸ªç›´æ¥é‡é€šè¿‡ Promise.resolve() å°è£…æˆ Promise å¯¹è±¡ã€‚\nasync å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œæ‰€ä»¥åœ¨æœ€å¤–å±‚ä¸èƒ½ç”¨ await è·å–å…¶è¿”å›å€¼çš„æƒ…å†µä¸‹ï¼Œå½“ç„¶åº”è¯¥ç”¨åŸæ¥çš„æ–¹å¼ï¼šthen() é“¾æ¥å¤„ç†è¿™ä¸ª Promise å¯¹è±¡ï¼Œå°±åƒè¿™æ ·ï¼š\nasync function testAsy()&#123;\n   return &#39;hello world&#39;\n&#125;\nlet result &#x3D; testAsy() \nconsole.log(result)\nresult.then(v&#x3D;&gt;&#123;\n    console.log(v)   &#x2F;&#x2F; hello world\n&#125;)\nå¤åˆ¶ä»£ç \n\né‚£å¦‚æœ async å‡½æ•°æ²¡æœ‰è¿”å›å€¼ï¼Œåˆè¯¥å¦‚ä½•ï¼Ÿå¾ˆå®¹æ˜“æƒ³åˆ°ï¼Œå®ƒä¼šè¿”å› Promise.resolve(undefined)ã€‚\nè”æƒ³ä¸€ä¸‹ Promise çš„ç‰¹ç‚¹â€”â€”æ— ç­‰å¾…ï¼Œæ‰€ä»¥åœ¨æ²¡æœ‰ await çš„æƒ…å†µä¸‹æ‰§è¡Œ async å‡½æ•°ï¼Œå®ƒä¼šç«‹å³æ‰§è¡Œï¼Œè¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå¹¶ä¸”ï¼Œç»ä¸ä¼šé˜»å¡åé¢çš„è¯­å¥ã€‚è¿™å’Œæ™®é€šè¿”å› Promise å¯¹è±¡çš„å‡½æ•°å¹¶æ— äºŒè‡´ã€‚\næ³¨æ„ï¼š Promise.resolve(x) å¯ä»¥çœ‹ä½œæ˜¯ new Promise(resolve =&gt; resolve(x)) çš„ç®€å†™ï¼Œå¯ä»¥ç”¨äºå¿«é€Ÿå°è£…å­—é¢é‡å¯¹è±¡æˆ–å…¶ä»–å¯¹è±¡ï¼Œå°†å…¶å°è£…æˆ Promise å®ä¾‹ã€‚\n8. await åˆ°åº•åœ¨ç­‰å•¥ï¼Ÿawait åœ¨ç­‰å¾…ä»€ä¹ˆå‘¢ï¼Ÿ ä¸€èˆ¬æ¥è¯´ï¼Œéƒ½è®¤ä¸º await æ˜¯åœ¨ç­‰å¾…ä¸€ä¸ª async å‡½æ•°å®Œæˆã€‚ä¸è¿‡æŒ‰è¯­æ³•è¯´æ˜ï¼Œawait ç­‰å¾…çš„æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œè¿™ä¸ªè¡¨è¾¾å¼çš„è®¡ç®—ç»“æœæ˜¯ Promise å¯¹è±¡æˆ–è€…å…¶å®ƒå€¼ï¼ˆæ¢å¥è¯è¯´ï¼Œå°±æ˜¯æ²¡æœ‰ç‰¹æ®Šé™å®šï¼‰ã€‚\nå› ä¸º async å‡½æ•°è¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œæ‰€ä»¥ await å¯ä»¥ç”¨äºç­‰å¾…ä¸€ä¸ª async å‡½æ•°çš„è¿”å›å€¼â€”â€”è¿™ä¹Ÿå¯ä»¥è¯´æ˜¯ await åœ¨ç­‰ async å‡½æ•°ï¼Œä½†è¦æ¸…æ¥šï¼Œå®ƒç­‰çš„å®é™…æ˜¯ä¸€ä¸ªè¿”å›å€¼ã€‚æ³¨æ„åˆ° await ä¸ä»…ä»…ç”¨äºç­‰ Promise å¯¹è±¡ï¼Œå®ƒå¯ä»¥ç­‰ä»»æ„è¡¨è¾¾å¼çš„ç»“æœï¼Œæ‰€ä»¥ï¼Œawait åé¢å®é™…æ˜¯å¯ä»¥æ¥æ™®é€šå‡½æ•°è°ƒç”¨æˆ–è€…ç›´æ¥é‡çš„ã€‚æ‰€ä»¥ä¸‹é¢è¿™ä¸ªç¤ºä¾‹å®Œå…¨å¯ä»¥æ­£ç¡®è¿è¡Œï¼š\nfunction getSomething() &#123;\n    return &quot;something&quot;;\n&#125;\nasync function testAsync() &#123;\n    return Promise.resolve(&quot;hello async&quot;);\n&#125;\nasync function test() &#123;\n    const v1 &#x3D; await getSomething();\n    const v2 &#x3D; await testAsync();\n    console.log(v1, v2);\n&#125;\ntest();\nå¤åˆ¶ä»£ç \n\nawait è¡¨è¾¾å¼çš„è¿ç®—ç»“æœå–å†³äºå®ƒç­‰çš„æ˜¯ä»€ä¹ˆã€‚\n\nå¦‚æœå®ƒç­‰åˆ°çš„ä¸æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œé‚£ await è¡¨è¾¾å¼çš„è¿ç®—ç»“æœå°±æ˜¯å®ƒç­‰åˆ°çš„ä¸œè¥¿ã€‚\nå¦‚æœå®ƒç­‰åˆ°çš„æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œawait å°±å¿™èµ·æ¥äº†ï¼Œå®ƒä¼šé˜»å¡åé¢çš„ä»£ç ï¼Œç­‰ç€ Promise å¯¹è±¡ resolveï¼Œç„¶åå¾—åˆ° resolve çš„å€¼ï¼Œä½œä¸º await è¡¨è¾¾å¼çš„è¿ç®—ç»“æœã€‚\n\næ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š\nfunction testAsy(x)&#123;\n   return new Promise(resolve&#x3D;&gt;&#123;setTimeout(() &#x3D;&gt; &#123;\n       resolve(x);\n     &#125;, 3000)\n    &#125;\n   )\n&#125;\nasync function testAwt()&#123;    \n  let result &#x3D;  await testAsy(&#39;hello world&#39;);\n  console.log(result);    &#x2F;&#x2F; 3ç§’é’Ÿä¹‹åå‡ºç°hello world\n  console.log(&#39;cuger&#39;)   &#x2F;&#x2F; 3ç§’é’Ÿä¹‹åå‡ºç°cug\n&#125;\ntestAwt();\nconsole.log(&#39;cug&#39;)  &#x2F;&#x2F;ç«‹å³è¾“å‡ºcug\nå¤åˆ¶ä»£ç \n\nè¿™å°±æ˜¯ await å¿…é¡»ç”¨åœ¨ async å‡½æ•°ä¸­çš„åŸå› ã€‚async å‡½æ•°è°ƒç”¨ä¸ä¼šé€ æˆé˜»å¡ï¼Œå®ƒå†…éƒ¨æ‰€æœ‰çš„é˜»å¡éƒ½è¢«å°è£…åœ¨ä¸€ä¸ª Promise å¯¹è±¡ä¸­å¼‚æ­¥æ‰§è¡Œã€‚awaitæš‚åœå½“å‰asyncçš„æ‰§è¡Œï¼Œæ‰€ä»¥â€™cugâ€™â€™æœ€å…ˆè¾“å‡ºï¼Œhello worldâ€™å’Œâ€˜cugerâ€™æ˜¯3ç§’é’ŸååŒæ—¶å‡ºç°çš„ã€‚\n9. async&#x2F;awaitçš„ä¼˜åŠ¿å•ä¸€çš„ Promise é“¾å¹¶ä¸èƒ½å‘ç° async&#x2F;await çš„ä¼˜åŠ¿ï¼Œä½†æ˜¯ï¼Œå¦‚æœéœ€è¦å¤„ç†ç”±å¤šä¸ª Promise ç»„æˆçš„ then é“¾çš„æ—¶å€™ï¼Œä¼˜åŠ¿å°±èƒ½ä½“ç°å‡ºæ¥äº†ï¼ˆå¾ˆæœ‰æ„æ€ï¼ŒPromise é€šè¿‡ then é“¾æ¥è§£å†³å¤šå±‚å›è°ƒçš„é—®é¢˜ï¼Œç°åœ¨åˆç”¨ async&#x2F;await æ¥è¿›ä¸€æ­¥ä¼˜åŒ–å®ƒï¼‰ã€‚\nå‡è®¾ä¸€ä¸ªä¸šåŠ¡ï¼Œåˆ†å¤šä¸ªæ­¥éª¤å®Œæˆï¼Œæ¯ä¸ªæ­¥éª¤éƒ½æ˜¯å¼‚æ­¥çš„ï¼Œè€Œä¸”ä¾èµ–äºä¸Šä¸€ä¸ªæ­¥éª¤çš„ç»“æœã€‚ä»ç„¶ç”¨ setTimeout æ¥æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œï¼š\n&#x2F;**\n * ä¼ å…¥å‚æ•° nï¼Œè¡¨ç¤ºè¿™ä¸ªå‡½æ•°æ‰§è¡Œçš„æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰\n * æ‰§è¡Œçš„ç»“æœæ˜¯ n + 200ï¼Œè¿™ä¸ªå€¼å°†ç”¨äºä¸‹ä¸€æ­¥éª¤\n *&#x2F;\nfunction takeLongTime(n) &#123;\n    return new Promise(resolve &#x3D;&gt; &#123;\n        setTimeout(() &#x3D;&gt; resolve(n + 200), n);\n    &#125;);\n&#125;\nfunction step1(n) &#123;\n    console.log(&#96;step1 with $&#123;n&#125;&#96;);\n    return takeLongTime(n);\n&#125;\nfunction step2(n) &#123;\n    console.log(&#96;step2 with $&#123;n&#125;&#96;);\n    return takeLongTime(n);\n&#125;\nfunction step3(n) &#123;\n    console.log(&#96;step3 with $&#123;n&#125;&#96;);\n    return takeLongTime(n);\n&#125;\nå¤åˆ¶ä»£ç \n\nç°åœ¨ç”¨ Promise æ–¹å¼æ¥å®ç°è¿™ä¸‰ä¸ªæ­¥éª¤çš„å¤„ç†ï¼š\nfunction doIt() &#123;\n    console.time(&quot;doIt&quot;);\n    const time1 &#x3D; 300;\n    step1(time1)\n        .then(time2 &#x3D;&gt; step2(time2))\n        .then(time3 &#x3D;&gt; step3(time3))\n        .then(result &#x3D;&gt; &#123;\n            console.log(&#96;result is $&#123;result&#125;&#96;);\n            console.timeEnd(&quot;doIt&quot;);\n        &#125;);\n&#125;\ndoIt();\n&#x2F;&#x2F; c:\\var\\test&gt;node --harmony_async_await .\n&#x2F;&#x2F; step1 with 300\n&#x2F;&#x2F; step2 with 500\n&#x2F;&#x2F; step3 with 700\n&#x2F;&#x2F; result is 900\n&#x2F;&#x2F; doIt: 1507.251ms\nå¤åˆ¶ä»£ç \n\nè¾“å‡ºç»“æœ result æ˜¯ step3() çš„å‚æ•° 700 + 200 &#x3D; 900ã€‚doIt() é¡ºåºæ‰§è¡Œäº†ä¸‰ä¸ªæ­¥éª¤ï¼Œä¸€å…±ç”¨äº† 300 + 500 + 700 = 1500 æ¯«ç§’ï¼Œå’Œ console.time()/console.timeEnd() è®¡ç®—çš„ç»“æœä¸€è‡´ã€‚\nå¦‚æœç”¨ async&#x2F;await æ¥å®ç°å‘¢ï¼Œä¼šæ˜¯è¿™æ ·ï¼š\nasync function doIt() &#123;\n    console.time(&quot;doIt&quot;);\n    const time1 &#x3D; 300;\n    const time2 &#x3D; await step1(time1);\n    const time3 &#x3D; await step2(time2);\n    const result &#x3D; await step3(time3);\n    console.log(&#96;result is $&#123;result&#125;&#96;);\n    console.timeEnd(&quot;doIt&quot;);\n&#125;\ndoIt();\nå¤åˆ¶ä»£ç \n\nç»“æœå’Œä¹‹å‰çš„ Promise å®ç°æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯è¿™ä¸ªä»£ç çœ‹èµ·æ¥æ˜¯ä¸æ˜¯æ¸…æ™°å¾—å¤šï¼Œå‡ ä¹è·ŸåŒæ­¥ä»£ç ä¸€æ ·\n10. async&#x2F;awaitå¯¹æ¯”Promiseçš„ä¼˜åŠ¿\nä»£ç è¯»èµ·æ¥æ›´åŠ åŒæ­¥ï¼ŒPromiseè™½ç„¶æ‘†è„±äº†å›è°ƒåœ°ç‹±ï¼Œä½†æ˜¯thençš„é“¾å¼è°ƒâ½¤ä¹Ÿä¼šå¸¦æ¥é¢å¤–çš„é˜…è¯»è´Ÿæ‹…\nPromiseä¼ é€’ä¸­é—´å€¼â¾®å¸¸éº»çƒ¦ï¼Œâ½½async&#x2F;awaitâ¼ä¹æ˜¯åŒæ­¥çš„å†™æ³•ï¼Œâ¾®å¸¸ä¼˜é›…\né”™è¯¯å¤„ç†å‹å¥½ï¼Œasync&#x2F;awaitå¯ä»¥â½¤æˆç†Ÿçš„try&#x2F;catchï¼ŒPromiseçš„é”™è¯¯æ•è·â¾®å¸¸å†—ä½™\nè°ƒè¯•å‹å¥½ï¼ŒPromiseçš„è°ƒè¯•å¾ˆå·®ï¼Œç”±äºæ²¡æœ‰ä»£ç å—ï¼Œä½ ä¸èƒ½åœ¨â¼€ä¸ªè¿”å›è¡¨è¾¾å¼çš„ç®­å¤´å‡½æ•°ä¸­è®¾ç½®æ–­ç‚¹ï¼Œå¦‚æœä½ åœ¨â¼€ä¸ª.thenä»£ç å—ä¸­ä½¿â½¤è°ƒè¯•å™¨çš„æ­¥è¿›(step-over)åŠŸèƒ½ï¼Œè°ƒè¯•å™¨å¹¶ä¸ä¼šè¿›â¼Šåç»­çš„.thenä»£ç å—ï¼Œå› ä¸ºè°ƒè¯•å™¨åªèƒ½è·Ÿè¸ªåŒæ­¥ä»£ç çš„æ¯â¼€æ­¥ã€‚\n\n11. async&#x2F;await å¦‚ä½•æ•è·å¼‚å¸¸async function fn()&#123;\n    try&#123;\n        let a &#x3D; await Promise.reject(&#39;error&#39;)\n    &#125;catch(error)&#123;\n        console.log(error)\n    &#125;\n&#125;\nå¤åˆ¶ä»£ç \n\nå…«ã€é¢å‘å¯¹è±¡1. å¯¹è±¡åˆ›å»ºçš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿä¸€èˆ¬ä½¿ç”¨å­—é¢é‡çš„å½¢å¼ç›´æ¥åˆ›å»ºå¯¹è±¡ï¼Œä½†æ˜¯è¿™ç§åˆ›å»ºæ–¹å¼å¯¹äºåˆ›å»ºå¤§é‡ç›¸ä¼¼å¯¹è±¡çš„æ—¶å€™ï¼Œä¼šäº§ç”Ÿå¤§é‡çš„é‡å¤ä»£ç ã€‚ä½† jså’Œä¸€èˆ¬çš„é¢å‘å¯¹è±¡çš„è¯­è¨€ä¸åŒï¼Œåœ¨ ES6 ä¹‹å‰å®ƒæ²¡æœ‰ç±»çš„æ¦‚å¿µã€‚ä½†æ˜¯å¯ä»¥ä½¿ç”¨å‡½æ•°æ¥è¿›è¡Œæ¨¡æ‹Ÿï¼Œä»è€Œäº§ç”Ÿå‡ºå¯å¤ç”¨çš„å¯¹è±¡åˆ›å»ºæ–¹å¼ï¼Œå¸¸è§çš„æœ‰ä»¥ä¸‹å‡ ç§ï¼š\nï¼ˆ1ï¼‰ç¬¬ä¸€ç§æ˜¯å·¥å‚æ¨¡å¼ï¼Œå·¥å‚æ¨¡å¼çš„ä¸»è¦å·¥ä½œåŸç†æ˜¯ç”¨å‡½æ•°æ¥å°è£…åˆ›å»ºå¯¹è±¡çš„ç»†èŠ‚ï¼Œä»è€Œé€šè¿‡è°ƒç”¨å‡½æ•°æ¥è¾¾åˆ°å¤ç”¨çš„ç›®çš„ã€‚ä½†æ˜¯å®ƒæœ‰ä¸€ä¸ªå¾ˆå¤§çš„é—®é¢˜å°±æ˜¯åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡æ— æ³•å’ŒæŸä¸ªç±»å‹è”ç³»èµ·æ¥ï¼Œå®ƒåªæ˜¯ç®€å•çš„å°è£…äº†å¤ç”¨ä»£ç ï¼Œè€Œæ²¡æœ‰å»ºç«‹èµ·å¯¹è±¡å’Œç±»å‹é—´çš„å…³ç³»ã€‚\nï¼ˆ2ï¼‰ç¬¬äºŒç§æ˜¯æ„é€ å‡½æ•°æ¨¡å¼ã€‚js ä¸­æ¯ä¸€ä¸ªå‡½æ•°éƒ½å¯ä»¥ä½œä¸ºæ„é€ å‡½æ•°ï¼Œåªè¦ä¸€ä¸ªå‡½æ•°æ˜¯é€šè¿‡ new æ¥è°ƒç”¨çš„ï¼Œé‚£ä¹ˆå°±å¯ä»¥æŠŠå®ƒç§°ä¸ºæ„é€ å‡½æ•°ã€‚æ‰§è¡Œæ„é€ å‡½æ•°é¦–å…ˆä¼šåˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åå°†å¯¹è±¡çš„åŸå‹æŒ‡å‘æ„é€ å‡½æ•°çš„ prototype å±æ€§ï¼Œç„¶åå°†æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„ this æŒ‡å‘è¿™ä¸ªå¯¹è±¡ï¼Œæœ€åå†æ‰§è¡Œæ•´ä¸ªå‡½æ•°ï¼Œå¦‚æœè¿”å›å€¼ä¸æ˜¯å¯¹è±¡ï¼Œåˆ™è¿”å›æ–°å»ºçš„å¯¹è±¡ã€‚å› ä¸º this çš„å€¼æŒ‡å‘äº†æ–°å»ºçš„å¯¹è±¡ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ this ç»™å¯¹è±¡èµ‹å€¼ã€‚æ„é€ å‡½æ•°æ¨¡å¼ç›¸å¯¹äºå·¥å‚æ¨¡å¼çš„ä¼˜ç‚¹æ˜¯ï¼Œæ‰€åˆ›å»ºçš„å¯¹è±¡å’Œæ„é€ å‡½æ•°å»ºç«‹èµ·äº†è”ç³»ï¼Œå› æ­¤å¯ä»¥é€šè¿‡åŸå‹æ¥è¯†åˆ«å¯¹è±¡çš„ç±»å‹ã€‚ä½†æ˜¯æ„é€ å‡½æ•°å­˜åœ¨ä¸€ä¸ªç¼ºç‚¹å°±æ˜¯ï¼Œé€ æˆäº†ä¸å¿…è¦çš„å‡½æ•°å¯¹è±¡çš„åˆ›å»ºï¼Œå› ä¸ºåœ¨ js ä¸­å‡½æ•°ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå› æ­¤å¦‚æœå¯¹è±¡å±æ€§ä¸­å¦‚æœåŒ…å«å‡½æ•°çš„è¯ï¼Œé‚£ä¹ˆæ¯æ¬¡éƒ½ä¼šæ–°å»ºä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼Œæµªè´¹äº†ä¸å¿…è¦çš„å†…å­˜ç©ºé—´ï¼Œå› ä¸ºå‡½æ•°æ˜¯æ‰€æœ‰çš„å®ä¾‹éƒ½å¯ä»¥é€šç”¨çš„ã€‚\nï¼ˆ3ï¼‰ç¬¬ä¸‰ç§æ¨¡å¼æ˜¯åŸå‹æ¨¡å¼ï¼Œå› ä¸ºæ¯ä¸€ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ª prototype å±æ€§ï¼Œè¿™ä¸ªå±æ€§æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒåŒ…å«äº†é€šè¿‡æ„é€ å‡½æ•°åˆ›å»ºçš„æ‰€æœ‰å®ä¾‹éƒ½èƒ½å…±äº«çš„å±æ€§å’Œæ–¹æ³•ã€‚å› æ­¤å¯ä»¥ä½¿ç”¨åŸå‹å¯¹è±¡æ¥æ·»åŠ å…¬ç”¨å±æ€§å’Œæ–¹æ³•ï¼Œä»è€Œå®ç°ä»£ç çš„å¤ç”¨ã€‚è¿™ç§æ–¹å¼ç›¸å¯¹äºæ„é€ å‡½æ•°æ¨¡å¼æ¥è¯´ï¼Œè§£å†³äº†å‡½æ•°å¯¹è±¡çš„å¤ç”¨é—®é¢˜ã€‚ä½†æ˜¯è¿™ç§æ¨¡å¼ä¹Ÿå­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œä¸€ä¸ªæ˜¯æ²¡æœ‰åŠæ³•é€šè¿‡ä¼ å…¥å‚æ•°æ¥åˆå§‹åŒ–å€¼ï¼Œå¦ä¸€ä¸ªæ˜¯å¦‚æœå­˜åœ¨ä¸€ä¸ªå¼•ç”¨ç±»å‹å¦‚ Array è¿™æ ·çš„å€¼ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„å®ä¾‹å°†å…±äº«ä¸€ä¸ªå¯¹è±¡ï¼Œä¸€ä¸ªå®ä¾‹å¯¹å¼•ç”¨ç±»å‹å€¼çš„æ”¹å˜ä¼šå½±å“æ‰€æœ‰çš„å®ä¾‹ã€‚\nï¼ˆ4ï¼‰ç¬¬å››ç§æ¨¡å¼æ˜¯ç»„åˆä½¿ç”¨æ„é€ å‡½æ•°æ¨¡å¼å’ŒåŸå‹æ¨¡å¼ï¼Œè¿™æ˜¯åˆ›å»ºè‡ªå®šä¹‰ç±»å‹çš„æœ€å¸¸è§æ–¹å¼ã€‚å› ä¸ºæ„é€ å‡½æ•°æ¨¡å¼å’ŒåŸå‹æ¨¡å¼åˆ†å¼€ä½¿ç”¨éƒ½å­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œå› æ­¤å¯ä»¥ç»„åˆä½¿ç”¨è¿™ä¸¤ç§æ¨¡å¼ï¼Œé€šè¿‡æ„é€ å‡½æ•°æ¥åˆå§‹åŒ–å¯¹è±¡çš„å±æ€§ï¼Œé€šè¿‡åŸå‹å¯¹è±¡æ¥å®ç°å‡½æ•°æ–¹æ³•çš„å¤ç”¨ã€‚è¿™ç§æ–¹æ³•å¾ˆå¥½çš„è§£å†³äº†ä¸¤ç§æ¨¡å¼å•ç‹¬ä½¿ç”¨æ—¶çš„ç¼ºç‚¹ï¼Œä½†æ˜¯æœ‰ä¸€ç‚¹ä¸è¶³çš„å°±æ˜¯ï¼Œå› ä¸ºä½¿ç”¨äº†ä¸¤ç§ä¸åŒçš„æ¨¡å¼ï¼Œæ‰€ä»¥å¯¹äºä»£ç çš„å°è£…æ€§ä¸å¤Ÿå¥½ã€‚\nï¼ˆ5ï¼‰ç¬¬äº”ç§æ¨¡å¼æ˜¯åŠ¨æ€åŸå‹æ¨¡å¼ï¼Œè¿™ä¸€ç§æ¨¡å¼å°†åŸå‹æ–¹æ³•èµ‹å€¼çš„åˆ›å»ºè¿‡ç¨‹ç§»åŠ¨åˆ°äº†æ„é€ å‡½æ•°çš„å†…éƒ¨ï¼Œé€šè¿‡å¯¹å±æ€§æ˜¯å¦å­˜åœ¨çš„åˆ¤æ–­ï¼Œå¯ä»¥å®ç°ä»…åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨å‡½æ•°æ—¶å¯¹åŸå‹å¯¹è±¡èµ‹å€¼ä¸€æ¬¡çš„æ•ˆæœã€‚è¿™ä¸€ç§æ–¹å¼å¾ˆå¥½åœ°å¯¹ä¸Šé¢çš„æ··åˆæ¨¡å¼è¿›è¡Œäº†å°è£…ã€‚\nï¼ˆ6ï¼‰ç¬¬å…­ç§æ¨¡å¼æ˜¯å¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼ï¼Œè¿™ä¸€ç§æ¨¡å¼å’Œå·¥å‚æ¨¡å¼çš„å®ç°åŸºæœ¬ç›¸åŒï¼Œæˆ‘å¯¹è¿™ä¸ªæ¨¡å¼çš„ç†è§£æ˜¯ï¼Œå®ƒä¸»è¦æ˜¯åŸºäºä¸€ä¸ªå·²æœ‰çš„ç±»å‹ï¼Œåœ¨å®ä¾‹åŒ–æ—¶å¯¹å®ä¾‹åŒ–çš„å¯¹è±¡è¿›è¡Œæ‰©å±•ã€‚è¿™æ ·æ—¢ä¸ç”¨ä¿®æ”¹åŸæ¥çš„æ„é€ å‡½æ•°ï¼Œä¹Ÿè¾¾åˆ°äº†æ‰©å±•å¯¹è±¡çš„ç›®çš„ã€‚å®ƒçš„ä¸€ä¸ªç¼ºç‚¹å’Œå·¥å‚æ¨¡å¼ä¸€æ ·ï¼Œæ— æ³•å®ç°å¯¹è±¡çš„è¯†åˆ«ã€‚\n2. å¯¹è±¡ç»§æ‰¿çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿï¼ˆ1ï¼‰ç¬¬ä¸€ç§æ˜¯ä»¥åŸå‹é“¾çš„æ–¹å¼æ¥å®ç°ç»§æ‰¿ï¼Œä½†æ˜¯è¿™ç§å®ç°æ–¹å¼å­˜åœ¨çš„ç¼ºç‚¹æ˜¯ï¼Œåœ¨åŒ…å«æœ‰å¼•ç”¨ç±»å‹çš„æ•°æ®æ—¶ï¼Œä¼šè¢«æ‰€æœ‰çš„å®ä¾‹å¯¹è±¡æ‰€å…±äº«ï¼Œå®¹æ˜“é€ æˆä¿®æ”¹çš„æ··ä¹±ã€‚è¿˜æœ‰å°±æ˜¯åœ¨åˆ›å»ºå­ç±»å‹çš„æ—¶å€™ä¸èƒ½å‘è¶…ç±»å‹ä¼ é€’å‚æ•°ã€‚\nï¼ˆ2ï¼‰ç¬¬äºŒç§æ–¹å¼æ˜¯ä½¿ç”¨å€Ÿç”¨æ„é€ å‡½æ•°çš„æ–¹å¼ï¼Œè¿™ç§æ–¹å¼æ˜¯é€šè¿‡åœ¨å­ç±»å‹çš„å‡½æ•°ä¸­è°ƒç”¨è¶…ç±»å‹çš„æ„é€ å‡½æ•°æ¥å®ç°çš„ï¼Œè¿™ä¸€ç§æ–¹æ³•è§£å†³äº†ä¸èƒ½å‘è¶…ç±»å‹ä¼ é€’å‚æ•°çš„ç¼ºç‚¹ï¼Œä½†æ˜¯å®ƒå­˜åœ¨çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯æ— æ³•å®ç°å‡½æ•°æ–¹æ³•çš„å¤ç”¨ï¼Œå¹¶ä¸”è¶…ç±»å‹åŸå‹å®šä¹‰çš„æ–¹æ³•å­ç±»å‹ä¹Ÿæ²¡æœ‰åŠæ³•è®¿é—®åˆ°ã€‚\nï¼ˆ3ï¼‰ç¬¬ä¸‰ç§æ–¹å¼æ˜¯ç»„åˆç»§æ‰¿ï¼Œç»„åˆç»§æ‰¿æ˜¯å°†åŸå‹é“¾å’Œå€Ÿç”¨æ„é€ å‡½æ•°ç»„åˆèµ·æ¥ä½¿ç”¨çš„ä¸€ç§æ–¹å¼ã€‚é€šè¿‡å€Ÿç”¨æ„é€ å‡½æ•°çš„æ–¹å¼æ¥å®ç°ç±»å‹çš„å±æ€§çš„ç»§æ‰¿ï¼Œé€šè¿‡å°†å­ç±»å‹çš„åŸå‹è®¾ç½®ä¸ºè¶…ç±»å‹çš„å®ä¾‹æ¥å®ç°æ–¹æ³•çš„ç»§æ‰¿ã€‚è¿™ç§æ–¹å¼è§£å†³äº†ä¸Šé¢çš„ä¸¤ç§æ¨¡å¼å•ç‹¬ä½¿ç”¨æ—¶çš„é—®é¢˜ï¼Œä½†æ˜¯ç”±äºæˆ‘ä»¬æ˜¯ä»¥è¶…ç±»å‹çš„å®ä¾‹æ¥ä½œä¸ºå­ç±»å‹çš„åŸå‹ï¼Œæ‰€ä»¥è°ƒç”¨äº†ä¸¤æ¬¡è¶…ç±»çš„æ„é€ å‡½æ•°ï¼Œé€ æˆäº†å­ç±»å‹çš„åŸå‹ä¸­å¤šäº†å¾ˆå¤šä¸å¿…è¦çš„å±æ€§ã€‚\nï¼ˆ4ï¼‰ç¬¬å››ç§æ–¹å¼æ˜¯åŸå‹å¼ç»§æ‰¿ï¼ŒåŸå‹å¼ç»§æ‰¿çš„ä¸»è¦æ€è·¯å°±æ˜¯åŸºäºå·²æœ‰çš„å¯¹è±¡æ¥åˆ›å»ºæ–°çš„å¯¹è±¡ï¼Œå®ç°çš„åŸç†æ˜¯ï¼Œå‘å‡½æ•°ä¸­ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åè¿”å›ä¸€ä¸ªä»¥è¿™ä¸ªå¯¹è±¡ä¸ºåŸå‹çš„å¯¹è±¡ã€‚è¿™ç§ç»§æ‰¿çš„æ€è·¯ä¸»è¦ä¸æ˜¯ä¸ºäº†å®ç°åˆ›é€ ä¸€ç§æ–°çš„ç±»å‹ï¼Œåªæ˜¯å¯¹æŸä¸ªå¯¹è±¡å®ç°ä¸€ç§ç®€å•ç»§æ‰¿ï¼ŒES5 ä¸­å®šä¹‰çš„ Object.create() æ–¹æ³•å°±æ˜¯åŸå‹å¼ç»§æ‰¿çš„å®ç°ã€‚ç¼ºç‚¹ä¸åŸå‹é“¾æ–¹å¼ç›¸åŒã€‚\nï¼ˆ5ï¼‰ç¬¬äº”ç§æ–¹å¼æ˜¯å¯„ç”Ÿå¼ç»§æ‰¿ï¼Œå¯„ç”Ÿå¼ç»§æ‰¿çš„æ€è·¯æ˜¯åˆ›å»ºä¸€ä¸ªç”¨äºå°è£…ç»§æ‰¿è¿‡ç¨‹çš„å‡½æ•°ï¼Œé€šè¿‡ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åå¤åˆ¶ä¸€ä¸ªå¯¹è±¡çš„å‰¯æœ¬ï¼Œç„¶åå¯¹è±¡è¿›è¡Œæ‰©å±•ï¼Œæœ€åè¿”å›è¿™ä¸ªå¯¹è±¡ã€‚è¿™ä¸ªæ‰©å±•çš„è¿‡ç¨‹å°±å¯ä»¥ç†è§£æ˜¯ä¸€ç§ç»§æ‰¿ã€‚è¿™ç§ç»§æ‰¿çš„ä¼˜ç‚¹å°±æ˜¯å¯¹ä¸€ä¸ªç®€å•å¯¹è±¡å®ç°ç»§æ‰¿ï¼Œå¦‚æœè¿™ä¸ªå¯¹è±¡ä¸æ˜¯è‡ªå®šä¹‰ç±»å‹æ—¶ã€‚ç¼ºç‚¹æ˜¯æ²¡æœ‰åŠæ³•å®ç°å‡½æ•°çš„å¤ç”¨ã€‚\nï¼ˆ6ï¼‰ç¬¬å…­ç§æ–¹å¼æ˜¯å¯„ç”Ÿå¼ç»„åˆç»§æ‰¿ï¼Œç»„åˆç»§æ‰¿çš„ç¼ºç‚¹å°±æ˜¯ä½¿ç”¨è¶…ç±»å‹çš„å®ä¾‹åšä¸ºå­ç±»å‹çš„åŸå‹ï¼Œå¯¼è‡´æ·»åŠ äº†ä¸å¿…è¦çš„åŸå‹å±æ€§ã€‚å¯„ç”Ÿå¼ç»„åˆç»§æ‰¿çš„æ–¹å¼æ˜¯ä½¿ç”¨è¶…ç±»å‹çš„åŸå‹çš„å‰¯æœ¬æ¥ä½œä¸ºå­ç±»å‹çš„åŸå‹ï¼Œè¿™æ ·å°±é¿å…äº†åˆ›å»ºä¸å¿…è¦çš„å±æ€§ã€‚\nä¹ã€åƒåœ¾å›æ”¶ä¸å†…å­˜æ³„æ¼1. æµè§ˆå™¨çš„åƒåœ¾å›æ”¶æœºåˆ¶ï¼ˆ1ï¼‰åƒåœ¾å›æ”¶çš„æ¦‚å¿µåƒåœ¾å›æ”¶ï¼šJavaScriptä»£ç è¿è¡Œæ—¶ï¼Œéœ€è¦åˆ†é…å†…å­˜ç©ºé—´æ¥å‚¨å­˜å˜é‡å’Œå€¼ã€‚å½“å˜é‡ä¸åœ¨å‚ä¸è¿è¡Œæ—¶ï¼Œå°±éœ€è¦ç³»ç»Ÿæ”¶å›è¢«å ç”¨çš„å†…å­˜ç©ºé—´ï¼Œè¿™å°±æ˜¯åƒåœ¾å›æ”¶ã€‚\nå›æ”¶æœºåˆ¶ï¼š\n\nJavascript å…·æœ‰è‡ªåŠ¨åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œä¼šå®šæœŸå¯¹é‚£äº›ä¸å†ä½¿ç”¨çš„å˜é‡ã€å¯¹è±¡æ‰€å ç”¨çš„å†…å­˜è¿›è¡Œé‡Šæ”¾ï¼ŒåŸç†å°±æ˜¯æ‰¾åˆ°ä¸å†ä½¿ç”¨çš„å˜é‡ï¼Œç„¶åé‡Šæ”¾æ‰å…¶å ç”¨çš„å†…å­˜ã€‚\nJavaScriptä¸­å­˜åœ¨ä¸¤ç§å˜é‡ï¼šå±€éƒ¨å˜é‡å’Œå…¨å±€å˜é‡ã€‚å…¨å±€å˜é‡çš„ç”Ÿå‘½å‘¨æœŸä¼šæŒç»­è¦é¡µé¢å¸è½½ï¼›è€Œå±€éƒ¨å˜é‡å£°æ˜åœ¨å‡½æ•°ä¸­ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸä»å‡½æ•°æ‰§è¡Œå¼€å§‹ï¼Œç›´åˆ°å‡½æ•°æ‰§è¡Œç»“æŸï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå±€éƒ¨å˜é‡ä¼šåœ¨å †æˆ–æ ˆä¸­å­˜å‚¨å®ƒä»¬çš„å€¼ï¼Œå½“å‡½æ•°æ‰§è¡Œç»“æŸåï¼Œè¿™äº›å±€éƒ¨å˜é‡ä¸å†è¢«ä½¿ç”¨ï¼Œå®ƒä»¬æ‰€å æœ‰çš„ç©ºé—´å°±ä¼šè¢«é‡Šæ”¾ã€‚\nä¸è¿‡ï¼Œå½“å±€éƒ¨å˜é‡è¢«å¤–éƒ¨å‡½æ•°ä½¿ç”¨æ—¶ï¼Œå…¶ä¸­ä¸€ç§æƒ…å†µå°±æ˜¯é—­åŒ…ï¼Œåœ¨å‡½æ•°æ‰§è¡Œç»“æŸåï¼Œå‡½æ•°å¤–éƒ¨çš„å˜é‡ä¾ç„¶æŒ‡å‘å‡½æ•°å†…éƒ¨çš„å±€éƒ¨å˜é‡ï¼Œæ­¤æ—¶å±€éƒ¨å˜é‡ä¾ç„¶åœ¨è¢«ä½¿ç”¨ï¼Œæ‰€ä»¥ä¸ä¼šå›æ”¶ã€‚\n\nï¼ˆ2ï¼‰åƒåœ¾å›æ”¶çš„æ–¹å¼æµè§ˆå™¨é€šå¸¸ä½¿ç”¨çš„åƒåœ¾å›æ”¶æ–¹æ³•æœ‰ä¸¤ç§ï¼šæ ‡è®°æ¸…é™¤ï¼Œå¼•ç”¨è®¡æ•°ã€‚ 1ï¼‰æ ‡è®°æ¸…é™¤\n\næ ‡è®°æ¸…é™¤æ˜¯æµè§ˆå™¨å¸¸è§çš„åƒåœ¾å›æ”¶æ–¹å¼ï¼Œå½“å˜é‡è¿›å…¥æ‰§è¡Œç¯å¢ƒæ—¶ï¼Œå°±æ ‡è®°è¿™ä¸ªå˜é‡â€œè¿›å…¥ç¯å¢ƒâ€ï¼Œè¢«æ ‡è®°ä¸ºâ€œè¿›å…¥ç¯å¢ƒâ€çš„å˜é‡æ˜¯ä¸èƒ½è¢«å›æ”¶çš„ï¼Œå› ä¸ºä»–ä»¬æ­£åœ¨è¢«ä½¿ç”¨ã€‚å½“å˜é‡ç¦»å¼€ç¯å¢ƒæ—¶ï¼Œå°±ä¼šè¢«æ ‡è®°ä¸ºâ€œç¦»å¼€ç¯å¢ƒâ€ï¼Œè¢«æ ‡è®°ä¸ºâ€œç¦»å¼€ç¯å¢ƒâ€çš„å˜é‡ä¼šè¢«å†…å­˜é‡Šæ”¾ã€‚\nåƒåœ¾æ”¶é›†å™¨åœ¨è¿è¡Œçš„æ—¶å€™ä¼šç»™å­˜å‚¨åœ¨å†…å­˜ä¸­çš„æ‰€æœ‰å˜é‡éƒ½åŠ ä¸Šæ ‡è®°ã€‚ç„¶åï¼Œå®ƒä¼šå»æ‰ç¯å¢ƒä¸­çš„å˜é‡ä»¥åŠè¢«ç¯å¢ƒä¸­çš„å˜é‡å¼•ç”¨çš„æ ‡è®°ã€‚è€Œåœ¨æ­¤ä¹‹åå†è¢«åŠ ä¸Šæ ‡è®°çš„å˜é‡å°†è¢«è§†ä¸ºå‡†å¤‡åˆ é™¤çš„å˜é‡ï¼ŒåŸå› æ˜¯ç¯å¢ƒä¸­çš„å˜é‡å·²ç»æ— æ³•è®¿é—®åˆ°è¿™äº›å˜é‡äº†ã€‚æœ€åã€‚åƒåœ¾æ”¶é›†å™¨å®Œæˆå†…å­˜æ¸…é™¤å·¥ä½œï¼Œé”€æ¯é‚£äº›å¸¦æ ‡è®°çš„å€¼ï¼Œå¹¶å›æ”¶ä»–ä»¬æ‰€å ç”¨çš„å†…å­˜ç©ºé—´ã€‚\n\n2ï¼‰å¼•ç”¨è®¡æ•°\n\nå¦å¤–ä¸€ç§åƒåœ¾å›æ”¶æœºåˆ¶å°±æ˜¯å¼•ç”¨è®¡æ•°ï¼Œè¿™ä¸ªç”¨çš„ç›¸å¯¹è¾ƒå°‘ã€‚å¼•ç”¨è®¡æ•°å°±æ˜¯è·Ÿè¸ªè®°å½•æ¯ä¸ªå€¼è¢«å¼•ç”¨çš„æ¬¡æ•°ã€‚å½“å£°æ˜äº†ä¸€ä¸ªå˜é‡å¹¶å°†ä¸€ä¸ªå¼•ç”¨ç±»å‹èµ‹å€¼ç»™è¯¥å˜é‡æ—¶ï¼Œåˆ™è¿™ä¸ªå€¼çš„å¼•ç”¨æ¬¡æ•°å°±æ˜¯1ã€‚ç›¸åï¼Œå¦‚æœåŒ…å«å¯¹è¿™ä¸ªå€¼å¼•ç”¨çš„å˜é‡åˆå–å¾—äº†å¦å¤–ä¸€ä¸ªå€¼ï¼Œåˆ™è¿™ä¸ªå€¼çš„å¼•ç”¨æ¬¡æ•°å°±å‡1ã€‚å½“è¿™ä¸ªå¼•ç”¨æ¬¡æ•°å˜ä¸º0æ—¶ï¼Œè¯´æ˜è¿™ä¸ªå˜é‡å·²ç»æ²¡æœ‰ä»·å€¼ï¼Œå› æ­¤ï¼Œåœ¨åœ¨æœºå›æ”¶æœŸä¸‹æ¬¡å†è¿è¡Œæ—¶ï¼Œè¿™ä¸ªå˜é‡æ‰€å æœ‰çš„å†…å­˜ç©ºé—´å°±ä¼šè¢«é‡Šæ”¾å‡ºæ¥ã€‚\nè¿™ç§æ–¹æ³•ä¼šå¼•èµ·å¾ªç¯å¼•ç”¨çš„é—®é¢˜ï¼šä¾‹å¦‚ï¼š obj1å’Œobj2é€šè¿‡å±æ€§è¿›è¡Œç›¸äº’å¼•ç”¨ï¼Œä¸¤ä¸ªå¯¹è±¡çš„å¼•ç”¨æ¬¡æ•°éƒ½æ˜¯2ã€‚å½“ä½¿ç”¨å¾ªç¯è®¡æ•°æ—¶ï¼Œç”±äºå‡½æ•°æ‰§è¡Œå®Œåï¼Œä¸¤ä¸ªå¯¹è±¡éƒ½ç¦»å¼€ä½œç”¨åŸŸï¼Œå‡½æ•°æ‰§è¡Œç»“æŸï¼Œobj1å’Œobj2è¿˜å°†ä¼šç»§ç»­å­˜åœ¨ï¼Œå› æ­¤å®ƒä»¬çš„å¼•ç”¨æ¬¡æ•°æ°¸è¿œä¸ä¼šæ˜¯0ï¼Œå°±ä¼šå¼•èµ·å¾ªç¯å¼•ç”¨ã€‚\n\nfunction fun() &#123;\n    let obj1 &#x3D; &#123;&#125;;\n    let obj2 &#x3D; &#123;&#125;;\n    obj1.a &#x3D; obj2; &#x2F;&#x2F; obj1 å¼•ç”¨ obj2\n    obj2.a &#x3D; obj1; &#x2F;&#x2F; obj2 å¼•ç”¨ obj1\n&#125;\nå¤åˆ¶ä»£ç \n\nè¿™ç§æƒ…å†µä¸‹ï¼Œå°±è¦æ‰‹åŠ¨é‡Šæ”¾å˜é‡å ç”¨çš„å†…å­˜ï¼š\nobj1.a &#x3D;  null\n obj2.a &#x3D;  null\nå¤åˆ¶ä»£ç \n\nï¼ˆ3ï¼‰å‡å°‘åƒåœ¾å›æ”¶è™½ç„¶æµè§ˆå™¨å¯ä»¥è¿›è¡Œåƒåœ¾è‡ªåŠ¨å›æ”¶ï¼Œä½†æ˜¯å½“ä»£ç æ¯”è¾ƒå¤æ‚æ—¶ï¼Œåƒåœ¾å›æ”¶æ‰€å¸¦æ¥çš„ä»£ä»·æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥åº”è¯¥å°½é‡å‡å°‘åƒåœ¾å›æ”¶ã€‚\n\nå¯¹æ•°ç»„è¿›è¡Œä¼˜åŒ–ï¼š åœ¨æ¸…ç©ºä¸€ä¸ªæ•°ç»„æ—¶ï¼Œæœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯ç»™å…¶èµ‹å€¼ä¸º[ ]ï¼Œä½†æ˜¯ä¸æ­¤åŒæ—¶ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºå¯¹è±¡ï¼Œå¯ä»¥å°†æ•°ç»„çš„é•¿åº¦è®¾ç½®ä¸º0ï¼Œä»¥æ­¤æ¥è¾¾åˆ°æ¸…ç©ºæ•°ç»„çš„ç›®çš„ã€‚\nå¯¹objectè¿›è¡Œä¼˜åŒ–ï¼š å¯¹è±¡å°½é‡å¤ç”¨ï¼Œå¯¹äºä¸å†ä½¿ç”¨çš„å¯¹è±¡ï¼Œå°±å°†å…¶è®¾ç½®ä¸ºnullï¼Œå°½å¿«è¢«å›æ”¶ã€‚\nå¯¹å‡½æ•°è¿›è¡Œä¼˜åŒ–ï¼š åœ¨å¾ªç¯ä¸­çš„å‡½æ•°è¡¨è¾¾å¼ï¼Œå¦‚æœå¯ä»¥å¤ç”¨ï¼Œå°½é‡æ”¾åœ¨å‡½æ•°çš„å¤–é¢ã€‚\n\n2. å“ªäº›æƒ…å†µä¼šå¯¼è‡´å†…å­˜æ³„æ¼ä»¥ä¸‹å››ç§æƒ…å†µä¼šé€ æˆå†…å­˜çš„æ³„æ¼ï¼š\n\næ„å¤–çš„å…¨å±€å˜é‡ï¼š ç”±äºä½¿ç”¨æœªå£°æ˜çš„å˜é‡ï¼Œè€Œæ„å¤–çš„åˆ›å»ºäº†ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œè€Œä½¿è¿™ä¸ªå˜é‡ä¸€ç›´ç•™åœ¨å†…å­˜ä¸­æ— æ³•è¢«å›æ”¶ã€‚\nè¢«é—å¿˜çš„è®¡æ—¶å™¨æˆ–å›è°ƒå‡½æ•°ï¼š è®¾ç½®äº† setInterval å®šæ—¶å™¨ï¼Œè€Œå¿˜è®°å–æ¶ˆå®ƒï¼Œå¦‚æœå¾ªç¯å‡½æ•°æœ‰å¯¹å¤–éƒ¨å˜é‡çš„å¼•ç”¨çš„è¯ï¼Œé‚£ä¹ˆè¿™ä¸ªå˜é‡ä¼šè¢«ä¸€ç›´ç•™åœ¨å†…å­˜ä¸­ï¼Œè€Œæ— æ³•è¢«å›æ”¶ã€‚\nè„±ç¦» DOM çš„å¼•ç”¨ï¼š è·å–ä¸€ä¸ª DOM å…ƒç´ çš„å¼•ç”¨ï¼Œè€Œåé¢è¿™ä¸ªå…ƒç´ è¢«åˆ é™¤ï¼Œç”±äºä¸€ç›´ä¿ç•™äº†å¯¹è¿™ä¸ªå…ƒç´ çš„å¼•ç”¨ï¼Œæ‰€ä»¥å®ƒä¹Ÿæ— æ³•è¢«å›æ”¶ã€‚\né—­åŒ…ï¼š ä¸åˆç†çš„ä½¿ç”¨é—­åŒ…ï¼Œä»è€Œå¯¼è‡´æŸäº›å˜é‡ä¸€ç›´è¢«ç•™åœ¨å†…å­˜å½“ä¸­ã€‚\n\n","slug":"é¢è¯•é¢˜ç¬”è®°â€”â€”JSç¯‡(ä¸‹)","date":"2021-06-21T13:57:16.000Z","categories_index":"","tags_index":"","author_index":"Beastrong"},{"id":"7fd56521850f8ad3304286dc32e903a9","title":"é¢è¯•é¢˜ç¬”è®°â€”â€”JSç¯‡(ä¸Š)","content":"\nä¸€ã€æ•°æ®ç±»å‹1. JavaScriptæœ‰å“ªäº›æ•°æ®ç±»å‹ï¼Œå®ƒä»¬çš„åŒºåˆ«ï¼ŸJavaScriptå…±æœ‰å…«ç§æ•°æ®ç±»å‹ï¼Œåˆ†åˆ«æ˜¯ Undefinedã€Nullã€Booleanã€Numberã€Stringã€Objectã€Symbolã€BigIntã€‚\nå…¶ä¸­ Symbol å’Œ BigInt æ˜¯ES6 ä¸­æ–°å¢çš„æ•°æ®ç±»å‹ï¼š\n\nSymbol ä»£è¡¨åˆ›å»ºåç‹¬ä¸€æ— äºŒä¸”ä¸å¯å˜çš„æ•°æ®ç±»å‹ï¼Œå®ƒä¸»è¦æ˜¯ä¸ºäº†è§£å†³å¯èƒ½å‡ºç°çš„å…¨å±€å˜é‡å†²çªçš„é—®é¢˜ã€‚\nBigInt æ˜¯ä¸€ç§æ•°å­—ç±»å‹çš„æ•°æ®ï¼Œå®ƒå¯ä»¥è¡¨ç¤ºä»»æ„ç²¾åº¦æ ¼å¼çš„æ•´æ•°ï¼Œä½¿ç”¨ BigInt å¯ä»¥å®‰å…¨åœ°å­˜å‚¨å’Œæ“ä½œå¤§æ•´æ•°ï¼Œå³ä½¿è¿™ä¸ªæ•°å·²ç»è¶…å‡ºäº† Number èƒ½å¤Ÿè¡¨ç¤ºçš„å®‰å…¨æ•´æ•°èŒƒå›´ã€‚\n\nè¿™äº›æ•°æ®å¯ä»¥åˆ†ä¸ºåŸå§‹æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹ï¼š\n\næ ˆï¼šåŸå§‹æ•°æ®ç±»å‹ï¼ˆUndefinedã€Nullã€Booleanã€Numberã€Stringï¼‰\nå †ï¼šå¼•ç”¨æ•°æ®ç±»å‹ï¼ˆå¯¹è±¡ã€æ•°ç»„å’Œå‡½æ•°ï¼‰\n\nä¸¤ç§ç±»å‹çš„åŒºåˆ«åœ¨äºå­˜å‚¨ä½ç½®çš„ä¸åŒï¼š\n\nåŸå§‹æ•°æ®ç±»å‹ç›´æ¥å­˜å‚¨åœ¨æ ˆï¼ˆstackï¼‰ä¸­çš„ç®€å•æ•°æ®æ®µï¼Œå æ®ç©ºé—´å°ã€å¤§å°å›ºå®šï¼Œå±äºè¢«é¢‘ç¹ä½¿ç”¨æ•°æ®ï¼Œæ‰€ä»¥æ”¾å…¥æ ˆä¸­å­˜å‚¨ï¼›\nå¼•ç”¨æ•°æ®ç±»å‹å­˜å‚¨åœ¨å †ï¼ˆheapï¼‰ä¸­çš„å¯¹è±¡ï¼Œå æ®ç©ºé—´å¤§ã€å¤§å°ä¸å›ºå®šã€‚å¦‚æœå­˜å‚¨åœ¨æ ˆä¸­ï¼Œå°†ä¼šå½±å“ç¨‹åºè¿è¡Œçš„æ€§èƒ½ï¼›å¼•ç”¨æ•°æ®ç±»å‹åœ¨æ ˆä¸­å­˜å‚¨äº†æŒ‡é’ˆï¼Œè¯¥æŒ‡é’ˆæŒ‡å‘å †ä¸­è¯¥å®ä½“çš„èµ·å§‹åœ°å€ã€‚å½“è§£é‡Šå™¨å¯»æ‰¾å¼•ç”¨å€¼æ—¶ï¼Œä¼šé¦–å…ˆæ£€ç´¢å…¶åœ¨æ ˆä¸­çš„åœ°å€ï¼Œå–å¾—åœ°å€åä»å †ä¸­è·å¾—å®ä½“ã€‚\n\nå †å’Œæ ˆçš„æ¦‚å¿µå­˜åœ¨äºæ•°æ®ç»“æ„å’Œæ“ä½œç³»ç»Ÿå†…å­˜ä¸­ï¼Œåœ¨æ•°æ®ç»“æ„ä¸­ï¼š\n\nåœ¨æ•°æ®ç»“æ„ä¸­ï¼Œæ ˆä¸­æ•°æ®çš„å­˜å–æ–¹å¼ä¸ºå…ˆè¿›åå‡ºã€‚\nå †æ˜¯ä¸€ä¸ªä¼˜å…ˆé˜Ÿåˆ—ï¼Œæ˜¯æŒ‰ä¼˜å…ˆçº§æ¥è¿›è¡Œæ’åºçš„ï¼Œä¼˜å…ˆçº§å¯ä»¥æŒ‰ç…§å¤§å°æ¥è§„å®šã€‚\n\nåœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œå†…å­˜è¢«åˆ†ä¸ºæ ˆåŒºå’Œå †åŒºï¼š\n\næ ˆåŒºå†…å­˜ç”±ç¼–è¯‘å™¨è‡ªåŠ¨åˆ†é…é‡Šæ”¾ï¼Œå­˜æ”¾å‡½æ•°çš„å‚æ•°å€¼ï¼Œå±€éƒ¨å˜é‡çš„å€¼ç­‰ã€‚å…¶æ“ä½œæ–¹å¼ç±»ä¼¼äºæ•°æ®ç»“æ„ä¸­çš„æ ˆã€‚\nå †åŒºå†…å­˜ä¸€èˆ¬ç”±å¼€å‘ç€åˆ†é…é‡Šæ”¾ï¼Œè‹¥å¼€å‘è€…ä¸é‡Šæ”¾ï¼Œç¨‹åºç»“æŸæ—¶å¯èƒ½ç”±åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶ã€‚\n\n2. æ•°æ®ç±»å‹æ£€æµ‹çš„æ–¹å¼æœ‰å“ªäº›ï¼ˆ1ï¼‰typeof\nconsole.log(typeof 2);               &#x2F;&#x2F; number\nconsole.log(typeof true);            &#x2F;&#x2F; boolean\nconsole.log(typeof &#39;str&#39;);           &#x2F;&#x2F; string\nconsole.log(typeof []);              &#x2F;&#x2F; object    \nconsole.log(typeof function()&#123;&#125;);    &#x2F;&#x2F; function\nconsole.log(typeof &#123;&#125;);              &#x2F;&#x2F; object\nconsole.log(typeof undefined);       &#x2F;&#x2F; undefined\nconsole.log(typeof null);            &#x2F;&#x2F; object\nå¤åˆ¶ä»£ç \n\nå…¶ä¸­æ•°ç»„ã€å¯¹è±¡ã€nulléƒ½ä¼šè¢«åˆ¤æ–­ä¸ºobjectï¼Œå…¶ä»–åˆ¤æ–­éƒ½æ­£ç¡®ã€‚\nï¼ˆ2ï¼‰instanceof\ninstanceofå¯ä»¥æ­£ç¡®åˆ¤æ–­å¯¹è±¡çš„ç±»å‹ï¼Œå…¶å†…éƒ¨è¿è¡Œæœºåˆ¶æ˜¯åˆ¤æ–­åœ¨å…¶åŸå‹é“¾ä¸­èƒ½å¦æ‰¾åˆ°è¯¥ç±»å‹çš„åŸå‹ã€‚\nconsole.log(2 instanceof Number);                    &#x2F;&#x2F; false\nconsole.log(true instanceof Boolean);                &#x2F;&#x2F; false \nconsole.log(&#39;str&#39; instanceof String);                &#x2F;&#x2F; false \n \nconsole.log([] instanceof Array);                    &#x2F;&#x2F; true\nconsole.log(function()&#123;&#125; instanceof Function);       &#x2F;&#x2F; true\nconsole.log(&#123;&#125; instanceof Object);                   &#x2F;&#x2F; true\nå¤åˆ¶ä»£ç \n\nå¯ä»¥çœ‹åˆ°ï¼Œinstanceofåªèƒ½æ­£ç¡®åˆ¤æ–­å¼•ç”¨æ•°æ®ç±»å‹ï¼Œè€Œä¸èƒ½åˆ¤æ–­åŸºæœ¬æ•°æ®ç±»å‹ã€‚instanceof è¿ç®—ç¬¦å¯ä»¥ç”¨æ¥æµ‹è¯•ä¸€ä¸ªå¯¹è±¡åœ¨å…¶åŸå‹é“¾ä¸­æ˜¯å¦å­˜åœ¨ä¸€ä¸ªæ„é€ å‡½æ•°çš„ prototype å±æ€§ã€‚\nï¼ˆ3ï¼‰ constructor\nconsole.log((2).constructor &#x3D;&#x3D;&#x3D; Number); &#x2F;&#x2F; true\nconsole.log((true).constructor &#x3D;&#x3D;&#x3D; Boolean); &#x2F;&#x2F; true\nconsole.log((&#39;str&#39;).constructor &#x3D;&#x3D;&#x3D; String); &#x2F;&#x2F; true\nconsole.log(([]).constructor &#x3D;&#x3D;&#x3D; Array); &#x2F;&#x2F; true\nconsole.log((function() &#123;&#125;).constructor &#x3D;&#x3D;&#x3D; Function); &#x2F;&#x2F; true\nconsole.log((&#123;&#125;).constructor &#x3D;&#x3D;&#x3D; Object); &#x2F;&#x2F; true\nå¤åˆ¶ä»£ç \n\nconstructoræœ‰ä¸¤ä¸ªä½œç”¨ï¼Œä¸€æ˜¯åˆ¤æ–­æ•°æ®çš„ç±»å‹ï¼ŒäºŒæ˜¯å¯¹è±¡å®ä¾‹é€šè¿‡ constrcutor å¯¹è±¡è®¿é—®å®ƒçš„æ„é€ å‡½æ•°ã€‚éœ€è¦æ³¨æ„ï¼Œå¦‚æœåˆ›å»ºä¸€ä¸ªå¯¹è±¡æ¥æ”¹å˜å®ƒçš„åŸå‹ï¼Œconstructorå°±ä¸èƒ½ç”¨æ¥åˆ¤æ–­æ•°æ®ç±»å‹äº†ï¼š\nfunction Fn()&#123;&#125;;\n \nFn.prototype &#x3D; new Array();\n \nvar f &#x3D; new Fn();\n \nconsole.log(f.constructor&#x3D;&#x3D;&#x3D;Fn);    &#x2F;&#x2F; false\nconsole.log(f.constructor&#x3D;&#x3D;&#x3D;Array); &#x2F;&#x2F; true\nå¤åˆ¶ä»£ç \n\nï¼ˆ4ï¼‰Object.prototype.toString.call()\nObject.prototype.toString.call() ä½¿ç”¨ Object å¯¹è±¡çš„åŸå‹æ–¹æ³• toString æ¥åˆ¤æ–­æ•°æ®ç±»å‹ï¼š\nvar a &#x3D; Object.prototype.toString;\n \nconsole.log(a.call(2));\nconsole.log(a.call(true));\nconsole.log(a.call(&#39;str&#39;));\nconsole.log(a.call([]));\nconsole.log(a.call(function()&#123;&#125;));\nconsole.log(a.call(&#123;&#125;));\nconsole.log(a.call(undefined));\nconsole.log(a.call(null));\nå¤åˆ¶ä»£ç \n\nåŒæ ·æ˜¯æ£€æµ‹å¯¹è±¡objè°ƒç”¨toStringæ–¹æ³•ï¼Œobj.toString()çš„ç»“æœå’ŒObject.prototype.toString.call(obj)çš„ç»“æœä¸ä¸€æ ·ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ\nè¿™æ˜¯å› ä¸ºtoStringæ˜¯Objectçš„åŸå‹æ–¹æ³•ï¼Œè€ŒArrayã€functionç­‰ç±»å‹ä½œä¸ºObjectçš„å®ä¾‹ï¼Œéƒ½é‡å†™äº†toStringæ–¹æ³•ã€‚ä¸åŒçš„å¯¹è±¡ç±»å‹è°ƒç”¨toStringæ–¹æ³•æ—¶ï¼Œæ ¹æ®åŸå‹é“¾çš„çŸ¥è¯†ï¼Œè°ƒç”¨çš„æ˜¯å¯¹åº”çš„é‡å†™ä¹‹åçš„toStringæ–¹æ³•ï¼ˆfunctionç±»å‹è¿”å›å†…å®¹ä¸ºå‡½æ•°ä½“çš„å­—ç¬¦ä¸²ï¼ŒArrayç±»å‹è¿”å›å…ƒç´ ç»„æˆçš„å­—ç¬¦ä¸²â€¦ï¼‰ï¼Œè€Œä¸ä¼šå»è°ƒç”¨Objectä¸ŠåŸå‹toStringæ–¹æ³•ï¼ˆè¿”å›å¯¹è±¡çš„å…·ä½“ç±»å‹ï¼‰ï¼Œæ‰€ä»¥é‡‡ç”¨obj.toString()ä¸èƒ½å¾—åˆ°å…¶å¯¹è±¡ç±»å‹ï¼Œåªèƒ½å°†objè½¬æ¢ä¸ºå­—ç¬¦ä¸²ç±»å‹ï¼›å› æ­¤ï¼Œåœ¨æƒ³è¦å¾—åˆ°å¯¹è±¡çš„å…·ä½“ç±»å‹æ—¶ï¼Œåº”è¯¥è°ƒç”¨ObjectåŸå‹ä¸Šçš„toStringæ–¹æ³•ã€‚\n3. åˆ¤æ–­æ•°ç»„çš„æ–¹å¼æœ‰å“ªäº›\né€šè¿‡Object.prototype.toString.call()åšåˆ¤æ–­\n\nObject.prototype.toString.call(obj).slice(8,-1) &#x3D;&#x3D;&#x3D; &#39;Array&#39;;\nå¤åˆ¶ä»£ç \n\n\né€šè¿‡åŸå‹é“¾åšåˆ¤æ–­\n\nobj.__proto__ &#x3D;&#x3D;&#x3D; Array.prototype;\nå¤åˆ¶ä»£ç \n\n\né€šè¿‡ES6çš„Array.isArray()åšåˆ¤æ–­\n\nArray.isArrray(obj);\nå¤åˆ¶ä»£ç \n\n\né€šè¿‡instanceofåšåˆ¤æ–­\n\nobj instanceof Array\nå¤åˆ¶ä»£ç \n\n\né€šè¿‡Array.prototype.isPrototypeOf\n\nArray.prototype.isPrototypeOf(obj)\nå¤åˆ¶ä»£ç \n\n4. nullå’ŒundefinedåŒºåˆ«é¦–å…ˆ Undefined å’Œ Null éƒ½æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œè¿™ä¸¤ä¸ªåŸºæœ¬æ•°æ®ç±»å‹åˆ†åˆ«éƒ½åªæœ‰ä¸€ä¸ªå€¼ï¼Œå°±æ˜¯ undefined å’Œ nullã€‚\nundefined ä»£è¡¨çš„å«ä¹‰æ˜¯æœªå®šä¹‰ï¼Œnull ä»£è¡¨çš„å«ä¹‰æ˜¯ç©ºå¯¹è±¡ã€‚ä¸€èˆ¬å˜é‡å£°æ˜äº†ä½†è¿˜æ²¡æœ‰å®šä¹‰çš„æ—¶å€™ä¼šè¿”å› undefinedï¼Œnullä¸»è¦ç”¨äºèµ‹å€¼ç»™ä¸€äº›å¯èƒ½ä¼šè¿”å›å¯¹è±¡çš„å˜é‡ï¼Œä½œä¸ºåˆå§‹åŒ–ã€‚\nundefined åœ¨ JavaScript ä¸­ä¸æ˜¯ä¸€ä¸ªä¿ç•™å­—ï¼Œè¿™æ„å‘³ç€å¯ä»¥ä½¿ç”¨ undefined æ¥ä½œä¸ºä¸€ä¸ªå˜é‡åï¼Œä½†æ˜¯è¿™æ ·çš„åšæ³•æ˜¯éå¸¸å±é™©çš„ï¼Œå®ƒä¼šå½±å“å¯¹ undefined å€¼çš„åˆ¤æ–­ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€äº›æ–¹æ³•è·å¾—å®‰å…¨çš„ undefined å€¼ï¼Œæ¯”å¦‚è¯´ void 0ã€‚\nå½“å¯¹è¿™ä¸¤ç§ç±»å‹ä½¿ç”¨ typeof è¿›è¡Œåˆ¤æ–­æ—¶ï¼ŒNull ç±»å‹åŒ–ä¼šè¿”å› â€œobjectâ€ï¼Œè¿™æ˜¯ä¸€ä¸ªå†å²é—ç•™çš„é—®é¢˜ã€‚å½“ä½¿ç”¨åŒç­‰å·å¯¹ä¸¤ç§ç±»å‹çš„å€¼è¿›è¡Œæ¯”è¾ƒæ—¶ä¼šè¿”å› trueï¼Œä½¿ç”¨ä¸‰ä¸ªç­‰å·æ—¶ä¼šè¿”å› falseã€‚\n5. typeof null çš„ç»“æœæ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆï¼Ÿtypeof null çš„ç»“æœæ˜¯Objectã€‚\nåœ¨ JavaScript ç¬¬ä¸€ä¸ªç‰ˆæœ¬ä¸­ï¼Œæ‰€æœ‰å€¼éƒ½å­˜å‚¨åœ¨ 32 ä½çš„å•å…ƒä¸­ï¼Œæ¯ä¸ªå•å…ƒåŒ…å«ä¸€ä¸ªå°çš„ ç±»å‹æ ‡ç­¾(1-3 bits) ä»¥åŠå½“å‰è¦å­˜å‚¨å€¼çš„çœŸå®æ•°æ®ã€‚ç±»å‹æ ‡ç­¾å­˜å‚¨åœ¨æ¯ä¸ªå•å…ƒçš„ä½ä½ä¸­ï¼Œå…±æœ‰äº”ç§æ•°æ®ç±»å‹ï¼š\n000: object   - å½“å‰å­˜å‚¨çš„æ•°æ®æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ã€‚\n  1: int      - å½“å‰å­˜å‚¨çš„æ•°æ®æ˜¯ä¸€ä¸ª 31 ä½çš„æœ‰ç¬¦å·æ•´æ•°ã€‚\n010: double   - å½“å‰å­˜å‚¨çš„æ•°æ®æŒ‡å‘ä¸€ä¸ªåŒç²¾åº¦çš„æµ®ç‚¹æ•°ã€‚\n100: string   - å½“å‰å­˜å‚¨çš„æ•°æ®æŒ‡å‘ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚\n110: boolean  - å½“å‰å­˜å‚¨çš„æ•°æ®æ˜¯å¸ƒå°”å€¼ã€‚\nå¤åˆ¶ä»£ç \n\nå¦‚æœæœ€ä½ä½æ˜¯ 1ï¼Œåˆ™ç±»å‹æ ‡ç­¾æ ‡å¿—ä½çš„é•¿åº¦åªæœ‰ä¸€ä½ï¼›å¦‚æœæœ€ä½ä½æ˜¯ 0ï¼Œåˆ™ç±»å‹æ ‡ç­¾æ ‡å¿—ä½çš„é•¿åº¦å ä¸‰ä½ï¼Œä¸ºå­˜å‚¨å…¶ä»–å››ç§æ•°æ®ç±»å‹æä¾›äº†é¢å¤–ä¸¤ä¸ª bit çš„é•¿åº¦ã€‚\næœ‰ä¸¤ç§ç‰¹æ®Šæ•°æ®ç±»å‹ï¼š\n\nundefinedçš„å€¼æ˜¯ (-2)30(ä¸€ä¸ªè¶…å‡ºæ•´æ•°èŒƒå›´çš„æ•°å­—)ï¼›\nnull çš„å€¼æ˜¯æœºå™¨ç  NULL æŒ‡é’ˆ(null æŒ‡é’ˆçš„å€¼å…¨æ˜¯ 0)\n\né‚£ä¹Ÿå°±æ˜¯è¯´nullçš„ç±»å‹æ ‡ç­¾ä¹Ÿæ˜¯000ï¼Œå’ŒObjectçš„ç±»å‹æ ‡ç­¾ä¸€æ ·ï¼Œæ‰€ä»¥ä¼šè¢«åˆ¤å®šä¸ºObjectã€‚\n6. intanceof æ“ä½œç¬¦çš„å®ç°åŸç†åŠå®ç°instanceof è¿ç®—ç¬¦ç”¨äºåˆ¤æ–­æ„é€ å‡½æ•°çš„ prototype å±æ€§æ˜¯å¦å‡ºç°åœ¨å¯¹è±¡çš„åŸå‹é“¾ä¸­çš„ä»»ä½•ä½ç½®ã€‚\nfunction myInstanceof(left, right) &#123;\n  &#x2F;&#x2F; è·å–å¯¹è±¡çš„åŸå‹\n  let proto &#x3D; Object.getPrototypeOf(left)\n  &#x2F;&#x2F; è·å–æ„é€ å‡½æ•°çš„ prototype å¯¹è±¡\n  let prototype &#x3D; right.prototype; \n \n  &#x2F;&#x2F; åˆ¤æ–­æ„é€ å‡½æ•°çš„ prototype å¯¹è±¡æ˜¯å¦åœ¨å¯¹è±¡çš„åŸå‹é“¾ä¸Š\n  while (true) &#123;\n    if (!proto) return false;\n    if (proto &#x3D;&#x3D;&#x3D; prototype) return true;\n    &#x2F;&#x2F; å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œå°±ç»§ç»­ä»å…¶åŸå‹ä¸Šæ‰¾ï¼ŒObject.getPrototypeOfæ–¹æ³•ç”¨æ¥è·å–æŒ‡å®šå¯¹è±¡çš„åŸå‹\n    proto &#x3D; Object.getPrototypeOf(proto);\n  &#125;\n&#125;\nå¤åˆ¶ä»£ç \n\n7. ä¸ºä»€ä¹ˆ0.1+0.2 ! &#x3D;&#x3D; 0.3ï¼Œå¦‚ä½•è®©å…¶ç›¸ç­‰åœ¨å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°ç±»ä¼¼è¿™æ ·çš„é—®é¢˜ï¼š\nlet n1 &#x3D; 0.1, n2 &#x3D; 0.2\nconsole.log(n1 + n2)  &#x2F;&#x2F; 0.30000000000000004\nå¤åˆ¶ä»£ç \n\nè¿™é‡Œå¾—åˆ°çš„ä¸æ˜¯æƒ³è¦çš„ç»“æœï¼Œè¦æƒ³ç­‰äº0.3ï¼Œå°±è¦æŠŠå®ƒè¿›è¡Œè½¬åŒ–ï¼š\n(n1 + n2).toFixed(2) &#x2F;&#x2F; æ³¨æ„ï¼ŒtoFixedä¸ºå››èˆäº”å…¥\nå¤åˆ¶ä»£ç \n\ntoFixed(num) æ–¹æ³•å¯æŠŠ Number å››èˆäº”å…¥ä¸ºæŒ‡å®šå°æ•°ä½æ•°çš„æ•°å­—ã€‚é‚£ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™æ ·çš„ç»“æœå‘¢ï¼Ÿ\nè®¡ç®—æœºæ˜¯é€šè¿‡äºŒè¿›åˆ¶çš„æ–¹å¼å­˜å‚¨æ•°æ®çš„ï¼Œæ‰€ä»¥è®¡ç®—æœºè®¡ç®—0.1+0.2çš„æ—¶å€™ï¼Œå®é™…ä¸Šæ˜¯è®¡ç®—çš„ä¸¤ä¸ªæ•°çš„äºŒè¿›åˆ¶çš„å’Œã€‚0.1çš„äºŒè¿›åˆ¶æ˜¯0.0001100110011001100...ï¼ˆ1100å¾ªç¯ï¼‰ï¼Œ0.2çš„äºŒè¿›åˆ¶æ˜¯ï¼š0.00110011001100...ï¼ˆ1100å¾ªç¯ï¼‰ï¼Œè¿™ä¸¤ä¸ªæ•°çš„äºŒè¿›åˆ¶éƒ½æ˜¯æ— é™å¾ªç¯çš„æ•°ã€‚é‚£JavaScriptæ˜¯å¦‚ä½•å¤„ç†æ— é™å¾ªç¯çš„äºŒè¿›åˆ¶å°æ•°å‘¢ï¼Ÿ\nä¸€èˆ¬æˆ‘ä»¬è®¤ä¸ºæ•°å­—åŒ…æ‹¬æ•´æ•°å’Œå°æ•°ï¼Œä½†æ˜¯åœ¨ JavaScript ä¸­åªæœ‰ä¸€ç§æ•°å­—ç±»å‹ï¼šNumberï¼Œå®ƒçš„å®ç°éµå¾ªIEEE 754æ ‡å‡†ï¼Œä½¿ç”¨64ä½å›ºå®šé•¿åº¦æ¥è¡¨ç¤ºï¼Œä¹Ÿå°±æ˜¯æ ‡å‡†çš„doubleåŒç²¾åº¦æµ®ç‚¹æ•°ã€‚åœ¨äºŒè¿›åˆ¶ç§‘å­¦è¡¨ç¤ºæ³•ä¸­ï¼ŒåŒç²¾åº¦æµ®ç‚¹æ•°çš„å°æ•°éƒ¨åˆ†æœ€å¤šåªèƒ½ä¿ç•™52ä½ï¼Œå†åŠ ä¸Šå‰é¢çš„1ï¼Œå…¶å®å°±æ˜¯ä¿ç•™53ä½æœ‰æ•ˆæ•°å­—ï¼Œå‰©ä½™çš„éœ€è¦èˆå»ï¼Œéµä»â€œ0èˆ1å…¥â€çš„åŸåˆ™ã€‚\næ ¹æ®è¿™ä¸ªåŸåˆ™ï¼Œ0.1å’Œ0.2çš„äºŒè¿›åˆ¶æ•°ç›¸åŠ ï¼Œå†è½¬åŒ–ä¸ºåè¿›åˆ¶æ•°å°±æ˜¯ï¼š0.30000000000000004ã€‚\nä¸‹é¢çœ‹ä¸€ä¸‹åŒç²¾åº¦æ•°æ˜¯å¦‚ä½•ä¿å­˜çš„ï¼š \n\nç¬¬ä¸€éƒ¨åˆ†ï¼ˆè“è‰²ï¼‰ï¼šç”¨æ¥å­˜å‚¨ç¬¦å·ä½ï¼ˆsignï¼‰ï¼Œç”¨æ¥åŒºåˆ†æ­£è´Ÿæ•°ï¼Œ0è¡¨ç¤ºæ­£æ•°ï¼Œå ç”¨1ä½\nç¬¬äºŒéƒ¨åˆ†ï¼ˆç»¿è‰²ï¼‰ï¼šç”¨æ¥å­˜å‚¨æŒ‡æ•°ï¼ˆexponentï¼‰ï¼Œå ç”¨11ä½\nç¬¬ä¸‰éƒ¨åˆ†ï¼ˆçº¢è‰²ï¼‰ï¼šç”¨æ¥å­˜å‚¨å°æ•°ï¼ˆfractionï¼‰ï¼Œå ç”¨52ä½\n\nå¯¹äº0.1ï¼Œå®ƒçš„äºŒè¿›åˆ¶ä¸ºï¼š\n0.00011001100110011001100110011001100110011001100110011001 10011...\nå¤åˆ¶ä»£ç \n\nè½¬ä¸ºç§‘å­¦è®¡æ•°æ³•ï¼ˆç§‘å­¦è®¡æ•°æ³•çš„ç»“æœå°±æ˜¯æµ®ç‚¹æ•°ï¼‰ï¼š\n1.1001100110011001100110011001100110011001100110011001*2^-4\nå¤åˆ¶ä»£ç \n\nå¯ä»¥çœ‹å‡º0.1çš„ç¬¦å·ä½ä¸º0ï¼ŒæŒ‡æ•°ä½ä¸º-4ï¼Œå°æ•°ä½ä¸ºï¼š\n1001100110011001100110011001100110011001100110011001\nå¤åˆ¶ä»£ç \n\né‚£ä¹ˆé—®é¢˜åˆæ¥äº†ï¼ŒæŒ‡æ•°ä½æ˜¯è´Ÿæ•°ï¼Œè¯¥å¦‚ä½•ä¿å­˜å‘¢ï¼Ÿ\nIEEEæ ‡å‡†è§„å®šäº†ä¸€ä¸ªåç§»é‡ï¼Œå¯¹äºæŒ‡æ•°éƒ¨åˆ†ï¼Œæ¯æ¬¡éƒ½åŠ è¿™ä¸ªåç§»é‡è¿›è¡Œä¿å­˜ï¼Œè¿™æ ·å³ä½¿æŒ‡æ•°æ˜¯è´Ÿæ•°ï¼Œé‚£ä¹ˆåŠ ä¸Šè¿™ä¸ªåç§»é‡ä¹Ÿå°±æ˜¯æ­£æ•°äº†ã€‚ç”±äºJavaScriptçš„æ•°å­—æ˜¯åŒç²¾åº¦æ•°ï¼Œè¿™é‡Œå°±ä»¥åŒç²¾åº¦æ•°ä¸ºä¾‹ï¼Œå®ƒçš„æŒ‡æ•°éƒ¨åˆ†ä¸º11ä½ï¼Œèƒ½è¡¨ç¤ºçš„èŒƒå›´å°±æ˜¯0~2047ï¼ŒIEEEå›ºå®šåŒç²¾åº¦æ•°çš„åç§»é‡ä¸º1023ã€‚\n\nå½“æŒ‡æ•°ä½ä¸å…¨æ˜¯0ä¹Ÿä¸å…¨æ˜¯1æ—¶(è§„æ ¼åŒ–çš„æ•°å€¼)ï¼ŒIEEEè§„å®šï¼Œé˜¶ç è®¡ç®—å…¬å¼ä¸º e-Biasã€‚ æ­¤æ—¶eæœ€å°å€¼æ˜¯1ï¼Œåˆ™1-1023&#x3D; -1022ï¼Œeæœ€å¤§å€¼æ˜¯2046ï¼Œåˆ™2046-1023&#x3D;1023ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œè¿™ç§æƒ…å†µä¸‹å–å€¼èŒƒå›´æ˜¯-1022~1013ã€‚\nå½“æŒ‡æ•°ä½å…¨éƒ¨æ˜¯0çš„æ—¶å€™(éè§„æ ¼åŒ–çš„æ•°å€¼)ï¼ŒIEEEè§„å®šï¼Œé˜¶ç çš„è®¡ç®—å…¬å¼ä¸º1-Biasï¼Œå³1-1023&#x3D; -1022ã€‚\nå½“æŒ‡æ•°ä½å…¨éƒ¨æ˜¯1çš„æ—¶å€™(ç‰¹æ®Šå€¼)ï¼ŒIEEEè§„å®šè¿™ä¸ªæµ®ç‚¹æ•°å¯ç”¨æ¥è¡¨ç¤º3ä¸ªç‰¹æ®Šå€¼ï¼Œåˆ†åˆ«æ˜¯æ­£æ— ç©·ï¼Œè´Ÿæ— ç©·ï¼ŒNaNã€‚ å…·ä½“çš„ï¼Œå°æ•°ä½ä¸ä¸º0çš„æ—¶å€™è¡¨ç¤ºNaNï¼›å°æ•°ä½ä¸º0æ—¶ï¼Œå½“ç¬¦å·ä½s&#x3D;0æ—¶è¡¨ç¤ºæ­£æ— ç©·ï¼Œs&#x3D;1æ—¶å€™è¡¨ç¤ºè´Ÿæ— ç©·ã€‚\n\nå¯¹äºä¸Šé¢çš„0.1çš„æŒ‡æ•°ä½ä¸º-4ï¼Œ-4+1023 &#x3D; 1019 è½¬åŒ–ä¸ºäºŒè¿›åˆ¶å°±æ˜¯ï¼š1111111011.\næ‰€ä»¥ï¼Œ0.1è¡¨ç¤ºä¸ºï¼š\n0 1111111011 1001100110011001100110011001100110011001100110011001\nå¤åˆ¶ä»£ç \n\nè¯´äº†è¿™ä¹ˆå¤šï¼Œæ˜¯æ—¶å€™è¯¥æœ€å¼€å§‹çš„é—®é¢˜äº†ï¼Œå¦‚ä½•å®ç°0.1+0.2&#x3D;0.3å‘¢ï¼Ÿ\nå¯¹äºè¿™ä¸ªé—®é¢˜ï¼Œä¸€ä¸ªç›´æ¥çš„è§£å†³æ–¹æ³•å°±æ˜¯è®¾ç½®ä¸€ä¸ªè¯¯å·®èŒƒå›´ï¼Œé€šå¸¸ç§°ä¸ºâ€œæœºå™¨ç²¾åº¦â€ã€‚å¯¹JavaScriptæ¥è¯´ï¼Œè¿™ä¸ªå€¼é€šå¸¸ä¸º2-52ï¼Œåœ¨ES6ä¸­ï¼Œæä¾›äº†Number.EPSILONå±æ€§ï¼Œè€Œå®ƒçš„å€¼å°±æ˜¯2-52ï¼Œåªè¦åˆ¤æ–­0.1+0.2-0.3æ˜¯å¦å°äºNumber.EPSILONï¼Œå¦‚æœå°äºï¼Œå°±å¯ä»¥åˆ¤æ–­ä¸º0.1+0.2 &#x3D;&#x3D;&#x3D;0.3\nfunction numberepsilon(arg1,arg2)&#123;                   \n  return Math.abs(arg1 - arg2) &lt; Number.EPSILON;        \n&#125;        \n\nconsole.log(numberepsilon(0.1 + 0.2, 0.3)); &#x2F;&#x2F; true\nå¤åˆ¶ä»£ç \n\n8. å¦‚ä½•è·å–å®‰å…¨çš„ undefined å€¼ï¼Ÿå› ä¸º undefined æ˜¯ä¸€ä¸ªæ ‡è¯†ç¬¦ï¼Œæ‰€ä»¥å¯ä»¥è¢«å½“ä½œå˜é‡æ¥ä½¿ç”¨å’Œèµ‹å€¼ï¼Œä½†æ˜¯è¿™æ ·ä¼šå½±å“ undefined çš„æ­£å¸¸åˆ¤æ–­ã€‚è¡¨è¾¾å¼ void ___ æ²¡æœ‰è¿”å›å€¼ï¼Œå› æ­¤è¿”å›ç»“æœæ˜¯ undefinedã€‚void å¹¶ä¸æ”¹å˜è¡¨è¾¾å¼çš„ç»“æœï¼Œåªæ˜¯è®©è¡¨è¾¾å¼ä¸è¿”å›å€¼ã€‚å› æ­¤å¯ä»¥ç”¨ void 0 æ¥è·å¾— undefinedã€‚\n9. typeof NaN çš„ç»“æœæ˜¯ä»€ä¹ˆï¼ŸNaN æŒ‡â€œä¸æ˜¯ä¸€ä¸ªæ•°å­—â€ï¼ˆnot a numberï¼‰ï¼ŒNaN æ˜¯ä¸€ä¸ªâ€œè­¦æˆ’å€¼â€ï¼ˆsentinel valueï¼Œæœ‰ç‰¹æ®Šç”¨é€”çš„å¸¸è§„å€¼ï¼‰ï¼Œç”¨äºæŒ‡å‡ºæ•°å­—ç±»å‹ä¸­çš„é”™è¯¯æƒ…å†µï¼Œå³â€œæ‰§è¡Œæ•°å­¦è¿ç®—æ²¡æœ‰æˆåŠŸï¼Œè¿™æ˜¯å¤±è´¥åè¿”å›çš„ç»“æœâ€ã€‚\ntypeof NaN; &#x2F;&#x2F; &quot;number&quot;\nå¤åˆ¶ä»£ç \n\nNaN æ˜¯ä¸€ä¸ªç‰¹æ®Šå€¼ï¼Œå®ƒå’Œè‡ªèº«ä¸ç›¸ç­‰ï¼Œæ˜¯å”¯ä¸€ä¸€ä¸ªéè‡ªåï¼ˆè‡ªåï¼Œreflexiveï¼Œå³ x &#x3D;&#x3D;&#x3D; x ä¸æˆç«‹ï¼‰çš„å€¼ã€‚è€Œ NaN !&#x3D;&#x3D; NaN ä¸º trueã€‚\n10. isNaN å’Œ Number.isNaN å‡½æ•°çš„åŒºåˆ«ï¼Ÿ\nå‡½æ•° isNaN æ¥æ”¶å‚æ•°åï¼Œä¼šå°è¯•å°†è¿™ä¸ªå‚æ•°è½¬æ¢ä¸ºæ•°å€¼ï¼Œä»»ä½•ä¸èƒ½è¢«è½¬æ¢ä¸ºæ•°å€¼çš„çš„å€¼éƒ½ä¼šè¿”å› trueï¼Œå› æ­¤éæ•°å­—å€¼ä¼ å…¥ä¹Ÿä¼šè¿”å› true ï¼Œä¼šå½±å“ NaN çš„åˆ¤æ–­ã€‚\nå‡½æ•° Number.isNaN ä¼šé¦–å…ˆåˆ¤æ–­ä¼ å…¥å‚æ•°æ˜¯å¦ä¸ºæ•°å­—ï¼Œå¦‚æœæ˜¯æ•°å­—å†ç»§ç»­åˆ¤æ–­æ˜¯å¦ä¸º NaN ï¼Œä¸ä¼šè¿›è¡Œæ•°æ®ç±»å‹çš„è½¬æ¢ï¼Œè¿™ç§æ–¹æ³•å¯¹äº NaN çš„åˆ¤æ–­æ›´ä¸ºå‡†ç¡®ã€‚\n\n12. å…¶ä»–å€¼åˆ°å­—ç¬¦ä¸²çš„è½¬æ¢è§„åˆ™ï¼Ÿ\nNull å’Œ Undefined ç±»å‹ ï¼Œnull è½¬æ¢ä¸º â€œnullâ€ï¼Œundefined è½¬æ¢ä¸º â€œundefinedâ€ï¼Œ\nBoolean ç±»å‹ï¼Œtrue è½¬æ¢ä¸º â€œtrueâ€ï¼Œfalse è½¬æ¢ä¸º â€œfalseâ€ã€‚\nNumber ç±»å‹çš„å€¼ç›´æ¥è½¬æ¢ï¼Œä¸è¿‡é‚£äº›æå°å’Œæå¤§çš„æ•°å­—ä¼šä½¿ç”¨æŒ‡æ•°å½¢å¼ã€‚\nSymbol ç±»å‹çš„å€¼ç›´æ¥è½¬æ¢ï¼Œä½†æ˜¯åªå…è®¸æ˜¾å¼å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œä½¿ç”¨éšå¼å¼ºåˆ¶ç±»å‹è½¬æ¢ä¼šäº§ç”Ÿé”™è¯¯ã€‚\nå¯¹æ™®é€šå¯¹è±¡æ¥è¯´ï¼Œé™¤éè‡ªè¡Œå®šä¹‰ toString() æ–¹æ³•ï¼Œå¦åˆ™ä¼šè°ƒç”¨ toString()ï¼ˆObject.prototype.toString()ï¼‰æ¥è¿”å›å†…éƒ¨å±æ€§ [[Class]] çš„å€¼ï¼Œå¦‚â€[object Object]â€ã€‚å¦‚æœå¯¹è±¡æœ‰è‡ªå·±çš„ toString() æ–¹æ³•ï¼Œå­—ç¬¦ä¸²åŒ–æ—¶å°±ä¼šè°ƒç”¨è¯¥æ–¹æ³•å¹¶ä½¿ç”¨å…¶è¿”å›å€¼ã€‚\n\n13. å…¶ä»–å€¼åˆ°æ•°å­—å€¼çš„è½¬æ¢è§„åˆ™ï¼Ÿ\nUndefined ç±»å‹çš„å€¼è½¬æ¢ä¸º NaNã€‚\nNull ç±»å‹çš„å€¼è½¬æ¢ä¸º 0ã€‚\nBoolean ç±»å‹çš„å€¼ï¼Œtrue è½¬æ¢ä¸º 1ï¼Œfalse è½¬æ¢ä¸º 0ã€‚\nString ç±»å‹çš„å€¼è½¬æ¢å¦‚åŒä½¿ç”¨ Number() å‡½æ•°è¿›è¡Œè½¬æ¢ï¼Œå¦‚æœåŒ…å«éæ•°å­—å€¼åˆ™è½¬æ¢ä¸º NaNï¼Œç©ºå­—ç¬¦ä¸²ä¸º 0ã€‚\nSymbol ç±»å‹çš„å€¼ä¸èƒ½è½¬æ¢ä¸ºæ•°å­—ï¼Œä¼šæŠ¥é”™ã€‚\nå¯¹è±¡ï¼ˆåŒ…æ‹¬æ•°ç»„ï¼‰ä¼šé¦–å…ˆè¢«è½¬æ¢ä¸ºç›¸åº”çš„åŸºæœ¬ç±»å‹å€¼ï¼Œå¦‚æœè¿”å›çš„æ˜¯éæ•°å­—çš„åŸºæœ¬ç±»å‹å€¼ï¼Œåˆ™å†éµå¾ªä»¥ä¸Šè§„åˆ™å°†å…¶å¼ºåˆ¶è½¬æ¢ä¸ºæ•°å­—ã€‚\n\nä¸ºäº†å°†å€¼è½¬æ¢ä¸ºç›¸åº”çš„åŸºæœ¬ç±»å‹å€¼ï¼ŒæŠ½è±¡æ“ä½œ ToPrimitive ä¼šé¦–å…ˆï¼ˆé€šè¿‡å†…éƒ¨æ“ä½œ DefaultValueï¼‰æ£€æŸ¥è¯¥å€¼æ˜¯å¦æœ‰valueOf()æ–¹æ³•ã€‚å¦‚æœæœ‰å¹¶ä¸”è¿”å›åŸºæœ¬ç±»å‹å€¼ï¼Œå°±ä½¿ç”¨è¯¥å€¼è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚å¦‚æœæ²¡æœ‰å°±ä½¿ç”¨ toString() çš„è¿”å›å€¼ï¼ˆå¦‚æœå­˜åœ¨ï¼‰æ¥è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚\nå¦‚æœ valueOf() å’Œ toString() å‡ä¸è¿”å›åŸºæœ¬ç±»å‹å€¼ï¼Œä¼šäº§ç”Ÿ TypeError é”™è¯¯ã€‚\n14. å…¶ä»–å€¼åˆ°å¸ƒå°”ç±»å‹çš„å€¼çš„è½¬æ¢è§„åˆ™ï¼Ÿä»¥ä¸‹è¿™äº›æ˜¯å‡å€¼ï¼š â€¢ undefined â€¢ null â€¢ false â€¢ +0ã€-0 å’Œ NaN â€¢ â€œâ€\nå‡å€¼çš„å¸ƒå°”å¼ºåˆ¶ç±»å‹è½¬æ¢ç»“æœä¸º falseã€‚ä»é€»è¾‘ä¸Šè¯´ï¼Œå‡å€¼åˆ—è¡¨ä»¥å¤–çš„éƒ½åº”è¯¥æ˜¯çœŸå€¼ã€‚\n15. || å’Œ &amp;&amp; æ“ä½œç¬¦çš„è¿”å›å€¼ï¼Ÿ|| å’Œ &amp;&amp; é¦–å…ˆä¼šå¯¹ç¬¬ä¸€ä¸ªæ“ä½œæ•°æ‰§è¡Œæ¡ä»¶åˆ¤æ–­ï¼Œå¦‚æœå…¶ä¸æ˜¯å¸ƒå°”å€¼å°±å…ˆå¼ºåˆ¶è½¬æ¢ä¸ºå¸ƒå°”ç±»å‹ï¼Œç„¶åå†æ‰§è¡Œæ¡ä»¶åˆ¤æ–­ã€‚\n\nå¯¹äº || æ¥è¯´ï¼Œå¦‚æœæ¡ä»¶åˆ¤æ–­ç»“æœä¸º true å°±è¿”å›ç¬¬ä¸€ä¸ªæ“ä½œæ•°çš„å€¼ï¼Œå¦‚æœä¸º false å°±è¿”å›ç¬¬äºŒä¸ªæ“ä½œæ•°çš„å€¼ã€‚\n&amp;&amp; åˆ™ç›¸åï¼Œå¦‚æœæ¡ä»¶åˆ¤æ–­ç»“æœä¸º true å°±è¿”å›ç¬¬äºŒä¸ªæ“ä½œæ•°çš„å€¼ï¼Œå¦‚æœä¸º false å°±è¿”å›ç¬¬ä¸€ä¸ªæ“ä½œæ•°çš„å€¼ã€‚\n\n|| å’Œ &amp;&amp; è¿”å›å®ƒä»¬å…¶ä¸­ä¸€ä¸ªæ“ä½œæ•°çš„å€¼ï¼Œè€Œéæ¡ä»¶åˆ¤æ–­çš„ç»“æœ\n16. Object.is() ä¸æ¯”è¾ƒæ“ä½œç¬¦ â€œ&#x3D;&#x3D;&#x3D;â€ã€â€œ&#x3D;&#x3D;â€ çš„åŒºåˆ«ï¼Ÿ\nä½¿ç”¨åŒç­‰å·ï¼ˆ&#x3D;&#x3D;ï¼‰è¿›è¡Œç›¸ç­‰åˆ¤æ–­æ—¶ï¼Œå¦‚æœä¸¤è¾¹çš„ç±»å‹ä¸ä¸€è‡´ï¼Œåˆ™ä¼šè¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬åŒ–åå†è¿›è¡Œæ¯”è¾ƒã€‚\nä½¿ç”¨ä¸‰ç­‰å·ï¼ˆ&#x3D;&#x3D;&#x3D;ï¼‰è¿›è¡Œç›¸ç­‰åˆ¤æ–­æ—¶ï¼Œå¦‚æœä¸¤è¾¹çš„ç±»å‹ä¸ä¸€è‡´æ—¶ï¼Œä¸ä¼šåšå¼ºåˆ¶ç±»å‹å‡†æ¢ï¼Œç›´æ¥è¿”å› falseã€‚\nä½¿ç”¨ Object.is æ¥è¿›è¡Œç›¸ç­‰åˆ¤æ–­æ—¶ï¼Œä¸€èˆ¬æƒ…å†µä¸‹å’Œä¸‰ç­‰å·çš„åˆ¤æ–­ç›¸åŒï¼Œå®ƒå¤„ç†äº†ä¸€äº›ç‰¹æ®Šçš„æƒ…å†µï¼Œæ¯”å¦‚ -0 å’Œ +0 ä¸å†ç›¸ç­‰ï¼Œä¸¤ä¸ª NaN æ˜¯ç›¸ç­‰çš„ã€‚\n\n17. ä»€ä¹ˆæ˜¯ JavaScript ä¸­çš„åŒ…è£…ç±»å‹ï¼Ÿåœ¨ JavaScript ä¸­ï¼ŒåŸºæœ¬ç±»å‹æ˜¯æ²¡æœ‰å±æ€§å’Œæ–¹æ³•çš„ï¼Œä½†æ˜¯ä¸ºäº†ä¾¿äºæ“ä½œåŸºæœ¬ç±»å‹çš„å€¼ï¼Œåœ¨è°ƒç”¨åŸºæœ¬ç±»å‹çš„å±æ€§æˆ–æ–¹æ³•æ—¶ JavaScript ä¼šåœ¨åå°éšå¼åœ°å°†åŸºæœ¬ç±»å‹çš„å€¼è½¬æ¢ä¸ºå¯¹è±¡ï¼Œå¦‚ï¼š\nconst a &#x3D; &quot;abc&quot;;\na.length; &#x2F;&#x2F; 3\na.toUpperCase(); &#x2F;&#x2F; &quot;ABC&quot;\nå¤åˆ¶ä»£ç \n\nåœ¨è®¿é—®&#39;abc&#39;.lengthæ—¶ï¼ŒJavaScript å°†&#39;abc&#39;åœ¨åå°è½¬æ¢æˆString(&#39;abc&#39;)ï¼Œç„¶åå†è®¿é—®å…¶lengthå±æ€§ã€‚\nJavaScriptä¹Ÿå¯ä»¥ä½¿ç”¨Objectå‡½æ•°æ˜¾å¼åœ°å°†åŸºæœ¬ç±»å‹è½¬æ¢ä¸ºåŒ…è£…ç±»å‹ï¼š\nvar a &#x3D; &#39;abc&#39;\nObject(a) &#x2F;&#x2F; String &#123;&quot;abc&quot;&#125;\nå¤åˆ¶ä»£ç \n\nä¹Ÿå¯ä»¥ä½¿ç”¨valueOfæ–¹æ³•å°†åŒ…è£…ç±»å‹å€’è½¬æˆåŸºæœ¬ç±»å‹ï¼š\nvar a &#x3D; &#39;abc&#39;\nvar b &#x3D; Object(a)\nvar c &#x3D; b.valueOf() &#x2F;&#x2F; &#39;abc&#39;\nå¤åˆ¶ä»£ç \n\nçœ‹çœ‹å¦‚ä¸‹ä»£ç ä¼šæ‰“å°å‡ºä»€ä¹ˆï¼š\nvar a &#x3D; new Boolean( false );\nif (!a) &#123;\n\tconsole.log( &quot;Oops&quot; ); &#x2F;&#x2F; never runs\n&#125;\nå¤åˆ¶ä»£ç \n\nç­”æ¡ˆæ˜¯ä»€ä¹ˆéƒ½ä¸ä¼šæ‰“å°ï¼Œå› ä¸ºè™½ç„¶åŒ…è£¹çš„åŸºæœ¬ç±»å‹æ˜¯falseï¼Œä½†æ˜¯falseè¢«åŒ…è£¹æˆåŒ…è£…ç±»å‹åå°±æˆäº†å¯¹è±¡ï¼Œæ‰€ä»¥å…¶éå€¼ä¸ºfalseï¼Œæ‰€ä»¥å¾ªç¯ä½“ä¸­çš„å†…å®¹ä¸ä¼šè¿è¡Œã€‚\n18. JavaScript ä¸­å¦‚ä½•è¿›è¡Œéšå¼ç±»å‹è½¬æ¢ï¼Ÿé¦–å…ˆè¦ä»‹ç»ToPrimitiveæ–¹æ³•ï¼Œè¿™æ˜¯ JavaScript ä¸­æ¯ä¸ªå€¼éšå«çš„è‡ªå¸¦çš„æ–¹æ³•ï¼Œç”¨æ¥å°†å€¼ ï¼ˆæ— è®ºæ˜¯åŸºæœ¬ç±»å‹å€¼è¿˜æ˜¯å¯¹è±¡ï¼‰è½¬æ¢ä¸ºåŸºæœ¬ç±»å‹å€¼ã€‚å¦‚æœå€¼ä¸ºåŸºæœ¬ç±»å‹ï¼Œåˆ™ç›´æ¥è¿”å›å€¼æœ¬èº«ï¼›å¦‚æœå€¼ä¸ºå¯¹è±¡ï¼Œå…¶çœ‹èµ·æ¥å¤§æ¦‚æ˜¯è¿™æ ·ï¼š\n&#x2F;**\n* @obj éœ€è¦è½¬æ¢çš„å¯¹è±¡\n* @type æœŸæœ›çš„ç»“æœç±»å‹\n*&#x2F;\nToPrimitive(obj,type)\nå¤åˆ¶ä»£ç \n\ntypeçš„å€¼ä¸ºnumberæˆ–è€…stringã€‚\nï¼ˆ1ï¼‰å½“typeä¸ºnumberæ—¶è§„åˆ™å¦‚ä¸‹ï¼š\n\nè°ƒç”¨objçš„valueOfæ–¹æ³•ï¼Œå¦‚æœä¸ºåŸå§‹å€¼ï¼Œåˆ™è¿”å›ï¼Œå¦åˆ™ä¸‹ä¸€æ­¥ï¼›\nè°ƒç”¨objçš„toStringæ–¹æ³•ï¼Œåç»­åŒä¸Šï¼›\næŠ›å‡ºTypeError å¼‚å¸¸ã€‚\n\nï¼ˆ2ï¼‰å½“typeä¸ºstringæ—¶è§„åˆ™å¦‚ä¸‹ï¼š\n\nè°ƒç”¨objçš„toStringæ–¹æ³•ï¼Œå¦‚æœä¸ºåŸå§‹å€¼ï¼Œåˆ™è¿”å›ï¼Œå¦åˆ™ä¸‹ä¸€æ­¥ï¼›\nè°ƒç”¨objçš„valueOfæ–¹æ³•ï¼Œåç»­åŒä¸Šï¼›\næŠ›å‡ºTypeError å¼‚å¸¸ã€‚\n\nå¯ä»¥çœ‹å‡ºä¸¤è€…çš„ä¸»è¦åŒºåˆ«åœ¨äºè°ƒç”¨toStringå’ŒvalueOfçš„å…ˆåé¡ºåºã€‚é»˜è®¤æƒ…å†µä¸‹ï¼š\n\nå¦‚æœå¯¹è±¡ä¸º Date å¯¹è±¡ï¼Œåˆ™typeé»˜è®¤ä¸ºstringï¼›\nå…¶ä»–æƒ…å†µä¸‹ï¼Œtypeé»˜è®¤ä¸ºnumberã€‚\n\næ€»ç»“ä¸Šé¢çš„è§„åˆ™ï¼Œå¯¹äº Date ä»¥å¤–çš„å¯¹è±¡ï¼Œè½¬æ¢ä¸ºåŸºæœ¬ç±»å‹çš„å¤§æ¦‚è§„åˆ™å¯ä»¥æ¦‚æ‹¬ä¸ºä¸€ä¸ªå‡½æ•°ï¼š\nvar objToNumber &#x3D; value &#x3D;&gt; Number(value.valueOf().toString())\nobjToNumber([]) &#x3D;&#x3D;&#x3D; 0\nobjToNumber(&#123;&#125;) &#x3D;&#x3D;&#x3D; NaN\nå¤åˆ¶ä»£ç \n\nè€Œ JavaScript ä¸­çš„éšå¼ç±»å‹è½¬æ¢ä¸»è¦å‘ç”Ÿåœ¨+ã€-ã€*ã€/ä»¥åŠ==ã€&gt;ã€&lt;è¿™äº›è¿ç®—ç¬¦ä¹‹é—´ã€‚è€Œè¿™äº›è¿ç®—ç¬¦åªèƒ½æ“ä½œåŸºæœ¬ç±»å‹å€¼ï¼Œæ‰€ä»¥åœ¨è¿›è¡Œè¿™äº›è¿ç®—å‰çš„ç¬¬ä¸€æ­¥å°±æ˜¯å°†ä¸¤è¾¹çš„å€¼ç”¨ToPrimitiveè½¬æ¢æˆåŸºæœ¬ç±»å‹ï¼Œå†è¿›è¡Œæ“ä½œã€‚\nä»¥ä¸‹æ˜¯åŸºæœ¬ç±»å‹çš„å€¼åœ¨ä¸åŒæ“ä½œç¬¦çš„æƒ…å†µä¸‹éšå¼è½¬æ¢çš„è§„åˆ™ ï¼ˆå¯¹äºå¯¹è±¡ï¼Œå…¶ä¼šè¢«ToPrimitiveè½¬æ¢æˆåŸºæœ¬ç±»å‹ï¼Œæ‰€ä»¥æœ€ç»ˆè¿˜æ˜¯è¦åº”ç”¨åŸºæœ¬ç±»å‹è½¬æ¢è§„åˆ™ï¼‰ï¼š\n\n+æ“ä½œç¬¦ +æ“ä½œç¬¦çš„ä¸¤è¾¹æœ‰è‡³å°‘ä¸€ä¸ªstringç±»å‹å˜é‡æ—¶ï¼Œä¸¤è¾¹çš„å˜é‡éƒ½ä¼šè¢«éšå¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼›å…¶ä»–æƒ…å†µä¸‹ä¸¤è¾¹çš„å˜é‡éƒ½ä¼šè¢«è½¬æ¢ä¸ºæ•°å­—ã€‚\n\n1 + &#39;23&#39; &#x2F;&#x2F; &#39;123&#39;\n 1 + false &#x2F;&#x2F; 1 \n 1 + Symbol() &#x2F;&#x2F; Uncaught TypeError: Cannot convert a Symbol value to a number\n &#39;1&#39; + false &#x2F;&#x2F; &#39;1false&#39;\n false + true &#x2F;&#x2F; 1\nå¤åˆ¶ä»£ç \n\n\n-ã€*ã€&#96;&#96;æ“ä½œç¬¦\n\nNaNä¹Ÿæ˜¯ä¸€ä¸ªæ•°å­—\n1 * &#39;23&#39; &#x2F;&#x2F; 23\n 1 * false &#x2F;&#x2F; 0\n 1 &#x2F; &#39;aa&#39; &#x2F;&#x2F; NaN\nå¤åˆ¶ä»£ç \n\n\nå¯¹äº==æ“ä½œç¬¦\n\næ“ä½œç¬¦ä¸¤è¾¹çš„å€¼éƒ½å°½é‡è½¬æˆnumberï¼š\n3 &#x3D;&#x3D; true &#x2F;&#x2F; false, 3 è½¬ä¸ºnumberä¸º3ï¼Œtrueè½¬ä¸ºnumberä¸º1\n&#39;0&#39; &#x3D;&#x3D; false &#x2F;&#x2F;true, &#39;0&#39;è½¬ä¸ºnumberä¸º0ï¼Œfalseè½¬ä¸ºnumberä¸º0\n&#39;0&#39; &#x3D;&#x3D; 0 &#x2F;&#x2F; &#39;0&#39;è½¬ä¸ºnumberä¸º0\nå¤åˆ¶ä»£ç \n\n\nå¯¹äº&lt;å’Œ&gt;æ¯”è¾ƒç¬¦\n\nå¦‚æœä¸¤è¾¹éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™æ¯”è¾ƒå­—æ¯è¡¨é¡ºåºï¼š\n&#39;ca&#39; &lt; &#39;bd&#39; &#x2F;&#x2F; false\n&#39;a&#39; &lt; &#39;b&#39; &#x2F;&#x2F; true\nå¤åˆ¶ä»£ç \n\nå…¶ä»–æƒ…å†µä¸‹ï¼Œè½¬æ¢ä¸ºæ•°å­—å†æ¯”è¾ƒï¼š\n&#39;12&#39; &lt; 13 &#x2F;&#x2F; true\nfalse &gt; -1 &#x2F;&#x2F; true\nå¤åˆ¶ä»£ç \n\nä»¥ä¸Šè¯´çš„æ˜¯åŸºæœ¬ç±»å‹çš„éšå¼è½¬æ¢ï¼Œè€Œå¯¹è±¡ä¼šè¢«ToPrimitiveè½¬æ¢ä¸ºåŸºæœ¬ç±»å‹å†è¿›è¡Œè½¬æ¢ï¼š\nvar a &#x3D; &#123;&#125;\na &gt; 2 &#x2F;&#x2F; false\nå¤åˆ¶ä»£ç \n\nå…¶å¯¹æ¯”è¿‡ç¨‹å¦‚ä¸‹ï¼š\na.valueOf() &#x2F;&#x2F; &#123;&#125;, ä¸Šé¢æåˆ°è¿‡ï¼ŒToPrimitiveé»˜è®¤typeä¸ºnumberï¼Œæ‰€ä»¥å…ˆvalueOfï¼Œç»“æœè¿˜æ˜¯ä¸ªå¯¹è±¡ï¼Œä¸‹ä¸€æ­¥\na.toString() &#x2F;&#x2F; &quot;[object Object]&quot;ï¼Œç°åœ¨æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²äº†\nNumber(a.toString()) &#x2F;&#x2F; NaNï¼Œæ ¹æ®ä¸Šé¢ &lt; å’Œ &gt; æ“ä½œç¬¦çš„è§„åˆ™ï¼Œè¦è½¬æ¢æˆæ•°å­—\nNaN &gt; 2 &#x2F;&#x2F;falseï¼Œå¾—å‡ºæ¯”è¾ƒç»“æœ\nå¤åˆ¶ä»£ç \n\nåˆæ¯”å¦‚ï¼š\nvar a &#x3D; &#123;name:&#39;Jack&#39;&#125;\nvar b &#x3D; &#123;age: 18&#125;\na + b &#x2F;&#x2F; &quot;[object Object][object Object]&quot;\nå¤åˆ¶ä»£ç \n\nè¿ç®—è¿‡ç¨‹å¦‚ä¸‹ï¼š\na.valueOf() &#x2F;&#x2F; &#123;&#125;ï¼Œä¸Šé¢æåˆ°è¿‡ï¼ŒToPrimitiveé»˜è®¤typeä¸ºnumberï¼Œæ‰€ä»¥å…ˆvalueOfï¼Œç»“æœè¿˜æ˜¯ä¸ªå¯¹è±¡ï¼Œä¸‹ä¸€æ­¥\na.toString() &#x2F;&#x2F; &quot;[object Object]&quot;\nb.valueOf() &#x2F;&#x2F; åŒç†\nb.toString() &#x2F;&#x2F; &quot;[object Object]&quot;\na + b &#x2F;&#x2F; &quot;[object Object][object Object]&quot;\nå¤åˆ¶ä»£ç \n\n19. + æ“ä½œç¬¦ä»€ä¹ˆæ—¶å€™ç”¨äºå­—ç¬¦ä¸²çš„æ‹¼æ¥ï¼Ÿæ ¹æ® ES5 è§„èŒƒï¼Œå¦‚æœæŸä¸ªæ“ä½œæ•°æ˜¯å­—ç¬¦ä¸²æˆ–è€…èƒ½å¤Ÿé€šè¿‡ä»¥ä¸‹æ­¥éª¤è½¬æ¢ä¸ºå­—ç¬¦ä¸²çš„è¯ï¼Œ+ å°†è¿›è¡Œæ‹¼æ¥æ“ä½œã€‚å¦‚æœå…¶ä¸­ä¸€ä¸ªæ“ä½œæ•°æ˜¯å¯¹è±¡ï¼ˆåŒ…æ‹¬æ•°ç»„ï¼‰ï¼Œåˆ™é¦–å…ˆå¯¹å…¶è°ƒç”¨ ToPrimitive æŠ½è±¡æ“ä½œï¼Œè¯¥æŠ½è±¡æ“ä½œå†è°ƒç”¨ [[DefaultValue]]ï¼Œä»¥æ•°å­—ä½œä¸ºä¸Šä¸‹æ–‡ã€‚å¦‚æœä¸èƒ½è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œåˆ™ä¼šå°†å…¶è½¬æ¢ä¸ºæ•°å­—ç±»å‹æ¥è¿›è¡Œè®¡ç®—ã€‚\nç®€å•æ¥è¯´å°±æ˜¯ï¼Œå¦‚æœ + çš„å…¶ä¸­ä¸€ä¸ªæ“ä½œæ•°æ˜¯å­—ç¬¦ä¸²ï¼ˆæˆ–è€…é€šè¿‡ä»¥ä¸Šæ­¥éª¤æœ€ç»ˆå¾—åˆ°å­—ç¬¦ä¸²ï¼‰ï¼Œåˆ™æ‰§è¡Œå­—ç¬¦ä¸²æ‹¼æ¥ï¼Œå¦åˆ™æ‰§è¡Œæ•°å­—åŠ æ³•ã€‚\né‚£ä¹ˆå¯¹äºé™¤äº†åŠ æ³•çš„è¿ç®—ç¬¦æ¥è¯´ï¼Œåªè¦å…¶ä¸­ä¸€æ–¹æ˜¯æ•°å­—ï¼Œé‚£ä¹ˆå¦ä¸€æ–¹å°±ä¼šè¢«è½¬ä¸ºæ•°å­—ã€‚\n20. ä¸ºä»€ä¹ˆä¼šæœ‰BigIntçš„ææ¡ˆï¼ŸJavaScriptä¸­Number.MAX_SAFE_INTEGERè¡¨ç¤ºæœ€â¼¤å®‰å…¨æ•°å­—ï¼Œè®¡ç®—ç»“æœæ˜¯9007199254740991ï¼Œå³åœ¨è¿™ä¸ªæ•°èŒƒå›´å†…ä¸ä¼šå‡ºç°ç²¾åº¦ä¸¢å¤±ï¼ˆâ¼©æ•°é™¤å¤–ï¼‰ã€‚ä½†æ˜¯â¼€æ—¦è¶…è¿‡è¿™ä¸ªèŒƒå›´ï¼Œjså°±ä¼šå‡ºç°è®¡ç®—ä¸å‡†ç¡®çš„æƒ…å†µï¼Œè¿™åœ¨â¼¤æ•°è®¡ç®—çš„æ—¶å€™ä¸å¾—ä¸ä¾é â¼€äº›ç¬¬ä¸‰â½…åº“è¿›â¾è§£å†³ï¼Œå› æ­¤å®˜â½…æå‡ºäº†BigIntæ¥è§£å†³æ­¤é—®é¢˜ã€‚\n21. object.assignå’Œæ‰©å±•è¿ç®—æ³•æ˜¯æ·±æ‹·è´è¿˜æ˜¯æµ…æ‹·è´ï¼Œä¸¤è€…åŒºåˆ«æ‰©å±•è¿ç®—ç¬¦ï¼š\nlet outObj &#x3D; &#123;\n  inObj: &#123;a: 1, b: 2&#125;\n&#125;\nlet newObj &#x3D; &#123;...outObj&#125;\nnewObj.inObj.a &#x3D; 2\nconsole.log(outObj) &#x2F;&#x2F; &#123;inObj: &#123;a: 2, b: 2&#125;&#125;\nå¤åˆ¶ä»£ç \n\nObject.assign():\nlet outObj &#x3D; &#123;\n  inObj: &#123;a: 1, b: 2&#125;\n&#125;\nlet newObj &#x3D; Object.assign(&#123;&#125;, outObj)\nnewObj.inObj.a &#x3D; 2\nconsole.log(outObj) &#x2F;&#x2F; &#123;inObj: &#123;a: 2, b: 2&#125;&#125;\nå¤åˆ¶ä»£ç \n\nå¯ä»¥çœ‹åˆ°ï¼Œä¸¤è€…éƒ½æ˜¯æµ…æ‹·è´ã€‚\n\nObject.assign()æ–¹æ³•æ¥æ”¶çš„ç¬¬ä¸€ä¸ªå‚æ•°ä½œä¸ºç›®æ ‡å¯¹è±¡ï¼Œåé¢çš„æ‰€æœ‰å‚æ•°ä½œä¸ºæºå¯¹è±¡ã€‚ç„¶åæŠŠæ‰€æœ‰çš„æºå¯¹è±¡åˆå¹¶åˆ°ç›®æ ‡å¯¹è±¡ä¸­ã€‚å®ƒä¼šä¿®æ”¹äº†ä¸€ä¸ªå¯¹è±¡ï¼Œå› æ­¤ä¼šè§¦å‘ ES6 setterã€‚\næ‰©å±•æ“ä½œç¬¦ï¼ˆâ€¦ï¼‰ä½¿ç”¨å®ƒæ—¶ï¼Œæ•°ç»„æˆ–å¯¹è±¡ä¸­çš„æ¯ä¸€ä¸ªå€¼éƒ½ä¼šè¢«æ‹·è´åˆ°ä¸€ä¸ªæ–°çš„æ•°ç»„æˆ–å¯¹è±¡ä¸­ã€‚å®ƒä¸å¤åˆ¶ç»§æ‰¿çš„å±æ€§æˆ–ç±»çš„å±æ€§ï¼Œä½†æ˜¯å®ƒä¼šå¤åˆ¶ES6çš„ symbols å±æ€§ã€‚\n\näºŒã€ES61. letã€constã€varçš„åŒºåˆ«ï¼ˆ1ï¼‰å—çº§ä½œç”¨åŸŸï¼š å—ä½œç”¨åŸŸç”± &#123; &#125;åŒ…æ‹¬ï¼Œletå’Œconstå…·æœ‰å—çº§ä½œç”¨åŸŸï¼Œvarä¸å­˜åœ¨å—çº§ä½œç”¨åŸŸã€‚å—çº§ä½œç”¨åŸŸè§£å†³äº†ES5ä¸­çš„ä¸¤ä¸ªé—®é¢˜ï¼š\n\nå†…å±‚å˜é‡å¯èƒ½è¦†ç›–å¤–å±‚å˜é‡\nç”¨æ¥è®¡æ•°çš„å¾ªç¯å˜é‡æ³„éœ²ä¸ºå…¨å±€å˜é‡\n\nï¼ˆ2ï¼‰å˜é‡æå‡ï¼š varå­˜åœ¨å˜é‡æå‡ï¼Œletå’Œconstä¸å­˜åœ¨å˜é‡æå‡ï¼Œå³åœ¨å˜é‡åªèƒ½åœ¨å£°æ˜ä¹‹åä½¿ç”¨ï¼Œå¦åœ¨ä¼šæŠ¥é”™ã€‚\nï¼ˆ3ï¼‰ç»™å…¨å±€æ·»åŠ å±æ€§ï¼š æµè§ˆå™¨çš„å…¨å±€å¯¹è±¡æ˜¯windowï¼ŒNodeçš„å…¨å±€å¯¹è±¡æ˜¯globalã€‚varå£°æ˜çš„å˜é‡ä¸ºå…¨å±€å˜é‡ï¼Œå¹¶ä¸”ä¼šå°†è¯¥å˜é‡æ·»åŠ ä¸ºå…¨å±€å¯¹è±¡çš„å±æ€§ï¼Œä½†æ˜¯letå’Œconstä¸ä¼šã€‚\nï¼ˆ4ï¼‰é‡å¤å£°æ˜ï¼š varå£°æ˜å˜é‡æ—¶ï¼Œå¯ä»¥é‡å¤å£°æ˜å˜é‡ï¼Œåå£°æ˜çš„åŒåå˜é‡ä¼šè¦†ç›–ä¹‹å‰å£°æ˜çš„éå†ã€‚constå’Œletä¸å…è®¸é‡å¤å£°æ˜å˜é‡ã€‚\nï¼ˆ5ï¼‰æš‚æ—¶æ€§æ­»åŒºï¼š åœ¨ä½¿ç”¨letã€constå‘½ä»¤å£°æ˜å˜é‡ä¹‹å‰ï¼Œè¯¥å˜é‡éƒ½æ˜¯ä¸å¯ç”¨çš„ã€‚è¿™åœ¨è¯­æ³•ä¸Šï¼Œç§°ä¸ºæš‚æ—¶æ€§æ­»åŒºã€‚ä½¿ç”¨varå£°æ˜çš„å˜é‡ä¸å­˜åœ¨æš‚æ—¶æ€§æ­»åŒºã€‚\nï¼ˆ6ï¼‰åˆå§‹å€¼è®¾ç½®ï¼š åœ¨å˜é‡å£°æ˜æ—¶ï¼Œvar å’Œ let å¯ä»¥ä¸ç”¨è®¾ç½®åˆå§‹å€¼ã€‚è€Œconstå£°æ˜å˜é‡å¿…é¡»è®¾ç½®åˆå§‹å€¼ã€‚\nï¼ˆ7ï¼‰æŒ‡é’ˆæŒ‡å‘ï¼š letå’Œconstéƒ½æ˜¯ES6æ–°å¢çš„ç”¨äºåˆ›å»ºå˜é‡çš„è¯­æ³•ã€‚ letåˆ›å»ºçš„å˜é‡æ˜¯å¯ä»¥æ›´æ”¹æŒ‡é’ˆæŒ‡å‘ï¼ˆå¯ä»¥é‡æ–°èµ‹å€¼ï¼‰ã€‚ä½†constå£°æ˜çš„å˜é‡æ˜¯ä¸å…è®¸æ”¹å˜æŒ‡é’ˆçš„æŒ‡å‘ã€‚\n\n\n\nåŒºåˆ«\nvar\nlet\nconst\n\n\n\næ˜¯å¦æœ‰å—çº§ä½œç”¨åŸŸ\nÃ—\nâœ”ï¸\nâœ”ï¸\n\n\næ˜¯å¦å­˜åœ¨å˜é‡æå‡\nâœ”ï¸\nÃ—\nÃ—\n\n\næ˜¯å¦æ·»åŠ å…¨å±€å±æ€§\nâœ”ï¸\nÃ—\nÃ—\n\n\nèƒ½å¦é‡å¤å£°æ˜å˜é‡\nâœ”ï¸\nÃ—\nÃ—\n\n\næ˜¯å¦å­˜åœ¨æš‚æ—¶æ€§æ­»åŒº\nÃ—\nâœ”ï¸\nâœ”ï¸\n\n\næ˜¯å¦å¿…é¡»è®¾ç½®åˆå§‹å€¼\nÃ—\nÃ—\nâœ”ï¸\n\n\nèƒ½å¦æ”¹å˜æŒ‡é’ˆæŒ‡å‘\nâœ”ï¸\nâœ”ï¸\nÃ—\n\n\n2. constå¯¹è±¡çš„å±æ€§å¯ä»¥ä¿®æ”¹å—constä¿è¯çš„å¹¶ä¸æ˜¯å˜é‡çš„å€¼ä¸èƒ½æ”¹åŠ¨ï¼Œè€Œæ˜¯å˜é‡æŒ‡å‘çš„é‚£ä¸ªå†…å­˜åœ°å€ä¸èƒ½æ”¹åŠ¨ã€‚å¯¹äºåŸºæœ¬ç±»å‹çš„æ•°æ®ï¼ˆæ•°å€¼ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ï¼‰ï¼Œå…¶å€¼å°±ä¿å­˜åœ¨å˜é‡æŒ‡å‘çš„é‚£ä¸ªå†…å­˜åœ°å€ï¼Œå› æ­¤ç­‰åŒäºå¸¸é‡ã€‚\nä½†å¯¹äºå¼•ç”¨ç±»å‹çš„æ•°æ®ï¼ˆä¸»è¦æ˜¯å¯¹è±¡å’Œæ•°ç»„ï¼‰æ¥è¯´ï¼Œå˜é‡æŒ‡å‘æ•°æ®çš„å†…å­˜åœ°å€ï¼Œä¿å­˜çš„åªæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œconståªèƒ½ä¿è¯è¿™ä¸ªæŒ‡é’ˆæ˜¯å›ºå®šä¸å˜çš„ï¼Œè‡³äºå®ƒæŒ‡å‘çš„æ•°æ®ç»“æ„æ˜¯ä¸æ˜¯å¯å˜çš„ï¼Œå°±å®Œå…¨ä¸èƒ½æ§åˆ¶äº†ã€‚\n3. å¦‚æœnewä¸€ä¸ªç®­å¤´å‡½æ•°çš„ä¼šæ€ä¹ˆæ ·ç®­å¤´å‡½æ•°æ˜¯ES6ä¸­çš„æå‡ºæ¥çš„ï¼Œå®ƒæ²¡æœ‰prototypeï¼Œä¹Ÿæ²¡æœ‰è‡ªå·±çš„thisæŒ‡å‘ï¼Œæ›´ä¸å¯ä»¥ä½¿ç”¨argumentså‚æ•°ï¼Œæ‰€ä»¥ä¸èƒ½Newä¸€ä¸ªç®­å¤´å‡½æ•°ã€‚\nnewæ“ä½œç¬¦çš„å®ç°æ­¥éª¤å¦‚ä¸‹ï¼š\n\nåˆ›å»ºä¸€ä¸ªå¯¹è±¡\nå°†æ„é€ å‡½æ•°çš„ä½œç”¨åŸŸèµ‹ç»™æ–°å¯¹è±¡ï¼ˆä¹Ÿå°±æ˜¯å°†å¯¹è±¡çš„__proto__å±æ€§æŒ‡å‘æ„é€ å‡½æ•°çš„prototypeå±æ€§ï¼‰\næŒ‡å‘æ„é€ å‡½æ•°ä¸­çš„ä»£ç ï¼Œæ„é€ å‡½æ•°ä¸­çš„thisæŒ‡å‘è¯¥å¯¹è±¡ï¼ˆä¹Ÿå°±æ˜¯ä¸ºè¿™ä¸ªå¯¹è±¡æ·»åŠ å±æ€§å’Œæ–¹æ³•ï¼‰\nè¿”å›æ–°çš„å¯¹è±¡\n\næ‰€ä»¥ï¼Œä¸Šé¢çš„ç¬¬äºŒã€ä¸‰æ­¥ï¼Œç®­å¤´å‡½æ•°éƒ½æ˜¯æ²¡æœ‰åŠæ³•æ‰§è¡Œçš„ã€‚\n4. ç®­å¤´å‡½æ•°ä¸æ™®é€šå‡½æ•°çš„åŒºåˆ«ï¼ˆ1ï¼‰ç®­å¤´å‡½æ•°æ¯”æ™®é€šå‡½æ•°æ›´åŠ ç®€æ´\n\nå¦‚æœæ²¡æœ‰å‚æ•°ï¼Œå°±ç›´æ¥å†™ä¸€ä¸ªç©ºæ‹¬å·å³å¯\nå¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå¯ä»¥çœå»å‚æ•°çš„æ‹¬å·\nå¦‚æœæœ‰å¤šä¸ªå‚æ•°ï¼Œç”¨é€—å·åˆ†å‰²\nå¦‚æœå‡½æ•°ä½“çš„è¿”å›å€¼åªæœ‰ä¸€å¥ï¼Œå¯ä»¥çœç•¥å¤§æ‹¬å·\nå¦‚æœå‡½æ•°ä½“ä¸éœ€è¦è¿”å›å€¼ï¼Œä¸”åªæœ‰ä¸€å¥è¯ï¼Œå¯ä»¥ç»™è¿™ä¸ªè¯­å¥å‰é¢åŠ ä¸€ä¸ªvoidå…³é”®å­—ã€‚æœ€å¸¸è§çš„å°±æ˜¯è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼š\n\nlet fn &#x3D; () &#x3D;&gt; void doesNotReturn();\nå¤åˆ¶ä»£ç \n\nï¼ˆ2ï¼‰ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„this\nç®­å¤´å‡½æ•°ä¸ä¼šåˆ›å»ºè‡ªå·±çš„thisï¼Œ æ‰€ä»¥å®ƒæ²¡æœ‰è‡ªå·±çš„thisï¼Œå®ƒåªä¼šåœ¨è‡ªå·±ä½œç”¨åŸŸçš„ä¸Šä¸€å±‚ç»§æ‰¿thisã€‚æ‰€ä»¥ç®­å¤´å‡½æ•°ä¸­thisçš„æŒ‡å‘åœ¨å®ƒåœ¨å®šä¹‰æ—¶å·²ç»ç¡®å®šäº†ï¼Œä¹‹åä¸ä¼šæ”¹å˜ã€‚\nï¼ˆ3ï¼‰ç®­å¤´å‡½æ•°ç»§æ‰¿æ¥çš„thisæŒ‡å‘æ°¸è¿œä¸ä¼šæ”¹å˜\nvar id &#x3D; &#39;GLOBAL&#39;;\nvar obj &#x3D; &#123;\n  id: &#39;OBJ&#39;,\n  a: function()&#123;\n    console.log(this.id);\n  &#125;,\n  b: () &#x3D;&gt; &#123;\n    console.log(this.id);\n  &#125;\n&#125;;\nobj.a();    &#x2F;&#x2F; &#39;OBJ&#39;\nobj.b();    &#x2F;&#x2F; &#39;GLOBAL&#39;\nnew obj.a()  &#x2F;&#x2F; undefined\nnew obj.b()  &#x2F;&#x2F; Uncaught TypeError: obj.b is not a constructor\nå¤åˆ¶ä»£ç \n\nå¯¹è±¡objçš„æ–¹æ³•bæ˜¯ä½¿ç”¨ç®­å¤´å‡½æ•°å®šä¹‰çš„ï¼Œè¿™ä¸ªå‡½æ•°ä¸­çš„thiså°±æ°¸è¿œæŒ‡å‘å®ƒå®šä¹‰æ—¶æ‰€å¤„çš„å…¨å±€æ‰§è¡Œç¯å¢ƒä¸­çš„thisï¼Œå³ä¾¿è¿™ä¸ªå‡½æ•°æ˜¯ä½œä¸ºå¯¹è±¡objçš„æ–¹æ³•è°ƒç”¨ï¼Œthisä¾æ—§æŒ‡å‘Windowå¯¹è±¡ã€‚éœ€è¦æ³¨æ„ï¼Œå®šä¹‰å¯¹è±¡çš„å¤§æ‹¬å·&#123;&#125;æ˜¯æ— æ³•å½¢æˆä¸€ä¸ªå•ç‹¬çš„æ‰§è¡Œç¯å¢ƒçš„ï¼Œå®ƒä¾æ—§æ˜¯å¤„äºå…¨å±€æ‰§è¡Œç¯å¢ƒä¸­ã€‚\nï¼ˆ4ï¼‰call()ã€apply()ã€bind()ç­‰æ–¹æ³•ä¸èƒ½æ”¹å˜ç®­å¤´å‡½æ•°ä¸­thisçš„æŒ‡å‘\nvar id &#x3D; &#39;Global&#39;;\nlet fun1 &#x3D; () &#x3D;&gt; &#123;\n    console.log(this.id)\n&#125;;\nfun1();                     &#x2F;&#x2F; &#39;Global&#39;\nfun1.call(&#123;id: &#39;Obj&#39;&#125;);     &#x2F;&#x2F; &#39;Global&#39;\nfun1.apply(&#123;id: &#39;Obj&#39;&#125;);    &#x2F;&#x2F; &#39;Global&#39;\nfun1.bind(&#123;id: &#39;Obj&#39;&#125;)();   &#x2F;&#x2F; &#39;Global&#39;\nå¤åˆ¶ä»£ç \n\nï¼ˆ5ï¼‰ç®­å¤´å‡½æ•°ä¸èƒ½ä½œä¸ºæ„é€ å‡½æ•°ä½¿ç”¨\næ„é€ å‡½æ•°åœ¨newçš„æ­¥éª¤åœ¨ä¸Šé¢å·²ç»è¯´è¿‡äº†ï¼Œå®é™…ä¸Šç¬¬äºŒæ­¥å°±æ˜¯å°†å‡½æ•°ä¸­çš„thisæŒ‡å‘è¯¥å¯¹è±¡ã€‚ ä½†æ˜¯ç”±äºç®­å¤´å‡½æ•°æ—¶æ²¡æœ‰è‡ªå·±çš„thisçš„ï¼Œä¸”thisæŒ‡å‘å¤–å±‚çš„æ‰§è¡Œç¯å¢ƒï¼Œä¸”ä¸èƒ½æ”¹å˜æŒ‡å‘ï¼Œæ‰€ä»¥ä¸èƒ½å½“åšæ„é€ å‡½æ•°ä½¿ç”¨ã€‚\nï¼ˆ6ï¼‰ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„arguments\nç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„argumentså¯¹è±¡ã€‚åœ¨ç®­å¤´å‡½æ•°ä¸­è®¿é—®argumentså®é™…ä¸Šè·å¾—çš„æ˜¯å®ƒå¤–å±‚å‡½æ•°çš„argumentså€¼ã€‚\nï¼ˆ7ï¼‰ç®­å¤´å‡½æ•°æ²¡æœ‰prototype\nï¼ˆ8ï¼‰ç®­å¤´å‡½æ•°ä¸èƒ½ç”¨ä½œGeneratorå‡½æ•°ï¼Œä¸èƒ½ä½¿ç”¨yeildå…³é”®å­—\n5. ç®­å¤´å‡½æ•°çš„thisæŒ‡å‘å“ªâ¾¥ï¼Ÿç®­å¤´å‡½æ•°ä¸åŒäºä¼ ç»ŸJavaScriptä¸­çš„å‡½æ•°ï¼Œç®­å¤´å‡½æ•°å¹¶æ²¡æœ‰å±äºâ¾ƒâ¼°çš„thisï¼Œå®ƒæ‰€è°“çš„thisæ˜¯æ•è·å…¶æ‰€åœ¨ä¸Šä¸‹â½‚çš„ this å€¼ï¼Œä½œä¸ºâ¾ƒâ¼°çš„ this å€¼ï¼Œå¹¶ä¸”ç”±äºæ²¡æœ‰å±äºâ¾ƒâ¼°çš„thisï¼Œæ‰€ä»¥æ˜¯ä¸ä¼šè¢«newè°ƒâ½¤çš„ï¼Œè¿™ä¸ªæ‰€è°“çš„thisä¹Ÿä¸ä¼šè¢«æ”¹å˜ã€‚\nå¯ä»¥â½¤Babelç†è§£â¼€ä¸‹ç®­å¤´å‡½æ•°:\n&#x2F;&#x2F; ES6 \nconst obj &#x3D; &#123; \n  getArrow() &#123; \n    return () &#x3D;&gt; &#123; \n      console.log(this &#x3D;&#x3D;&#x3D; obj); \n    &#125;; \n  &#125; \n&#125;\nå¤åˆ¶ä»£ç \n\nè½¬åŒ–åï¼š\n&#x2F;&#x2F; ES5ï¼Œç”± Babel è½¬è¯‘\nvar obj &#x3D; &#123; \n   getArrow: function getArrow() &#123; \n     var _this &#x3D; this; \n     return function () &#123; \n        console.log(_this &#x3D;&#x3D;&#x3D; obj); \n     &#125;; \n   &#125; \n&#125;;\nå¤åˆ¶ä»£ç \n\n6. æ‰©å±•è¿ç®—ç¬¦çš„ä½œç”¨åŠä½¿ç”¨åœºæ™¯ï¼ˆ1ï¼‰å¯¹è±¡æ‰©å±•è¿ç®—ç¬¦\nå¯¹è±¡çš„æ‰©å±•è¿ç®—ç¬¦(â€¦)ç”¨äºå–å‡ºå‚æ•°å¯¹è±¡ä¸­çš„æ‰€æœ‰å¯éå†å±æ€§ï¼Œæ‹·è´åˆ°å½“å‰å¯¹è±¡ä¹‹ä¸­ã€‚\nlet bar &#x3D; &#123; a: 1, b: 2 &#125;;\nlet baz &#x3D; &#123; ...bar &#125;; &#x2F;&#x2F; &#123; a: 1, b: 2 &#125;\nå¤åˆ¶ä»£ç \n\nä¸Šè¿°æ–¹æ³•å®é™…ä¸Šç­‰ä»·äº:\nlet bar &#x3D; &#123; a: 1, b: 2 &#125;;\nlet baz &#x3D; Object.assign(&#123;&#125;, bar); &#x2F;&#x2F; &#123; a: 1, b: 2 &#125;\nå¤åˆ¶ä»£ç \n\nObject.assignæ–¹æ³•ç”¨äºå¯¹è±¡çš„åˆå¹¶ï¼Œå°†æºå¯¹è±¡ï¼ˆsourceï¼‰çš„æ‰€æœ‰å¯æšä¸¾å±æ€§ï¼Œå¤åˆ¶åˆ°ç›®æ ‡å¯¹è±¡ï¼ˆtargetï¼‰ã€‚Object.assignæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç›®æ ‡å¯¹è±¡ï¼Œåé¢çš„å‚æ•°éƒ½æ˜¯æºå¯¹è±¡ã€‚(å¦‚æœç›®æ ‡å¯¹è±¡ä¸æºå¯¹è±¡æœ‰åŒåå±æ€§ï¼Œæˆ–å¤šä¸ªæºå¯¹è±¡æœ‰åŒåå±æ€§ï¼Œåˆ™åé¢çš„å±æ€§ä¼šè¦†ç›–å‰é¢çš„å±æ€§)ã€‚\nåŒæ ·ï¼Œå¦‚æœç”¨æˆ·è‡ªå®šä¹‰çš„å±æ€§ï¼Œæ”¾åœ¨æ‰©å±•è¿ç®—ç¬¦åé¢ï¼Œåˆ™æ‰©å±•è¿ç®—ç¬¦å†…éƒ¨çš„åŒåå±æ€§ä¼šè¢«è¦†ç›–æ‰ã€‚\nlet bar &#x3D; &#123;a: 1, b: 2&#125;;\nlet baz &#x3D; &#123;...bar, ...&#123;a:2, b: 4&#125;&#125;;  &#x2F;&#x2F; &#123;a: 2, b: 4&#125;\nå¤åˆ¶ä»£ç \n\nåˆ©ç”¨ä¸Šè¿°ç‰¹æ€§å°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„ä¿®æ”¹å¯¹è±¡çš„éƒ¨åˆ†å±æ€§ã€‚åœ¨reduxä¸­çš„reducerå‡½æ•°è§„å®šå¿…é¡»æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œreducerä¸­çš„stateå¯¹è±¡è¦æ±‚ä¸èƒ½ç›´æ¥ä¿®æ”¹ï¼Œå¯ä»¥é€šè¿‡æ‰©å±•è¿ç®—ç¬¦æŠŠä¿®æ”¹è·¯å¾„çš„å¯¹è±¡éƒ½å¤åˆ¶ä¸€éï¼Œç„¶åäº§ç”Ÿä¸€ä¸ªæ–°çš„å¯¹è±¡è¿”å›ã€‚\néœ€è¦æ³¨æ„ï¼šæ‰©å±•è¿ç®—ç¬¦å¯¹å¯¹è±¡å®ä¾‹çš„æ‹·è´å±äºæµ…æ‹·è´ã€‚\nï¼ˆ2ï¼‰æ•°ç»„æ‰©å±•è¿ç®—ç¬¦\næ•°ç»„çš„æ‰©å±•è¿ç®—ç¬¦å¯ä»¥å°†ä¸€ä¸ªæ•°ç»„è½¬ä¸ºç”¨é€—å·åˆ†éš”çš„å‚æ•°åºåˆ—ï¼Œä¸”æ¯æ¬¡åªèƒ½å±•å¼€ä¸€å±‚æ•°ç»„ã€‚\nconsole.log(...[1, 2, 3])\n&#x2F;&#x2F; 1 2 3\nconsole.log(...[1, [2, 3, 4], 5])\n&#x2F;&#x2F; 1 [2, 3, 4] 5\nå¤åˆ¶ä»£ç \n\nä¸‹é¢æ˜¯æ•°ç»„çš„æ‰©å±•è¿ç®—ç¬¦çš„åº”ç”¨ï¼š\n\nå°†æ•°ç»„è½¬æ¢ä¸ºå‚æ•°åºåˆ—\n\nfunction add(x, y) &#123;\n  return x + y;\n&#125;\nconst numbers &#x3D; [1, 2];\nadd(...numbers) &#x2F;&#x2F; 3\nå¤åˆ¶ä»£ç \n\n\nå¤åˆ¶æ•°ç»„\n\nconst arr1 &#x3D; [1, 2];\nconst arr2 &#x3D; [...arr1];\nå¤åˆ¶ä»£ç \n\nè¦è®°ä½ï¼šæ‰©å±•è¿ç®—ç¬¦(â€¦)ç”¨äºå–å‡ºå‚æ•°å¯¹è±¡ä¸­çš„æ‰€æœ‰å¯éå†å±æ€§ï¼Œæ‹·è´åˆ°å½“å‰å¯¹è±¡ä¹‹ä¸­ï¼Œè¿™é‡Œå‚æ•°å¯¹è±¡æ˜¯ä¸ªæ•°ç»„ï¼Œæ•°ç»„é‡Œé¢çš„æ‰€æœ‰å¯¹è±¡éƒ½æ˜¯åŸºç¡€æ•°æ®ç±»å‹ï¼Œå°†æ‰€æœ‰åŸºç¡€æ•°æ®ç±»å‹é‡æ–°æ‹·è´åˆ°æ–°çš„æ•°ç»„ä¸­ã€‚\n\nåˆå¹¶æ•°ç»„\n\nå¦‚æœæƒ³åœ¨æ•°ç»„å†…åˆå¹¶æ•°ç»„ï¼Œå¯ä»¥è¿™æ ·ï¼š\nconst arr1 &#x3D; [&#39;two&#39;, &#39;three&#39;];const arr2 &#x3D; [&#39;one&#39;, ...arr1, &#39;four&#39;, &#39;five&#39;];&#x2F;&#x2F; [&quot;one&quot;, &quot;two&quot;, &quot;three&quot;, &quot;four&quot;, &quot;five&quot;]\nå¤åˆ¶ä»£ç \n\n\næ‰©å±•è¿ç®—ç¬¦ä¸è§£æ„èµ‹å€¼ç»“åˆèµ·æ¥ï¼Œç”¨äºç”Ÿæˆæ•°ç»„\n\nconst [first, ...rest] &#x3D; [1, 2, 3, 4, 5];first &#x2F;&#x2F; 1rest  &#x2F;&#x2F; [2, 3, 4, 5]\nå¤åˆ¶ä»£ç \n\néœ€è¦æ³¨æ„ï¼šå¦‚æœå°†æ‰©å±•è¿ç®—ç¬¦ç”¨äºæ•°ç»„èµ‹å€¼ï¼Œåªèƒ½æ”¾åœ¨å‚æ•°çš„æœ€åä¸€ä½ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚\nconst [...rest, last] &#x3D; [1, 2, 3, 4, 5];         &#x2F;&#x2F; æŠ¥é”™const [first, ...rest, last] &#x3D; [1, 2, 3, 4, 5];  &#x2F;&#x2F; æŠ¥é”™\nå¤åˆ¶ä»£ç \n\n\nå°†å­—ç¬¦ä¸²è½¬ä¸ºçœŸæ­£çš„æ•°ç»„\n\n[...&#39;hello&#39;]    &#x2F;&#x2F; [ &quot;h&quot;, &quot;e&quot;, &quot;l&quot;, &quot;l&quot;, &quot;o&quot; ]\nå¤åˆ¶ä»£ç \n\n\nä»»ä½• Iterator æ¥å£çš„å¯¹è±¡ï¼Œéƒ½å¯ä»¥ç”¨æ‰©å±•è¿ç®—ç¬¦è½¬ä¸ºçœŸæ­£çš„æ•°ç»„\n\næ¯”è¾ƒå¸¸è§çš„åº”ç”¨æ˜¯å¯ä»¥å°†æŸäº›æ•°æ®ç»“æ„è½¬ä¸ºæ•°ç»„ï¼š\n&#x2F;&#x2F; argumentså¯¹è±¡\nfunction foo() &#123;\n  const args &#x3D; [...arguments];\n&#125;\nå¤åˆ¶ä»£ç \n\nç”¨äºæ›¿æ¢es5ä¸­çš„Array.prototype.slice.call(arguments)å†™æ³•ã€‚\n\nä½¿ç”¨Mathå‡½æ•°è·å–æ•°ç»„ä¸­ç‰¹å®šçš„å€¼\n\nconst numbers &#x3D; [9, 4, 7, 1];\nMath.min(...numbers); &#x2F;&#x2F; 1\nMath.max(...numbers); &#x2F;&#x2F; 9\nå¤åˆ¶ä»£ç \n\n8. å¯¹å¯¹è±¡ä¸æ•°ç»„çš„è§£æ„çš„ç†è§£è§£æ„æ˜¯ ES6 æä¾›çš„ä¸€ç§æ–°çš„æå–æ•°æ®çš„æ¨¡å¼ï¼Œè¿™ç§æ¨¡å¼èƒ½å¤Ÿä»å¯¹è±¡æˆ–æ•°ç»„é‡Œæœ‰é’ˆå¯¹æ€§åœ°æ‹¿åˆ°æƒ³è¦çš„æ•°å€¼ã€‚ 1ï¼‰æ•°ç»„çš„è§£æ„ åœ¨è§£æ„æ•°ç»„æ—¶ï¼Œä»¥å…ƒç´ çš„ä½ç½®ä¸ºåŒ¹é…æ¡ä»¶æ¥æå–æƒ³è¦çš„æ•°æ®çš„ï¼š\nconst [a, b, c] &#x3D; [1, 2, 3]\nå¤åˆ¶ä»£ç \n\næœ€ç»ˆï¼Œaã€bã€cåˆ†åˆ«è¢«èµ‹äºˆäº†æ•°ç»„ç¬¬0ã€1ã€2ä¸ªç´¢å¼•ä½çš„å€¼ï¼š  æ•°ç»„é‡Œçš„0ã€1ã€2ç´¢å¼•ä½çš„å…ƒç´ å€¼ï¼Œç²¾å‡†åœ°è¢«æ˜ å°„åˆ°äº†å·¦ä¾§çš„ç¬¬0ã€1ã€2ä¸ªå˜é‡é‡Œå»ï¼Œè¿™å°±æ˜¯æ•°ç»„è§£æ„çš„å·¥ä½œæ¨¡å¼ã€‚è¿˜å¯ä»¥é€šè¿‡ç»™å·¦ä¾§å˜é‡æ•°ç»„è®¾ç½®ç©ºå ä½çš„æ–¹å¼ï¼Œå®ç°å¯¹æ•°ç»„ä¸­æŸå‡ ä¸ªå…ƒç´ çš„ç²¾å‡†æå–ï¼š\nconst [a,,c] &#x3D; [1,2,3]\nå¤åˆ¶ä»£ç \n\né€šè¿‡æŠŠä¸­é—´ä½ç•™ç©ºï¼Œå¯ä»¥é¡ºåˆ©åœ°æŠŠæ•°ç»„ç¬¬ä¸€ä½å’Œæœ€åä¸€ä½çš„å€¼èµ‹ç»™ aã€c ä¸¤ä¸ªå˜é‡ï¼š \n2ï¼‰å¯¹è±¡çš„è§£æ„ å¯¹è±¡è§£æ„æ¯”æ•°ç»„ç»“æ„ç¨å¾®å¤æ‚ä¸€äº›ï¼Œä¹Ÿæ›´æ˜¾å¼ºå¤§ã€‚åœ¨è§£æ„å¯¹è±¡æ—¶ï¼Œæ˜¯ä»¥å±æ€§çš„åç§°ä¸ºåŒ¹é…æ¡ä»¶ï¼Œæ¥æå–æƒ³è¦çš„æ•°æ®çš„ã€‚ç°åœ¨å®šä¹‰ä¸€ä¸ªå¯¹è±¡ï¼š\nconst stu &#x3D; &#123;\n  name: &#39;Bob&#39;,\n  age: 24\n&#125;\nå¤åˆ¶ä»£ç \n\nå‡å¦‚æƒ³è¦è§£æ„å®ƒçš„ä¸¤ä¸ªè‡ªæœ‰å±æ€§ï¼Œå¯ä»¥è¿™æ ·ï¼š\nconst &#123; name, age &#125; &#x3D; stu\nå¤åˆ¶ä»£ç \n\nè¿™æ ·å°±å¾—åˆ°äº† name å’Œ age ä¸¤ä¸ªå’Œ stu å¹³çº§çš„å˜é‡ï¼š \næ³¨æ„ï¼Œå¯¹è±¡è§£æ„ä¸¥æ ¼ä»¥å±æ€§åä½œä¸ºå®šä½ä¾æ®ï¼Œæ‰€ä»¥å°±ç®—è°ƒæ¢äº† name å’Œ age çš„ä½ç½®ï¼Œç»“æœä¹Ÿæ˜¯ä¸€æ ·çš„ï¼š\nconst &#123; age, name &#125; &#x3D; stu\nå¤åˆ¶ä»£ç \n\n9. å¦‚ä½•æå–é«˜åº¦åµŒå¥—çš„å¯¹è±¡é‡Œçš„æŒ‡å®šå±æ€§ï¼Ÿæœ‰æ—¶ä¼šé‡åˆ°ä¸€äº›åµŒå¥—ç¨‹åº¦éå¸¸æ·±çš„å¯¹è±¡ï¼š\nconst school &#x3D; &#123;\n   classes: &#123;\n      stu: &#123;\n         name: &#39;Bob&#39;,\n         age: 24,\n      &#125;\n   &#125;\n&#125;\nå¤åˆ¶ä»£ç \n\nåƒæ­¤å¤„çš„ name è¿™ä¸ªå˜é‡ï¼ŒåµŒå¥—äº†å››å±‚ï¼Œæ­¤æ—¶å¦‚æœä»ç„¶å°è¯•è€æ–¹æ³•æ¥æå–å®ƒï¼š\nconst &#123; name &#125; &#x3D; school\nå¤åˆ¶ä»£ç \n\næ˜¾ç„¶æ˜¯ä¸å¥æ•ˆçš„ï¼Œå› ä¸º school è¿™ä¸ªå¯¹è±¡æœ¬èº«æ˜¯æ²¡æœ‰ name è¿™ä¸ªå±æ€§çš„ï¼Œname ä½äº school å¯¹è±¡çš„â€œå„¿å­çš„å„¿å­â€å¯¹è±¡é‡Œé¢ã€‚è¦æƒ³æŠŠ name æå–å‡ºæ¥ï¼Œä¸€ç§æ¯”è¾ƒç¬¨çš„æ–¹æ³•æ˜¯é€å±‚è§£æ„ï¼š\nconst &#123; classes &#125; &#x3D; school\nconst &#123; stu &#125; &#x3D; classes\nconst &#123; name &#125; &#x3D; stu\nname &#x2F;&#x2F; &#39;Bob&#39;\nå¤åˆ¶ä»£ç \n\nä½†æ˜¯è¿˜æœ‰ä¸€ç§æ›´æ ‡å‡†çš„åšæ³•ï¼Œå¯ä»¥ç”¨ä¸€è¡Œä»£ç æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š\nconst &#123; classes: &#123; stu: &#123; name &#125; &#125;&#125; &#x3D; school\n       \nconsole.log(name)  &#x2F;&#x2F; &#39;Bob&#39;\nå¤åˆ¶ä»£ç \n\nå¯ä»¥åœ¨è§£æ„å‡ºæ¥çš„å˜é‡åå³ä¾§ï¼Œé€šè¿‡å†’å·+{ç›®æ ‡å±æ€§å}è¿™ç§å½¢å¼ï¼Œè¿›ä¸€æ­¥è§£æ„å®ƒï¼Œä¸€ç›´è§£æ„åˆ°æ‹¿åˆ°ç›®æ ‡æ•°æ®ä¸ºæ­¢ã€‚\n10. å¯¹ rest å‚æ•°çš„ç†è§£æ‰©å±•è¿ç®—ç¬¦è¢«ç”¨åœ¨å‡½æ•°å½¢å‚ä¸Šæ—¶ï¼Œå®ƒè¿˜å¯ä»¥æŠŠä¸€ä¸ªåˆ†ç¦»çš„å‚æ•°åºåˆ—æ•´åˆæˆä¸€ä¸ªæ•°ç»„ï¼š\nfunction mutiple(...args) &#123;\n  let result &#x3D; 1;\n  for (var val of args) &#123;\n    result *&#x3D; val;\n  &#125;\n  return result;\n&#125;\nmutiple(1, 2, 3, 4) &#x2F;&#x2F; 24\nå¤åˆ¶ä»£ç \n\nè¿™é‡Œï¼Œä¼ å…¥ mutiple çš„æ˜¯å››ä¸ªåˆ†ç¦»çš„å‚æ•°ï¼Œä½†æ˜¯å¦‚æœåœ¨ mutiple å‡½æ•°é‡Œå°è¯•è¾“å‡º args çš„å€¼ï¼Œä¼šå‘ç°å®ƒæ˜¯ä¸€ä¸ªæ•°ç»„ï¼š\nfunction mutiple(...args) &#123;\n  console.log(args)\n&#125;\nmutiple(1, 2, 3, 4) &#x2F;&#x2F; [1, 2, 3, 4]\nå¤åˆ¶ä»£ç \n\nè¿™å°±æ˜¯ â€¦ restè¿ç®—ç¬¦çš„åˆä¸€å±‚å¨åŠ›äº†ï¼Œå®ƒå¯ä»¥æŠŠå‡½æ•°çš„å¤šä¸ªå…¥å‚æ”¶æ•›è¿›ä¸€ä¸ªæ•°ç»„é‡Œã€‚è¿™ä¸€ç‚¹ç»å¸¸ç”¨äºè·å–å‡½æ•°çš„å¤šä½™å‚æ•°ï¼Œæˆ–è€…åƒä¸Šé¢è¿™æ ·å¤„ç†å‡½æ•°å‚æ•°ä¸ªæ•°ä¸ç¡®å®šçš„æƒ…å†µã€‚\n11. ES6ä¸­æ¨¡æ¿è¯­æ³•ä¸å­—ç¬¦ä¸²å¤„ç†ES6 æå‡ºäº†â€œæ¨¡æ¿è¯­æ³•â€çš„æ¦‚å¿µã€‚åœ¨ ES6 ä»¥å‰ï¼Œæ‹¼æ¥å­—ç¬¦ä¸²æ˜¯å¾ˆéº»çƒ¦çš„äº‹æƒ…ï¼š\nvar name &#x3D; &#39;css&#39;   \nvar career &#x3D; &#39;coder&#39; \nvar hobby &#x3D; [&#39;coding&#39;, &#39;writing&#39;]\nvar finalString &#x3D; &#39;my name is &#39; + name + &#39;, I work as a &#39; + career + &#39;, I love &#39; + hobby[0] + &#39; and &#39; + hobby[1]\nå¤åˆ¶ä»£ç \n\nä»…ä»…å‡ ä¸ªå˜é‡ï¼Œå†™äº†è¿™ä¹ˆå¤šåŠ å·ï¼Œè¿˜è¦æ—¶åˆ»å°å¿ƒé‡Œé¢çš„ç©ºæ ¼å’Œæ ‡ç‚¹ç¬¦å·æœ‰æ²¡æœ‰è·Ÿé”™åœ°æ–¹ã€‚ä½†æ˜¯æœ‰äº†æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œæ‹¼æ¥éš¾åº¦ç›´çº¿ä¸‹é™ï¼š\nvar name &#x3D; &#39;css&#39;   \nvar career &#x3D; &#39;coder&#39; \nvar hobby &#x3D; [&#39;coding&#39;, &#39;writing&#39;]\nvar finalString &#x3D; &#96;my name is $&#123;name&#125;, I work as a $&#123;career&#125; I love $&#123;hobby[0]&#125; and $&#123;hobby[1]&#125;&#96;\nå¤åˆ¶ä»£ç \n\nå­—ç¬¦ä¸²ä¸ä»…æ›´å®¹æ˜“æ‹¼äº†ï¼Œä¹Ÿæ›´æ˜“è¯»äº†ï¼Œä»£ç æ•´ä½“çš„è´¨é‡éƒ½å˜é«˜äº†ã€‚è¿™å°±æ˜¯æ¨¡æ¿å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªä¼˜åŠ¿â€”â€”å…è®¸ç”¨${}çš„æ–¹å¼åµŒå…¥å˜é‡ã€‚ä½†è¿™è¿˜ä¸æ˜¯é—®é¢˜çš„å…³é”®ï¼Œæ¨¡æ¿å­—ç¬¦ä¸²çš„å…³é”®ä¼˜åŠ¿æœ‰ä¸¤ä¸ªï¼š\n\nåœ¨æ¨¡æ¿å­—ç¬¦ä¸²ä¸­ï¼Œç©ºæ ¼ã€ç¼©è¿›ã€æ¢è¡Œéƒ½ä¼šè¢«ä¿ç•™\næ¨¡æ¿å­—ç¬¦ä¸²å®Œå…¨æ”¯æŒâ€œè¿ç®—â€å¼çš„è¡¨è¾¾å¼ï¼Œå¯ä»¥åœ¨${}é‡Œå®Œæˆä¸€äº›è®¡ç®—\n\nåŸºäºç¬¬ä¸€ç‚¹ï¼Œå¯ä»¥åœ¨æ¨¡æ¿å­—ç¬¦ä¸²é‡Œæ— éšœç¢åœ°ç›´æ¥å†™ html ä»£ç ï¼š\nlet list &#x3D; &#96;\n\t&lt;ul&gt;\n\t\t&lt;li&gt;åˆ—è¡¨é¡¹1&lt;&#x2F;li&gt;\n\t\t&lt;li&gt;åˆ—è¡¨é¡¹2&lt;&#x2F;li&gt;\n\t&lt;&#x2F;ul&gt;\n&#96;;\nconsole.log(message); &#x2F;&#x2F; æ­£ç¡®è¾“å‡ºï¼Œä¸å­˜åœ¨æŠ¥é”™\nå¤åˆ¶ä»£ç \n\nåŸºäºç¬¬äºŒç‚¹ï¼Œå¯ä»¥æŠŠä¸€äº›ç®€å•çš„è®¡ç®—å’Œè°ƒç”¨ä¸¢è¿› ${} æ¥åšï¼š\nfunction add(a, b) &#123;\n  const finalString &#x3D; &#96;$&#123;a&#125; + $&#123;b&#125; &#x3D; $&#123;a+b&#125;&#96;\n  console.log(finalString)\n&#125;\nadd(1, 2) &#x2F;&#x2F; è¾“å‡º &#39;1 + 2 &#x3D; 3&#39;\nå¤åˆ¶ä»£ç \n\né™¤äº†æ¨¡æ¿è¯­æ³•å¤–ï¼Œ ES6ä¸­è¿˜æ–°å¢äº†ä¸€ç³»åˆ—çš„å­—ç¬¦ä¸²æ–¹æ³•ç”¨äºæå‡å¼€å‘æ•ˆç‡ï¼š\nï¼ˆ1ï¼‰å­˜åœ¨æ€§åˆ¤å®šï¼šåœ¨è¿‡å»ï¼Œå½“åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦&#x2F;å­—ç¬¦ä¸²æ˜¯å¦åœ¨æŸå­—ç¬¦ä¸²ä¸­æ—¶ï¼Œåªèƒ½ç”¨ indexOf &gt; -1 æ¥åšã€‚ç°åœ¨ ES6 æä¾›äº†ä¸‰ä¸ªæ–¹æ³•ï¼šincludesã€startsWithã€endsWithï¼Œå®ƒä»¬éƒ½ä¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼æ¥å‘Šè¯‰ä½ æ˜¯å¦å­˜åœ¨ã€‚\n\nincludesï¼šåˆ¤æ–­å­—ç¬¦ä¸²ä¸å­ä¸²çš„åŒ…å«å…³ç³»ï¼š\n\nconst son &#x3D; &#39;haha&#39; \nconst father &#x3D; &#39;xixi haha hehe&#39;\nfather.includes(son) &#x2F;&#x2F; true\nå¤åˆ¶ä»£ç \n\n\nstartsWithï¼šåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŸä¸ª&#x2F;æŸä¸²å­—ç¬¦å¼€å¤´ï¼š\n\nconst father &#x3D; &#39;xixi haha hehe&#39;\nfather.startsWith(&#39;haha&#39;) &#x2F;&#x2F; false\nfather.startsWith(&#39;xixi&#39;) &#x2F;&#x2F; true\nå¤åˆ¶ä»£ç \n\n\nendsWithï¼šåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŸä¸ª&#x2F;æŸä¸²å­—ç¬¦ç»“å°¾ï¼š\n\nconst father &#x3D; &#39;xixi haha hehe&#39;\n  father.endsWith(&#39;hehe&#39;) &#x2F;&#x2F; true\nå¤åˆ¶ä»£ç \n\nï¼ˆ2ï¼‰è‡ªåŠ¨é‡å¤ï¼šå¯ä»¥ä½¿ç”¨ repeat æ–¹æ³•æ¥ä½¿åŒä¸€ä¸ªå­—ç¬¦ä¸²è¾“å‡ºå¤šæ¬¡ï¼ˆè¢«è¿ç»­å¤åˆ¶å¤šæ¬¡ï¼‰ï¼š\nconst sourceCode &#x3D; &#39;repeat for 3 times;&#39;\nconst repeated &#x3D; sourceCode.repeat(3) \nconsole.log(repeated) &#x2F;&#x2F; repeat for 3 times;repeat for 3 times;repeat for 3 times;\nå¤åˆ¶ä»£ç \n\nä¸‰ã€JavaScriptåŸºç¡€1. newæ“ä½œç¬¦çš„å®ç°åŸç†newæ“ä½œç¬¦çš„æ‰§è¡Œè¿‡ç¨‹ï¼š\nï¼ˆ1ï¼‰é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ç©ºå¯¹è±¡\nï¼ˆ2ï¼‰è®¾ç½®åŸå‹ï¼Œå°†å¯¹è±¡çš„åŸå‹è®¾ç½®ä¸ºå‡½æ•°çš„ prototype å¯¹è±¡ã€‚\nï¼ˆ3ï¼‰è®©å‡½æ•°çš„ this æŒ‡å‘è¿™ä¸ªå¯¹è±¡ï¼Œæ‰§è¡Œæ„é€ å‡½æ•°çš„ä»£ç ï¼ˆä¸ºè¿™ä¸ªæ–°å¯¹è±¡æ·»åŠ å±æ€§ï¼‰\nï¼ˆ4ï¼‰åˆ¤æ–­å‡½æ•°çš„è¿”å›å€¼ç±»å‹ï¼Œå¦‚æœæ˜¯å€¼ç±»å‹ï¼Œè¿”å›åˆ›å»ºçš„å¯¹è±¡ã€‚å¦‚æœæ˜¯å¼•ç”¨ç±»å‹ï¼Œå°±è¿”å›è¿™ä¸ªå¼•ç”¨ç±»å‹çš„å¯¹è±¡ã€‚\nå…·ä½“å®ç°ï¼š\nfunction objectFactory() &#123;\n  let newObject &#x3D; null;\n  let constructor &#x3D; Array.prototype.shift.call(arguments);\n  let result &#x3D; null;\n  &#x2F;&#x2F; åˆ¤æ–­å‚æ•°æ˜¯å¦æ˜¯ä¸€ä¸ªå‡½æ•°\n  if (typeof constructor !&#x3D;&#x3D; &quot;function&quot;) &#123;\n    console.error(&quot;type error&quot;);\n    return;\n  &#125;\n  &#x2F;&#x2F; æ–°å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼Œå¯¹è±¡çš„åŸå‹ä¸ºæ„é€ å‡½æ•°çš„ prototype å¯¹è±¡\n  newObject &#x3D; Object.create(constructor.prototype);\n  &#x2F;&#x2F; å°† this æŒ‡å‘æ–°å»ºå¯¹è±¡ï¼Œå¹¶æ‰§è¡Œå‡½æ•°\n  result &#x3D; constructor.apply(newObject, arguments);\n  &#x2F;&#x2F; åˆ¤æ–­è¿”å›å¯¹è±¡\n  let flag &#x3D; result &amp;&amp; (typeof result &#x3D;&#x3D;&#x3D; &quot;object&quot; || typeof result &#x3D;&#x3D;&#x3D; &quot;function&quot;);\n  &#x2F;&#x2F; åˆ¤æ–­è¿”å›ç»“æœ\n  return flag ? result : newObject;\n&#125;\n&#x2F;&#x2F; ä½¿ç”¨æ–¹æ³•\nobjectFactory(æ„é€ å‡½æ•°, åˆå§‹åŒ–å‚æ•°);\nå¤åˆ¶ä»£ç \n\n2. mapå’ŒObjectçš„åŒºåˆ«\n\n\n\nMap\nObject\n\n\n\næ„å¤–çš„é”®\nMapé»˜è®¤æƒ…å†µä¸åŒ…å«ä»»ä½•é”®ï¼ŒåªåŒ…å«æ˜¾å¼æ’å…¥çš„é”®ã€‚\nObject æœ‰ä¸€ä¸ªåŸå‹, åŸå‹é“¾ä¸Šçš„é”®åæœ‰å¯èƒ½å’Œè‡ªå·±åœ¨å¯¹è±¡ä¸Šçš„è®¾ç½®çš„é”®åäº§ç”Ÿå†²çªã€‚\n\n\né”®çš„ç±»å‹\nMapçš„é”®å¯ä»¥æ˜¯ä»»æ„å€¼ï¼ŒåŒ…æ‹¬å‡½æ•°ã€å¯¹è±¡æˆ–ä»»æ„åŸºæœ¬ç±»å‹ã€‚\nObject çš„é”®å¿…é¡»æ˜¯ String æˆ–æ˜¯Symbolã€‚\n\n\né”®çš„é¡ºåº\nMap ä¸­çš„ key æ˜¯æœ‰åºçš„ã€‚å› æ­¤ï¼Œå½“è¿­ä»£çš„æ—¶å€™ï¼Œ Map å¯¹è±¡ä»¥æ’å…¥çš„é¡ºåºè¿”å›é”®å€¼ã€‚\nObject çš„é”®æ˜¯æ— åºçš„\n\n\nSize\nMap çš„é”®å€¼å¯¹ä¸ªæ•°å¯ä»¥è½»æ˜“åœ°é€šè¿‡size å±æ€§è·å–\nObject çš„é”®å€¼å¯¹ä¸ªæ•°åªèƒ½æ‰‹åŠ¨è®¡ç®—\n\n\nè¿­ä»£\nMap æ˜¯ iterable çš„ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥è¢«è¿­ä»£ã€‚\nè¿­ä»£Objectéœ€è¦ä»¥æŸç§æ–¹å¼è·å–å®ƒçš„é”®ç„¶åæ‰èƒ½è¿­ä»£ã€‚\n\n\næ€§èƒ½\nåœ¨é¢‘ç¹å¢åˆ é”®å€¼å¯¹çš„åœºæ™¯ä¸‹è¡¨ç°æ›´å¥½ã€‚\nåœ¨é¢‘ç¹æ·»åŠ å’Œåˆ é™¤é”®å€¼å¯¹çš„åœºæ™¯ä¸‹æœªä½œå‡ºä¼˜åŒ–ã€‚\n\n\n3. mapå’ŒweakMapçš„åŒºåˆ«ï¼ˆ1ï¼‰Map mapæœ¬è´¨ä¸Šå°±æ˜¯é”®å€¼å¯¹çš„é›†åˆï¼Œä½†æ˜¯æ™®é€šçš„Objectä¸­çš„é”®å€¼å¯¹ä¸­çš„é”®åªèƒ½æ˜¯å­—ç¬¦ä¸²ã€‚è€ŒES6æä¾›çš„Mapæ•°æ®ç»“æ„ç±»ä¼¼äºå¯¹è±¡ï¼Œä½†æ˜¯å®ƒçš„é”®ä¸é™åˆ¶èŒƒå›´ï¼Œå¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼Œæ˜¯ä¸€ç§æ›´åŠ å®Œå–„çš„Hashç»“æ„ã€‚å¦‚æœMapçš„é”®æ˜¯ä¸€ä¸ªåŸå§‹æ•°æ®ç±»å‹ï¼Œåªè¦ä¸¤ä¸ªé”®ä¸¥æ ¼ç›¸åŒï¼Œå°±è§†ä¸ºæ˜¯åŒä¸€ä¸ªé”®ã€‚\nå®é™…ä¸ŠMapæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå®ƒçš„æ¯ä¸€ä¸ªæ•°æ®ä¹Ÿéƒ½æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå…¶å½¢å¼å¦‚ä¸‹ï¼š\nconst map &#x3D; [\n     [&quot;name&quot;,&quot;å¼ ä¸‰&quot;],\n     [&quot;age&quot;,18],\n]\nå¤åˆ¶ä»£ç \n\nMapæ•°æ®ç»“æ„æœ‰ä»¥ä¸‹æ“ä½œæ–¹æ³•ï¼š\n\nsizeï¼š map.size è¿”å›Mapç»“æ„çš„æˆå‘˜æ€»æ•°ã€‚\nset(key,value) ï¼šè®¾ç½®é”®åkeyå¯¹åº”çš„é”®å€¼valueï¼Œç„¶åè¿”å›æ•´ä¸ªMapç»“æ„ï¼Œå¦‚æœkeyå·²ç»æœ‰å€¼ï¼Œåˆ™é”®å€¼ä¼šè¢«æ›´æ–°ï¼Œå¦åˆ™å°±æ–°ç”Ÿæˆè¯¥é”®ã€‚ï¼ˆå› ä¸ºè¿”å›çš„æ˜¯å½“å‰Mapå¯¹è±¡ï¼Œæ‰€ä»¥å¯ä»¥é“¾å¼è°ƒç”¨ï¼‰\nget(key) ï¼šè¯¥æ–¹æ³•è¯»å–keyå¯¹åº”çš„é”®å€¼ï¼Œå¦‚æœæ‰¾ä¸åˆ°keyï¼Œè¿”å›undefinedã€‚\nhas(key) ï¼šè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæŸä¸ªé”®æ˜¯å¦åœ¨å½“å‰Mapå¯¹è±¡ä¸­ã€‚\ndelete(key) ï¼šè¯¥æ–¹æ³•åˆ é™¤æŸä¸ªé”®ï¼Œè¿”å›trueï¼Œå¦‚æœåˆ é™¤å¤±è´¥ï¼Œè¿”å›falseã€‚\nclear() ï¼šmap.clear()æ¸…é™¤æ‰€æœ‰æˆå‘˜ï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚\n\nMapç»“æ„åŸç”Ÿæä¾›æ˜¯ä¸‰ä¸ªéå†å™¨ç”Ÿæˆå‡½æ•°å’Œä¸€ä¸ªéå†æ–¹æ³•\n\nkeys()ï¼šè¿”å›é”®åçš„éå†å™¨ã€‚\nvalues()ï¼šè¿”å›é”®å€¼çš„éå†å™¨ã€‚\nentries()ï¼šè¿”å›æ‰€æœ‰æˆå‘˜çš„éå†å™¨ã€‚\nforEach()ï¼šéå†Mapçš„æ‰€æœ‰æˆå‘˜ã€‚\n\nconst map &#x3D; new Map([\n     [&quot;foo&quot;,1],\n     [&quot;bar&quot;,2],\n])\nfor(let key of map.keys())&#123;\n    console.log(key);  &#x2F;&#x2F; foo bar\n&#125;\nfor(let value of map.values())&#123;\n     console.log(value); &#x2F;&#x2F; 1 2\n&#125;\nfor(let items of map.entries())&#123;\n    console.log(items);  &#x2F;&#x2F; [&quot;foo&quot;,1]  [&quot;bar&quot;,2]\n&#125;\nmap.forEach( (value,key,map) &#x3D;&gt; &#123;\n     console.log(key,value); &#x2F;&#x2F; foo 1    bar 2\n&#125;)\nå¤åˆ¶ä»£ç \n\nï¼ˆ2ï¼‰WeakMap WeakMap å¯¹è±¡ä¹Ÿæ˜¯ä¸€ç»„é”®å€¼å¯¹çš„é›†åˆï¼Œå…¶ä¸­çš„é”®æ˜¯å¼±å¼•ç”¨çš„ã€‚å…¶é”®å¿…é¡»æ˜¯å¯¹è±¡ï¼ŒåŸå§‹æ•°æ®ç±»å‹ä¸èƒ½ä½œä¸ºkeyå€¼ï¼Œè€Œå€¼å¯ä»¥æ˜¯ä»»æ„çš„ã€‚\nè¯¥å¯¹è±¡ä¹Ÿæœ‰ä»¥ä¸‹å‡ ç§æ–¹æ³•ï¼š\n\nset(key,value) ï¼šè®¾ç½®é”®åkeyå¯¹åº”çš„é”®å€¼valueï¼Œç„¶åè¿”å›æ•´ä¸ªMapç»“æ„ï¼Œå¦‚æœkeyå·²ç»æœ‰å€¼ï¼Œåˆ™é”®å€¼ä¼šè¢«æ›´æ–°ï¼Œå¦åˆ™å°±æ–°ç”Ÿæˆè¯¥é”®ã€‚ï¼ˆå› ä¸ºè¿”å›çš„æ˜¯å½“å‰Mapå¯¹è±¡ï¼Œæ‰€ä»¥å¯ä»¥é“¾å¼è°ƒç”¨ï¼‰\nget(key) ï¼šè¯¥æ–¹æ³•è¯»å–keyå¯¹åº”çš„é”®å€¼ï¼Œå¦‚æœæ‰¾ä¸åˆ°keyï¼Œè¿”å›undefinedã€‚\nhas(key) ï¼šè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæŸä¸ªé”®æ˜¯å¦åœ¨å½“å‰Mapå¯¹è±¡ä¸­ã€‚\ndelete(key) ï¼šè¯¥æ–¹æ³•åˆ é™¤æŸä¸ªé”®ï¼Œè¿”å›trueï¼Œå¦‚æœåˆ é™¤å¤±è´¥ï¼Œè¿”å›falseã€‚\n\nå…¶clear()æ–¹æ³•å·²ç»è¢«å¼ƒç”¨ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ªç©ºçš„WeakMapå¹¶æ›¿æ¢åŸå¯¹è±¡æ¥å®ç°æ¸…é™¤ã€‚\nWeakMapçš„è®¾è®¡ç›®çš„åœ¨äºï¼Œæœ‰æ—¶æƒ³åœ¨æŸä¸ªå¯¹è±¡ä¸Šé¢å­˜æ”¾ä¸€äº›æ•°æ®ï¼Œä½†æ˜¯è¿™ä¼šå½¢æˆå¯¹äºè¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨ã€‚ä¸€æ—¦ä¸å†éœ€è¦è¿™ä¸¤ä¸ªå¯¹è±¡ï¼Œå°±å¿…é¡»æ‰‹åŠ¨åˆ é™¤è¿™ä¸ªå¼•ç”¨ï¼Œå¦åˆ™åƒåœ¾å›æ”¶æœºåˆ¶å°±ä¸ä¼šé‡Šæ”¾å¯¹è±¡å ç”¨çš„å†…å­˜ã€‚\nè€ŒWeakMapçš„é”®åæ‰€å¼•ç”¨çš„å¯¹è±¡éƒ½æ˜¯å¼±å¼•ç”¨ï¼Œå³åƒåœ¾å›æ”¶æœºåˆ¶ä¸å°†è¯¥å¼•ç”¨è€ƒè™‘åœ¨å†…ã€‚å› æ­¤ï¼Œåªè¦æ‰€å¼•ç”¨çš„å¯¹è±¡çš„å…¶ä»–å¼•ç”¨éƒ½è¢«æ¸…é™¤ï¼Œåƒåœ¾å›æ”¶æœºåˆ¶å°±ä¼šé‡Šæ”¾è¯¥å¯¹è±¡æ‰€å ç”¨çš„å†…å­˜ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€æ—¦ä¸å†éœ€è¦ï¼ŒWeakMap é‡Œé¢çš„é”®åå¯¹è±¡å’Œæ‰€å¯¹åº”çš„é”®å€¼å¯¹ä¼šè‡ªåŠ¨æ¶ˆå¤±ï¼Œä¸ç”¨æ‰‹åŠ¨åˆ é™¤å¼•ç”¨ã€‚\næ€»ç»“ï¼š\n\nMap æ•°æ®ç»“æ„ã€‚å®ƒç±»ä¼¼äºå¯¹è±¡ï¼Œä¹Ÿæ˜¯é”®å€¼å¯¹çš„é›†åˆï¼Œä½†æ˜¯â€œé”®â€çš„èŒƒå›´ä¸é™äºå­—ç¬¦ä¸²ï¼Œå„ç§ç±»å‹çš„å€¼ï¼ˆåŒ…æ‹¬å¯¹è±¡ï¼‰éƒ½å¯ä»¥å½“ä½œé”®ã€‚\nWeakMap ç»“æ„ä¸ Map ç»“æ„ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ç”¨äºç”Ÿæˆé”®å€¼å¯¹çš„é›†åˆã€‚ä½†æ˜¯ WeakMap åªæ¥å—å¯¹è±¡ä½œä¸ºé”®åï¼ˆ null é™¤å¤–ï¼‰ï¼Œä¸æ¥å—å…¶ä»–ç±»å‹çš„å€¼ä½œä¸ºé”®åã€‚è€Œä¸” WeakMap çš„é”®åæ‰€æŒ‡å‘çš„å¯¹è±¡ï¼Œä¸è®¡å…¥åƒåœ¾å›æ”¶æœºåˆ¶ã€‚\n\n4. JavaScriptæœ‰å“ªäº›å†…ç½®å¯¹è±¡å…¨å±€çš„å¯¹è±¡ï¼ˆ global objects ï¼‰æˆ–ç§°æ ‡å‡†å†…ç½®å¯¹è±¡ï¼Œä¸è¦å’Œ â€œå…¨å±€å¯¹è±¡ï¼ˆglobal objectï¼‰â€ æ··æ·†ã€‚è¿™é‡Œè¯´çš„å…¨å±€çš„å¯¹è±¡æ˜¯è¯´åœ¨ å…¨å±€ä½œç”¨åŸŸé‡Œçš„å¯¹è±¡ã€‚å…¨å±€ä½œç”¨åŸŸä¸­çš„å…¶ä»–å¯¹è±¡å¯ä»¥ç”±ç”¨æˆ·çš„è„šæœ¬åˆ›å»ºæˆ–ç”±å®¿ä¸»ç¨‹åºæä¾›ã€‚\næ ‡å‡†å†…ç½®å¯¹è±¡çš„åˆ†ç±»ï¼š\nï¼ˆ1ï¼‰å€¼å±æ€§ï¼Œè¿™äº›å…¨å±€å±æ€§è¿”å›ä¸€ä¸ªç®€å•å€¼ï¼Œè¿™äº›å€¼æ²¡æœ‰è‡ªå·±çš„å±æ€§å’Œæ–¹æ³•ã€‚ä¾‹å¦‚ Infinityã€NaNã€undefinedã€null å­—é¢é‡\nï¼ˆ2ï¼‰å‡½æ•°å±æ€§ï¼Œå…¨å±€å‡½æ•°å¯ä»¥ç›´æ¥è°ƒç”¨ï¼Œä¸éœ€è¦åœ¨è°ƒç”¨æ—¶æŒ‡å®šæ‰€å±å¯¹è±¡ï¼Œæ‰§è¡Œç»“æŸåä¼šå°†ç»“æœç›´æ¥è¿”å›ç»™è°ƒç”¨è€…ã€‚ä¾‹å¦‚ eval()ã€parseFloat()ã€parseInt() ç­‰\nï¼ˆ3ï¼‰åŸºæœ¬å¯¹è±¡ï¼ŒåŸºæœ¬å¯¹è±¡æ˜¯å®šä¹‰æˆ–ä½¿ç”¨å…¶ä»–å¯¹è±¡çš„åŸºç¡€ã€‚åŸºæœ¬å¯¹è±¡åŒ…æ‹¬ä¸€èˆ¬å¯¹è±¡ã€å‡½æ•°å¯¹è±¡å’Œé”™è¯¯å¯¹è±¡ã€‚ä¾‹å¦‚ Objectã€Functionã€Booleanã€Symbolã€Error ç­‰\nï¼ˆ4ï¼‰æ•°å­—å’Œæ—¥æœŸå¯¹è±¡ï¼Œç”¨æ¥è¡¨ç¤ºæ•°å­—ã€æ—¥æœŸå’Œæ‰§è¡Œæ•°å­¦è®¡ç®—çš„å¯¹è±¡ã€‚ä¾‹å¦‚ Numberã€Mathã€Date\nï¼ˆ5ï¼‰å­—ç¬¦ä¸²ï¼Œç”¨æ¥è¡¨ç¤ºå’Œæ“ä½œå­—ç¬¦ä¸²çš„å¯¹è±¡ã€‚ä¾‹å¦‚ Stringã€RegExp\nï¼ˆ6ï¼‰å¯ç´¢å¼•çš„é›†åˆå¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡è¡¨ç¤ºæŒ‰ç…§ç´¢å¼•å€¼æ¥æ’åºçš„æ•°æ®é›†åˆï¼ŒåŒ…æ‹¬æ•°ç»„å’Œç±»å‹æ•°ç»„ï¼Œä»¥åŠç±»æ•°ç»„ç»“æ„çš„å¯¹è±¡ã€‚ä¾‹å¦‚ Array\nï¼ˆ7ï¼‰ä½¿ç”¨é”®çš„é›†åˆå¯¹è±¡ï¼Œè¿™äº›é›†åˆå¯¹è±¡åœ¨å­˜å‚¨æ•°æ®æ—¶ä¼šä½¿ç”¨åˆ°é”®ï¼Œæ”¯æŒæŒ‰ç…§æ’å…¥é¡ºåºæ¥è¿­ä»£å…ƒç´ ã€‚ ä¾‹å¦‚ Mapã€Setã€WeakMapã€WeakSet\nï¼ˆ8ï¼‰çŸ¢é‡é›†åˆï¼ŒSIMD çŸ¢é‡é›†åˆä¸­çš„æ•°æ®ä¼šè¢«ç»„ç»‡ä¸ºä¸€ä¸ªæ•°æ®åºåˆ—ã€‚ ä¾‹å¦‚ SIMD ç­‰\nï¼ˆ9ï¼‰ç»“æ„åŒ–æ•°æ®ï¼Œè¿™äº›å¯¹è±¡ç”¨æ¥è¡¨ç¤ºå’Œæ“ä½œç»“æ„åŒ–çš„ç¼“å†²åŒºæ•°æ®ï¼Œæˆ–ä½¿ç”¨ JSON ç¼–ç çš„æ•°æ®ã€‚ä¾‹å¦‚ JSON ç­‰\nï¼ˆ10ï¼‰æ§åˆ¶æŠ½è±¡å¯¹è±¡ ä¾‹å¦‚ Promiseã€Generator ç­‰\nï¼ˆ11ï¼‰åå°„ã€‚ä¾‹å¦‚ Reflectã€Proxy\nï¼ˆ12ï¼‰å›½é™…åŒ–ï¼Œä¸ºäº†æ”¯æŒå¤šè¯­è¨€å¤„ç†è€ŒåŠ å…¥ ECMAScript çš„å¯¹è±¡ã€‚ä¾‹å¦‚ Intlã€Intl.Collator ç­‰\nï¼ˆ13ï¼‰WebAssembly\nï¼ˆ14ï¼‰å…¶ä»–ã€‚ä¾‹å¦‚ arguments\næ€»ç»“ï¼š js ä¸­çš„å†…ç½®å¯¹è±¡ä¸»è¦æŒ‡çš„æ˜¯åœ¨ç¨‹åºæ‰§è¡Œå‰å­˜åœ¨å…¨å±€ä½œç”¨åŸŸé‡Œçš„ç”± js å®šä¹‰çš„ä¸€äº›å…¨å±€å€¼å±æ€§ã€å‡½æ•°å’Œç”¨æ¥å®ä¾‹åŒ–å…¶ä»–å¯¹è±¡çš„æ„é€ å‡½æ•°å¯¹è±¡ã€‚ä¸€èˆ¬ç»å¸¸ç”¨åˆ°çš„å¦‚å…¨å±€å˜é‡å€¼ NaNã€undefinedï¼Œå…¨å±€å‡½æ•°å¦‚ parseInt()ã€parseFloat() ç”¨æ¥å®ä¾‹åŒ–å¯¹è±¡çš„æ„é€ å‡½æ•°å¦‚ Dateã€Object ç­‰ï¼Œè¿˜æœ‰æä¾›æ•°å­¦è®¡ç®—çš„å•ä½“å†…ç½®å¯¹è±¡å¦‚ Math å¯¹è±¡ã€‚\n5. å¸¸ç”¨çš„æ­£åˆ™è¡¨è¾¾å¼æœ‰å“ªäº›ï¼Ÿ&#x2F;&#x2F; ï¼ˆ1ï¼‰åŒ¹é… 16 è¿›åˆ¶é¢œè‰²å€¼\nvar regex &#x3D; &#x2F;#([0-9a-fA-F]&#123;6&#125;|[0-9a-fA-F]&#123;3&#125;)&#x2F;g;\n\n&#x2F;&#x2F; ï¼ˆ2ï¼‰åŒ¹é…æ—¥æœŸï¼Œå¦‚ yyyy-mm-dd æ ¼å¼\nvar regex &#x3D; &#x2F;^[0-9]&#123;4&#125;-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$&#x2F;;\n\n&#x2F;&#x2F; ï¼ˆ3ï¼‰åŒ¹é… qq å·\nvar regex &#x3D; &#x2F;^[1-9][0-9]&#123;4,10&#125;$&#x2F;g;\n\n&#x2F;&#x2F; ï¼ˆ4ï¼‰æ‰‹æœºå·ç æ­£åˆ™\nvar regex &#x3D; &#x2F;^1[34578]\\d&#123;9&#125;$&#x2F;g;\n\n&#x2F;&#x2F; ï¼ˆ5ï¼‰ç”¨æˆ·åæ­£åˆ™\nvar regex &#x3D; &#x2F;^[a-zA-Z$][a-zA-Z0-9_$]&#123;4,16&#125;$&#x2F;;\nå¤åˆ¶ä»£ç \n\n6. å¯¹JSONçš„ç†è§£JSON æ˜¯ä¸€ç§åŸºäºæ–‡æœ¬çš„è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ã€‚å®ƒå¯ä»¥è¢«ä»»ä½•çš„ç¼–ç¨‹è¯­è¨€è¯»å–å’Œä½œä¸ºæ•°æ®æ ¼å¼æ¥ä¼ é€’ã€‚\nåœ¨é¡¹ç›®å¼€å‘ä¸­ï¼Œä½¿ç”¨ JSON ä½œä¸ºå‰åç«¯æ•°æ®äº¤æ¢çš„æ–¹å¼ã€‚åœ¨å‰ç«¯é€šè¿‡å°†ä¸€ä¸ªç¬¦åˆ JSON æ ¼å¼çš„æ•°æ®ç»“æ„åºåˆ—åŒ–ä¸º JSON å­—ç¬¦ä¸²ï¼Œç„¶åå°†å®ƒä¼ é€’åˆ°åç«¯ï¼Œåç«¯é€šè¿‡ JSON æ ¼å¼çš„å­—ç¬¦ä¸²è§£æåç”Ÿæˆå¯¹åº”çš„æ•°æ®ç»“æ„ï¼Œä»¥æ­¤æ¥å®ç°å‰åç«¯æ•°æ®çš„ä¸€ä¸ªä¼ é€’ã€‚\nå› ä¸º JSON çš„è¯­æ³•æ˜¯åŸºäº js çš„ï¼Œå› æ­¤å¾ˆå®¹æ˜“å°† JSON å’Œ js ä¸­çš„å¯¹è±¡å¼„æ··ï¼Œä½†æ˜¯åº”è¯¥æ³¨æ„çš„æ˜¯ JSON å’Œ js ä¸­çš„å¯¹è±¡ä¸æ˜¯ä¸€å›äº‹ï¼ŒJSON ä¸­å¯¹è±¡æ ¼å¼æ›´åŠ ä¸¥æ ¼ï¼Œæ¯”å¦‚è¯´åœ¨ JSON ä¸­å±æ€§å€¼ä¸èƒ½ä¸ºå‡½æ•°ï¼Œä¸èƒ½å‡ºç° NaN è¿™æ ·çš„å±æ€§å€¼ç­‰ï¼Œå› æ­¤å¤§å¤šæ•°çš„ js å¯¹è±¡æ˜¯ä¸ç¬¦åˆ JSON å¯¹è±¡çš„æ ¼å¼çš„ã€‚\nåœ¨ js ä¸­æä¾›äº†ä¸¤ä¸ªå‡½æ•°æ¥å®ç° js æ•°æ®ç»“æ„å’Œ JSON æ ¼å¼çš„è½¬æ¢å¤„ç†ï¼Œ\n\nJSON.stringify å‡½æ•°ï¼Œé€šè¿‡ä¼ å…¥ä¸€ä¸ªç¬¦åˆ JSON æ ¼å¼çš„æ•°æ®ç»“æ„ï¼Œå°†å…¶è½¬æ¢ä¸ºä¸€ä¸ª JSON å­—ç¬¦ä¸²ã€‚å¦‚æœä¼ å…¥çš„æ•°æ®ç»“æ„ä¸ç¬¦åˆ JSON æ ¼å¼ï¼Œé‚£ä¹ˆåœ¨åºåˆ—åŒ–çš„æ—¶å€™ä¼šå¯¹è¿™äº›å€¼è¿›è¡Œå¯¹åº”çš„ç‰¹æ®Šå¤„ç†ï¼Œä½¿å…¶ç¬¦åˆè§„èŒƒã€‚åœ¨å‰ç«¯å‘åç«¯å‘é€æ•°æ®æ—¶ï¼Œå¯ä»¥è°ƒç”¨è¿™ä¸ªå‡½æ•°å°†æ•°æ®å¯¹è±¡è½¬åŒ–ä¸º JSON æ ¼å¼çš„å­—ç¬¦ä¸²ã€‚\nJSON.parse() å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ç”¨æ¥å°† JSON æ ¼å¼çš„å­—ç¬¦ä¸²è½¬æ¢ä¸ºä¸€ä¸ª js æ•°æ®ç»“æ„ï¼Œå¦‚æœä¼ å…¥çš„å­—ç¬¦ä¸²ä¸æ˜¯æ ‡å‡†çš„ JSON æ ¼å¼çš„å­—ç¬¦ä¸²çš„è¯ï¼Œå°†ä¼šæŠ›å‡ºé”™è¯¯ã€‚å½“ä»åç«¯æ¥æ”¶åˆ° JSON æ ¼å¼çš„å­—ç¬¦ä¸²æ—¶ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªæ–¹æ³•æ¥å°†å…¶è§£æä¸ºä¸€ä¸ª js æ•°æ®ç»“æ„ï¼Œä»¥æ­¤æ¥è¿›è¡Œæ•°æ®çš„è®¿é—®ã€‚\n\n7. JavaScriptè„šæœ¬å»¶è¿ŸåŠ è½½çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿå»¶è¿ŸåŠ è½½å°±æ˜¯ç­‰é¡µé¢åŠ è½½å®Œæˆä¹‹åå†åŠ è½½ JavaScript æ–‡ä»¶ã€‚ js å»¶è¿ŸåŠ è½½æœ‰åŠ©äºæé«˜é¡µé¢åŠ è½½é€Ÿåº¦ã€‚\nä¸€èˆ¬æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼š\n\ndefer å±æ€§ï¼š ç»™ js è„šæœ¬æ·»åŠ  defer å±æ€§ï¼Œè¿™ä¸ªå±æ€§ä¼šè®©è„šæœ¬çš„åŠ è½½ä¸æ–‡æ¡£çš„è§£æåŒæ­¥è§£æï¼Œç„¶ååœ¨æ–‡æ¡£è§£æå®Œæˆåå†æ‰§è¡Œè¿™ä¸ªè„šæœ¬æ–‡ä»¶ï¼Œè¿™æ ·çš„è¯å°±èƒ½ä½¿é¡µé¢çš„æ¸²æŸ“ä¸è¢«é˜»å¡ã€‚å¤šä¸ªè®¾ç½®äº† defer å±æ€§çš„è„šæœ¬æŒ‰è§„èŒƒæ¥è¯´æœ€åæ˜¯é¡ºåºæ‰§è¡Œçš„ï¼Œä½†æ˜¯åœ¨ä¸€äº›æµè§ˆå™¨ä¸­å¯èƒ½ä¸æ˜¯è¿™æ ·ã€‚\nasync å±æ€§ï¼š ç»™ js è„šæœ¬æ·»åŠ  async å±æ€§ï¼Œè¿™ä¸ªå±æ€§ä¼šä½¿è„šæœ¬å¼‚æ­¥åŠ è½½ï¼Œä¸ä¼šé˜»å¡é¡µé¢çš„è§£æè¿‡ç¨‹ï¼Œä½†æ˜¯å½“è„šæœ¬åŠ è½½å®Œæˆåç«‹å³æ‰§è¡Œ js è„šæœ¬ï¼Œè¿™ä¸ªæ—¶å€™å¦‚æœæ–‡æ¡£æ²¡æœ‰è§£æå®Œæˆçš„è¯åŒæ ·ä¼šé˜»å¡ã€‚å¤šä¸ª async å±æ€§çš„è„šæœ¬çš„æ‰§è¡Œé¡ºåºæ˜¯ä¸å¯é¢„æµ‹çš„ï¼Œä¸€èˆ¬ä¸ä¼šæŒ‰ç…§ä»£ç çš„é¡ºåºä¾æ¬¡æ‰§è¡Œã€‚\nåŠ¨æ€åˆ›å»º DOM æ–¹å¼ï¼š åŠ¨æ€åˆ›å»º DOM æ ‡ç­¾çš„æ–¹å¼ï¼Œå¯ä»¥å¯¹æ–‡æ¡£çš„åŠ è½½äº‹ä»¶è¿›è¡Œç›‘å¬ï¼Œå½“æ–‡æ¡£åŠ è½½å®Œæˆåå†åŠ¨æ€çš„åˆ›å»º script æ ‡ç­¾æ¥å¼•å…¥ js è„šæœ¬ã€‚\nä½¿ç”¨ setTimeout å»¶è¿Ÿæ–¹æ³•ï¼š è®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨æ¥å»¶è¿ŸåŠ è½½jsè„šæœ¬æ–‡ä»¶\nè®© JS æœ€ååŠ è½½ï¼š å°† js è„šæœ¬æ”¾åœ¨æ–‡æ¡£çš„åº•éƒ¨ï¼Œæ¥ä½¿ js è„šæœ¬å°½å¯èƒ½çš„åœ¨æœ€åæ¥åŠ è½½æ‰§è¡Œã€‚\n\n8. JavaScript ç±»æ•°ç»„å¯¹è±¡çš„å®šä¹‰ï¼Ÿä¸€ä¸ªæ‹¥æœ‰ length å±æ€§å’Œè‹¥å¹²ç´¢å¼•å±æ€§çš„å¯¹è±¡å°±å¯ä»¥è¢«ç§°ä¸ºç±»æ•°ç»„å¯¹è±¡ï¼Œç±»æ•°ç»„å¯¹è±¡å’Œæ•°ç»„ç±»ä¼¼ï¼Œä½†æ˜¯ä¸èƒ½è°ƒç”¨æ•°ç»„çš„æ–¹æ³•ã€‚å¸¸è§çš„ç±»æ•°ç»„å¯¹è±¡æœ‰ arguments å’Œ DOM æ–¹æ³•çš„è¿”å›ç»“æœï¼Œè¿˜æœ‰ä¸€ä¸ªå‡½æ•°ä¹Ÿå¯ä»¥è¢«çœ‹ä½œæ˜¯ç±»æ•°ç»„å¯¹è±¡ï¼Œå› ä¸ºå®ƒå«æœ‰ length å±æ€§å€¼ï¼Œä»£è¡¨å¯æ¥æ”¶çš„å‚æ•°ä¸ªæ•°ã€‚\nå¸¸è§çš„ç±»æ•°ç»„è½¬æ¢ä¸ºæ•°ç»„çš„æ–¹æ³•æœ‰è¿™æ ·å‡ ç§ï¼š\nï¼ˆ1ï¼‰é€šè¿‡ call è°ƒç”¨æ•°ç»„çš„ slice æ–¹æ³•æ¥å®ç°è½¬æ¢\nArray.prototype.slice.call(arrayLike);\nå¤åˆ¶ä»£ç \n\nï¼ˆ2ï¼‰é€šè¿‡ call è°ƒç”¨æ•°ç»„çš„ splice æ–¹æ³•æ¥å®ç°è½¬æ¢\nArray.prototype.splice.call(arrayLike, 0);\nå¤åˆ¶ä»£ç \n\nï¼ˆ3ï¼‰é€šè¿‡ apply è°ƒç”¨æ•°ç»„çš„ concat æ–¹æ³•æ¥å®ç°è½¬æ¢\nArray.prototype.concat.apply([], arrayLike);\nå¤åˆ¶ä»£ç \n\nï¼ˆ4ï¼‰é€šè¿‡ Array.from æ–¹æ³•æ¥å®ç°è½¬æ¢\nArray.from(arrayLike);\nå¤åˆ¶ä»£ç \n\n9. æ•°ç»„æœ‰å“ªäº›åŸç”Ÿæ–¹æ³•ï¼Ÿ\næ•°ç»„å’Œå­—ç¬¦ä¸²çš„è½¬æ¢æ–¹æ³•ï¼štoString()ã€toLocalString()ã€join() å…¶ä¸­ join() æ–¹æ³•å¯ä»¥æŒ‡å®šè½¬æ¢ä¸ºå­—ç¬¦ä¸²æ—¶çš„åˆ†éš”ç¬¦ã€‚\næ•°ç»„å°¾éƒ¨æ“ä½œçš„æ–¹æ³• pop() å’Œ push()ï¼Œpush æ–¹æ³•å¯ä»¥ä¼ å…¥å¤šä¸ªå‚æ•°ã€‚\næ•°ç»„é¦–éƒ¨æ“ä½œçš„æ–¹æ³• shift() å’Œ unshift() é‡æ’åºçš„æ–¹æ³• reverse() å’Œ sort()ï¼Œsort() æ–¹æ³•å¯ä»¥ä¼ å…¥ä¸€ä¸ªå‡½æ•°æ¥è¿›è¡Œæ¯”è¾ƒï¼Œä¼ å…¥å‰åä¸¤ä¸ªå€¼ï¼Œå¦‚æœè¿”å›å€¼ä¸ºæ­£æ•°ï¼Œåˆ™äº¤æ¢ä¸¤ä¸ªå‚æ•°çš„ä½ç½®ã€‚\næ•°ç»„è¿æ¥çš„æ–¹æ³• concat() ï¼Œè¿”å›çš„æ˜¯æ‹¼æ¥å¥½çš„æ•°ç»„ï¼Œä¸å½±å“åŸæ•°ç»„ã€‚\næ•°ç»„æˆªå–åŠæ³• slice()ï¼Œç”¨äºæˆªå–æ•°ç»„ä¸­çš„ä¸€éƒ¨åˆ†è¿”å›ï¼Œä¸å½±å“åŸæ•°ç»„ã€‚\næ•°ç»„æ’å…¥æ–¹æ³• splice()ï¼Œå½±å“åŸæ•°ç»„æŸ¥æ‰¾ç‰¹å®šé¡¹çš„ç´¢å¼•çš„æ–¹æ³•ï¼ŒindexOf() å’Œ lastIndexOf() è¿­ä»£æ–¹æ³• every()ã€some()ã€filter()ã€map() å’Œ forEach() æ–¹æ³•\næ•°ç»„å½’å¹¶æ–¹æ³• reduce() å’Œ reduceRight() æ–¹æ³•\n\n10. Unicodeã€UTF-8ã€UTF-16ã€UTF-32çš„åŒºåˆ«ï¼Ÿï¼ˆ1ï¼‰Unicodeåœ¨è¯´Unicodeä¹‹å‰éœ€è¦å…ˆäº†è§£ä¸€ä¸‹ASCIIç ï¼šASCII ç ï¼ˆAmerican Standard Code for Information Interchangeï¼‰ç§°ä¸ºç¾å›½æ ‡å‡†ä¿¡æ¯äº¤æ¢ç ã€‚\n\nå®ƒæ˜¯åŸºäºæ‹‰ä¸å­—æ¯çš„ä¸€å¥—ç”µè„‘ç¼–ç ç³»ç»Ÿã€‚\nå®ƒå®šä¹‰äº†ä¸€ä¸ªç”¨äºä»£è¡¨å¸¸è§å­—ç¬¦çš„å­—å…¸ã€‚\nå®ƒåŒ…å«äº†â€A-Zâ€(åŒ…å«å¤§å°å†™)ï¼Œæ•°æ®â€0-9â€ ä»¥åŠä¸€äº›å¸¸è§çš„ç¬¦å·ã€‚\nå®ƒæ˜¯ä¸“é—¨ä¸ºè‹±è¯­è€Œè®¾è®¡çš„ï¼Œæœ‰128ä¸ªç¼–ç ï¼Œå¯¹å…¶ä»–è¯­è¨€æ— èƒ½ä¸ºåŠ›\n\nASCIIç å¯ä»¥è¡¨ç¤ºçš„ç¼–ç æœ‰é™ï¼Œè¦æƒ³è¡¨ç¤ºå…¶ä»–è¯­è¨€çš„ç¼–ç ï¼Œè¿˜æ˜¯è¦ä½¿ç”¨Unicodeæ¥è¡¨ç¤ºï¼Œå¯ä»¥è¯´Unicodeæ˜¯ASCII çš„è¶…é›†ã€‚\nUnicodeå…¨ç§° Unicode Translation Formatï¼Œåˆå«åšç»Ÿä¸€ç ã€ä¸‡å›½ç ã€å•ä¸€ç ã€‚Unicode æ˜¯ä¸ºäº†è§£å†³ä¼ ç»Ÿçš„å­—ç¬¦ç¼–ç æ–¹æ¡ˆçš„å±€é™è€Œäº§ç”Ÿçš„ï¼Œå®ƒä¸ºæ¯ç§è¯­è¨€ä¸­çš„æ¯ä¸ªå­—ç¬¦è®¾å®šäº†ç»Ÿä¸€å¹¶ä¸”å”¯ä¸€çš„äºŒè¿›åˆ¶ç¼–ç ï¼Œä»¥æ»¡è¶³è·¨è¯­è¨€ã€è·¨å¹³å°è¿›è¡Œæ–‡æœ¬è½¬æ¢ã€å¤„ç†çš„è¦æ±‚ã€‚\nUnicodeçš„å®ç°æ–¹å¼ï¼ˆä¹Ÿå°±æ˜¯ç¼–ç æ–¹å¼ï¼‰æœ‰å¾ˆå¤šç§ï¼Œå¸¸è§çš„æ˜¯UTF-8ã€UTF-16ã€UTF-32å’ŒUSC-2ã€‚\nï¼ˆ2ï¼‰UTF-8UTF-8æ˜¯ä½¿ç”¨æœ€å¹¿æ³›çš„Unicodeç¼–ç æ–¹å¼ï¼Œå®ƒæ˜¯ä¸€ç§å¯å˜é•¿çš„ç¼–ç æ–¹å¼ï¼Œå¯ä»¥æ˜¯1â€”4ä¸ªå­—èŠ‚ä¸ç­‰ï¼Œå®ƒå¯ä»¥å®Œå…¨å…¼å®¹ASCIIç çš„128ä¸ªå­—ç¬¦ã€‚\næ³¨æ„ï¼š UTF-8 æ˜¯ä¸€ç§ç¼–ç æ–¹å¼ï¼ŒUnicodeæ˜¯ä¸€ä¸ªå­—ç¬¦é›†åˆã€‚\nUTF-8çš„ç¼–ç è§„åˆ™ï¼š\n\nå¯¹äºå•å­—èŠ‚çš„ç¬¦å·ï¼Œå­—èŠ‚çš„ç¬¬ä¸€ä½ä¸º0ï¼Œåé¢çš„7ä½ä¸ºè¿™ä¸ªå­—ç¬¦çš„Unicodeç¼–ç ï¼Œå› æ­¤å¯¹äºè‹±æ–‡å­—æ¯ï¼Œå®ƒçš„Unicodeç¼–ç å’ŒACSIIç¼–ç ä¸€æ ·ã€‚\nå¯¹äºnå­—èŠ‚çš„ç¬¦å·ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚çš„å‰nä½éƒ½æ˜¯1ï¼Œç¬¬n+1ä½è®¾ä¸º0ï¼Œåé¢å­—èŠ‚çš„å‰ä¸¤ä½ä¸€å¾‹è®¾ä¸º10ï¼Œå‰©ä¸‹çš„æ²¡æœ‰æåŠçš„äºŒè¿›åˆ¶ä½ï¼Œå…¨éƒ¨ä¸ºè¿™ä¸ªç¬¦å·çš„Unicodeç  ã€‚\n\næ¥çœ‹ä¸€ä¸‹å…·ä½“çš„Unicodeç¼–å·èŒƒå›´ä¸å¯¹åº”çš„UTF-8äºŒè¿›åˆ¶æ ¼å¼ ï¼š\n\n\n\nç¼–ç èŒƒå›´ï¼ˆç¼–å·å¯¹åº”çš„åè¿›åˆ¶æ•°ï¼‰\näºŒè¿›åˆ¶æ ¼å¼\n\n\n\n0x00â€”0x7F ï¼ˆ0-127ï¼‰\n0xxxxxxx\n\n\n0x80â€”0x7FF ï¼ˆ128-2047ï¼‰\n110xxxxx 10xxxxxx\n\n\n0x800â€”0xFFFF Â ï¼ˆ2048-65535ï¼‰\n1110xxxx 10xxxxxx 10xxxxxx\n\n\n0x10000â€”0x10FFFF Â ï¼ˆ65536ä»¥ä¸Šï¼‰\n11110xxx 10xxxxxx 10xxxxxx 10xxxxxx\n\n\né‚£è¯¥å¦‚ä½•é€šè¿‡å…·ä½“çš„Unicodeç¼–ç ï¼Œè¿›è¡Œå…·ä½“çš„UTF-8ç¼–ç å‘¢ï¼Ÿæ­¥éª¤å¦‚ä¸‹ï¼š\n\næ‰¾åˆ°è¯¥Unicodeç¼–ç çš„æ‰€åœ¨çš„ç¼–å·èŒƒå›´ï¼Œè¿›è€Œæ‰¾åˆ°ä¸ä¹‹å¯¹åº”çš„äºŒè¿›åˆ¶æ ¼å¼\nå°†Unicodeç¼–ç è½¬æ¢ä¸ºäºŒè¿›åˆ¶æ•°ï¼ˆå»æ‰æœ€é«˜ä½çš„0ï¼‰\nå°†äºŒè¿›åˆ¶æ•°ä»å³å¾€å·¦ä¸€æ¬¡å¡«å…¥äºŒè¿›åˆ¶æ ¼å¼çš„Xä¸­ï¼Œå¦‚æœæœ‰Xæœªå¡«ï¼Œå°±è®¾ä¸º0\n\næ¥çœ‹ä¸€ä¸ªå®é™…çš„ä¾‹å­ï¼š â€œé©¬â€ å­—çš„Unicodeç¼–ç æ˜¯ï¼š0x9A6Cï¼Œæ•´æ•°ç¼–å·æ˜¯39532 ï¼ˆ1ï¼‰é¦–é€‰ç¡®å®šäº†è¯¥å­—ç¬¦åœ¨ç¬¬ä¸‰ä¸ªèŒƒå›´å†…ï¼Œå®ƒçš„æ ¼å¼æ˜¯ 1110xxxx 10xxxxxx 10xxxxxx ï¼ˆ2ï¼‰39532å¯¹åº”çš„äºŒè¿›åˆ¶æ•°ä¸º1001 1010 0110 1100 ï¼ˆ3ï¼‰å°†äºŒè¿›åˆ¶æ•°å¡«å…¥Xä¸­ï¼Œç»“æœæ˜¯ï¼š11101001 10101001 10101100\nï¼ˆ3ï¼‰UTF-161. å¹³é¢çš„æ¦‚å¿µ\nåœ¨äº†è§£UTF-16ä¹‹å‰ï¼Œå…ˆçœ‹ä¸€ä¸‹å¹³é¢çš„æ¦‚å¿µï¼š Unicodeç¼–ç ä¸­æœ‰å¾ˆå¤šå¾ˆå¤šçš„å­—ç¬¦ï¼Œå®ƒå¹¶ä¸æ˜¯ä¸€æ¬¡æ€§å®šä¹‰çš„ï¼Œè€Œæ˜¯åˆ†åŒºè¿›è¡Œå®šä¹‰çš„ï¼Œæ¯ä¸ªåŒºå­˜æ”¾65536ï¼ˆ216ï¼‰ä¸ªå­—ç¬¦ï¼Œè¿™ç§°ä¸ºä¸€ä¸ªå¹³é¢ï¼Œç›®å‰æ€»å…±æœ‰17 ä¸ªå¹³é¢ã€‚\næœ€å‰é¢çš„ä¸€ä¸ªå¹³é¢ç§°ä¸ºåŸºæœ¬å¹³é¢ï¼Œå®ƒçš„ç ç‚¹ä»0 â€” 216-1ï¼Œå†™æˆ16è¿›åˆ¶å°±æ˜¯U+0000 â€” U+FFFFï¼Œé‚£å‰©ä¸‹çš„16ä¸ªå¹³é¢å°±æ˜¯è¾…åŠ©å¹³é¢ï¼Œç ç‚¹èŒƒå›´æ˜¯ U+10000â€”U+10FFFFã€‚\n2. UTF-16 æ¦‚å¿µï¼š\nUTF-16ä¹Ÿæ˜¯Unicodeç¼–ç é›†çš„ä¸€ç§ç¼–ç å½¢å¼ï¼ŒæŠŠUnicodeå­—ç¬¦é›†çš„æŠ½è±¡ç ä½æ˜ å°„ä¸º16ä½é•¿çš„æ•´æ•°ï¼ˆå³ç å…ƒï¼‰çš„åºåˆ—ï¼Œç”¨äºæ•°æ®å­˜å‚¨æˆ–ä¼ é€’ã€‚Unicodeå­—ç¬¦çš„ç ä½éœ€è¦1ä¸ªæˆ–è€…2ä¸ª16ä½é•¿çš„ç å…ƒæ¥è¡¨ç¤ºï¼Œå› æ­¤UTF-16ä¹Ÿæ˜¯ç”¨å˜é•¿å­—èŠ‚è¡¨ç¤ºçš„ã€‚\n3. UTF-16 ç¼–ç è§„åˆ™ï¼š\n\nç¼–å·åœ¨ U+0000â€”U+FFFF çš„å­—ç¬¦ï¼ˆå¸¸ç”¨å­—ç¬¦é›†ï¼‰ï¼Œç›´æ¥ç”¨ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºã€‚\nç¼–å·åœ¨ U+10000â€”U+10FFFF ä¹‹é—´çš„å­—ç¬¦ï¼Œéœ€è¦ç”¨å››ä¸ªå­—èŠ‚è¡¨ç¤ºã€‚\n\n4. ç¼–ç è¯†åˆ«\né‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå½“é‡åˆ°ä¸¤ä¸ªå­—èŠ‚æ—¶ï¼Œæ€ä¹ˆçŸ¥é“æ˜¯æŠŠå®ƒå½“åšä¸€ä¸ªå­—ç¬¦è¿˜æ˜¯å’Œåé¢çš„ä¸¤ä¸ªå­—èŠ‚ä¸€èµ·å½“åšä¸€ä¸ªå­—ç¬¦å‘¢ï¼Ÿ\nUTF-16 ç¼–ç è‚¯å®šä¹Ÿè€ƒè™‘åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œåœ¨åŸºæœ¬å¹³é¢å†…ï¼Œä» U+D800 â€” U+DFFF æ˜¯ä¸€ä¸ªç©ºæ®µï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªåŒºé—´çš„ç ç‚¹ä¸å¯¹åº”ä»»ä½•çš„å­—ç¬¦ï¼Œå› æ­¤è¿™äº›ç©ºæ®µå°±å¯ä»¥ç”¨æ¥æ˜ å°„è¾…åŠ©å¹³é¢çš„å­—ç¬¦ã€‚\nè¾…åŠ©å¹³é¢å…±æœ‰ 220 ä¸ªå­—ç¬¦ä½ï¼Œå› æ­¤è¡¨ç¤ºè¿™äº›å­—ç¬¦è‡³å°‘éœ€è¦ 20 ä¸ªäºŒè¿›åˆ¶ä½ã€‚UTF-16 å°†è¿™ 20 ä¸ªäºŒè¿›åˆ¶ä½åˆ†æˆä¸¤åŠï¼Œå‰ 10 ä½æ˜ å°„åœ¨ U+D800 â€” U+DBFFï¼Œç§°ä¸ºé«˜ä½ï¼ˆHï¼‰ï¼Œå 10 ä½æ˜ å°„åœ¨ U+DC00 â€” U+DFFFï¼Œç§°ä¸ºä½ä½ï¼ˆLï¼‰ã€‚è¿™å°±ç›¸å½“äºï¼Œå°†ä¸€ä¸ªè¾…åŠ©å¹³é¢çš„å­—ç¬¦æ‹†æˆäº†ä¸¤ä¸ªåŸºæœ¬å¹³é¢çš„å­—ç¬¦æ¥è¡¨ç¤ºã€‚\nå› æ­¤ï¼Œå½“é‡åˆ°ä¸¤ä¸ªå­—èŠ‚æ—¶ï¼Œå‘ç°å®ƒçš„ç ç‚¹åœ¨ U+D800 â€”U+DBFFä¹‹é—´ï¼Œå°±å¯ä»¥çŸ¥é“ï¼Œå®ƒåé¢çš„ä¸¤ä¸ªå­—èŠ‚çš„ç ç‚¹åº”è¯¥åœ¨ U+DC00 â€” U+DFFF ä¹‹é—´ï¼Œè¿™å››ä¸ªå­—èŠ‚å¿…é¡»æ”¾åœ¨ä¸€èµ·è¿›è¡Œè§£è¯»ã€‚\n5. ä¸¾ä¾‹è¯´æ˜\nä»¥ â€œğ¡ €â€œ å­—ä¸ºä¾‹ï¼Œå®ƒçš„ Unicode ç ç‚¹ä¸º 0x21800ï¼Œè¯¥ç ç‚¹è¶…å‡ºäº†åŸºæœ¬å¹³é¢çš„èŒƒå›´ï¼Œå› æ­¤éœ€è¦ç”¨å››ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š\n\né¦–å…ˆè®¡ç®—è¶…å‡ºéƒ¨åˆ†çš„ç»“æœï¼š0x21800 - 0x10000\nå°†ä¸Šé¢çš„è®¡ç®—ç»“æœè½¬ä¸º20ä½çš„äºŒè¿›åˆ¶æ•°ï¼Œä¸è¶³20ä½å°±åœ¨å‰é¢è¡¥0ï¼Œç»“æœä¸ºï¼š0001000110 0000000000\nå°†å¾—åˆ°çš„ä¸¤ä¸ª10ä½äºŒè¿›åˆ¶æ•°åˆ†åˆ«å¯¹åº”åˆ°ä¸¤ä¸ªåŒºé—´ä¸­\nU+D800 å¯¹åº”çš„äºŒè¿›åˆ¶æ•°ä¸º 1101100000000000ï¼Œ å°†0001000110å¡«å……åœ¨å®ƒçš„å10 ä¸ªäºŒè¿›åˆ¶ä½ï¼Œå¾—åˆ° 1101100001000110ï¼Œè½¬æˆ 16 è¿›åˆ¶æ•°ä¸º 0xD846ã€‚åŒç†ï¼Œä½ä½ä¸º 0xDC00ï¼Œæ‰€ä»¥è¿™ä¸ªå­—çš„UTF-16 ç¼–ç ä¸º 0xD846 0xDC00\n\nï¼ˆ4ï¼‰ UTF-32UTF-32 å°±æ˜¯å­—ç¬¦æ‰€å¯¹åº”ç¼–å·çš„æ•´æ•°äºŒè¿›åˆ¶å½¢å¼ï¼Œæ¯ä¸ªå­—ç¬¦å å››ä¸ªå­—èŠ‚ï¼Œè¿™ä¸ªæ˜¯ç›´æ¥è¿›è¡Œè½¬æ¢çš„ã€‚è¯¥ç¼–ç æ–¹å¼å ç”¨çš„å‚¨å­˜ç©ºé—´è¾ƒå¤šï¼Œæ‰€ä»¥ä½¿ç”¨è¾ƒå°‘ã€‚\næ¯”å¦‚â€œé©¬â€ å­—çš„Unicodeç¼–å·æ˜¯ï¼šU+9A6Cï¼Œæ•´æ•°ç¼–å·æ˜¯39532ï¼Œç›´æ¥è½¬åŒ–ä¸ºäºŒè¿›åˆ¶ï¼š1001 1010 0110 1100ï¼Œè¿™å°±æ˜¯å®ƒçš„UTF-32ç¼–ç ã€‚\nï¼ˆ5ï¼‰æ€»ç»“Unicodeã€UTF-8ã€UTF-16ã€UTF-32æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\n\nUnicode æ˜¯ç¼–ç å­—ç¬¦é›†ï¼ˆå­—ç¬¦é›†ï¼‰ï¼Œè€ŒUTF-8ã€UTF-16ã€UTF-32æ˜¯å­—ç¬¦é›†ç¼–ç ï¼ˆç¼–ç è§„åˆ™ï¼‰ï¼›\nUTF-16 ä½¿ç”¨å˜é•¿ç å…ƒåºåˆ—çš„ç¼–ç æ–¹å¼ï¼Œç›¸è¾ƒäºå®šé•¿ç å…ƒåºåˆ—çš„UTF-32ç®—æ³•æ›´å¤æ‚ï¼Œç”šè‡³æ¯”åŒæ ·æ˜¯å˜é•¿ç å…ƒåºåˆ—çš„UTF-8ä¹Ÿæ›´ä¸ºå¤æ‚ï¼Œå› ä¸ºå…¶å¼•å…¥äº†ç‹¬ç‰¹çš„ä»£ç†å¯¹è¿™æ ·çš„ä»£ç†æœºåˆ¶ï¼›\nUTF-8éœ€è¦åˆ¤æ–­æ¯ä¸ªå­—èŠ‚ä¸­çš„å¼€å¤´æ ‡å¿—ä¿¡æ¯ï¼Œæ‰€ä»¥å¦‚æœæŸä¸ªå­—èŠ‚åœ¨ä¼ é€è¿‡ç¨‹ä¸­å‡ºé”™äº†ï¼Œå°±ä¼šå¯¼è‡´åé¢çš„å­—èŠ‚ä¹Ÿä¼šè§£æå‡ºé”™ï¼›è€ŒUTF-16ä¸ä¼šåˆ¤æ–­å¼€å¤´æ ‡å¿—ï¼Œå³ä½¿é”™ä¹Ÿåªä¼šé”™ä¸€ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥å®¹é”™èƒ½åŠ›æ•™å¼ºï¼›\nå¦‚æœå­—ç¬¦å†…å®¹å…¨éƒ¨è‹±æ–‡æˆ–è‹±æ–‡ä¸å…¶ä»–æ–‡å­—æ··åˆï¼Œä½†è‹±æ–‡å ç»å¤§éƒ¨åˆ†ï¼Œé‚£ä¹ˆç”¨UTF-8å°±æ¯”UTF-16èŠ‚çœäº†å¾ˆå¤šç©ºé—´ï¼›è€Œå¦‚æœå­—ç¬¦å†…å®¹å…¨éƒ¨æ˜¯ä¸­æ–‡è¿™æ ·ç±»ä¼¼çš„å­—ç¬¦æˆ–è€…æ··åˆå­—ç¬¦ä¸­ä¸­æ–‡å ç»å¤§å¤šæ•°ï¼Œé‚£ä¹ˆUTF-16å°±å ä¼˜åŠ¿äº†ï¼Œå¯ä»¥èŠ‚çœå¾ˆå¤šç©ºé—´ï¼›\n\n11. å¸¸è§çš„ä½è¿ç®—ç¬¦æœ‰å“ªäº›ï¼Ÿå…¶è®¡ç®—è§„åˆ™æ˜¯ä»€ä¹ˆï¼Ÿç°ä»£è®¡ç®—æœºä¸­æ•°æ®éƒ½æ˜¯ä»¥äºŒè¿›åˆ¶çš„å½¢å¼å­˜å‚¨çš„ï¼Œå³0ã€1ä¸¤ç§çŠ¶æ€ï¼Œè®¡ç®—æœºå¯¹äºŒè¿›åˆ¶æ•°æ®è¿›è¡Œçš„è¿ç®—åŠ å‡ä¹˜é™¤ç­‰éƒ½æ˜¯å«ä½è¿ç®—ï¼Œå³å°†ç¬¦å·ä½å…±åŒå‚ä¸è¿ç®—çš„è¿ç®—ã€‚\nå¸¸è§çš„ä½è¿ç®—æœ‰ä»¥ä¸‹å‡ ç§ï¼š\n\n\n\nè¿ç®—ç¬¦\næè¿°\nè¿ç®—è§„åˆ™\n\n\n\n\n&amp;\nä¸\nä¸¤ä¸ªä½éƒ½ä¸º1æ—¶ï¼Œç»“æœæ‰ä¸º1\n\n\n\n&#96;\n&#96;\næˆ–\nä¸¤ä¸ªä½éƒ½ä¸º0æ—¶ï¼Œç»“æœæ‰ä¸º0\n\n\n^\nå¼‚æˆ–\nä¸¤ä¸ªä½ç›¸åŒä¸º0ï¼Œç›¸å¼‚ä¸º1\n\n\n\n~\nå–å\n0å˜1ï¼Œ1å˜0\n\n\n\n&lt;&lt;\nå·¦ç§»\nå„äºŒè¿›åˆ¶ä½å…¨éƒ¨å·¦ç§»è‹¥å¹²ä½ï¼Œé«˜ä½ä¸¢å¼ƒï¼Œä½ä½è¡¥0\n\n\n\n&gt;&gt;\nå³ç§»\nå„äºŒè¿›åˆ¶ä½å…¨éƒ¨å³ç§»è‹¥å¹²ä½ï¼Œæ­£æ•°å·¦è¡¥0ï¼Œè´Ÿæ•°å·¦è¡¥1ï¼Œå³è¾¹ä¸¢å¼ƒ\n\n\n\n1. æŒ‰ä½ä¸è¿ç®—ç¬¦ï¼ˆ&amp;ï¼‰å®šä¹‰ï¼š å‚åŠ è¿ç®—çš„ä¸¤ä¸ªæ•°æ®æŒ‰äºŒè¿›åˆ¶ä½è¿›è¡Œâ€œä¸â€è¿ç®—ã€‚ è¿ç®—è§„åˆ™ï¼š\n0 &amp; 0 &#x3D; 0  \n0 &amp; 1 &#x3D; 0  \n1 &amp; 0 &#x3D; 0  \n1 &amp; 1 &#x3D; 1\nå¤åˆ¶ä»£ç \n\næ€»ç»“ï¼šä¸¤ä½åŒæ—¶ä¸º1ï¼Œç»“æœæ‰ä¸º1ï¼Œå¦åˆ™ç»“æœä¸º0ã€‚ ä¾‹å¦‚ï¼š3&amp;5 å³ï¼š\n0000 0011 \n   0000 0101 \n &#x3D; 0000 0001\nå¤åˆ¶ä»£ç \n\nå› æ­¤ 3&amp;5 çš„å€¼ä¸º1ã€‚ æ³¨æ„ï¼šè´Ÿæ•°æŒ‰è¡¥ç å½¢å¼å‚åŠ æŒ‰ä½ä¸è¿ç®—ã€‚\nç”¨é€”ï¼š\nï¼ˆ1ï¼‰åˆ¤æ–­å¥‡å¶\nåªè¦æ ¹æ®æœ€æœªä½æ˜¯0è¿˜æ˜¯1æ¥å†³å®šï¼Œä¸º0å°±æ˜¯å¶æ•°ï¼Œä¸º1å°±æ˜¯å¥‡æ•°ã€‚å› æ­¤å¯ä»¥ç”¨if ((i &amp; 1) == 0)ä»£æ›¿if (i % 2 == 0)æ¥åˆ¤æ–­aæ˜¯ä¸æ˜¯å¶æ•°ã€‚\nï¼ˆ2ï¼‰æ¸…é›¶\nå¦‚æœæƒ³å°†ä¸€ä¸ªå•å…ƒæ¸…é›¶ï¼Œå³ä½¿å…¶å…¨éƒ¨äºŒè¿›åˆ¶ä½ä¸º0ï¼Œåªè¦ä¸ä¸€ä¸ªå„ä½éƒ½ä¸ºé›¶çš„æ•°å€¼ç›¸ä¸ï¼Œç»“æœä¸ºé›¶ã€‚\n2. æŒ‰ä½æˆ–è¿ç®—ç¬¦ï¼ˆ|ï¼‰å®šä¹‰ï¼š å‚åŠ è¿ç®—çš„ä¸¤ä¸ªå¯¹è±¡æŒ‰äºŒè¿›åˆ¶ä½è¿›è¡Œâ€œæˆ–â€è¿ç®—ã€‚\nè¿ç®—è§„åˆ™ï¼š\n0 | 0 &#x3D; 0\n0 | 1 &#x3D; 1  \n1 | 0 &#x3D; 1  \n1 | 1 &#x3D; 1\nå¤åˆ¶ä»£ç \n\næ€»ç»“ï¼šå‚åŠ è¿ç®—çš„ä¸¤ä¸ªå¯¹è±¡åªè¦æœ‰ä¸€ä¸ªä¸º1ï¼Œå…¶å€¼ä¸º1ã€‚ ä¾‹å¦‚ï¼š3|5å³ï¼š\n0000 0011\n  0000 0101 \n&#x3D; 0000 0111\nå¤åˆ¶ä»£ç \n\nå› æ­¤ï¼Œ3|5çš„å€¼ä¸º7ã€‚ æ³¨æ„ï¼šè´Ÿæ•°æŒ‰è¡¥ç å½¢å¼å‚åŠ æŒ‰ä½æˆ–è¿ç®—ã€‚\n3. å¼‚æˆ–è¿ç®—ç¬¦ï¼ˆ^ï¼‰å®šä¹‰ï¼š å‚åŠ è¿ç®—çš„ä¸¤ä¸ªæ•°æ®æŒ‰äºŒè¿›åˆ¶ä½è¿›è¡Œâ€œå¼‚æˆ–â€è¿ç®—ã€‚\nè¿ç®—è§„åˆ™ï¼š\n0 ^ 0 &#x3D; 0  \n0 ^ 1 &#x3D; 1  \n1 ^ 0 &#x3D; 1  \n1 ^ 1 &#x3D; 0\nå¤åˆ¶ä»£ç \n\næ€»ç»“ï¼šå‚åŠ è¿ç®—çš„ä¸¤ä¸ªå¯¹è±¡ï¼Œå¦‚æœä¸¤ä¸ªç›¸åº”ä½ç›¸åŒä¸º0ï¼Œç›¸å¼‚ä¸º1ã€‚ ä¾‹å¦‚ï¼š3|5å³ï¼š\n0000 0011\n  0000 0101 \n&#x3D; 0000 0110\nå¤åˆ¶ä»£ç \n\nå› æ­¤ï¼Œ3^5çš„å€¼ä¸º6ã€‚ å¼‚æˆ–è¿ç®—çš„æ€§è´¨:\n\näº¤æ¢å¾‹ï¼š(a^b)^c == a^(b^c)\nç»“åˆå¾‹ï¼š(a + b)^c == a^b + b^c\nå¯¹äºä»»ä½•æ•°xï¼Œéƒ½æœ‰ x^x=0ï¼Œx^0=x\nè‡ªåæ€§: a^b^b=a^0=a;\n\n4. å–åè¿ç®—ç¬¦ (~)å®šä¹‰ï¼š å‚åŠ è¿ç®—çš„ä¸€ä¸ªæ•°æ®æŒ‰äºŒè¿›åˆ¶è¿›è¡Œâ€œå–åâ€è¿ç®—ã€‚\nè¿ç®—è§„åˆ™ï¼š\n~ 1 &#x3D; 0~ 0 &#x3D; 1\nå¤åˆ¶ä»£ç \n\næ€»ç»“ï¼šå¯¹ä¸€ä¸ªäºŒè¿›åˆ¶æ•°æŒ‰ä½å–åï¼Œå³å°†0å˜1ï¼Œ1å˜0ã€‚ ä¾‹å¦‚ï¼š~6 å³ï¼š\n0000 0110&#x3D; 1111 1001\nå¤åˆ¶ä»£ç \n\nåœ¨è®¡ç®—æœºä¸­ï¼Œæ­£æ•°ç”¨åŸç è¡¨ç¤ºï¼Œè´Ÿæ•°ä½¿ç”¨è¡¥ç å­˜å‚¨ï¼Œé¦–å…ˆçœ‹æœ€é«˜ä½ï¼Œæœ€é«˜ä½1è¡¨ç¤ºè´Ÿæ•°ï¼Œ0è¡¨ç¤ºæ­£æ•°ã€‚æ­¤è®¡ç®—æœºäºŒè¿›åˆ¶ç ä¸ºè´Ÿæ•°ï¼Œæœ€é«˜ä½ä¸ºç¬¦å·ä½ã€‚ å½“å‘ç°æŒ‰ä½å–åä¸ºè´Ÿæ•°æ—¶ï¼Œå°±ç›´æ¥å–å…¶è¡¥ç ï¼Œå˜ä¸ºåè¿›åˆ¶ï¼š\n0000 0110   &#x3D; 1111 1001åç ï¼š1000 0110è¡¥ç ï¼š1000 0111\nå¤åˆ¶ä»£ç \n\nå› æ­¤ï¼Œ~6çš„å€¼ä¸º-7ã€‚\n5. å·¦ç§»è¿ç®—ç¬¦ï¼ˆ&lt;&lt;ï¼‰å®šä¹‰ï¼š å°†ä¸€ä¸ªè¿ç®—å¯¹è±¡çš„å„äºŒè¿›åˆ¶ä½å…¨éƒ¨å·¦ç§»è‹¥å¹²ä½ï¼Œå·¦è¾¹çš„äºŒè¿›åˆ¶ä½ä¸¢å¼ƒï¼Œå³è¾¹è¡¥0ã€‚ è®¾ a&#x3D;1010 1110ï¼Œa &#x3D; a&lt;&lt; 2 å°†açš„äºŒè¿›åˆ¶ä½å·¦ç§»2ä½ã€å³è¡¥0ï¼Œå³å¾—a&#x3D;1011 1000ã€‚ è‹¥å·¦ç§»æ—¶èˆå¼ƒçš„é«˜ä½ä¸åŒ…å«1ï¼Œåˆ™æ¯å·¦ç§»ä¸€ä½ï¼Œç›¸å½“äºè¯¥æ•°ä¹˜ä»¥2ã€‚\n6. å³ç§»è¿ç®—ç¬¦ï¼ˆ&gt;&gt;ï¼‰å®šä¹‰ï¼š å°†ä¸€ä¸ªæ•°çš„å„äºŒè¿›åˆ¶ä½å…¨éƒ¨å³ç§»è‹¥å¹²ä½ï¼Œæ­£æ•°å·¦è¡¥0ï¼Œè´Ÿæ•°å·¦è¡¥1ï¼Œå³è¾¹ä¸¢å¼ƒã€‚ ä¾‹å¦‚ï¼ša&#x3D;a&gt;&gt;2 å°†açš„äºŒè¿›åˆ¶ä½å³ç§»2ä½ï¼Œå·¦è¡¥0 æˆ–è€… å·¦è¡¥1å¾—çœ‹è¢«ç§»æ•°æ˜¯æ­£è¿˜æ˜¯è´Ÿã€‚ æ“ä½œæ•°æ¯å³ç§»ä¸€ä½ï¼Œç›¸å½“äºè¯¥æ•°é™¤ä»¥2ã€‚\n7. åŸç ã€è¡¥ç ã€åç ä¸Šé¢æåˆ°äº†è¡¥ç ã€åç ç­‰çŸ¥è¯†ï¼Œè¿™é‡Œå°±è¡¥å……ä¸€ä¸‹ã€‚ è®¡ç®—æœºä¸­çš„æœ‰ç¬¦å·æ•°æœ‰ä¸‰ç§è¡¨ç¤ºæ–¹æ³•ï¼Œå³åŸç ã€åç å’Œè¡¥ç ã€‚ä¸‰ç§è¡¨ç¤ºæ–¹æ³•å‡æœ‰ç¬¦å·ä½å’Œæ•°å€¼ä½ä¸¤éƒ¨åˆ†ï¼Œç¬¦å·ä½éƒ½æ˜¯ç”¨0è¡¨ç¤ºâ€œæ­£â€ï¼Œç”¨1è¡¨ç¤ºâ€œè´Ÿâ€ï¼Œè€Œæ•°å€¼ä½ï¼Œä¸‰ç§è¡¨ç¤ºæ–¹æ³•å„ä¸ç›¸åŒã€‚\nï¼ˆ1ï¼‰åŸç \nåŸç å°±æ˜¯ä¸€ä¸ªæ•°çš„äºŒè¿›åˆ¶æ•°ã€‚ä¾‹å¦‚ï¼š10çš„åŸç ä¸º0000 1010\nï¼ˆ2ï¼‰åç \n\næ­£æ•°çš„åç ä¸åŸç ç›¸åŒï¼Œå¦‚ï¼š10 åç ä¸º 0000 1010\nè´Ÿæ•°çš„åç ä¸ºé™¤ç¬¦å·ä½ï¼ŒæŒ‰ä½å–åï¼Œå³0å˜1ï¼Œ1å˜0ã€‚\n\nä¾‹å¦‚ï¼š-10\nåŸç ï¼š1000 1010\nåç ï¼š1111 0101\nå¤åˆ¶ä»£ç \n\nï¼ˆ3ï¼‰è¡¥ç \n\næ­£æ•°çš„è¡¥ç ä¸åŸç ç›¸åŒï¼Œå¦‚ï¼š10 è¡¥ç ä¸º 0000 1010\nè´Ÿæ•°çš„è¡¥ç æ˜¯åŸç é™¤ç¬¦å·ä½å¤–çš„æ‰€æœ‰ä½å–åå³0å˜1ï¼Œ1å˜0ï¼Œç„¶ååŠ 1ï¼Œä¹Ÿå°±æ˜¯åç åŠ 1ã€‚\n\nä¾‹å¦‚ï¼š-10\nåŸç ï¼š1000 1010\nåç ï¼š1111 0101\nè¡¥ç ï¼š1111 0110\nå¤åˆ¶ä»£ç \n\n12. ä¸ºä»€ä¹ˆå‡½æ•°çš„ arguments å‚æ•°æ˜¯ç±»æ•°ç»„è€Œä¸æ˜¯æ•°ç»„ï¼Ÿå¦‚ä½•éå†ç±»æ•°ç»„?argumentsæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒçš„å±æ€§æ˜¯ä» 0 å¼€å§‹ä¾æ¬¡é€’å¢çš„æ•°å­—ï¼Œè¿˜æœ‰calleeå’Œlengthç­‰å±æ€§ï¼Œä¸æ•°ç»„ç›¸ä¼¼ï¼›ä½†æ˜¯å®ƒå´æ²¡æœ‰æ•°ç»„å¸¸è§çš„æ–¹æ³•å±æ€§ï¼Œå¦‚forEach, reduceç­‰ï¼Œæ‰€ä»¥å«å®ƒä»¬ç±»æ•°ç»„ã€‚\nè¦éå†ç±»æ•°ç»„ï¼Œæœ‰ä¸‰ä¸ªæ–¹æ³•ï¼š\nï¼ˆ1ï¼‰å°†æ•°ç»„çš„æ–¹æ³•åº”ç”¨åˆ°ç±»æ•°ç»„ä¸Šï¼Œè¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨callå’Œapplyæ–¹æ³•ï¼Œå¦‚ï¼š\nfunction foo()&#123; \n  Array.prototype.forEach.call(arguments, a &#x3D;&gt; console.log(a))\n&#125;\nå¤åˆ¶ä»£ç \n\nï¼ˆ2ï¼‰ä½¿ç”¨Array.fromæ–¹æ³•å°†ç±»æ•°ç»„è½¬åŒ–æˆæ•°ç»„ï¼šâ€Œ\nfunction foo()&#123; \n  const arrArgs &#x3D; Array.from(arguments) \n  arrArgs.forEach(a &#x3D;&gt; console.log(a))\n&#125;\nå¤åˆ¶ä»£ç \n\nï¼ˆ3ï¼‰ä½¿ç”¨å±•å¼€è¿ç®—ç¬¦å°†ç±»æ•°ç»„è½¬åŒ–æˆæ•°ç»„\nfunction foo()&#123; \n    const arrArgs &#x3D; [...arguments] \n    arrArgs.forEach(a &#x3D;&gt; console.log(a)) \n&#125;\nå¤åˆ¶ä»£ç \n\n13. ä»€ä¹ˆæ˜¯ DOM å’Œ BOMï¼Ÿ\nDOM æŒ‡çš„æ˜¯æ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼Œå®ƒæŒ‡çš„æ˜¯æŠŠæ–‡æ¡£å½“åšä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ä¸»è¦å®šä¹‰äº†å¤„ç†ç½‘é¡µå†…å®¹çš„æ–¹æ³•å’Œæ¥å£ã€‚\nBOM æŒ‡çš„æ˜¯æµè§ˆå™¨å¯¹è±¡æ¨¡å‹ï¼Œå®ƒæŒ‡çš„æ˜¯æŠŠæµè§ˆå™¨å½“åšä¸€ä¸ªå¯¹è±¡æ¥å¯¹å¾…ï¼Œè¿™ä¸ªå¯¹è±¡ä¸»è¦å®šä¹‰äº†ä¸æµè§ˆå™¨è¿›è¡Œäº¤äº’çš„æ³•å’Œæ¥å£ã€‚BOMçš„æ ¸å¿ƒæ˜¯ windowï¼Œè€Œ window å¯¹è±¡å…·æœ‰åŒé‡è§’è‰²ï¼Œå®ƒæ—¢æ˜¯é€šè¿‡ js è®¿é—®æµè§ˆå™¨çª—å£çš„ä¸€ä¸ªæ¥å£ï¼Œåˆæ˜¯ä¸€ä¸ª Globalï¼ˆå…¨å±€ï¼‰å¯¹è±¡ã€‚è¿™æ„å‘³ç€åœ¨ç½‘é¡µä¸­å®šä¹‰çš„ä»»ä½•å¯¹è±¡ï¼Œå˜é‡å’Œå‡½æ•°ï¼Œéƒ½ä½œä¸ºå…¨å±€å¯¹è±¡çš„ä¸€ä¸ªå±æ€§æˆ–è€…æ–¹æ³•å­˜åœ¨ã€‚window å¯¹è±¡å«æœ‰ location å¯¹è±¡ã€navigator å¯¹è±¡ã€screen å¯¹è±¡ç­‰å­å¯¹è±¡ï¼Œå¹¶ä¸” DOM çš„æœ€æ ¹æœ¬çš„å¯¹è±¡ document å¯¹è±¡ä¹Ÿæ˜¯ BOM çš„ window å¯¹è±¡çš„å­å¯¹è±¡ã€‚\n\n14. å¯¹ç±»æ•°ç»„å¯¹è±¡çš„ç†è§£ï¼Œå¦‚ä½•è½¬åŒ–ä¸ºæ•°ç»„ä¸€ä¸ªæ‹¥æœ‰ length å±æ€§å’Œè‹¥å¹²ç´¢å¼•å±æ€§çš„å¯¹è±¡å°±å¯ä»¥è¢«ç§°ä¸ºç±»æ•°ç»„å¯¹è±¡ï¼Œç±»æ•°ç»„å¯¹è±¡å’Œæ•°ç»„ç±»ä¼¼ï¼Œä½†æ˜¯ä¸èƒ½è°ƒç”¨æ•°ç»„çš„æ–¹æ³•ã€‚å¸¸è§çš„ç±»æ•°ç»„å¯¹è±¡æœ‰ arguments å’Œ DOM æ–¹æ³•çš„è¿”å›ç»“æœï¼Œå‡½æ•°å‚æ•°ä¹Ÿå¯ä»¥è¢«çœ‹ä½œæ˜¯ç±»æ•°ç»„å¯¹è±¡ï¼Œå› ä¸ºå®ƒå«æœ‰ lengthå±æ€§å€¼ï¼Œä»£è¡¨å¯æ¥æ”¶çš„å‚æ•°ä¸ªæ•°ã€‚\nå¸¸è§çš„ç±»æ•°ç»„è½¬æ¢ä¸ºæ•°ç»„çš„æ–¹æ³•æœ‰è¿™æ ·å‡ ç§ï¼š\n\né€šè¿‡ call è°ƒç”¨æ•°ç»„çš„ slice æ–¹æ³•æ¥å®ç°è½¬æ¢\n\nArray.prototype.slice.call(arrayLike);\nå¤åˆ¶ä»£ç \n\n\né€šè¿‡ call è°ƒç”¨æ•°ç»„çš„ splice æ–¹æ³•æ¥å®ç°è½¬æ¢\n\nArray.prototype.splice.call(arrayLike, 0);\nå¤åˆ¶ä»£ç \n\n\né€šè¿‡ apply è°ƒç”¨æ•°ç»„çš„ concat æ–¹æ³•æ¥å®ç°è½¬æ¢\n\nArray.prototype.concat.apply([], arrayLike);\nå¤åˆ¶ä»£ç \n\n\né€šè¿‡ Array.from æ–¹æ³•æ¥å®ç°è½¬æ¢\n\nArray.from(arrayLike);\nå¤åˆ¶ä»£ç \n\n15. escapeã€encodeURIã€encodeURIComponent çš„åŒºåˆ«\nencodeURI æ˜¯å¯¹æ•´ä¸ª URI è¿›è¡Œè½¬ä¹‰ï¼Œå°† URI ä¸­çš„éæ³•å­—ç¬¦è½¬æ¢ä¸ºåˆæ³•å­—ç¬¦ï¼Œæ‰€ä»¥å¯¹äºä¸€äº›åœ¨ URI ä¸­æœ‰ç‰¹æ®Šæ„ä¹‰çš„å­—ç¬¦ä¸ä¼šè¿›è¡Œè½¬ä¹‰ã€‚\nencodeURIComponent æ˜¯å¯¹ URI çš„ç»„æˆéƒ¨åˆ†è¿›è¡Œè½¬ä¹‰ï¼Œæ‰€ä»¥ä¸€äº›ç‰¹æ®Šå­—ç¬¦ä¹Ÿä¼šå¾—åˆ°è½¬ä¹‰ã€‚\nescape å’Œ encodeURI çš„ä½œç”¨ç›¸åŒï¼Œä¸è¿‡å®ƒä»¬å¯¹äº unicode ç¼–ç ä¸º 0xff ä¹‹å¤–å­—ç¬¦çš„æ—¶å€™ä¼šæœ‰åŒºåˆ«ï¼Œescape æ˜¯ç›´æ¥åœ¨å­—ç¬¦çš„ unicode ç¼–ç å‰åŠ ä¸Š %uï¼Œè€Œ encodeURI é¦–å…ˆä¼šå°†å­—ç¬¦è½¬æ¢ä¸º UTF-8 çš„æ ¼å¼ï¼Œå†åœ¨æ¯ä¸ªå­—èŠ‚å‰åŠ ä¸Š %ã€‚\n\n16. å¯¹AJAXçš„ç†è§£ï¼Œå®ç°ä¸€ä¸ªAJAXè¯·æ±‚AJAXæ˜¯ Asynchronous JavaScript and XML çš„ç¼©å†™ï¼ŒæŒ‡çš„æ˜¯é€šè¿‡ JavaScript çš„ å¼‚æ­¥é€šä¿¡ï¼Œä»æœåŠ¡å™¨è·å– XML æ–‡æ¡£ä»ä¸­æå–æ•°æ®ï¼Œå†æ›´æ–°å½“å‰ç½‘é¡µçš„å¯¹åº”éƒ¨åˆ†ï¼Œè€Œä¸ç”¨åˆ·æ–°æ•´ä¸ªç½‘é¡µã€‚\nåˆ›å»ºAJAXè¯·æ±‚çš„æ­¥éª¤ï¼š\n\nåˆ›å»ºä¸€ä¸ª XMLHttpRequest å¯¹è±¡ã€‚\nåœ¨è¿™ä¸ªå¯¹è±¡ä¸Šä½¿ç”¨ open æ–¹æ³•åˆ›å»ºä¸€ä¸ª HTTP è¯·æ±‚ï¼Œopen æ–¹æ³•æ‰€éœ€è¦çš„å‚æ•°æ˜¯è¯·æ±‚çš„æ–¹æ³•ã€è¯·æ±‚çš„åœ°å€ã€æ˜¯å¦å¼‚æ­¥å’Œç”¨æˆ·çš„è®¤è¯ä¿¡æ¯ã€‚\nåœ¨å‘èµ·è¯·æ±‚å‰ï¼Œå¯ä»¥ä¸ºè¿™ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›ä¿¡æ¯å’Œç›‘å¬å‡½æ•°ã€‚æ¯”å¦‚è¯´å¯ä»¥é€šè¿‡ setRequestHeader æ–¹æ³•æ¥ä¸ºè¯·æ±‚æ·»åŠ å¤´ä¿¡æ¯ã€‚è¿˜å¯ä»¥ä¸ºè¿™ä¸ªå¯¹è±¡æ·»åŠ ä¸€ä¸ªçŠ¶æ€ç›‘å¬å‡½æ•°ã€‚ä¸€ä¸ª XMLHttpRequest å¯¹è±¡ä¸€å…±æœ‰ 5 ä¸ªçŠ¶æ€ï¼Œå½“å®ƒçš„çŠ¶æ€å˜åŒ–æ—¶ä¼šè§¦å‘onreadystatechange äº‹ä»¶ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®ç›‘å¬å‡½æ•°ï¼Œæ¥å¤„ç†è¯·æ±‚æˆåŠŸåçš„ç»“æœã€‚å½“å¯¹è±¡çš„ readyState å˜ä¸º 4 çš„æ—¶å€™ï¼Œä»£è¡¨æœåŠ¡å™¨è¿”å›çš„æ•°æ®æ¥æ”¶å®Œæˆï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥é€šè¿‡åˆ¤æ–­è¯·æ±‚çš„çŠ¶æ€ï¼Œå¦‚æœçŠ¶æ€æ˜¯ 2xx æˆ–è€… 304 çš„è¯åˆ™ä»£è¡¨è¿”å›æ­£å¸¸ã€‚è¿™ä¸ªæ—¶å€™å°±å¯ä»¥é€šè¿‡ response ä¸­çš„æ•°æ®æ¥å¯¹é¡µé¢è¿›è¡Œæ›´æ–°äº†ã€‚\nå½“å¯¹è±¡çš„å±æ€§å’Œç›‘å¬å‡½æ•°è®¾ç½®å®Œæˆåï¼Œæœ€åè°ƒç”¨ sent æ–¹æ³•æ¥å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œå¯ä»¥ä¼ å…¥å‚æ•°ä½œä¸ºå‘é€çš„æ•°æ®ä½“ã€‚\n\nconst SERVER_URL &#x3D; &quot;&#x2F;server&quot;;\nlet xhr &#x3D; new XMLHttpRequest();\n&#x2F;&#x2F; åˆ›å»º Http è¯·æ±‚\nxhr.open(&quot;GET&quot;, url, true);\n&#x2F;&#x2F; è®¾ç½®çŠ¶æ€ç›‘å¬å‡½æ•°\nxhr.onreadystatechange &#x3D; function() &#123;\n  if (this.readyState !&#x3D;&#x3D; 4) return;\n  &#x2F;&#x2F; å½“è¯·æ±‚æˆåŠŸæ—¶\n  if (this.status &#x3D;&#x3D;&#x3D; 200) &#123;\n    handle(this.response);\n  &#125; else &#123;\n    console.error(this.statusText);\n  &#125;\n&#125;;\n&#x2F;&#x2F; è®¾ç½®è¯·æ±‚å¤±è´¥æ—¶çš„ç›‘å¬å‡½æ•°\nxhr.onerror &#x3D; function() &#123;\n  console.error(this.statusText);\n&#125;;\n&#x2F;&#x2F; è®¾ç½®è¯·æ±‚å¤´ä¿¡æ¯\nxhr.responseType &#x3D; &quot;json&quot;;\nxhr.setRequestHeader(&quot;Accept&quot;, &quot;application&#x2F;json&quot;);\n&#x2F;&#x2F; å‘é€ Http è¯·æ±‚\nxhr.send(null);\nå¤åˆ¶ä»£ç \n\nä½¿ç”¨Promiseå°è£…AJAXï¼š\n&#x2F;&#x2F; promise å°è£…å®ç°ï¼š\nfunction getJSON(url) &#123;\n  &#x2F;&#x2F; åˆ›å»ºä¸€ä¸ª promise å¯¹è±¡\n  let promise &#x3D; new Promise(function(resolve, reject) &#123;\n    let xhr &#x3D; new XMLHttpRequest();\n    &#x2F;&#x2F; æ–°å»ºä¸€ä¸ª http è¯·æ±‚\n    xhr.open(&quot;GET&quot;, url, true);\n    &#x2F;&#x2F; è®¾ç½®çŠ¶æ€çš„ç›‘å¬å‡½æ•°\n    xhr.onreadystatechange &#x3D; function() &#123;\n      if (this.readyState !&#x3D;&#x3D; 4) return;\n      &#x2F;&#x2F; å½“è¯·æ±‚æˆåŠŸæˆ–å¤±è´¥æ—¶ï¼Œæ”¹å˜ promise çš„çŠ¶æ€\n      if (this.status &#x3D;&#x3D;&#x3D; 200) &#123;\n        resolve(this.response);\n      &#125; else &#123;\n        reject(new Error(this.statusText));\n      &#125;\n    &#125;;\n    &#x2F;&#x2F; è®¾ç½®é”™è¯¯ç›‘å¬å‡½æ•°\n    xhr.onerror &#x3D; function() &#123;\n      reject(new Error(this.statusText));\n    &#125;;\n    &#x2F;&#x2F; è®¾ç½®å“åº”çš„æ•°æ®ç±»å‹\n    xhr.responseType &#x3D; &quot;json&quot;;\n    &#x2F;&#x2F; è®¾ç½®è¯·æ±‚å¤´ä¿¡æ¯\n    xhr.setRequestHeader(&quot;Accept&quot;, &quot;application&#x2F;json&quot;);\n    &#x2F;&#x2F; å‘é€ http è¯·æ±‚\n    xhr.send(null);\n  &#125;);\n  return promise;\n&#125;\nå¤åˆ¶ä»£ç \n\n17. JavaScriptä¸ºä»€ä¹ˆè¦è¿›è¡Œå˜é‡æå‡ï¼Œå®ƒå¯¼è‡´äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿå˜é‡æå‡çš„è¡¨ç°æ˜¯ï¼Œæ— è®ºåœ¨å‡½æ•°ä¸­ä½•å¤„ä½ç½®å£°æ˜çš„å˜é‡ï¼Œå¥½åƒéƒ½è¢«æå‡åˆ°äº†å‡½æ•°çš„é¦–éƒ¨ï¼Œå¯ä»¥åœ¨å˜é‡å£°æ˜å‰è®¿é—®åˆ°è€Œä¸ä¼šæŠ¥é”™ã€‚\né€ æˆå˜é‡å£°æ˜æå‡çš„æœ¬è´¨åŸå› æ˜¯ js å¼•æ“åœ¨ä»£ç æ‰§è¡Œå‰æœ‰ä¸€ä¸ªè§£æçš„è¿‡ç¨‹ï¼Œåˆ›å»ºäº†æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œåˆå§‹åŒ–äº†ä¸€äº›ä»£ç æ‰§è¡Œæ—¶éœ€è¦ç”¨åˆ°çš„å¯¹è±¡ã€‚å½“è®¿é—®ä¸€ä¸ªå˜é‡æ—¶ï¼Œä¼šåˆ°å½“å‰æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„ä½œç”¨åŸŸé“¾ä¸­å»æŸ¥æ‰¾ï¼Œè€Œä½œç”¨åŸŸé“¾çš„é¦–ç«¯æŒ‡å‘çš„æ˜¯å½“å‰æ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡ï¼Œè¿™ä¸ªå˜é‡å¯¹è±¡æ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡çš„ä¸€ä¸ªå±æ€§ï¼Œå®ƒåŒ…å«äº†å‡½æ•°çš„å½¢å‚ã€æ‰€æœ‰çš„å‡½æ•°å’Œå˜é‡å£°æ˜ï¼Œè¿™ä¸ªå¯¹è±¡çš„æ˜¯åœ¨ä»£ç è§£æçš„æ—¶å€™åˆ›å»ºçš„ã€‚\né¦–å…ˆè¦çŸ¥é“ï¼ŒJSåœ¨æ‹¿åˆ°ä¸€ä¸ªå˜é‡æˆ–è€…ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œä¼šæœ‰ä¸¤æ­¥æ“ä½œï¼Œå³è§£æå’Œæ‰§è¡Œã€‚\n\nåœ¨è§£æé˜¶æ®µï¼ŒJSä¼šæ£€æŸ¥è¯­æ³•ï¼Œå¹¶å¯¹å‡½æ•°è¿›è¡Œé¢„ç¼–è¯‘ã€‚è§£æçš„æ—¶å€™ä¼šå…ˆåˆ›å»ºä¸€ä¸ªå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œå…ˆæŠŠä»£ç ä¸­å³å°†æ‰§è¡Œçš„å˜é‡ã€å‡½æ•°å£°æ˜éƒ½æ‹¿å‡ºæ¥ï¼Œå˜é‡å…ˆèµ‹å€¼ä¸ºundefinedï¼Œå‡½æ•°å…ˆå£°æ˜å¥½å¯ä½¿ç”¨ã€‚åœ¨ä¸€ä¸ªå‡½æ•°æ‰§è¡Œä¹‹å‰ï¼Œä¹Ÿä¼šåˆ›å»ºä¸€ä¸ªå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œè·Ÿå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ç±»ä¼¼ï¼Œä¸è¿‡å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¼šå¤šå‡ºthisã€argumentså’Œå‡½æ•°çš„å‚æ•°ã€‚\n\nå…¨å±€ä¸Šä¸‹æ–‡ï¼šå˜é‡å®šä¹‰ï¼Œå‡½æ•°å£°æ˜\nå‡½æ•°ä¸Šä¸‹æ–‡ï¼šå˜é‡å®šä¹‰ï¼Œå‡½æ•°å£°æ˜ï¼Œthisï¼Œarguments\n\n\nåœ¨æ‰§è¡Œé˜¶æ®µï¼Œå°±æ˜¯æŒ‰ç…§ä»£ç çš„é¡ºåºä¾æ¬¡æ‰§è¡Œã€‚\n\n\né‚£ä¸ºä»€ä¹ˆä¼šè¿›è¡Œå˜é‡æå‡å‘¢ï¼Ÿä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ä¸ªåŸå› ï¼š\n\næé«˜æ€§èƒ½\nå®¹é”™æ€§æ›´å¥½\n\nï¼ˆ1ï¼‰æé«˜æ€§èƒ½ åœ¨JSä»£ç æ‰§è¡Œä¹‹å‰ï¼Œä¼šè¿›è¡Œè¯­æ³•æ£€æŸ¥å’Œé¢„ç¼–è¯‘ï¼Œå¹¶ä¸”è¿™ä¸€æ“ä½œåªè¿›è¡Œä¸€æ¬¡ã€‚è¿™ä¹ˆåšå°±æ˜¯ä¸ºäº†æé«˜æ€§èƒ½ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸€æ­¥ï¼Œé‚£ä¹ˆæ¯æ¬¡æ‰§è¡Œä»£ç å‰éƒ½å¿…é¡»é‡æ–°è§£æä¸€éè¯¥å˜é‡ï¼ˆå‡½æ•°ï¼‰ï¼Œè€Œè¿™æ˜¯æ²¡æœ‰å¿…è¦çš„ï¼Œå› ä¸ºå˜é‡ï¼ˆå‡½æ•°ï¼‰çš„ä»£ç å¹¶ä¸ä¼šæ”¹å˜ï¼Œè§£æä¸€éå°±å¤Ÿäº†ã€‚\nåœ¨è§£æçš„è¿‡ç¨‹ä¸­ï¼Œè¿˜ä¼šä¸ºå‡½æ•°ç”Ÿæˆé¢„ç¼–è¯‘ä»£ç ã€‚åœ¨é¢„ç¼–è¯‘æ—¶ï¼Œä¼šç»Ÿè®¡å£°æ˜äº†å“ªäº›å˜é‡ã€åˆ›å»ºäº†å“ªäº›å‡½æ•°ï¼Œå¹¶å¯¹å‡½æ•°çš„ä»£ç è¿›è¡Œå‹ç¼©ï¼Œå»é™¤æ³¨é‡Šã€ä¸å¿…è¦çš„ç©ºç™½ç­‰ã€‚è¿™æ ·åšçš„å¥½å¤„å°±æ˜¯æ¯æ¬¡æ‰§è¡Œå‡½æ•°æ—¶éƒ½å¯ä»¥ç›´æ¥ä¸ºè¯¥å‡½æ•°åˆ†é…æ ˆç©ºé—´ï¼ˆä¸éœ€è¦å†è§£æä¸€éå»è·å–ä»£ç ä¸­å£°æ˜äº†å“ªäº›å˜é‡ï¼Œåˆ›å»ºäº†å“ªäº›å‡½æ•°ï¼‰ï¼Œå¹¶ä¸”å› ä¸ºä»£ç å‹ç¼©çš„åŸå› ï¼Œä»£ç æ‰§è¡Œä¹Ÿæ›´å¿«äº†ã€‚\nï¼ˆ2ï¼‰å®¹é”™æ€§æ›´å¥½\nå˜é‡æå‡å¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šæé«˜JSçš„å®¹é”™æ€§ï¼Œçœ‹ä¸‹é¢çš„ä»£ç ï¼š\na &#x3D; 1;var a;console.log(a);\nå¤åˆ¶ä»£ç \n\nå¦‚æœæ²¡æœ‰å˜é‡æå‡ï¼Œè¿™ä¸¤è¡Œä»£ç å°±ä¼šæŠ¥é”™ï¼Œä½†æ˜¯å› ä¸ºæœ‰äº†å˜é‡æå‡ï¼Œè¿™æ®µä»£ç å°±å¯ä»¥æ­£å¸¸æ‰§è¡Œã€‚\nè™½ç„¶ï¼Œåœ¨å¯ä»¥å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥å®Œå…¨é¿å…è¿™æ ·å†™ï¼Œä½†æ˜¯æœ‰æ—¶ä»£ç å¾ˆå¤æ‚çš„æ—¶å€™ã€‚å¯èƒ½å› ä¸ºç–å¿½è€Œå…ˆä½¿ç”¨åå®šä¹‰äº†ï¼Œè¿™æ ·ä¹Ÿä¸ä¼šå½±å“æ­£å¸¸ä½¿ç”¨ã€‚ç”±äºå˜é‡æå‡çš„å­˜åœ¨ï¼Œè€Œä¼šæ­£å¸¸è¿è¡Œã€‚\næ€»ç»“ï¼š\n\nè§£æå’Œé¢„ç¼–è¯‘è¿‡ç¨‹ä¸­çš„å£°æ˜æå‡å¯ä»¥æé«˜æ€§èƒ½ï¼Œè®©å‡½æ•°å¯ä»¥åœ¨æ‰§è¡Œæ—¶é¢„å…ˆä¸ºå˜é‡åˆ†é…æ ˆç©ºé—´\nå£°æ˜æå‡è¿˜å¯ä»¥æé«˜JSä»£ç çš„å®¹é”™æ€§ï¼Œä½¿ä¸€äº›ä¸è§„èŒƒçš„ä»£ç ä¹Ÿå¯ä»¥æ­£å¸¸æ‰§è¡Œ\n\nå˜é‡æå‡è™½ç„¶æœ‰ä¸€äº›ä¼˜ç‚¹ï¼Œä½†æ˜¯ä»–ä¹Ÿä¼šé€ æˆä¸€å®šçš„é—®é¢˜ï¼Œåœ¨ES6ä¸­æå‡ºäº†letã€constæ¥å®šä¹‰å˜é‡ï¼Œå®ƒä»¬å°±æ²¡æœ‰å˜é‡æå‡çš„æœºåˆ¶ã€‚ä¸‹é¢çœ‹ä¸€ä¸‹å˜é‡æå‡å¯èƒ½ä¼šå¯¼è‡´çš„é—®é¢˜ï¼š\nvar tmp &#x3D; new Date();\n\nfunction fn()&#123;\n\tconsole.log(tmp);\n\tif(false)&#123;\n\t\tvar tmp &#x3D; &#39;hello world&#39;;\n\t&#125;\n&#125;\n\nfn();  &#x2F;&#x2F; undefined\nå¤åˆ¶ä»£ç \n\nåœ¨è¿™ä¸ªå‡½æ•°ä¸­ï¼ŒåŸæœ¬æ˜¯è¦æ‰“å°å‡ºå¤–å±‚çš„tmpå˜é‡ï¼Œä½†æ˜¯å› ä¸ºå˜é‡æå‡çš„é—®é¢˜ï¼Œå†…å±‚å®šä¹‰çš„tmpè¢«æåˆ°å‡½æ•°å†…éƒ¨çš„æœ€é¡¶éƒ¨ï¼Œç›¸å½“äºè¦†ç›–äº†å¤–å±‚çš„tmpï¼Œæ‰€ä»¥æ‰“å°ç»“æœä¸ºundefinedã€‚\nvar tmp &#x3D; &#39;hello world&#39;;\n\nfor (var i &#x3D; 0; i &lt; tmp.length; i++) &#123;\n\tconsole.log(tmp[i]);\n&#125;\n\nconsole.log(i); &#x2F;&#x2F; 11\nå¤åˆ¶ä»£ç \n\nç”±äºéå†æ—¶å®šä¹‰çš„iä¼šå˜é‡æå‡æˆä¸ºä¸€ä¸ªå…¨å±€å˜é‡ï¼Œåœ¨å‡½æ•°ç»“æŸä¹‹åä¸ä¼šè¢«é”€æ¯ï¼Œæ‰€ä»¥æ‰“å°å‡ºæ¥11ã€‚\n18. ä»€ä¹ˆæ˜¯å°¾è°ƒç”¨ï¼Œä½¿ç”¨å°¾è°ƒç”¨æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿå°¾è°ƒç”¨æŒ‡çš„æ˜¯å‡½æ•°çš„æœ€åä¸€æ­¥è°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°ã€‚ä»£ç æ‰§è¡Œæ˜¯åŸºäºæ‰§è¡Œæ ˆçš„ï¼Œæ‰€ä»¥å½“åœ¨ä¸€ä¸ªå‡½æ•°é‡Œè°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œä¼šä¿ç•™å½“å‰çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œç„¶åå†æ–°å»ºå¦å¤–ä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡åŠ å…¥æ ˆä¸­ã€‚ä½¿ç”¨å°¾è°ƒç”¨çš„è¯ï¼Œå› ä¸ºå·²ç»æ˜¯å‡½æ•°çš„æœ€åä¸€æ­¥ï¼Œæ‰€ä»¥è¿™æ—¶å¯ä»¥ä¸å¿…å†ä¿ç•™å½“å‰çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œä»è€ŒèŠ‚çœäº†å†…å­˜ï¼Œè¿™å°±æ˜¯å°¾è°ƒç”¨ä¼˜åŒ–ã€‚ä½†æ˜¯ ES6 çš„å°¾è°ƒç”¨ä¼˜åŒ–åªåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹å¼€å¯ï¼Œæ­£å¸¸æ¨¡å¼æ˜¯æ— æ•ˆçš„ã€‚\n19. ES6æ¨¡å—ä¸CommonJSæ¨¡å—æœ‰ä»€ä¹ˆå¼‚åŒï¼ŸES6 Moduleå’ŒCommonJSæ¨¡å—çš„åŒºåˆ«ï¼š\n\nCommonJSæ˜¯å¯¹æ¨¡å—çš„æµ…æ‹·â»‰ï¼ŒES6 Moduleæ˜¯å¯¹æ¨¡å—çš„å¼•â½¤ï¼Œå³ES6 Moduleåªå­˜åªè¯»ï¼Œä¸èƒ½æ”¹å˜å…¶å€¼ï¼Œä¹Ÿå°±æ˜¯æŒ‡é’ˆæŒ‡å‘ä¸èƒ½å˜ï¼Œç±»ä¼¼constï¼›\nimportçš„æ¥â¼æ˜¯read-onlyï¼ˆåªè¯»çŠ¶æ€ï¼‰ï¼Œä¸èƒ½ä¿®æ”¹å…¶å˜é‡å€¼ã€‚ å³ä¸èƒ½ä¿®æ”¹å…¶å˜é‡çš„æŒ‡é’ˆæŒ‡å‘ï¼Œä½†å¯ä»¥æ”¹å˜å˜é‡å†…éƒ¨æŒ‡é’ˆæŒ‡å‘ï¼Œå¯ä»¥å¯¹commonJSå¯¹é‡æ–°èµ‹å€¼ï¼ˆæ”¹å˜æŒ‡é’ˆæŒ‡å‘ï¼‰ï¼Œä½†æ˜¯å¯¹ES6 Moduleèµ‹å€¼ä¼šç¼–è¯‘æŠ¥é”™ã€‚\n\nES6 Moduleå’ŒCommonJSæ¨¡å—çš„å…±åŒç‚¹ï¼š\n\nCommonJSå’ŒES6 Moduleéƒ½å¯ä»¥å¯¹å¼•â¼Šçš„å¯¹è±¡è¿›â¾èµ‹å€¼ï¼Œå³å¯¹å¯¹è±¡å†…éƒ¨å±æ€§çš„å€¼è¿›â¾æ”¹å˜ã€‚\n\n20. å¸¸è§çš„DOMæ“ä½œæœ‰å“ªäº›1ï¼‰DOM èŠ‚ç‚¹çš„è·å–DOM èŠ‚ç‚¹çš„è·å–çš„APIåŠä½¿ç”¨ï¼š\ngetElementById &#x2F;&#x2F; æŒ‰ç…§ id æŸ¥è¯¢\ngetElementsByTagName &#x2F;&#x2F; æŒ‰ç…§æ ‡ç­¾åæŸ¥è¯¢\ngetElementsByClassName &#x2F;&#x2F; æŒ‰ç…§ç±»åæŸ¥è¯¢\nquerySelectorAll &#x2F;&#x2F; æŒ‰ç…§ css é€‰æ‹©å™¨æŸ¥è¯¢\n\n&#x2F;&#x2F; æŒ‰ç…§ id æŸ¥è¯¢\nvar imooc &#x3D; document.getElementById(&#39;imooc&#39;) &#x2F;&#x2F; æŸ¥è¯¢åˆ° id ä¸º imooc çš„å…ƒç´ \n&#x2F;&#x2F; æŒ‰ç…§æ ‡ç­¾åæŸ¥è¯¢\nvar pList &#x3D; document.getElementsByTagName(&#39;p&#39;)  &#x2F;&#x2F; æŸ¥è¯¢åˆ°æ ‡ç­¾ä¸º p çš„é›†åˆ\nconsole.log(divList.length)\nconsole.log(divList[0])\n&#x2F;&#x2F; æŒ‰ç…§ç±»åæŸ¥è¯¢\nvar moocList &#x3D; document.getElementsByClassName(&#39;mooc&#39;) &#x2F;&#x2F; æŸ¥è¯¢åˆ°ç±»åä¸º mooc çš„é›†åˆ\n&#x2F;&#x2F; æŒ‰ç…§ css é€‰æ‹©å™¨æŸ¥è¯¢\nvar pList &#x3D; document.querySelectorAll(&#39;.mooc&#39;) &#x2F;&#x2F; æŸ¥è¯¢åˆ°ç±»åä¸º mooc çš„é›†åˆ\nå¤åˆ¶ä»£ç \n\n2ï¼‰DOM èŠ‚ç‚¹çš„åˆ›å»ºåˆ›å»ºä¸€ä¸ªæ–°èŠ‚ç‚¹ï¼Œå¹¶æŠŠå®ƒæ·»åŠ åˆ°æŒ‡å®šèŠ‚ç‚¹çš„åé¢ã€‚ å·²çŸ¥çš„ HTML ç»“æ„å¦‚ä¸‹ï¼š\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;DEMO&lt;&#x2F;title&gt;\n  &lt;&#x2F;head&gt;\n  &lt;body&gt;\n    &lt;div id&#x3D;&quot;container&quot;&gt; \n      &lt;h1 id&#x3D;&quot;title&quot;&gt;æˆ‘æ˜¯æ ‡é¢˜&lt;&#x2F;h1&gt;\n    &lt;&#x2F;div&gt;   \n  &lt;&#x2F;body&gt;\n&lt;&#x2F;html&gt;\nå¤åˆ¶ä»£ç \n\nè¦æ±‚æ·»åŠ ä¸€ä¸ªæœ‰å†…å®¹çš„ span èŠ‚ç‚¹åˆ° id ä¸º title çš„èŠ‚ç‚¹åé¢ï¼Œåšæ³•å°±æ˜¯ï¼š\n&#x2F;&#x2F; é¦–å…ˆè·å–çˆ¶èŠ‚ç‚¹\nvar container &#x3D; document.getElementById(&#39;container&#39;)\n&#x2F;&#x2F; åˆ›å»ºæ–°èŠ‚ç‚¹\nvar targetSpan &#x3D; document.createElement(&#39;span&#39;)\n&#x2F;&#x2F; è®¾ç½® span èŠ‚ç‚¹çš„å†…å®¹\ntargetSpan.innerHTML &#x3D; &#39;hello world&#39;\n&#x2F;&#x2F; æŠŠæ–°åˆ›å»ºçš„å…ƒç´ å¡è¿›çˆ¶èŠ‚ç‚¹é‡Œå»\ncontainer.appendChild(targetSpan)\nå¤åˆ¶ä»£ç \n\n3ï¼‰DOM èŠ‚ç‚¹çš„åˆ é™¤åˆ é™¤æŒ‡å®šçš„ DOM èŠ‚ç‚¹ï¼Œ å·²çŸ¥çš„ HTML ç»“æ„å¦‚ä¸‹ï¼š\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;DEMO&lt;&#x2F;title&gt;\n  &lt;&#x2F;head&gt;\n  &lt;body&gt;\n    &lt;div id&#x3D;&quot;container&quot;&gt; \n      &lt;h1 id&#x3D;&quot;title&quot;&gt;æˆ‘æ˜¯æ ‡é¢˜&lt;&#x2F;h1&gt;\n    &lt;&#x2F;div&gt;   \n  &lt;&#x2F;body&gt;\n&lt;&#x2F;html&gt;\nå¤åˆ¶ä»£ç \n\néœ€è¦åˆ é™¤ id ä¸º title çš„å…ƒç´ ï¼Œåšæ³•æ˜¯ï¼š\n&#x2F;&#x2F; è·å–ç›®æ ‡å…ƒç´ çš„çˆ¶å…ƒç´ \nvar container &#x3D; document.getElementById(&#39;container&#39;)\n&#x2F;&#x2F; è·å–ç›®æ ‡å…ƒç´ \nvar targetNode &#x3D; document.getElementById(&#39;title&#39;)\n&#x2F;&#x2F; åˆ é™¤ç›®æ ‡å…ƒç´ \ncontainer.removeChild(targetNode)\nå¤åˆ¶ä»£ç \n\næˆ–è€…é€šè¿‡å­èŠ‚ç‚¹æ•°ç»„æ¥å®Œæˆåˆ é™¤ï¼š\n&#x2F;&#x2F; è·å–ç›®æ ‡å…ƒç´ çš„çˆ¶å…ƒç´ var container &#x3D; document.getElementById(&#39;container&#39;)&#x2F;&#x2F; è·å–ç›®æ ‡å…ƒç´ var targetNode &#x3D; container.childNodes[1]&#x2F;&#x2F; åˆ é™¤ç›®æ ‡å…ƒç´ container.removeChild(targetNode)\nå¤åˆ¶ä»£ç \n\n4ï¼‰ä¿®æ”¹ DOM å…ƒç´ ä¿®æ”¹ DOM å…ƒç´ è¿™ä¸ªåŠ¨ä½œå¯ä»¥åˆ†å¾ˆå¤šç»´åº¦ï¼Œæ¯”å¦‚è¯´ç§»åŠ¨ DOM å…ƒç´ çš„ä½ç½®ï¼Œä¿®æ”¹ DOM å…ƒç´ çš„å±æ€§ç­‰ã€‚\nå°†æŒ‡å®šçš„ä¸¤ä¸ª DOM å…ƒç´ äº¤æ¢ä½ç½®ï¼Œ å·²çŸ¥çš„ HTML ç»“æ„å¦‚ä¸‹ï¼š\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;DEMO&lt;&#x2F;title&gt;\n  &lt;&#x2F;head&gt;\n  &lt;body&gt;\n    &lt;div id&#x3D;&quot;container&quot;&gt; \n      &lt;h1 id&#x3D;&quot;title&quot;&gt;æˆ‘æ˜¯æ ‡é¢˜&lt;&#x2F;h1&gt;\n      &lt;p id&#x3D;&quot;content&quot;&gt;æˆ‘æ˜¯å†…å®¹&lt;&#x2F;p&gt;\n    &lt;&#x2F;div&gt;   \n  &lt;&#x2F;body&gt;\n&lt;&#x2F;html&gt;\nå¤åˆ¶ä»£ç \n\nç°åœ¨éœ€è¦è°ƒæ¢ title å’Œ content çš„ä½ç½®ï¼Œå¯ä»¥è€ƒè™‘ insertBefore æˆ–è€… appendChildï¼š\n&#x2F;&#x2F; è·å–çˆ¶å…ƒç´ \nvar container &#x3D; document.getElementById(&#39;container&#39;)   \n \n&#x2F;&#x2F; è·å–ä¸¤ä¸ªéœ€è¦è¢«äº¤æ¢çš„å…ƒç´ \nvar title &#x3D; document.getElementById(&#39;title&#39;)\nvar content &#x3D; document.getElementById(&#39;content&#39;)\n&#x2F;&#x2F; äº¤æ¢ä¸¤ä¸ªå…ƒç´ ï¼ŒæŠŠ content ç½®äº title å‰é¢\ncontainer.insertBefore(content, title)\nå¤åˆ¶ä»£ç \n\n21. use strictæ˜¯ä»€ä¹ˆæ„æ€ ? ä½¿ç”¨å®ƒåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿuse strict æ˜¯ä¸€ç§ ECMAscript5 æ·»åŠ çš„ï¼ˆä¸¥æ ¼æ¨¡å¼ï¼‰è¿è¡Œæ¨¡å¼ï¼Œè¿™ç§æ¨¡å¼ä½¿å¾— Javascript åœ¨æ›´ä¸¥æ ¼çš„æ¡ä»¶ä¸‹è¿è¡Œã€‚è®¾ç«‹ä¸¥æ ¼æ¨¡å¼çš„ç›®çš„å¦‚ä¸‹ï¼š\n\næ¶ˆé™¤ Javascript è¯­æ³•çš„ä¸åˆç†ã€ä¸ä¸¥è°¨ä¹‹å¤„ï¼Œå‡å°‘æ€ªå¼‚è¡Œä¸º;\næ¶ˆé™¤ä»£ç è¿è¡Œçš„ä¸å®‰å…¨ä¹‹å¤„ï¼Œä¿è¯ä»£ç è¿è¡Œçš„å®‰å…¨ï¼›\næé«˜ç¼–è¯‘å™¨æ•ˆç‡ï¼Œå¢åŠ è¿è¡Œé€Ÿåº¦ï¼›\nä¸ºæœªæ¥æ–°ç‰ˆæœ¬çš„ Javascript åšå¥½é“ºå«ã€‚\n\nåŒºåˆ«ï¼š\n\nç¦æ­¢ä½¿ç”¨ with è¯­å¥ã€‚\nç¦æ­¢ this å…³é”®å­—æŒ‡å‘å…¨å±€å¯¹è±¡ã€‚\nå¯¹è±¡ä¸èƒ½æœ‰é‡åçš„å±æ€§ã€‚\n\n22. å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å±äºæŸä¸ªç±»ï¼Ÿ\nç¬¬ä¸€ç§æ–¹å¼ï¼Œä½¿ç”¨ instanceof è¿ç®—ç¬¦æ¥åˆ¤æ–­æ„é€ å‡½æ•°çš„ prototype å±æ€§æ˜¯å¦å‡ºç°åœ¨å¯¹è±¡çš„åŸå‹é“¾ä¸­çš„ä»»ä½•ä½ç½®ã€‚\nç¬¬äºŒç§æ–¹å¼ï¼Œé€šè¿‡å¯¹è±¡çš„ constructor å±æ€§æ¥åˆ¤æ–­ï¼Œå¯¹è±¡çš„ constructor å±æ€§æŒ‡å‘è¯¥å¯¹è±¡çš„æ„é€ å‡½æ•°ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼ä¸æ˜¯å¾ˆå®‰å…¨ï¼Œå› ä¸º constructor å±æ€§å¯ä»¥è¢«æ”¹å†™ã€‚\nç¬¬ä¸‰ç§æ–¹å¼ï¼Œå¦‚æœéœ€è¦åˆ¤æ–­çš„æ˜¯æŸä¸ªå†…ç½®çš„å¼•ç”¨ç±»å‹çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ Object.prototype.toString() æ–¹æ³•æ¥æ‰“å°å¯¹è±¡çš„[[Class]] å±æ€§æ¥è¿›è¡Œåˆ¤æ–­ã€‚\n\n23. å¼ºç±»å‹è¯­è¨€å’Œå¼±ç±»å‹è¯­è¨€çš„åŒºåˆ«\nå¼ºç±»å‹è¯­è¨€ï¼šå¼ºç±»å‹è¯­è¨€ä¹Ÿç§°ä¸ºå¼ºç±»å‹å®šä¹‰è¯­è¨€ï¼Œæ˜¯ä¸€ç§æ€»æ˜¯å¼ºåˆ¶ç±»å‹å®šä¹‰çš„è¯­è¨€ï¼Œè¦æ±‚å˜é‡çš„ä½¿ç”¨è¦ä¸¥æ ¼ç¬¦åˆå®šä¹‰ï¼Œæ‰€æœ‰å˜é‡éƒ½å¿…é¡»å…ˆå®šä¹‰åä½¿ç”¨ã€‚Javaå’ŒC++ç­‰è¯­è¨€éƒ½æ˜¯å¼ºåˆ¶ç±»å‹å®šä¹‰çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€æ—¦ä¸€ä¸ªå˜é‡è¢«æŒ‡å®šäº†æŸä¸ªæ•°æ®ç±»å‹ï¼Œå¦‚æœä¸ç»è¿‡å¼ºåˆ¶è½¬æ¢ï¼Œé‚£ä¹ˆå®ƒå°±æ°¸è¿œæ˜¯è¿™ä¸ªæ•°æ®ç±»å‹äº†ã€‚ä¾‹å¦‚ä½ æœ‰ä¸€ä¸ªæ•´æ•°ï¼Œå¦‚æœä¸æ˜¾å¼åœ°è¿›è¡Œè½¬æ¢ï¼Œä½ ä¸èƒ½å°†å…¶è§†ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ã€‚\nå¼±ç±»å‹è¯­è¨€ï¼šå¼±ç±»å‹è¯­è¨€ä¹Ÿç§°ä¸ºå¼±ç±»å‹å®šä¹‰è¯­è¨€ï¼Œä¸å¼ºç±»å‹å®šä¹‰ç›¸åã€‚JavaScriptè¯­è¨€å°±å±äºå¼±ç±»å‹è¯­è¨€ã€‚ç®€å•ç†è§£å°±æ˜¯ä¸€ç§å˜é‡ç±»å‹å¯ä»¥è¢«å¿½ç•¥çš„è¯­è¨€ã€‚æ¯”å¦‚JavaScriptæ˜¯å¼±ç±»å‹å®šä¹‰çš„ï¼Œåœ¨JavaScriptä¸­å°±å¯ä»¥å°†å­—ç¬¦ä¸²â€™12â€™å’Œæ•´æ•°3è¿›è¡Œè¿æ¥å¾—åˆ°å­—ç¬¦ä¸²â€™123â€™ï¼Œåœ¨ç›¸åŠ çš„æ—¶å€™ä¼šè¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚\n\nä¸¤è€…å¯¹æ¯”ï¼šå¼ºç±»å‹è¯­è¨€åœ¨é€Ÿåº¦ä¸Šå¯èƒ½ç•¥é€Šè‰²äºå¼±ç±»å‹è¯­è¨€ï¼Œä½†æ˜¯å¼ºç±»å‹è¯­è¨€å¸¦æ¥çš„ä¸¥è°¨æ€§å¯ä»¥æœ‰æ•ˆåœ°å¸®åŠ©é¿å…è®¸å¤šé”™è¯¯ã€‚\n24. è§£é‡Šæ€§è¯­è¨€å’Œç¼–è¯‘å‹è¯­è¨€çš„åŒºåˆ«ï¼ˆ1ï¼‰è§£é‡Šå‹è¯­è¨€ ä½¿ç”¨ä¸“é—¨çš„è§£é‡Šå™¨å¯¹æºç¨‹åºé€è¡Œè§£é‡Šæˆç‰¹å®šå¹³å°çš„æœºå™¨ç å¹¶ç«‹å³æ‰§è¡Œã€‚æ˜¯ä»£ç åœ¨æ‰§è¡Œæ—¶æ‰è¢«è§£é‡Šå™¨ä¸€è¡Œè¡ŒåŠ¨æ€ç¿»è¯‘å’Œæ‰§è¡Œï¼Œè€Œä¸æ˜¯åœ¨æ‰§è¡Œä¹‹å‰å°±å®Œæˆç¿»è¯‘ã€‚è§£é‡Šå‹è¯­è¨€ä¸éœ€è¦äº‹å…ˆç¼–è¯‘ï¼Œå…¶ç›´æ¥å°†æºä»£ç è§£é‡Šæˆæœºå™¨ç å¹¶ç«‹å³æ‰§è¡Œï¼Œæ‰€ä»¥åªè¦æŸä¸€å¹³å°æä¾›äº†ç›¸åº”çš„è§£é‡Šå™¨å³å¯è¿è¡Œè¯¥ç¨‹åºã€‚å…¶ç‰¹ç‚¹æ€»ç»“å¦‚ä¸‹\n\nè§£é‡Šå‹è¯­è¨€æ¯æ¬¡è¿è¡Œéƒ½éœ€è¦å°†æºä»£ç è§£é‡Šç§°æœºå™¨ç å¹¶æ‰§è¡Œï¼Œæ•ˆç‡è¾ƒä½ï¼›\nåªè¦å¹³å°æä¾›ç›¸åº”çš„è§£é‡Šå™¨ï¼Œå°±å¯ä»¥è¿è¡Œæºä»£ç ï¼Œæ‰€ä»¥å¯ä»¥æ–¹ä¾¿æºç¨‹åºç§»æ¤ï¼›\nJavaScriptã€Pythonç­‰å±äºè§£é‡Šå‹è¯­è¨€ã€‚\n\nï¼ˆ2ï¼‰ç¼–è¯‘å‹è¯­è¨€ ä½¿ç”¨ä¸“é—¨çš„ç¼–è¯‘å™¨ï¼Œé’ˆå¯¹ç‰¹å®šçš„å¹³å°ï¼Œå°†é«˜çº§è¯­è¨€æºä»£ç ä¸€æ¬¡æ€§çš„ç¼–è¯‘æˆå¯è¢«è¯¥å¹³å°ç¡¬ä»¶æ‰§è¡Œçš„æœºå™¨ç ï¼Œå¹¶åŒ…è£…æˆè¯¥å¹³å°æ‰€èƒ½è¯†åˆ«çš„å¯æ‰§è¡Œæ€§ç¨‹åºçš„æ ¼å¼ã€‚åœ¨ç¼–è¯‘å‹è¯­è¨€å†™çš„ç¨‹åºæ‰§è¡Œä¹‹å‰ï¼Œéœ€è¦ä¸€ä¸ªä¸“é—¨çš„ç¼–è¯‘è¿‡ç¨‹ï¼ŒæŠŠæºä»£ç ç¼–è¯‘æˆæœºå™¨è¯­è¨€çš„æ–‡ä»¶ï¼Œå¦‚exeæ ¼å¼çš„æ–‡ä»¶ï¼Œä»¥åè¦å†è¿è¡Œæ—¶ï¼Œç›´æ¥ä½¿ç”¨ç¼–è¯‘ç»“æœå³å¯ï¼Œå¦‚ç›´æ¥è¿è¡Œexeæ–‡ä»¶ã€‚å› ä¸ºåªéœ€ç¼–è¯‘ä¸€æ¬¡ï¼Œä»¥åè¿è¡Œæ—¶ä¸éœ€è¦ç¼–è¯‘ï¼Œæ‰€ä»¥ç¼–è¯‘å‹è¯­è¨€æ‰§è¡Œæ•ˆç‡é«˜ã€‚å…¶ç‰¹ç‚¹æ€»ç»“å¦‚ä¸‹ï¼š\n\nä¸€æ¬¡æ€§çš„ç¼–è¯‘æˆå¹³å°ç›¸å…³çš„æœºå™¨è¯­è¨€æ–‡ä»¶ï¼Œè¿è¡Œæ—¶è„±ç¦»å¼€å‘ç¯å¢ƒï¼Œè¿è¡Œæ•ˆç‡é«˜ï¼›\nä¸ç‰¹å®šå¹³å°ç›¸å…³ï¼Œä¸€èˆ¬æ— æ³•ç§»æ¤åˆ°å…¶ä»–å¹³å°ï¼›\nCã€C++ç­‰å±äºç¼–è¯‘å‹è¯­è¨€ã€‚\n\nä¸¤è€…ä¸»è¦åŒºåˆ«åœ¨äºï¼š å‰è€…æºç¨‹åºç¼–è¯‘åå³å¯åœ¨è¯¥å¹³å°è¿è¡Œï¼Œåè€…æ˜¯åœ¨è¿è¡ŒæœŸé—´æ‰ç¼–è¯‘ã€‚æ‰€ä»¥å‰è€…è¿è¡Œé€Ÿåº¦å¿«ï¼Œåè€…è·¨å¹³å°æ€§å¥½ã€‚\n25. forâ€¦inå’Œforâ€¦ofçš„åŒºåˆ«forâ€¦of æ˜¯ES6æ–°å¢çš„éå†æ–¹å¼ï¼Œå…è®¸éå†ä¸€ä¸ªå«æœ‰iteratoræ¥å£çš„æ•°æ®ç»“æ„ï¼ˆæ•°ç»„ã€å¯¹è±¡ç­‰ï¼‰å¹¶ä¸”è¿”å›å„é¡¹çš„å€¼ï¼Œå’ŒES3ä¸­çš„forâ€¦inçš„åŒºåˆ«å¦‚ä¸‹\n\nforâ€¦of éå†è·å–çš„æ˜¯å¯¹è±¡çš„é”®å€¼ï¼Œforâ€¦in è·å–çš„æ˜¯å¯¹è±¡çš„é”®åï¼›\nforâ€¦ in ä¼šéå†å¯¹è±¡çš„æ•´ä¸ªåŸå‹é“¾ï¼Œæ€§èƒ½éå¸¸å·®ä¸æ¨èä½¿ç”¨ï¼Œè€Œ for â€¦ of åªéå†å½“å‰å¯¹è±¡ä¸ä¼šéå†åŸå‹é“¾ï¼›\nå¯¹äºæ•°ç»„çš„éå†ï¼Œforâ€¦in ä¼šè¿”å›æ•°ç»„ä¸­æ‰€æœ‰å¯æšä¸¾çš„å±æ€§(åŒ…æ‹¬åŸå‹é“¾ä¸Šå¯æšä¸¾çš„å±æ€§)ï¼Œforâ€¦of åªè¿”å›æ•°ç»„çš„ä¸‹æ ‡å¯¹åº”çš„å±æ€§å€¼ï¼›\n\næ€»ç»“ï¼š forâ€¦in å¾ªç¯ä¸»è¦æ˜¯ä¸ºäº†éå†å¯¹è±¡è€Œç”Ÿï¼Œä¸é€‚ç”¨äºéå†æ•°ç»„ï¼›forâ€¦of å¾ªç¯å¯ä»¥ç”¨æ¥éå†æ•°ç»„ã€ç±»æ•°ç»„å¯¹è±¡ï¼Œå­—ç¬¦ä¸²ã€Setã€Map ä»¥åŠ Generator å¯¹è±¡ã€‚\n26. å¦‚ä½•ä½¿ç”¨forâ€¦oféå†å¯¹è±¡forâ€¦ofæ˜¯ä½œä¸ºES6æ–°å¢çš„éå†æ–¹å¼ï¼Œå…è®¸éå†ä¸€ä¸ªå«æœ‰iteratoræ¥å£çš„æ•°æ®ç»“æ„ï¼ˆæ•°ç»„ã€å¯¹è±¡ç­‰ï¼‰å¹¶ä¸”è¿”å›å„é¡¹çš„å€¼ï¼Œæ™®é€šçš„å¯¹è±¡ç”¨for..oféå†æ˜¯ä¼šæŠ¥é”™çš„ã€‚\nå¦‚æœéœ€è¦éå†çš„å¯¹è±¡æ˜¯ç±»æ•°ç»„å¯¹è±¡ï¼Œç”¨Array.fromè½¬æˆæ•°ç»„å³å¯ã€‚\nvar obj &#x3D; &#123;\n    0:&#39;one&#39;,\n    1:&#39;two&#39;,\n    length: 2\n&#125;;\nobj &#x3D; Array.from(obj);\nfor(var k of obj)&#123;\n    console.log(k)\n&#125;\nå¤åˆ¶ä»£ç \n\nå¦‚æœä¸æ˜¯ç±»æ•°ç»„å¯¹è±¡ï¼Œå°±ç»™å¯¹è±¡æ·»åŠ ä¸€ä¸ª[Symbol.iterator]å±æ€§ï¼Œå¹¶æŒ‡å‘ä¸€ä¸ªè¿­ä»£å™¨å³å¯ã€‚\n&#x2F;&#x2F;æ–¹æ³•ä¸€ï¼š\nvar obj &#x3D; &#123;\n    a:1,\n    b:2,\n    c:3\n&#125;;\n\nobj[Symbol.iterator] &#x3D; function()&#123;\n\tvar keys &#x3D; Object.keys(this);\n\tvar count &#x3D; 0;\n\treturn &#123;\n\t\tnext()&#123;\n\t\t\tif(count&lt;keys.length)&#123;\n\t\t\t\treturn &#123;value: obj[keys[count++]],done:false&#125;;\n\t\t\t&#125;else&#123;\n\t\t\t\treturn &#123;value:undefined,done:true&#125;;\n\t\t\t&#125;\n\t\t&#125;\n\t&#125;\n&#125;;\n\nfor(var k of obj)&#123;\n\tconsole.log(k);\n&#125;\n\n\n&#x2F;&#x2F; æ–¹æ³•äºŒ\nvar obj &#x3D; &#123;\n    a:1,\n    b:2,\n    c:3\n&#125;;\nobj[Symbol.iterator] &#x3D; function*()&#123;\n    var keys &#x3D; Object.keys(obj);\n    for(var k of keys)&#123;\n        yield [k,obj[k]]\n    &#125;\n&#125;;\n\nfor(var [k,v] of obj)&#123;\n    console.log(k,v);\n&#125;\n\nå¤åˆ¶ä»£ç \n\n27. ajaxã€axiosã€fetchçš„åŒºåˆ«ï¼ˆ1ï¼‰AJAX Ajax å³â€œAsynchronousJavascriptAndXMLâ€ï¼ˆå¼‚æ­¥ JavaScript å’Œ XMLï¼‰ï¼Œæ˜¯æŒ‡ä¸€ç§åˆ›å»ºäº¤äº’å¼ç½‘é¡µåº”ç”¨çš„ç½‘é¡µå¼€å‘æŠ€æœ¯ã€‚å®ƒæ˜¯ä¸€ç§åœ¨æ— éœ€é‡æ–°åŠ è½½æ•´ä¸ªç½‘é¡µçš„æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿæ›´æ–°éƒ¨åˆ†ç½‘é¡µçš„æŠ€æœ¯ã€‚é€šè¿‡åœ¨åå°ä¸æœåŠ¡å™¨è¿›è¡Œå°‘é‡æ•°æ®äº¤æ¢ï¼ŒAjax å¯ä»¥ä½¿ç½‘é¡µå®ç°å¼‚æ­¥æ›´æ–°ã€‚è¿™æ„å‘³ç€å¯ä»¥åœ¨ä¸é‡æ–°åŠ è½½æ•´ä¸ªç½‘é¡µçš„æƒ…å†µä¸‹ï¼Œå¯¹ç½‘é¡µçš„æŸéƒ¨åˆ†è¿›è¡Œæ›´æ–°ã€‚ä¼ ç»Ÿçš„ç½‘é¡µï¼ˆä¸ä½¿ç”¨ Ajaxï¼‰å¦‚æœéœ€è¦æ›´æ–°å†…å®¹ï¼Œå¿…é¡»é‡è½½æ•´ä¸ªç½‘é¡µé¡µé¢ã€‚å…¶ç¼ºç‚¹å¦‚ä¸‹ï¼š\n\næœ¬èº«æ˜¯é’ˆå¯¹MVCç¼–ç¨‹ï¼Œä¸ç¬¦åˆå‰ç«¯MVVMçš„æµªæ½®\nåŸºäºåŸç”ŸXHRå¼€å‘ï¼ŒXHRæœ¬èº«çš„æ¶æ„ä¸æ¸…æ™°\nä¸ç¬¦åˆå…³æ³¨åˆ†ç¦»ï¼ˆSeparation of Concernsï¼‰çš„åŸåˆ™\né…ç½®å’Œè°ƒç”¨æ–¹å¼éå¸¸æ··ä¹±ï¼Œè€Œä¸”åŸºäºäº‹ä»¶çš„å¼‚æ­¥æ¨¡å‹ä¸å‹å¥½ã€‚\n\nï¼ˆ2ï¼‰Fetch fetchå·ç§°æ˜¯AJAXçš„æ›¿ä»£å“ï¼Œæ˜¯åœ¨ES6å‡ºç°çš„ï¼Œä½¿ç”¨äº†ES6ä¸­çš„promiseå¯¹è±¡ã€‚Fetchæ˜¯åŸºäºpromiseè®¾è®¡çš„ã€‚Fetchçš„ä»£ç ç»“æ„æ¯”èµ·ajaxç®€å•å¤šã€‚fetchä¸æ˜¯ajaxçš„è¿›ä¸€æ­¥å°è£…ï¼Œè€Œæ˜¯åŸç”Ÿjsï¼Œæ²¡æœ‰ä½¿ç”¨XMLHttpRequestå¯¹è±¡ã€‚\nfetchçš„ä¼˜ç‚¹ï¼š\n\nè¯­æ³•ç®€æ´ï¼Œæ›´åŠ è¯­ä¹‰åŒ–\nåŸºäºæ ‡å‡† Promise å®ç°ï¼Œæ”¯æŒ async&#x2F;await\næ›´åŠ åº•å±‚ï¼Œæä¾›çš„APIä¸°å¯Œï¼ˆrequest, responseï¼‰\nè„±ç¦»äº†XHRï¼Œæ˜¯ESè§„èŒƒé‡Œæ–°çš„å®ç°æ–¹å¼\n\nfetchçš„ç¼ºç‚¹ï¼š\n\nfetchåªå¯¹ç½‘ç»œè¯·æ±‚æŠ¥é”™ï¼Œå¯¹400ï¼Œ500éƒ½å½“åšæˆåŠŸçš„è¯·æ±‚ï¼ŒæœåŠ¡å™¨è¿”å› 400ï¼Œ500 é”™è¯¯ç æ—¶å¹¶ä¸ä¼š rejectï¼Œåªæœ‰ç½‘ç»œé”™è¯¯è¿™äº›å¯¼è‡´è¯·æ±‚ä¸èƒ½å®Œæˆæ—¶ï¼Œfetch æ‰ä¼šè¢« rejectã€‚\nfetché»˜è®¤ä¸ä¼šå¸¦cookieï¼Œéœ€è¦æ·»åŠ é…ç½®é¡¹ï¼š fetch(url, {credentials: â€˜includeâ€™})\nfetchä¸æ”¯æŒabortï¼Œä¸æ”¯æŒè¶…æ—¶æ§åˆ¶ï¼Œä½¿ç”¨setTimeoutåŠPromise.rejectçš„å®ç°çš„è¶…æ—¶æ§åˆ¶å¹¶ä¸èƒ½é˜»æ­¢è¯·æ±‚è¿‡ç¨‹ç»§ç»­åœ¨åå°è¿è¡Œï¼Œé€ æˆäº†æµé‡çš„æµªè´¹\nfetchæ²¡æœ‰åŠæ³•åŸç”Ÿç›‘æµ‹è¯·æ±‚çš„è¿›åº¦ï¼Œè€ŒXHRå¯ä»¥\n\nï¼ˆ3ï¼‰Axios Axios æ˜¯ä¸€ç§åŸºäºPromiseå°è£…çš„HTTPå®¢æˆ·ç«¯ï¼Œå…¶ç‰¹ç‚¹å¦‚ä¸‹ï¼š\n\næµè§ˆå™¨ç«¯å‘èµ·XMLHttpRequestsè¯·æ±‚\nnodeç«¯å‘èµ·httpè¯·æ±‚\næ”¯æŒPromise API\nç›‘å¬è¯·æ±‚å’Œè¿”å›\nå¯¹è¯·æ±‚å’Œè¿”å›è¿›è¡Œè½¬åŒ–\nå–æ¶ˆè¯·æ±‚\nè‡ªåŠ¨è½¬æ¢jsonæ•°æ®\nå®¢æˆ·ç«¯æ”¯æŒæŠµå¾¡XSRFæ”»å‡»\n\n28. æ•°ç»„çš„éå†æ–¹æ³•æœ‰å“ªäº›\n\n\næ–¹æ³•\næ˜¯å¦æ”¹å˜åŸæ•°ç»„\nç‰¹ç‚¹\n\n\n\nforEach()\nå¦\næ•°ç»„æ–¹æ³•ï¼Œä¸æ”¹å˜åŸæ•°ç»„ï¼Œæ²¡æœ‰è¿”å›å€¼\n\n\nmap()\nå¦\næ•°ç»„æ–¹æ³•ï¼Œä¸æ”¹å˜åŸæ•°ç»„ï¼Œæœ‰è¿”å›å€¼ï¼Œå¯é“¾å¼è°ƒç”¨\n\n\nfilter()\nå¦\næ•°ç»„æ–¹æ³•ï¼Œè¿‡æ»¤æ•°ç»„ï¼Œè¿”å›åŒ…å«ç¬¦åˆæ¡ä»¶çš„å…ƒç´ çš„æ•°ç»„ï¼Œå¯é“¾å¼è°ƒç”¨\n\n\nforâ€¦of\nå¦\nforâ€¦oféå†å…·æœ‰Iteratorè¿­ä»£å™¨çš„å¯¹è±¡çš„å±æ€§ï¼Œè¿”å›çš„æ˜¯æ•°ç»„çš„å…ƒç´ ã€å¯¹è±¡çš„å±æ€§å€¼ï¼Œä¸èƒ½éå†æ™®é€šçš„objå¯¹è±¡ï¼Œå°†å¼‚æ­¥å¾ªç¯å˜æˆåŒæ­¥å¾ªç¯\n\n\nevery() å’Œ some()\nå¦\næ•°ç»„æ–¹æ³•ï¼Œsome()åªè¦æœ‰ä¸€ä¸ªæ˜¯trueï¼Œä¾¿è¿”å›trueï¼›è€Œevery()åªè¦æœ‰ä¸€ä¸ªæ˜¯falseï¼Œä¾¿è¿”å›false.\n\n\nfind() å’Œ findIndex()\nå¦\næ•°ç»„æ–¹æ³•ï¼Œfind()è¿”å›çš„æ˜¯ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„å€¼ï¼›findIndex()è¿”å›çš„æ˜¯ç¬¬ä¸€ä¸ªè¿”å›æ¡ä»¶çš„å€¼çš„ç´¢å¼•å€¼\n\n\nreduce() å’Œ reduceRight()\nå¦\næ•°ç»„æ–¹æ³•ï¼Œreduce()å¯¹æ•°ç»„æ­£åºæ“ä½œï¼›reduceRight()å¯¹æ•°ç»„é€†åºæ“ä½œ\n\n\néå†æ–¹æ³•çš„è¯¦ç»†è§£é‡Šï¼šã€Šç»†æ•°JavaScriptä¸­é‚£äº›éå†å’Œå¾ªç¯ã€‹\n29. forEachå’Œmapæ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«è¿™æ–¹æ³•éƒ½æ˜¯ç”¨æ¥éå†æ•°ç»„çš„ï¼Œä¸¤è€…åŒºåˆ«å¦‚ä¸‹ï¼š\n\nforEach()æ–¹æ³•ä¼šé’ˆå¯¹æ¯ä¸€ä¸ªå…ƒç´ æ‰§è¡Œæä¾›çš„å‡½æ•°ï¼Œå¯¹æ•°æ®çš„æ“ä½œä¼šæ”¹å˜åŸæ•°ç»„ï¼Œè¯¥æ–¹æ³•æ²¡æœ‰è¿”å›å€¼ï¼›\nmap()æ–¹æ³•ä¸ä¼šæ”¹å˜åŸæ•°ç»„çš„å€¼ï¼Œè¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼Œæ–°æ•°ç»„ä¸­çš„å€¼ä¸ºåŸæ•°ç»„è°ƒç”¨å‡½æ•°å¤„ç†ä¹‹åçš„å€¼ï¼›\n\nå››ã€åŸå‹ä¸åŸå‹é“¾1. å¯¹åŸå‹ã€åŸå‹é“¾çš„ç†è§£åœ¨JavaScriptä¸­æ˜¯ä½¿ç”¨æ„é€ å‡½æ•°æ¥æ–°å»ºä¸€ä¸ªå¯¹è±¡çš„ï¼Œæ¯ä¸€ä¸ªæ„é€ å‡½æ•°çš„å†…éƒ¨éƒ½æœ‰ä¸€ä¸ª prototype å±æ€§ï¼Œå®ƒçš„å±æ€§å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡åŒ…å«äº†å¯ä»¥ç”±è¯¥æ„é€ å‡½æ•°çš„æ‰€æœ‰å®ä¾‹å…±äº«çš„å±æ€§å’Œæ–¹æ³•ã€‚å½“ä½¿ç”¨æ„é€ å‡½æ•°æ–°å»ºä¸€ä¸ªå¯¹è±¡åï¼Œåœ¨è¿™ä¸ªå¯¹è±¡çš„å†…éƒ¨å°†åŒ…å«ä¸€ä¸ªæŒ‡é’ˆï¼Œè¿™ä¸ªæŒ‡é’ˆæŒ‡å‘æ„é€ å‡½æ•°çš„ prototype å±æ€§å¯¹åº”çš„å€¼ï¼Œåœ¨ ES5 ä¸­è¿™ä¸ªæŒ‡é’ˆè¢«ç§°ä¸ºå¯¹è±¡çš„åŸå‹ã€‚ä¸€èˆ¬æ¥è¯´ä¸åº”è¯¥èƒ½å¤Ÿè·å–åˆ°è¿™ä¸ªå€¼çš„ï¼Œä½†æ˜¯ç°åœ¨æµè§ˆå™¨ä¸­éƒ½å®ç°äº† proto å±æ€§æ¥è®¿é—®è¿™ä¸ªå±æ€§ï¼Œä½†æ˜¯æœ€å¥½ä¸è¦ä½¿ç”¨è¿™ä¸ªå±æ€§ï¼Œå› ä¸ºå®ƒä¸æ˜¯è§„èŒƒä¸­è§„å®šçš„ã€‚ES5 ä¸­æ–°å¢äº†ä¸€ä¸ª Object.getPrototypeOf() æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªæ–¹æ³•æ¥è·å–å¯¹è±¡çš„åŸå‹ã€‚\nå½“è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼Œå¦‚æœè¿™ä¸ªå¯¹è±¡å†…éƒ¨ä¸å­˜åœ¨è¿™ä¸ªå±æ€§ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šå»å®ƒçš„åŸå‹å¯¹è±¡é‡Œæ‰¾è¿™ä¸ªå±æ€§ï¼Œè¿™ä¸ªåŸå‹å¯¹è±¡åˆä¼šæœ‰è‡ªå·±çš„åŸå‹ï¼Œäºæ˜¯å°±è¿™æ ·ä¸€ç›´æ‰¾ä¸‹å»ï¼Œä¹Ÿå°±æ˜¯åŸå‹é“¾çš„æ¦‚å¿µã€‚åŸå‹é“¾çš„å°½å¤´ä¸€èˆ¬æ¥è¯´éƒ½æ˜¯ Object.prototype æ‰€ä»¥è¿™å°±æ˜¯æ–°å»ºçš„å¯¹è±¡ä¸ºä»€ä¹ˆèƒ½å¤Ÿä½¿ç”¨ toString() ç­‰æ–¹æ³•çš„åŸå› ã€‚\nç‰¹ç‚¹ï¼š JavaScript å¯¹è±¡æ˜¯é€šè¿‡å¼•ç”¨æ¥ä¼ é€’çš„ï¼Œåˆ›å»ºçš„æ¯ä¸ªæ–°å¯¹è±¡å®ä½“ä¸­å¹¶æ²¡æœ‰ä¸€ä»½å±äºè‡ªå·±çš„åŸå‹å‰¯æœ¬ã€‚å½“ä¿®æ”¹åŸå‹æ—¶ï¼Œä¸ä¹‹ç›¸å…³çš„å¯¹è±¡ä¹Ÿä¼šç»§æ‰¿è¿™ä¸€æ”¹å˜ã€‚ \n2. åŸå‹ä¿®æ”¹ã€é‡å†™function Person(name) &#123;\n    this.name &#x3D; name\n&#125;\n&#x2F;&#x2F; ä¿®æ”¹åŸå‹\nPerson.prototype.getName &#x3D; function() &#123;&#125;\nvar p &#x3D; new Person(&#39;hello&#39;)\nconsole.log(p.__proto__ &#x3D;&#x3D;&#x3D; Person.prototype) &#x2F;&#x2F; true\nconsole.log(p.__proto__ &#x3D;&#x3D;&#x3D; p.constructor.prototype) &#x2F;&#x2F; true\n&#x2F;&#x2F; é‡å†™åŸå‹\nPerson.prototype &#x3D; &#123;\n    getName: function() &#123;&#125;\n&#125;\nvar p &#x3D; new Person(&#39;hello&#39;)\nconsole.log(p.__proto__ &#x3D;&#x3D;&#x3D; Person.prototype)        &#x2F;&#x2F; true\nconsole.log(p.__proto__ &#x3D;&#x3D;&#x3D; p.constructor.prototype) &#x2F;&#x2F; false\nå¤åˆ¶ä»£ç \n\nå¯ä»¥çœ‹åˆ°ä¿®æ”¹åŸå‹çš„æ—¶å€™pçš„æ„é€ å‡½æ•°ä¸æ˜¯æŒ‡å‘Personäº†ï¼Œå› ä¸ºç›´æ¥ç»™Personçš„åŸå‹å¯¹è±¡ç›´æ¥ç”¨å¯¹è±¡èµ‹å€¼æ—¶ï¼Œå®ƒçš„æ„é€ å‡½æ•°æŒ‡å‘çš„äº†æ ¹æ„é€ å‡½æ•°Objectï¼Œæ‰€ä»¥è¿™æ—¶å€™p.constructor === Object ï¼Œè€Œä¸æ˜¯p.constructor === Personã€‚è¦æƒ³æˆç«‹ï¼Œå°±è¦ç”¨constructoræŒ‡å›æ¥ï¼š\nPerson.prototype &#x3D; &#123;\n    getName: function() &#123;&#125;\n&#125;\nvar p &#x3D; new Person(&#39;hello&#39;)\np.constructor &#x3D; Person\nconsole.log(p.__proto__ &#x3D;&#x3D;&#x3D; Person.prototype)        &#x2F;&#x2F; true\nconsole.log(p.__proto__ &#x3D;&#x3D;&#x3D; p.constructor.prototype) &#x2F;&#x2F; true\n\nå¤åˆ¶ä»£ç \n\n3. åŸå‹é“¾æŒ‡å‘p.__proto__  &#x2F;&#x2F; Person.prototype\nPerson.prototype.__proto__  &#x2F;&#x2F; Object.prototype\np.__proto__.__proto__ &#x2F;&#x2F;Object.prototype\np.__proto__.constructor.prototype.__proto__ &#x2F;&#x2F; Object.prototype\nPerson.prototype.constructor.prototype.__proto__ &#x2F;&#x2F; Object.prototype\np1.__proto__.constructor &#x2F;&#x2F; Person\nPerson.prototype.constructor  &#x2F;&#x2F; Person\nå¤åˆ¶ä»£ç \n\n4. åŸå‹é“¾çš„ç»ˆç‚¹æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•æ‰“å°å‡ºåŸå‹é“¾çš„ç»ˆç‚¹ï¼Ÿç”±äºObjectæ˜¯æ„é€ å‡½æ•°ï¼ŒåŸå‹é“¾ç»ˆç‚¹æ˜¯Object.prototype.__proto__ï¼Œè€ŒObject.prototype.__proto__=== null // trueï¼Œæ‰€ä»¥ï¼ŒåŸå‹é“¾çš„ç»ˆç‚¹æ˜¯nullã€‚åŸå‹é“¾ä¸Šçš„æ‰€æœ‰åŸå‹éƒ½æ˜¯å¯¹è±¡ï¼Œæ‰€æœ‰çš„å¯¹è±¡æœ€ç»ˆéƒ½æ˜¯ç”±Objectæ„é€ çš„ï¼Œè€ŒObject.prototypeçš„ä¸‹ä¸€çº§æ˜¯Object.prototype.__proto__ã€‚ \n5. å¦‚ä½•è·å¾—å¯¹è±¡éåŸå‹é“¾ä¸Šçš„å±æ€§ï¼Ÿä½¿ç”¨åhasOwnProperty()æ–¹æ³•æ¥åˆ¤æ–­å±æ€§æ˜¯å¦å±äºåŸå‹é“¾çš„å±æ€§ï¼š\nfunction iterate(obj)&#123;\n   var res&#x3D;[];\n   for(var key in obj)&#123;\n        if(obj.hasOwnProperty(key))\n           res.push(key+&#39;: &#39;+obj[key]);\n   &#125;\n   return res;\n&#125; \nå¤åˆ¶ä»£ç \n\näº”ã€æ‰§è¡Œä¸Šä¸‹æ–‡&#x2F;ä½œç”¨åŸŸé“¾&#x2F;é—­åŒ…1. å¯¹é—­åŒ…çš„ç†è§£é—­åŒ…æ˜¯æŒ‡æœ‰æƒè®¿é—®å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­å˜é‡çš„å‡½æ•°ï¼Œåˆ›å»ºé—­åŒ…çš„æœ€å¸¸è§çš„æ–¹å¼å°±æ˜¯åœ¨ä¸€ä¸ªå‡½æ•°å†…åˆ›å»ºå¦ä¸€ä¸ªå‡½æ•°ï¼Œåˆ›å»ºçš„å‡½æ•°å¯ä»¥è®¿é—®åˆ°å½“å‰å‡½æ•°çš„å±€éƒ¨å˜é‡ã€‚\né—­åŒ…æœ‰ä¸¤ä¸ªå¸¸ç”¨çš„ç”¨é€”ï¼›\n\né—­åŒ…çš„ç¬¬ä¸€ä¸ªç”¨é€”æ˜¯ä½¿æˆ‘ä»¬åœ¨å‡½æ•°å¤–éƒ¨èƒ½å¤Ÿè®¿é—®åˆ°å‡½æ•°å†…éƒ¨çš„å˜é‡ã€‚é€šè¿‡ä½¿ç”¨é—­åŒ…ï¼Œå¯ä»¥é€šè¿‡åœ¨å¤–éƒ¨è°ƒç”¨é—­åŒ…å‡½æ•°ï¼Œä»è€Œåœ¨å¤–éƒ¨è®¿é—®åˆ°å‡½æ•°å†…éƒ¨çš„å˜é‡ï¼Œå¯ä»¥ä½¿ç”¨è¿™ç§æ–¹æ³•æ¥åˆ›å»ºç§æœ‰å˜é‡ã€‚\né—­åŒ…çš„å¦ä¸€ä¸ªç”¨é€”æ˜¯ä½¿å·²ç»è¿è¡Œç»“æŸçš„å‡½æ•°ä¸Šä¸‹æ–‡ä¸­çš„å˜é‡å¯¹è±¡ç»§ç»­ç•™åœ¨å†…å­˜ä¸­ï¼Œå› ä¸ºé—­åŒ…å‡½æ•°ä¿ç•™äº†è¿™ä¸ªå˜é‡å¯¹è±¡çš„å¼•ç”¨ï¼Œæ‰€ä»¥è¿™ä¸ªå˜é‡å¯¹è±¡ä¸ä¼šè¢«å›æ”¶ã€‚\n\næ¯”å¦‚ï¼Œå‡½æ•° A å†…éƒ¨æœ‰ä¸€ä¸ªå‡½æ•° Bï¼Œå‡½æ•° B å¯ä»¥è®¿é—®åˆ°å‡½æ•° A ä¸­çš„å˜é‡ï¼Œé‚£ä¹ˆå‡½æ•° B å°±æ˜¯é—­åŒ…ã€‚\nfunction A() &#123;\n  let a &#x3D; 1\n  window.B &#x3D; function () &#123;\n      console.log(a)\n  &#125;\n&#125;\nA()\nB() &#x2F;&#x2F; 1\nå¤åˆ¶ä»£ç \n\nåœ¨ JS ä¸­ï¼Œé—­åŒ…å­˜åœ¨çš„æ„ä¹‰å°±æ˜¯è®©æˆ‘ä»¬å¯ä»¥é—´æ¥è®¿é—®å‡½æ•°å†…éƒ¨çš„å˜é‡ã€‚ç»å…¸é¢è¯•é¢˜ï¼šå¾ªç¯ä¸­ä½¿ç”¨é—­åŒ…è§£å†³ var å®šä¹‰å‡½æ•°çš„é—®é¢˜\nfor (var i &#x3D; 1; i &lt;&#x3D; 5; i++) &#123;\n  setTimeout(function timer() &#123;\n    console.log(i)\n  &#125;, i * 1000)\n&#125;\nå¤åˆ¶ä»£ç \n\né¦–å…ˆå› ä¸º setTimeout æ˜¯ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œæ‰€ä»¥ä¼šå…ˆæŠŠå¾ªç¯å…¨éƒ¨æ‰§è¡Œå®Œæ¯•ï¼Œè¿™æ—¶å€™ i å°±æ˜¯ 6 äº†ï¼Œæ‰€ä»¥ä¼šè¾“å‡ºä¸€å † 6ã€‚è§£å†³åŠæ³•æœ‰ä¸‰ç§ï¼š\n\nç¬¬ä¸€ç§æ˜¯ä½¿ç”¨é—­åŒ…çš„æ–¹å¼\n\nfor (var i &#x3D; 1; i &lt;&#x3D; 5; i++) &#123;  ;(function(j) &#123;    setTimeout(function timer() &#123;      console.log(j)    &#125;, j * 1000)  &#125;)(i)&#125;\nå¤åˆ¶ä»£ç \n\nåœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œé¦–å…ˆä½¿ç”¨äº†ç«‹å³æ‰§è¡Œå‡½æ•°å°† i ä¼ å…¥å‡½æ•°å†…éƒ¨ï¼Œè¿™ä¸ªæ—¶å€™å€¼å°±è¢«å›ºå®šåœ¨äº†å‚æ•° j ä¸Šé¢ä¸ä¼šæ”¹å˜ï¼Œå½“ä¸‹æ¬¡æ‰§è¡Œ timer è¿™ä¸ªé—­åŒ…çš„æ—¶å€™ï¼Œå°±å¯ä»¥ä½¿ç”¨å¤–éƒ¨å‡½æ•°çš„å˜é‡ jï¼Œä»è€Œè¾¾åˆ°ç›®çš„ã€‚\n\nç¬¬äºŒç§å°±æ˜¯ä½¿ç”¨ setTimeout çš„ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œè¿™ä¸ªå‚æ•°ä¼šè¢«å½“æˆ timer å‡½æ•°çš„å‚æ•°ä¼ å…¥ã€‚\n\nfor (var i &#x3D; 1; i &lt;&#x3D; 5; i++) &#123;\n  setTimeout(\n    function timer(j) &#123;\n      console.log(j)\n    &#125;,\n    i * 1000,\n    i\n  )\n&#125;\nå¤åˆ¶ä»£ç \n\n\nç¬¬ä¸‰ç§å°±æ˜¯ä½¿ç”¨ let å®šä¹‰ i äº†æ¥è§£å†³é—®é¢˜äº†ï¼Œè¿™ä¸ªä¹Ÿæ˜¯æœ€ä¸ºæ¨èçš„æ–¹å¼\n\nfor (let i &#x3D; 1; i &lt;&#x3D; 5; i++) &#123;\n  setTimeout(function timer() &#123;\n    console.log(i)\n  &#125;, i * 1000)\n&#125;\nå¤åˆ¶ä»£ç \n\n2. å¯¹ä½œç”¨åŸŸã€ä½œç”¨åŸŸé“¾çš„ç†è§£1ï¼‰å…¨å±€ä½œç”¨åŸŸå’Œå‡½æ•°ä½œç”¨åŸŸï¼ˆ1ï¼‰å…¨å±€ä½œç”¨åŸŸ\n\næœ€å¤–å±‚å‡½æ•°å’Œæœ€å¤–å±‚å‡½æ•°å¤–é¢å®šä¹‰çš„å˜é‡æ‹¥æœ‰å…¨å±€ä½œç”¨åŸŸ\næ‰€æœ‰æœªå®šä¹‰ç›´æ¥èµ‹å€¼çš„å˜é‡è‡ªåŠ¨å£°æ˜ä¸ºå…¨å±€ä½œç”¨åŸŸ\næ‰€æœ‰windowå¯¹è±¡çš„å±æ€§æ‹¥æœ‰å…¨å±€ä½œç”¨åŸŸ\nå…¨å±€ä½œç”¨åŸŸæœ‰å¾ˆå¤§çš„å¼Šç«¯ï¼Œè¿‡å¤šçš„å…¨å±€ä½œç”¨åŸŸå˜é‡ä¼šæ±¡æŸ“å…¨å±€å‘½åç©ºé—´ï¼Œå®¹æ˜“å¼•èµ·å‘½åå†²çªã€‚\n\nï¼ˆ2ï¼‰å‡½æ•°ä½œç”¨åŸŸ\n\nå‡½æ•°ä½œç”¨åŸŸå£°æ˜åœ¨å‡½æ•°å†…éƒ¨çš„å˜é›¶ï¼Œä¸€èˆ¬åªæœ‰å›ºå®šçš„ä»£ç ç‰‡æ®µå¯ä»¥è®¿é—®åˆ°\nä½œç”¨åŸŸæ˜¯åˆ†å±‚çš„ï¼Œå†…å±‚ä½œç”¨åŸŸå¯ä»¥è®¿é—®å¤–å±‚ä½œç”¨åŸŸï¼Œåä¹‹ä¸è¡Œ\n\n2ï¼‰å—çº§ä½œç”¨åŸŸ\nä½¿ç”¨ES6ä¸­æ–°å¢çš„letå’ŒconstæŒ‡ä»¤å¯ä»¥å£°æ˜å—çº§ä½œç”¨åŸŸï¼Œå—çº§ä½œç”¨åŸŸå¯ä»¥åœ¨å‡½æ•°ä¸­åˆ›å»ºä¹Ÿå¯ä»¥åœ¨ä¸€ä¸ªä»£ç å—ä¸­çš„åˆ›å»ºï¼ˆç”±&#123; &#125;åŒ…è£¹çš„ä»£ç ç‰‡æ®µï¼‰\nletå’Œconstå£°æ˜çš„å˜é‡ä¸ä¼šæœ‰å˜é‡æå‡ï¼Œä¹Ÿä¸å¯ä»¥é‡å¤å£°æ˜\nåœ¨å¾ªç¯ä¸­æ¯”è¾ƒé€‚åˆç»‘å®šå—çº§ä½œç”¨åŸŸï¼Œè¿™æ ·å°±å¯ä»¥æŠŠå£°æ˜çš„è®¡æ•°å™¨å˜é‡é™åˆ¶åœ¨å¾ªç¯å†…éƒ¨ã€‚\n\nä½œç”¨åŸŸé“¾ï¼š åœ¨å½“å‰ä½œç”¨åŸŸä¸­æŸ¥æ‰¾æ‰€éœ€å˜é‡ï¼Œä½†æ˜¯è¯¥ä½œç”¨åŸŸæ²¡æœ‰è¿™ä¸ªå˜é‡ï¼Œé‚£è¿™ä¸ªå˜é‡å°±æ˜¯è‡ªç”±å˜é‡ã€‚å¦‚æœåœ¨è‡ªå·±ä½œç”¨åŸŸæ‰¾ä¸åˆ°è¯¥å˜é‡å°±å»çˆ¶çº§ä½œç”¨åŸŸæŸ¥æ‰¾ï¼Œä¾æ¬¡å‘ä¸Šçº§ä½œç”¨åŸŸæŸ¥æ‰¾ï¼Œç›´åˆ°è®¿é—®åˆ°windowå¯¹è±¡å°±è¢«ç»ˆæ­¢ï¼Œè¿™ä¸€å±‚å±‚çš„å…³ç³»å°±æ˜¯ä½œç”¨åŸŸé“¾ã€‚\nä½œç”¨åŸŸé“¾çš„ä½œç”¨æ˜¯ä¿è¯å¯¹æ‰§è¡Œç¯å¢ƒæœ‰æƒè®¿é—®çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°çš„æœ‰åºè®¿é—®ï¼Œé€šè¿‡ä½œç”¨åŸŸé“¾ï¼Œå¯ä»¥è®¿é—®åˆ°å¤–å±‚ç¯å¢ƒçš„å˜é‡å’Œå‡½æ•°ã€‚\nä½œç”¨åŸŸé“¾çš„æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæŒ‡å‘å˜é‡å¯¹è±¡çš„æŒ‡é’ˆåˆ—è¡¨ã€‚å˜é‡å¯¹è±¡æ˜¯ä¸€ä¸ªåŒ…å«äº†æ‰§è¡Œç¯å¢ƒä¸­æ‰€æœ‰å˜é‡å’Œå‡½æ•°çš„å¯¹è±¡ã€‚ä½œç”¨åŸŸé“¾çš„å‰ç«¯å§‹ç»ˆéƒ½æ˜¯å½“å‰æ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡ã€‚å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡ï¼ˆä¹Ÿå°±æ˜¯å…¨å±€å¯¹è±¡ï¼‰å§‹ç»ˆæ˜¯ä½œç”¨åŸŸé“¾çš„æœ€åä¸€ä¸ªå¯¹è±¡ã€‚\nå½“æŸ¥æ‰¾ä¸€ä¸ªå˜é‡æ—¶ï¼Œå¦‚æœå½“å‰æ‰§è¡Œç¯å¢ƒä¸­æ²¡æœ‰æ‰¾åˆ°ï¼Œå¯ä»¥æ²¿ç€ä½œç”¨åŸŸé“¾å‘åæŸ¥æ‰¾ã€‚\n3. å¯¹æ‰§è¡Œä¸Šä¸‹æ–‡çš„ç†è§£1. æ‰§è¡Œä¸Šä¸‹æ–‡ç±»å‹ï¼ˆ1ï¼‰å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡\nä»»ä½•ä¸åœ¨å‡½æ•°å†…éƒ¨çš„éƒ½æ˜¯å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå®ƒé¦–å…ˆä¼šåˆ›å»ºä¸€ä¸ªå…¨å±€çš„windowå¯¹è±¡ï¼Œå¹¶ä¸”è®¾ç½®thisçš„å€¼ç­‰äºè¿™ä¸ªå…¨å±€å¯¹è±¡ï¼Œä¸€ä¸ªç¨‹åºä¸­åªæœ‰ä¸€ä¸ªå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚\nï¼ˆ2ï¼‰å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡\nå½“ä¸€ä¸ªå‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œå°±ä¼šä¸ºè¯¥å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå‡½æ•°çš„ä¸Šä¸‹æ–‡å¯ä»¥æœ‰ä»»æ„å¤šä¸ªã€‚\nï¼ˆ3ï¼‰ evalå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡\næ‰§è¡Œåœ¨evalå‡½æ•°ä¸­çš„ä»£ç ä¼šæœ‰å±äºä»–è‡ªå·±çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œä¸è¿‡evalå‡½æ•°ä¸å¸¸ä½¿ç”¨ï¼Œä¸åšä»‹ç»ã€‚\n2. æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ\nJavaScriptå¼•æ“ä½¿ç”¨æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆæ¥ç®¡ç†æ‰§è¡Œä¸Šä¸‹æ–‡\nå½“JavaScriptæ‰§è¡Œä»£ç æ—¶ï¼Œé¦–å…ˆé‡åˆ°å…¨å±€ä»£ç ï¼Œä¼šåˆ›å»ºä¸€ä¸ªå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡å¹¶ä¸”å‹å…¥æ‰§è¡Œæ ˆä¸­ï¼Œæ¯å½“é‡åˆ°ä¸€ä¸ªå‡½æ•°è°ƒç”¨ï¼Œå°±ä¼šä¸ºè¯¥å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„æ‰§è¡Œä¸Šä¸‹æ–‡å¹¶å‹å…¥æ ˆé¡¶ï¼Œå¼•æ“ä¼šæ‰§è¡Œä½äºæ‰§è¡Œä¸Šä¸‹æ–‡æ ˆé¡¶çš„å‡½æ•°ï¼Œå½“å‡½æ•°æ‰§è¡Œå®Œæˆä¹‹åï¼Œæ‰§è¡Œä¸Šä¸‹æ–‡ä»æ ˆä¸­å¼¹å‡ºï¼Œç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªä¸Šä¸‹æ–‡ã€‚å½“æ‰€æœ‰çš„ä»£ç éƒ½æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œä»æ ˆä¸­å¼¹å‡ºå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚\n\nlet a &#x3D; &#39;Hello World!&#39;;\nfunction first() &#123;\n  console.log(&#39;Inside first function&#39;);\n  second();\n  console.log(&#39;Again inside first function&#39;);\n&#125;\nfunction second() &#123;\n  console.log(&#39;Inside second function&#39;);\n&#125;\nfirst();\n&#x2F;&#x2F;æ‰§è¡Œé¡ºåº\n&#x2F;&#x2F;å…ˆæ‰§è¡Œsecond(),åœ¨æ‰§è¡Œfirst()\nå¤åˆ¶ä»£ç \n\n3. åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡æœ‰ä¸¤ä¸ªé˜¶æ®µï¼šåˆ›å»ºé˜¶æ®µå’Œæ‰§è¡Œé˜¶æ®µ\n1ï¼‰åˆ›å»ºé˜¶æ®µ\nï¼ˆ1ï¼‰thisç»‘å®š\n\nåœ¨å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ï¼ŒthisæŒ‡å‘å…¨å±€å¯¹è±¡ï¼ˆwindowå¯¹è±¡ï¼‰\nåœ¨å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ï¼ŒthisæŒ‡å‘å–å†³äºå‡½æ•°å¦‚ä½•è°ƒç”¨ã€‚å¦‚æœå®ƒè¢«ä¸€ä¸ªå¼•ç”¨å¯¹è±¡è°ƒç”¨ï¼Œé‚£ä¹ˆ this ä¼šè¢«è®¾ç½®æˆé‚£ä¸ªå¯¹è±¡ï¼Œå¦åˆ™ this çš„å€¼è¢«è®¾ç½®ä¸ºå…¨å±€å¯¹è±¡æˆ–è€… undefined\n\nï¼ˆ2ï¼‰åˆ›å»ºè¯æ³•ç¯å¢ƒç»„ä»¶\n\nè¯æ³•ç¯å¢ƒæ˜¯ä¸€ç§æœ‰æ ‡è¯†ç¬¦â€”â€”å˜é‡æ˜ å°„çš„æ•°æ®ç»“æ„ï¼Œæ ‡è¯†ç¬¦æ˜¯æŒ‡å˜é‡&#x2F;å‡½æ•°åï¼Œå˜é‡æ˜¯å¯¹å®é™…å¯¹è±¡æˆ–åŸå§‹æ•°æ®çš„å¼•ç”¨ã€‚\nè¯æ³•ç¯å¢ƒçš„å†…éƒ¨æœ‰ä¸¤ä¸ªç»„ä»¶ï¼šåŠ ç²—æ ·å¼ï¼šç¯å¢ƒè®°å½•å™¨:ç”¨æ¥å‚¨å­˜å˜é‡ä¸ªå‡½æ•°å£°æ˜çš„å®é™…ä½ç½®å¤–éƒ¨ç¯å¢ƒçš„å¼•ç”¨ï¼šå¯ä»¥è®¿é—®çˆ¶çº§ä½œç”¨åŸŸ\n\nï¼ˆ3ï¼‰åˆ›å»ºå˜é‡ç¯å¢ƒç»„ä»¶\n\nå˜é‡ç¯å¢ƒä¹Ÿæ˜¯ä¸€ä¸ªè¯æ³•ç¯å¢ƒï¼Œå…¶ç¯å¢ƒè®°å½•å™¨æŒæœ‰å˜é‡å£°æ˜è¯­å¥åœ¨æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­åˆ›å»ºçš„ç»‘å®šå…³ç³»ã€‚\n\n2ï¼‰æ‰§è¡Œé˜¶æ®µ æ­¤é˜¶æ®µä¼šå®Œæˆå¯¹å˜é‡çš„åˆ†é…ï¼Œæœ€åæ‰§è¡Œå®Œä»£ç ã€‚\nç®€å•æ¥è¯´æ‰§è¡Œä¸Šä¸‹æ–‡å°±æ˜¯æŒ‡ï¼š\nåœ¨æ‰§è¡Œä¸€ç‚¹JSä»£ç ä¹‹å‰ï¼Œéœ€è¦å…ˆè§£æä»£ç ã€‚è§£æçš„æ—¶å€™ä¼šå…ˆåˆ›å»ºä¸€ä¸ªå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œå…ˆæŠŠä»£ç ä¸­å³å°†æ‰§è¡Œçš„å˜é‡ã€å‡½æ•°å£°æ˜éƒ½æ‹¿å‡ºæ¥ï¼Œå˜é‡å…ˆèµ‹å€¼ä¸ºundefinedï¼Œå‡½æ•°å…ˆå£°æ˜å¥½å¯ä½¿ç”¨ã€‚è¿™ä¸€æ­¥æ‰§è¡Œå®Œäº†ï¼Œæ‰å¼€å§‹æ­£å¼çš„æ‰§è¡Œç¨‹åºã€‚\nåœ¨ä¸€ä¸ªå‡½æ•°æ‰§è¡Œä¹‹å‰ï¼Œä¹Ÿä¼šåˆ›å»ºä¸€ä¸ªå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œè·Ÿå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ç±»ä¼¼ï¼Œä¸è¿‡å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¼šå¤šå‡ºthisã€argumentså’Œå‡½æ•°çš„å‚æ•°ã€‚\n\nå…¨å±€ä¸Šä¸‹æ–‡ï¼šå˜é‡å®šä¹‰ï¼Œå‡½æ•°å£°æ˜\nå‡½æ•°ä¸Šä¸‹æ–‡ï¼šå˜é‡å®šä¹‰ï¼Œå‡½æ•°å£°æ˜ï¼Œthisï¼Œarguments\n\n","slug":"é¢è¯•é¢˜ç¬”è®°â€”â€”JSç¯‡(ä¸Š)","date":"2021-06-20T02:11:19.000Z","categories_index":"","tags_index":"","author_index":"Beastrong"},{"id":"2df08f9dfbf634c7c80b135bee82ec73","title":"é¢è¯•é¢˜ç¬”è®°â€”â€”CSSç¯‡","content":"\nCSSé€‰æ‹©å™¨åŠå…¶ä¼˜å…ˆçº§\n\n\n\n\né€‰æ‹©å™¨\næ ¼å¼\nä¼˜å…ˆçº§æƒé‡\n\n\n\nidé€‰æ‹©å™¨\n#id\n100\n\n\nç±»é€‰æ‹©å™¨\n.classname\n10\n\n\nå±æ€§é€‰æ‹©å™¨\na[ref&#x3D;â€œeeeâ€]\n10\n\n\nä¼ªç±»é€‰æ‹©å™¨\nli:last-child\n10\n\n\næ ‡ç­¾é€‰æ‹©å™¨\ndiv\n1\n\n\nä¼ªå…ƒç´ é€‰æ‹©å™¨\nli:after\n1\n\n\nç›¸é‚»å…„å¼Ÿé€‰æ‹©å™¨\nh1+p\n0\n\n\nå­é€‰æ‹©å™¨\nul&gt;li\n0\n\n\nåä»£é€‰æ‹©å™¨\nli a\n0\n\n\né€šé…ç¬¦é€‰æ‹©å™¨\n*\n0\n\n\nå¯¹äºé€‰æ‹©å™¨çš„ä¼˜å…ˆçº§ï¼šâ—æ ‡ç­¾é€‰æ‹©å™¨ã€ä¼ªå…ƒç´ é€‰æ‹©å™¨ï¼š1ï¼›â—ç±»é€‰æ‹©å™¨ã€ä¼ªç±»é€‰æ‹©å™¨ã€å±æ€§é€‰æ‹©å™¨ï¼š10ï¼›â—id é€‰æ‹©å™¨ï¼š100ï¼›â—å†…è”æ ·å¼ï¼š1000ï¼›  \næ³¨æ„äº‹é¡¹ï¼šâ—!importantå£°æ˜çš„æ ·å¼çš„ä¼˜å…ˆçº§æœ€é«˜ï¼›â—å¦‚æœä¼˜å…ˆçº§ç›¸åŒï¼Œåˆ™æœ€åå‡ºç°çš„æ ·å¼ç”Ÿæ•ˆï¼›â—ç»§æ‰¿å¾—åˆ°çš„æ ·å¼çš„ä¼˜å…ˆçº§æœ€ä½ï¼›â—é€šç”¨é€‰æ‹©å™¨ï¼ˆ*ï¼‰ã€å­é€‰æ‹©å™¨ï¼ˆ&gt;ï¼‰å’Œç›¸é‚»åŒèƒé€‰æ‹©å™¨ï¼ˆ+ï¼‰å¹¶ä¸åœ¨è¿™å››ä¸ªç­‰çº§ä¸­ï¼Œæ‰€ä»¥å®ƒä»¬çš„æƒå€¼éƒ½ä¸º 0 ï¼›â—æ ·å¼è¡¨çš„æ¥æºä¸åŒæ—¶ï¼Œä¼˜å…ˆçº§é¡ºåºä¸ºï¼šå†…è”æ ·å¼ &gt; å†…éƒ¨æ ·å¼ &gt; å¤–éƒ¨æ ·å¼ &gt; æµè§ˆå™¨ç”¨æˆ·è‡ªå®šä¹‰æ ·å¼ &gt; æµè§ˆå™¨é»˜è®¤æ ·å¼ã€‚2. CSSä¸­å¯ç»§æ‰¿ä¸ä¸å¯ç»§æ‰¿å±æ€§æœ‰å“ªäº›ä¸€ã€æ— ç»§æ‰¿æ€§çš„å±æ€§1displayï¼šè§„å®šå…ƒç´ åº”è¯¥ç”Ÿæˆçš„æ¡†çš„ç±»å‹2æ–‡æœ¬å±æ€§ï¼šâ—vertical-alignï¼šå‚ç›´æ–‡æœ¬å¯¹é½â—text-decorationï¼šè§„å®šæ·»åŠ åˆ°æ–‡æœ¬çš„è£…é¥°â—text-shadowï¼šæ–‡æœ¬é˜´å½±æ•ˆæœâ—white-spaceï¼šç©ºç™½ç¬¦çš„å¤„ç†â—unicode-bidiï¼šè®¾ç½®æ–‡æœ¬çš„æ–¹å‘3ç›’å­æ¨¡å‹çš„å±æ€§ï¼šwidthã€heightã€marginã€borderã€padding4èƒŒæ™¯å±æ€§ï¼šbackgroundã€background-colorã€background-imageã€background-repeatã€background-positionã€background-attachment5å®šä½å±æ€§ï¼šfloatã€clearã€positionã€topã€rightã€bottomã€leftã€min-widthã€min-heightã€max-widthã€max-heightã€overflowã€clipã€z-index6ç”Ÿæˆå†…å®¹å±æ€§ï¼šcontentã€counter-resetã€counter-increment7è½®å»“æ ·å¼å±æ€§ï¼šoutline-styleã€outline-widthã€outline-colorã€outline8é¡µé¢æ ·å¼å±æ€§ï¼šsizeã€page-break-beforeã€page-break-after9å£°éŸ³æ ·å¼å±æ€§ï¼špause-beforeã€pause-afterã€pauseã€cue-beforeã€cue-afterã€cueã€play-during  \näºŒã€æœ‰ç»§æ‰¿æ€§çš„å±æ€§1å­—ä½“ç³»åˆ—å±æ€§â—font-familyï¼šå­—ä½“ç³»åˆ—â—font-weightï¼šå­—ä½“çš„ç²—ç»†â—font-sizeï¼šå­—ä½“çš„å¤§å°â—font-styleï¼šå­—ä½“çš„é£æ ¼2æ–‡æœ¬ç³»åˆ—å±æ€§â—text-indentï¼šæ–‡æœ¬ç¼©è¿›â—text-alignï¼šæ–‡æœ¬æ°´å¹³å¯¹é½â—line-heightï¼šè¡Œé«˜â—word-spacingï¼šå•è¯ä¹‹é—´çš„é—´è·â—letter-spacingï¼šä¸­æ–‡æˆ–è€…å­—æ¯ä¹‹é—´çš„é—´è·â—text-transformï¼šæ§åˆ¶æ–‡æœ¬å¤§å°å†™ï¼ˆå°±æ˜¯uppercaseã€lowercaseã€capitalizeè¿™ä¸‰ä¸ªï¼‰â—colorï¼šæ–‡æœ¬é¢œè‰²3å…ƒç´ å¯è§æ€§â—visibilityï¼šæ§åˆ¶å…ƒç´ æ˜¾ç¤ºéšè—4åˆ—è¡¨å¸ƒå±€å±æ€§â—list-styleï¼šåˆ—è¡¨é£æ ¼ï¼ŒåŒ…æ‹¬list-style-typeã€list-style-imageç­‰5å…‰æ ‡å±æ€§â—cursorï¼šå…‰æ ‡æ˜¾ç¤ºä¸ºä½•ç§å½¢æ€3. displayçš„å±æ€§å€¼åŠå…¶ä½œç”¨  \n\n\n\nå±æ€§å€¼\nä½œç”¨\n\n\n\nnone\nå…ƒç´ ä¸æ˜¾ç¤ºï¼Œå¹¶ä¸”ä¼šä»æ–‡æ¡£æµä¸­ç§»é™¤ã€‚\n\n\nblock\nå—ç±»å‹ã€‚é»˜è®¤å®½åº¦ä¸ºçˆ¶å…ƒç´ å®½åº¦ï¼Œå¯è®¾ç½®å®½é«˜ï¼Œæ¢è¡Œæ˜¾ç¤ºã€‚\n\n\ninline\nè¡Œå†…å…ƒç´ ç±»å‹ã€‚é»˜è®¤å®½åº¦ä¸ºå†…å®¹å®½åº¦ï¼Œä¸å¯è®¾ç½®å®½é«˜ï¼ŒåŒè¡Œæ˜¾ç¤ºã€‚\n\n\ninline-block\né»˜è®¤å®½åº¦ä¸ºå†…å®¹å®½åº¦ï¼Œå¯ä»¥è®¾ç½®å®½é«˜ï¼ŒåŒè¡Œæ˜¾ç¤ºã€‚\n\n\nlist-item\nåƒå—ç±»å‹å…ƒç´ ä¸€æ ·æ˜¾ç¤ºï¼Œå¹¶æ·»åŠ æ ·å¼åˆ—è¡¨æ ‡è®°ã€‚\n\n\ntable\næ­¤å…ƒç´ ä¼šä½œä¸ºå—çº§è¡¨æ ¼æ¥æ˜¾ç¤ºã€‚\n\n\ninherit\nè§„å®šåº”è¯¥ä»çˆ¶å…ƒç´ ç»§æ‰¿displayå±æ€§çš„å€¼ã€‚\n\n\n\ndisplayçš„blockã€inlineå’Œinline-blockçš„åŒºåˆ«ã€€ï¼ˆ1ï¼‰blockï¼šä¼šç‹¬å ä¸€è¡Œï¼Œå¤šä¸ªå…ƒç´ ä¼šå¦èµ·ä¸€è¡Œï¼Œå¯ä»¥è®¾ç½®widthã€heightã€marginå’Œpaddingå±æ€§ï¼›ã€€ï¼ˆ2ï¼‰inlineï¼šå…ƒç´ ä¸ä¼šç‹¬å ä¸€è¡Œï¼Œè®¾ç½®widthã€heightå±æ€§æ— æ•ˆã€‚ä½†å¯ä»¥è®¾ç½®æ°´å¹³æ–¹å‘çš„marginå’Œpaddingå±æ€§ï¼Œä¸èƒ½è®¾ç½®å‚ç›´æ–¹å‘çš„paddingå’Œmarginï¼›ã€€ï¼ˆ3ï¼‰inline-blockï¼šå°†å¯¹è±¡è®¾ç½®ä¸ºinlineå¯¹è±¡ï¼Œä½†å¯¹è±¡çš„å†…å®¹ä½œä¸ºblockå¯¹è±¡å‘ˆç°ï¼Œä¹‹åçš„å†…è”å¯¹è±¡ä¼šè¢«æ’åˆ—åœ¨åŒä¸€è¡Œå†…ã€‚\n\nå¯¹äºè¡Œå†…å…ƒç´ å’Œå—çº§å…ƒç´ ï¼Œå…¶ç‰¹ç‚¹å¦‚ä¸‹ï¼šï¼ˆ1ï¼‰è¡Œå†…å…ƒç´ â—è®¾ç½®å®½é«˜æ— æ•ˆï¼›â—å¯ä»¥è®¾ç½®æ°´å¹³æ–¹å‘çš„marginå’Œpaddingå±æ€§ï¼Œä¸èƒ½è®¾ç½®å‚ç›´æ–¹å‘çš„paddingå’Œmarginï¼›â—ä¸ä¼šè‡ªåŠ¨æ¢è¡Œï¼›ï¼ˆ2ï¼‰å—çº§å…ƒç´ â—å¯ä»¥è®¾ç½®å®½é«˜ï¼›â—è®¾ç½®marginå’Œpaddingéƒ½æœ‰æ•ˆï¼›â—å¯ä»¥è‡ªåŠ¨æ¢è¡Œï¼›â—å¤šä¸ªå—çŠ¶ï¼Œé»˜è®¤æ’åˆ—ä»ä¸Šåˆ°ä¸‹ã€‚5. éšè—å…ƒç´ çš„æ–¹æ³•æœ‰å“ªäº›â—display: noneï¼šæ¸²æŸ“æ ‘ä¸ä¼šåŒ…å«è¯¥æ¸²æŸ“å¯¹è±¡ï¼Œå› æ­¤è¯¥å…ƒç´ ä¸ä¼šåœ¨é¡µé¢ä¸­å æ®ä½ç½®ï¼Œä¹Ÿä¸ä¼šå“åº”ç»‘å®šçš„ç›‘å¬äº‹ä»¶ã€‚â—visibility: hiddenï¼šå…ƒç´ åœ¨é¡µé¢ä¸­ä»å æ®ç©ºé—´ï¼Œä½†æ˜¯ä¸ä¼šå“åº”ç»‘å®šçš„ç›‘å¬äº‹ä»¶ã€‚â—opacity: 0ï¼šå°†å…ƒç´ çš„é€æ˜åº¦è®¾ç½®ä¸º 0ï¼Œä»¥æ­¤æ¥å®ç°å…ƒç´ çš„éšè—ã€‚å…ƒç´ åœ¨é¡µé¢ä¸­ä»ç„¶å æ®ç©ºé—´ï¼Œå¹¶ä¸”èƒ½å¤Ÿå“åº”å…ƒç´ ç»‘å®šçš„ç›‘å¬äº‹ä»¶ã€‚â—position: absoluteï¼šé€šè¿‡ä½¿ç”¨ç»å¯¹å®šä½å°†å…ƒç´ ç§»é™¤å¯è§†åŒºåŸŸå†…ï¼Œä»¥æ­¤æ¥å®ç°å…ƒç´ çš„éšè—ã€‚â—z-index: è´Ÿå€¼ï¼šæ¥ä½¿å…¶ä»–å…ƒç´ é®ç›–ä½è¯¥å…ƒç´ ï¼Œä»¥æ­¤æ¥å®ç°éšè—ã€‚â—clip&#x2F;clip-path ï¼šä½¿ç”¨å…ƒç´ è£å‰ªçš„æ–¹æ³•æ¥å®ç°å…ƒç´ çš„éšè—ï¼Œè¿™ç§æ–¹æ³•ä¸‹ï¼Œå…ƒç´ ä»åœ¨é¡µé¢ä¸­å æ®ä½ç½®ï¼Œä½†æ˜¯ä¸ä¼šå“åº”ç»‘å®šçš„ç›‘å¬äº‹ä»¶ã€‚â—transform: scale(0,0)ï¼šå°†å…ƒç´ ç¼©æ”¾ä¸º 0ï¼Œæ¥å®ç°å…ƒç´ çš„éšè—ã€‚è¿™ç§æ–¹æ³•ä¸‹ï¼Œå…ƒç´ ä»åœ¨é¡µé¢ä¸­å æ®ä½ç½®ï¼Œä½†æ˜¯ä¸ä¼šå“åº”ç»‘å®šçš„ç›‘å¬äº‹ä»¶ã€‚6. linkå’Œ@importçš„åŒºåˆ«ä¸¤è€…éƒ½æ˜¯å¤–éƒ¨å¼•ç”¨CSSçš„æ–¹å¼ï¼Œå®ƒä»¬çš„åŒºåˆ«å¦‚ä¸‹ï¼šâ—linkæ˜¯XHTMLæ ‡ç­¾ï¼Œé™¤äº†åŠ è½½CSSå¤–ï¼Œè¿˜å¯ä»¥å®šä¹‰RSSç­‰å…¶ä»–äº‹åŠ¡ï¼›@importå±äºCSSèŒƒç•´ï¼Œåªèƒ½åŠ è½½CSSã€‚â—linkå¼•ç”¨CSSæ—¶ï¼Œåœ¨é¡µé¢è½½å…¥æ—¶åŒæ—¶åŠ è½½ï¼›@importéœ€è¦é¡µé¢ç½‘é¡µå®Œå…¨è½½å…¥ä»¥ååŠ è½½ã€‚â—linkæ˜¯XHTMLæ ‡ç­¾ï¼Œæ— å…¼å®¹é—®é¢˜ï¼›@importæ˜¯åœ¨CSS2.1æå‡ºçš„ï¼Œä½ç‰ˆæœ¬çš„æµè§ˆå™¨ä¸æ”¯æŒã€‚â—linkæ”¯æŒä½¿ç”¨Javascriptæ§åˆ¶DOMå»æ”¹å˜æ ·å¼ï¼›è€Œ@importä¸æ”¯æŒã€‚7. transitionå’Œanimationçš„åŒºåˆ«â—transitionæ˜¯è¿‡æ¸¡å±æ€§ï¼Œå¼ºè°ƒè¿‡åº¦ï¼Œå®ƒçš„å®ç°éœ€è¦è§¦å‘ä¸€ä¸ªäº‹ä»¶ï¼ˆæ¯”å¦‚é¼ æ ‡ç§»åŠ¨ä¸Šå»ï¼Œç„¦ç‚¹ï¼Œç‚¹å‡»ç­‰ï¼‰æ‰æ‰§è¡ŒåŠ¨ç”»ã€‚å®ƒç±»ä¼¼äºflashçš„è¡¥é—´åŠ¨ç”»ï¼Œè®¾ç½®ä¸€ä¸ªå¼€å§‹å…³é”®å¸§ï¼Œä¸€ä¸ªç»“æŸå…³é”®å¸§ã€‚â—animationæ˜¯åŠ¨ç”»å±æ€§ï¼Œå®ƒçš„å®ç°ä¸éœ€è¦è§¦å‘äº‹ä»¶ï¼Œè®¾å®šå¥½æ—¶é—´ä¹‹åå¯ä»¥è‡ªå·±æ‰§è¡Œï¼Œä¸”å¯ä»¥å¾ªç¯ä¸€ä¸ªåŠ¨ç”»ã€‚å®ƒä¹Ÿç±»ä¼¼äºflashçš„è¡¥é—´åŠ¨ç”»ï¼Œä½†æ˜¯å®ƒå¯ä»¥è®¾ç½®å¤šä¸ªå…³é”®å¸§ï¼ˆç”¨@keyframeå®šä¹‰ï¼‰å®ŒæˆåŠ¨ç”»ã€‚8. display:noneä¸visibility:hiddençš„åŒºåˆ«è¿™ä¸¤ä¸ªå±æ€§éƒ½æ˜¯è®©å…ƒç´ éšè—ï¼Œä¸å¯è§ã€‚ä¸¤è€…åŒºåˆ«å¦‚ä¸‹ï¼šï¼ˆ1ï¼‰åœ¨æ¸²æŸ“æ ‘ä¸­â—display:noneä¼šè®©å…ƒç´ å®Œå…¨ä»æ¸²æŸ“æ ‘ä¸­æ¶ˆå¤±ï¼Œæ¸²æŸ“æ—¶ä¸ä¼šå æ®ä»»ä½•ç©ºé—´ï¼›â—visibility:hiddenä¸ä¼šè®©å…ƒç´ ä»æ¸²æŸ“æ ‘ä¸­æ¶ˆå¤±ï¼Œæ¸²æŸ“çš„å…ƒç´ è¿˜ä¼šå æ®ç›¸åº”çš„ç©ºé—´ï¼Œåªæ˜¯å†…å®¹ä¸å¯è§ã€‚ï¼ˆ2ï¼‰æ˜¯å¦æ˜¯ç»§æ‰¿å±æ€§â—display:noneæ˜¯éç»§æ‰¿å±æ€§ï¼Œå­å­™èŠ‚ç‚¹ä¼šéšç€çˆ¶èŠ‚ç‚¹ä»æ¸²æŸ“æ ‘æ¶ˆå¤±ï¼Œé€šè¿‡ä¿®æ”¹å­å­™èŠ‚ç‚¹çš„å±æ€§ä¹Ÿæ— æ³•æ˜¾ç¤ºï¼›â—visibility:hiddenæ˜¯ç»§æ‰¿å±æ€§ï¼Œå­å­™èŠ‚ç‚¹æ¶ˆå¤±æ˜¯ç”±äºç»§æ‰¿äº†hiddenï¼Œé€šè¿‡è®¾ç½®visibility:visibleå¯ä»¥è®©å­å­™èŠ‚ç‚¹æ˜¾ç¤ºï¼›ï¼ˆ3ï¼‰ä¿®æ”¹å¸¸è§„æ–‡æ¡£æµä¸­å…ƒç´ çš„ display é€šå¸¸ä¼šé€ æˆæ–‡æ¡£çš„é‡æ’ï¼Œä½†æ˜¯ä¿®æ”¹visibilityå±æ€§åªä¼šé€ æˆæœ¬å…ƒç´ çš„é‡ç»˜ï¼›ï¼ˆ4ï¼‰å¦‚æœä½¿ç”¨è¯»å±å™¨ï¼Œè®¾ç½®ä¸ºdisplay:noneçš„å†…å®¹ä¸ä¼šè¢«è¯»å–ï¼Œè®¾ç½®ä¸ºvisibility:hiddençš„å†…å®¹ä¼šè¢«è¯»å–ã€‚9. ä¼ªå…ƒç´ å’Œä¼ªç±»çš„åŒºåˆ«å’Œä½œç”¨ï¼Ÿâ—ä¼ªå…ƒç´ ï¼šåœ¨å†…å®¹å…ƒç´ çš„å‰åæ’å…¥é¢å¤–çš„å…ƒç´ æˆ–æ ·å¼ï¼Œä½†æ˜¯è¿™äº›å…ƒç´ å®é™…ä¸Šå¹¶ä¸åœ¨æ–‡æ¡£ä¸­ç”Ÿæˆã€‚å®ƒä»¬åªåœ¨å¤–éƒ¨æ˜¾ç¤ºå¯è§ï¼Œä½†ä¸ä¼šåœ¨æ–‡æ¡£çš„æºä»£ç ä¸­æ‰¾åˆ°å®ƒä»¬ï¼Œå› æ­¤ï¼Œç§°ä¸ºâ€œä¼ªâ€å…ƒç´ ã€‚ä¾‹å¦‚ï¼šâ—ä¼ªç±»ï¼šå°†ç‰¹æ®Šçš„æ•ˆæœæ·»åŠ åˆ°ç‰¹å®šé€‰æ‹©å™¨ä¸Šã€‚å®ƒæ˜¯å·²æœ‰å…ƒç´ ä¸Šæ·»åŠ ç±»åˆ«çš„ï¼Œä¸ä¼šäº§ç”Ÿæ–°çš„å…ƒç´ ã€‚ä¾‹å¦‚ï¼šæ€»ç»“ï¼šä¼ªç±»æ˜¯é€šè¿‡åœ¨å…ƒç´ é€‰æ‹©å™¨ä¸ŠåŠ â¼Šä¼ªç±»æ”¹å˜å…ƒç´ çŠ¶æ€ï¼Œâ½½ä¼ªå…ƒç´ é€šè¿‡å¯¹å…ƒç´ çš„æ“ä½œè¿›â¾å¯¹å…ƒç´ çš„æ”¹å˜ã€‚10. å¯¹requestAnimationframeçš„ç†è§£å®ç°åŠ¨ç”»æ•ˆæœçš„æ–¹æ³•æ¯”è¾ƒå¤šï¼ŒJavascript ä¸­å¯ä»¥é€šè¿‡å®šæ—¶å™¨ setTimeout æ¥å®ç°ï¼ŒCSS3 ä¸­å¯ä»¥ä½¿ç”¨ transition å’Œ animation æ¥å®ç°ï¼ŒHTML5 ä¸­çš„ canvas ä¹Ÿå¯ä»¥å®ç°ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒHTML5 æä¾›ä¸€ä¸ªä¸“é—¨ç”¨äºè¯·æ±‚åŠ¨ç”»çš„APIï¼Œé‚£å°±æ˜¯ requestAnimationFrameï¼Œé¡¾åæ€ä¹‰å°±æ˜¯è¯·æ±‚åŠ¨ç”»å¸§ã€‚  \nMDNå¯¹è¯¥æ–¹æ³•çš„æè¿°ï¼šwindow.requestAnimationFrame() å‘Šè¯‰æµè§ˆå™¨â€”â€”ä½ å¸Œæœ›æ‰§è¡Œä¸€ä¸ªåŠ¨ç”»ï¼Œå¹¶ä¸”è¦æ±‚æµè§ˆå™¨åœ¨ä¸‹æ¬¡é‡ç»˜ä¹‹å‰è°ƒç”¨æŒ‡å®šçš„å›è°ƒå‡½æ•°æ›´æ–°åŠ¨ç”»ã€‚è¯¥æ–¹æ³•éœ€è¦ä¼ å…¥ä¸€ä¸ªå›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å›è°ƒå‡½æ•°ä¼šåœ¨æµè§ˆå™¨ä¸‹ä¸€æ¬¡é‡ç»˜ä¹‹å‰æ‰§è¡Œã€‚  \nè¯­æ³•ï¼š window.requestAnimationFrame(callback); å…¶ä¸­ï¼Œcallbackæ˜¯ä¸‹ä¸€æ¬¡é‡ç»˜ä¹‹å‰æ›´æ–°åŠ¨ç”»å¸§æ‰€è°ƒç”¨çš„å‡½æ•°(å³ä¸Šé¢æ‰€è¯´çš„å›è°ƒå‡½æ•°)ã€‚è¯¥å›è°ƒå‡½æ•°ä¼šè¢«ä¼ å…¥DOMHighResTimeStampå‚æ•°ï¼Œå®ƒè¡¨ç¤ºrequestAnimationFrame() å¼€å§‹å»æ‰§è¡Œå›è°ƒå‡½æ•°çš„æ—¶åˆ»ã€‚è¯¥æ–¹æ³•å±äºå®ä»»åŠ¡ï¼Œæ‰€ä»¥ä¼šåœ¨æ‰§è¡Œå®Œå¾®ä»»åŠ¡ä¹‹åå†å»æ‰§è¡Œã€‚  \nå–æ¶ˆåŠ¨ç”»ï¼šä½¿ç”¨cancelAnimationFrame()æ¥å–æ¶ˆæ‰§è¡ŒåŠ¨ç”»ï¼Œè¯¥æ–¹æ³•æ¥æ”¶ä¸€ä¸ªå‚æ•°â€”â€”requestAnimationFrameé»˜è®¤è¿”å›çš„idï¼Œåªéœ€è¦ä¼ å…¥è¿™ä¸ªidå°±å¯ä»¥å–æ¶ˆåŠ¨ç”»äº†ã€‚  \nä¼˜åŠ¿ï¼šâ—CPUèŠ‚èƒ½ï¼šä½¿ç”¨SetTinterval å®ç°çš„åŠ¨ç”»ï¼Œå½“é¡µé¢è¢«éšè—æˆ–æœ€å°åŒ–æ—¶ï¼ŒSetTinterval ä»ç„¶åœ¨åå°æ‰§è¡ŒåŠ¨ç”»ä»»åŠ¡ï¼Œç”±äºæ­¤æ—¶é¡µé¢å¤„äºä¸å¯è§æˆ–ä¸å¯ç”¨çŠ¶æ€ï¼Œåˆ·æ–°åŠ¨ç”»æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œå®Œå…¨æ˜¯æµªè´¹CPUèµ„æºã€‚è€ŒRequestAnimationFrameåˆ™å®Œå…¨ä¸åŒï¼Œå½“é¡µé¢å¤„ç†æœªæ¿€æ´»çš„çŠ¶æ€ä¸‹ï¼Œè¯¥é¡µé¢çš„å±å¹•åˆ·æ–°ä»»åŠ¡ä¹Ÿä¼šè¢«ç³»ç»Ÿæš‚åœï¼Œå› æ­¤è·Ÿç€ç³»ç»Ÿèµ°çš„RequestAnimationFrameä¹Ÿä¼šåœæ­¢æ¸²æŸ“ï¼Œå½“é¡µé¢è¢«æ¿€æ´»æ—¶ï¼ŒåŠ¨ç”»å°±ä»ä¸Šæ¬¡åœç•™çš„åœ°æ–¹ç»§ç»­æ‰§è¡Œï¼Œæœ‰æ•ˆèŠ‚çœäº†CPUå¼€é”€ã€‚â—å‡½æ•°èŠ‚æµï¼šåœ¨é«˜é¢‘ç‡äº‹ä»¶( resize, scroll ç­‰)ä¸­ï¼Œä¸ºäº†é˜²æ­¢åœ¨ä¸€ä¸ªåˆ·æ–°é—´éš”å†…å‘ç”Ÿå¤šæ¬¡å‡½æ•°æ‰§è¡Œï¼ŒRequestAnimationFrameå¯ä¿è¯æ¯ä¸ªåˆ·æ–°é—´éš”å†…ï¼Œå‡½æ•°åªè¢«æ‰§è¡Œä¸€æ¬¡ï¼Œè¿™æ ·æ—¢èƒ½ä¿è¯æµç•…æ€§ï¼Œä¹Ÿèƒ½æ›´å¥½çš„èŠ‚çœå‡½æ•°æ‰§è¡Œçš„å¼€é”€ï¼Œä¸€ä¸ªåˆ·æ–°é—´éš”å†…å‡½æ•°æ‰§è¡Œå¤šæ¬¡æ—¶æ²¡æœ‰æ„ä¹‰çš„ï¼Œå› ä¸ºå¤šæ•°æ˜¾ç¤ºå™¨æ¯16.7msåˆ·æ–°ä¸€æ¬¡ï¼Œå¤šæ¬¡ç»˜åˆ¶å¹¶ä¸ä¼šåœ¨å±å¹•ä¸Šä½“ç°å‡ºæ¥ã€‚â—å‡å°‘DOMæ“ä½œï¼šrequestAnimationFrame ä¼šæŠŠæ¯ä¸€å¸§ä¸­çš„æ‰€æœ‰DOMæ“ä½œé›†ä¸­èµ·æ¥ï¼Œåœ¨ä¸€æ¬¡é‡ç»˜æˆ–å›æµä¸­å°±å®Œæˆï¼Œå¹¶ä¸”é‡ç»˜æˆ–å›æµçš„æ—¶é—´é—´éš”ç´§ç´§è·Ÿéšæµè§ˆå™¨çš„åˆ·æ–°é¢‘ç‡ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œè¿™ä¸ªé¢‘ç‡ä¸ºæ¯ç§’60å¸§ã€‚  \nsetTimeoutæ‰§è¡ŒåŠ¨ç”»çš„ç¼ºç‚¹ï¼šå®ƒé€šè¿‡è®¾å®šé—´éš”æ—¶é—´æ¥ä¸æ–­æ”¹å˜å›¾åƒä½ç½®ï¼Œè¾¾åˆ°åŠ¨ç”»æ•ˆæœã€‚ä½†æ˜¯å®¹æ˜“å‡ºç°å¡é¡¿ã€æŠ–åŠ¨çš„ç°è±¡ï¼›åŸå› æ˜¯ï¼šâ—settimeoutä»»åŠ¡è¢«æ”¾å…¥å¼‚æ­¥é˜Ÿåˆ—ï¼Œåªæœ‰å½“ä¸»çº¿ç¨‹ä»»åŠ¡æ‰§è¡Œå®Œåæ‰ä¼šæ‰§è¡Œé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼Œå› æ­¤å®é™…æ‰§è¡Œæ—¶é—´æ€»æ˜¯æ¯”è®¾å®šæ—¶é—´è¦æ™šï¼›â—settimeoutçš„å›ºå®šæ—¶é—´é—´éš”ä¸ä¸€å®šä¸å±å¹•åˆ·æ–°é—´éš”æ—¶é—´ç›¸åŒï¼Œä¼šå¼•èµ·ä¸¢å¸§ã€‚11. å¯¹ç›’æ¨¡å‹çš„ç†è§£CSS3ä¸­çš„ç›’æ¨¡å‹æœ‰ä»¥ä¸‹ä¸¤ç§ï¼šæ ‡å‡†ç›’å­æ¨¡å‹ã€IEç›’å­æ¨¡å‹  \n\n\nç›’æ¨¡å‹éƒ½æ˜¯ç”±å››ä¸ªéƒ¨åˆ†ç»„æˆçš„ï¼Œåˆ†åˆ«æ˜¯marginã€borderã€paddingå’Œcontentã€‚  \næ ‡å‡†ç›’æ¨¡å‹å’ŒIEç›’æ¨¡å‹çš„åŒºåˆ«åœ¨äºè®¾ç½®widthå’Œheightæ—¶ï¼Œæ‰€å¯¹åº”çš„èŒƒå›´ä¸åŒï¼šâ—æ ‡å‡†ç›’æ¨¡å‹çš„widthå’Œheightå±æ€§çš„èŒƒå›´åªåŒ…å«äº†contentï¼Œâ—IEç›’æ¨¡å‹çš„widthå’Œheightå±æ€§çš„èŒƒå›´åŒ…å«äº†borderã€paddingå’Œcontentã€‚  \nå¯ä»¥é€šè¿‡ä¿®æ”¹å…ƒç´ çš„box-sizingå±æ€§æ¥æ”¹å˜å…ƒç´ çš„ç›’æ¨¡å‹ï¼šâ—box-sizing: content-boxè¡¨ç¤ºæ ‡å‡†ç›’æ¨¡å‹ï¼ˆé»˜è®¤å€¼ï¼‰â—box-sizing: border-boxè¡¨ç¤ºIEç›’æ¨¡å‹ï¼ˆæ€ªå¼‚ç›’æ¨¡å‹ï¼‰12. ä¸ºä»€ä¹ˆæœ‰æ—¶å€™â½¤translateæ¥æ”¹å˜ä½ç½®â½½ä¸æ˜¯å®šä½ï¼Ÿtranslate æ˜¯ transform å±æ€§çš„â¼€ä¸ªå€¼ã€‚æ”¹å˜transformæˆ–opacityä¸ä¼šè§¦å‘æµè§ˆå™¨é‡æ–°å¸ƒå±€ï¼ˆreflowï¼‰æˆ–é‡ç»˜ï¼ˆrepaintï¼‰ï¼Œåªä¼šè§¦å‘å¤åˆï¼ˆcompositionsï¼‰ã€‚â½½æ”¹å˜ç»å¯¹å®šä½ä¼šè§¦å‘é‡æ–°å¸ƒå±€ï¼Œè¿›â½½è§¦å‘é‡ç»˜å’Œå¤åˆã€‚transformä½¿æµè§ˆå™¨ä¸ºå…ƒç´ åˆ›å»ºâ¼€ä¸ª GPU å›¾å±‚ï¼Œä½†æ”¹å˜ç»å¯¹å®šä½ä¼šä½¿â½¤åˆ° CPUã€‚ å› æ­¤translate()æ›´â¾¼æ•ˆï¼Œå¯ä»¥ç¼©çŸ­å¹³æ»‘åŠ¨ç”»çš„ç»˜åˆ¶æ—¶é—´ã€‚ â½½translateæ”¹å˜ä½ç½®æ—¶ï¼Œå…ƒç´ ä¾ç„¶ä¼šå æ®å…¶åŸå§‹ç©ºé—´ï¼Œç»å¯¹å®šä½å°±ä¸ä¼šå‘â½£è¿™ç§æƒ…å†µã€‚13. li ä¸ li ä¹‹é—´æœ‰çœ‹ä¸è§çš„ç©ºç™½é—´éš”æ˜¯ä»€ä¹ˆåŸå› å¼•èµ·çš„ï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿæµè§ˆå™¨ä¼šæŠŠinlineå†…è”å…ƒç´ é—´çš„ç©ºç™½å­—ç¬¦ï¼ˆç©ºæ ¼ã€æ¢è¡Œã€Tabç­‰ï¼‰æ¸²æŸ“æˆä¸€ä¸ªç©ºæ ¼ã€‚ä¸ºäº†ç¾è§‚ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ª li æ”¾åœ¨ä¸€è¡Œï¼Œè¿™å¯¼è‡´ li æ¢è¡Œåäº§ç”Ÿæ¢è¡Œå­—ç¬¦ï¼Œå®ƒå˜æˆä¸€ä¸ªç©ºæ ¼ï¼Œå ç”¨äº†ä¸€ä¸ªå­—ç¬¦çš„å®½åº¦ã€‚  \nè§£å†³åŠæ³•ï¼šï¼ˆ1ï¼‰ä¸º li è®¾ç½®float:leftã€‚ä¸è¶³ï¼šæœ‰äº›å®¹å™¨æ˜¯ä¸èƒ½è®¾ç½®æµ®åŠ¨ï¼Œå¦‚å·¦å³åˆ‡æ¢çš„ç„¦ç‚¹å›¾ç­‰ã€‚ï¼ˆ2ï¼‰å°†æ‰€æœ‰ li å†™åœ¨åŒä¸€è¡Œã€‚ä¸è¶³ï¼šä»£ç ä¸ç¾è§‚ã€‚ï¼ˆ3ï¼‰å°† ul å†…çš„å­—ç¬¦å°ºå¯¸ç›´æ¥è®¾ä¸º0ï¼Œå³font-size:0ã€‚ä¸è¶³ï¼š ul ä¸­çš„å…¶ä»–å­—ç¬¦å°ºå¯¸ä¹Ÿè¢«è®¾ä¸º0ï¼Œéœ€è¦é¢å¤–é‡æ–°è®¾å®šå…¶ä»–å­—ç¬¦å°ºå¯¸ï¼Œä¸”åœ¨Safariæµè§ˆå™¨ä¾ç„¶ä¼šå‡ºç°ç©ºç™½é—´éš”ã€‚ï¼ˆ4ï¼‰æ¶ˆé™¤ ul çš„å­—ç¬¦é—´éš”letter-spacing:-8pxï¼Œä¸è¶³ï¼šè¿™ä¹Ÿè®¾ç½®äº† li å†…çš„å­—ç¬¦é—´éš”ï¼Œå› æ­¤éœ€è¦å°† li å†…çš„å­—ç¬¦é—´éš”è®¾ä¸ºé»˜è®¤letter-spacing:normalã€‚14. CSS3ä¸­æœ‰å“ªäº›æ–°ç‰¹æ€§â—æ–°å¢å„ç§CSSé€‰æ‹©å™¨ ï¼ˆ: not(.input)ï¼šæ‰€æœ‰ class ä¸æ˜¯â€œinputâ€çš„èŠ‚ç‚¹ï¼‰â—åœ†è§’ ï¼ˆborder-radius:8pxï¼‰â—å¤šåˆ—å¸ƒå±€ ï¼ˆmulti-column layoutï¼‰â—é˜´å½±å’Œåå°„ ï¼ˆShadoweflectï¼‰â—æ–‡å­—ç‰¹æ•ˆ ï¼ˆtext-shadowï¼‰â—æ–‡å­—æ¸²æŸ“ ï¼ˆText-decorationï¼‰â—çº¿æ€§æ¸å˜ ï¼ˆgradientï¼‰â—æ—‹è½¬ ï¼ˆtransformï¼‰â—å¢åŠ äº†æ—‹è½¬,ç¼©æ”¾,å®šä½,å€¾æ–œ,åŠ¨ç”»,å¤šèƒŒæ™¯15. æ›¿æ¢å…ƒç´ çš„æ¦‚å¿µåŠè®¡ç®—è§„åˆ™é€šè¿‡ä¿®æ”¹æŸä¸ªå±æ€§å€¼å‘ˆç°çš„å†…å®¹å°±å¯ä»¥è¢«æ›¿æ¢çš„å…ƒç´ å°±ç§°ä¸ºâ€œæ›¿æ¢å…ƒç´ â€ã€‚  \næ›¿æ¢å…ƒç´ é™¤äº†å†…å®¹å¯æ›¿æ¢è¿™ä¸€ç‰¹æ€§ä»¥å¤–ï¼Œè¿˜æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼šâ—å†…å®¹çš„å¤–è§‚ä¸å—é¡µé¢ä¸Šçš„CSSçš„å½±å“ï¼šç”¨ä¸“ä¸šçš„è¯è®²å°±æ˜¯åœ¨æ ·å¼è¡¨ç°åœ¨CSSä½œç”¨åŸŸä¹‹å¤–ã€‚å¦‚ä½•æ›´æ”¹æ›¿æ¢å…ƒç´ æœ¬èº«çš„å¤–è§‚éœ€è¦ç±»ä¼¼appearanceå±æ€§ï¼Œæˆ–è€…æµè§ˆå™¨è‡ªèº«æš´éœ²çš„ä¸€äº›æ ·å¼æ¥å£ã€‚â—æœ‰è‡ªå·±çš„å°ºå¯¸ï¼šåœ¨Webä¸­ï¼Œå¾ˆå¤šæ›¿æ¢å…ƒç´ åœ¨æ²¡æœ‰æ˜ç¡®å°ºå¯¸è®¾å®šçš„æƒ…å†µä¸‹ï¼Œå…¶é»˜è®¤çš„å°ºå¯¸ï¼ˆä¸åŒ…æ‹¬è¾¹æ¡†ï¼‰æ˜¯300åƒç´ Ã—150åƒç´ ï¼Œå¦‚â—åœ¨å¾ˆå¤šCSSå±æ€§ä¸Šæœ‰è‡ªå·±çš„ä¸€å¥—è¡¨ç°è§„åˆ™ï¼šæ¯”è¾ƒå…·æœ‰ä»£è¡¨æ€§çš„å°±æ˜¯vertical-alignå±æ€§ï¼Œå¯¹äºæ›¿æ¢å…ƒç´ å’Œéæ›¿æ¢å…ƒç´ ï¼Œvertical-alignå±æ€§å€¼çš„è§£é‡Šæ˜¯ä¸ä¸€æ ·çš„ã€‚æ¯”æ–¹è¯´vertical-alignçš„é»˜è®¤å€¼çš„baselineï¼Œå¾ˆç®€å•çš„å±æ€§å€¼ï¼ŒåŸºçº¿ä¹‹æ„ï¼Œè¢«å®šä¹‰ä¸ºå­—ç¬¦xçš„ä¸‹è¾¹ç¼˜ï¼Œè€Œæ›¿æ¢å…ƒç´ çš„åŸºçº¿å´è¢«ç¡¬ç”Ÿç”Ÿå®šä¹‰æˆäº†å…ƒç´ çš„ä¸‹è¾¹ç¼˜ã€‚â—æ‰€æœ‰çš„æ›¿æ¢å…ƒç´ éƒ½æ˜¯å†…è”æ°´å¹³å…ƒç´ ï¼šä¹Ÿå°±æ˜¯æ›¿æ¢å…ƒç´ å’Œæ›¿æ¢å…ƒç´ ã€æ›¿æ¢å…ƒç´ å’Œæ–‡å­—éƒ½æ˜¯å¯ä»¥åœ¨ä¸€è¡Œæ˜¾ç¤ºçš„ã€‚ä½†æ˜¯ï¼Œæ›¿æ¢å…ƒç´ é»˜è®¤çš„displayå€¼å´æ˜¯ä¸ä¸€æ ·çš„ï¼Œæœ‰çš„æ˜¯inlineï¼Œæœ‰çš„æ˜¯inline-blockã€‚  \næ›¿æ¢å…ƒç´ çš„å°ºå¯¸ä»å†…è€Œå¤–åˆ†ä¸ºä¸‰ç±»ï¼šâ—å›ºæœ‰å°ºå¯¸ï¼š æŒ‡çš„æ˜¯æ›¿æ¢å†…å®¹åŸæœ¬çš„å°ºå¯¸ã€‚ä¾‹å¦‚ï¼Œå›¾ç‰‡ã€è§†é¢‘ä½œä¸ºä¸€ä¸ªç‹¬ç«‹æ–‡ä»¶å­˜åœ¨çš„æ—¶å€™ï¼Œéƒ½æ˜¯æœ‰ç€è‡ªå·±çš„å®½åº¦å’Œé«˜åº¦çš„ã€‚â—HTMLå°ºå¯¸ï¼š åªèƒ½é€šè¿‡HTMLåŸç”Ÿå±æ€§æ”¹å˜ï¼Œè¿™äº›HTMLåŸç”Ÿå±æ€§åŒ…æ‹¬çš„widthå’Œheightå±æ€§ã€çš„sizeå±æ€§ã€‚â—CSSå°ºå¯¸ï¼š ç‰¹æŒ‡å¯ä»¥é€šè¿‡CSSçš„widthå’Œheightæˆ–è€…max-width&#x2F;min-widthå’Œmax-height&#x2F;min-heightè®¾ç½®çš„å°ºå¯¸ï¼Œå¯¹åº”ç›’å°ºå¯¸ä¸­çš„content boxã€‚  \nè¿™ä¸‰å±‚ç»“æ„çš„è®¡ç®—è§„åˆ™å…·ä½“å¦‚ä¸‹ï¼šï¼ˆ1ï¼‰å¦‚æœæ²¡æœ‰CSSå°ºå¯¸å’ŒHTMLå°ºå¯¸ï¼Œåˆ™ä½¿ç”¨å›ºæœ‰å°ºå¯¸ä½œä¸ºæœ€ç»ˆçš„å®½é«˜ã€‚ï¼ˆ2ï¼‰å¦‚æœæ²¡æœ‰CSSå°ºå¯¸ï¼Œåˆ™ä½¿ç”¨HTMLå°ºå¯¸ä½œä¸ºæœ€ç»ˆçš„å®½é«˜ã€‚ï¼ˆ3ï¼‰å¦‚æœæœ‰CSSå°ºå¯¸ï¼Œåˆ™æœ€ç»ˆå°ºå¯¸ç”±CSSå±æ€§å†³å®šã€‚ï¼ˆ4ï¼‰å¦‚æœâ€œå›ºæœ‰å°ºå¯¸â€å«æœ‰å›ºæœ‰çš„å®½é«˜æ¯”ä¾‹ï¼ŒåŒæ—¶ä»…è®¾ç½®äº†å®½åº¦æˆ–ä»…è®¾ç½®äº†é«˜åº¦ï¼Œåˆ™å…ƒç´ ä¾ç„¶æŒ‰ç…§å›ºæœ‰çš„å®½é«˜æ¯”ä¾‹æ˜¾ç¤ºã€‚ï¼ˆ5ï¼‰å¦‚æœä¸Šé¢çš„æ¡ä»¶éƒ½ä¸ç¬¦åˆï¼Œåˆ™æœ€ç»ˆå®½åº¦è¡¨ç°ä¸º300åƒç´ ï¼Œé«˜åº¦ä¸º150åƒç´ ã€‚ï¼ˆ6ï¼‰å†…è”æ›¿æ¢å…ƒç´ å’Œå—çº§æ›¿æ¢å…ƒç´ ä½¿ç”¨ä¸Šé¢åŒä¸€å¥—å°ºå¯¸è®¡ç®—è§„åˆ™ã€‚16. å¸¸è§çš„å›¾ç‰‡æ ¼å¼åŠä½¿ç”¨åœºæ™¯ï¼ˆ1ï¼‰BMPï¼Œæ˜¯æ— æŸçš„ã€æ—¢æ”¯æŒç´¢å¼•è‰²ä¹Ÿæ”¯æŒç›´æ¥è‰²çš„ç‚¹é˜µå›¾ã€‚è¿™ç§å›¾ç‰‡æ ¼å¼å‡ ä¹æ²¡æœ‰å¯¹æ•°æ®è¿›è¡Œå‹ç¼©ï¼Œæ‰€ä»¥BMPæ ¼å¼çš„å›¾ç‰‡é€šå¸¸æ˜¯è¾ƒå¤§çš„æ–‡ä»¶ã€‚  \nï¼ˆ2ï¼‰GIFæ˜¯æ— æŸçš„ã€é‡‡ç”¨ç´¢å¼•è‰²çš„ç‚¹é˜µå›¾ã€‚é‡‡ç”¨LZWå‹ç¼©ç®—æ³•è¿›è¡Œç¼–ç ã€‚æ–‡ä»¶å°ï¼Œæ˜¯GIFæ ¼å¼çš„ä¼˜ç‚¹ï¼ŒåŒæ—¶ï¼ŒGIFæ ¼å¼è¿˜å…·æœ‰æ”¯æŒåŠ¨ç”»ä»¥åŠé€æ˜çš„ä¼˜ç‚¹ã€‚ä½†æ˜¯GIFæ ¼å¼ä»…æ”¯æŒ8bitçš„ç´¢å¼•è‰²ï¼Œæ‰€ä»¥GIFæ ¼å¼é€‚ç”¨äºå¯¹è‰²å½©è¦æ±‚ä¸é«˜åŒæ—¶éœ€è¦æ–‡ä»¶ä½“ç§¯è¾ƒå°çš„åœºæ™¯ã€‚  \nï¼ˆ3ï¼‰JPEGæ˜¯æœ‰æŸçš„ã€é‡‡ç”¨ç›´æ¥è‰²çš„ç‚¹é˜µå›¾ã€‚JPEGçš„å›¾ç‰‡çš„ä¼˜ç‚¹æ˜¯é‡‡ç”¨äº†ç›´æ¥è‰²ï¼Œå¾—ç›Šäºæ›´ä¸°å¯Œçš„è‰²å½©ï¼ŒJPEGéå¸¸é€‚åˆç”¨æ¥å­˜å‚¨ç…§ç‰‡ï¼Œä¸GIFç›¸æ¯”ï¼ŒJPEGä¸é€‚åˆç”¨æ¥å­˜å‚¨ä¼ä¸šLogoã€çº¿æ¡†ç±»çš„å›¾ã€‚å› ä¸ºæœ‰æŸå‹ç¼©ä¼šå¯¼è‡´å›¾ç‰‡æ¨¡ç³Šï¼Œè€Œç›´æ¥è‰²çš„é€‰ç”¨ï¼Œåˆä¼šå¯¼è‡´å›¾ç‰‡æ–‡ä»¶è¾ƒGIFæ›´å¤§ã€‚  \nï¼ˆ4ï¼‰PNG-8æ˜¯æ— æŸçš„ã€ä½¿ç”¨ç´¢å¼•è‰²çš„ç‚¹é˜µå›¾ã€‚PNGæ˜¯ä¸€ç§æ¯”è¾ƒæ–°çš„å›¾ç‰‡æ ¼å¼ï¼ŒPNG-8æ˜¯éå¸¸å¥½çš„GIFæ ¼å¼æ›¿ä»£è€…ï¼Œåœ¨å¯èƒ½çš„æƒ…å†µä¸‹ï¼Œåº”è¯¥å°½å¯èƒ½çš„ä½¿ç”¨PNG-8è€Œä¸æ˜¯GIFï¼Œå› ä¸ºåœ¨ç›¸åŒçš„å›¾ç‰‡æ•ˆæœä¸‹ï¼ŒPNG-8å…·æœ‰æ›´å°çš„æ–‡ä»¶ä½“ç§¯ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒPNG-8è¿˜æ”¯æŒé€æ˜åº¦çš„è°ƒèŠ‚ï¼Œè€ŒGIFå¹¶ä¸æ”¯æŒã€‚é™¤ééœ€è¦åŠ¨ç”»çš„æ”¯æŒï¼Œå¦åˆ™æ²¡æœ‰ç†ç”±ä½¿ç”¨GIFè€Œä¸æ˜¯PNG-8ã€‚  \nï¼ˆ5ï¼‰PNG-24æ˜¯æ— æŸçš„ã€ä½¿ç”¨ç›´æ¥è‰²çš„ç‚¹é˜µå›¾ã€‚PNG-24çš„ä¼˜ç‚¹åœ¨äºå®ƒå‹ç¼©äº†å›¾ç‰‡çš„æ•°æ®ï¼Œä½¿å¾—åŒæ ·æ•ˆæœçš„å›¾ç‰‡ï¼ŒPNG-24æ ¼å¼çš„æ–‡ä»¶å¤§å°è¦æ¯”BMPå°å¾—å¤šã€‚å½“ç„¶ï¼ŒPNG24çš„å›¾ç‰‡è¿˜æ˜¯è¦æ¯”JPEGã€GIFã€PNG-8å¤§å¾—å¤šã€‚  \nï¼ˆ6ï¼‰SVGæ˜¯æ— æŸçš„çŸ¢é‡å›¾ã€‚SVGæ˜¯çŸ¢é‡å›¾æ„å‘³ç€SVGå›¾ç‰‡ç”±ç›´çº¿å’Œæ›²çº¿ä»¥åŠç»˜åˆ¶å®ƒä»¬çš„æ–¹æ³•ç»„æˆã€‚å½“æ”¾å¤§SVGå›¾ç‰‡æ—¶ï¼Œçœ‹åˆ°çš„è¿˜æ˜¯çº¿å’Œæ›²çº¿ï¼Œè€Œä¸ä¼šå‡ºç°åƒç´ ç‚¹ã€‚SVGå›¾ç‰‡åœ¨æ”¾å¤§æ—¶ï¼Œä¸ä¼šå¤±çœŸï¼Œæ‰€ä»¥å®ƒé€‚åˆç”¨æ¥ç»˜åˆ¶Logoã€Iconç­‰ã€‚  \nï¼ˆ7ï¼‰WebPæ˜¯è°·æ­Œå¼€å‘çš„ä¸€ç§æ–°å›¾ç‰‡æ ¼å¼ï¼ŒWebPæ˜¯åŒæ—¶æ”¯æŒæœ‰æŸå’Œæ— æŸå‹ç¼©çš„ã€ä½¿ç”¨ç›´æ¥è‰²çš„ç‚¹é˜µå›¾ã€‚ä»åå­—å°±å¯ä»¥çœ‹å‡ºæ¥å®ƒæ˜¯ä¸ºWebè€Œç”Ÿçš„ï¼Œä»€ä¹ˆå«ä¸ºWebè€Œç”Ÿå‘¢ï¼Ÿå°±æ˜¯è¯´ç›¸åŒè´¨é‡çš„å›¾ç‰‡ï¼ŒWebPå…·æœ‰æ›´å°çš„æ–‡ä»¶ä½“ç§¯ã€‚ç°åœ¨ç½‘ç«™ä¸Šå……æ»¡äº†å¤§é‡çš„å›¾ç‰‡ï¼Œå¦‚æœèƒ½å¤Ÿé™ä½æ¯ä¸€ä¸ªå›¾ç‰‡çš„æ–‡ä»¶å¤§å°ï¼Œé‚£ä¹ˆå°†å¤§å¤§å‡å°‘æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´çš„æ•°æ®ä¼ è¾“é‡ï¼Œè¿›è€Œé™ä½è®¿é—®å»¶è¿Ÿï¼Œæå‡è®¿é—®ä½“éªŒã€‚ç›®å‰åªæœ‰Chromeæµè§ˆå™¨å’ŒOperaæµè§ˆå™¨æ”¯æŒWebPæ ¼å¼ï¼Œå…¼å®¹æ€§ä¸å¤ªå¥½ã€‚â—åœ¨æ— æŸå‹ç¼©çš„æƒ…å†µä¸‹ï¼Œç›¸åŒè´¨é‡çš„WebPå›¾ç‰‡ï¼Œæ–‡ä»¶å¤§å°è¦æ¯”PNGå°26%ï¼›â—åœ¨æœ‰æŸå‹ç¼©çš„æƒ…å†µä¸‹ï¼Œå…·æœ‰ç›¸åŒå›¾ç‰‡ç²¾åº¦çš„WebPå›¾ç‰‡ï¼Œæ–‡ä»¶å¤§å°è¦æ¯”JPEGå°25%~34%ï¼›â—WebPå›¾ç‰‡æ ¼å¼æ”¯æŒå›¾ç‰‡é€æ˜åº¦ï¼Œä¸€ä¸ªæ— æŸå‹ç¼©çš„WebPå›¾ç‰‡ï¼Œå¦‚æœè¦æ”¯æŒé€æ˜åº¦åªéœ€è¦22%çš„æ ¼å¤–æ–‡ä»¶å¤§å°ã€‚17. å¯¹ CSSSprites çš„ç†è§£CSSSpritesï¼ˆç²¾çµå›¾ï¼‰ï¼Œå°†ä¸€ä¸ªé¡µé¢æ¶‰åŠåˆ°çš„æ‰€æœ‰å›¾ç‰‡éƒ½åŒ…å«åˆ°ä¸€å¼ å¤§å›¾ä¸­å»ï¼Œç„¶ååˆ©ç”¨CSSçš„ background-imageï¼Œbackground-repeatï¼Œbackground-positionå±æ€§çš„ç»„åˆè¿›è¡ŒèƒŒæ™¯å®šä½ã€‚  \nä¼˜ç‚¹ï¼šâ—åˆ©ç”¨CSS Spritesèƒ½å¾ˆå¥½åœ°å‡å°‘ç½‘é¡µçš„httpè¯·æ±‚ï¼Œä»è€Œå¤§å¤§æé«˜äº†é¡µé¢çš„æ€§èƒ½ï¼Œè¿™æ˜¯CSS Spritesæœ€å¤§çš„ä¼˜ç‚¹ï¼›â—CSS Spritesèƒ½å‡å°‘å›¾ç‰‡çš„å­—èŠ‚ï¼ŒæŠŠ3å¼ å›¾ç‰‡åˆå¹¶æˆ1å¼ å›¾ç‰‡çš„å­—èŠ‚æ€»æ˜¯å°äºè¿™3å¼ å›¾ç‰‡çš„å­—èŠ‚æ€»å’Œã€‚  \nç¼ºç‚¹ï¼šâ—åœ¨å›¾ç‰‡åˆå¹¶æ—¶ï¼Œè¦æŠŠå¤šå¼ å›¾ç‰‡æœ‰åºçš„ã€åˆç†çš„åˆå¹¶æˆä¸€å¼ å›¾ç‰‡ï¼Œè¿˜è¦ç•™å¥½è¶³å¤Ÿçš„ç©ºé—´ï¼Œé˜²æ­¢æ¿å—å†…å‡ºç°ä¸å¿…è¦çš„èƒŒæ™¯ã€‚åœ¨å®½å±åŠé«˜åˆ†è¾¨ç‡ä¸‹çš„è‡ªé€‚åº”é¡µé¢ï¼Œå¦‚æœèƒŒæ™¯ä¸å¤Ÿå®½ï¼Œå¾ˆå®¹æ˜“å‡ºç°èƒŒæ™¯æ–­è£‚ï¼›â—CSSSpritesåœ¨å¼€å‘çš„æ—¶å€™ç›¸å¯¹æ¥è¯´æœ‰ç‚¹éº»çƒ¦ï¼Œéœ€è¦å€ŸåŠ©photoshopæˆ–å…¶ä»–å·¥å…·æ¥å¯¹æ¯ä¸ªèƒŒæ™¯å•å…ƒæµ‹é‡å…¶å‡†ç¡®çš„ä½ç½®ã€‚â—ç»´æŠ¤æ–¹é¢ï¼šCSS Spritesåœ¨ç»´æŠ¤çš„æ—¶å€™æ¯”è¾ƒéº»çƒ¦ï¼Œé¡µé¢èƒŒæ™¯æœ‰å°‘è®¸æ”¹åŠ¨æ—¶ï¼Œå°±è¦æ”¹è¿™å¼ åˆå¹¶çš„å›¾ç‰‡ï¼Œæ— éœ€æ”¹çš„åœ°æ–¹å°½é‡ä¸è¦åŠ¨ï¼Œè¿™æ ·é¿å…æ”¹åŠ¨æ›´å¤šçš„CSSï¼Œå¦‚æœåœ¨åŸæ¥çš„åœ°æ–¹æ”¾ä¸ä¸‹ï¼Œåˆåªèƒ½ï¼ˆæœ€å¥½ï¼‰å¾€ä¸‹åŠ å›¾ç‰‡ï¼Œè¿™æ ·å›¾ç‰‡çš„å­—èŠ‚å°±å¢åŠ äº†ï¼Œè¿˜è¦æ”¹åŠ¨CSSã€‚18. ä»€ä¹ˆæ˜¯ç‰©ç†åƒç´ ï¼Œé€»è¾‘åƒç´ å’Œåƒç´ å¯†åº¦ï¼Œä¸ºä»€ä¹ˆåœ¨ç§»åŠ¨ç«¯å¼€å‘æ—¶éœ€è¦ç”¨åˆ°@3x, @2xè¿™ç§å›¾ç‰‡ï¼Ÿä»¥ iPhone XS ä¸ºä¾‹ï¼Œå½“å†™ CSS ä»£ç æ—¶ï¼Œé’ˆå¯¹äºå•ä½ pxï¼Œå…¶å®½åº¦ä¸º 414px &amp; 896pxï¼Œä¹Ÿå°±æ˜¯è¯´å½“èµ‹äºˆä¸€ä¸ª DIVå…ƒç´ å®½åº¦ä¸º 414pxï¼Œè¿™ä¸ª DIV å°±ä¼šå¡«æ»¡æ‰‹æœºçš„å®½åº¦ï¼›  \nè€Œå¦‚æœæœ‰ä¸€æŠŠå°ºå­æ¥å®é™…æµ‹é‡è¿™éƒ¨æ‰‹æœºçš„ç‰©ç†åƒç´ ï¼Œå®é™…ä¸º 1242*2688 ç‰©ç†åƒç´ ï¼›ç»è¿‡è®¡ç®—å¯çŸ¥ï¼Œ1242&#x2F;414&#x3D;3ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨å•è¾¹ä¸Šï¼Œä¸€ä¸ªé€»è¾‘åƒç´ &#x3D;3ä¸ªç‰©ç†åƒç´ ï¼Œå°±è¯´è¿™ä¸ªå±å¹•çš„åƒç´ å¯†åº¦ä¸º 3ï¼Œä¹Ÿå°±æ˜¯å¸¸è¯´çš„ 3 å€å±ã€‚  \nå¯¹äºå›¾ç‰‡æ¥è¯´ï¼Œä¸ºäº†ä¿è¯å…¶ä¸å¤±çœŸï¼Œ1 ä¸ªå›¾ç‰‡åƒç´ è‡³å°‘è¦å¯¹åº”ä¸€ä¸ªç‰©ç†åƒç´ ï¼Œå‡å¦‚åŸå§‹å›¾ç‰‡æ˜¯ 500300 åƒç´ ï¼Œé‚£ä¹ˆåœ¨ 3 å€å±ä¸Šå°±è¦æ”¾ä¸€ä¸ª 1500900 åƒç´ çš„å›¾ç‰‡æ‰èƒ½ä¿è¯ 1 ä¸ªç‰©ç†åƒç´ è‡³å°‘å¯¹åº”ä¸€ä¸ªå›¾ç‰‡åƒç´ ï¼Œæ‰èƒ½ä¸å¤±çœŸã€‚  \n\nå½“ç„¶ï¼Œä¹Ÿå¯ä»¥é’ˆå¯¹æ‰€æœ‰å±å¹•ï¼Œéƒ½åªæä¾›æœ€é«˜æ¸…å›¾ç‰‡ã€‚è™½ç„¶ä½å¯†åº¦å±å¹•ç”¨ä¸åˆ°é‚£ä¹ˆå¤šå›¾ç‰‡åƒç´ ï¼Œè€Œä¸”ä¼šå› ä¸ºä¸‹è½½å¤šä½™çš„åƒç´ é€ æˆå¸¦å®½æµªè´¹å’Œä¸‹è½½å»¶è¿Ÿï¼Œä½†ä»ç»“æœä¸Šè¯´èƒ½ä¿è¯å›¾ç‰‡åœ¨æ‰€æœ‰å±å¹•ä¸Šéƒ½ä¸ä¼šå¤±çœŸã€‚  \nè¿˜å¯ä»¥ä½¿ç”¨ CSS åª’ä½“æŸ¥è¯¢æ¥åˆ¤æ–­ä¸åŒçš„åƒç´ å¯†åº¦ï¼Œä»è€Œé€‰æ‹©ä¸åŒçš„å›¾ç‰‡:  \n&#123;\n\n    my-image &#123; background: (low.png); &#125;\n\n    @media only screen and (min-device-pixel-ratio: 1.5) &#123;\n\n    #my-image &#123; background: (high.png); &#125;\n\n&#125;\n\n\nmargin å’Œ padding çš„ä½¿ç”¨åœºæ™¯â—éœ€è¦åœ¨borderå¤–ä¾§æ·»åŠ ç©ºç™½ï¼Œä¸”ç©ºç™½å¤„ä¸éœ€è¦èƒŒæ™¯ï¼ˆè‰²ï¼‰æ—¶ï¼Œä½¿ç”¨ marginï¼›â—éœ€è¦åœ¨borderå†…æµ‹æ·»åŠ ç©ºç™½ï¼Œä¸”ç©ºç™½å¤„éœ€è¦èƒŒæ™¯ï¼ˆè‰²ï¼‰æ—¶ï¼Œä½¿ç”¨ paddingã€‚  \nå¯¹line-height çš„ç†è§£åŠå…¶èµ‹å€¼æ–¹å¼ï¼ˆ1ï¼‰line-heightçš„æ¦‚å¿µï¼šâ—line-height æŒ‡ä¸€è¡Œæ–‡æœ¬çš„é«˜åº¦ï¼ŒåŒ…å«äº†å­—é—´è·ï¼Œå®é™…ä¸Šæ˜¯ä¸‹ä¸€è¡ŒåŸºçº¿åˆ°ä¸Šä¸€è¡ŒåŸºçº¿è·ç¦»ï¼›â—å¦‚æœä¸€ä¸ªæ ‡ç­¾æ²¡æœ‰å®šä¹‰ height å±æ€§ï¼Œé‚£ä¹ˆå…¶æœ€ç»ˆè¡¨ç°çš„é«˜åº¦ç”± line-height å†³å®šï¼›â—ä¸€ä¸ªå®¹å™¨æ²¡æœ‰è®¾ç½®é«˜åº¦ï¼Œé‚£ä¹ˆæ’‘å¼€å®¹å™¨é«˜åº¦çš„æ˜¯ line-heightï¼Œè€Œä¸æ˜¯å®¹å™¨å†…çš„æ–‡æœ¬å†…å®¹ï¼›â—æŠŠ line-height å€¼è®¾ç½®ä¸º height ä¸€æ ·å¤§å°çš„å€¼å¯ä»¥å®ç°å•è¡Œæ–‡å­—çš„å‚ç›´å±…ä¸­ï¼›â—line-height å’Œ height éƒ½èƒ½æ’‘å¼€ä¸€ä¸ªé«˜åº¦ï¼›ï¼ˆ2ï¼‰line-height çš„èµ‹å€¼æ–¹å¼ï¼šâ—å¸¦å•ä½ï¼špx æ˜¯å›ºå®šå€¼ï¼Œè€Œ em ä¼šå‚è€ƒçˆ¶å…ƒç´  font-size å€¼è®¡ç®—è‡ªèº«çš„è¡Œé«˜â—çº¯æ•°å­—ï¼šä¼šæŠŠæ¯”ä¾‹ä¼ é€’ç»™åä»£ã€‚ä¾‹å¦‚ï¼Œçˆ¶çº§è¡Œé«˜ä¸º 1.5ï¼Œå­å…ƒç´ å­—ä½“ä¸º 18pxï¼Œåˆ™å­å…ƒç´ è¡Œé«˜ä¸º 1.5 * 18 &#x3D; 27pxâ—ç™¾åˆ†æ¯”ï¼šå°†è®¡ç®—åçš„å€¼ä¼ é€’ç»™åä»£\n\n","slug":"é¢è¯•é¢˜ç¬”è®°â€”â€”CSSç¯‡","date":"2021-06-18T09:11:19.000Z","categories_index":"","tags_index":"","author_index":"Beastrong"}]